const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BbzfhM9c.js","assets/sha2-B8ngNs1r.js","assets/embedded-wallet-CkNbX7le.js","assets/if-defined-bXSVbTrp.js","assets/index-2NY8G_25.js","assets/index-DLkmzHyE.js","assets/ref-22i_5ULE.js","assets/index-CW4D1vFf.js","assets/index-DTAVt2YM.js","assets/index-C_FEcdoG.js","assets/index-DF1GXsHU.js","assets/index-T1GspJ6Y.js","assets/index-lIf7ph3H.js","assets/index-D0tG2_hP.js","assets/email-Dv9Vt-EG.js","assets/index-DVfUT5Dh.js","assets/socials-D_tM_yoc.js","assets/index-C3chrtg8.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BMpgp7St.js","assets/index-DBLuNfwR.js","assets/index-BDnlW-DU.js","assets/index-7NW91f5W.js","assets/swaps-DQkzpjAs.js","assets/index-DDGgYdhV.js","assets/index-CvCMVaAp.js","assets/index-CzBLq0oQ.js","assets/send-DARW-x05.js","assets/index-DkEmNKVP.js","assets/index-DeDQGvRE.js","assets/receive-DvYorRV8.js","assets/index-BPlTjEKh.js","assets/onramp-DHdvNsE0.js","assets/index-0FKAdPH3.js","assets/index-DSToKzHW.js","assets/transactions-D67LuTra.js","assets/index-DBx0w4sG.js","assets/index-lydWdwNq.js","assets/index-JM53WkKN.js","assets/index-BLPunXaX.js","assets/index-CVLtZx9E.js","assets/w3m-modal-DKjIS4s6.js","assets/SafeProvider-DVmZGcy5.js","assets/index-CCQ-jUte.js","assets/sha3-DVSzrknm.js","assets/index-DgAA_zSK.js","assets/index-D1xaZoRt.js"])))=>i.map(i=>d[i]);
var iM=Object.defineProperty;var QI=n=>{throw TypeError(n)};var aM=(n,e,t)=>e in n?iM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ie=(n,e,t)=>aM(n,typeof e!="symbol"?e+"":e,t),TA=(n,e,t)=>e.has(n)||QI("Cannot "+t);var N=(n,e,t)=>(TA(n,e,"read from private field"),t?t.call(n):e.get(n)),le=(n,e,t)=>e.has(n)?QI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),H=(n,e,t,r)=>(TA(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),be=(n,e,t)=>(TA(n,e,"access private method"),t);var Sg=(n,e,t,r)=>({set _(s){H(n,e,s,t)},get _(){return N(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function oM(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var xA={exports:{}},Ng={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI;function cM(){if(ZI)return Ng;ZI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:n,type:r,key:o,ref:s!==void 0?s:null,props:i}}return Ng.Fragment=e,Ng.jsx=t,Ng.jsxs=t,Ng}var XI;function lM(){return XI||(XI=1,xA.exports=cM()),xA.exports}var we=lM(),IA={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JI;function uM(){if(JI)return ct;JI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(O){return O===null||typeof O!="object"?null:(O=g&&O[g]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function A(O,G,Z){this.props=O,this.context=G,this.refs=E,this.updater=Z||b}A.prototype.isReactComponent={},A.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},A.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=A.prototype;function x(O,G,Z){this.props=O,this.context=G,this.refs=E,this.updater=Z||b}var T=x.prototype=new S;T.constructor=x,v(T,A.prototype),T.isPureReactComponent=!0;var k=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function F(O,G,Z,re,ee,ue){return Z=ue.ref,{$$typeof:n,type:O,key:G,ref:Z!==void 0?Z:null,props:ue}}function $(O,G){return F(O.type,G,void 0,void 0,void 0,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function z(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Z){return G[Z]})}var j=/\/+/g;function W(O,G){return typeof O=="object"&&O!==null&&O.key!=null?z(""+O.key):G.toString(36)}function ne(){}function J(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ne,ne):(O.status="pending",O.then(function(G){O.status==="pending"&&(O.status="fulfilled",O.value=G)},function(G){O.status==="pending"&&(O.status="rejected",O.reason=G)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function I(O,G,Z,re,ee){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ge=!1;if(O===null)ge=!0;else switch(ue){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(O.$$typeof){case n:case e:ge=!0;break;case p:return ge=O._init,I(ge(O._payload),G,Z,re,ee)}}if(ge)return ee=ee(O),ge=re===""?"."+W(O,0):re,k(ee)?(Z="",ge!=null&&(Z=ge.replace(j,"$&/")+"/"),I(ee,G,Z,"",function(Te){return Te})):ee!=null&&(B(ee)&&(ee=$(ee,Z+(ee.key==null||O&&O.key===ee.key?"":(""+ee.key).replace(j,"$&/")+"/")+ge)),G.push(ee)),1;ge=0;var Ce=re===""?".":re+":";if(k(O))for(var Pe=0;Pe<O.length;Pe++)re=O[Pe],ue=Ce+W(re,Pe),ge+=I(re,G,Z,ue,ee);else if(Pe=y(O),typeof Pe=="function")for(O=Pe.call(O),Pe=0;!(re=O.next()).done;)re=re.value,ue=Ce+W(re,Pe++),ge+=I(re,G,Z,ue,ee);else if(ue==="object"){if(typeof O.then=="function")return I(J(O),G,Z,re,ee);throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ge}function _(O,G,Z){if(O==null)return O;var re=[],ee=0;return I(O,re,"","",function(ue){return G.call(Z,ue,ee++)}),re}function L(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(Z){(O._status===0||O._status===-1)&&(O._status=1,O._result=Z)},function(Z){(O._status===0||O._status===-1)&&(O._status=2,O._result=Z)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var q=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function K(){}return ct.Children={map:_,forEach:function(O,G,Z){_(O,function(){G.apply(this,arguments)},Z)},count:function(O){var G=0;return _(O,function(){G++}),G},toArray:function(O){return _(O,function(G){return G})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ct.Component=A,ct.Fragment=t,ct.Profiler=s,ct.PureComponent=x,ct.StrictMode=r,ct.Suspense=h,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ct.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},ct.cache=function(O){return function(){return O.apply(null,arguments)}},ct.cloneElement=function(O,G,Z){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var re=v({},O.props),ee=O.key,ue=void 0;if(G!=null)for(ge in G.ref!==void 0&&(ue=void 0),G.key!==void 0&&(ee=""+G.key),G)!P.call(G,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&G.ref===void 0||(re[ge]=G[ge]);var ge=arguments.length-2;if(ge===1)re.children=Z;else if(1<ge){for(var Ce=Array(ge),Pe=0;Pe<ge;Pe++)Ce[Pe]=arguments[Pe+2];re.children=Ce}return F(O.type,ee,void 0,void 0,ue,re)},ct.createContext=function(O){return O={$$typeof:o,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:i,_context:O},O},ct.createElement=function(O,G,Z){var re,ee={},ue=null;if(G!=null)for(re in G.key!==void 0&&(ue=""+G.key),G)P.call(G,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ee[re]=G[re]);var ge=arguments.length-2;if(ge===1)ee.children=Z;else if(1<ge){for(var Ce=Array(ge),Pe=0;Pe<ge;Pe++)Ce[Pe]=arguments[Pe+2];ee.children=Ce}if(O&&O.defaultProps)for(re in ge=O.defaultProps,ge)ee[re]===void 0&&(ee[re]=ge[re]);return F(O,ue,void 0,void 0,null,ee)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(O){return{$$typeof:l,render:O}},ct.isValidElement=B,ct.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:L}},ct.memo=function(O,G){return{$$typeof:d,type:O,compare:G===void 0?null:G}},ct.startTransition=function(O){var G=R.T,Z={};R.T=Z;try{var re=O(),ee=R.S;ee!==null&&ee(Z,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(K,q)}catch(ue){q(ue)}finally{R.T=G}},ct.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ct.use=function(O){return R.H.use(O)},ct.useActionState=function(O,G,Z){return R.H.useActionState(O,G,Z)},ct.useCallback=function(O,G){return R.H.useCallback(O,G)},ct.useContext=function(O){return R.H.useContext(O)},ct.useDebugValue=function(){},ct.useDeferredValue=function(O,G){return R.H.useDeferredValue(O,G)},ct.useEffect=function(O,G,Z){var re=R.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(O,G)},ct.useId=function(){return R.H.useId()},ct.useImperativeHandle=function(O,G,Z){return R.H.useImperativeHandle(O,G,Z)},ct.useInsertionEffect=function(O,G){return R.H.useInsertionEffect(O,G)},ct.useLayoutEffect=function(O,G){return R.H.useLayoutEffect(O,G)},ct.useMemo=function(O,G){return R.H.useMemo(O,G)},ct.useOptimistic=function(O,G){return R.H.useOptimistic(O,G)},ct.useReducer=function(O,G,Z){return R.H.useReducer(O,G,Z)},ct.useRef=function(O){return R.H.useRef(O)},ct.useState=function(O){return R.H.useState(O)},ct.useSyncExternalStore=function(O,G,Z){return R.H.useSyncExternalStore(O,G,Z)},ct.useTransition=function(){return R.H.useTransition()},ct.version="19.1.0",ct}var eO;function G2(){return eO||(eO=1,IA.exports=uM()),IA.exports}var de=G2();const De=$0(de);var OA={exports:{}},Tg={},RA={exports:{}},DA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO;function hM(){return tO||(tO=1,function(n){function e(_,L){var q=_.length;_.push(L);e:for(;0<q;){var K=q-1>>>1,O=_[K];if(0<s(O,L))_[K]=L,_[q]=O,q=K;else break e}}function t(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var L=_[0],q=_.pop();if(q!==L){_[0]=q;e:for(var K=0,O=_.length,G=O>>>1;K<G;){var Z=2*(K+1)-1,re=_[Z],ee=Z+1,ue=_[ee];if(0>s(re,q))ee<O&&0>s(ue,re)?(_[K]=ue,_[ee]=q,K=ee):(_[K]=re,_[Z]=q,K=Z);else if(ee<O&&0>s(ue,q))_[K]=ue,_[ee]=q,K=ee;else break e}}return L}function s(_,L){var q=_.sortIndex-L.sortIndex;return q!==0?q:_.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var h=[],d=[],p=1,g=null,y=3,b=!1,v=!1,E=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function k(_){for(var L=t(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=_)r(d),L.sortIndex=L.expirationTime,e(h,L);else break;L=t(d)}}function R(_){if(E=!1,k(_),!v)if(t(h)!==null)v=!0,P||(P=!0,W());else{var L=t(d);L!==null&&I(R,L.startTime-_)}}var P=!1,F=-1,$=5,B=-1;function z(){return A?!0:!(n.unstable_now()-B<$)}function j(){if(A=!1,P){var _=n.unstable_now();B=_;var L=!0;try{e:{v=!1,E&&(E=!1,x(F),F=-1),b=!0;var q=y;try{t:{for(k(_),g=t(h);g!==null&&!(g.expirationTime>_&&z());){var K=g.callback;if(typeof K=="function"){g.callback=null,y=g.priorityLevel;var O=K(g.expirationTime<=_);if(_=n.unstable_now(),typeof O=="function"){g.callback=O,k(_),L=!0;break t}g===t(h)&&r(h),k(_)}else r(h);g=t(h)}if(g!==null)L=!0;else{var G=t(d);G!==null&&I(R,G.startTime-_),L=!1}}break e}finally{g=null,y=q,b=!1}L=void 0}}finally{L?W():P=!1}}}var W;if(typeof T=="function")W=function(){T(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,J=ne.port2;ne.port1.onmessage=j,W=function(){J.postMessage(null)}}else W=function(){S(j,0)};function I(_,L){F=S(function(){_(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(_){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var q=y;y=L;try{return _()}finally{y=q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(_,L){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var q=y;y=_;try{return L()}finally{y=q}},n.unstable_scheduleCallback=function(_,L,q){var K=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,_){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=q+O,_={id:p++,callback:L,priorityLevel:_,startTime:q,expirationTime:O,sortIndex:-1},q>K?(_.sortIndex=q,e(d,_),t(h)===null&&_===t(d)&&(E?(x(F),F=-1):E=!0,I(R,q-K))):(_.sortIndex=O,e(h,_),v||b||(v=!0,P||(P=!0,W()))),_},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(_){var L=y;return function(){var q=y;y=L;try{return _.apply(this,arguments)}finally{y=q}}}}(DA)),DA}var nO;function dM(){return nO||(nO=1,RA.exports=hM()),RA.exports}var PA={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rO;function fM(){if(rO)return Ar;rO=1;var n=G2();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(h,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:h,containerInfo:d,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return i(h,d,null,p)},Ar.flushSync=function(h){var d=o.T,p=r.p;try{if(o.T=null,r.p=2,h)return h()}finally{o.T=d,r.p=p,r.d.f()}},Ar.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},Ar.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ar.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ar.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=l(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},Ar.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin);r.d.L(h,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ar.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=l(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},Ar.requestFormReset=function(h){r.d.r(h)},Ar.unstable_batchedUpdates=function(h,d){return h(d)},Ar.useFormState=function(h,d,p){return o.H.useFormState(h,d,p)},Ar.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ar.version="19.1.0",Ar}var sO;function pM(){if(sO)return PA.exports;sO=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),PA.exports=fM(),PA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO;function gM(){if(iO)return Tg;iO=1;var n=dM(),e=G2(),t=pM();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var c=a,u=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(u=c.return),a=c.return;while(a)}return c.tag===3?u:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(i(a)!==a)throw Error(r(188))}function h(a){var c=a.alternate;if(!c){if(c=i(a),c===null)throw Error(r(188));return c!==a?null:a}for(var u=a,f=c;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return l(m),a;if(w===f)return l(m),c;w=w.sibling}throw Error(r(188))}if(u.return!==f.return)u=m,f=w;else{for(var C=!1,U=m.child;U;){if(U===u){C=!0,u=m,f=w;break}if(U===f){C=!0,f=m,u=w;break}U=U.sibling}if(!C){for(U=w.child;U;){if(U===u){C=!0,u=w,f=m;break}if(U===f){C=!0,f=w,u=m;break}U=U.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),T=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Symbol.for("react.client.reference");function J(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ne?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case T:return(a.displayName||"Context")+".Provider";case x:return(a._context.displayName||"Context")+".Consumer";case k:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case F:return c=a.displayName||null,c!==null?c:J(a.type)||"Memo";case $:c=a._payload,a=a._init;try{return J(a(c))}catch{}}return null}var I=Array.isArray,_=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},K=[],O=-1;function G(a){return{current:a}}function Z(a){0>O||(a.current=K[O],K[O]=null,O--)}function re(a,c){O++,K[O]=a.current,a.current=c}var ee=G(null),ue=G(null),ge=G(null),Ce=G(null);function Pe(a,c){switch(re(ge,c),re(ue,a),re(ee,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?_I(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=_I(c),a=SI(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(ee),re(ee,a)}function Te(){Z(ee),Z(ue),Z(ge)}function Qe(a){a.memoizedState!==null&&re(Ce,a);var c=ee.current,u=SI(c,a.type);c!==u&&(re(ue,a),re(ee,u))}function Wt(a){ue.current===a&&(Z(ee),Z(ue)),Ce.current===a&&(Z(Ce),Eg._currentValue=q)}var Bt=Object.prototype.hasOwnProperty,mn=n.unstable_scheduleCallback,hn=n.unstable_cancelCallback,na=n.unstable_shouldYield,Ch=n.unstable_requestPaint,Ws=n.unstable_now,pv=n.unstable_getCurrentPriorityLevel,Np=n.unstable_ImmediatePriority,Tp=n.unstable_UserBlockingPriority,Yo=n.unstable_NormalPriority,uy=n.unstable_LowPriority,xp=n.unstable_IdlePriority,hy=n.log,dy=n.unstable_setDisableYieldValue,Qo=null,Ur=null;function ra(a){if(typeof hy=="function"&&dy(a),Ur&&typeof Ur.setStrictMode=="function")try{Ur.setStrictMode(Qo,a)}catch{}}var kr=Math.clz32?Math.clz32:V6,gv=Math.log,q6=Math.LN2;function V6(a){return a>>>=0,a===0?32:31-(gv(a)/q6|0)|0}var fy=256,py=4194304;function Sl(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function gy(a,c,u){var f=a.pendingLanes;if(f===0)return 0;var m=0,w=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var U=f&134217727;return U!==0?(f=U&~w,f!==0?m=Sl(f):(C&=U,C!==0?m=Sl(C):u||(u=U&~a,u!==0&&(m=Sl(u))))):(U=f&~w,U!==0?m=Sl(U):C!==0?m=Sl(C):u||(u=f&~a,u!==0&&(m=Sl(u)))),m===0?0:c!==0&&c!==m&&(c&w)===0&&(w=m&-m,u=c&-c,w>=u||w===32&&(u&4194048)!==0)?c:m}function Ip(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function G6(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oN(){var a=fy;return fy<<=1,(fy&4194048)===0&&(fy=256),a}function cN(){var a=py;return py<<=1,(py&62914560)===0&&(py=4194304),a}function mv(a){for(var c=[],u=0;31>u;u++)c.push(a);return c}function Op(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function K6(a,c,u,f,m,w){var C=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var U=a.entanglements,V=a.expirationTimes,se=a.hiddenUpdates;for(u=C&~u;0<u;){var he=31-kr(u),pe=1<<he;U[he]=0,V[he]=-1;var ae=se[he];if(ae!==null)for(se[he]=null,he=0;he<ae.length;he++){var oe=ae[he];oe!==null&&(oe.lane&=-536870913)}u&=~pe}f!==0&&lN(a,f,0),w!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=w&~(C&~c))}function lN(a,c,u){a.pendingLanes|=c,a.suspendedLanes&=~c;var f=31-kr(c);a.entangledLanes|=c,a.entanglements[f]=a.entanglements[f]|1073741824|u&4194090}function uN(a,c){var u=a.entangledLanes|=c;for(a=a.entanglements;u;){var f=31-kr(u),m=1<<f;m&c|a[f]&c&&(a[f]|=c),u&=~m}}function yv(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function wv(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function hN(){var a=L.p;return a!==0?a:(a=window.event,a===void 0?32:qI(a.type))}function W6(a,c){var u=L.p;try{return L.p=a,c()}finally{L.p=u}}var Zo=Math.random().toString(36).slice(2),Er="__reactFiber$"+Zo,Zr="__reactProps$"+Zo,_h="__reactContainer$"+Zo,bv="__reactEvents$"+Zo,Y6="__reactListeners$"+Zo,Q6="__reactHandles$"+Zo,dN="__reactResources$"+Zo,Rp="__reactMarker$"+Zo;function Ev(a){delete a[Er],delete a[Zr],delete a[bv],delete a[Y6],delete a[Q6]}function Sh(a){var c=a[Er];if(c)return c;for(var u=a.parentNode;u;){if(c=u[_h]||u[Er]){if(u=c.alternate,c.child!==null||u!==null&&u.child!==null)for(a=II(a);a!==null;){if(u=a[Er])return u;a=II(a)}return c}a=u,u=a.parentNode}return null}function Nh(a){if(a=a[Er]||a[_h]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Dp(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Th(a){var c=a[dN];return c||(c=a[dN]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function qn(a){a[Rp]=!0}var fN=new Set,pN={};function Nl(a,c){xh(a,c),xh(a+"Capture",c)}function xh(a,c){for(pN[a]=c,a=0;a<c.length;a++)fN.add(c[a])}var Z6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gN={},mN={};function X6(a){return Bt.call(mN,a)?!0:Bt.call(gN,a)?!1:Z6.test(a)?mN[a]=!0:(gN[a]=!0,!1)}function my(a,c,u){if(X6(c))if(u===null)a.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var f=c.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+u)}}function yy(a,c,u){if(u===null)a.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+u)}}function Va(a,c,u,f){if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(c,u,""+f)}}var vv,yN;function Ih(a){if(vv===void 0)try{throw Error()}catch(u){var c=u.stack.trim().match(/\n( *(at )?)/);vv=c&&c[1]||"",yN=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vv+a+yN}var Av=!1;function Cv(a,c){if(!a||Av)return"";Av=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(c){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var ae=oe}Reflect.construct(a,[],pe)}else{try{pe.call()}catch(oe){ae=oe}a.call(pe.prototype)}}else{try{throw Error()}catch(oe){ae=oe}(pe=a())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&ae&&typeof oe.stack=="string")return[oe.stack,ae.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=f.DetermineComponentFrameRoot(),C=w[0],U=w[1];if(C&&U){var V=C.split(`
`),se=U.split(`
`);for(m=f=0;f<V.length&&!V[f].includes("DetermineComponentFrameRoot");)f++;for(;m<se.length&&!se[m].includes("DetermineComponentFrameRoot");)m++;if(f===V.length||m===se.length)for(f=V.length-1,m=se.length-1;1<=f&&0<=m&&V[f]!==se[m];)m--;for(;1<=f&&0<=m;f--,m--)if(V[f]!==se[m]){if(f!==1||m!==1)do if(f--,m--,0>m||V[f]!==se[m]){var he=`
`+V[f].replace(" at new "," at ");return a.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",a.displayName)),he}while(1<=f&&0<=m);break}}}finally{Av=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Ih(u):""}function J6(a){switch(a.tag){case 26:case 27:case 5:return Ih(a.type);case 16:return Ih("Lazy");case 13:return Ih("Suspense");case 19:return Ih("SuspenseList");case 0:case 15:return Cv(a.type,!1);case 11:return Cv(a.type.render,!1);case 1:return Cv(a.type,!0);case 31:return Ih("Activity");default:return""}}function wN(a){try{var c="";do c+=J6(a),a=a.return;while(a);return c}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Ys(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function bN(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function eB(a){var c=bN(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),f=""+a[c];if(!a.hasOwnProperty(c)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return m.call(this)},set:function(C){f=""+C,w.call(this,C)}}),Object.defineProperty(a,c,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function wy(a){a._valueTracker||(a._valueTracker=eB(a))}function EN(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var u=c.getValue(),f="";return a&&(f=bN(a)?a.checked?"true":"false":a.value),a=f,a!==u?(c.setValue(a),!0):!1}function by(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var tB=/[\n"\\]/g;function Qs(a){return a.replace(tB,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function _v(a,c,u,f,m,w,C,U){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),c!=null?C==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Ys(c)):a.value!==""+Ys(c)&&(a.value=""+Ys(c)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),c!=null?Sv(a,C,Ys(c)):u!=null?Sv(a,C,Ys(u)):f!=null&&a.removeAttribute("value"),m==null&&w!=null&&(a.defaultChecked=!!w),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.name=""+Ys(U):a.removeAttribute("name")}function vN(a,c,u,f,m,w,C,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),c!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;u=u!=null?""+Ys(u):"",c=c!=null?""+Ys(c):u,U||c===a.value||(a.value=c),a.defaultValue=c}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=U?a.checked:!!f,a.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C)}function Sv(a,c,u){c==="number"&&by(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Oh(a,c,u,f){if(a=a.options,c){c={};for(var m=0;m<u.length;m++)c["$"+u[m]]=!0;for(u=0;u<a.length;u++)m=c.hasOwnProperty("$"+a[u].value),a[u].selected!==m&&(a[u].selected=m),m&&f&&(a[u].defaultSelected=!0)}else{for(u=""+Ys(u),c=null,m=0;m<a.length;m++){if(a[m].value===u){a[m].selected=!0,f&&(a[m].defaultSelected=!0);return}c!==null||a[m].disabled||(c=a[m])}c!==null&&(c.selected=!0)}}function AN(a,c,u){if(c!=null&&(c=""+Ys(c),c!==a.value&&(a.value=c),u==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=u!=null?""+Ys(u):""}function CN(a,c,u,f){if(c==null){if(f!=null){if(u!=null)throw Error(r(92));if(I(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),c=u}u=Ys(c),a.defaultValue=u,f=a.textContent,f===u&&f!==""&&f!==null&&(a.value=f)}function Rh(a,c){if(c){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=c;return}}a.textContent=c}var nB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _N(a,c,u){var f=c.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":f?a.setProperty(c,u):typeof u!="number"||u===0||nB.has(c)?c==="float"?a.cssFloat=u:a[c]=(""+u).trim():a[c]=u+"px"}function SN(a,c,u){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||c!=null&&c.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var m in c)f=c[m],c.hasOwnProperty(m)&&u[m]!==f&&_N(a,m,f)}else for(var w in c)c.hasOwnProperty(w)&&_N(a,w,c[w])}function Nv(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ey(a){return sB.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Tv=null;function xv(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Dh=null,Ph=null;function NN(a){var c=Nh(a);if(c&&(a=c.stateNode)){var u=a[Zr]||null;e:switch(a=c.stateNode,c.type){case"input":if(_v(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),c=u.name,u.type==="radio"&&c!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Qs(""+c)+'"][type="radio"]'),c=0;c<u.length;c++){var f=u[c];if(f!==a&&f.form===a.form){var m=f[Zr]||null;if(!m)throw Error(r(90));_v(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(c=0;c<u.length;c++)f=u[c],f.form===a.form&&EN(f)}break e;case"textarea":AN(a,u.value,u.defaultValue);break e;case"select":c=u.value,c!=null&&Oh(a,!!u.multiple,c,!1)}}}var Iv=!1;function TN(a,c,u){if(Iv)return a(c,u);Iv=!0;try{var f=a(c);return f}finally{if(Iv=!1,(Dh!==null||Ph!==null)&&(iw(),Dh&&(c=Dh,a=Ph,Ph=Dh=null,NN(c),a)))for(c=0;c<a.length;c++)NN(a[c])}}function Pp(a,c){var u=a.stateNode;if(u===null)return null;var f=u[Zr]||null;if(f===null)return null;u=f[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,c,typeof u));return u}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ov=!1;if(Ga)try{var Up={};Object.defineProperty(Up,"passive",{get:function(){Ov=!0}}),window.addEventListener("test",Up,Up),window.removeEventListener("test",Up,Up)}catch{Ov=!1}var Xo=null,Rv=null,vy=null;function xN(){if(vy)return vy;var a,c=Rv,u=c.length,f,m="value"in Xo?Xo.value:Xo.textContent,w=m.length;for(a=0;a<u&&c[a]===m[a];a++);var C=u-a;for(f=1;f<=C&&c[u-f]===m[w-f];f++);return vy=m.slice(a,1<f?1-f:void 0)}function Ay(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Cy(){return!0}function IN(){return!1}function Xr(a){function c(u,f,m,w,C){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var U in a)a.hasOwnProperty(U)&&(u=a[U],this[U]=u?u(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Cy:IN,this.isPropagationStopped=IN,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Cy)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Cy)},persist:function(){},isPersistent:Cy}),c}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_y=Xr(Tl),kp=p({},Tl,{view:0,detail:0}),iB=Xr(kp),Dv,Pv,Bp,Sy=p({},kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kv,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Bp&&(Bp&&a.type==="mousemove"?(Dv=a.screenX-Bp.screenX,Pv=a.screenY-Bp.screenY):Pv=Dv=0,Bp=a),Dv)},movementY:function(a){return"movementY"in a?a.movementY:Pv}}),ON=Xr(Sy),aB=p({},Sy,{dataTransfer:0}),oB=Xr(aB),cB=p({},kp,{relatedTarget:0}),Uv=Xr(cB),lB=p({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),uB=Xr(lB),hB=p({},Tl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dB=Xr(hB),fB=p({},Tl,{data:0}),RN=Xr(fB),pB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yB(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=mB[a])?!!c[a]:!1}function kv(){return yB}var wB=p({},kp,{key:function(a){if(a.key){var c=pB[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Ay(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?gB[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kv,charCode:function(a){return a.type==="keypress"?Ay(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ay(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),bB=Xr(wB),EB=p({},Sy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DN=Xr(EB),vB=p({},kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kv}),AB=Xr(vB),CB=p({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_B=Xr(CB),SB=p({},Sy,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),NB=Xr(SB),TB=p({},Tl,{newState:0,oldState:0}),xB=Xr(TB),IB=[9,13,27,32],Bv=Ga&&"CompositionEvent"in window,Lp=null;Ga&&"documentMode"in document&&(Lp=document.documentMode);var OB=Ga&&"TextEvent"in window&&!Lp,PN=Ga&&(!Bv||Lp&&8<Lp&&11>=Lp),UN=" ",kN=!1;function BN(a,c){switch(a){case"keyup":return IB.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LN(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Uh=!1;function RB(a,c){switch(a){case"compositionend":return LN(c);case"keypress":return c.which!==32?null:(kN=!0,UN);case"textInput":return a=c.data,a===UN&&kN?null:a;default:return null}}function DB(a,c){if(Uh)return a==="compositionend"||!Bv&&BN(a,c)?(a=xN(),vy=Rv=Xo=null,Uh=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return PN&&c.locale!=="ko"?null:c.data;default:return null}}var PB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MN(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!PB[a.type]:c==="textarea"}function $N(a,c,u,f){Dh?Ph?Ph.push(f):Ph=[f]:Dh=f,c=hw(c,"onChange"),0<c.length&&(u=new _y("onChange","change",null,u,f),a.push({event:u,listeners:c}))}var Mp=null,$p=null;function UB(a){bI(a,0)}function Ny(a){var c=Dp(a);if(EN(c))return a}function FN(a,c){if(a==="change")return c}var HN=!1;if(Ga){var Lv;if(Ga){var Mv="oninput"in document;if(!Mv){var zN=document.createElement("div");zN.setAttribute("oninput","return;"),Mv=typeof zN.oninput=="function"}Lv=Mv}else Lv=!1;HN=Lv&&(!document.documentMode||9<document.documentMode)}function jN(){Mp&&(Mp.detachEvent("onpropertychange",qN),$p=Mp=null)}function qN(a){if(a.propertyName==="value"&&Ny($p)){var c=[];$N(c,$p,a,xv(a)),TN(UB,c)}}function kB(a,c,u){a==="focusin"?(jN(),Mp=c,$p=u,Mp.attachEvent("onpropertychange",qN)):a==="focusout"&&jN()}function BB(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ny($p)}function LB(a,c){if(a==="click")return Ny(c)}function MB(a,c){if(a==="input"||a==="change")return Ny(c)}function $B(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var _s=typeof Object.is=="function"?Object.is:$B;function Fp(a,c){if(_s(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var u=Object.keys(a),f=Object.keys(c);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!Bt.call(c,m)||!_s(a[m],c[m]))return!1}return!0}function VN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function GN(a,c){var u=VN(a);a=0;for(var f;u;){if(u.nodeType===3){if(f=a+u.textContent.length,a<=c&&f>=c)return{node:u,offset:c-a};a=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=VN(u)}}function KN(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?KN(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function WN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=by(a.document);c instanceof a.HTMLIFrameElement;){try{var u=typeof c.contentWindow.location.href=="string"}catch{u=!1}if(u)a=c.contentWindow;else break;c=by(a.document)}return c}function $v(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var FB=Ga&&"documentMode"in document&&11>=document.documentMode,kh=null,Fv=null,Hp=null,Hv=!1;function YN(a,c,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hv||kh==null||kh!==by(f)||(f=kh,"selectionStart"in f&&$v(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Hp&&Fp(Hp,f)||(Hp=f,f=hw(Fv,"onSelect"),0<f.length&&(c=new _y("onSelect","select",null,c,u),a.push({event:c,listeners:f}),c.target=kh)))}function xl(a,c){var u={};return u[a.toLowerCase()]=c.toLowerCase(),u["Webkit"+a]="webkit"+c,u["Moz"+a]="moz"+c,u}var Bh={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},zv={},QN={};Ga&&(QN=document.createElement("div").style,"AnimationEvent"in window||(delete Bh.animationend.animation,delete Bh.animationiteration.animation,delete Bh.animationstart.animation),"TransitionEvent"in window||delete Bh.transitionend.transition);function Il(a){if(zv[a])return zv[a];if(!Bh[a])return a;var c=Bh[a],u;for(u in c)if(c.hasOwnProperty(u)&&u in QN)return zv[a]=c[u];return a}var ZN=Il("animationend"),XN=Il("animationiteration"),JN=Il("animationstart"),HB=Il("transitionrun"),zB=Il("transitionstart"),jB=Il("transitioncancel"),eT=Il("transitionend"),tT=new Map,jv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jv.push("scrollEnd");function Si(a,c){tT.set(a,c),Nl(c,[a])}var nT=new WeakMap;function Zs(a,c){if(typeof a=="object"&&a!==null){var u=nT.get(a);return u!==void 0?u:(c={value:a,source:c,stack:wN(c)},nT.set(a,c),c)}return{value:a,source:c,stack:wN(c)}}var Xs=[],Lh=0,qv=0;function Ty(){for(var a=Lh,c=qv=Lh=0;c<a;){var u=Xs[c];Xs[c++]=null;var f=Xs[c];Xs[c++]=null;var m=Xs[c];Xs[c++]=null;var w=Xs[c];if(Xs[c++]=null,f!==null&&m!==null){var C=f.pending;C===null?m.next=m:(m.next=C.next,C.next=m),f.pending=m}w!==0&&rT(u,m,w)}}function xy(a,c,u,f){Xs[Lh++]=a,Xs[Lh++]=c,Xs[Lh++]=u,Xs[Lh++]=f,qv|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Vv(a,c,u,f){return xy(a,c,u,f),Iy(a)}function Mh(a,c){return xy(a,null,null,c),Iy(a)}function rT(a,c,u){a.lanes|=u;var f=a.alternate;f!==null&&(f.lanes|=u);for(var m=!1,w=a.return;w!==null;)w.childLanes|=u,f=w.alternate,f!==null&&(f.childLanes|=u),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(m=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,m&&c!==null&&(m=31-kr(u),a=w.hiddenUpdates,f=a[m],f===null?a[m]=[c]:f.push(c),c.lane=u|536870912),w):null}function Iy(a){if(50<dg)throw dg=0,Z1=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var $h={};function qB(a,c,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(a,c,u,f){return new qB(a,c,u,f)}function Gv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ka(a,c){var u=a.alternate;return u===null?(u=Ss(a.tag,c,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=c,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,c=a.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function sT(a,c){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,c=u.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Oy(a,c,u,f,m,w){var C=0;if(f=a,typeof a=="function")Gv(a)&&(C=1);else if(typeof a=="string")C=GL(a,u,ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Ss(31,u,c,m),a.elementType=B,a.lanes=w,a;case v:return Ol(u.children,m,w,c);case E:C=8,m|=24;break;case A:return a=Ss(12,u,c,m|2),a.elementType=A,a.lanes=w,a;case R:return a=Ss(13,u,c,m),a.elementType=R,a.lanes=w,a;case P:return a=Ss(19,u,c,m),a.elementType=P,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case S:case T:C=10;break e;case x:C=9;break e;case k:C=11;break e;case F:C=14;break e;case $:C=16,f=null;break e}C=29,u=Error(r(130,a===null?"null":typeof a,"")),f=null}return c=Ss(C,u,c,m),c.elementType=a,c.type=f,c.lanes=w,c}function Ol(a,c,u,f){return a=Ss(7,a,f,c),a.lanes=u,a}function Kv(a,c,u){return a=Ss(6,a,null,c),a.lanes=u,a}function Wv(a,c,u){return c=Ss(4,a.children!==null?a.children:[],a.key,c),c.lanes=u,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Fh=[],Hh=0,Ry=null,Dy=0,Js=[],ei=0,Rl=null,Wa=1,Ya="";function Dl(a,c){Fh[Hh++]=Dy,Fh[Hh++]=Ry,Ry=a,Dy=c}function iT(a,c,u){Js[ei++]=Wa,Js[ei++]=Ya,Js[ei++]=Rl,Rl=a;var f=Wa;a=Ya;var m=32-kr(f)-1;f&=~(1<<m),u+=1;var w=32-kr(c)+m;if(30<w){var C=m-m%5;w=(f&(1<<C)-1).toString(32),f>>=C,m-=C,Wa=1<<32-kr(c)+m|u<<m|f,Ya=w+a}else Wa=1<<w|u<<m|f,Ya=a}function Yv(a){a.return!==null&&(Dl(a,1),iT(a,1,0))}function Qv(a){for(;a===Ry;)Ry=Fh[--Hh],Fh[Hh]=null,Dy=Fh[--Hh],Fh[Hh]=null;for(;a===Rl;)Rl=Js[--ei],Js[ei]=null,Ya=Js[--ei],Js[ei]=null,Wa=Js[--ei],Js[ei]=null}var Br=null,En=null,Lt=!1,Pl=null,sa=!1,Zv=Error(r(519));function Ul(a){var c=Error(r(418,""));throw qp(Zs(c,a)),Zv}function aT(a){var c=a.stateNode,u=a.type,f=a.memoizedProps;switch(c[Er]=a,c[Zr]=f,u){case"dialog":wt("cancel",c),wt("close",c);break;case"iframe":case"object":case"embed":wt("load",c);break;case"video":case"audio":for(u=0;u<pg.length;u++)wt(pg[u],c);break;case"source":wt("error",c);break;case"img":case"image":case"link":wt("error",c),wt("load",c);break;case"details":wt("toggle",c);break;case"input":wt("invalid",c),vN(c,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),wy(c);break;case"select":wt("invalid",c);break;case"textarea":wt("invalid",c),CN(c,f.value,f.defaultValue,f.children),wy(c)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||c.textContent===""+u||f.suppressHydrationWarning===!0||CI(c.textContent,u)?(f.popover!=null&&(wt("beforetoggle",c),wt("toggle",c)),f.onScroll!=null&&wt("scroll",c),f.onScrollEnd!=null&&wt("scrollend",c),f.onClick!=null&&(c.onclick=dw),c=!0):c=!1,c||Ul(a)}function oT(a){for(Br=a.return;Br;)switch(Br.tag){case 5:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:Br=Br.return}}function zp(a){if(a!==Br)return!1;if(!Lt)return oT(a),Lt=!0,!1;var c=a.tag,u;if((u=c!==3&&c!==27)&&((u=c===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||fA(a.type,a.memoizedProps)),u=!u),u&&En&&Ul(a),oT(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(c===0){En=Ti(a.nextSibling);break e}c--}else u!=="$"&&u!=="$!"&&u!=="$?"||c++;a=a.nextSibling}En=null}}else c===27?(c=En,pc(a.type)?(a=yA,yA=null,En=a):En=c):En=Br?Ti(a.stateNode.nextSibling):null;return!0}function jp(){En=Br=null,Lt=!1}function cT(){var a=Pl;return a!==null&&(ts===null?ts=a:ts.push.apply(ts,a),Pl=null),a}function qp(a){Pl===null?Pl=[a]:Pl.push(a)}var Xv=G(null),kl=null,Qa=null;function Jo(a,c,u){re(Xv,c._currentValue),c._currentValue=u}function Za(a){a._currentValue=Xv.current,Z(Xv)}function Jv(a,c,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,f!==null&&(f.childLanes|=c)):f!==null&&(f.childLanes&c)!==c&&(f.childLanes|=c),a===u)break;a=a.return}}function e1(a,c,u,f){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var w=m.dependencies;if(w!==null){var C=m.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=m;for(var V=0;V<c.length;V++)if(U.context===c[V]){w.lanes|=u,U=w.alternate,U!==null&&(U.lanes|=u),Jv(w.return,u,a),f||(C=null);break e}w=U.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=u,w=C.alternate,w!==null&&(w.lanes|=u),Jv(C,u,a),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===a){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function Vp(a,c,u,f){a=null;for(var m=c,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var U=m.type;_s(m.pendingProps.value,C.value)||(a!==null?a.push(U):a=[U])}}else if(m===Ce.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(Eg):a=[Eg])}m=m.return}a!==null&&e1(c,a,u,f),c.flags|=262144}function Py(a){for(a=a.firstContext;a!==null;){if(!_s(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Bl(a){kl=a,Qa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function vr(a){return lT(kl,a)}function Uy(a,c){return kl===null&&Bl(a),lT(a,c)}function lT(a,c){var u=c._currentValue;if(c={context:c,memoizedValue:u,next:null},Qa===null){if(a===null)throw Error(r(308));Qa=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Qa=Qa.next=c;return u}var VB=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(u,f){a.push(f)}};this.abort=function(){c.aborted=!0,a.forEach(function(u){return u()})}},GB=n.unstable_scheduleCallback,KB=n.unstable_NormalPriority,kn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function t1(){return{controller:new VB,data:new Map,refCount:0}}function Gp(a){a.refCount--,a.refCount===0&&GB(KB,function(){a.controller.abort()})}var Kp=null,n1=0,zh=0,jh=null;function WB(a,c){if(Kp===null){var u=Kp=[];n1=0,zh=sA(),jh={status:"pending",value:void 0,then:function(f){u.push(f)}}}return n1++,c.then(uT,uT),c}function uT(){if(--n1===0&&Kp!==null){jh!==null&&(jh.status="fulfilled");var a=Kp;Kp=null,zh=0,jh=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function YB(a,c){var u=[],f={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return a.then(function(){f.status="fulfilled",f.value=c;for(var m=0;m<u.length;m++)(0,u[m])(c)},function(m){for(f.status="rejected",f.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),f}var hT=_.S;_.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&WB(a,c),hT!==null&&hT(a,c)};var Ll=G(null);function r1(){var a=Ll.current;return a!==null?a:an.pooledCache}function ky(a,c){c===null?re(Ll,Ll.current):re(Ll,c.pool)}function dT(){var a=r1();return a===null?null:{parent:kn._currentValue,pool:a}}var Wp=Error(r(460)),fT=Error(r(474)),By=Error(r(542)),s1={then:function(){}};function pT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ly(){}function gT(a,c,u){switch(u=a[u],u===void 0?a.push(c):u!==c&&(c.then(Ly,Ly),c=u),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,yT(a),a;default:if(typeof c.status=="string")c.then(Ly,Ly);else{if(a=an,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(f){if(c.status==="pending"){var m=c;m.status="fulfilled",m.value=f}},function(f){if(c.status==="pending"){var m=c;m.status="rejected",m.reason=f}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,yT(a),a}throw Yp=c,Wp}}var Yp=null;function mT(){if(Yp===null)throw Error(r(459));var a=Yp;return Yp=null,a}function yT(a){if(a===Wp||a===By)throw Error(r(483))}var ec=!1;function i1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function a1(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function tc(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function nc(a,c,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(jt&2)!==0){var m=f.pending;return m===null?c.next=c:(c.next=m.next,m.next=c),f.pending=c,c=Iy(a),rT(a,null,u),c}return xy(a,f,c,u),Iy(a)}function Qp(a,c,u){if(c=c.updateQueue,c!==null&&(c=c.shared,(u&4194048)!==0)){var f=c.lanes;f&=a.pendingLanes,u|=f,c.lanes=u,uN(a,u)}}function o1(a,c){var u=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?m=w=C:w=w.next=C,u=u.next}while(u!==null);w===null?m=w=c:w=w.next=c}else m=w=c;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,callbacks:f.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=c}var c1=!1;function Zp(){if(c1){var a=jh;if(a!==null)throw a}}function Xp(a,c,u,f){c1=!1;var m=a.updateQueue;ec=!1;var w=m.firstBaseUpdate,C=m.lastBaseUpdate,U=m.shared.pending;if(U!==null){m.shared.pending=null;var V=U,se=V.next;V.next=null,C===null?w=se:C.next=se,C=V;var he=a.alternate;he!==null&&(he=he.updateQueue,U=he.lastBaseUpdate,U!==C&&(U===null?he.firstBaseUpdate=se:U.next=se,he.lastBaseUpdate=V))}if(w!==null){var pe=m.baseState;C=0,he=se=V=null,U=w;do{var ae=U.lane&-536870913,oe=ae!==U.lane;if(oe?(Ct&ae)===ae:(f&ae)===ae){ae!==0&&ae===zh&&(c1=!0),he!==null&&(he=he.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var rt=a,Ze=U;ae=c;var Zt=u;switch(Ze.tag){case 1:if(rt=Ze.payload,typeof rt=="function"){pe=rt.call(Zt,pe,ae);break e}pe=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=Ze.payload,ae=typeof rt=="function"?rt.call(Zt,pe,ae):rt,ae==null)break e;pe=p({},pe,ae);break e;case 2:ec=!0}}ae=U.callback,ae!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=m.callbacks,oe===null?m.callbacks=[ae]:oe.push(ae))}else oe={lane:ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},he===null?(se=he=oe,V=pe):he=he.next=oe,C|=ae;if(U=U.next,U===null){if(U=m.shared.pending,U===null)break;oe=U,U=oe.next,oe.next=null,m.lastBaseUpdate=oe,m.shared.pending=null}}while(!0);he===null&&(V=pe),m.baseState=V,m.firstBaseUpdate=se,m.lastBaseUpdate=he,w===null&&(m.shared.lanes=0),uc|=C,a.lanes=C,a.memoizedState=pe}}function wT(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function bT(a,c){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)wT(u[a],c)}var qh=G(null),My=G(0);function ET(a,c){a=so,re(My,a),re(qh,c),so=a|c.baseLanes}function l1(){re(My,so),re(qh,qh.current)}function u1(){so=My.current,Z(qh),Z(My)}var rc=0,ft=null,Yt=null,On=null,$y=!1,Vh=!1,Ml=!1,Fy=0,Jp=0,Gh=null,QB=0;function Sn(){throw Error(r(321))}function h1(a,c){if(c===null)return!1;for(var u=0;u<c.length&&u<a.length;u++)if(!_s(a[u],c[u]))return!1;return!0}function d1(a,c,u,f,m,w){return rc=w,ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,_.H=a===null||a.memoizedState===null?rx:sx,Ml=!1,w=u(f,m),Ml=!1,Vh&&(w=AT(c,u,f,m)),vT(a),w}function vT(a){_.H=Gy;var c=Yt!==null&&Yt.next!==null;if(rc=0,On=Yt=ft=null,$y=!1,Jp=0,Gh=null,c)throw Error(r(300));a===null||Vn||(a=a.dependencies,a!==null&&Py(a)&&(Vn=!0))}function AT(a,c,u,f){ft=a;var m=0;do{if(Vh&&(Gh=null),Jp=0,Vh=!1,25<=m)throw Error(r(301));if(m+=1,On=Yt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}_.H=rL,w=c(u,f)}while(Vh);return w}function ZB(){var a=_.H,c=a.useState()[0];return c=typeof c.then=="function"?eg(c):c,a=a.useState()[0],(Yt!==null?Yt.memoizedState:null)!==a&&(ft.flags|=1024),c}function f1(){var a=Fy!==0;return Fy=0,a}function p1(a,c,u){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~u}function g1(a){if($y){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}$y=!1}rc=0,On=Yt=ft=null,Vh=!1,Jp=Fy=0,Gh=null}function Jr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ft.memoizedState=On=a:On=On.next=a,On}function Rn(){if(Yt===null){var a=ft.alternate;a=a!==null?a.memoizedState:null}else a=Yt.next;var c=On===null?ft.memoizedState:On.next;if(c!==null)On=c,Yt=a;else{if(a===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Yt=a,a={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},On===null?ft.memoizedState=On=a:On=On.next=a}return On}function m1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eg(a){var c=Jp;return Jp+=1,Gh===null&&(Gh=[]),a=gT(Gh,a,c),c=ft,(On===null?c.memoizedState:On.next)===null&&(c=c.alternate,_.H=c===null||c.memoizedState===null?rx:sx),a}function Hy(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return eg(a);if(a.$$typeof===T)return vr(a)}throw Error(r(438,String(a)))}function y1(a){var c=null,u=ft.updateQueue;if(u!==null&&(c=u.memoCache),c==null){var f=ft.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(c={data:f.data.map(function(m){return m.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),u===null&&(u=m1(),ft.updateQueue=u),u.memoCache=c,u=c.data[c.index],u===void 0)for(u=c.data[c.index]=Array(a),f=0;f<a;f++)u[f]=z;return c.index++,u}function Xa(a,c){return typeof c=="function"?c(a):c}function zy(a){var c=Rn();return w1(c,Yt,a)}function w1(a,c,u){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var m=a.baseQueue,w=f.pending;if(w!==null){if(m!==null){var C=m.next;m.next=w.next,w.next=C}c.baseQueue=m=w,f.pending=null}if(w=a.baseState,m===null)a.memoizedState=w;else{c=m.next;var U=C=null,V=null,se=c,he=!1;do{var pe=se.lane&-536870913;if(pe!==se.lane?(Ct&pe)===pe:(rc&pe)===pe){var ae=se.revertLane;if(ae===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),pe===zh&&(he=!0);else if((rc&ae)===ae){se=se.next,ae===zh&&(he=!0);continue}else pe={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},V===null?(U=V=pe,C=w):V=V.next=pe,ft.lanes|=ae,uc|=ae;pe=se.action,Ml&&u(w,pe),w=se.hasEagerState?se.eagerState:u(w,pe)}else ae={lane:pe,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},V===null?(U=V=ae,C=w):V=V.next=ae,ft.lanes|=pe,uc|=pe;se=se.next}while(se!==null&&se!==c);if(V===null?C=w:V.next=U,!_s(w,a.memoizedState)&&(Vn=!0,he&&(u=jh,u!==null)))throw u;a.memoizedState=w,a.baseState=C,a.baseQueue=V,f.lastRenderedState=w}return m===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function b1(a){var c=Rn(),u=c.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var f=u.dispatch,m=u.pending,w=c.memoizedState;if(m!==null){u.pending=null;var C=m=m.next;do w=a(w,C.action),C=C.next;while(C!==m);_s(w,c.memoizedState)||(Vn=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),u.lastRenderedState=w}return[w,f]}function CT(a,c,u){var f=ft,m=Rn(),w=Lt;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=c();var C=!_s((Yt||m).memoizedState,u);C&&(m.memoizedState=u,Vn=!0),m=m.queue;var U=NT.bind(null,f,m,a);if(tg(2048,8,U,[a]),m.getSnapshot!==c||C||On!==null&&On.memoizedState.tag&1){if(f.flags|=2048,Kh(9,jy(),ST.bind(null,f,m,u,c),null),an===null)throw Error(r(349));w||(rc&124)!==0||_T(f,c,u)}return u}function _T(a,c,u){a.flags|=16384,a={getSnapshot:c,value:u},c=ft.updateQueue,c===null?(c=m1(),ft.updateQueue=c,c.stores=[a]):(u=c.stores,u===null?c.stores=[a]:u.push(a))}function ST(a,c,u,f){c.value=u,c.getSnapshot=f,TT(c)&&xT(a)}function NT(a,c,u){return u(function(){TT(c)&&xT(a)})}function TT(a){var c=a.getSnapshot;a=a.value;try{var u=c();return!_s(a,u)}catch{return!0}}function xT(a){var c=Mh(a,2);c!==null&&Os(c,a,2)}function E1(a){var c=Jr();if(typeof a=="function"){var u=a;if(a=u(),Ml){ra(!0);try{u()}finally{ra(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:a},c}function IT(a,c,u,f){return a.baseState=u,w1(a,Yt,typeof f=="function"?f:Xa)}function XB(a,c,u,f,m){if(Vy(a))throw Error(r(485));if(a=c.action,a!==null){var w={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};_.T!==null?u(!0):w.isTransition=!1,f(w),u=c.pending,u===null?(w.next=c.pending=w,OT(c,w)):(w.next=u.next,c.pending=u.next=w)}}function OT(a,c){var u=c.action,f=c.payload,m=a.state;if(c.isTransition){var w=_.T,C={};_.T=C;try{var U=u(m,f),V=_.S;V!==null&&V(C,U),RT(a,c,U)}catch(se){v1(a,c,se)}finally{_.T=w}}else try{w=u(m,f),RT(a,c,w)}catch(se){v1(a,c,se)}}function RT(a,c,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){DT(a,c,f)},function(f){return v1(a,c,f)}):DT(a,c,u)}function DT(a,c,u){c.status="fulfilled",c.value=u,PT(c),a.state=u,c=a.pending,c!==null&&(u=c.next,u===c?a.pending=null:(u=u.next,c.next=u,OT(a,u)))}function v1(a,c,u){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do c.status="rejected",c.reason=u,PT(c),c=c.next;while(c!==f)}a.action=null}function PT(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function UT(a,c){return c}function kT(a,c){if(Lt){var u=an.formState;if(u!==null){e:{var f=ft;if(Lt){if(En){t:{for(var m=En,w=sa;m.nodeType!==8;){if(!w){m=null;break t}if(m=Ti(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){En=Ti(m.nextSibling),f=m.data==="F!";break e}}Ul(f)}f=!1}f&&(c=u[0])}}return u=Jr(),u.memoizedState=u.baseState=c,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:UT,lastRenderedState:c},u.queue=f,u=ex.bind(null,ft,f),f.dispatch=u,f=E1(!1),w=N1.bind(null,ft,!1,f.queue),f=Jr(),m={state:c,dispatch:null,action:a,pending:null},f.queue=m,u=XB.bind(null,ft,m,w,u),m.dispatch=u,f.memoizedState=a,[c,u,!1]}function BT(a){var c=Rn();return LT(c,Yt,a)}function LT(a,c,u){if(c=w1(a,c,UT)[0],a=zy(Xa)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var f=eg(c)}catch(C){throw C===Wp?By:C}else f=c;c=Rn();var m=c.queue,w=m.dispatch;return u!==c.memoizedState&&(ft.flags|=2048,Kh(9,jy(),JB.bind(null,m,u),null)),[f,w,a]}function JB(a,c){a.action=c}function MT(a){var c=Rn(),u=Yt;if(u!==null)return LT(c,u,a);Rn(),c=c.memoizedState,u=Rn();var f=u.queue.dispatch;return u.memoizedState=a,[c,f,!1]}function Kh(a,c,u,f){return a={tag:a,create:u,deps:f,inst:c,next:null},c=ft.updateQueue,c===null&&(c=m1(),ft.updateQueue=c),u=c.lastEffect,u===null?c.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,c.lastEffect=a),a}function jy(){return{destroy:void 0,resource:void 0}}function $T(){return Rn().memoizedState}function qy(a,c,u,f){var m=Jr();f=f===void 0?null:f,ft.flags|=a,m.memoizedState=Kh(1|c,jy(),u,f)}function tg(a,c,u,f){var m=Rn();f=f===void 0?null:f;var w=m.memoizedState.inst;Yt!==null&&f!==null&&h1(f,Yt.memoizedState.deps)?m.memoizedState=Kh(c,w,u,f):(ft.flags|=a,m.memoizedState=Kh(1|c,w,u,f))}function FT(a,c){qy(8390656,8,a,c)}function HT(a,c){tg(2048,8,a,c)}function zT(a,c){return tg(4,2,a,c)}function jT(a,c){return tg(4,4,a,c)}function qT(a,c){if(typeof c=="function"){a=a();var u=c(a);return function(){typeof u=="function"?u():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function VT(a,c,u){u=u!=null?u.concat([a]):null,tg(4,4,qT.bind(null,c,a),u)}function A1(){}function GT(a,c){var u=Rn();c=c===void 0?null:c;var f=u.memoizedState;return c!==null&&h1(c,f[1])?f[0]:(u.memoizedState=[a,c],a)}function KT(a,c){var u=Rn();c=c===void 0?null:c;var f=u.memoizedState;if(c!==null&&h1(c,f[1]))return f[0];if(f=a(),Ml){ra(!0);try{a()}finally{ra(!1)}}return u.memoizedState=[f,c],f}function C1(a,c,u){return u===void 0||(rc&1073741824)!==0?a.memoizedState=c:(a.memoizedState=u,a=Qx(),ft.lanes|=a,uc|=a,u)}function WT(a,c,u,f){return _s(u,c)?u:qh.current!==null?(a=C1(a,u,f),_s(a,c)||(Vn=!0),a):(rc&42)===0?(Vn=!0,a.memoizedState=u):(a=Qx(),ft.lanes|=a,uc|=a,c)}function YT(a,c,u,f,m){var w=L.p;L.p=w!==0&&8>w?w:8;var C=_.T,U={};_.T=U,N1(a,!1,c,u);try{var V=m(),se=_.S;if(se!==null&&se(U,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var he=YB(V,f);ng(a,c,he,Is(a))}else ng(a,c,f,Is(a))}catch(pe){ng(a,c,{then:function(){},status:"rejected",reason:pe},Is())}finally{L.p=w,_.T=C}}function eL(){}function _1(a,c,u,f){if(a.tag!==5)throw Error(r(476));var m=QT(a).queue;YT(a,m,c,q,u===null?eL:function(){return ZT(a),u(f)})}function QT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:q},next:null};var u={};return c.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:u},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function ZT(a){var c=QT(a).next.queue;ng(a,c,{},Is())}function S1(){return vr(Eg)}function XT(){return Rn().memoizedState}function JT(){return Rn().memoizedState}function tL(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var u=Is();a=tc(u);var f=nc(c,a,u);f!==null&&(Os(f,c,u),Qp(f,c,u)),c={cache:t1()},a.payload=c;return}c=c.return}}function nL(a,c,u){var f=Is();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Vy(a)?tx(c,u):(u=Vv(a,c,u,f),u!==null&&(Os(u,a,f),nx(u,c,f)))}function ex(a,c,u){var f=Is();ng(a,c,u,f)}function ng(a,c,u,f){var m={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Vy(a))tx(c,m);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var C=c.lastRenderedState,U=w(C,u);if(m.hasEagerState=!0,m.eagerState=U,_s(U,C))return xy(a,c,m,0),an===null&&Ty(),!1}catch{}finally{}if(u=Vv(a,c,m,f),u!==null)return Os(u,a,f),nx(u,c,f),!0}return!1}function N1(a,c,u,f){if(f={lane:2,revertLane:sA(),action:f,hasEagerState:!1,eagerState:null,next:null},Vy(a)){if(c)throw Error(r(479))}else c=Vv(a,u,f,2),c!==null&&Os(c,a,2)}function Vy(a){var c=a.alternate;return a===ft||c!==null&&c===ft}function tx(a,c){Vh=$y=!0;var u=a.pending;u===null?c.next=c:(c.next=u.next,u.next=c),a.pending=c}function nx(a,c,u){if((u&4194048)!==0){var f=c.lanes;f&=a.pendingLanes,u|=f,c.lanes=u,uN(a,u)}}var Gy={readContext:vr,use:Hy,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn},rx={readContext:vr,use:Hy,useCallback:function(a,c){return Jr().memoizedState=[a,c===void 0?null:c],a},useContext:vr,useEffect:FT,useImperativeHandle:function(a,c,u){u=u!=null?u.concat([a]):null,qy(4194308,4,qT.bind(null,c,a),u)},useLayoutEffect:function(a,c){return qy(4194308,4,a,c)},useInsertionEffect:function(a,c){qy(4,2,a,c)},useMemo:function(a,c){var u=Jr();c=c===void 0?null:c;var f=a();if(Ml){ra(!0);try{a()}finally{ra(!1)}}return u.memoizedState=[f,c],f},useReducer:function(a,c,u){var f=Jr();if(u!==void 0){var m=u(c);if(Ml){ra(!0);try{u(c)}finally{ra(!1)}}}else m=c;return f.memoizedState=f.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},f.queue=a,a=a.dispatch=nL.bind(null,ft,a),[f.memoizedState,a]},useRef:function(a){var c=Jr();return a={current:a},c.memoizedState=a},useState:function(a){a=E1(a);var c=a.queue,u=ex.bind(null,ft,c);return c.dispatch=u,[a.memoizedState,u]},useDebugValue:A1,useDeferredValue:function(a,c){var u=Jr();return C1(u,a,c)},useTransition:function(){var a=E1(!1);return a=YT.bind(null,ft,a.queue,!0,!1),Jr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,u){var f=ft,m=Jr();if(Lt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=c(),an===null)throw Error(r(349));(Ct&124)!==0||_T(f,c,u)}m.memoizedState=u;var w={value:u,getSnapshot:c};return m.queue=w,FT(NT.bind(null,f,w,a),[a]),f.flags|=2048,Kh(9,jy(),ST.bind(null,f,w,u,c),null),u},useId:function(){var a=Jr(),c=an.identifierPrefix;if(Lt){var u=Ya,f=Wa;u=(f&~(1<<32-kr(f)-1)).toString(32)+u,c="«"+c+"R"+u,u=Fy++,0<u&&(c+="H"+u.toString(32)),c+="»"}else u=QB++,c="«"+c+"r"+u.toString(32)+"»";return a.memoizedState=c},useHostTransitionStatus:S1,useFormState:kT,useActionState:kT,useOptimistic:function(a){var c=Jr();c.memoizedState=c.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=u,c=N1.bind(null,ft,!0,u),u.dispatch=c,[a,c]},useMemoCache:y1,useCacheRefresh:function(){return Jr().memoizedState=tL.bind(null,ft)}},sx={readContext:vr,use:Hy,useCallback:GT,useContext:vr,useEffect:HT,useImperativeHandle:VT,useInsertionEffect:zT,useLayoutEffect:jT,useMemo:KT,useReducer:zy,useRef:$T,useState:function(){return zy(Xa)},useDebugValue:A1,useDeferredValue:function(a,c){var u=Rn();return WT(u,Yt.memoizedState,a,c)},useTransition:function(){var a=zy(Xa)[0],c=Rn().memoizedState;return[typeof a=="boolean"?a:eg(a),c]},useSyncExternalStore:CT,useId:XT,useHostTransitionStatus:S1,useFormState:BT,useActionState:BT,useOptimistic:function(a,c){var u=Rn();return IT(u,Yt,a,c)},useMemoCache:y1,useCacheRefresh:JT},rL={readContext:vr,use:Hy,useCallback:GT,useContext:vr,useEffect:HT,useImperativeHandle:VT,useInsertionEffect:zT,useLayoutEffect:jT,useMemo:KT,useReducer:b1,useRef:$T,useState:function(){return b1(Xa)},useDebugValue:A1,useDeferredValue:function(a,c){var u=Rn();return Yt===null?C1(u,a,c):WT(u,Yt.memoizedState,a,c)},useTransition:function(){var a=b1(Xa)[0],c=Rn().memoizedState;return[typeof a=="boolean"?a:eg(a),c]},useSyncExternalStore:CT,useId:XT,useHostTransitionStatus:S1,useFormState:MT,useActionState:MT,useOptimistic:function(a,c){var u=Rn();return Yt!==null?IT(u,Yt,a,c):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:y1,useCacheRefresh:JT},Wh=null,rg=0;function Ky(a){var c=rg;return rg+=1,Wh===null&&(Wh=[]),gT(Wh,a,c)}function sg(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Wy(a,c){throw c.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function ix(a){var c=a._init;return c(a._payload)}function ax(a){function c(X,Y){if(a){var te=X.deletions;te===null?(X.deletions=[Y],X.flags|=16):te.push(Y)}}function u(X,Y){if(!a)return null;for(;Y!==null;)c(X,Y),Y=Y.sibling;return null}function f(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function m(X,Y){return X=Ka(X,Y),X.index=0,X.sibling=null,X}function w(X,Y,te){return X.index=te,a?(te=X.alternate,te!==null?(te=te.index,te<Y?(X.flags|=67108866,Y):te):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function C(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function U(X,Y,te,fe){return Y===null||Y.tag!==6?(Y=Kv(te,X.mode,fe),Y.return=X,Y):(Y=m(Y,te),Y.return=X,Y)}function V(X,Y,te,fe){var je=te.type;return je===v?he(X,Y,te.props.children,fe,te.key):Y!==null&&(Y.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===$&&ix(je)===Y.type)?(Y=m(Y,te.props),sg(Y,te),Y.return=X,Y):(Y=Oy(te.type,te.key,te.props,null,X.mode,fe),sg(Y,te),Y.return=X,Y)}function se(X,Y,te,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==te.containerInfo||Y.stateNode.implementation!==te.implementation?(Y=Wv(te,X.mode,fe),Y.return=X,Y):(Y=m(Y,te.children||[]),Y.return=X,Y)}function he(X,Y,te,fe,je){return Y===null||Y.tag!==7?(Y=Ol(te,X.mode,fe,je),Y.return=X,Y):(Y=m(Y,te),Y.return=X,Y)}function pe(X,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Kv(""+Y,X.mode,te),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return te=Oy(Y.type,Y.key,Y.props,null,X.mode,te),sg(te,Y),te.return=X,te;case b:return Y=Wv(Y,X.mode,te),Y.return=X,Y;case $:var fe=Y._init;return Y=fe(Y._payload),pe(X,Y,te)}if(I(Y)||W(Y))return Y=Ol(Y,X.mode,te,null),Y.return=X,Y;if(typeof Y.then=="function")return pe(X,Ky(Y),te);if(Y.$$typeof===T)return pe(X,Uy(X,Y),te);Wy(X,Y)}return null}function ae(X,Y,te,fe){var je=Y!==null?Y.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return je!==null?null:U(X,Y,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return te.key===je?V(X,Y,te,fe):null;case b:return te.key===je?se(X,Y,te,fe):null;case $:return je=te._init,te=je(te._payload),ae(X,Y,te,fe)}if(I(te)||W(te))return je!==null?null:he(X,Y,te,fe,null);if(typeof te.then=="function")return ae(X,Y,Ky(te),fe);if(te.$$typeof===T)return ae(X,Y,Uy(X,te),fe);Wy(X,te)}return null}function oe(X,Y,te,fe,je){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return X=X.get(te)||null,U(Y,X,""+fe,je);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return X=X.get(fe.key===null?te:fe.key)||null,V(Y,X,fe,je);case b:return X=X.get(fe.key===null?te:fe.key)||null,se(Y,X,fe,je);case $:var gt=fe._init;return fe=gt(fe._payload),oe(X,Y,te,fe,je)}if(I(fe)||W(fe))return X=X.get(te)||null,he(Y,X,fe,je,null);if(typeof fe.then=="function")return oe(X,Y,te,Ky(fe),je);if(fe.$$typeof===T)return oe(X,Y,te,Uy(Y,fe),je);Wy(Y,fe)}return null}function rt(X,Y,te,fe){for(var je=null,gt=null,Ve=Y,Je=Y=0,Kn=null;Ve!==null&&Je<te.length;Je++){Ve.index>Je?(Kn=Ve,Ve=null):Kn=Ve.sibling;var Nt=ae(X,Ve,te[Je],fe);if(Nt===null){Ve===null&&(Ve=Kn);break}a&&Ve&&Nt.alternate===null&&c(X,Ve),Y=w(Nt,Y,Je),gt===null?je=Nt:gt.sibling=Nt,gt=Nt,Ve=Kn}if(Je===te.length)return u(X,Ve),Lt&&Dl(X,Je),je;if(Ve===null){for(;Je<te.length;Je++)Ve=pe(X,te[Je],fe),Ve!==null&&(Y=w(Ve,Y,Je),gt===null?je=Ve:gt.sibling=Ve,gt=Ve);return Lt&&Dl(X,Je),je}for(Ve=f(Ve);Je<te.length;Je++)Kn=oe(Ve,X,Je,te[Je],fe),Kn!==null&&(a&&Kn.alternate!==null&&Ve.delete(Kn.key===null?Je:Kn.key),Y=w(Kn,Y,Je),gt===null?je=Kn:gt.sibling=Kn,gt=Kn);return a&&Ve.forEach(function(bc){return c(X,bc)}),Lt&&Dl(X,Je),je}function Ze(X,Y,te,fe){if(te==null)throw Error(r(151));for(var je=null,gt=null,Ve=Y,Je=Y=0,Kn=null,Nt=te.next();Ve!==null&&!Nt.done;Je++,Nt=te.next()){Ve.index>Je?(Kn=Ve,Ve=null):Kn=Ve.sibling;var bc=ae(X,Ve,Nt.value,fe);if(bc===null){Ve===null&&(Ve=Kn);break}a&&Ve&&bc.alternate===null&&c(X,Ve),Y=w(bc,Y,Je),gt===null?je=bc:gt.sibling=bc,gt=bc,Ve=Kn}if(Nt.done)return u(X,Ve),Lt&&Dl(X,Je),je;if(Ve===null){for(;!Nt.done;Je++,Nt=te.next())Nt=pe(X,Nt.value,fe),Nt!==null&&(Y=w(Nt,Y,Je),gt===null?je=Nt:gt.sibling=Nt,gt=Nt);return Lt&&Dl(X,Je),je}for(Ve=f(Ve);!Nt.done;Je++,Nt=te.next())Nt=oe(Ve,X,Je,Nt.value,fe),Nt!==null&&(a&&Nt.alternate!==null&&Ve.delete(Nt.key===null?Je:Nt.key),Y=w(Nt,Y,Je),gt===null?je=Nt:gt.sibling=Nt,gt=Nt);return a&&Ve.forEach(function(sM){return c(X,sM)}),Lt&&Dl(X,Je),je}function Zt(X,Y,te,fe){if(typeof te=="object"&&te!==null&&te.type===v&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case y:e:{for(var je=te.key;Y!==null;){if(Y.key===je){if(je=te.type,je===v){if(Y.tag===7){u(X,Y.sibling),fe=m(Y,te.props.children),fe.return=X,X=fe;break e}}else if(Y.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===$&&ix(je)===Y.type){u(X,Y.sibling),fe=m(Y,te.props),sg(fe,te),fe.return=X,X=fe;break e}u(X,Y);break}else c(X,Y);Y=Y.sibling}te.type===v?(fe=Ol(te.props.children,X.mode,fe,te.key),fe.return=X,X=fe):(fe=Oy(te.type,te.key,te.props,null,X.mode,fe),sg(fe,te),fe.return=X,X=fe)}return C(X);case b:e:{for(je=te.key;Y!==null;){if(Y.key===je)if(Y.tag===4&&Y.stateNode.containerInfo===te.containerInfo&&Y.stateNode.implementation===te.implementation){u(X,Y.sibling),fe=m(Y,te.children||[]),fe.return=X,X=fe;break e}else{u(X,Y);break}else c(X,Y);Y=Y.sibling}fe=Wv(te,X.mode,fe),fe.return=X,X=fe}return C(X);case $:return je=te._init,te=je(te._payload),Zt(X,Y,te,fe)}if(I(te))return rt(X,Y,te,fe);if(W(te)){if(je=W(te),typeof je!="function")throw Error(r(150));return te=je.call(te),Ze(X,Y,te,fe)}if(typeof te.then=="function")return Zt(X,Y,Ky(te),fe);if(te.$$typeof===T)return Zt(X,Y,Uy(X,te),fe);Wy(X,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Y!==null&&Y.tag===6?(u(X,Y.sibling),fe=m(Y,te),fe.return=X,X=fe):(u(X,Y),fe=Kv(te,X.mode,fe),fe.return=X,X=fe),C(X)):u(X,Y)}return function(X,Y,te,fe){try{rg=0;var je=Zt(X,Y,te,fe);return Wh=null,je}catch(Ve){if(Ve===Wp||Ve===By)throw Ve;var gt=Ss(29,Ve,null,X.mode);return gt.lanes=fe,gt.return=X,gt}finally{}}}var Yh=ax(!0),ox=ax(!1),ti=G(null),ia=null;function sc(a){var c=a.alternate;re(Bn,Bn.current&1),re(ti,a),ia===null&&(c===null||qh.current!==null||c.memoizedState!==null)&&(ia=a)}function cx(a){if(a.tag===22){if(re(Bn,Bn.current),re(ti,a),ia===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(ia=a)}}else ic()}function ic(){re(Bn,Bn.current),re(ti,ti.current)}function Ja(a){Z(ti),ia===a&&(ia=null),Z(Bn)}var Bn=G(0);function Yy(a){for(var c=a;c!==null;){if(c.tag===13){var u=c.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||mA(u)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function T1(a,c,u,f){c=a.memoizedState,u=u(f,c),u=u==null?c:p({},c,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var x1={enqueueSetState:function(a,c,u){a=a._reactInternals;var f=Is(),m=tc(f);m.payload=c,u!=null&&(m.callback=u),c=nc(a,m,f),c!==null&&(Os(c,a,f),Qp(c,a,f))},enqueueReplaceState:function(a,c,u){a=a._reactInternals;var f=Is(),m=tc(f);m.tag=1,m.payload=c,u!=null&&(m.callback=u),c=nc(a,m,f),c!==null&&(Os(c,a,f),Qp(c,a,f))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var u=Is(),f=tc(u);f.tag=2,c!=null&&(f.callback=c),c=nc(a,f,u),c!==null&&(Os(c,a,u),Qp(c,a,u))}};function lx(a,c,u,f,m,w,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,w,C):c.prototype&&c.prototype.isPureReactComponent?!Fp(u,f)||!Fp(m,w):!0}function ux(a,c,u,f){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(u,f),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(u,f),c.state!==a&&x1.enqueueReplaceState(c,c.state,null)}function $l(a,c){var u=c;if("ref"in c){u={};for(var f in c)f!=="ref"&&(u[f]=c[f])}if(a=a.defaultProps){u===c&&(u=p({},u));for(var m in a)u[m]===void 0&&(u[m]=a[m])}return u}var Qy=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function hx(a){Qy(a)}function dx(a){console.error(a)}function fx(a){Qy(a)}function Zy(a,c){try{var u=a.onUncaughtError;u(c.value,{componentStack:c.stack})}catch(f){setTimeout(function(){throw f})}}function px(a,c,u){try{var f=a.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function I1(a,c,u){return u=tc(u),u.tag=3,u.payload={element:null},u.callback=function(){Zy(a,c)},u}function gx(a){return a=tc(a),a.tag=3,a}function mx(a,c,u,f){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var w=f.value;a.payload=function(){return m(w)},a.callback=function(){px(c,u,f)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){px(c,u,f),typeof m!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var U=f.stack;this.componentDidCatch(f.value,{componentStack:U!==null?U:""})})}function sL(a,c,u,f,m){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(c=u.alternate,c!==null&&Vp(c,u,m,!0),u=ti.current,u!==null){switch(u.tag){case 13:return ia===null?J1():u.alternate===null&&vn===0&&(vn=3),u.flags&=-257,u.flags|=65536,u.lanes=m,f===s1?u.flags|=16384:(c=u.updateQueue,c===null?u.updateQueue=new Set([f]):c.add(f),tA(a,f,m)),!1;case 22:return u.flags|=65536,f===s1?u.flags|=16384:(c=u.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=c):(u=c.retryQueue,u===null?c.retryQueue=new Set([f]):u.add(f)),tA(a,f,m)),!1}throw Error(r(435,u.tag))}return tA(a,f,m),J1(),!1}if(Lt)return c=ti.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=m,f!==Zv&&(a=Error(r(422),{cause:f}),qp(Zs(a,u)))):(f!==Zv&&(c=Error(r(423),{cause:f}),qp(Zs(c,u))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,f=Zs(f,u),m=I1(a.stateNode,f,m),o1(a,m),vn!==4&&(vn=2)),!1;var w=Error(r(520),{cause:f});if(w=Zs(w,u),hg===null?hg=[w]:hg.push(w),vn!==4&&(vn=2),c===null)return!0;f=Zs(f,u),u=c;do{switch(u.tag){case 3:return u.flags|=65536,a=m&-m,u.lanes|=a,a=I1(u.stateNode,f,a),o1(u,a),!1;case 1:if(c=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(hc===null||!hc.has(w))))return u.flags|=65536,m&=-m,u.lanes|=m,m=gx(m),mx(m,a,u,f),o1(u,m),!1}u=u.return}while(u!==null);return!1}var yx=Error(r(461)),Vn=!1;function ir(a,c,u,f){c.child=a===null?ox(c,null,u,f):Yh(c,a.child,u,f)}function wx(a,c,u,f,m){u=u.render;var w=c.ref;if("ref"in f){var C={};for(var U in f)U!=="ref"&&(C[U]=f[U])}else C=f;return Bl(c),f=d1(a,c,u,C,w,m),U=f1(),a!==null&&!Vn?(p1(a,c,m),eo(a,c,m)):(Lt&&U&&Yv(c),c.flags|=1,ir(a,c,f,m),c.child)}function bx(a,c,u,f,m){if(a===null){var w=u.type;return typeof w=="function"&&!Gv(w)&&w.defaultProps===void 0&&u.compare===null?(c.tag=15,c.type=w,Ex(a,c,w,f,m)):(a=Oy(u.type,null,f,c,c.mode,m),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,!L1(a,m)){var C=w.memoizedProps;if(u=u.compare,u=u!==null?u:Fp,u(C,f)&&a.ref===c.ref)return eo(a,c,m)}return c.flags|=1,a=Ka(w,f),a.ref=c.ref,a.return=c,c.child=a}function Ex(a,c,u,f,m){if(a!==null){var w=a.memoizedProps;if(Fp(w,f)&&a.ref===c.ref)if(Vn=!1,c.pendingProps=f=w,L1(a,m))(a.flags&131072)!==0&&(Vn=!0);else return c.lanes=a.lanes,eo(a,c,m)}return O1(a,c,u,f,m)}function vx(a,c,u){var f=c.pendingProps,m=f.children,w=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((c.flags&128)!==0){if(f=w!==null?w.baseLanes|u:u,a!==null){for(m=c.child=a.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;c.childLanes=w&~f}else c.childLanes=0,c.child=null;return Ax(a,c,f,u)}if((u&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&ky(c,w!==null?w.cachePool:null),w!==null?ET(c,w):l1(),cx(c);else return c.lanes=c.childLanes=536870912,Ax(a,c,w!==null?w.baseLanes|u:u,u)}else w!==null?(ky(c,w.cachePool),ET(c,w),ic(),c.memoizedState=null):(a!==null&&ky(c,null),l1(),ic());return ir(a,c,m,u),c.child}function Ax(a,c,u,f){var m=r1();return m=m===null?null:{parent:kn._currentValue,pool:m},c.memoizedState={baseLanes:u,cachePool:m},a!==null&&ky(c,null),l1(),cx(c),a!==null&&Vp(a,c,f,!0),null}function Xy(a,c){var u=c.ref;if(u===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(c.flags|=4194816)}}function O1(a,c,u,f,m){return Bl(c),u=d1(a,c,u,f,void 0,m),f=f1(),a!==null&&!Vn?(p1(a,c,m),eo(a,c,m)):(Lt&&f&&Yv(c),c.flags|=1,ir(a,c,u,m),c.child)}function Cx(a,c,u,f,m,w){return Bl(c),c.updateQueue=null,u=AT(c,f,u,m),vT(a),f=f1(),a!==null&&!Vn?(p1(a,c,w),eo(a,c,w)):(Lt&&f&&Yv(c),c.flags|=1,ir(a,c,u,w),c.child)}function _x(a,c,u,f,m){if(Bl(c),c.stateNode===null){var w=$h,C=u.contextType;typeof C=="object"&&C!==null&&(w=vr(C)),w=new u(f,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=x1,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=f,w.state=c.memoizedState,w.refs={},i1(c),C=u.contextType,w.context=typeof C=="object"&&C!==null?vr(C):$h,w.state=c.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(T1(c,u,C,f),w.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&x1.enqueueReplaceState(w,w.state,null),Xp(c,f,w,m),Zp(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),f=!0}else if(a===null){w=c.stateNode;var U=c.memoizedProps,V=$l(u,U);w.props=V;var se=w.context,he=u.contextType;C=$h,typeof he=="object"&&he!==null&&(C=vr(he));var pe=u.getDerivedStateFromProps;he=typeof pe=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=c.pendingProps!==U,he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||se!==C)&&ux(c,w,f,C),ec=!1;var ae=c.memoizedState;w.state=ae,Xp(c,f,w,m),Zp(),se=c.memoizedState,U||ae!==se||ec?(typeof pe=="function"&&(T1(c,u,pe,f),se=c.memoizedState),(V=ec||lx(c,u,V,f,ae,se,C))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=f,c.memoizedState=se),w.props=f,w.state=se,w.context=C,f=V):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),f=!1)}else{w=c.stateNode,a1(a,c),C=c.memoizedProps,he=$l(u,C),w.props=he,pe=c.pendingProps,ae=w.context,se=u.contextType,V=$h,typeof se=="object"&&se!==null&&(V=vr(se)),U=u.getDerivedStateFromProps,(se=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==pe||ae!==V)&&ux(c,w,f,V),ec=!1,ae=c.memoizedState,w.state=ae,Xp(c,f,w,m),Zp();var oe=c.memoizedState;C!==pe||ae!==oe||ec||a!==null&&a.dependencies!==null&&Py(a.dependencies)?(typeof U=="function"&&(T1(c,u,U,f),oe=c.memoizedState),(he=ec||lx(c,u,he,f,ae,oe,V)||a!==null&&a.dependencies!==null&&Py(a.dependencies))?(se||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,oe,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,oe,V)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=1024),c.memoizedProps=f,c.memoizedState=oe),w.props=f,w.state=oe,w.context=V,f=he):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=1024),f=!1)}return w=f,Xy(a,c),f=(c.flags&128)!==0,w||f?(w=c.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,a!==null&&f?(c.child=Yh(c,a.child,null,m),c.child=Yh(c,null,u,m)):ir(a,c,u,m),c.memoizedState=w.state,a=c.child):a=eo(a,c,m),a}function Sx(a,c,u,f){return jp(),c.flags|=256,ir(a,c,u,f),c.child}var R1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function D1(a){return{baseLanes:a,cachePool:dT()}}function P1(a,c,u){return a=a!==null?a.childLanes&~u:0,c&&(a|=ni),a}function Nx(a,c,u){var f=c.pendingProps,m=!1,w=(c.flags&128)!==0,C;if((C=w)||(C=a!==null&&a.memoizedState===null?!1:(Bn.current&2)!==0),C&&(m=!0,c.flags&=-129),C=(c.flags&32)!==0,c.flags&=-33,a===null){if(Lt){if(m?sc(c):ic(),Lt){var U=En,V;if(V=U){e:{for(V=U,U=sa;V.nodeType!==8;){if(!U){U=null;break e}if(V=Ti(V.nextSibling),V===null){U=null;break e}}U=V}U!==null?(c.memoizedState={dehydrated:U,treeContext:Rl!==null?{id:Wa,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},V=Ss(18,null,null,0),V.stateNode=U,V.return=c,c.child=V,Br=c,En=null,V=!0):V=!1}V||Ul(c)}if(U=c.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return mA(U)?c.lanes=32:c.lanes=536870912,null;Ja(c)}return U=f.children,f=f.fallback,m?(ic(),m=c.mode,U=Jy({mode:"hidden",children:U},m),f=Ol(f,m,u,null),U.return=c,f.return=c,U.sibling=f,c.child=U,m=c.child,m.memoizedState=D1(u),m.childLanes=P1(a,C,u),c.memoizedState=R1,f):(sc(c),U1(c,U))}if(V=a.memoizedState,V!==null&&(U=V.dehydrated,U!==null)){if(w)c.flags&256?(sc(c),c.flags&=-257,c=k1(a,c,u)):c.memoizedState!==null?(ic(),c.child=a.child,c.flags|=128,c=null):(ic(),m=f.fallback,U=c.mode,f=Jy({mode:"visible",children:f.children},U),m=Ol(m,U,u,null),m.flags|=2,f.return=c,m.return=c,f.sibling=m,c.child=f,Yh(c,a.child,null,u),f=c.child,f.memoizedState=D1(u),f.childLanes=P1(a,C,u),c.memoizedState=R1,c=m);else if(sc(c),mA(U)){if(C=U.nextSibling&&U.nextSibling.dataset,C)var se=C.dgst;C=se,f=Error(r(419)),f.stack="",f.digest=C,qp({value:f,source:null,stack:null}),c=k1(a,c,u)}else if(Vn||Vp(a,c,u,!1),C=(u&a.childLanes)!==0,Vn||C){if(C=an,C!==null&&(f=u&-u,f=(f&42)!==0?1:yv(f),f=(f&(C.suspendedLanes|u))!==0?0:f,f!==0&&f!==V.retryLane))throw V.retryLane=f,Mh(a,f),Os(C,a,f),yx;U.data==="$?"||J1(),c=k1(a,c,u)}else U.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=V.treeContext,En=Ti(U.nextSibling),Br=c,Lt=!0,Pl=null,sa=!1,a!==null&&(Js[ei++]=Wa,Js[ei++]=Ya,Js[ei++]=Rl,Wa=a.id,Ya=a.overflow,Rl=c),c=U1(c,f.children),c.flags|=4096);return c}return m?(ic(),m=f.fallback,U=c.mode,V=a.child,se=V.sibling,f=Ka(V,{mode:"hidden",children:f.children}),f.subtreeFlags=V.subtreeFlags&65011712,se!==null?m=Ka(se,m):(m=Ol(m,U,u,null),m.flags|=2),m.return=c,f.return=c,f.sibling=m,c.child=f,f=m,m=c.child,U=a.child.memoizedState,U===null?U=D1(u):(V=U.cachePool,V!==null?(se=kn._currentValue,V=V.parent!==se?{parent:se,pool:se}:V):V=dT(),U={baseLanes:U.baseLanes|u,cachePool:V}),m.memoizedState=U,m.childLanes=P1(a,C,u),c.memoizedState=R1,f):(sc(c),u=a.child,a=u.sibling,u=Ka(u,{mode:"visible",children:f.children}),u.return=c,u.sibling=null,a!==null&&(C=c.deletions,C===null?(c.deletions=[a],c.flags|=16):C.push(a)),c.child=u,c.memoizedState=null,u)}function U1(a,c){return c=Jy({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Jy(a,c){return a=Ss(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function k1(a,c,u){return Yh(c,a.child,null,u),a=U1(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Tx(a,c,u){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c),Jv(a.return,c,u)}function B1(a,c,u,f,m){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=m)}function xx(a,c,u){var f=c.pendingProps,m=f.revealOrder,w=f.tail;if(ir(a,c,f.children,u),f=Bn.current,(f&2)!==0)f=f&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Tx(a,u,c);else if(a.tag===19)Tx(a,u,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(re(Bn,f),m){case"forwards":for(u=c.child,m=null;u!==null;)a=u.alternate,a!==null&&Yy(a)===null&&(m=u),u=u.sibling;u=m,u===null?(m=c.child,c.child=null):(m=u.sibling,u.sibling=null),B1(c,!1,m,u,w);break;case"backwards":for(u=null,m=c.child,c.child=null;m!==null;){if(a=m.alternate,a!==null&&Yy(a)===null){c.child=m;break}a=m.sibling,m.sibling=u,u=m,m=a}B1(c,!0,u,null,w);break;case"together":B1(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function eo(a,c,u){if(a!==null&&(c.dependencies=a.dependencies),uc|=c.lanes,(u&c.childLanes)===0)if(a!==null){if(Vp(a,c,u,!1),(u&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,u=Ka(a,a.pendingProps),c.child=u,u.return=c;a.sibling!==null;)a=a.sibling,u=u.sibling=Ka(a,a.pendingProps),u.return=c;u.sibling=null}return c.child}function L1(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Py(a)))}function iL(a,c,u){switch(c.tag){case 3:Pe(c,c.stateNode.containerInfo),Jo(c,kn,a.memoizedState.cache),jp();break;case 27:case 5:Qe(c);break;case 4:Pe(c,c.stateNode.containerInfo);break;case 10:Jo(c,c.type,c.memoizedProps.value);break;case 13:var f=c.memoizedState;if(f!==null)return f.dehydrated!==null?(sc(c),c.flags|=128,null):(u&c.child.childLanes)!==0?Nx(a,c,u):(sc(c),a=eo(a,c,u),a!==null?a.sibling:null);sc(c);break;case 19:var m=(a.flags&128)!==0;if(f=(u&c.childLanes)!==0,f||(Vp(a,c,u,!1),f=(u&c.childLanes)!==0),m){if(f)return xx(a,c,u);c.flags|=128}if(m=c.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),re(Bn,Bn.current),f)break;return null;case 22:case 23:return c.lanes=0,vx(a,c,u);case 24:Jo(c,kn,a.memoizedState.cache)}return eo(a,c,u)}function Ix(a,c,u){if(a!==null)if(a.memoizedProps!==c.pendingProps)Vn=!0;else{if(!L1(a,u)&&(c.flags&128)===0)return Vn=!1,iL(a,c,u);Vn=(a.flags&131072)!==0}else Vn=!1,Lt&&(c.flags&1048576)!==0&&iT(c,Dy,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var f=c.elementType,m=f._init;if(f=m(f._payload),c.type=f,typeof f=="function")Gv(f)?(a=$l(f,a),c.tag=1,c=_x(null,c,f,a,u)):(c.tag=0,c=O1(null,c,f,a,u));else{if(f!=null){if(m=f.$$typeof,m===k){c.tag=11,c=wx(null,c,f,a,u);break e}else if(m===F){c.tag=14,c=bx(null,c,f,a,u);break e}}throw c=J(f)||f,Error(r(306,c,""))}}return c;case 0:return O1(a,c,c.type,c.pendingProps,u);case 1:return f=c.type,m=$l(f,c.pendingProps),_x(a,c,f,m,u);case 3:e:{if(Pe(c,c.stateNode.containerInfo),a===null)throw Error(r(387));f=c.pendingProps;var w=c.memoizedState;m=w.element,a1(a,c),Xp(c,f,null,u);var C=c.memoizedState;if(f=C.cache,Jo(c,kn,f),f!==w.cache&&e1(c,[kn],u,!0),Zp(),f=C.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:C.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=Sx(a,c,f,u);break e}else if(f!==m){m=Zs(Error(r(424)),c),qp(m),c=Sx(a,c,f,u);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(En=Ti(a.firstChild),Br=c,Lt=!0,Pl=null,sa=!0,u=ox(c,null,f,u),c.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(jp(),f===m){c=eo(a,c,u);break e}ir(a,c,f,u)}c=c.child}return c;case 26:return Xy(a,c),a===null?(u=PI(c.type,null,c.pendingProps,null))?c.memoizedState=u:Lt||(u=c.type,a=c.pendingProps,f=fw(ge.current).createElement(u),f[Er]=c,f[Zr]=a,or(f,u,a),qn(f),c.stateNode=f):c.memoizedState=PI(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Qe(c),a===null&&Lt&&(f=c.stateNode=OI(c.type,c.pendingProps,ge.current),Br=c,sa=!0,m=En,pc(c.type)?(yA=m,En=Ti(f.firstChild)):En=m),ir(a,c,c.pendingProps.children,u),Xy(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&Lt&&((m=f=En)&&(f=PL(f,c.type,c.pendingProps,sa),f!==null?(c.stateNode=f,Br=c,En=Ti(f.firstChild),sa=!1,m=!0):m=!1),m||Ul(c)),Qe(c),m=c.type,w=c.pendingProps,C=a!==null?a.memoizedProps:null,f=w.children,fA(m,w)?f=null:C!==null&&fA(m,C)&&(c.flags|=32),c.memoizedState!==null&&(m=d1(a,c,ZB,null,null,u),Eg._currentValue=m),Xy(a,c),ir(a,c,f,u),c.child;case 6:return a===null&&Lt&&((a=u=En)&&(u=UL(u,c.pendingProps,sa),u!==null?(c.stateNode=u,Br=c,En=null,a=!0):a=!1),a||Ul(c)),null;case 13:return Nx(a,c,u);case 4:return Pe(c,c.stateNode.containerInfo),f=c.pendingProps,a===null?c.child=Yh(c,null,f,u):ir(a,c,f,u),c.child;case 11:return wx(a,c,c.type,c.pendingProps,u);case 7:return ir(a,c,c.pendingProps,u),c.child;case 8:return ir(a,c,c.pendingProps.children,u),c.child;case 12:return ir(a,c,c.pendingProps.children,u),c.child;case 10:return f=c.pendingProps,Jo(c,c.type,f.value),ir(a,c,f.children,u),c.child;case 9:return m=c.type._context,f=c.pendingProps.children,Bl(c),m=vr(m),f=f(m),c.flags|=1,ir(a,c,f,u),c.child;case 14:return bx(a,c,c.type,c.pendingProps,u);case 15:return Ex(a,c,c.type,c.pendingProps,u);case 19:return xx(a,c,u);case 31:return f=c.pendingProps,u=c.mode,f={mode:f.mode,children:f.children},a===null?(u=Jy(f,u),u.ref=c.ref,c.child=u,u.return=c,c=u):(u=Ka(a.child,f),u.ref=c.ref,c.child=u,u.return=c,c=u),c;case 22:return vx(a,c,u);case 24:return Bl(c),f=vr(kn),a===null?(m=r1(),m===null&&(m=an,w=t1(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=u),m=w),c.memoizedState={parent:f,cache:m},i1(c),Jo(c,kn,m)):((a.lanes&u)!==0&&(a1(a,c),Xp(c,null,null,u),Zp()),m=a.memoizedState,w=c.memoizedState,m.parent!==f?(m={parent:f,cache:f},c.memoizedState=m,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=m),Jo(c,kn,f)):(f=w.cache,Jo(c,kn,f),f!==m.cache&&e1(c,[kn],u,!0))),ir(a,c,c.pendingProps.children,u),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function to(a){a.flags|=4}function Ox(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!MI(c)){if(c=ti.current,c!==null&&((Ct&4194048)===Ct?ia!==null:(Ct&62914560)!==Ct&&(Ct&536870912)===0||c!==ia))throw Yp=s1,fT;a.flags|=8192}}function ew(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?cN():536870912,a.lanes|=c,Jh|=c)}function ig(a,c){if(!Lt)switch(a.tailMode){case"hidden":c=a.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function yn(a){var c=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(c)for(var m=a.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&65011712,f|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=f,a.childLanes=u,c}function aL(a,c,u){var f=c.pendingProps;switch(Qv(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(c),null;case 1:return yn(c),null;case 3:return u=c.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Za(kn),Te(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(zp(c)?to(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,cT())),yn(c),null;case 26:return u=c.memoizedState,a===null?(to(c),u!==null?(yn(c),Ox(c,u)):(yn(c),c.flags&=-16777217)):u?u!==a.memoizedState?(to(c),yn(c),Ox(c,u)):(yn(c),c.flags&=-16777217):(a.memoizedProps!==f&&to(c),yn(c),c.flags&=-16777217),null;case 27:Wt(c),u=ge.current;var m=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==f&&to(c);else{if(!f){if(c.stateNode===null)throw Error(r(166));return yn(c),null}a=ee.current,zp(c)?aT(c):(a=OI(m,f,u),c.stateNode=a,to(c))}return yn(c),null;case 5:if(Wt(c),u=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==f&&to(c);else{if(!f){if(c.stateNode===null)throw Error(r(166));return yn(c),null}if(a=ee.current,zp(c))aT(c);else{switch(m=fw(ge.current),a){case 1:a=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=m.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?m.createElement("select",{is:f.is}):m.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?m.createElement(u,{is:f.is}):m.createElement(u)}}a[Er]=c,a[Zr]=f;e:for(m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break e;for(;m.sibling===null;){if(m.return===null||m.return===c)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}c.stateNode=a;e:switch(or(a,u,f),u){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&to(c)}}return yn(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==f&&to(c);else{if(typeof f!="string"&&c.stateNode===null)throw Error(r(166));if(a=ge.current,zp(c)){if(a=c.stateNode,u=c.memoizedProps,f=null,m=Br,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}a[Er]=c,a=!!(a.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||CI(a.nodeValue,u)),a||Ul(c)}else a=fw(a).createTextNode(f),a[Er]=c,c.stateNode=a}return yn(c),null;case 13:if(f=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=zp(c),f!==null&&f.dehydrated!==null){if(a===null){if(!m)throw Error(r(318));if(m=c.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Er]=c}else jp(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;yn(c),m=!1}else m=cT(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return c.flags&256?(Ja(c),c):(Ja(c),null)}if(Ja(c),(c.flags&128)!==0)return c.lanes=u,c;if(u=f!==null,a=a!==null&&a.memoizedState!==null,u){f=c.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool);var w=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==m&&(f.flags|=2048)}return u!==a&&u&&(c.child.flags|=8192),ew(c,c.updateQueue),yn(c),null;case 4:return Te(),a===null&&cA(c.stateNode.containerInfo),yn(c),null;case 10:return Za(c.type),yn(c),null;case 19:if(Z(Bn),m=c.memoizedState,m===null)return yn(c),null;if(f=(c.flags&128)!==0,w=m.rendering,w===null)if(f)ig(m,!1);else{if(vn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(w=Yy(a),w!==null){for(c.flags|=128,ig(m,!1),a=w.updateQueue,c.updateQueue=a,ew(c,a),c.subtreeFlags=0,a=u,u=c.child;u!==null;)sT(u,a),u=u.sibling;return re(Bn,Bn.current&1|2),c.child}a=a.sibling}m.tail!==null&&Ws()>rw&&(c.flags|=128,f=!0,ig(m,!1),c.lanes=4194304)}else{if(!f)if(a=Yy(w),a!==null){if(c.flags|=128,f=!0,a=a.updateQueue,c.updateQueue=a,ew(c,a),ig(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Lt)return yn(c),null}else 2*Ws()-m.renderingStartTime>rw&&u!==536870912&&(c.flags|=128,f=!0,ig(m,!1),c.lanes=4194304);m.isBackwards?(w.sibling=c.child,c.child=w):(a=m.last,a!==null?a.sibling=w:c.child=w,m.last=w)}return m.tail!==null?(c=m.tail,m.rendering=c,m.tail=c.sibling,m.renderingStartTime=Ws(),c.sibling=null,a=Bn.current,re(Bn,f?a&1|2:a&1),c):(yn(c),null);case 22:case 23:return Ja(c),u1(),f=c.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(c.flags|=8192):f&&(c.flags|=8192),f?(u&536870912)!==0&&(c.flags&128)===0&&(yn(c),c.subtreeFlags&6&&(c.flags|=8192)):yn(c),u=c.updateQueue,u!==null&&ew(c,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),f=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==u&&(c.flags|=2048),a!==null&&Z(Ll),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),c.memoizedState.cache!==u&&(c.flags|=2048),Za(kn),yn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function oL(a,c){switch(Qv(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Za(kn),Te(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Wt(c),null;case 13:if(Ja(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));jp()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Z(Bn),null;case 4:return Te(),null;case 10:return Za(c.type),null;case 22:case 23:return Ja(c),u1(),a!==null&&Z(Ll),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Za(kn),null;case 25:return null;default:return null}}function Rx(a,c){switch(Qv(c),c.tag){case 3:Za(kn),Te();break;case 26:case 27:case 5:Wt(c);break;case 4:Te();break;case 13:Ja(c);break;case 19:Z(Bn);break;case 10:Za(c.type);break;case 22:case 23:Ja(c),u1(),a!==null&&Z(Ll);break;case 24:Za(kn)}}function ag(a,c){try{var u=c.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&a)===a){f=void 0;var w=u.create,C=u.inst;f=w(),C.destroy=f}u=u.next}while(u!==m)}}catch(U){tn(c,c.return,U)}}function ac(a,c,u){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var w=m.next;f=w;do{if((f.tag&a)===a){var C=f.inst,U=C.destroy;if(U!==void 0){C.destroy=void 0,m=c;var V=u,se=U;try{se()}catch(he){tn(m,V,he)}}}f=f.next}while(f!==w)}}catch(he){tn(c,c.return,he)}}function Dx(a){var c=a.updateQueue;if(c!==null){var u=a.stateNode;try{bT(c,u)}catch(f){tn(a,a.return,f)}}}function Px(a,c,u){u.props=$l(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(f){tn(a,c,f)}}function og(a,c){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof u=="function"?a.refCleanup=u(f):u.current=f}}catch(m){tn(a,c,m)}}function aa(a,c){var u=a.ref,f=a.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(m){tn(a,c,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){tn(a,c,m)}else u.current=null}function Ux(a){var c=a.type,u=a.memoizedProps,f=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(m){tn(a,a.return,m)}}function M1(a,c,u){try{var f=a.stateNode;xL(f,a.type,u,c),f[Zr]=c}catch(m){tn(a,a.return,m)}}function kx(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&pc(a.type)||a.tag===4}function $1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&pc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function F1(a,c,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,c?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,c):(c=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,c.appendChild(a),u=u._reactRootContainer,u!=null||c.onclick!==null||(c.onclick=dw));else if(f!==4&&(f===27&&pc(a.type)&&(u=a.stateNode,c=null),a=a.child,a!==null))for(F1(a,c,u),a=a.sibling;a!==null;)F1(a,c,u),a=a.sibling}function tw(a,c,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,c?u.insertBefore(a,c):u.appendChild(a);else if(f!==4&&(f===27&&pc(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(tw(a,c,u),a=a.sibling;a!==null;)tw(a,c,u),a=a.sibling}function Bx(a){var c=a.stateNode,u=a.memoizedProps;try{for(var f=a.type,m=c.attributes;m.length;)c.removeAttributeNode(m[0]);or(c,f,u),c[Er]=a,c[Zr]=u}catch(w){tn(a,a.return,w)}}var no=!1,Nn=!1,H1=!1,Lx=typeof WeakSet=="function"?WeakSet:Set,Gn=null;function cL(a,c){if(a=a.containerInfo,hA=bw,a=WN(a),$v(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var C=0,U=-1,V=-1,se=0,he=0,pe=a,ae=null;t:for(;;){for(var oe;pe!==u||m!==0&&pe.nodeType!==3||(U=C+m),pe!==w||f!==0&&pe.nodeType!==3||(V=C+f),pe.nodeType===3&&(C+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)ae=pe,pe=oe;for(;;){if(pe===a)break t;if(ae===u&&++se===m&&(U=C),ae===w&&++he===f&&(V=C),(oe=pe.nextSibling)!==null)break;pe=ae,ae=pe.parentNode}pe=oe}u=U===-1||V===-1?null:{start:U,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(dA={focusedElem:a,selectionRange:u},bw=!1,Gn=c;Gn!==null;)if(c=Gn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Gn=a;else for(;Gn!==null;){switch(c=Gn,w=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,u=c,m=w.memoizedProps,w=w.memoizedState,f=u.stateNode;try{var rt=$l(u.type,m,u.elementType===u.type);a=f.getSnapshotBeforeUpdate(rt,w),f.__reactInternalSnapshotBeforeUpdate=a}catch(Ze){tn(u,u.return,Ze)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,u=a.nodeType,u===9)gA(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":gA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Gn=a;break}Gn=c.return}}function Mx(a,c,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:oc(a,u),f&4&&ag(5,u);break;case 1:if(oc(a,u),f&4)if(a=u.stateNode,c===null)try{a.componentDidMount()}catch(C){tn(u,u.return,C)}else{var m=$l(u.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(m,c,a.__reactInternalSnapshotBeforeUpdate)}catch(C){tn(u,u.return,C)}}f&64&&Dx(u),f&512&&og(u,u.return);break;case 3:if(oc(a,u),f&64&&(a=u.updateQueue,a!==null)){if(c=null,u.child!==null)switch(u.child.tag){case 27:case 5:c=u.child.stateNode;break;case 1:c=u.child.stateNode}try{bT(a,c)}catch(C){tn(u,u.return,C)}}break;case 27:c===null&&f&4&&Bx(u);case 26:case 5:oc(a,u),c===null&&f&4&&Ux(u),f&512&&og(u,u.return);break;case 12:oc(a,u);break;case 13:oc(a,u),f&4&&Hx(a,u),f&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=yL.bind(null,u),kL(a,u))));break;case 22:if(f=u.memoizedState!==null||no,!f){c=c!==null&&c.memoizedState!==null||Nn,m=no;var w=Nn;no=f,(Nn=c)&&!w?cc(a,u,(u.subtreeFlags&8772)!==0):oc(a,u),no=m,Nn=w}break;case 30:break;default:oc(a,u)}}function $x(a){var c=a.alternate;c!==null&&(a.alternate=null,$x(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Ev(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var dn=null,es=!1;function ro(a,c,u){for(u=u.child;u!==null;)Fx(a,c,u),u=u.sibling}function Fx(a,c,u){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(Qo,u)}catch{}switch(u.tag){case 26:Nn||aa(u,c),ro(a,c,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Nn||aa(u,c);var f=dn,m=es;pc(u.type)&&(dn=u.stateNode,es=!1),ro(a,c,u),mg(u.stateNode),dn=f,es=m;break;case 5:Nn||aa(u,c);case 6:if(f=dn,m=es,dn=null,ro(a,c,u),dn=f,es=m,dn!==null)if(es)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(u.stateNode)}catch(w){tn(u,c,w)}else try{dn.removeChild(u.stateNode)}catch(w){tn(u,c,w)}break;case 18:dn!==null&&(es?(a=dn,xI(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),_g(a)):xI(dn,u.stateNode));break;case 4:f=dn,m=es,dn=u.stateNode.containerInfo,es=!0,ro(a,c,u),dn=f,es=m;break;case 0:case 11:case 14:case 15:Nn||ac(2,u,c),Nn||ac(4,u,c),ro(a,c,u);break;case 1:Nn||(aa(u,c),f=u.stateNode,typeof f.componentWillUnmount=="function"&&Px(u,c,f)),ro(a,c,u);break;case 21:ro(a,c,u);break;case 22:Nn=(f=Nn)||u.memoizedState!==null,ro(a,c,u),Nn=f;break;default:ro(a,c,u)}}function Hx(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{_g(a)}catch(u){tn(c,c.return,u)}}function lL(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new Lx),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new Lx),c;default:throw Error(r(435,a.tag))}}function z1(a,c){var u=lL(a);c.forEach(function(f){var m=wL.bind(null,a,f);u.has(f)||(u.add(f),f.then(m,m))})}function Ns(a,c){var u=c.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f],w=a,C=c,U=C;e:for(;U!==null;){switch(U.tag){case 27:if(pc(U.type)){dn=U.stateNode,es=!1;break e}break;case 5:dn=U.stateNode,es=!1;break e;case 3:case 4:dn=U.stateNode.containerInfo,es=!0;break e}U=U.return}if(dn===null)throw Error(r(160));Fx(w,C,m),dn=null,es=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)zx(c,a),c=c.sibling}var Ni=null;function zx(a,c){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ns(c,a),Ts(a),f&4&&(ac(3,a,a.return),ag(3,a),ac(5,a,a.return));break;case 1:Ns(c,a),Ts(a),f&512&&(Nn||u===null||aa(u,u.return)),f&64&&no&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var m=Ni;if(Ns(c,a),Ts(a),f&512&&(Nn||u===null||aa(u,u.return)),f&4){var w=u!==null?u.memoizedState:null;if(f=a.memoizedState,u===null)if(f===null)if(a.stateNode===null){e:{f=a.type,u=a.memoizedProps,m=m.ownerDocument||m;t:switch(f){case"title":w=m.getElementsByTagName("title")[0],(!w||w[Rp]||w[Er]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(f),m.head.insertBefore(w,m.querySelector("head > title"))),or(w,f,u),w[Er]=a,qn(w),f=w;break e;case"link":var C=BI("link","href",m).get(f+(u.href||""));if(C){for(var U=0;U<C.length;U++)if(w=C[U],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(U,1);break t}}w=m.createElement(f),or(w,f,u),m.head.appendChild(w);break;case"meta":if(C=BI("meta","content",m).get(f+(u.content||""))){for(U=0;U<C.length;U++)if(w=C[U],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(U,1);break t}}w=m.createElement(f),or(w,f,u),m.head.appendChild(w);break;default:throw Error(r(468,f))}w[Er]=a,qn(w),f=w}a.stateNode=f}else LI(m,a.type,a.stateNode);else a.stateNode=kI(m,f,a.memoizedProps);else w!==f?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,f===null?LI(m,a.type,a.stateNode):kI(m,f,a.memoizedProps)):f===null&&a.stateNode!==null&&M1(a,a.memoizedProps,u.memoizedProps)}break;case 27:Ns(c,a),Ts(a),f&512&&(Nn||u===null||aa(u,u.return)),u!==null&&f&4&&M1(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Ns(c,a),Ts(a),f&512&&(Nn||u===null||aa(u,u.return)),a.flags&32){m=a.stateNode;try{Rh(m,"")}catch(oe){tn(a,a.return,oe)}}f&4&&a.stateNode!=null&&(m=a.memoizedProps,M1(a,m,u!==null?u.memoizedProps:m)),f&1024&&(H1=!0);break;case 6:if(Ns(c,a),Ts(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,u=a.stateNode;try{u.nodeValue=f}catch(oe){tn(a,a.return,oe)}}break;case 3:if(mw=null,m=Ni,Ni=pw(c.containerInfo),Ns(c,a),Ni=m,Ts(a),f&4&&u!==null&&u.memoizedState.isDehydrated)try{_g(c.containerInfo)}catch(oe){tn(a,a.return,oe)}H1&&(H1=!1,jx(a));break;case 4:f=Ni,Ni=pw(a.stateNode.containerInfo),Ns(c,a),Ts(a),Ni=f;break;case 12:Ns(c,a),Ts(a);break;case 13:Ns(c,a),Ts(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(W1=Ws()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,z1(a,f)));break;case 22:m=a.memoizedState!==null;var V=u!==null&&u.memoizedState!==null,se=no,he=Nn;if(no=se||m,Nn=he||V,Ns(c,a),Nn=he,no=se,Ts(a),f&8192)e:for(c=a.stateNode,c._visibility=m?c._visibility&-2:c._visibility|1,m&&(u===null||V||no||Nn||Fl(a)),u=null,c=a;;){if(c.tag===5||c.tag===26){if(u===null){V=u=c;try{if(w=V.stateNode,m)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{U=V.stateNode;var pe=V.memoizedProps.style,ae=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;U.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(oe){tn(V,V.return,oe)}}}else if(c.tag===6){if(u===null){V=c;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(oe){tn(V,V.return,oe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}f&4&&(f=a.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,z1(a,u))));break;case 19:Ns(c,a),Ts(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,z1(a,f)));break;case 30:break;case 21:break;default:Ns(c,a),Ts(a)}}function Ts(a){var c=a.flags;if(c&2){try{for(var u,f=a.return;f!==null;){if(kx(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,w=$1(a);tw(a,w,m);break;case 5:var C=u.stateNode;u.flags&32&&(Rh(C,""),u.flags&=-33);var U=$1(a);tw(a,U,C);break;case 3:case 4:var V=u.stateNode.containerInfo,se=$1(a);F1(a,se,V);break;default:throw Error(r(161))}}catch(he){tn(a,a.return,he)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function jx(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;jx(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function oc(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Mx(a,c.alternate,c),c=c.sibling}function Fl(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:ac(4,c,c.return),Fl(c);break;case 1:aa(c,c.return);var u=c.stateNode;typeof u.componentWillUnmount=="function"&&Px(c,c.return,u),Fl(c);break;case 27:mg(c.stateNode);case 26:case 5:aa(c,c.return),Fl(c);break;case 22:c.memoizedState===null&&Fl(c);break;case 30:Fl(c);break;default:Fl(c)}a=a.sibling}}function cc(a,c,u){for(u=u&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var f=c.alternate,m=a,w=c,C=w.flags;switch(w.tag){case 0:case 11:case 15:cc(m,w,u),ag(4,w);break;case 1:if(cc(m,w,u),f=w,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(se){tn(f,f.return,se)}if(f=w,m=f.updateQueue,m!==null){var U=f.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)wT(V[m],U)}catch(se){tn(f,f.return,se)}}u&&C&64&&Dx(w),og(w,w.return);break;case 27:Bx(w);case 26:case 5:cc(m,w,u),u&&f===null&&C&4&&Ux(w),og(w,w.return);break;case 12:cc(m,w,u);break;case 13:cc(m,w,u),u&&C&4&&Hx(m,w);break;case 22:w.memoizedState===null&&cc(m,w,u),og(w,w.return);break;case 30:break;default:cc(m,w,u)}c=c.sibling}}function j1(a,c){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Gp(u))}function q1(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Gp(a))}function oa(a,c,u,f){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)qx(a,c,u,f),c=c.sibling}function qx(a,c,u,f){var m=c.flags;switch(c.tag){case 0:case 11:case 15:oa(a,c,u,f),m&2048&&ag(9,c);break;case 1:oa(a,c,u,f);break;case 3:oa(a,c,u,f),m&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Gp(a)));break;case 12:if(m&2048){oa(a,c,u,f),a=c.stateNode;try{var w=c.memoizedProps,C=w.id,U=w.onPostCommit;typeof U=="function"&&U(C,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(V){tn(c,c.return,V)}}else oa(a,c,u,f);break;case 13:oa(a,c,u,f);break;case 23:break;case 22:w=c.stateNode,C=c.alternate,c.memoizedState!==null?w._visibility&2?oa(a,c,u,f):cg(a,c):w._visibility&2?oa(a,c,u,f):(w._visibility|=2,Qh(a,c,u,f,(c.subtreeFlags&10256)!==0)),m&2048&&j1(C,c);break;case 24:oa(a,c,u,f),m&2048&&q1(c.alternate,c);break;default:oa(a,c,u,f)}}function Qh(a,c,u,f,m){for(m=m&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=a,C=c,U=u,V=f,se=C.flags;switch(C.tag){case 0:case 11:case 15:Qh(w,C,U,V,m),ag(8,C);break;case 23:break;case 22:var he=C.stateNode;C.memoizedState!==null?he._visibility&2?Qh(w,C,U,V,m):cg(w,C):(he._visibility|=2,Qh(w,C,U,V,m)),m&&se&2048&&j1(C.alternate,C);break;case 24:Qh(w,C,U,V,m),m&&se&2048&&q1(C.alternate,C);break;default:Qh(w,C,U,V,m)}c=c.sibling}}function cg(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var u=a,f=c,m=f.flags;switch(f.tag){case 22:cg(u,f),m&2048&&j1(f.alternate,f);break;case 24:cg(u,f),m&2048&&q1(f.alternate,f);break;default:cg(u,f)}c=c.sibling}}var lg=8192;function Zh(a){if(a.subtreeFlags&lg)for(a=a.child;a!==null;)Vx(a),a=a.sibling}function Vx(a){switch(a.tag){case 26:Zh(a),a.flags&lg&&a.memoizedState!==null&&WL(Ni,a.memoizedState,a.memoizedProps);break;case 5:Zh(a);break;case 3:case 4:var c=Ni;Ni=pw(a.stateNode.containerInfo),Zh(a),Ni=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=lg,lg=16777216,Zh(a),lg=c):Zh(a));break;default:Zh(a)}}function Gx(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function ug(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var u=0;u<c.length;u++){var f=c[u];Gn=f,Wx(f,a)}Gx(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Kx(a),a=a.sibling}function Kx(a){switch(a.tag){case 0:case 11:case 15:ug(a),a.flags&2048&&ac(9,a,a.return);break;case 3:ug(a);break;case 12:ug(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,nw(a)):ug(a);break;default:ug(a)}}function nw(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var u=0;u<c.length;u++){var f=c[u];Gn=f,Wx(f,a)}Gx(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:ac(8,c,c.return),nw(c);break;case 22:u=c.stateNode,u._visibility&2&&(u._visibility&=-3,nw(c));break;default:nw(c)}a=a.sibling}}function Wx(a,c){for(;Gn!==null;){var u=Gn;switch(u.tag){case 0:case 11:case 15:ac(8,u,c);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Gp(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Gn=f;else e:for(u=a;Gn!==null;){f=Gn;var m=f.sibling,w=f.return;if($x(f),f===u){Gn=null;break e}if(m!==null){m.return=w,Gn=m;break e}Gn=w}}}var uL={getCacheForType:function(a){var c=vr(kn),u=c.data.get(a);return u===void 0&&(u=a(),c.data.set(a,u)),u}},hL=typeof WeakMap=="function"?WeakMap:Map,jt=0,an=null,yt=null,Ct=0,qt=0,xs=null,lc=!1,Xh=!1,V1=!1,so=0,vn=0,uc=0,Hl=0,G1=0,ni=0,Jh=0,hg=null,ts=null,K1=!1,W1=0,rw=1/0,sw=null,hc=null,ar=0,dc=null,ed=null,td=0,Y1=0,Q1=null,Yx=null,dg=0,Z1=null;function Is(){if((jt&2)!==0&&Ct!==0)return Ct&-Ct;if(_.T!==null){var a=zh;return a!==0?a:sA()}return hN()}function Qx(){ni===0&&(ni=(Ct&536870912)===0||Lt?oN():536870912);var a=ti.current;return a!==null&&(a.flags|=32),ni}function Os(a,c,u){(a===an&&(qt===2||qt===9)||a.cancelPendingCommit!==null)&&(nd(a,0),fc(a,Ct,ni,!1)),Op(a,u),((jt&2)===0||a!==an)&&(a===an&&((jt&2)===0&&(Hl|=u),vn===4&&fc(a,Ct,ni,!1)),ca(a))}function Zx(a,c,u){if((jt&6)!==0)throw Error(r(327));var f=!u&&(c&124)===0&&(c&a.expiredLanes)===0||Ip(a,c),m=f?pL(a,c):eA(a,c,!0),w=f;do{if(m===0){Xh&&!f&&fc(a,c,0,!1);break}else{if(u=a.current.alternate,w&&!dL(u)){m=eA(a,c,!1),w=!1;continue}if(m===2){if(w=c,a.errorRecoveryDisabledLanes&w)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){c=C;e:{var U=a;m=hg;var V=U.current.memoizedState.isDehydrated;if(V&&(nd(U,C).flags|=256),C=eA(U,C,!1),C!==2){if(V1&&!V){U.errorRecoveryDisabledLanes|=w,Hl|=w,m=4;break e}w=ts,ts=m,w!==null&&(ts===null?ts=w:ts.push.apply(ts,w))}m=C}if(w=!1,m!==2)continue}}if(m===1){nd(a,0),fc(a,c,0,!0);break}e:{switch(f=a,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:fc(f,c,ni,!lc);break e;case 2:ts=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(m=W1+300-Ws(),10<m)){if(fc(f,c,ni,!lc),gy(f,0,!0)!==0)break e;f.timeoutHandle=NI(Xx.bind(null,f,u,ts,sw,K1,c,ni,Hl,Jh,lc,w,2,-0,0),m);break e}Xx(f,u,ts,sw,K1,c,ni,Hl,Jh,lc,w,0,-0,0)}}break}while(!0);ca(a)}function Xx(a,c,u,f,m,w,C,U,V,se,he,pe,ae,oe){if(a.timeoutHandle=-1,pe=c.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(bg={stylesheets:null,count:0,unsuspend:KL},Vx(c),pe=YL(),pe!==null)){a.cancelPendingCommit=pe(iI.bind(null,a,c,w,u,f,m,C,U,V,he,1,ae,oe)),fc(a,w,C,!se);return}iI(a,c,w,u,f,m,C,U,V)}function dL(a){for(var c=a;;){var u=c.tag;if((u===0||u===11||u===15)&&c.flags&16384&&(u=c.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var m=u[f],w=m.getSnapshot;m=m.value;try{if(!_s(w(),m))return!1}catch{return!1}}if(u=c.child,c.subtreeFlags&16384&&u!==null)u.return=c,c=u;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fc(a,c,u,f){c&=~G1,c&=~Hl,a.suspendedLanes|=c,a.pingedLanes&=~c,f&&(a.warmLanes|=c),f=a.expirationTimes;for(var m=c;0<m;){var w=31-kr(m),C=1<<w;f[w]=-1,m&=~C}u!==0&&lN(a,u,c)}function iw(){return(jt&6)===0?(fg(0),!1):!0}function X1(){if(yt!==null){if(qt===0)var a=yt.return;else a=yt,Qa=kl=null,g1(a),Wh=null,rg=0,a=yt;for(;a!==null;)Rx(a.alternate,a),a=a.return;yt=null}}function nd(a,c){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,OL(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),X1(),an=a,yt=u=Ka(a.current,null),Ct=c,qt=0,xs=null,lc=!1,Xh=Ip(a,c),V1=!1,Jh=ni=G1=Hl=uc=vn=0,ts=hg=null,K1=!1,(c&8)!==0&&(c|=c&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=c;0<f;){var m=31-kr(f),w=1<<m;c|=a[m],f&=~w}return so=c,Ty(),u}function Jx(a,c){ft=null,_.H=Gy,c===Wp||c===By?(c=mT(),qt=3):c===fT?(c=mT(),qt=4):qt=c===yx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,xs=c,yt===null&&(vn=1,Zy(a,Zs(c,a.current)))}function eI(){var a=_.H;return _.H=Gy,a===null?Gy:a}function tI(){var a=_.A;return _.A=uL,a}function J1(){vn=4,lc||(Ct&4194048)!==Ct&&ti.current!==null||(Xh=!0),(uc&134217727)===0&&(Hl&134217727)===0||an===null||fc(an,Ct,ni,!1)}function eA(a,c,u){var f=jt;jt|=2;var m=eI(),w=tI();(an!==a||Ct!==c)&&(sw=null,nd(a,c)),c=!1;var C=vn;e:do try{if(qt!==0&&yt!==null){var U=yt,V=xs;switch(qt){case 8:X1(),C=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(c=!0);var se=qt;if(qt=0,xs=null,rd(a,U,V,se),u&&Xh){C=0;break e}break;default:se=qt,qt=0,xs=null,rd(a,U,V,se)}}fL(),C=vn;break}catch(he){Jx(a,he)}while(!0);return c&&a.shellSuspendCounter++,Qa=kl=null,jt=f,_.H=m,_.A=w,yt===null&&(an=null,Ct=0,Ty()),C}function fL(){for(;yt!==null;)nI(yt)}function pL(a,c){var u=jt;jt|=2;var f=eI(),m=tI();an!==a||Ct!==c?(sw=null,rw=Ws()+500,nd(a,c)):Xh=Ip(a,c);e:do try{if(qt!==0&&yt!==null){c=yt;var w=xs;t:switch(qt){case 1:qt=0,xs=null,rd(a,c,w,1);break;case 2:case 9:if(pT(w)){qt=0,xs=null,rI(c);break}c=function(){qt!==2&&qt!==9||an!==a||(qt=7),ca(a)},w.then(c,c);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:pT(w)?(qt=0,xs=null,rI(c)):(qt=0,xs=null,rd(a,c,w,7));break;case 5:var C=null;switch(yt.tag){case 26:C=yt.memoizedState;case 5:case 27:var U=yt;if(!C||MI(C)){qt=0,xs=null;var V=U.sibling;if(V!==null)yt=V;else{var se=U.return;se!==null?(yt=se,aw(se)):yt=null}break t}}qt=0,xs=null,rd(a,c,w,5);break;case 6:qt=0,xs=null,rd(a,c,w,6);break;case 8:X1(),vn=6;break e;default:throw Error(r(462))}}gL();break}catch(he){Jx(a,he)}while(!0);return Qa=kl=null,_.H=f,_.A=m,jt=u,yt!==null?0:(an=null,Ct=0,Ty(),vn)}function gL(){for(;yt!==null&&!na();)nI(yt)}function nI(a){var c=Ix(a.alternate,a,so);a.memoizedProps=a.pendingProps,c===null?aw(a):yt=c}function rI(a){var c=a,u=c.alternate;switch(c.tag){case 15:case 0:c=Cx(u,c,c.pendingProps,c.type,void 0,Ct);break;case 11:c=Cx(u,c,c.pendingProps,c.type.render,c.ref,Ct);break;case 5:g1(c);default:Rx(u,c),c=yt=sT(c,so),c=Ix(u,c,so)}a.memoizedProps=a.pendingProps,c===null?aw(a):yt=c}function rd(a,c,u,f){Qa=kl=null,g1(c),Wh=null,rg=0;var m=c.return;try{if(sL(a,m,c,u,Ct)){vn=1,Zy(a,Zs(u,a.current)),yt=null;return}}catch(w){if(m!==null)throw yt=m,w;vn=1,Zy(a,Zs(u,a.current)),yt=null;return}c.flags&32768?(Lt||f===1?a=!0:Xh||(Ct&536870912)!==0?a=!1:(lc=a=!0,(f===2||f===9||f===3||f===6)&&(f=ti.current,f!==null&&f.tag===13&&(f.flags|=16384))),sI(c,a)):aw(c)}function aw(a){var c=a;do{if((c.flags&32768)!==0){sI(c,lc);return}a=c.return;var u=aL(c.alternate,c,so);if(u!==null){yt=u;return}if(c=c.sibling,c!==null){yt=c;return}yt=c=a}while(c!==null);vn===0&&(vn=5)}function sI(a,c){do{var u=oL(a.alternate,a);if(u!==null){u.flags&=32767,yt=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!c&&(a=a.sibling,a!==null)){yt=a;return}yt=a=u}while(a!==null);vn=6,yt=null}function iI(a,c,u,f,m,w,C,U,V){a.cancelPendingCommit=null;do ow();while(ar!==0);if((jt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(w=c.lanes|c.childLanes,w|=qv,K6(a,u,w,C,U,V),a===an&&(yt=an=null,Ct=0),ed=c,dc=a,td=u,Y1=w,Q1=m,Yx=f,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,bL(Yo,function(){return uI(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||f){f=_.T,_.T=null,m=L.p,L.p=2,C=jt,jt|=4;try{cL(a,c,u)}finally{jt=C,L.p=m,_.T=f}}ar=1,aI(),oI(),cI()}}function aI(){if(ar===1){ar=0;var a=dc,c=ed,u=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||u){u=_.T,_.T=null;var f=L.p;L.p=2;var m=jt;jt|=4;try{zx(c,a);var w=dA,C=WN(a.containerInfo),U=w.focusedElem,V=w.selectionRange;if(C!==U&&U&&U.ownerDocument&&KN(U.ownerDocument.documentElement,U)){if(V!==null&&$v(U)){var se=V.start,he=V.end;if(he===void 0&&(he=se),"selectionStart"in U)U.selectionStart=se,U.selectionEnd=Math.min(he,U.value.length);else{var pe=U.ownerDocument||document,ae=pe&&pe.defaultView||window;if(ae.getSelection){var oe=ae.getSelection(),rt=U.textContent.length,Ze=Math.min(V.start,rt),Zt=V.end===void 0?Ze:Math.min(V.end,rt);!oe.extend&&Ze>Zt&&(C=Zt,Zt=Ze,Ze=C);var X=GN(U,Ze),Y=GN(U,Zt);if(X&&Y&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==Y.node||oe.focusOffset!==Y.offset)){var te=pe.createRange();te.setStart(X.node,X.offset),oe.removeAllRanges(),Ze>Zt?(oe.addRange(te),oe.extend(Y.node,Y.offset)):(te.setEnd(Y.node,Y.offset),oe.addRange(te))}}}}for(pe=[],oe=U;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<pe.length;U++){var fe=pe[U];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}bw=!!hA,dA=hA=null}finally{jt=m,L.p=f,_.T=u}}a.current=c,ar=2}}function oI(){if(ar===2){ar=0;var a=dc,c=ed,u=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||u){u=_.T,_.T=null;var f=L.p;L.p=2;var m=jt;jt|=4;try{Mx(a,c.alternate,c)}finally{jt=m,L.p=f,_.T=u}}ar=3}}function cI(){if(ar===4||ar===3){ar=0,Ch();var a=dc,c=ed,u=td,f=Yx;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ar=5:(ar=0,ed=dc=null,lI(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(hc=null),wv(u),c=c.stateNode,Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(Qo,c,void 0,(c.current.flags&128)===128)}catch{}if(f!==null){c=_.T,m=L.p,L.p=2,_.T=null;try{for(var w=a.onRecoverableError,C=0;C<f.length;C++){var U=f[C];w(U.value,{componentStack:U.stack})}}finally{_.T=c,L.p=m}}(td&3)!==0&&ow(),ca(a),m=a.pendingLanes,(u&4194090)!==0&&(m&42)!==0?a===Z1?dg++:(dg=0,Z1=a):dg=0,fg(0)}}function lI(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Gp(c)))}function ow(a){return aI(),oI(),cI(),uI()}function uI(){if(ar!==5)return!1;var a=dc,c=Y1;Y1=0;var u=wv(td),f=_.T,m=L.p;try{L.p=32>u?32:u,_.T=null,u=Q1,Q1=null;var w=dc,C=td;if(ar=0,ed=dc=null,td=0,(jt&6)!==0)throw Error(r(331));var U=jt;if(jt|=4,Kx(w.current),qx(w,w.current,C,u),jt=U,fg(0,!1),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(Qo,w)}catch{}return!0}finally{L.p=m,_.T=f,lI(a,c)}}function hI(a,c,u){c=Zs(u,c),c=I1(a.stateNode,c,2),a=nc(a,c,2),a!==null&&(Op(a,2),ca(a))}function tn(a,c,u){if(a.tag===3)hI(a,a,u);else for(;c!==null;){if(c.tag===3){hI(c,a,u);break}else if(c.tag===1){var f=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(hc===null||!hc.has(f))){a=Zs(u,a),u=gx(2),f=nc(c,u,2),f!==null&&(mx(u,f,c,a),Op(f,2),ca(f));break}}c=c.return}}function tA(a,c,u){var f=a.pingCache;if(f===null){f=a.pingCache=new hL;var m=new Set;f.set(c,m)}else m=f.get(c),m===void 0&&(m=new Set,f.set(c,m));m.has(u)||(V1=!0,m.add(u),a=mL.bind(null,a,c,u),c.then(a,a))}function mL(a,c,u){var f=a.pingCache;f!==null&&f.delete(c),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,an===a&&(Ct&u)===u&&(vn===4||vn===3&&(Ct&62914560)===Ct&&300>Ws()-W1?(jt&2)===0&&nd(a,0):G1|=u,Jh===Ct&&(Jh=0)),ca(a)}function dI(a,c){c===0&&(c=cN()),a=Mh(a,c),a!==null&&(Op(a,c),ca(a))}function yL(a){var c=a.memoizedState,u=0;c!==null&&(u=c.retryLane),dI(a,u)}function wL(a,c){var u=0;switch(a.tag){case 13:var f=a.stateNode,m=a.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(c),dI(a,u)}function bL(a,c){return mn(a,c)}var cw=null,sd=null,nA=!1,lw=!1,rA=!1,zl=0;function ca(a){a!==sd&&a.next===null&&(sd===null?cw=sd=a:sd=sd.next=a),lw=!0,nA||(nA=!0,vL())}function fg(a,c){if(!rA&&lw){rA=!0;do for(var u=!1,f=cw;f!==null;){if(a!==0){var m=f.pendingLanes;if(m===0)var w=0;else{var C=f.suspendedLanes,U=f.pingedLanes;w=(1<<31-kr(42|a)+1)-1,w&=m&~(C&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,mI(f,w))}else w=Ct,w=gy(f,f===an?w:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(w&3)===0||Ip(f,w)||(u=!0,mI(f,w));f=f.next}while(u);rA=!1}}function EL(){fI()}function fI(){lw=nA=!1;var a=0;zl!==0&&(IL()&&(a=zl),zl=0);for(var c=Ws(),u=null,f=cw;f!==null;){var m=f.next,w=pI(f,c);w===0?(f.next=null,u===null?cw=m:u.next=m,m===null&&(sd=u)):(u=f,(a!==0||(w&3)!==0)&&(lw=!0)),f=m}fg(a)}function pI(a,c){for(var u=a.suspendedLanes,f=a.pingedLanes,m=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var C=31-kr(w),U=1<<C,V=m[C];V===-1?((U&u)===0||(U&f)!==0)&&(m[C]=G6(U,c)):V<=c&&(a.expiredLanes|=U),w&=~U}if(c=an,u=Ct,u=gy(a,a===c?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,u===0||a===c&&(qt===2||qt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&hn(f),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Ip(a,u)){if(c=u&-u,c===a.callbackPriority)return c;switch(f!==null&&hn(f),wv(u)){case 2:case 8:u=Tp;break;case 32:u=Yo;break;case 268435456:u=xp;break;default:u=Yo}return f=gI.bind(null,a),u=mn(u,f),a.callbackPriority=c,a.callbackNode=u,c}return f!==null&&f!==null&&hn(f),a.callbackPriority=2,a.callbackNode=null,2}function gI(a,c){if(ar!==0&&ar!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(ow()&&a.callbackNode!==u)return null;var f=Ct;return f=gy(a,a===an?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(Zx(a,f,c),pI(a,Ws()),a.callbackNode!=null&&a.callbackNode===u?gI.bind(null,a):null)}function mI(a,c){if(ow())return null;Zx(a,c,!0)}function vL(){RL(function(){(jt&6)!==0?mn(Np,EL):fI()})}function sA(){return zl===0&&(zl=oN()),zl}function yI(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ey(""+a)}function wI(a,c){var u=c.ownerDocument.createElement("input");return u.name=c.name,u.value=c.value,a.id&&u.setAttribute("form",a.id),c.parentNode.insertBefore(u,c),a=new FormData(a),u.parentNode.removeChild(u),a}function AL(a,c,u,f,m){if(c==="submit"&&u&&u.stateNode===m){var w=yI((m[Zr]||null).action),C=f.submitter;C&&(c=(c=C[Zr]||null)?yI(c.formAction):C.getAttribute("formAction"),c!==null&&(w=c,C=null));var U=new _y("action","action",null,f,m);a.push({event:U,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(zl!==0){var V=C?wI(m,C):new FormData(m);_1(u,{pending:!0,data:V,method:m.method,action:w},null,V)}}else typeof w=="function"&&(U.preventDefault(),V=C?wI(m,C):new FormData(m),_1(u,{pending:!0,data:V,method:m.method,action:w},w,V))},currentTarget:m}]})}}for(var iA=0;iA<jv.length;iA++){var aA=jv[iA],CL=aA.toLowerCase(),_L=aA[0].toUpperCase()+aA.slice(1);Si(CL,"on"+_L)}Si(ZN,"onAnimationEnd"),Si(XN,"onAnimationIteration"),Si(JN,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(HB,"onTransitionRun"),Si(zB,"onTransitionStart"),Si(jB,"onTransitionCancel"),Si(eT,"onTransitionEnd"),xh("onMouseEnter",["mouseout","mouseover"]),xh("onMouseLeave",["mouseout","mouseover"]),xh("onPointerEnter",["pointerout","pointerover"]),xh("onPointerLeave",["pointerout","pointerover"]),Nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pg));function bI(a,c){c=(c&4)!==0;for(var u=0;u<a.length;u++){var f=a[u],m=f.event;f=f.listeners;e:{var w=void 0;if(c)for(var C=f.length-1;0<=C;C--){var U=f[C],V=U.instance,se=U.currentTarget;if(U=U.listener,V!==w&&m.isPropagationStopped())break e;w=U,m.currentTarget=se;try{w(m)}catch(he){Qy(he)}m.currentTarget=null,w=V}else for(C=0;C<f.length;C++){if(U=f[C],V=U.instance,se=U.currentTarget,U=U.listener,V!==w&&m.isPropagationStopped())break e;w=U,m.currentTarget=se;try{w(m)}catch(he){Qy(he)}m.currentTarget=null,w=V}}}}function wt(a,c){var u=c[bv];u===void 0&&(u=c[bv]=new Set);var f=a+"__bubble";u.has(f)||(EI(c,a,2,!1),u.add(f))}function oA(a,c,u){var f=0;c&&(f|=4),EI(u,a,f,c)}var uw="_reactListening"+Math.random().toString(36).slice(2);function cA(a){if(!a[uw]){a[uw]=!0,fN.forEach(function(u){u!=="selectionchange"&&(SL.has(u)||oA(u,!1,a),oA(u,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[uw]||(c[uw]=!0,oA("selectionchange",!1,c))}}function EI(a,c,u,f){switch(qI(c)){case 2:var m=XL;break;case 8:m=JL;break;default:m=AA}u=m.bind(null,c,u,a),m=void 0,!Ov||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(m=!0),f?m!==void 0?a.addEventListener(c,u,{capture:!0,passive:m}):a.addEventListener(c,u,!0):m!==void 0?a.addEventListener(c,u,{passive:m}):a.addEventListener(c,u,!1)}function lA(a,c,u,f,m){var w=f;if((c&1)===0&&(c&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var U=f.stateNode.containerInfo;if(U===m)break;if(C===4)for(C=f.return;C!==null;){var V=C.tag;if((V===3||V===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;U!==null;){if(C=Sh(U),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){f=w=C;continue e}U=U.parentNode}}f=f.return}TN(function(){var se=w,he=xv(u),pe=[];e:{var ae=tT.get(a);if(ae!==void 0){var oe=_y,rt=a;switch(a){case"keypress":if(Ay(u)===0)break e;case"keydown":case"keyup":oe=bB;break;case"focusin":rt="focus",oe=Uv;break;case"focusout":rt="blur",oe=Uv;break;case"beforeblur":case"afterblur":oe=Uv;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ON;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=oB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=AB;break;case ZN:case XN:case JN:oe=uB;break;case eT:oe=_B;break;case"scroll":case"scrollend":oe=iB;break;case"wheel":oe=NB;break;case"copy":case"cut":case"paste":oe=dB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=DN;break;case"toggle":case"beforetoggle":oe=xB}var Ze=(c&4)!==0,Zt=!Ze&&(a==="scroll"||a==="scrollend"),X=Ze?ae!==null?ae+"Capture":null:ae;Ze=[];for(var Y=se,te;Y!==null;){var fe=Y;if(te=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||te===null||X===null||(fe=Pp(Y,X),fe!=null&&Ze.push(gg(Y,fe,te))),Zt)break;Y=Y.return}0<Ze.length&&(ae=new oe(ae,rt,null,u,he),pe.push({event:ae,listeners:Ze}))}}if((c&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",oe=a==="mouseout"||a==="pointerout",ae&&u!==Tv&&(rt=u.relatedTarget||u.fromElement)&&(Sh(rt)||rt[_h]))break e;if((oe||ae)&&(ae=he.window===he?he:(ae=he.ownerDocument)?ae.defaultView||ae.parentWindow:window,oe?(rt=u.relatedTarget||u.toElement,oe=se,rt=rt?Sh(rt):null,rt!==null&&(Zt=i(rt),Ze=rt.tag,rt!==Zt||Ze!==5&&Ze!==27&&Ze!==6)&&(rt=null)):(oe=null,rt=se),oe!==rt)){if(Ze=ON,fe="onMouseLeave",X="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Ze=DN,fe="onPointerLeave",X="onPointerEnter",Y="pointer"),Zt=oe==null?ae:Dp(oe),te=rt==null?ae:Dp(rt),ae=new Ze(fe,Y+"leave",oe,u,he),ae.target=Zt,ae.relatedTarget=te,fe=null,Sh(he)===se&&(Ze=new Ze(X,Y+"enter",rt,u,he),Ze.target=te,Ze.relatedTarget=Zt,fe=Ze),Zt=fe,oe&&rt)t:{for(Ze=oe,X=rt,Y=0,te=Ze;te;te=id(te))Y++;for(te=0,fe=X;fe;fe=id(fe))te++;for(;0<Y-te;)Ze=id(Ze),Y--;for(;0<te-Y;)X=id(X),te--;for(;Y--;){if(Ze===X||X!==null&&Ze===X.alternate)break t;Ze=id(Ze),X=id(X)}Ze=null}else Ze=null;oe!==null&&vI(pe,ae,oe,Ze,!1),rt!==null&&Zt!==null&&vI(pe,Zt,rt,Ze,!0)}}e:{if(ae=se?Dp(se):window,oe=ae.nodeName&&ae.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ae.type==="file")var je=FN;else if(MN(ae))if(HN)je=MB;else{je=BB;var gt=kB}else oe=ae.nodeName,!oe||oe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&Nv(se.elementType)&&(je=FN):je=LB;if(je&&(je=je(a,se))){$N(pe,je,u,he);break e}gt&&gt(a,ae,se),a==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&Sv(ae,"number",ae.value)}switch(gt=se?Dp(se):window,a){case"focusin":(MN(gt)||gt.contentEditable==="true")&&(kh=gt,Fv=se,Hp=null);break;case"focusout":Hp=Fv=kh=null;break;case"mousedown":Hv=!0;break;case"contextmenu":case"mouseup":case"dragend":Hv=!1,YN(pe,u,he);break;case"selectionchange":if(FB)break;case"keydown":case"keyup":YN(pe,u,he)}var Ve;if(Bv)e:{switch(a){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Uh?BN(a,u)&&(Je="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(PN&&u.locale!=="ko"&&(Uh||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Uh&&(Ve=xN()):(Xo=he,Rv="value"in Xo?Xo.value:Xo.textContent,Uh=!0)),gt=hw(se,Je),0<gt.length&&(Je=new RN(Je,a,null,u,he),pe.push({event:Je,listeners:gt}),Ve?Je.data=Ve:(Ve=LN(u),Ve!==null&&(Je.data=Ve)))),(Ve=OB?RB(a,u):DB(a,u))&&(Je=hw(se,"onBeforeInput"),0<Je.length&&(gt=new RN("onBeforeInput","beforeinput",null,u,he),pe.push({event:gt,listeners:Je}),gt.data=Ve)),AL(pe,a,se,u,he)}bI(pe,c)})}function gg(a,c,u){return{instance:a,listener:c,currentTarget:u}}function hw(a,c){for(var u=c+"Capture",f=[];a!==null;){var m=a,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=Pp(a,u),m!=null&&f.unshift(gg(a,m,w)),m=Pp(a,c),m!=null&&f.push(gg(a,m,w))),a.tag===3)return f;a=a.return}return[]}function id(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function vI(a,c,u,f,m){for(var w=c._reactName,C=[];u!==null&&u!==f;){var U=u,V=U.alternate,se=U.stateNode;if(U=U.tag,V!==null&&V===f)break;U!==5&&U!==26&&U!==27||se===null||(V=se,m?(se=Pp(u,w),se!=null&&C.unshift(gg(u,se,V))):m||(se=Pp(u,w),se!=null&&C.push(gg(u,se,V)))),u=u.return}C.length!==0&&a.push({event:c,listeners:C})}var NL=/\r\n?/g,TL=/\u0000|\uFFFD/g;function AI(a){return(typeof a=="string"?a:""+a).replace(NL,`
`).replace(TL,"")}function CI(a,c){return c=AI(c),AI(a)===c}function dw(){}function Qt(a,c,u,f,m,w){switch(u){case"children":typeof f=="string"?c==="body"||c==="textarea"&&f===""||Rh(a,f):(typeof f=="number"||typeof f=="bigint")&&c!=="body"&&Rh(a,""+f);break;case"className":yy(a,"class",f);break;case"tabIndex":yy(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":yy(a,u,f);break;case"style":SN(a,f,w);break;case"data":if(c!=="object"){yy(a,"data",f);break}case"src":case"href":if(f===""&&(c!=="a"||u!=="href")){a.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Ey(""+f),a.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(c!=="input"&&Qt(a,c,"name",m.name,m,null),Qt(a,c,"formEncType",m.formEncType,m,null),Qt(a,c,"formMethod",m.formMethod,m,null),Qt(a,c,"formTarget",m.formTarget,m,null)):(Qt(a,c,"encType",m.encType,m,null),Qt(a,c,"method",m.method,m,null),Qt(a,c,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Ey(""+f),a.setAttribute(u,f);break;case"onClick":f!=null&&(a.onclick=dw);break;case"onScroll":f!=null&&wt("scroll",a);break;case"onScrollEnd":f!=null&&wt("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}u=Ey(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""+f):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":f===!0?a.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,f):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(u,f):a.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(u):a.setAttribute(u,f);break;case"popover":wt("beforetoggle",a),wt("toggle",a),my(a,"popover",f);break;case"xlinkActuate":Va(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Va(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Va(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Va(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Va(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Va(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Va(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Va(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Va(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":my(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=rB.get(u)||u,my(a,u,f))}}function uA(a,c,u,f,m,w){switch(u){case"style":SN(a,f,w);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof f=="string"?Rh(a,f):(typeof f=="number"||typeof f=="bigint")&&Rh(a,""+f);break;case"onScroll":f!=null&&wt("scroll",a);break;case"onScrollEnd":f!=null&&wt("scrollend",a);break;case"onClick":f!=null&&(a.onclick=dw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pN.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),c=u.slice(2,m?u.length-7:void 0),w=a[Zr]||null,w=w!=null?w[u]:null,typeof w=="function"&&a.removeEventListener(c,w,m),typeof f=="function")){typeof w!="function"&&w!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(c,f,m);break e}u in a?a[u]=f:f===!0?a.setAttribute(u,""):my(a,u,f)}}}function or(a,c,u){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",a),wt("load",a);var f=!1,m=!1,w;for(w in u)if(u.hasOwnProperty(w)){var C=u[w];if(C!=null)switch(w){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Qt(a,c,w,C,u,null)}}m&&Qt(a,c,"srcSet",u.srcSet,u,null),f&&Qt(a,c,"src",u.src,u,null);return;case"input":wt("invalid",a);var U=w=C=m=null,V=null,se=null;for(f in u)if(u.hasOwnProperty(f)){var he=u[f];if(he!=null)switch(f){case"name":m=he;break;case"type":C=he;break;case"checked":V=he;break;case"defaultChecked":se=he;break;case"value":w=he;break;case"defaultValue":U=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,c));break;default:Qt(a,c,f,he,u,null)}}vN(a,w,U,V,se,C,m,!1),wy(a);return;case"select":wt("invalid",a),f=C=w=null;for(m in u)if(u.hasOwnProperty(m)&&(U=u[m],U!=null))switch(m){case"value":w=U;break;case"defaultValue":C=U;break;case"multiple":f=U;default:Qt(a,c,m,U,u,null)}c=w,u=C,a.multiple=!!f,c!=null?Oh(a,!!f,c,!1):u!=null&&Oh(a,!!f,u,!0);return;case"textarea":wt("invalid",a),w=m=f=null;for(C in u)if(u.hasOwnProperty(C)&&(U=u[C],U!=null))switch(C){case"value":f=U;break;case"defaultValue":m=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Qt(a,c,C,U,u,null)}CN(a,f,m,w),wy(a);return;case"option":for(V in u)if(u.hasOwnProperty(V)&&(f=u[V],f!=null))switch(V){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Qt(a,c,V,f,u,null)}return;case"dialog":wt("beforetoggle",a),wt("toggle",a),wt("cancel",a),wt("close",a);break;case"iframe":case"object":wt("load",a);break;case"video":case"audio":for(f=0;f<pg.length;f++)wt(pg[f],a);break;case"image":wt("error",a),wt("load",a);break;case"details":wt("toggle",a);break;case"embed":case"source":case"link":wt("error",a),wt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in u)if(u.hasOwnProperty(se)&&(f=u[se],f!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Qt(a,c,se,f,u,null)}return;default:if(Nv(c)){for(he in u)u.hasOwnProperty(he)&&(f=u[he],f!==void 0&&uA(a,c,he,f,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(f=u[U],f!=null&&Qt(a,c,U,f,u,null))}function xL(a,c,u,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,C=null,U=null,V=null,se=null,he=null;for(oe in u){var pe=u[oe];if(u.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":V=pe;default:f.hasOwnProperty(oe)||Qt(a,c,oe,null,f,pe)}}for(var ae in f){var oe=f[ae];if(pe=u[ae],f.hasOwnProperty(ae)&&(oe!=null||pe!=null))switch(ae){case"type":w=oe;break;case"name":m=oe;break;case"checked":se=oe;break;case"defaultChecked":he=oe;break;case"value":C=oe;break;case"defaultValue":U=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,c));break;default:oe!==pe&&Qt(a,c,ae,oe,f,pe)}}_v(a,C,U,V,se,he,w,m);return;case"select":oe=C=U=ae=null;for(w in u)if(V=u[w],u.hasOwnProperty(w)&&V!=null)switch(w){case"value":break;case"multiple":oe=V;default:f.hasOwnProperty(w)||Qt(a,c,w,null,f,V)}for(m in f)if(w=f[m],V=u[m],f.hasOwnProperty(m)&&(w!=null||V!=null))switch(m){case"value":ae=w;break;case"defaultValue":U=w;break;case"multiple":C=w;default:w!==V&&Qt(a,c,m,w,f,V)}c=U,u=C,f=oe,ae!=null?Oh(a,!!u,ae,!1):!!f!=!!u&&(c!=null?Oh(a,!!u,c,!0):Oh(a,!!u,u?[]:"",!1));return;case"textarea":oe=ae=null;for(U in u)if(m=u[U],u.hasOwnProperty(U)&&m!=null&&!f.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Qt(a,c,U,null,f,m)}for(C in f)if(m=f[C],w=u[C],f.hasOwnProperty(C)&&(m!=null||w!=null))switch(C){case"value":ae=m;break;case"defaultValue":oe=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&Qt(a,c,C,m,f,w)}AN(a,ae,oe);return;case"option":for(var rt in u)if(ae=u[rt],u.hasOwnProperty(rt)&&ae!=null&&!f.hasOwnProperty(rt))switch(rt){case"selected":a.selected=!1;break;default:Qt(a,c,rt,null,f,ae)}for(V in f)if(ae=f[V],oe=u[V],f.hasOwnProperty(V)&&ae!==oe&&(ae!=null||oe!=null))switch(V){case"selected":a.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Qt(a,c,V,ae,f,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in u)ae=u[Ze],u.hasOwnProperty(Ze)&&ae!=null&&!f.hasOwnProperty(Ze)&&Qt(a,c,Ze,null,f,ae);for(se in f)if(ae=f[se],oe=u[se],f.hasOwnProperty(se)&&ae!==oe&&(ae!=null||oe!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,c));break;default:Qt(a,c,se,ae,f,oe)}return;default:if(Nv(c)){for(var Zt in u)ae=u[Zt],u.hasOwnProperty(Zt)&&ae!==void 0&&!f.hasOwnProperty(Zt)&&uA(a,c,Zt,void 0,f,ae);for(he in f)ae=f[he],oe=u[he],!f.hasOwnProperty(he)||ae===oe||ae===void 0&&oe===void 0||uA(a,c,he,ae,f,oe);return}}for(var X in u)ae=u[X],u.hasOwnProperty(X)&&ae!=null&&!f.hasOwnProperty(X)&&Qt(a,c,X,null,f,ae);for(pe in f)ae=f[pe],oe=u[pe],!f.hasOwnProperty(pe)||ae===oe||ae==null&&oe==null||Qt(a,c,pe,ae,f,oe)}var hA=null,dA=null;function fw(a){return a.nodeType===9?a:a.ownerDocument}function _I(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SI(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function fA(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var pA=null;function IL(){var a=window.event;return a&&a.type==="popstate"?a===pA?!1:(pA=a,!0):(pA=null,!1)}var NI=typeof setTimeout=="function"?setTimeout:void 0,OL=typeof clearTimeout=="function"?clearTimeout:void 0,TI=typeof Promise=="function"?Promise:void 0,RL=typeof queueMicrotask=="function"?queueMicrotask:typeof TI<"u"?function(a){return TI.resolve(null).then(a).catch(DL)}:NI;function DL(a){setTimeout(function(){throw a})}function pc(a){return a==="head"}function xI(a,c){var u=c,f=0,m=0;do{var w=u.nextSibling;if(a.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<f&&8>f){u=f;var C=a.ownerDocument;if(u&1&&mg(C.documentElement),u&2&&mg(C.body),u&4)for(u=C.head,mg(u),C=u.firstChild;C;){var U=C.nextSibling,V=C.nodeName;C[Rp]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=U}}if(m===0){a.removeChild(w),_g(c);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:f=u.charCodeAt(0)-48;else f=0;u=w}while(u);_g(c)}function gA(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var u=c;switch(c=c.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":gA(u),Ev(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function PL(a,c,u,f){for(;a.nodeType===1;){var m=u;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Rp])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=Ti(a.nextSibling),a===null)break}return null}function UL(a,c,u){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Ti(a.nextSibling),a===null))return null;return a}function mA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function kL(a,c){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")c();else{var f=function(){c(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Ti(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var yA=null;function II(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(c===0)return a;c--}else u==="/$"&&c++}a=a.previousSibling}return null}function OI(a,c,u){switch(c=fw(u),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function mg(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Ev(a)}var ri=new Map,RI=new Set;function pw(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var io=L.d;L.d={f:BL,r:LL,D:ML,C:$L,L:FL,m:HL,X:jL,S:zL,M:qL};function BL(){var a=io.f(),c=iw();return a||c}function LL(a){var c=Nh(a);c!==null&&c.tag===5&&c.type==="form"?ZT(c):io.r(a)}var ad=typeof document>"u"?null:document;function DI(a,c,u){var f=ad;if(f&&typeof c=="string"&&c){var m=Qs(c);m='link[rel="'+a+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),RI.has(m)||(RI.add(m),a={rel:a,crossOrigin:u,href:c},f.querySelector(m)===null&&(c=f.createElement("link"),or(c,"link",a),qn(c),f.head.appendChild(c)))}}function ML(a){io.D(a),DI("dns-prefetch",a,null)}function $L(a,c){io.C(a,c),DI("preconnect",a,c)}function FL(a,c,u){io.L(a,c,u);var f=ad;if(f&&a&&c){var m='link[rel="preload"][as="'+Qs(c)+'"]';c==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Qs(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Qs(u.imageSizes)+'"]')):m+='[href="'+Qs(a)+'"]';var w=m;switch(c){case"style":w=od(a);break;case"script":w=cd(a)}ri.has(w)||(a=p({rel:"preload",href:c==="image"&&u&&u.imageSrcSet?void 0:a,as:c},u),ri.set(w,a),f.querySelector(m)!==null||c==="style"&&f.querySelector(yg(w))||c==="script"&&f.querySelector(wg(w))||(c=f.createElement("link"),or(c,"link",a),qn(c),f.head.appendChild(c)))}}function HL(a,c){io.m(a,c);var u=ad;if(u&&a){var f=c&&typeof c.as=="string"?c.as:"script",m='link[rel="modulepreload"][as="'+Qs(f)+'"][href="'+Qs(a)+'"]',w=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=cd(a)}if(!ri.has(w)&&(a=p({rel:"modulepreload",href:a},c),ri.set(w,a),u.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(wg(w)))return}f=u.createElement("link"),or(f,"link",a),qn(f),u.head.appendChild(f)}}}function zL(a,c,u){io.S(a,c,u);var f=ad;if(f&&a){var m=Th(f).hoistableStyles,w=od(a);c=c||"default";var C=m.get(w);if(!C){var U={loading:0,preload:null};if(C=f.querySelector(yg(w)))U.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":c},u),(u=ri.get(w))&&wA(a,u);var V=C=f.createElement("link");qn(V),or(V,"link",a),V._p=new Promise(function(se,he){V.onload=se,V.onerror=he}),V.addEventListener("load",function(){U.loading|=1}),V.addEventListener("error",function(){U.loading|=2}),U.loading|=4,gw(C,c,f)}C={type:"stylesheet",instance:C,count:1,state:U},m.set(w,C)}}}function jL(a,c){io.X(a,c);var u=ad;if(u&&a){var f=Th(u).hoistableScripts,m=cd(a),w=f.get(m);w||(w=u.querySelector(wg(m)),w||(a=p({src:a,async:!0},c),(c=ri.get(m))&&bA(a,c),w=u.createElement("script"),qn(w),or(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},f.set(m,w))}}function qL(a,c){io.M(a,c);var u=ad;if(u&&a){var f=Th(u).hoistableScripts,m=cd(a),w=f.get(m);w||(w=u.querySelector(wg(m)),w||(a=p({src:a,async:!0,type:"module"},c),(c=ri.get(m))&&bA(a,c),w=u.createElement("script"),qn(w),or(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},f.set(m,w))}}function PI(a,c,u,f){var m=(m=ge.current)?pw(m):null;if(!m)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(c=od(u.href),u=Th(m).hoistableStyles,f=u.get(c),f||(f={type:"style",instance:null,count:0,state:null},u.set(c,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=od(u.href);var w=Th(m).hoistableStyles,C=w.get(a);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,C),(w=m.querySelector(yg(a)))&&!w._p&&(C.instance=w,C.state.loading=5),ri.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ri.set(a,u),w||VL(m,a,u,C.state))),c&&f===null)throw Error(r(528,""));return C}if(c&&f!==null)throw Error(r(529,""));return null;case"script":return c=u.async,u=u.src,typeof u=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=cd(u),u=Th(m).hoistableScripts,f=u.get(c),f||(f={type:"script",instance:null,count:0,state:null},u.set(c,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function od(a){return'href="'+Qs(a)+'"'}function yg(a){return'link[rel="stylesheet"]['+a+"]"}function UI(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function VL(a,c,u,f){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?f.loading=1:(c=a.createElement("link"),f.preload=c,c.addEventListener("load",function(){return f.loading|=1}),c.addEventListener("error",function(){return f.loading|=2}),or(c,"link",u),qn(c),a.head.appendChild(c))}function cd(a){return'[src="'+Qs(a)+'"]'}function wg(a){return"script[async]"+a}function kI(a,c,u){if(c.count++,c.instance===null)switch(c.type){case"style":var f=a.querySelector('style[data-href~="'+Qs(u.href)+'"]');if(f)return c.instance=f,qn(f),f;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),qn(f),or(f,"style",m),gw(f,u.precedence,a),c.instance=f;case"stylesheet":m=od(u.href);var w=a.querySelector(yg(m));if(w)return c.state.loading|=4,c.instance=w,qn(w),w;f=UI(u),(m=ri.get(m))&&wA(f,m),w=(a.ownerDocument||a).createElement("link"),qn(w);var C=w;return C._p=new Promise(function(U,V){C.onload=U,C.onerror=V}),or(w,"link",f),c.state.loading|=4,gw(w,u.precedence,a),c.instance=w;case"script":return w=cd(u.src),(m=a.querySelector(wg(w)))?(c.instance=m,qn(m),m):(f=u,(m=ri.get(w))&&(f=p({},u),bA(f,m)),a=a.ownerDocument||a,m=a.createElement("script"),qn(m),or(m,"link",f),a.head.appendChild(m),c.instance=m);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(f=c.instance,c.state.loading|=4,gw(f,u.precedence,a));return c.instance}function gw(a,c,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,w=m,C=0;C<f.length;C++){var U=f[C];if(U.dataset.precedence===c)w=U;else if(w!==m)break}w?w.parentNode.insertBefore(a,w.nextSibling):(c=u.nodeType===9?u.head:u,c.insertBefore(a,c.firstChild))}function wA(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function bA(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var mw=null;function BI(a,c,u){if(mw===null){var f=new Map,m=mw=new Map;m.set(u,f)}else m=mw,f=m.get(u),f||(f=new Map,m.set(u,f));if(f.has(a))return f;for(f.set(a,null),u=u.getElementsByTagName(a),m=0;m<u.length;m++){var w=u[m];if(!(w[Rp]||w[Er]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(c)||"";C=a+C;var U=f.get(C);U?U.push(w):f.set(C,[w])}}return f}function LI(a,c,u){a=a.ownerDocument||a,a.head.insertBefore(u,c==="title"?a.querySelector("head > title"):null)}function GL(a,c,u){if(u===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function MI(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var bg=null;function KL(){}function WL(a,c,u){if(bg===null)throw Error(r(475));var f=bg;if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=od(u.href),w=a.querySelector(yg(m));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=yw.bind(f),a.then(f,f)),c.state.loading|=4,c.instance=w,qn(w);return}w=a.ownerDocument||a,u=UI(u),(m=ri.get(m))&&wA(u,m),w=w.createElement("link"),qn(w);var C=w;C._p=new Promise(function(U,V){C.onload=U,C.onerror=V}),or(w,"link",u),c.instance=w}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(f.count++,c=yw.bind(f),a.addEventListener("load",c),a.addEventListener("error",c))}}function YL(){if(bg===null)throw Error(r(475));var a=bg;return a.stylesheets&&a.count===0&&EA(a,a.stylesheets),0<a.count?function(c){var u=setTimeout(function(){if(a.stylesheets&&EA(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(u)}}:null}function yw(){if(this.count--,this.count===0){if(this.stylesheets)EA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ww=null;function EA(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ww=new Map,c.forEach(QL,a),ww=null,yw.call(a))}function QL(a,c){if(!(c.state.loading&4)){var u=ww.get(a);if(u)var f=u.get(null);else{u=new Map,ww.set(a,u);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var C=m[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),f=C)}f&&u.set(null,f)}m=c.instance,C=m.getAttribute("data-precedence"),w=u.get(C)||f,w===f&&u.set(null,m),u.set(C,m),this.count++,f=yw.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),w?w.parentNode.insertBefore(m,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),c.state.loading|=4}}var Eg={$$typeof:T,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function ZL(a,c,u,f,m,w,C,U){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mv(0),this.hiddenUpdates=mv(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function $I(a,c,u,f,m,w,C,U,V,se,he,pe){return a=new ZL(a,c,u,C,U,V,se,pe),c=1,w===!0&&(c|=24),w=Ss(3,null,null,c),a.current=w,w.stateNode=a,c=t1(),c.refCount++,a.pooledCache=c,c.refCount++,w.memoizedState={element:f,isDehydrated:u,cache:c},i1(w),a}function FI(a){return a?(a=$h,a):$h}function HI(a,c,u,f,m,w){m=FI(m),f.context===null?f.context=m:f.pendingContext=m,f=tc(c),f.payload={element:u},w=w===void 0?null:w,w!==null&&(f.callback=w),u=nc(a,f,c),u!==null&&(Os(u,a,c),Qp(u,a,c))}function zI(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<c?u:c}}function vA(a,c){zI(a,c),(a=a.alternate)&&zI(a,c)}function jI(a){if(a.tag===13){var c=Mh(a,67108864);c!==null&&Os(c,a,67108864),vA(a,67108864)}}var bw=!0;function XL(a,c,u,f){var m=_.T;_.T=null;var w=L.p;try{L.p=2,AA(a,c,u,f)}finally{L.p=w,_.T=m}}function JL(a,c,u,f){var m=_.T;_.T=null;var w=L.p;try{L.p=8,AA(a,c,u,f)}finally{L.p=w,_.T=m}}function AA(a,c,u,f){if(bw){var m=CA(f);if(m===null)lA(a,c,f,Ew,u),VI(a,f);else if(tM(m,a,c,u,f))f.stopPropagation();else if(VI(a,f),c&4&&-1<eM.indexOf(a)){for(;m!==null;){var w=Nh(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Sl(w.pendingLanes);if(C!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;C;){var V=1<<31-kr(C);U.entanglements[1]|=V,C&=~V}ca(w),(jt&6)===0&&(rw=Ws()+500,fg(0))}}break;case 13:U=Mh(w,2),U!==null&&Os(U,w,2),iw(),vA(w,2)}if(w=CA(f),w===null&&lA(a,c,f,Ew,u),w===m)break;m=w}m!==null&&f.stopPropagation()}else lA(a,c,f,null,u)}}function CA(a){return a=xv(a),_A(a)}var Ew=null;function _A(a){if(Ew=null,a=Sh(a),a!==null){var c=i(a);if(c===null)a=null;else{var u=c.tag;if(u===13){if(a=o(c),a!==null)return a;a=null}else if(u===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Ew=a,null}function qI(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pv()){case Np:return 2;case Tp:return 8;case Yo:case uy:return 32;case xp:return 268435456;default:return 32}default:return 32}}var SA=!1,gc=null,mc=null,yc=null,vg=new Map,Ag=new Map,wc=[],eM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VI(a,c){switch(a){case"focusin":case"focusout":gc=null;break;case"dragenter":case"dragleave":mc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":vg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ag.delete(c.pointerId)}}function Cg(a,c,u,f,m,w){return a===null||a.nativeEvent!==w?(a={blockedOn:c,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},c!==null&&(c=Nh(c),c!==null&&jI(c)),a):(a.eventSystemFlags|=f,c=a.targetContainers,m!==null&&c.indexOf(m)===-1&&c.push(m),a)}function tM(a,c,u,f,m){switch(c){case"focusin":return gc=Cg(gc,a,c,u,f,m),!0;case"dragenter":return mc=Cg(mc,a,c,u,f,m),!0;case"mouseover":return yc=Cg(yc,a,c,u,f,m),!0;case"pointerover":var w=m.pointerId;return vg.set(w,Cg(vg.get(w)||null,a,c,u,f,m)),!0;case"gotpointercapture":return w=m.pointerId,Ag.set(w,Cg(Ag.get(w)||null,a,c,u,f,m)),!0}return!1}function GI(a){var c=Sh(a.target);if(c!==null){var u=i(c);if(u!==null){if(c=u.tag,c===13){if(c=o(u),c!==null){a.blockedOn=c,W6(a.priority,function(){if(u.tag===13){var f=Is();f=yv(f);var m=Mh(u,f);m!==null&&Os(m,u,f),vA(u,f)}});return}}else if(c===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function vw(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var u=CA(a.nativeEvent);if(u===null){u=a.nativeEvent;var f=new u.constructor(u.type,u);Tv=f,u.target.dispatchEvent(f),Tv=null}else return c=Nh(u),c!==null&&jI(c),a.blockedOn=u,!1;c.shift()}return!0}function KI(a,c,u){vw(a)&&u.delete(c)}function nM(){SA=!1,gc!==null&&vw(gc)&&(gc=null),mc!==null&&vw(mc)&&(mc=null),yc!==null&&vw(yc)&&(yc=null),vg.forEach(KI),Ag.forEach(KI)}function Aw(a,c){a.blockedOn===c&&(a.blockedOn=null,SA||(SA=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nM)))}var Cw=null;function WI(a){Cw!==a&&(Cw=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cw===a&&(Cw=null);for(var c=0;c<a.length;c+=3){var u=a[c],f=a[c+1],m=a[c+2];if(typeof f!="function"){if(_A(f||u)===null)continue;break}var w=Nh(u);w!==null&&(a.splice(c,3),c-=3,_1(w,{pending:!0,data:m,method:u.method,action:f},f,m))}}))}function _g(a){function c(V){return Aw(V,a)}gc!==null&&Aw(gc,a),mc!==null&&Aw(mc,a),yc!==null&&Aw(yc,a),vg.forEach(c),Ag.forEach(c);for(var u=0;u<wc.length;u++){var f=wc[u];f.blockedOn===a&&(f.blockedOn=null)}for(;0<wc.length&&(u=wc[0],u.blockedOn===null);)GI(u),u.blockedOn===null&&wc.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var m=u[f],w=u[f+1],C=m[Zr]||null;if(typeof w=="function")C||WI(u);else if(C){var U=null;if(w&&w.hasAttribute("formAction")){if(m=w,C=w[Zr]||null)U=C.formAction;else if(_A(m)!==null)continue}else U=C.action;typeof U=="function"?u[f+1]=U:(u.splice(f,3),f-=3),WI(u)}}}function NA(a){this._internalRoot=a}_w.prototype.render=NA.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var u=c.current,f=Is();HI(u,f,a,c,null,null)},_w.prototype.unmount=NA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;HI(a.current,2,null,a,null,null),iw(),c[_h]=null}};function _w(a){this._internalRoot=a}_w.prototype.unstable_scheduleHydration=function(a){if(a){var c=hN();a={blockedOn:null,target:a,priority:c};for(var u=0;u<wc.length&&c!==0&&c<wc[u].priority;u++);wc.splice(u,0,a),u===0&&GI(a)}};var YI=e.version;if(YI!=="19.1.0")throw Error(r(527,YI,"19.1.0"));L.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var rM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sw.isDisabled&&Sw.supportsFiber)try{Qo=Sw.inject(rM),Ur=Sw}catch{}}return Tg.createRoot=function(a,c){if(!s(a))throw Error(r(299));var u=!1,f="",m=hx,w=dx,C=fx,U=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(f=c.identifierPrefix),c.onUncaughtError!==void 0&&(m=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks)),c=$I(a,1,!1,null,null,u,f,m,w,C,U,null),a[_h]=c.current,cA(a),new NA(c)},Tg.hydrateRoot=function(a,c,u){if(!s(a))throw Error(r(299));var f=!1,m="",w=hx,C=dx,U=fx,V=null,se=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(V=u.unstable_transitionCallbacks),u.formState!==void 0&&(se=u.formState)),c=$I(a,1,!0,c,u??null,f,m,w,C,U,V,se),c.context=FI(null),u=c.current,f=Is(),f=yv(f),m=tc(f),m.callback=null,nc(u,m,f),u=f,c.current.lanes=u,Op(c,u),ca(c),a[_h]=c.current,cA(a),new _w(c)},Tg.version="19.1.0",Tg}var aO;function mM(){if(aO)return OA.exports;aO=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),OA.exports=gM(),OA.exports}var yM=mM();const wM="/captcha-frontend-test/logo.svg",bM="/captcha-frontend-test/secret_logo.svg",EM="/captcha-frontend-test/quex_logo.svg",xE="https://tdx-pool.kaeru.gg";async function oO(n,e){const t=await fetch(`${xE}/api/challenges`,{method:"POST",body:JSON.stringify({address:n,chainId:e.toString()})});if(!t.ok)throw new Error(`Error creating challenge: ${t.statusText}`);return t.json()}async function vM(n){const e=await fetch(`${xE}/api/challenges/${n.id}`,{method:"DELETE",body:JSON.stringify({address:"example"})});if(!e.ok)throw new Error(`Error deleting challenge: ${e.statusText}`)}async function AM(n,e,t){return(await fetch(`${xE}/api/challenges/${n}/${e}/validate`,{method:"POST",body:JSON.stringify({solution:t})})).ok}async function CM(n,e,t){const r=await fetch(`${xE}/api/challenges/${n}/submit`,{method:"POST",body:JSON.stringify({solutions:e,userData:_M(t)})});if(!r.ok)return null;const s=await r.json(),i=r.headers.get("Quex-TD-Id");return i&&(s.tdId=BigInt(i)),s}function _M(n){if("toBase64"in n&&typeof n.toBase64=="function")return n.toBase64();let e="";for(const t of n)e+=String.fromCharCode(t);return btoa(e)}var UA={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var cO;function SM(){return cO||(cO=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=s(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return t.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)e.call(i,l)&&i[l]&&(o=s(o,l));return o}function s(i,o){return o?i?i+" "+o:i+o:i}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(UA)),UA.exports}var NM=SM();const ws=$0(NM);function pp(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var TM=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_iconBlock__Y1IUb {
  flex: 1;
}
.index-module_dots__2OJFw {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
}
.index-module_dots__2OJFw .dot {
  position: absolute;
  z-index: 2;
  width: 22px;
  height: 22px;
  color: var(--go-captcha-theme-dot-color);
  background: var(--go-captcha-theme-dot-bg-color);
  border: 3px solid #f7f9fb;
  border-color: var(--go-captcha-theme-dot-border-color);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 22px;
  cursor: default;
}
`,lO={iconBlock:"index-module_iconBlock__Y1IUb",dots:"index-module_dots__2OJFw"};pp(TM);var xM=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
:root {
  --go-captcha-theme-text-color: #333333;
  --go-captcha-theme-bg-color: #ffffff;
  --go-captcha-theme-btn-color: #ffffff;
  --go-captcha-theme-btn-disabled-color: #749ff9;
  --go-captcha-theme-btn-bg-color: #4e87ff;
  --go-captcha-theme-btn-border-color: #4e87ff;
  --go-captcha-theme-active-color: #3e7cff;
  --go-captcha-theme-border-color: rgba(206, 223, 254, 0.5);
  --go-captcha-theme-icon-color: #3C3C3C;
  --go-captcha-theme-drag-bar-color: #e0e0e0;
  --go-captcha-theme-drag-bg-color: #3e7cff;
  --go-captcha-theme-drag-icon-color: #ffffff;
  --go-captcha-theme-round-color: #e0e0e0;
  --go-captcha-theme-loading-icon-color: #3e7cff;
  --go-captcha-theme-body-bg-color: #34383e;
  --go-captcha-theme-dot-color: #cedffe;
  --go-captcha-theme-dot-bg-color: #3e7cff;
  --go-captcha-theme-dot-border-color: #f7f9fb;
  --go-captcha-theme-default-color: #3e7cff;
  --go-captcha-theme-default-bg-color: #ecf5ff;
  --go-captcha-theme-default-border-color: #3e7cff;
  --go-captcha-theme-default-hover-color: #e0efff;
  --go-captcha-theme-error-color: #ed4630;
  --go-captcha-theme-error-bg-color: #fef0f0;
  --go-captcha-theme-error-border-color: #ff5a34;
  --go-captcha-theme-warn-color: #ffa000;
  --go-captcha-theme-warn-bg-color: #fdf6ec;
  --go-captcha-theme-warn-border-color: #ffbe09;
  --go-captcha-theme-success-color: #5eaa2f;
  --go-captcha-theme-success-bg-color: #f0f9eb;
  --go-captcha-theme-success-border-color: #8bc640;
}
.gocaptcha-module_wrapper__Kpdey {
  padding: 12px 16px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  box-sizing: border-box;
}
.gocaptcha-module_theme__h-Ytl {
  border: 1px solid rgba(206, 223, 254, 0.5);
  border-color: var(--go-captcha-theme-border-color);
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(100, 100, 100, 0.1);
  -webkit-box-shadow: 0 0 20px rgba(100, 100, 100, 0.1);
  -moz-box-shadow: 0 0 20px rgba(100, 100, 100, 0.1);
  background-color: var(--go-captcha-theme-bg-color);
}
.gocaptcha-module_header__LjDUC {
  height: 36px;
  width: 100%;
  font-size: 15px;
  color: var(--go-captcha-theme-text-color);
  display: flex;
  align-items: center;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.gocaptcha-module_header__LjDUC span {
  flex: 1;
  padding-right: 5px;
}
.gocaptcha-module_header__LjDUC em {
  padding: 0 3px;
  font-weight: bold;
  color: var(--go-captcha-theme-active-color);
  font-style: normal;
}
.gocaptcha-module_body__KJKNu {
  position: relative;
  width: 100%;
  margin-top: 10px;
  display: flex;
  background: var(--go-captcha-theme-body-bg-color);
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  overflow: hidden;
}
.gocaptcha-module_bodyInner__jahqH {
  position: relative;
  background: var(--go-captcha-theme-body-bg-color);
}
.gocaptcha-module_picture__LRwbY {
  position: relative;
  z-index: 2;
  width: 100%;
}
.gocaptcha-module_hide__TUOZE {
  visibility: hidden;
}
.gocaptcha-module_loading__Y-PYK {
  position: absolute;
  z-index: 1;
  top: 50%;
  left: 50%;
  width: 68px;
  height: 68px;
  margin-left: -34px;
  margin-top: -34px;
  line-height: 68px;
  text-align: center;
  display: flex;
  align-content: center;
  justify-content: center;
}
.gocaptcha-module_loading__Y-PYK svg,
.gocaptcha-module_loading__Y-PYK circle {
  color: var(--go-captcha-theme-loading-icon-color);
  fill: var(--go-captcha-theme-loading-icon-color);
}
.gocaptcha-module_footer__Ywdpy {
  width: 100%;
  height: 50px;
  color: #34383e;
  display: flex;
  align-items: center;
  padding-top: 10px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.gocaptcha-module_iconBlock__mVB8B {
  display: flex;
  align-items: center;
}
.gocaptcha-module_iconBlock__mVB8B svg {
  color: var(--go-captcha-theme-icon-color);
  fill: var(--go-captcha-theme-icon-color);
  margin: 0 5px;
  cursor: pointer;
}
.gocaptcha-module_buttonBlock__EZ4vg {
  width: 120px;
  height: 40px;
}
.gocaptcha-module_buttonBlock__EZ4vg button {
  width: 100%;
  height: 40px;
  text-align: center;
  padding: 9px 15px;
  font-size: 15px;
  border-radius: 5px;
  display: inline-block;
  line-height: 1;
  white-space: nowrap;
  cursor: pointer;
  color: var(--go-captcha-theme-btn-color);
  background-color: var(--go-captcha-theme-btn-bg-color);
  border: 1px solid transparent;
  border-color: var(--go-captcha-theme-btn-bg-color);
  -webkit-appearance: none;
  box-sizing: border-box;
  outline: none;
  margin: 0;
  transition: 0.1s;
  font-weight: 500;
  -moz-user-select: none;
  -webkit-user-select: none;
}
.gocaptcha-module_buttonBlock__EZ4vg button.disabled {
  pointer-events: none;
  background-color: var(--go-captcha-theme-btn-disabled-color);
  border-color: var(--go-captcha-theme-btn-disabled-color);
}
.gocaptcha-module_dragSlideBar__noauW {
  width: 100%;
  height: 100%;
  position: relative;
  touch-action: none;
}
.gocaptcha-module_dragLine__3B9KR {
  position: absolute;
  height: 14px;
  background-color: var(--go-captcha-theme-drag-bar-color);
  left: 0;
  right: 0;
  top: 50%;
  margin-top: -7px;
  border-radius: 7px;
}
.gocaptcha-module_dragBlock__bFlwx {
  position: absolute;
  left: 0;
  top: 50%;
  margin-top: -20px;
  width: 82px;
  height: 40px;
  z-index: 2;
  background-color: var(--go-captcha-theme-drag-bg-color);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  border-radius: 24px;
  box-shadow: 0 0 20px rgba(100, 100, 100, 0.35);
  -webkit-box-shadow: 0 0 20px rgba(100, 100, 100, 0.35);
  -moz-box-shadow: 0 0 20px rgba(100, 100, 100, 0.35);
}
.gocaptcha-module_dragBlock__bFlwx svg {
  color: var(--go-captcha-theme-drag-icon-color);
  fill: var(--go-captcha-theme-drag-icon-color);
}
.gocaptcha-module_disabled__4kN6w {
  pointer-events: none;
  background-color: var(--go-captcha-theme-btn-disabled-color);
  border-color: var(--go-captcha-theme-btn-disabled-color);
}
.gocaptcha-module_dragBlockInline__PpF3f {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
`,Ye={wrapper:"gocaptcha-module_wrapper__Kpdey",theme:"gocaptcha-module_theme__h-Ytl",header:"gocaptcha-module_header__LjDUC",body:"gocaptcha-module_body__KJKNu",bodyInner:"gocaptcha-module_bodyInner__jahqH",picture:"gocaptcha-module_picture__LRwbY",hide:"gocaptcha-module_hide__TUOZE",loading:"gocaptcha-module_loading__Y-PYK",footer:"gocaptcha-module_footer__Ywdpy",iconBlock:"gocaptcha-module_iconBlock__mVB8B",buttonBlock:"gocaptcha-module_buttonBlock__EZ4vg",dragSlideBar:"gocaptcha-module_dragSlideBar__noauW",dragLine:"gocaptcha-module_dragLine__3B9KR",dragBlock:"gocaptcha-module_dragBlock__bFlwx",disabled:"gocaptcha-module_disabled__4kN6w",dragBlockInline:"gocaptcha-module_dragBlockInline__PpF3f"};pp(xM);const IM=()=>({width:300,height:220,thumbWidth:150,thumbHeight:40,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请在下图依次点击",buttonText:"确认",iconSize:22,dotSize:24}),IE=n=>de.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:26,height:26},n),de.createElement("path",{d:`M100.1,189.9C100.1,189.9,100,189.9,100.1,189.9c-49.7,0-90-40.4-90-89.9c0-49.6,40.4-89.9,89.9-89.9
		c49.6,0,89.9,40.4,89.9,89.9c0,18.2-5.4,35.7-15.6,50.7c-1.5,2.1-3.6,3.4-6.1,3.9c-2.5,0.4-5-0.1-7-1.6c-4.2-3-5.3-8.6-2.4-12.9
		c8.1-11.9,12.4-25.7,12.4-40.1c0-39.2-31.9-71.1-71.1-71.1c-39.2,0-71.1,31.9-71.1,71.1c0,39.2,31.9,71.1,71.1,71.1
		c7.7,0,15.3-1.2,22.6-3.6c2.4-0.8,4.9-0.6,7.2,0.5c2.2,1.1,3.9,3.1,4.7,5.5c1.6,4.9-1,10.2-5.9,11.9
		C119.3,188.4,109.8,189.9,100.1,189.9z M73,136.4C73,136.4,73,136.4,73,136.4c-2.5,0-4.9-1-6.7-2.8c-3.7-3.7-3.7-9.6,0-13.3
		L86.7,100L66.4,79.7c-3.7-3.7-3.7-9.6,0-13.3c3.7-3.7,9.6-3.7,13.3,0L100,86.7l20.3-20.3c1.8-1.8,4.1-2.8,6.7-2.8c0,0,0,0,0,0
		c2.5,0,4.9,1,6.7,2.8c1.8,1.8,2.8,4.1,2.8,6.7c0,2.5-1,4.9-2.8,6.7L113.3,100l20.3,20.3c3.7,3.7,3.7,9.6,0,13.3
		c-3.7,3.7-9.6,3.7-13.3,0L100,113.3l-20.3,20.3C77.9,135.4,75.5,136.4,73,136.4z`})),OE=n=>de.createElement("svg",Object.assign({width:26,height:26},n,{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"}),de.createElement("path",{d:`M135,149.9c-10.7,7.6-23.2,11.4-36,11.2c-1.7,0-3.4-0.1-5-0.3c-0.7-0.1-1.4-0.2-2-0.3c-1.3-0.2-2.6-0.4-3.9-0.6
	c-0.8-0.2-1.6-0.4-2.3-0.5c-1.2-0.3-2.5-0.6-3.7-1c-0.6-0.2-1.2-0.4-1.7-0.6c-1.4-0.5-2.8-1-4.2-1.5c-0.3-0.1-0.6-0.3-0.9-0.4
	c-1.6-0.7-3.2-1.4-4.7-2.3c-0.1,0-0.1-0.1-0.2-0.1c-5.1-2.9-9.8-6.4-14-10.6c-0.1-0.1-0.1-0.1-0.2-0.2c-1.3-1.3-2.5-2.7-3.7-4.1
	c-0.2-0.3-0.5-0.6-0.7-0.9c-8.4-10.6-13.5-24.1-13.5-38.8h14.3c0.4,0,0.7-0.2,0.9-0.5c0.2-0.3,0.2-0.8,0-1.1L29.5,60.9
	c-0.2-0.3-0.5-0.5-0.9-0.5c-0.4,0-0.7,0.2-0.9,0.5L3.8,97.3c-0.2,0.3-0.2,0.7,0,1.1c0.2,0.3,0.5,0.5,0.9,0.5h14.3
	c0,17.2,5.3,33.2,14.3,46.4c0.1,0.2,0.2,0.4,0.3,0.6c0.9,1.4,2,2.6,3,3.9c0.4,0.5,0.7,1,1.1,1.5c1.5,1.8,3,3.5,4.6,5.2
	c0.2,0.2,0.3,0.3,0.5,0.5c5.4,5.5,11.5,10.1,18.2,13.8c0.2,0.1,0.3,0.2,0.5,0.3c1.9,1,3.9,2,5.9,2.9c0.5,0.2,1,0.5,1.5,0.7
	c1.7,0.7,3.5,1.3,5.2,1.9c0.8,0.3,1.7,0.6,2.5,0.8c1.5,0.5,3.1,0.8,4.7,1.2c1.1,0.2,2.1,0.5,3.2,0.7c0.4,0.1,0.9,0.2,1.3,0.3
	c1.5,0.3,3,0.4,4.5,0.6c0.5,0.1,1.1,0.2,1.6,0.2c2.7,0.3,5.4,0.4,8.1,0.4c16.4,0,32.5-5.1,46.2-14.8c4.4-3.1,5.5-9.2,2.4-13.7
	C145.5,147.8,139.4,146.7,135,149.9 M180.6,98.9c0-17.2-5.3-33.1-14.2-46.3c-0.1-0.2-0.2-0.5-0.4-0.7c-1.1-1.6-2.3-3.1-3.5-4.6
	c-0.1-0.2-0.3-0.4-0.4-0.6c-8.2-10.1-18.5-17.9-30.2-23c-0.3-0.1-0.6-0.3-1-0.4c-1.9-0.8-3.8-1.5-5.7-2.1c-0.7-0.2-1.4-0.5-2.1-0.7
	c-1.7-0.5-3.4-0.9-5.1-1.3c-0.9-0.2-1.9-0.5-2.8-0.7c-0.5-0.1-0.9-0.2-1.4-0.3c-1.3-0.2-2.6-0.3-3.8-0.5c-0.9-0.1-1.8-0.3-2.6-0.3
	c-2.1-0.2-4.3-0.3-6.4-0.3c-0.4,0-0.8-0.1-1.2-0.1c-0.1,0-0.1,0-0.2,0c-16.4,0-32.4,5-46.2,14.8C49,35,48,41.1,51,45.6
	c3.1,4.4,9.1,5.5,13.5,2.4c10.6-7.5,23-11.3,35.7-11.2c1.8,0,3.6,0.1,5.4,0.3c0.6,0.1,1.1,0.1,1.6,0.2c1.5,0.2,2.9,0.4,4.3,0.7
	c0.6,0.1,1.3,0.3,1.9,0.4c1.4,0.3,2.8,0.7,4.2,1.1c0.4,0.1,0.9,0.3,1.3,0.4c1.6,0.5,3.1,1.1,4.6,1.7c0.2,0.1,0.3,0.1,0.5,0.2
	c9,3.9,17,10,23.2,17.6c0,0,0.1,0.1,0.1,0.2c8.7,10.7,14,24.5,14,39.4H147c-0.4,0-0.7,0.2-0.9,0.5c-0.2,0.3-0.2,0.8,0,1.1l24,36.4
	c0.2,0.3,0.5,0.5,0.9,0.5c0.4,0,0.7-0.2,0.9-0.5l23.9-36.4c0.2-0.3,0.2-0.7,0-1.1c-0.2-0.3-0.5-0.5-0.9-0.5L180.6,98.9L180.6,98.9
	L180.6,98.9z`})),RE=n=>de.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",width:84,height:84},n),de.createElement("circle",{cx:"50",cy:"36.8101",r:"10",fill:"#3e7cff"},de.createElement("animate",{attributeName:"cy",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keySplines:"0.45 0 0.9 0.55;0 0.45 0.55 0.9",keyTimes:"0;0.5;1",values:"23;77;23"})));function OM(n){let e=0,t=0;if(n.getBoundingClientRect){const r=n.getBoundingClientRect(),s=document.documentElement;e=r.left+Math.max(s.scrollLeft,document.body.scrollLeft)-s.clientLeft,t=r.top+Math.max(s.scrollTop,document.body.scrollTop)-s.clientTop}else for(;n!==document.body;)e+=n.offsetLeft,t+=n.offsetTop,n=n.offsetParent;return{domX:e,domY:t}}function Kf(n,e){let t=e.relatedTarget;try{for(;t&&t!==n;)t=t.parentNode}catch(r){console.warn(r)}return t!==n}const RM=(n,e,t)=>{const[r,s]=de.useState([]),i=de.useCallback(()=>{s([])},[s]),o=de.useCallback(v=>{const E=v.currentTarget,A=OM(E),S=v.pageX||v.clientX,x=v.pageY||v.clientY,T=A.domX,k=A.domY,R=S-T,P=x-k,F=parseInt(R.toString()),$=parseInt(P.toString()),B=new Date,z=r.length;return s([...r,{key:B.getTime(),index:z+1,x:F,y:$}]),e.click&&e.click(F,$),v.cancelBubble=!0,v.preventDefault(),!1},[r,e]),l=de.useCallback(v=>(e.confirm&&e.confirm(r,()=>{i()}),v.cancelBubble=!0,v.preventDefault(),!1),[r,e,i]),h=de.useCallback(()=>r,[r]),d=de.useCallback(()=>{i(),t&&t()},[i,t]),p=de.useCallback(()=>{e.close&&e.close(),i()},[e,i]),g=de.useCallback(()=>{e.refresh&&e.refresh(),i()},[i]),y=de.useCallback(v=>(p(),v.cancelBubble=!0,v.preventDefault(),!1),[p]),b=de.useCallback(v=>(g(),v.cancelBubble=!0,v.preventDefault(),!1),[e,g]);return{setDots:s,getDots:h,clickEvent:o,confirmEvent:l,closeEvent:y,refreshEvent:b,resetData:i,clearData:d,close:p,refresh:g}},DM=de.forwardRef((n,e)=>{const[t,r]=de.useState({...IM(),...n.config||{}}),[s,i]=de.useState({...n.data||{}}),[o,l]=de.useState({...n.events||{}});de.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),de.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),de.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=RM(s,o,()=>{i({...s,thumb:"",image:""})}),d=t.horizontalPadding||0,p=t.verticalPadding||0,g=(t.width||0)+d*2+(t.showTheme?2:0),y=(t.width||0)>0||(t.height||0)>0,b=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return de.useImperativeHandle(e,()=>({reset:h.resetData,clear:h.clearData,refresh:h.refresh,close:h.close})),De.createElement("div",{className:ws(Ye.wrapper,t.showTheme?Ye.theme:""),style:{width:g+"px",paddingLeft:d+"px",paddingRight:d+"px",paddingTop:p+"px",paddingBottom:p+"px",display:y?"block":"none"}},De.createElement("div",{className:Ye.header},De.createElement("span",null,t.title),De.createElement("img",{className:s.thumb==""?Ye.hide:"",style:{width:t.thumbWidth+"px",height:t.thumbHeight+"px",display:b?"block":"none"},src:s.thumb,alt:""})),De.createElement("div",{className:Ye.body,style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(RE,null)),De.createElement("img",{className:ws(Ye.picture,s.image==""?Ye.hide:""),style:{width:t.width+"px",height:t.height+"px",display:b?"block":"none"},src:s.image,alt:"",onClick:h.clickEvent}),De.createElement("div",{className:lO.dots},h.getDots().map(v=>De.createElement("div",{className:"dot",style:{width:t.dotSize+"px",height:t.dotSize+"px",borderRadius:t.dotSize+"px",top:v.y-(t.dotSize||1)/2-1+"px",left:v.x-(t.dotSize||1)/2-1+"px"},key:v.key+"-"+v.index},v.index)))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:ws(Ye.iconBlock,lO.iconBlock)},De.createElement(IE,{width:t.iconSize,height:t.iconSize,onClick:h.closeEvent}),De.createElement(OE,{width:t.iconSize,height:t.iconSize,onClick:h.refreshEvent})),De.createElement("div",{className:Ye.buttonBlock},De.createElement("button",{className:ws(!b&&Ye.disabled),onClick:h.confirmEvent},t.buttonText))))});var PM=De.memo(DM),UM=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_tile__8pkQD {
  position: absolute;
  z-index: 2;
  cursor: pointer;
}
.index-module_tile__8pkQD img {
  display: block;
  cursor: pointer;
  width: 100%;
  height: 100%;
}
`,kM={tile:"index-module_tile__8pkQD"};pp(UM);const yU=n=>de.createElement("svg",Object.assign({viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",width:20,height:20},n),de.createElement("path",{d:`M131.6,116.3c0,0-75.6,0-109.7,0c-9.1,0-16.2-7.4-16.2-16.2c0-9.1,7.4-16.2,16.2-16.2c28.7,0,109.7,0,109.7,0
	s-5.4-5.4-30.4-30.7c-6.4-6.4-6.4-16.7,0-23.1s16.7-6.4,23.1,0l58.4,58.4c6.4,6.4,6.4,16.7,0,23.1c0,0-32.9,32.9-57.9,57.9
	c-6.4,6.4-16.7,6.4-23.1,0c-6.4-6.4-6.4-16.7,0-23.1C121.8,126.2,131.6,116.3,131.6,116.3z`})),uO=()=>({thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:"",thumb:""}),BM=()=>({width:300,height:220,thumbWidth:150,thumbHeight:40,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),LM=(n,e,t,r,s,i,o,l,h)=>{const[d,p]=de.useState(0),[g,y]=de.useState(n.thumbX||0),[b,v]=de.useState(!1);de.useEffect(()=>{b||y(n.thumbX||0)},[n,y]);const E=de.useCallback(()=>{p(0),y(n.thumbX||0)},[p,y,n.thumbX]),A=de.useCallback($=>{if(!Kf(l.current,$))return;const B=$.touches&&$.touches[0],z=o.current.offsetLeft,j=s.current.offsetWidth,W=o.current.offsetWidth,ne=j-W,J=i.current.offsetWidth,I=i.current.offsetLeft,_=j-J,q=(j-(J+I))/ne;let K=!1,O=null,G=0,Z=0;B?G=B.pageX-z:G=$.clientX-z;const re=Bt=>{K=!0;const mn=Bt.touches&&Bt.touches[0];let hn=0;mn?hn=mn.pageX-G:hn=Bt.clientX-G;const na=I+hn*q;if(hn>=ne){p(ne),Z=_,y(Z);return}if(hn<=0){p(0),Z=I,y(Z);return}p(hn),Z=Z=na,y(Z),e.move&&e.move(Z,n.thumbY||0),Bt.cancelBubble=!0,Bt.preventDefault()},ee=Bt=>{Kf(l.current,Bt)&&(Wt(),K&&(K=!1,!(Z<0)&&(e.confirm&&e.confirm({x:parseInt(Z.toString()),y:n.thumbY||0},()=>{E()}),Bt.cancelBubble=!0,Bt.preventDefault())))},ue=Bt=>{O=Bt},ge=()=>{O=null},Ce=Bt=>{O&&(ee(O),Wt())},Pe=t.scope,Te=Pe?r.current:l.current,Qe=Pe?r.current:document.body,Wt=()=>{Qe.removeEventListener("mousemove",re,!1),Qe.removeEventListener("touchmove",re,{passive:!1}),Te.removeEventListener("mouseup",ee,!1),Te.removeEventListener("mouseenter",ge,!1),Te.removeEventListener("mouseleave",ue,!1),Te.removeEventListener("touchend",ee,!1),Qe.removeEventListener("mouseleave",ee,!1),Qe.removeEventListener("mouseup",Ce,!1),v(!1)};v(!0),Qe.addEventListener("mousemove",re,!1),Qe.addEventListener("touchmove",re,{passive:!1}),Te.addEventListener("mouseup",ee,!1),Te.addEventListener("mouseenter",ge,!1),Te.addEventListener("mouseleave",ue,!1),Te.addEventListener("touchend",ee,!1),Qe.addEventListener("mouseleave",ee,!1),Qe.addEventListener("mouseup",Ce,!1)},[r,o,s,t,n,i,l,e,E]),S=de.useCallback(()=>{E(),h&&h()},[E,h]),x=de.useCallback(()=>{e.close&&e.close(),E()},[e,E]),T=de.useCallback(()=>{e.refresh&&e.refresh(),E()},[e,E]),k=de.useCallback($=>(x(),$.cancelBubble=!0,$.preventDefault(),!1),[x]),R=de.useCallback($=>(T(),$.cancelBubble=!0,$.preventDefault(),!1),[T]),P=de.useCallback(()=>({x:g,y:n.thumbY||0}),[n,g]);return{getState:de.useCallback(()=>({dragLeft:d,thumbLeft:g}),[g,d]),getPoint:P,dragEvent:A,closeEvent:k,refreshEvent:R,resetData:E,clearData:S,close:x,refresh:T}},MM=de.forwardRef((n,e)=>{const[t,r]=de.useState({...BM(),...n.config||{}}),[s,i]=de.useState({...uO(),...n.data||{}}),[o,l]=de.useState({...n.events||{}});de.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),de.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),de.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=de.useRef(null),d=de.useRef(null),p=de.useRef(null),g=de.useRef(null),y=de.useRef(null),b=LM(s,o,t,h,p,y,g,d,()=>{i({...s,...uO()})}),v=t.horizontalPadding||0,E=t.verticalPadding||0,A=(t.width||0)+v*2+(t.showTheme?2:0),S=(t.width||0)>0||(t.height||0)>0,x=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return de.useImperativeHandle(e,()=>({reset:b.resetData,clear:b.clearData,refresh:b.refresh,close:b.close})),de.useEffect(()=>{const T=k=>k.preventDefault();return g.current&&g.current.addEventListener("dragstart",T),()=>{g.current&&g.current.removeEventListener("dragstart",T)}},[g]),De.createElement("div",{className:ws(Ye.wrapper,t.showTheme?Ye.theme:""),style:{width:A+"px",paddingLeft:v+"px",paddingRight:v+"px",paddingTop:E+"px",paddingBottom:E+"px",display:S?"block":"none"},ref:h},De.createElement("div",{className:Ye.header},De.createElement("span",null,t.title),De.createElement("div",{className:Ye.iconBlock},De.createElement(IE,{width:t.iconSize,height:t.iconSize,onClick:b.closeEvent}),De.createElement(OE,{width:t.iconSize,height:t.iconSize,onClick:b.refreshEvent}))),De.createElement("div",{className:Ye.body,ref:p,style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(RE,null)),De.createElement("img",{className:ws(Ye.picture,s.image==""?Ye.hide:""),style:{width:t.width+"px",height:t.height+"px",display:x?"block":"none"},src:s.image,alt:""}),De.createElement("div",{className:kM.tile,ref:y,style:{width:(s.thumbWidth||0)+"px",height:(s.thumbHeight||0)+"px",top:(s.thumbY||0)+"px",left:b.getState().thumbLeft+"px"}},De.createElement("img",{className:s.thumb==""?Ye.hide:"",style:{display:x?"block":"none"},src:s.thumb,alt:""}))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Ye.dragSlideBar,ref:d},De.createElement("div",{className:Ye.dragLine}),De.createElement("div",{className:ws(Ye.dragBlock,!x&&Ye.disabled),ref:g,onMouseDown:b.dragEvent,style:{left:b.getState().dragLeft+"px"}},De.createElement("div",{className:Ye.dragBlockInline,onTouchStart:b.dragEvent},De.createElement(yU,null))))))});var $M=De.memo(MM),FM=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_header__jVeEs {
  text-align: center;
}
.index-module_tile__VR9Ut {
  position: absolute;
  z-index: 2;
  cursor: pointer;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.index-module_tile__VR9Ut img {
  display: block;
  cursor: pointer;
  width: 100%;
  height: 100%;
}
`,kA={header:"index-module_header__jVeEs",tile:"index-module_tile__VR9Ut"};pp(FM);const HM=()=>({width:300,height:220,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),zM=(n,e,t,r,s,i,o)=>{const[l,h]=de.useState({x:n.thumbX||0,y:n.thumbY||0}),[d,p]=de.useState(!1);de.useEffect(()=>{d||h({x:n.thumbX||0,y:n.thumbY||0})},[n,h]);const g=de.useCallback(()=>{h({x:n.thumbX||0,y:n.thumbY||0})},[n.thumbX,n.thumbY,h]),y=de.useCallback(x=>{if(!Kf(s.current,x))return;const T=x.touches&&x.touches[0],k=i.current.offsetLeft,R=i.current.offsetTop,P=s.current.offsetWidth,F=s.current.offsetHeight,$=i.current.offsetWidth,B=i.current.offsetHeight,z=P-$,j=F-B;let W=!1,ne=null,J=0,I=0,_=0,L=0;T?(J=T.pageX-k,I=T.pageY-R):(J=x.clientX-k,I=x.clientY-R);const q=Ce=>{W=!0;const Pe=Ce.touches&&Ce.touches[0];let Te=0,Qe=0;Pe?(Te=Pe.pageX-J,Qe=Pe.pageY-I):(Te=Ce.clientX-J,Qe=Ce.clientY-I),Te<=0&&(Te=0),Qe<=0&&(Qe=0),Te>=z&&(Te=z),Qe>=j&&(Qe=j),h({x:Te,y:Qe}),_=Te,L=Qe,e.move&&e.move(Te,Qe),Ce.cancelBubble=!0,Ce.preventDefault()},K=Ce=>{Kf(s.current,Ce)&&(ge(),W&&(W=!1,!(_<0||L<0)&&(e.confirm&&e.confirm({x:_,y:L},()=>{g()}),Ce.cancelBubble=!0,Ce.preventDefault())))},O=Ce=>{ne=Ce},G=()=>{ne=null},Z=Ce=>{ne&&(K(ne),ge())},re=t.scope,ee=re?r.current:s.current,ue=re?r.current:document.body,ge=()=>{ue.removeEventListener("mousemove",q,!1),ue.removeEventListener("touchmove",q,{passive:!1}),ee.removeEventListener("mouseup",K,!1),ee.removeEventListener("mouseenter",G,!1),ee.removeEventListener("mouseleave",O,!1),ee.removeEventListener("touchend",K,!1),ue.removeEventListener("mouseleave",K,!1),ue.removeEventListener("mouseup",Z,!1),p(!1)};p(!0),ue.addEventListener("mousemove",q,!1),ue.addEventListener("touchmove",q,{passive:!1}),ee.addEventListener("mouseup",K,!1),ee.addEventListener("mouseenter",G,!1),ee.addEventListener("mouseleave",O,!1),ee.addEventListener("touchend",K,!1),ue.addEventListener("mouseleave",K,!1),ue.addEventListener("mouseup",Z,!1)},[r,s,i,t,e,p,g]),b=de.useCallback(()=>{g(),o&&o()},[g,o]),v=de.useCallback(()=>{e.close&&e.close(),g()},[e,g]),E=de.useCallback(()=>{e.refresh&&e.refresh(),g()},[e,g]),A=de.useCallback(x=>(v(),x.cancelBubble=!0,x.preventDefault(),!1),[v]),S=de.useCallback(x=>(E(),x.cancelBubble=!0,x.preventDefault(),!1),[E]);return{thumbPoint:l,dragEvent:y,closeEvent:A,refreshEvent:S,resetData:g,clearData:b,close:v,refresh:E}},hO=()=>({thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:"",thumb:""}),jM=de.forwardRef((n,e)=>{const[t,r]=de.useState({...HM(),...n.config||{}}),[s,i]=de.useState({...hO(),...n.data||{}}),[o,l]=de.useState({...n.events||{}});de.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),de.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),de.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=de.useRef(null),d=de.useRef(null),p=de.useRef(null),g=zM(s,o,t,h,d,p,()=>{i({...s,...hO()})}),y=t.horizontalPadding||0,b=t.verticalPadding||0,v=(t.width||0)+y*2+(t.showTheme?2:0),E=(t.width||0)>0||(t.height||0)>0,A=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return de.useImperativeHandle(e,()=>({reset:g.resetData,clear:g.clearData,refresh:g.refresh,close:g.close})),de.useEffect(()=>{const S=x=>x.preventDefault();return p.current&&p.current.addEventListener("dragstart",S),()=>{p.current&&p.current.removeEventListener("dragstart",S)}},[p]),De.createElement("div",{className:ws(Ye.wrapper,kA.wrapper,t.showTheme?Ye.theme:""),style:{width:v+"px",paddingLeft:y+"px",paddingRight:y+"px",paddingTop:b+"px",paddingBottom:b+"px",display:E?"block":"none"},ref:h},De.createElement("div",{className:ws(Ye.header,kA.header)},De.createElement("span",null,t.title)),De.createElement("div",{className:Ye.body,ref:d,style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(RE,null)),De.createElement("img",{className:ws(Ye.picture,s.image==""?Ye.hide:""),src:s.image,style:{width:t.width+"px",height:t.height+"px",display:A?"block":"none"},alt:""}),De.createElement("div",{className:kA.tile,ref:p,style:{width:(s.thumbWidth||0)+"px",height:(s.thumbHeight||0)+"px",top:g.thumbPoint.y+"px",left:g.thumbPoint.x+"px"},onMouseDown:g.dragEvent,onTouchStart:g.dragEvent},De.createElement("img",{className:s.thumb==""?Ye.hide:"",style:{display:A?"block":"none"},src:s.thumb,alt:""}))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Ye.iconBlock},De.createElement(IE,{width:t.iconSize,height:t.iconSize,onClick:g.closeEvent}),De.createElement(OE,{width:t.iconSize,height:t.iconSize,onClick:g.refreshEvent}))))});var qM=De.memo(jM),VM=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_body__5eTaZ {
  background: transparent !important;
  display: flex;
  display: -webkit-flex;
  justify-content: center;
  align-items: center;
  margin: 10px auto 0;
}
.index-module_bodyInner__Lb3mp {
  border-radius: 100%;
}
.index-module_picture__M-qbX {
  position: relative;
  max-width: 100%;
  max-height: 100%;
  z-index: 2;
  border-radius: 100%;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}
.index-module_picture__M-qbX img {
  max-width: 100%;
  max-height: 100%;
}
.index-module_round__zaOPS {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 100%;
  z-index: 2;
  border: 6px solid #e0e0e0;
  border-color: var(--go-captcha-theme-round-color);
}
.index-module_thumb__jChIh {
  position: absolute;
  z-index: 2;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}
.index-module_thumb__jChIh img {
  max-width: 100%;
  max-height: 100%;
}
.index-module_thumbBlock__u3U1X {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
`,jl={body:"index-module_body__5eTaZ",bodyInner:"index-module_bodyInner__Lb3mp",picture:"index-module_picture__M-qbX",round:"index-module_round__zaOPS",thumb:"index-module_thumb__jChIh",thumbBlock:"index-module_thumbBlock__u3U1X"};pp(VM);const dO=()=>({width:300,height:220,size:220,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),GM=(n,e,t,r,s,i,o)=>{const[l,h]=de.useState(0),[d,p]=de.useState(n.angle||0),[g,y]=de.useState(!1);de.useEffect(()=>{g||p(n.angle||0)},[n,p]);const b=de.useCallback(()=>{h(0),p(n.angle||0)},[n.angle,h,p]),v=de.useCallback(R=>{if(!Kf(i.current,R))return;const P=R.touches&&R.touches[0],F=s.current.offsetLeft,$=i.current.offsetWidth,B=s.current.offsetWidth,z=$-B,j=360,W=(j-n.angle)/z;let ne=0,J=!1,I=null,_=0,L=0;P?_=P.pageX-F:_=R.clientX-F;const q=Ce=>{J=!0;const Pe=Ce.touches&&Ce.touches[0];let Te=0;if(Pe?Te=Pe.pageX-_:Te=Ce.clientX-_,ne=n.angle+Te*W,Te>=z){h(z),L=j,p(L);return}if(Te<=0){h(0),L=n.angle,p(L);return}h(Te),L=ne,p(ne),e.rotate&&e.rotate(ne),Ce.cancelBubble=!0,Ce.preventDefault()},K=Ce=>{Kf(i.current,Ce)&&(ge(),J&&(J=!1,!(L<0)&&(e.confirm&&e.confirm(parseInt(L.toString()),()=>{b()}),Ce.cancelBubble=!0,Ce.preventDefault())))},O=Ce=>{I=Ce},G=()=>{I=null},Z=Ce=>{I&&(K(I),ge())},re=t.scope,ee=re?r.current:i.current,ue=re?r.current:document.body,ge=()=>{ue.removeEventListener("mousemove",q,!1),ue.removeEventListener("touchmove",q,{passive:!1}),ee.removeEventListener("mouseup",K,!1),ee.removeEventListener("mouseenter",G,!1),ee.removeEventListener("mouseleave",O,!1),ee.removeEventListener("touchend",K,!1),ue.removeEventListener("mouseleave",K,!1),ue.removeEventListener("mouseup",Z,!1),y(!1)};y(!0),ue.addEventListener("mousemove",q,!1),ue.addEventListener("touchmove",q,{passive:!1}),ee.addEventListener("mouseup",K,!1),ee.addEventListener("mouseenter",G,!1),ee.addEventListener("mouseleave",O,!1),ee.addEventListener("touchend",K,!1),ue.addEventListener("mouseleave",K,!1),ue.addEventListener("mouseup",Z,!1)},[r,s,i,t,n,e,b]),E=de.useCallback(()=>{b(),o&&o()},[b,o]),A=de.useCallback(()=>{e.close&&e.close(),b()},[e,b]),S=de.useCallback(()=>{e.refresh&&e.refresh(),b()},[e,b]),x=de.useCallback(R=>(A(),R.cancelBubble=!0,R.preventDefault(),!1),[A]),T=de.useCallback(R=>(S(),R.cancelBubble=!0,R.preventDefault(),!1),[S]);return{getState:de.useCallback(()=>({dragLeft:l,thumbAngle:d}),[d,l]),thumbAngle:d,dragEvent:v,closeEvent:x,refreshEvent:T,resetData:b,clearData:E,close:A,refresh:S}},fO=()=>({angle:0,image:"",thumb:"",thumbSize:0}),KM=de.forwardRef((n,e)=>{const[t,r]=de.useState({...dO(),...n.config||{}}),[s,i]=de.useState({...fO(),...n.data||{}}),[o,l]=de.useState({...n.events||{}});de.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),de.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),de.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=de.useRef(null),d=de.useRef(null),p=de.useRef(null),g=GM(s,o,t,h,p,d,()=>{i({...s,...fO()})}),y=t.horizontalPadding||0,b=t.verticalPadding||0,v=(t.width||0)+y*2+(t.showTheme?2:0),E=(t.size||0)>0?t.size:dO().size,A=(t.width||0)>0||(t.height||0)>0,S=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return de.useImperativeHandle(e,()=>({reset:g.resetData,clear:g.clearData,refresh:g.refresh,close:g.close})),de.useEffect(()=>{const x=T=>T.preventDefault();return p.current&&p.current.addEventListener("dragstart",x),()=>{p.current&&p.current.removeEventListener("dragstart",x)}},[p]),De.createElement("div",{className:ws(Ye.wrapper,jl.wrapper,t.showTheme?Ye.theme:""),style:{width:v+"px",paddingLeft:y+"px",paddingRight:y+"px",paddingTop:b+"px",paddingBottom:b+"px",display:A?"block":"none"},ref:h},De.createElement("div",{className:Ye.header},De.createElement("span",null,t.title),De.createElement("div",{className:Ye.iconBlock},De.createElement(IE,{width:t.iconSize,height:t.iconSize,onClick:g.closeEvent}),De.createElement(OE,{width:t.iconSize,height:t.iconSize,onClick:g.refreshEvent}))),De.createElement("div",{className:ws(Ye.body,jl.body),style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:ws(jl.bodyInner,Ye.bodyInner),style:{width:E+"px",height:E+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(RE,null)),De.createElement("div",{className:jl.picture,style:{width:t.size+"px",height:t.size+"px"}},De.createElement("img",{className:s.image==""?Ye.hide:"",src:s.image,style:{display:S?"block":"none"},alt:""}),De.createElement("div",{className:jl.round})),De.createElement("div",{className:jl.thumb},De.createElement("div",{className:jl.thumbBlock,style:{transform:"rotate("+g.getState().thumbAngle+"deg)",...s.thumbSize>0?{width:s.thumbSize+"px",height:s.thumbSize+"px"}:{}}},De.createElement("img",{className:s.thumb==""?Ye.hide:"",src:s.thumb,style:{visibility:S?"visible":"hidden"},alt:""}))))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Ye.dragSlideBar,ref:d},De.createElement("div",{className:Ye.dragLine}),De.createElement("div",{className:ws(Ye.dragBlock,!S&&Ye.disabled),ref:p,onMouseDown:g.dragEvent,style:{left:g.getState().dragLeft+"px"}},De.createElement("div",{className:Ye.dragBlockInline,onTouchStart:g.dragEvent},De.createElement(yU,null))))))});var WM=De.memo(KM),YM=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_btnBlock__L96Vx {
  position: relative;
  box-sizing: border-box;
  display: block;
  font-size: 13px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  letter-spacing: 1px;
  border-radius: 5px;
  line-height: 1;
  white-space: nowrap;
  -webkit-appearance: none;
  outline: none;
  margin: 0;
  transition: 0.1s;
  font-weight: 500;
  -moz-user-select: none;
  -webkit-user-select: none;
  display: flex;
  align-items: center;
  justify-content: center;
  justify-items: center;
  box-shadow: 0 0 20px rgba(62, 124, 255, 0.1);
  -webkit-box-shadow: 0 0 20px rgba(62, 124, 255, 0.1);
  -moz-box-shadow: 0 0 20px rgba(62, 124, 255, 0.1);
}
.index-module_btnBlock__L96Vx span {
  padding-left: 8px;
}
.index-module_disabled__U5sNo {
  pointer-events: none;
}
.index-module_default__r2sQq {
  color: var(--go-captcha-theme-default-color);
  border: 1px solid #50a1ff;
  border-color: var(--go-captcha-theme-default-border-color);
  background-color: var(--go-captcha-theme-default-bg-color);
  cursor: pointer;
}
.index-module_default__r2sQq:hover {
  background-color: var(--go-captcha-theme-default-hover-color) !important;
}
.index-module_error__mCm6a {
  cursor: pointer;
  color: var(--go-captcha-theme-error-color);
  background-color: var(--go-captcha-theme-error-bg-color);
  border: 1px solid #ff5a34;
  border-color: var(--go-captcha-theme-error-border-color);
}
.index-module_warn__CT1sW {
  cursor: pointer;
  color: var(--go-captcha-theme-warn-color);
  background-color: var(--go-captcha-theme-warn-bg-color);
  border: 1px solid #ffbe09;
  border-color: var(--go-captcha-theme-warn-border-color);
}
.index-module_success__61kOU {
  color: var(--go-captcha-theme-success-color);
  background-color: var(--go-captcha-theme-success-bg-color);
  border: 1px solid #8bc640;
  border-color: var(--go-captcha-theme-success-border-color);
  pointer-events: none;
}
.index-module_ripple__KF4IK {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  justify-items: center;
}
.index-module_ripple__KF4IK svg {
  position: relative;
  z-index: 2;
}
.index-module_ripple__KF4IK > * {
  z-index: 2;
}
.index-module_ripple__KF4IK::after {
  background-color: var(--go-captcha-theme-default-border-color);
  border-radius: 50px;
  content: "";
  display: block;
  width: 21px;
  height: 21px;
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -11px;
  margin-left: -11px;
  z-index: 1;
  animation: index-module_ripple__KF4IK 1.3s infinite;
  -moz-animation: index-module_ripple__KF4IK 1.3s infinite;
  -webkit-animation: index-module_ripple__KF4IK 1.3s infinite;
  animation-delay: 2s;
  -moz-animation-delay: 2s;
  -webkit-animation-delay: 2s;
}
@keyframes index-module_ripple__KF4IK {
  0% {
    opacity: 0;
  }
  5% {
    opacity: 0.05;
  }
  20% {
    opacity: 0.35;
  }
  65% {
    opacity: 0.01;
  }
  100% {
    transform: scaleX(2) scaleY(2);
    opacity: 0;
  }
}
`;pp(YM);var F0={Click:PM,Slide:$M,SlideRegion:qM,Rotate:WM};function QM({captcha:n,onRefresh:e,onConfirm:t}){if(!n)return we.jsx(i_,{});const s=[pO,pO,ZM,XM,JM][n.kind];return s?we.jsx(s,{captcha:n,onRefresh:e,onConfirm:t}):we.jsx(i_,{})}function pO({captcha:n,onRefresh:e,onConfirm:t}){return we.jsx(F0.Click,{config:{title:"Click in order",buttonText:"submit",width:n.images[0].size.x,height:n.images[0].size.y,thumbWidth:n.images[1].size.x,thumbHeight:n.images[1].size.y},data:{image:n.images[0].base64,thumb:n.images[1].base64},events:{refresh:e,confirm:async(r,s)=>{t(r.map(i=>`${i.x},${i.y}`).join(","),s)}}})}function ZM({captcha:n,onRefresh:e,onConfirm:t}){return we.jsx(F0.Slide,{config:{title:"Drag the slider to complete the puzzle",width:n.images[0].size.x,height:n.images[0].size.y,scope:!0},data:{image:n.images[0].base64,thumb:n.images[1].base64,thumbX:n.vectors[0].x,thumbY:n.vectors[0].y,thumbWidth:n.images[1].size.x,thumbHeight:n.images[1].size.y},events:{refresh:e,confirm:async(r,s)=>{t(`${r.x},${r.y}`,s)}}})}function XM({captcha:n,onRefresh:e,onConfirm:t}){return we.jsx(F0.SlideRegion,{config:{title:"Drag the tile to complete the puzzle",width:n.images[0].size.x,height:n.images[0].size.y,scope:!0},data:{image:n.images[0].base64,thumb:n.images[1].base64,thumbX:n.vectors[0].x,thumbY:n.vectors[0].y,thumbWidth:n.images[1].size.x,thumbHeight:n.images[1].size.y},events:{refresh:e,confirm:async(r,s)=>{t(`${r.x},${r.y}`,s)}}})}function JM({captcha:n,onRefresh:e,onConfirm:t}){return we.jsx(F0.Rotate,{config:{title:"Drag the slider to complete the puzzle",width:n.images[0].size.x,height:n.images[0].size.y,size:n.images[0].size.y,scope:!0},data:{image:n.images[0].base64,thumb:n.images[1].base64,thumbSize:n.images[1].size.x,angle:0},events:{refresh:e,confirm:async(r,s)=>{t(`${r}`,s)}}})}function i_(){return we.jsx(F0.SlideRegion,{config:{title:"Loading...",width:300,height:300},data:{thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:null,thumb:null}})}function e9({address:n,chainId:e,onSuccess:t}){const r=de.useRef(!1),[s,i]=de.useState(!0),[o,l]=de.useState(null),[h,d]=de.useState([]);if(de.useEffect(()=>{r.current||(r.current=!0,oO(n,e).then(y=>{l(y),i(!1)}))},[n,e]),s||!o)return we.jsxs(we.Fragment,{children:[we.jsxs("div",{className:"counter text-small",children:[h.length+1," / ",(o==null?void 0:o.captchas.length)??5]}),we.jsx(i_,{})]});const p=async()=>{l(null),d([]),await vM(o),l(await oO(n,e))},g=async(y,b)=>{b(),i(!0);try{if(h.length==o.captchas.length-1){const E=await CM(o.id,[...h,y],new Uint8Array);if(!E)return p();t(E);return}if(!await AM(o.id,h.length,y))return p();d([...h,y])}finally{i(!1)}};return we.jsxs(we.Fragment,{children:[we.jsxs("div",{className:"counter text-small",children:[h.length+1," / ",o.captchas.length]}),we.jsx(QM,{captcha:o.captchas[h.length],onRefresh:p,onConfirm:g})]})}const t9="6.15.0";function n9(n,e,t){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=n,s}async function Hr(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Xe(n,e,t){for(let r in e){let s=e[r];const i=t?t[r]:null;i&&n9(s,i,r),Object.defineProperty(n,r,{enumerable:!0,value:s,writable:!1})}}function Fd(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>Fd(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let s=0;s<n.length;s++)r+=t[n[s]>>4],r+=t[n[s]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return Fd(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${Fd(r,e)}: ${Fd(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function gr(n,e){return n&&n.code===e}function K2(n){return gr(n,"CALL_EXCEPTION")}function pn(n,e,t){let r=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Fd(t)}`);for(const o in t){if(o==="shortMessage")continue;const l=t[o];i.push(o+"="+Fd(l))}}i.push(`code=${e}`),i.push(`version=${t9}`),i.length&&(n+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return Xe(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&Xe(s,{shortMessage:r}),s}function me(n,e,t,r){if(!n)throw pn(e,t,r)}function Q(n,e,t,r){me(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function wU(n,e,t){t==null&&(t=""),t&&(t=": "+t),me(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),me(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(e)}catch{}return n},[]);function H0(n,e,t){if(t==null&&(t=""),n!==e){let r=t,s="new";t&&(r+=".",s+=" "+t),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function bU(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(n.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",n)}function pt(n,e){return bU(n,e,!1)}function jr(n,e){return bU(n,e,!0)}function sn(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function W2(n){return sn(n,!0)||n instanceof Uint8Array}const gO="0123456789abcdef";function Oe(n){const e=pt(n);let t="0x";for(let r=0;r<e.length;r++){const s=e[r];t+=gO[(s&240)>>4]+gO[s&15]}return t}function _n(n){return"0x"+n.map(e=>Oe(e).substring(2)).join("")}function Wd(n){return sn(n,!0)?(n.length-2)/2:pt(n).length}function Cn(n,e,t){const r=pt(n);return t!=null&&t>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Oe(r.slice(e??0,t??r.length))}function EU(n,e,t){const r=pt(n);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),t?s.set(r,e-r.length):s.set(r,0),Oe(s)}function Ho(n,e){return EU(n,e,!0)}function r9(n,e){return EU(n,e,!1)}const DE=BigInt(0),Vi=BigInt(1),Hd=9007199254740991;function Rb(n,e){const t=PE(n,"value"),r=BigInt(lt(e,"width"));if(me(t>>r===DE,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Vi){const s=(Vi<<r)-Vi;return-((~t&s)+Vi)}return t}function vU(n,e){let t=He(n,"value");const r=BigInt(lt(e,"width")),s=Vi<<r-Vi;if(t<DE){t=-t,me(t<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(Vi<<r)-Vi;return(~t&i)+Vi}else me(t<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function du(n,e){const t=PE(n,"value"),r=BigInt(lt(e,"bits"));return t&(Vi<<r)-Vi}function He(n,e){switch(typeof n){case"bigint":return n;case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-Hd&&n<=Hd,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){Q(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}Q(!1,"invalid BigNumberish value",e||"value",n)}function PE(n,e){const t=He(n,e);return me(t>=DE,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const mO="0123456789abcdef";function UE(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=mO[t>>4],e+=mO[t&15];return BigInt(e)}return He(n)}function lt(n,e){switch(typeof n){case"bigint":return Q(n>=-Hd&&n<=Hd,"overflow",e||"value",n),Number(n);case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-Hd&&n<=Hd,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return lt(BigInt(n),e)}catch(t){Q(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}Q(!1,"invalid numeric value",e||"value",n)}function s9(n){return lt(UE(n))}function gl(n,e){let r=PE(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=lt(e,"width");for(me(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<s*2;)r="0"+r}return"0x"+r}function zn(n){const e=PE(n,"value");if(e===DE)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(t.substring(i,i+2),16)}return r}function ji(n){let e=Oe(W2(n)?n:zn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const yO="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const wO=BigInt(58);function i9(n){const e=pt(n);let t=UE(e),r="";for(;t;)r=yO[Number(t%wO)]+r,t/=wO;for(let s=0;s<e.length&&!e[s];s++)r=yO[0]+r;return r}function a9(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return pt(e)}function o9(n){const e=pt(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var af;class AU{constructor(e,t,r){ie(this,"filter");ie(this,"emitter");le(this,af);H(this,af,t),Xe(this,{emitter:e,filter:r})}async removeListener(){N(this,af)!=null&&await this.emitter.off(this.filter,N(this,af))}}af=new WeakMap;function c9(n,e,t,r,s){Q(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function CU(n,e,t,r,s){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function l9(n,e,t,r,s){return n==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),CU(n,e,t))}const u9=Object.freeze({error:c9,ignore:CU,replace:l9});function h9(n,e){e==null&&(e=u9.error);const t=pt(n,"bytes"),r=[];let s=0;for(;s<t.length;){const i=t[s++];if(i>>7===0){r.push(i);continue}let o=null,l=null;if((i&224)===192)o=1,l=127;else if((i&240)===224)o=2,l=2047;else if((i&248)===240)o=3,l=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,t,r):s+=e("BAD_PREFIX",s-1,t,r);continue}if(s-1+o>=t.length){s+=e("OVERRUN",s-1,t,r);continue}let h=i&(1<<8-o-1)-1;for(let d=0;d<o;d++){let p=t[s];if((p&192)!=128){s+=e("MISSING_CONTINUE",s,t,r),h=null;break}h=h<<6|p&63,s++}if(h!==null){if(h>1114111){s+=e("OUT_OF_RANGE",s-1-o,t,r,h);continue}if(h>=55296&&h<=57343){s+=e("UTF16_SURROGATE",s-1-o,t,r,h);continue}if(h<=l){s+=e("OVERLONG",s-1-o,t,r,h);continue}r.push(h)}}return r}function Ba(n,e){Q(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){r++;const i=n.charCodeAt(r);Q(r<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((s&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function d9(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Db(n,e){return d9(h9(n,e))}function _U(n){async function e(t,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=t.url.split(":")[0].toLowerCase();me(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),me(s==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,l=setTimeout(()=>{i=pn("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{i=pn("request cancelled","CANCELLED"),o.abort()});const h=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let d;try{d=await fetch(t.url,h)}catch(b){throw clearTimeout(l),i||b}clearTimeout(l);const p={};d.headers.forEach((b,v)=>{p[v.toLowerCase()]=b});const g=await d.arrayBuffer(),y=g==null?null:new Uint8Array(g);return{statusCode:d.status,statusMessage:d.statusText,headers:p,body:y}}return e}const f9=12,p9=250;let bO=_U();const g9=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),m9=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let BA=!1;async function SU(n,e){try{const t=n.match(g9);if(!t)throw new Error("invalid data");return new ll(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?a9(t[3]):w9(t[3]))}catch{return new ll(599,"BAD REQUEST (invalid data: URI)",{},null,new zo(n))}}function NU(n){async function e(t,r){try{const s=t.match(m9);if(!s)throw new Error("invalid link");return new zo(`${n}${s[2]}`)}catch{return new ll(599,"BAD REQUEST (invalid IPFS URI)",{},null,new zo(t))}}return e}const Nw={data:SU,ipfs:NU("https://gateway.ipfs.io/ipfs/")},TU=new WeakMap;var _u,qc;class y9{constructor(e){le(this,_u);le(this,qc);H(this,_u,[]),H(this,qc,!1),TU.set(e,()=>{if(!N(this,qc)){H(this,qc,!0);for(const t of N(this,_u))setTimeout(()=>{t()},0);H(this,_u,[])}})}addListener(e){me(!N(this,qc),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),N(this,_u).push(e)}get cancelled(){return N(this,qc)}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}_u=new WeakMap,qc=new WeakMap;function Tw(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var of,cf,Li,Ao,lf,uf,Zn,Bs,Co,Su,Nu,Tu,ba,Mi,Vc,xu,Zg;const vE=class vE{constructor(e){le(this,xu);le(this,of);le(this,cf);le(this,Li);le(this,Ao);le(this,lf);le(this,uf);le(this,Zn);le(this,Bs);le(this,Co);le(this,Su);le(this,Nu);le(this,Tu);le(this,ba);le(this,Mi);le(this,Vc);H(this,uf,String(e)),H(this,of,!1),H(this,cf,!0),H(this,Li,{}),H(this,Ao,""),H(this,lf,3e5),H(this,Mi,{slotInterval:p9,maxAttempts:f9}),H(this,Vc,null)}get url(){return N(this,uf)}set url(e){H(this,uf,String(e))}get body(){return N(this,Zn)==null?null:new Uint8Array(N(this,Zn))}set body(e){if(e==null)H(this,Zn,void 0),H(this,Bs,void 0);else if(typeof e=="string")H(this,Zn,Ba(e)),H(this,Bs,"text/plain");else if(e instanceof Uint8Array)H(this,Zn,e),H(this,Bs,"application/octet-stream");else if(typeof e=="object")H(this,Zn,Ba(JSON.stringify(e))),H(this,Bs,"application/json");else throw new Error("invalid body")}hasBody(){return N(this,Zn)!=null}get method(){return N(this,Ao)?N(this,Ao):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),H(this,Ao,String(e).toUpperCase())}get headers(){const e=Object.assign({},N(this,Li));return N(this,Co)&&(e.authorization=`Basic ${o9(Ba(N(this,Co)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&N(this,Bs)&&(e["content-type"]=N(this,Bs)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){N(this,Li)[String(e).toLowerCase()]=String(t)}clearHeaders(){H(this,Li,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return N(this,Co)||null}setCredentials(e,t){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),H(this,Co,`${e}:${t}`)}get allowGzip(){return N(this,cf)}set allowGzip(e){H(this,cf,!!e)}get allowInsecureAuthentication(){return!!N(this,of)}set allowInsecureAuthentication(e){H(this,of,!!e)}get timeout(){return N(this,lf)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),H(this,lf,e)}get preflightFunc(){return N(this,Su)||null}set preflightFunc(e){H(this,Su,e)}get processFunc(){return N(this,Nu)||null}set processFunc(e){H(this,Nu,e)}get retryFunc(){return N(this,Tu)||null}set retryFunc(e){H(this,Tu,e)}get getUrlFunc(){return N(this,Vc)||bO}set getUrlFunc(e){H(this,Vc,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${N(this,Zn)?Oe(N(this,Zn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(N(this,Mi).slotInterval=e.slotInterval),e.maxAttempts!=null&&(N(this,Mi).maxAttempts=e.maxAttempts)}send(){return me(N(this,ba)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),H(this,ba,new y9(this)),be(this,xu,Zg).call(this,0,EO()+this.timeout,0,this,new ll(0,"",{},null,this))}cancel(){me(N(this,ba)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=TU.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new vE(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,H(s,Li,Object.assign({},N(this,Li))),N(this,Zn)&&H(s,Zn,new Uint8Array(N(this,Zn))),H(s,Bs,N(this,Bs)),s}clone(){const e=new vE(this.url);return H(e,Ao,N(this,Ao)),N(this,Zn)&&H(e,Zn,N(this,Zn)),H(e,Bs,N(this,Bs)),H(e,Li,Object.assign({},N(this,Li))),H(e,Co,N(this,Co)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),H(e,Su,N(this,Su)),H(e,Nu,N(this,Nu)),H(e,Tu,N(this,Tu)),H(e,Mi,Object.assign({},N(this,Mi))),H(e,Vc,N(this,Vc)),e}static lockConfig(){BA=!0}static getGateway(e){return Nw[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(BA)throw new Error("gateways locked");Nw[e]=t}static registerGetUrl(e){if(BA)throw new Error("gateways locked");bO=e}static createGetUrlFunc(e){return _U(e)}static createDataGateway(){return SU}static createIpfsGatewayFunc(e){return NU(e)}};of=new WeakMap,cf=new WeakMap,Li=new WeakMap,Ao=new WeakMap,lf=new WeakMap,uf=new WeakMap,Zn=new WeakMap,Bs=new WeakMap,Co=new WeakMap,Su=new WeakMap,Nu=new WeakMap,Tu=new WeakMap,ba=new WeakMap,Mi=new WeakMap,Vc=new WeakMap,xu=new WeakSet,Zg=async function(e,t,r,s,i){var p,g,y;if(e>=N(this,Mi).maxAttempts)return i.makeServerError("exceeded maximum retry limit");me(EO()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await b9(r);let o=this.clone();const l=(o.url.split(":")[0]||"").toLowerCase();if(l in Nw){const b=await Nw[l](o.url,Tw(N(s,ba)));if(b instanceof ll){let v=b;if(this.processFunc){Tw(N(s,ba));try{v=await this.processFunc(o,v)}catch(E){(E.throttle==null||typeof E.stall!="number")&&v.makeServerError("error in post-processing function",E).assertOk()}}return v}o=b}this.preflightFunc&&(o=await this.preflightFunc(o));const h=await this.getUrlFunc(o,Tw(N(s,ba)));let d=new ll(h.statusCode,h.statusMessage,h.headers,h.body,s);if(d.statusCode===301||d.statusCode===302){try{const b=d.headers.location||"";return be(p=o.redirect(b),xu,Zg).call(p,e+1,t,0,s,d)}catch{}return d}else if(d.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,d,e))){const b=d.headers["retry-after"];let v=N(this,Mi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof b=="string"&&b.match(/^[1-9][0-9]*$/)&&(v=parseInt(b)),be(g=o.clone(),xu,Zg).call(g,e+1,t,v,s,d)}if(this.processFunc){Tw(N(s,ba));try{d=await this.processFunc(o,d)}catch(b){(b.throttle==null||typeof b.stall!="number")&&d.makeServerError("error in post-processing function",b).assertOk();let v=N(this,Mi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return b.stall>=0&&(v=b.stall),be(y=o.clone(),xu,Zg).call(y,e+1,t,v,s,d)}}return d};let zo=vE;var T0,x0,I0,Ls,hf,Iu;const sN=class sN{constructor(e,t,r,s,i){le(this,T0);le(this,x0);le(this,I0);le(this,Ls);le(this,hf);le(this,Iu);H(this,T0,e),H(this,x0,t),H(this,I0,Object.keys(r).reduce((o,l)=>(o[l.toLowerCase()]=String(r[l]),o),{})),H(this,Ls,s==null?null:new Uint8Array(s)),H(this,hf,i||null),H(this,Iu,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${N(this,Ls)?Oe(N(this,Ls)):"null"}>`}get statusCode(){return N(this,T0)}get statusMessage(){return N(this,x0)}get headers(){return Object.assign({},N(this,I0))}get body(){return N(this,Ls)==null?null:new Uint8Array(N(this,Ls))}get bodyText(){try{return N(this,Ls)==null?"":Db(N(this,Ls))}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new sN(599,r,this.headers,this.body,N(this,hf)||void 0);return H(s,Iu,{message:e,error:t}),s}throwThrottleError(e,t){t==null?t=-1:Q(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw Xe(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return N(this,Ls)!=null}get request(){return N(this,hf)}ok(){return N(this,Iu).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=N(this,Iu);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{N(this,Ls)&&(s=Db(N(this,Ls)))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};T0=new WeakMap,x0=new WeakMap,I0=new WeakMap,Ls=new WeakMap,hf=new WeakMap,Iu=new WeakMap;let ll=sN;function EO(){return new Date().getTime()}function w9(n){return Ba(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function b9(n){return new Promise(e=>setTimeout(e,n))}const E9=BigInt(-1),Pi=BigInt(0),zd=BigInt(1),v9=BigInt(5),ld={};let Yd="0000";for(;Yd.length<80;)Yd+=Yd;function ql(n){let e=Yd;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function xg(n,e,t){const r=BigInt(e.width);if(e.signed){const s=zd<<r-zd;me(t==null||n>=-s&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>Pi?n=Rb(du(n,r),r):n=-Rb(du(-n,r),r)}else{const s=zd<<r;me(t==null||n>=0&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%s+s)%s&s-zd}return n}function LA(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Q(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),r=parseInt(i[3])}}else if(n){const i=n,o=(l,h,d)=>i[l]==null?d:(Q(typeof i[l]===h,"invalid fixed format ("+l+" not "+h+")","format."+l,i[l]),i[l]);e=o("signed","boolean",e),t=o("width","number",t),r=o("decimals","number",r)}Q(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),Q(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:s}}function A9(n,e){let t="";n<Pi&&(t="-",n*=E9);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=Yd+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var $i,Jt,Lr,zt,eu,go,a_,o_,c_,l_;const Fc=class Fc{constructor(e,t,r){le(this,zt);ie(this,"format");le(this,$i);le(this,Jt);le(this,Lr);ie(this,"_value");H0(e,ld,"FixedNumber"),H(this,Jt,t),H(this,$i,r);const s=A9(t,r.decimals);Xe(this,{format:r.name,_value:s}),H(this,Lr,ql(r.decimals))}get signed(){return N(this,$i).signed}get width(){return N(this,$i).width}get decimals(){return N(this,$i).decimals}get value(){return N(this,Jt)}addUnsafe(e){return be(this,zt,a_).call(this,e)}add(e){return be(this,zt,a_).call(this,e,"add")}subUnsafe(e){return be(this,zt,o_).call(this,e)}sub(e){return be(this,zt,o_).call(this,e,"sub")}mulUnsafe(e){return be(this,zt,c_).call(this,e)}mul(e){return be(this,zt,c_).call(this,e,"mul")}mulSignal(e){be(this,zt,eu).call(this,e);const t=N(this,Jt)*N(e,Jt);return me(t%N(this,Lr)===Pi,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),be(this,zt,go).call(this,t/N(this,Lr),"mulSignal")}divUnsafe(e){return be(this,zt,l_).call(this,e)}div(e){return be(this,zt,l_).call(this,e,"div")}divSignal(e){me(N(e,Jt)!==Pi,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),be(this,zt,eu).call(this,e);const t=N(this,Jt)*N(this,Lr);return me(t%N(e,Jt)===Pi,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),be(this,zt,go).call(this,t/N(e,Jt),"divSignal")}cmp(e){let t=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=ql(s):s<0&&(t*=ql(-s)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=N(this,Jt);return N(this,Jt)<Pi&&(e-=N(this,Lr)-zd),e=N(this,Jt)/N(this,Lr)*N(this,Lr),be(this,zt,go).call(this,e,"floor")}ceiling(){let e=N(this,Jt);return N(this,Jt)>Pi&&(e+=N(this,Lr)-zd),e=N(this,Jt)/N(this,Lr)*N(this,Lr),be(this,zt,go).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=v9*ql(t-1);let s=this.value+r;const i=ql(t);return s=s/i*i,xg(s,N(this,$i),"round"),new Fc(ld,s,N(this,$i))}isZero(){return N(this,Jt)===Pi}isNegative(){return N(this,Jt)<Pi}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Fc.fromString(this.toString(),e)}static fromValue(e,t,r){const s=t==null?0:lt(t),i=LA(r);let o=He(e,"value");const l=s-i.decimals;if(l>0){const h=ql(l);me(o%h===Pi,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=h}else l<0&&(o*=ql(-l));return xg(o,i,"fromValue"),new Fc(ld,o,i)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Q(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=LA(t);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=Yd;me(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const l=BigInt(r[1]+i+o);return xg(l,s,"fromString"),new Fc(ld,l,s)}static fromBytes(e,t){let r=UE(pt(e,"value"));const s=LA(t);return s.signed&&(r=Rb(r,s.width)),xg(r,s,"fromBytes"),new Fc(ld,r,s)}};$i=new WeakMap,Jt=new WeakMap,Lr=new WeakMap,zt=new WeakSet,eu=function(e){Q(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},go=function(e,t){return e=xg(e,N(this,$i),t),new Fc(ld,e,N(this,$i))},a_=function(e,t){return be(this,zt,eu).call(this,e),be(this,zt,go).call(this,N(this,Jt)+N(e,Jt),t)},o_=function(e,t){return be(this,zt,eu).call(this,e),be(this,zt,go).call(this,N(this,Jt)-N(e,Jt),t)},c_=function(e,t){return be(this,zt,eu).call(this,e),be(this,zt,go).call(this,N(this,Jt)*N(e,Jt)/N(this,Lr),t)},l_=function(e,t){return me(N(e,Jt)!==Pi,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),be(this,zt,eu).call(this,e),be(this,zt,go).call(this,N(this,Jt)*N(this,Lr)/N(e,Jt),t)};let Pb=Fc;function C9(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function vO(n,e,t){let r=0;for(let s=0;s<t;s++)r=r*256+n[e+s];return r}function AO(n,e,t,r){const s=[];for(;t<e+1+r;){const i=xU(n,t);s.push(i.result),t+=i.consumed,me(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:s}}function xU(n,e){me(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{me(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const s=vO(n,e+1,r);return t(e+1+r+s),AO(n,e,e+1+r,r+s)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),AO(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const s=vO(n,e+1,r);t(e+1+r+s);const i=Oe(n.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const s=Oe(n.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:C9(n[e])}}function z0(n){const e=pt(n,"data"),t=xU(e,0);return Q(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function CO(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function IU(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(i){r=r.concat(IU(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=CO(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(pt(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=CO(e.length);return t.unshift(183+t.length),t.concat(e)}const _O="0123456789abcdef";function ml(n){let e="0x";for(const t of IU(n))e+=_O[t>>4],e+=_O[t&15];return e}const OU=["wei","kwei","mwei","gwei","szabo","finney","ether"];function RU(n,e){let t=18;if(typeof e=="string"){const r=OU.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=lt(e,"unit"));return Pb.fromValue(n,t,{decimals:t,width:512}).toString()}function _9(n,e){Q(typeof n=="string","value must be a string","value",n);let t=18;if(typeof e=="string"){const r=OU.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=lt(e,"unit"));return Pb.fromString(n,{decimals:t,width:512}).value}function S9(n){return RU(n,18)}const qr=32,u_=new Uint8Array(qr),N9=["then"],xw={},DU=new WeakMap;function su(n){return DU.get(n)}function SO(n,e){DU.set(n,e)}function Ig(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function h_(n,e,t){return n.indexOf(null)>=0?e.map((r,s)=>r instanceof Wf?h_(su(r),r,t):r):n.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(t&&o instanceof Wf&&(o=h_(su(o),o,t)),r[s]=o),r},{})}var df;const Vd=class Vd extends Array{constructor(...t){const r=t[0];let s=t[1],i=(t[2]||[]).slice(),o=!0;r!==xw&&(s=t,i=[],o=!1);super(s.length);le(this,df);s.forEach((d,p)=>{this[p]=d});const l=i.reduce((d,p)=>(typeof p=="string"&&d.set(p,(d.get(p)||0)+1),d),new Map);if(SO(this,Object.freeze(s.map((d,p)=>{const g=i[p];return g!=null&&l.get(g)===1?g:null}))),H(this,df,[]),N(this,df)==null&&N(this,df),!o)return;Object.freeze(this);const h=new Proxy(this,{get:(d,p,g)=>{if(typeof p=="string"){if(p.match(/^[0-9]+$/)){const b=lt(p,"%index");if(b<0||b>=this.length)throw new RangeError("out of result range");const v=d[b];return v instanceof Error&&Ig(`index ${b}`,v),v}if(N9.indexOf(p)>=0)return Reflect.get(d,p,g);const y=d[p];if(y instanceof Function)return function(...b){return y.apply(this===g?d:this,b)};if(!(p in d))return d.getValue.apply(this===g?d:this,[p])}return Reflect.get(d,p,g)}});return SO(h,su(this)),h}toArray(t){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Ig(`index ${i}`,s),t&&s instanceof Vd&&(s=s.toArray(t)),r.push(s)}),r}toObject(t){const r=su(this);return r.reduce((s,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),h_(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=su(this),i=[],o=[];for(let l=t;l<r;l++)i.push(this[l]),o.push(s[l]);return new Vd(xw,i,o)}filter(t,r){const s=su(this),i=[],o=[];for(let l=0;l<this.length;l++){const h=this[l];h instanceof Error&&Ig(`index ${l}`,h),t.call(r,h,l,this)&&(i.push(h),o.push(s[l]))}return new Vd(xw,i,o)}map(t,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Ig(`index ${i}`,o),s.push(t.call(r,o,i,this))}return s}getValue(t){const r=su(this).indexOf(t);if(r===-1)return;const s=this[r];return s instanceof Error&&Ig(`property ${JSON.stringify(t)}`,s.error),s}static fromItems(t,r){return new Vd(xw,t,r)}};df=new WeakMap;let Wf=Vd;function NO(n){let e=zn(n);return me(e.length<=qr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:qr,offset:e.length}),e.length!==qr&&(e=jr(_n([u_.slice(e.length%qr),e]))),e}class Wo{constructor(e,t,r,s){ie(this,"name");ie(this,"type");ie(this,"localName");ie(this,"dynamic");Xe(this,{name:e,type:t,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Q(!1,e,this.localName,t)}}var _o,Ou,ff,lb;class d_{constructor(){le(this,ff);le(this,_o);le(this,Ou);H(this,_o,[]),H(this,Ou,0)}get data(){return _n(N(this,_o))}get length(){return N(this,Ou)}appendWriter(e){return be(this,ff,lb).call(this,jr(e.data))}writeBytes(e){let t=jr(e);const r=t.length%qr;return r&&(t=jr(_n([t,u_.slice(r)]))),be(this,ff,lb).call(this,t)}writeValue(e){return be(this,ff,lb).call(this,NO(e))}writeUpdatableValue(){const e=N(this,_o).length;return N(this,_o).push(u_),H(this,Ou,N(this,Ou)+qr),t=>{N(this,_o)[e]=NO(t)}}}_o=new WeakMap,Ou=new WeakMap,ff=new WeakSet,lb=function(e){return N(this,_o).push(e),H(this,Ou,N(this,Ou)+e.length),e.length};var hs,Ms,Ru,Du,Gc,dh,p_,PU;const iN=class iN{constructor(e,t,r){le(this,dh);ie(this,"allowLoose");le(this,hs);le(this,Ms);le(this,Ru);le(this,Du);le(this,Gc);Xe(this,{allowLoose:!!t}),H(this,hs,jr(e)),H(this,Ru,0),H(this,Du,null),H(this,Gc,r??1024),H(this,Ms,0)}get data(){return Oe(N(this,hs))}get dataLength(){return N(this,hs).length}get consumed(){return N(this,Ms)}get bytes(){return new Uint8Array(N(this,hs))}subReader(e){const t=new iN(N(this,hs).slice(N(this,Ms)+e),this.allowLoose,N(this,Gc));return H(t,Du,this),t}readBytes(e,t){let r=be(this,dh,PU).call(this,0,e,!!t);return be(this,dh,p_).call(this,e),H(this,Ms,N(this,Ms)+r.length),r.slice(0,e)}readValue(){return UE(this.readBytes(qr))}readIndex(){return s9(this.readBytes(qr))}};hs=new WeakMap,Ms=new WeakMap,Ru=new WeakMap,Du=new WeakMap,Gc=new WeakMap,dh=new WeakSet,p_=function(e){var t;if(N(this,Du))return be(t=N(this,Du),dh,p_).call(t,e);H(this,Ru,N(this,Ru)+e),me(N(this,Gc)<1||N(this,Ru)<=N(this,Gc)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${N(this,Gc)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:jr(N(this,hs)),offset:N(this,Ms),length:e,info:{bytesRead:N(this,Ru),dataLength:this.dataLength}})},PU=function(e,t,r){let s=Math.ceil(t/qr)*qr;return N(this,Ms)+s>N(this,hs).length&&(this.allowLoose&&r&&N(this,Ms)+t<=N(this,hs).length?s=t:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:jr(N(this,hs)),length:N(this,hs).length,offset:N(this,Ms)+s})),N(this,hs).slice(N(this,Ms),N(this,Ms)+s)};let f_=iN;function Ub(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Y2(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function T9(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ub(n.outputLen),Ub(n.blockLen)}function Yf(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function UU(n,e){Y2(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const MA=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kU=n=>n instanceof Uint8Array,x9=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),$A=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),la=(n,e)=>n<<32-e|n>>>e,I9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!I9)throw new Error("Non little-endian hardware is not supported");function O9(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function kE(n){if(typeof n=="string"&&(n=O9(n)),!kU(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function R9(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!kU(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}let Q2=class{clone(){return this._cloneInto()}};function Z2(n){const e=r=>n().update(kE(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function D9(n=32){if(MA&&typeof MA.getRandomValues=="function")return MA.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class BU extends Q2{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,T9(e);const r=kE(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Yf(this),this.iHash.update(e),this}digestInto(e){Yf(this),Y2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const LU=(n,e,t)=>new BU(n,e).update(t).digest();LU.create=(n,e)=>new BU(n,e);function P9(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}class MU extends Q2{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$A(this.buffer)}update(e){Yf(this);const{view:t,buffer:r,blockLen:s}=this;e=kE(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=$A(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yf(this),UU(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;P9(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=$A(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}}const U9=(n,e,t)=>n&e^~n&t,k9=(n,e,t)=>n&e^n&t^e&t,B9=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ec=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vc=new Uint32Array(64);class L9 extends MU{constructor(){super(64,32,8,!1),this.A=Ec[0]|0,this.B=Ec[1]|0,this.C=Ec[2]|0,this.D=Ec[3]|0,this.E=Ec[4]|0,this.F=Ec[5]|0,this.G=Ec[6]|0,this.H=Ec[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:h}=this;return[e,t,r,s,i,o,l,h]}set(e,t,r,s,i,o,l,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=h|0}process(e,t){for(let g=0;g<16;g++,t+=4)vc[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=vc[g-15],b=vc[g-2],v=la(y,7)^la(y,18)^y>>>3,E=la(b,17)^la(b,19)^b>>>10;vc[g]=E+vc[g-7]+v+vc[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:h,G:d,H:p}=this;for(let g=0;g<64;g++){const y=la(l,6)^la(l,11)^la(l,25),b=p+y+U9(l,h,d)+B9[g]+vc[g]|0,E=(la(r,2)^la(r,13)^la(r,22))+k9(r,s,i)|0;p=d,d=h,h=l,l=o+b|0,o=i,i=s,s=r,r=b+E|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,h,d,p)}roundClean(){vc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $U=Z2(()=>new L9),Iw=BigInt(2**32-1),g_=BigInt(32);function FU(n,e=!1){return e?{h:Number(n&Iw),l:Number(n>>g_&Iw)}:{h:Number(n>>g_&Iw)|0,l:Number(n&Iw)|0}}function HU(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=FU(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const M9=(n,e)=>BigInt(n>>>0)<<g_|BigInt(e>>>0),$9=(n,e,t)=>n>>>t,F9=(n,e,t)=>n<<32-t|e>>>t,H9=(n,e,t)=>n>>>t|e<<32-t,z9=(n,e,t)=>n<<32-t|e>>>t,j9=(n,e,t)=>n<<64-t|e>>>t-32,q9=(n,e,t)=>n>>>t-32|e<<64-t,V9=(n,e)=>e,G9=(n,e)=>n,zU=(n,e,t)=>n<<t|e>>>32-t,jU=(n,e,t)=>e<<t|n>>>32-t,qU=(n,e,t)=>e<<t-32|n>>>64-t,VU=(n,e,t)=>n<<t-32|e>>>64-t;function K9(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const W9=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Y9=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Q9=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Z9=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,X9=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),J9=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,ut={fromBig:FU,split:HU,toBig:M9,shrSH:$9,shrSL:F9,rotrSH:H9,rotrSL:z9,rotrBH:j9,rotrBL:q9,rotr32H:V9,rotr32L:G9,rotlSH:zU,rotlSL:jU,rotlBH:qU,rotlBL:VU,add:K9,add3L:W9,add3H:Y9,add4L:Q9,add4H:Z9,add5H:J9,add5L:X9},[e$,t$]=ut.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ac=new Uint32Array(80),Cc=new Uint32Array(80);class n$ extends MU{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)Ac[T]=e.getUint32(t),Cc[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const k=Ac[T-15]|0,R=Cc[T-15]|0,P=ut.rotrSH(k,R,1)^ut.rotrSH(k,R,8)^ut.shrSH(k,R,7),F=ut.rotrSL(k,R,1)^ut.rotrSL(k,R,8)^ut.shrSL(k,R,7),$=Ac[T-2]|0,B=Cc[T-2]|0,z=ut.rotrSH($,B,19)^ut.rotrBH($,B,61)^ut.shrSH($,B,6),j=ut.rotrSL($,B,19)^ut.rotrBL($,B,61)^ut.shrSL($,B,6),W=ut.add4L(F,j,Cc[T-7],Cc[T-16]),ne=ut.add4H(W,P,z,Ac[T-7],Ac[T-16]);Ac[T]=ne|0,Cc[T]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:A,Hh:S,Hl:x}=this;for(let T=0;T<80;T++){const k=ut.rotrSH(g,y,14)^ut.rotrSH(g,y,18)^ut.rotrBH(g,y,41),R=ut.rotrSL(g,y,14)^ut.rotrSL(g,y,18)^ut.rotrBL(g,y,41),P=g&b^~g&E,F=y&v^~y&A,$=ut.add5L(x,R,F,t$[T],Cc[T]),B=ut.add5H($,S,k,P,e$[T],Ac[T]),z=$|0,j=ut.rotrSH(r,s,28)^ut.rotrBH(r,s,34)^ut.rotrBH(r,s,39),W=ut.rotrSL(r,s,28)^ut.rotrBL(r,s,34)^ut.rotrBL(r,s,39),ne=r&i^r&l^i&l,J=s&o^s&h^o&h;S=E|0,x=A|0,E=b|0,A=v|0,b=g|0,v=y|0,{h:g,l:y}=ut.add(d|0,p|0,B|0,z|0),d=l|0,p=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const I=ut.add3L(z,W,J);r=ut.add3H(I,B,j,ne),s=I|0}({h:r,l:s}=ut.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ut.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=ut.add(this.Ch|0,this.Cl|0,l|0,h|0),{h:d,l:p}=ut.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=ut.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=ut.add(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:A}=ut.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:x}=ut.add(this.Hh|0,this.Hl|0,S|0,x|0),this.set(r,s,i,o,l,h,d,p,g,y,b,v,E,A,S,x)}roundClean(){Ac.fill(0),Cc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const r$=Z2(()=>new n$);function s$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const TO=s$();TO.crypto||TO.msCrypto;function i$(n){switch(n){case"sha256":return $U.create();case"sha512":return r$.create()}Q(!1,"invalid hashing algorithm name","algorithm",n)}const[GU,KU,WU]=[[],[],[]],a$=BigInt(0),Og=BigInt(1),o$=BigInt(2),c$=BigInt(7),l$=BigInt(256),u$=BigInt(113);for(let n=0,e=Og,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],GU.push(2*(5*r+t)),KU.push((n+1)*(n+2)/2%64);let s=a$;for(let i=0;i<7;i++)e=(e<<Og^(e>>c$)*u$)%l$,e&o$&&(s^=Og<<(Og<<BigInt(i))-Og);WU.push(s)}const[h$,d$]=HU(WU,!0),xO=(n,e,t)=>t>32?qU(n,e,t):zU(n,e,t),IO=(n,e,t)=>t>32?VU(n,e,t):jU(n,e,t);function f$(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,d=t[h],p=t[h+1],g=xO(d,p,1)^t[l],y=IO(d,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=KU[o],h=xO(s,i,l),d=IO(s,i,l),p=GU[o];s=n[p],i=n[p+1],n[p]=h,n[p+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=h$[r],n[1]^=d$[r]}t.fill(0)}let p$=class YU extends Q2{constructor(e,t,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ub(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=x9(this.state)}keccak(){f$(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Yf(this);const{blockLen:t,state:r}=this;e=kE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Yf(this,!1),Y2(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ub(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(UU(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new YU(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const g$=(n,e,t)=>Z2(()=>new p$(e,n,t)),m$=g$(1,136,256/8);let QU=!1;const ZU=function(n){return m$(n)};let XU=ZU;function Un(n){const e=pt(n,"data");return Oe(XU(e))}Un._=ZU;Un.lock=function(){QU=!0};Un.register=function(n){if(QU)throw new TypeError("keccak256 is locked");XU=n};Object.freeze(Un);const JU=function(n){return i$("sha256").update(n).digest()};let e8=JU,t8=!1;function gp(n){const e=pt(n,"data");return Oe(e8(e))}gp._=JU;gp.lock=function(){t8=!0};gp.register=function(n){if(t8)throw new Error("sha256 is locked");e8=n};Object.freeze(gp);Object.freeze(gp);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n8=BigInt(0),BE=BigInt(1),y$=BigInt(2),LE=n=>n instanceof Uint8Array,w$=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Qf(n){if(!LE(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=w$[n[t]];return e}function r8(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function X2(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Zf(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const s=r*2,i=n.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function qu(n){return X2(Qf(n))}function J2(n){if(!LE(n))throw new Error("Uint8Array expected");return X2(Qf(Uint8Array.from(n).reverse()))}function Xf(n,e){return Zf(n.toString(16).padStart(e*2,"0"))}function eS(n,e){return Xf(n,e).reverse()}function b$(n){return Zf(r8(n))}function Bi(n,e,t){let r;if(typeof e=="string")try{r=Zf(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(LE(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function xm(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!LE(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function E$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function v$(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function A$(n){let e;for(e=0;n>n8;n>>=BE,e+=1);return e}function C$(n,e){return n>>BigInt(e)&BE}const _$=(n,e,t)=>n|(t?BE:n8)<<BigInt(e),tS=n=>(y$<<BigInt(n-1))-BE,FA=n=>new Uint8Array(n),OO=n=>Uint8Array.from(n);function s8(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=FA(n),s=FA(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},l=(...g)=>t(s,r,...g),h=(g=FA())=>{s=l(OO([0]),g),r=l(),g.length!==0&&(s=l(OO([1]),g),r=l())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const y=[];for(;g<e;){r=l();const b=r.slice();y.push(b),g+=r.length}return xm(...y)};return(g,y)=>{o(),h(g);let b;for(;!(b=y(d()));)h();return o(),b}}const S$={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function j0(n,e,t={}){const r=(s,i,o)=>{const l=S$[i];if(typeof l!="function")throw new Error(`Invalid validator "${i}", expected function`);const h=n[s];if(!(o&&h===void 0)&&!l(h,n))throw new Error(`Invalid param ${String(s)}=${h} (${typeof h}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}const N$=Object.freeze(Object.defineProperty({__proto__:null,bitGet:C$,bitLen:A$,bitMask:tS,bitSet:_$,bytesToHex:Qf,bytesToNumberBE:qu,bytesToNumberLE:J2,concatBytes:xm,createHmacDrbg:s8,ensureBytes:Bi,equalBytes:E$,hexToBytes:Zf,hexToNumber:X2,numberToBytesBE:Xf,numberToBytesLE:eS,numberToHexUnpadded:r8,numberToVarBytesBE:b$,utf8ToBytes:v$,validateObject:j0},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nr=BigInt(0),xn=BigInt(1),iu=BigInt(2),T$=BigInt(3),m_=BigInt(4),RO=BigInt(5),DO=BigInt(8);BigInt(9);BigInt(16);function gs(n,e){const t=n%e;return t>=nr?t:e+t}function x$(n,e,t){if(t<=nr||e<nr)throw new Error("Expected power/modulo > 0");if(t===xn)return nr;let r=xn;for(;e>nr;)e&xn&&(r=r*n%t),n=n*n%t,e>>=xn;return r}function si(n,e,t){let r=n;for(;e-- >nr;)r*=r,r%=t;return r}function y_(n,e){if(n===nr||e<=nr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=gs(n,e),r=e,s=nr,i=xn;for(;t!==nr;){const l=r/t,h=r%t,d=s-i*l;r=t,t=h,s=i,i=d}if(r!==xn)throw new Error("invert: does not exist");return gs(s,e)}function I$(n){const e=(n-xn)/iu;let t,r,s;for(t=n-xn,r=0;t%iu===nr;t/=iu,r++);for(s=iu;s<n&&x$(s,e,n)!==n-xn;s++);if(r===1){const o=(n+xn)/m_;return function(h,d){const p=h.pow(d,o);if(!h.eql(h.sqr(p),d))throw new Error("Cannot find square root");return p}}const i=(t+xn)/iu;return function(l,h){if(l.pow(h,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let d=r,p=l.pow(l.mul(l.ONE,s),t),g=l.pow(h,i),y=l.pow(h,t);for(;!l.eql(y,l.ONE);){if(l.eql(y,l.ZERO))return l.ZERO;let b=1;for(let E=l.sqr(y);b<d&&!l.eql(E,l.ONE);b++)E=l.sqr(E);const v=l.pow(p,xn<<BigInt(d-b-1));p=l.sqr(v),g=l.mul(g,v),y=l.mul(y,p),d=b}return g}}function O$(n){if(n%m_===T$){const e=(n+xn)/m_;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%DO===RO){const e=(n-RO)/DO;return function(r,s){const i=r.mul(s,iu),o=r.pow(i,e),l=r.mul(s,o),h=r.mul(r.mul(l,iu),o),d=r.mul(l,r.sub(h,r.ONE));if(!r.eql(r.sqr(d),s))throw new Error("Cannot find square root");return d}}return I$(n)}const R$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function D$(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=R$.reduce((r,s)=>(r[s]="function",r),e);return j0(n,t)}function P$(n,e,t){if(t<nr)throw new Error("Expected power > 0");if(t===nr)return n.ONE;if(t===xn)return e;let r=n.ONE,s=e;for(;t>nr;)t&xn&&(r=n.mul(r,s)),s=n.sqr(s),t>>=xn;return r}function U$(n,e){const t=new Array(e.length),r=e.reduce((i,o,l)=>n.is0(o)?i:(t[l]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,l)=>n.is0(o)?i:(t[l]=n.mul(i,t[l]),n.mul(i,o)),s),t}function i8(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function k$(n,e,t=!1,r={}){if(n<=nr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=i8(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=O$(n),l=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:tS(s),ZERO:nr,ONE:xn,create:h=>gs(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return nr<=h&&h<n},is0:h=>h===nr,isOdd:h=>(h&xn)===xn,neg:h=>gs(-h,n),eql:(h,d)=>h===d,sqr:h=>gs(h*h,n),add:(h,d)=>gs(h+d,n),sub:(h,d)=>gs(h-d,n),mul:(h,d)=>gs(h*d,n),pow:(h,d)=>P$(l,h,d),div:(h,d)=>gs(h*y_(d,n),n),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>y_(h,n),sqrt:r.sqrt||(h=>o(l,h)),invertBatch:h=>U$(l,h),cmov:(h,d,p)=>p?d:h,toBytes:h=>t?eS(h,i):Xf(h,i),fromBytes:h=>{if(h.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${h.length}`);return t?J2(h):qu(h)}});return Object.freeze(l)}function a8(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function o8(n){const e=a8(n);return e+Math.ceil(e/2)}function B$(n,e,t=!1){const r=n.length,s=a8(e),i=o8(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=t?qu(n):J2(n),l=gs(o,e-xn)+xn;return t?eS(l,s):Xf(l,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L$=BigInt(0),HA=BigInt(1);function M$(n,e){const t=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=n.ZERO,l=s;for(;i>L$;)i&HA&&(o=o.add(l)),l=l.double(),i>>=HA;return o},precomputeWindow(s,i){const{windows:o,windowSize:l}=r(i),h=[];let d=s,p=d;for(let g=0;g<o;g++){p=d,h.push(p);for(let y=1;y<l;y++)p=p.add(d),h.push(p);d=p.double()}return h},wNAF(s,i,o){const{windows:l,windowSize:h}=r(s);let d=n.ZERO,p=n.BASE;const g=BigInt(2**s-1),y=2**s,b=BigInt(s);for(let v=0;v<l;v++){const E=v*h;let A=Number(o&g);o>>=b,A>h&&(A-=y,o+=HA);const S=E,x=E+Math.abs(A)-1,T=v%2!==0,k=A<0;A===0?p=p.add(t(T,i[S])):d=d.add(t(k,i[x]))}return{p:d,f:p}},wNAFCached(s,i,o,l){const h=s._WINDOW_SIZE||1;let d=i.get(s);return d||(d=this.precomputeWindow(s,h),h!==1&&i.set(s,l(d))),this.wNAF(h,d,o)}}}function c8(n){return D$(n.Fp),j0(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...i8(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $$(n){const e=c8(n);j0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:F$,hexToBytes:H$}=N$,fu={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=fu;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:F$(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=fu,t=typeof n=="string"?H$(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=fu._parseInt(t.subarray(2)),{d:o,l}=fu._parseInt(i);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const e=d=>Number.parseInt(d[0],16)&8?"00"+d:d,t=d=>{const p=d.toString(16);return p.length&1?`0${p}`:p},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,l=t(i),h=t(o);return`30${t(o+i+4)}02${h}${s}02${l}${r}`}},Po=BigInt(0),mi=BigInt(1);BigInt(2);const PO=BigInt(3);BigInt(4);function z$(n){const e=$$(n),{Fp:t}=e,r=e.toBytes||((v,E,A)=>{const S=E.toAffine();return xm(Uint8Array.from([4]),t.toBytes(S.x),t.toBytes(S.y))}),s=e.fromBytes||(v=>{const E=v.subarray(1),A=t.fromBytes(E.subarray(0,t.BYTES)),S=t.fromBytes(E.subarray(t.BYTES,2*t.BYTES));return{x:A,y:S}});function i(v){const{a:E,b:A}=e,S=t.sqr(v),x=t.mul(S,v);return t.add(t.add(x,t.mul(v,E)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&Po<v&&v<e.n}function l(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(v){const{allowedPrivateKeyLengths:E,nByteLength:A,wrapPrivateKey:S,n:x}=e;if(E&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=Qf(v)),typeof v!="string"||!E.includes(v.length))throw new Error("Invalid key");v=v.padStart(A*2,"0")}let T;try{T=typeof v=="bigint"?v:qu(Bi("private key",v,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof v}`)}return S&&(T=gs(T,x)),l(T),T}const d=new Map;function p(v){if(!(v instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(E,A,S){if(this.px=E,this.py=A,this.pz=S,E==null||!t.isValid(E))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(S==null||!t.isValid(S))throw new Error("z required")}static fromAffine(E){const{x:A,y:S}=E||{};if(!E||!t.isValid(A)||!t.isValid(S))throw new Error("invalid affine point");if(E instanceof g)throw new Error("projective point not allowed");const x=T=>t.eql(T,t.ZERO);return x(A)&&x(S)?g.ZERO:new g(A,S,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const A=t.invertBatch(E.map(S=>S.pz));return E.map((S,x)=>S.toAffine(A[x])).map(g.fromAffine)}static fromHex(E){const A=g.fromAffine(s(Bi("pointHex",E)));return A.assertValidity(),A}static fromPrivateKey(E){return g.BASE.multiply(h(E))}_setWindowSize(E){this._WINDOW_SIZE=E,d.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:E,y:A}=this.toAffine();if(!t.isValid(E)||!t.isValid(A))throw new Error("bad point: x or y not FE");const S=t.sqr(A),x=i(E);if(!t.eql(S,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:E}=this.toAffine();if(t.isOdd)return!t.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){p(E);const{px:A,py:S,pz:x}=this,{px:T,py:k,pz:R}=E,P=t.eql(t.mul(A,R),t.mul(T,x)),F=t.eql(t.mul(S,R),t.mul(k,x));return P&&F}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:E,b:A}=e,S=t.mul(A,PO),{px:x,py:T,pz:k}=this;let R=t.ZERO,P=t.ZERO,F=t.ZERO,$=t.mul(x,x),B=t.mul(T,T),z=t.mul(k,k),j=t.mul(x,T);return j=t.add(j,j),F=t.mul(x,k),F=t.add(F,F),R=t.mul(E,F),P=t.mul(S,z),P=t.add(R,P),R=t.sub(B,P),P=t.add(B,P),P=t.mul(R,P),R=t.mul(j,R),F=t.mul(S,F),z=t.mul(E,z),j=t.sub($,z),j=t.mul(E,j),j=t.add(j,F),F=t.add($,$),$=t.add(F,$),$=t.add($,z),$=t.mul($,j),P=t.add(P,$),z=t.mul(T,k),z=t.add(z,z),$=t.mul(z,j),R=t.sub(R,$),F=t.mul(z,B),F=t.add(F,F),F=t.add(F,F),new g(R,P,F)}add(E){p(E);const{px:A,py:S,pz:x}=this,{px:T,py:k,pz:R}=E;let P=t.ZERO,F=t.ZERO,$=t.ZERO;const B=e.a,z=t.mul(e.b,PO);let j=t.mul(A,T),W=t.mul(S,k),ne=t.mul(x,R),J=t.add(A,S),I=t.add(T,k);J=t.mul(J,I),I=t.add(j,W),J=t.sub(J,I),I=t.add(A,x);let _=t.add(T,R);return I=t.mul(I,_),_=t.add(j,ne),I=t.sub(I,_),_=t.add(S,x),P=t.add(k,R),_=t.mul(_,P),P=t.add(W,ne),_=t.sub(_,P),$=t.mul(B,I),P=t.mul(z,ne),$=t.add(P,$),P=t.sub(W,$),$=t.add(W,$),F=t.mul(P,$),W=t.add(j,j),W=t.add(W,j),ne=t.mul(B,ne),I=t.mul(z,I),W=t.add(W,ne),ne=t.sub(j,ne),ne=t.mul(B,ne),I=t.add(I,ne),j=t.mul(W,I),F=t.add(F,j),j=t.mul(_,I),P=t.mul(J,P),P=t.sub(P,j),j=t.mul(J,W),$=t.mul(_,$),$=t.add($,j),new g(P,F,$)}subtract(E){return this.add(E.negate())}is0(){return this.equals(g.ZERO)}wNAF(E){return b.wNAFCached(this,d,E,A=>{const S=t.invertBatch(A.map(x=>x.pz));return A.map((x,T)=>x.toAffine(S[T])).map(g.fromAffine)})}multiplyUnsafe(E){const A=g.ZERO;if(E===Po)return A;if(l(E),E===mi)return this;const{endo:S}=e;if(!S)return b.unsafeLadder(this,E);let{k1neg:x,k1:T,k2neg:k,k2:R}=S.splitScalar(E),P=A,F=A,$=this;for(;T>Po||R>Po;)T&mi&&(P=P.add($)),R&mi&&(F=F.add($)),$=$.double(),T>>=mi,R>>=mi;return x&&(P=P.negate()),k&&(F=F.negate()),F=new g(t.mul(F.px,S.beta),F.py,F.pz),P.add(F)}multiply(E){l(E);let A=E,S,x;const{endo:T}=e;if(T){const{k1neg:k,k1:R,k2neg:P,k2:F}=T.splitScalar(A);let{p:$,f:B}=this.wNAF(R),{p:z,f:j}=this.wNAF(F);$=b.constTimeNegate(k,$),z=b.constTimeNegate(P,z),z=new g(t.mul(z.px,T.beta),z.py,z.pz),S=$.add(z),x=B.add(j)}else{const{p:k,f:R}=this.wNAF(A);S=k,x=R}return g.normalizeZ([S,x])[0]}multiplyAndAddUnsafe(E,A,S){const x=g.BASE,T=(R,P)=>P===Po||P===mi||!R.equals(x)?R.multiplyUnsafe(P):R.multiply(P),k=T(this,A).add(T(E,S));return k.is0()?void 0:k}toAffine(E){const{px:A,py:S,pz:x}=this,T=this.is0();E==null&&(E=T?t.ONE:t.inv(x));const k=t.mul(A,E),R=t.mul(S,E),P=t.mul(x,E);if(T)return{x:t.ZERO,y:t.ZERO};if(!t.eql(P,t.ONE))throw new Error("invZ was invalid");return{x:k,y:R}}isTorsionFree(){const{h:E,isTorsionFree:A}=e;if(E===mi)return!0;if(A)return A(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:A}=e;return E===mi?this:A?A(g,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return this.assertValidity(),r(g,this,E)}toHex(E=!0){return Qf(this.toRawBytes(E))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,b=M$(g,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:h,weierstrassEquation:i,isWithinCurveOrder:o}}function j$(n){const e=c8(n);return j0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function q$(n){const e=j$(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(I){return Po<I&&I<t.ORDER}function l(I){return gs(I,r)}function h(I){return y_(I,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:g,isWithinCurveOrder:y}=z$({...e,toBytes(I,_,L){const q=_.toAffine(),K=t.toBytes(q.x),O=xm;return L?O(Uint8Array.from([_.hasEvenY()?2:3]),K):O(Uint8Array.from([4]),K,t.toBytes(q.y))},fromBytes(I){const _=I.length,L=I[0],q=I.subarray(1);if(_===s&&(L===2||L===3)){const K=qu(q);if(!o(K))throw new Error("Point is not on curve");const O=g(K);let G=t.sqrt(O);const Z=(G&mi)===mi;return(L&1)===1!==Z&&(G=t.neg(G)),{x:K,y:G}}else if(_===i&&L===4){const K=t.fromBytes(q.subarray(0,t.BYTES)),O=t.fromBytes(q.subarray(t.BYTES,2*t.BYTES));return{x:K,y:O}}else throw new Error(`Point of length ${_} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),b=I=>Qf(Xf(I,e.nByteLength));function v(I){const _=r>>mi;return I>_}function E(I){return v(I)?l(-I):I}const A=(I,_,L)=>qu(I.slice(_,L));class S{constructor(_,L,q){this.r=_,this.s=L,this.recovery=q,this.assertValidity()}static fromCompact(_){const L=e.nByteLength;return _=Bi("compactSignature",_,L*2),new S(A(_,0,L),A(_,L,2*L))}static fromDER(_){const{r:L,s:q}=fu.toSig(Bi("DER",_));return new S(L,q)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new S(this.r,this.s,_)}recoverPublicKey(_){const{r:L,s:q,recovery:K}=this,O=F(Bi("msgHash",_));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const G=K===2||K===3?L+e.n:L;if(G>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=(K&1)===0?"02":"03",re=d.fromHex(Z+b(G)),ee=h(G),ue=l(-O*ee),ge=l(q*ee),Ce=d.BASE.multiplyAndAddUnsafe(re,ue,ge);if(!Ce)throw new Error("point at infinify");return Ce.assertValidity(),Ce}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Zf(this.toDERHex())}toDERHex(){return fu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Zf(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const x={isValidPrivateKey(I){try{return p(I),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const I=o8(e.n);return B$(e.randomBytes(I),e.n)},precompute(I=8,_=d.BASE){return _._setWindowSize(I),_.multiply(BigInt(3)),_}};function T(I,_=!0){return d.fromPrivateKey(I).toRawBytes(_)}function k(I){const _=I instanceof Uint8Array,L=typeof I=="string",q=(_||L)&&I.length;return _?q===s||q===i:L?q===2*s||q===2*i:I instanceof d}function R(I,_,L=!0){if(k(I))throw new Error("first arg must be private key");if(!k(_))throw new Error("second arg must be public key");return d.fromHex(_).multiply(p(I)).toRawBytes(L)}const P=e.bits2int||function(I){const _=qu(I),L=I.length*8-e.nBitLength;return L>0?_>>BigInt(L):_},F=e.bits2int_modN||function(I){return l(P(I))},$=tS(e.nBitLength);function B(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Po<=I&&I<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Xf(I,e.nByteLength)}function z(I,_,L=j){if(["recovered","canonical"].some(Te=>Te in L))throw new Error("sign() legacy options not supported");const{hash:q,randomBytes:K}=e;let{lowS:O,prehash:G,extraEntropy:Z}=L;O==null&&(O=!0),I=Bi("msgHash",I),G&&(I=Bi("prehashed msgHash",q(I)));const re=F(I),ee=p(_),ue=[B(ee),B(re)];if(Z!=null){const Te=Z===!0?K(t.BYTES):Z;ue.push(Bi("extraEntropy",Te))}const ge=xm(...ue),Ce=re;function Pe(Te){const Qe=P(Te);if(!y(Qe))return;const Wt=h(Qe),Bt=d.BASE.multiply(Qe).toAffine(),mn=l(Bt.x);if(mn===Po)return;const hn=l(Wt*l(Ce+mn*ee));if(hn===Po)return;let na=(Bt.x===mn?0:2)|Number(Bt.y&mi),Ch=hn;return O&&v(hn)&&(Ch=E(hn),na^=1),new S(mn,Ch,na)}return{seed:ge,k2sig:Pe}}const j={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function ne(I,_,L=j){const{seed:q,k2sig:K}=z(I,_,L),O=e;return s8(O.hash.outputLen,O.nByteLength,O.hmac)(q,K)}d.BASE._setWindowSize(8);function J(I,_,L,q=W){var Bt;const K=I;if(_=Bi("msgHash",_),L=Bi("publicKey",L),"strict"in q)throw new Error("options.strict was renamed to lowS");const{lowS:O,prehash:G}=q;let Z,re;try{if(typeof K=="string"||K instanceof Uint8Array)try{Z=S.fromDER(K)}catch(mn){if(!(mn instanceof fu.Err))throw mn;Z=S.fromCompact(K)}else if(typeof K=="object"&&typeof K.r=="bigint"&&typeof K.s=="bigint"){const{r:mn,s:hn}=K;Z=new S(mn,hn)}else throw new Error("PARSE");re=d.fromHex(L)}catch(mn){if(mn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(O&&Z.hasHighS())return!1;G&&(_=e.hash(_));const{r:ee,s:ue}=Z,ge=F(_),Ce=h(ue),Pe=l(ge*Ce),Te=l(ee*Ce),Qe=(Bt=d.BASE.multiplyAndAddUnsafe(re,Pe,Te))==null?void 0:Bt.toAffine();return Qe?l(Qe.x)===ee:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:R,sign:ne,verify:J,ProjectivePoint:d,Signature:S,utils:x}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V$(n){return{hash:n,hmac:(e,...t)=>LU(n,e,R9(...t)),randomBytes:D9}}function G$(n,e){const t=r=>q$({...n,...V$(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const l8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),UO=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),K$=BigInt(1),w_=BigInt(2),kO=(n,e)=>(n+e/w_)/e;function W$(n){const e=l8,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),l=BigInt(44),h=BigInt(88),d=n*n*n%e,p=d*d*n%e,g=si(p,t,e)*p%e,y=si(g,t,e)*p%e,b=si(y,w_,e)*d%e,v=si(b,s,e)*b%e,E=si(v,i,e)*v%e,A=si(E,l,e)*E%e,S=si(A,h,e)*A%e,x=si(S,l,e)*E%e,T=si(x,t,e)*p%e,k=si(T,o,e)*v%e,R=si(k,r,e)*d%e,P=si(R,w_,e);if(!b_.eql(b_.sqr(P),n))throw new Error("Cannot find square root");return P}const b_=k$(l8,void 0,void 0,{sqrt:W$}),Uc=G$({a:BigInt(0),b:BigInt(7),Fp:b_,n:UO,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=UO,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-K$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),l=kO(i*n,e),h=kO(-r*n,e);let d=gs(n-l*t-h*s,e),p=gs(-l*r-h*i,e);const g=d>o,y=p>o;if(g&&(d=e-d),y&&(p=e-p),d>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:g,k1:d,k2neg:y,k2:p}}}},$U);BigInt(0);Uc.ProjectivePoint;const Im="0x0000000000000000000000000000000000000000",BO="0x0000000000000000000000000000000000000000000000000000000000000000",LO=BigInt(0),MO=BigInt(1),$O=BigInt(2),FO=BigInt(27),HO=BigInt(28),Ow=BigInt(35),ud={};function zO(n){return Ho(zn(n),32)}var pf,Ea,gf,Pu;const ki=class ki{constructor(e,t,r,s){le(this,pf);le(this,Ea);le(this,gf);le(this,Pu);H0(e,ud,"Signature"),H(this,pf,t),H(this,Ea,r),H(this,gf,s),H(this,Pu,null)}get r(){return N(this,pf)}set r(e){Q(Wd(e)===32,"invalid r","value",e),H(this,pf,Oe(e))}get s(){return Q(parseInt(N(this,Ea).substring(0,3))<8,"non-canonical s; use ._s","s",N(this,Ea)),N(this,Ea)}set s(e){Q(Wd(e)===32,"invalid s","value",e),H(this,Ea,Oe(e))}get _s(){return N(this,Ea)}isValid(){return parseInt(N(this,Ea).substring(0,3))<8}get v(){return N(this,gf)}set v(e){const t=lt(e,"value");Q(t===27||t===28,"invalid v","v",e),H(this,gf,t)}get networkV(){return N(this,Pu)}get legacyChainId(){const e=this.networkV;return e==null?null:ki.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=pt(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return _n([this.r,this.yParityAndS])}get serialized(){return _n([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new ki(ud,this.r,this._s,this.v);return this.networkV&&H(e,Pu,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=He(e,"v");return t==FO||t==HO?LO:(Q(t>=Ow,"invalid EIP-155 v","v",e),(t-Ow)/$O)}static getChainIdV(e,t){return He(e)*$O+BigInt(35+t-27)}static getNormalizedV(e){const t=He(e);return t===LO||t===FO?27:t===MO||t===HO?28:(Q(t>=Ow,"invalid v","v",e),t&MO?27:28)}static from(e){function t(d,p){Q(d,p,"signature",e)}if(e==null)return new ki(ud,BO,BO,27);if(typeof e=="string"){const d=pt(e,"signature");if(d.length===64){const p=Oe(d.slice(0,32)),g=d.slice(32,64),y=g[0]&128?28:27;return g[0]&=127,new ki(ud,p,Oe(g),y)}if(d.length===65){const p=Oe(d.slice(0,32)),g=Oe(d.slice(32,64)),y=ki.getNormalizedV(d[64]);return new ki(ud,p,g,y)}t(!1,"invalid raw signature length")}if(e instanceof ki)return e.clone();const r=e.r;t(r!=null,"missing r");const s=zO(r),i=function(d,p){if(d!=null)return zO(d);if(p!=null){t(sn(p,32),"invalid yParityAndS");const g=pt(p);return g[0]&=127,Oe(g)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:l}=function(d,p,g){if(d!=null){const y=He(d);return{networkV:y>=Ow?y:void 0,v:ki.getNormalizedV(y)}}if(p!=null)return t(sn(p,32),"invalid yParityAndS"),{v:pt(p)[0]&128?28:27};if(g!=null){switch(lt(g,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),h=new ki(ud,s,i,l);return o&&H(h,Pu,o),t(e.yParity==null||lt(e.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}};pf=new WeakMap,Ea=new WeakMap,gf=new WeakMap,Pu=new WeakMap;let Kr=ki;var So;const lu=class lu{constructor(e){le(this,So);Q(Wd(e)===32,"invalid private key","privateKey","[REDACTED]"),H(this,So,Oe(e))}get privateKey(){return N(this,So)}get publicKey(){return lu.computePublicKey(N(this,So))}get compressedPublicKey(){return lu.computePublicKey(N(this,So),!0)}sign(e){Q(Wd(e)===32,"invalid digest length","digest",e);const t=Uc.sign(jr(e),jr(N(this,So)),{lowS:!0});return Kr.from({r:gl(t.r,32),s:gl(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=lu.computePublicKey(e);return Oe(Uc.getSharedSecret(jr(N(this,So)),pt(t),!1))}static computePublicKey(e,t){let r=pt(e,"key");if(r.length===32){const i=Uc.getPublicKey(r,!!t);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Uc.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(t))}static recoverPublicKey(e,t){Q(Wd(e)===32,"invalid digest length","digest",e);const r=Kr.from(t);let s=Uc.Signature.fromCompact(jr(_n([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(jr(e));return Q(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,r){const s=Uc.ProjectivePoint.fromHex(lu.computePublicKey(e).substring(2)),i=Uc.ProjectivePoint.fromHex(lu.computePublicKey(t).substring(2));return"0x"+s.add(i).toHex(!!r)}};So=new WeakMap;let Om=lu;const Y$=BigInt(0),Q$=BigInt(36);function jO(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const r=pt(Un(t));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const nS={};for(let n=0;n<10;n++)nS[String(n)]=String(n);for(let n=0;n<26;n++)nS[String.fromCharCode(65+n)]=String(10+n);const qO=15;function Z$(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>nS[r]).join("");for(;e.length>=qO;){let r=e.substring(0,qO);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const X$=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function J$(n){n=n.toLowerCase();let e=Y$;for(let t=0;t<n.length;t++)e=e*Q$+X$[n[t]];return e}function Ft(n){if(Q(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=jO(n);return Q(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(n.substring(2,4)===Z$(n),"bad icap checksum","address",n);let e=J$(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return jO("0x"+e)}Q(!1,"invalid address","address",n)}function e7(n){const e=Ft(n.from);let r=He(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Ft(Cn(Un(ml([e,r])),12))}function u8(n){return n&&typeof n.getAddress=="function"}async function zA(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(me(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),Ft(t)}function Vr(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?Ft(n):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),zA(n,e.resolveName(n)));if(u8(n))return zA(n,n.getAddress());if(n&&typeof n.then=="function")return zA(n,n);Q(!1,"unsupported addressable value","target",n)}const wo={};function $e(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new Or(wo,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function Tt(n,e){return new Or(wo,`bytes${e||""}`,n,{size:e})}const VO=Symbol.for("_ethers_typed");var Uu;const bo=class bo{constructor(e,t,r,s){ie(this,"type");ie(this,"value");le(this,Uu);ie(this,"_typedSymbol");s==null&&(s=null),H0(wo,e,"Typed"),Xe(this,{_typedSymbol:VO,type:t,value:r}),H(this,Uu,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return N(this,Uu)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return N(this,Uu)===!0?-1:N(this,Uu)===!1?this.value.length:null}static from(e,t){return new bo(wo,e,t)}static uint8(e){return $e(e,8)}static uint16(e){return $e(e,16)}static uint24(e){return $e(e,24)}static uint32(e){return $e(e,32)}static uint40(e){return $e(e,40)}static uint48(e){return $e(e,48)}static uint56(e){return $e(e,56)}static uint64(e){return $e(e,64)}static uint72(e){return $e(e,72)}static uint80(e){return $e(e,80)}static uint88(e){return $e(e,88)}static uint96(e){return $e(e,96)}static uint104(e){return $e(e,104)}static uint112(e){return $e(e,112)}static uint120(e){return $e(e,120)}static uint128(e){return $e(e,128)}static uint136(e){return $e(e,136)}static uint144(e){return $e(e,144)}static uint152(e){return $e(e,152)}static uint160(e){return $e(e,160)}static uint168(e){return $e(e,168)}static uint176(e){return $e(e,176)}static uint184(e){return $e(e,184)}static uint192(e){return $e(e,192)}static uint200(e){return $e(e,200)}static uint208(e){return $e(e,208)}static uint216(e){return $e(e,216)}static uint224(e){return $e(e,224)}static uint232(e){return $e(e,232)}static uint240(e){return $e(e,240)}static uint248(e){return $e(e,248)}static uint256(e){return $e(e,256)}static uint(e){return $e(e,256)}static int8(e){return $e(e,-8)}static int16(e){return $e(e,-16)}static int24(e){return $e(e,-24)}static int32(e){return $e(e,-32)}static int40(e){return $e(e,-40)}static int48(e){return $e(e,-48)}static int56(e){return $e(e,-56)}static int64(e){return $e(e,-64)}static int72(e){return $e(e,-72)}static int80(e){return $e(e,-80)}static int88(e){return $e(e,-88)}static int96(e){return $e(e,-96)}static int104(e){return $e(e,-104)}static int112(e){return $e(e,-112)}static int120(e){return $e(e,-120)}static int128(e){return $e(e,-128)}static int136(e){return $e(e,-136)}static int144(e){return $e(e,-144)}static int152(e){return $e(e,-152)}static int160(e){return $e(e,-160)}static int168(e){return $e(e,-168)}static int176(e){return $e(e,-176)}static int184(e){return $e(e,-184)}static int192(e){return $e(e,-192)}static int200(e){return $e(e,-200)}static int208(e){return $e(e,-208)}static int216(e){return $e(e,-216)}static int224(e){return $e(e,-224)}static int232(e){return $e(e,-232)}static int240(e){return $e(e,-240)}static int248(e){return $e(e,-248)}static int256(e){return $e(e,-256)}static int(e){return $e(e,-256)}static bytes1(e){return Tt(e,1)}static bytes2(e){return Tt(e,2)}static bytes3(e){return Tt(e,3)}static bytes4(e){return Tt(e,4)}static bytes5(e){return Tt(e,5)}static bytes6(e){return Tt(e,6)}static bytes7(e){return Tt(e,7)}static bytes8(e){return Tt(e,8)}static bytes9(e){return Tt(e,9)}static bytes10(e){return Tt(e,10)}static bytes11(e){return Tt(e,11)}static bytes12(e){return Tt(e,12)}static bytes13(e){return Tt(e,13)}static bytes14(e){return Tt(e,14)}static bytes15(e){return Tt(e,15)}static bytes16(e){return Tt(e,16)}static bytes17(e){return Tt(e,17)}static bytes18(e){return Tt(e,18)}static bytes19(e){return Tt(e,19)}static bytes20(e){return Tt(e,20)}static bytes21(e){return Tt(e,21)}static bytes22(e){return Tt(e,22)}static bytes23(e){return Tt(e,23)}static bytes24(e){return Tt(e,24)}static bytes25(e){return Tt(e,25)}static bytes26(e){return Tt(e,26)}static bytes27(e){return Tt(e,27)}static bytes28(e){return Tt(e,28)}static bytes29(e){return Tt(e,29)}static bytes30(e){return Tt(e,30)}static bytes31(e){return Tt(e,31)}static bytes32(e){return Tt(e,32)}static address(e){return new bo(wo,"address",e)}static bool(e){return new bo(wo,"bool",!!e)}static bytes(e){return new bo(wo,"bytes",e)}static string(e){return new bo(wo,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new bo(wo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===VO}static dereference(e,t){if(bo.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Uu=new WeakMap;let Or=bo;class t7 extends Wo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Or.dereference(t,"string");try{r=Ft(r)}catch(s){return this._throwError(s.message,t)}return e.writeValue(r)}decode(e){return Ft(gl(e.readValue(),20))}}class n7 extends Wo{constructor(t){super(t.name,t.type,"_",t.dynamic);ie(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function h8(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let h={};r=e.map(d=>{const p=d.localName;return me(p,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:d},value:t}),me(!h[p],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:d},value:t}),h[p]=!0,t[p]})}else Q(!1,"invalid tuple value","tuple",t);Q(e.length===r.length,"types/value length mismatch","tuple",t);let s=new d_,i=new d_,o=[];e.forEach((h,d)=>{let p=r[d];if(h.dynamic){let g=i.length;h.encode(i,p);let y=s.writeUpdatableValue();o.push(b=>{y(b+g)})}else h.encode(s,p)}),o.forEach(h=>{h(s.length)});let l=n.appendWriter(s);return l+=n.appendWriter(i),l}function d8(n,e){let t=[],r=[],s=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let l=n.readIndex(),h=s.subReader(l);try{o=i.decode(h)}catch(d){if(gr(d,"BUFFER_OVERRUN"))throw d;o=d,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(l){if(gr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),r.push(i.localName||null)}),Wf.fromItems(t,r)}class r7 extends Wo{constructor(t,r,s){const i=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",i,s,o);ie(this,"coder");ie(this,"length");Xe(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(t);return r}encode(t,r){const s=Or.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,t.writeValue(s.length)),wU(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let l=0;l<s.length;l++)o.push(this.coder);return h8(t,o,s)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),me(r*qr<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*qr,length:t.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new n7(this.coder));return d8(t,s)}}class s7 extends Wo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=Or.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class f8 extends Wo{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=jr(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class i7 extends f8{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class a7 extends Wo{constructor(t,r){let s="bytes"+String(t);super(s,s,r,!1);ie(this,"size");Xe(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let s=jr(Or.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(s)}decode(t){return Oe(t.readBytes(this.size))}}const o7=new Uint8Array([]);class c7 extends Wo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(o7)}decode(e){return e.readBytes(0),null}}const l7=BigInt(0),u7=BigInt(1),h7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class d7 extends Wo{constructor(t,r,s){const i=(r?"int":"uint")+t*8;super(i,i,s,!1);ie(this,"size");ie(this,"signed");Xe(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let s=He(Or.dereference(r,this.type)),i=du(h7,qr*8);if(this.signed){let o=du(i,this.size*8-1);(s>o||s<-(o+u7))&&this._throwError("value out-of-bounds",r),s=vU(s,8*qr)}else(s<l7||s>du(i,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(s)}decode(t){let r=du(t.readValue(),this.size*8);return this.signed&&(r=Rb(r,this.size*8)),r}}class f7 extends f8{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Ba(Or.dereference(t,"string")))}decode(e){return Db(super.decode(e))}}class Rw extends Wo{constructor(t,r){let s=!1;const i=[];t.forEach(l=>{l.dynamic&&(s=!0),i.push(l.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ie(this,"coders");Xe(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(s=>{t.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[i]))}),Object.freeze(t)}encode(t,r){const s=Or.dereference(r,"tuple");return h8(t,this.coders,s)}decode(t){return d8(t,this.coders)}}function jA(n,e){return{address:Ft(n),storageKeys:e.map((t,r)=>(Q(sn(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function fh(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(Q(t.length===2,"invalid slot set",`value[${r}]`,t),jA(t[0],t[1])):(Q(t!=null&&typeof t=="object","invalid address-slot set","value",n),jA(t.address,t.storageKeys)));Q(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((s,i)=>(s[i]=!0,s),{});return jA(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function p8(n){return{address:Ft(n.address),nonce:He(n.nonce!=null?n.nonce:0),chainId:He(n.chainId!=null?n.chainId:0),signature:Kr.from(n.signature)}}function p7(n){let e;return typeof n=="string"?e=Om.computePublicKey(n,!1):e=n.publicKey,Ft(Un("0x"+e.substring(4)).substring(26))}function g7(n,e){return p7(Om.recoverPublicKey(n,e))}const Xn=BigInt(0),m7=BigInt(2),y7=BigInt(27),w7=BigInt(28),b7=BigInt(35),E7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),qA=4096*32;function v7(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return pt(n.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return pt(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return pt(n.blobToKZGCommitment(Oe(r)));Q(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return pt(n.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return pt(n.computeBlobKZGProof(Oe(r),Oe(s)));Q(!1,"unsupported KZG library","kzg",n)}}}function GO(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=gp(e).substring(4),"0x"+t}function mp(n){return n==="0x"?null:Ft(n)}function ME(n,e){try{return fh(n)}catch(t){Q(!1,t.message,e,n)}}function A7(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const s=n[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);t.push({address:mp(s[1]),nonce:en(s[2],"nonce"),chainId:en(s[0],"chainId"),signature:Kr.from({yParity:ph(s[3],"yParity"),r:Ho(s[4],32),s:Ho(s[5],32)})})}return t}catch(t){Q(!1,t.message,e,n)}}function ph(n,e){return n==="0x"?0:lt(n,e)}function en(n,e){if(n==="0x")return Xn;const t=He(n,e);return Q(t<=E7,"value exceeds uint size",e,t),t}function At(n,e){const t=He(n,"value"),r=zn(t);return Q(r.length<=32,"value too large",`tx.${e}`,t),r}function $E(n){return fh(n).map(e=>[e.address,e.storageKeys])}function C7(n){return n.map(e=>[At(e.chainId,"chainId"),e.address,At(e.nonce,"nonce"),At(e.signature.yParity,"yParity"),zn(e.signature.r),zn(e.signature.s)])}function _7(n,e){Q(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)Q(sn(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function S7(n){const e=z0(n);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:ph(e[0],"nonce"),gasPrice:en(e[1],"gasPrice"),gasLimit:en(e[2],"gasLimit"),to:mp(e[3]),value:en(e[4],"value"),data:Oe(e[5]),chainId:Xn};if(e.length===6)return t;const r=en(e[6],"v"),s=en(e[7],"r"),i=en(e[8],"s");if(s===Xn&&i===Xn)t.chainId=r;else{let o=(r-b7)/m7;o<Xn&&(o=Xn),t.chainId=o,Q(o!==Xn||r===y7||r===w7,"non-canonical legacy v","v",e[6]),t.signature=Kr.from({r:Ho(e[7],32),s:Ho(e[8],32),v:r})}return t}function N7(n,e){const t=[At(n.nonce,"nonce"),At(n.gasPrice||0,"gasPrice"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data];let r=Xn;if(n.chainId!=Xn)r=He(n.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Xn&&(t.push(zn(r)),t.push("0x"),t.push("0x")),ml(t);let s=BigInt(27+e.yParity);return r!==Xn?s=Kr.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(zn(s)),t.push(zn(e.r)),t.push(zn(e.s)),ml(t)}function FE(n,e){let t;try{if(t=ph(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=Ho(e[1],32),s=Ho(e[2],32),i=Kr.from({r,s,yParity:t});n.signature=i}function T7(n){const e=z0(pt(n).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(n));const t={type:2,chainId:en(e[0],"chainId"),nonce:ph(e[1],"nonce"),maxPriorityFeePerGas:en(e[2],"maxPriorityFeePerGas"),maxFeePerGas:en(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:en(e[4],"gasLimit"),to:mp(e[5]),value:en(e[6],"value"),data:Oe(e[7]),accessList:ME(e[8],"accessList")};return e.length===9||FE(t,e.slice(9)),t}function x7(n,e){const t=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,$E(n.accessList||[])];return e&&(t.push(At(e.yParity,"yParity")),t.push(zn(e.r)),t.push(zn(e.s))),_n(["0x02",ml(t)])}function I7(n){const e=z0(pt(n).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(n));const t={type:1,chainId:en(e[0],"chainId"),nonce:ph(e[1],"nonce"),gasPrice:en(e[2],"gasPrice"),gasLimit:en(e[3],"gasLimit"),to:mp(e[4]),value:en(e[5],"value"),data:Oe(e[6]),accessList:ME(e[7],"accessList")};return e.length===8||FE(t,e.slice(8)),t}function O7(n,e){const t=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.gasPrice||0,"gasPrice"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,$E(n.accessList||[])];return e&&(t.push(At(e.yParity,"recoveryParam")),t.push(zn(e.r)),t.push(zn(e.s))),_n(["0x01",ml(t)])}function R7(n){let e=z0(pt(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],l=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let h=0;h<e[1].length;h++)r.push({data:i[h],commitment:o[h],proof:l[h]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Oe(n));const s={type:3,chainId:en(e[0],"chainId"),nonce:ph(e[1],"nonce"),maxPriorityFeePerGas:en(e[2],"maxPriorityFeePerGas"),maxFeePerGas:en(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:en(e[4],"gasLimit"),to:mp(e[5]),value:en(e[6],"value"),data:Oe(e[7]),accessList:ME(e[8],"accessList"),maxFeePerBlobGas:en(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${t}`,"data",n),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(sn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||FE(s,e.slice(11)),s}function D7(n,e,t){const r=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||Im,At(n.value,"value"),n.data,$E(n.accessList||[]),At(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),_7(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(At(e.yParity,"yParity")),r.push(zn(e.r)),r.push(zn(e.s)),t)?_n(["0x03",ml([r,t.map(s=>s.data),t.map(s=>s.commitment),t.map(s=>s.proof)])]):_n(["0x03",ml(r)])}function P7(n){const e=z0(pt(n).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(n));const t={type:4,chainId:en(e[0],"chainId"),nonce:ph(e[1],"nonce"),maxPriorityFeePerGas:en(e[2],"maxPriorityFeePerGas"),maxFeePerGas:en(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:en(e[4],"gasLimit"),to:mp(e[5]),value:en(e[6],"value"),data:Oe(e[7]),accessList:ME(e[8],"accessList"),authorizationList:A7(e[9],"authorizationList")};return e.length===10||FE(t,e.slice(10)),t}function U7(n,e){const t=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,$E(n.accessList||[]),C7(n.authorizationList||[])];return e&&(t.push(At(e.yParity,"yParity")),t.push(zn(e.r)),t.push(zn(e.s))),_n(["0x04",ml(t)])}var Fi,mf,yf,wf,bf,Ef,vf,Af,Cf,_f,Sf,Nf,ku,Kc,va,Wc,Tf,xf,ub;const wa=class wa{constructor(){le(this,xf);le(this,Fi);le(this,mf);le(this,yf);le(this,wf);le(this,bf);le(this,Ef);le(this,vf);le(this,Af);le(this,Cf);le(this,_f);le(this,Sf);le(this,Nf);le(this,ku);le(this,Kc);le(this,va);le(this,Wc);le(this,Tf);H(this,Fi,null),H(this,mf,null),H(this,wf,0),H(this,bf,Xn),H(this,Ef,null),H(this,vf,null),H(this,Af,null),H(this,yf,"0x"),H(this,Cf,Xn),H(this,_f,Xn),H(this,Sf,null),H(this,Nf,null),H(this,ku,null),H(this,Kc,null),H(this,va,null),H(this,Wc,null),H(this,Tf,null)}get type(){return N(this,Fi)}set type(e){switch(e){case null:H(this,Fi,null);break;case 0:case"legacy":H(this,Fi,0);break;case 1:case"berlin":case"eip-2930":H(this,Fi,1);break;case 2:case"london":case"eip-1559":H(this,Fi,2);break;case 3:case"cancun":case"eip-4844":H(this,Fi,3);break;case 4:case"pectra":case"eip-7702":H(this,Fi,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=N(this,mf);return e==null&&this.type===3?Im:e}set to(e){H(this,mf,e==null?null:Ft(e))}get nonce(){return N(this,wf)}set nonce(e){H(this,wf,lt(e,"value"))}get gasLimit(){return N(this,bf)}set gasLimit(e){H(this,bf,He(e))}get gasPrice(){const e=N(this,Ef);return e==null&&(this.type===0||this.type===1)?Xn:e}set gasPrice(e){H(this,Ef,e==null?null:He(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=N(this,vf);return e??(this.type===2||this.type===3?Xn:null)}set maxPriorityFeePerGas(e){H(this,vf,e==null?null:He(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=N(this,Af);return e??(this.type===2||this.type===3?Xn:null)}set maxFeePerGas(e){H(this,Af,e==null?null:He(e,"maxFeePerGas"))}get data(){return N(this,yf)}set data(e){H(this,yf,Oe(e))}get value(){return N(this,Cf)}set value(e){H(this,Cf,He(e,"value"))}get chainId(){return N(this,_f)}set chainId(e){H(this,_f,He(e))}get signature(){return N(this,Sf)||null}set signature(e){H(this,Sf,e==null?null:Kr.from(e))}get accessList(){const e=N(this,Nf)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){H(this,Nf,e==null?null:fh(e))}get authorizationList(){const e=N(this,Tf)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){H(this,Tf,e==null?null:e.map(t=>p8(t)))}get maxFeePerBlobGas(){const e=N(this,ku);return e==null&&this.type===3?Xn:e}set maxFeePerBlobGas(e){H(this,ku,e==null?null:He(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=N(this,Kc);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Q(sn(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}H(this,Kc,e)}get blobs(){return N(this,Wc)==null?null:N(this,Wc).map(e=>Object.assign({},e))}set blobs(e){if(e==null){H(this,Wc,null);return}const t=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(W2(i)){me(N(this,va),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=pt(i);if(Q(o.length<=qA,"blob is too large",`blobs[${s}]`,i),o.length!==qA){const d=new Uint8Array(qA);d.set(o),o=d}const l=N(this,va).blobToKzgCommitment(o),h=Oe(N(this,va).computeBlobKzgProof(o,l));t.push({data:Oe(o),commitment:Oe(l),proof:h}),r.push(GO(1,l))}else{const o=Oe(i.commitment);t.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push(GO(1,o))}}H(this,Wc,t),H(this,Kc,r)}get kzg(){return N(this,va)}set kzg(e){e==null?H(this,va,null):H(this,va,v7(e))}get hash(){return this.signature==null?null:Un(be(this,xf,ub).call(this,!0,!1))}get unsignedHash(){return Un(this.unsignedSerialized)}get from(){return this.signature==null?null:g7(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Om.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return be(this,xf,ub).call(this,!0,!0)}get unsignedSerialized(){return be(this,xf,ub).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=N(this,ku)!=null||N(this,Kc);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return wa.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new wa;if(typeof e=="string"){const r=pt(e);if(r[0]>=127)return wa.from(S7(r));switch(r[0]){case 1:return wa.from(I7(r));case 2:return wa.from(T7(r));case 3:return wa.from(R7(r));case 4:return wa.from(P7(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new wa;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Kr.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Fi=new WeakMap,mf=new WeakMap,yf=new WeakMap,wf=new WeakMap,bf=new WeakMap,Ef=new WeakMap,vf=new WeakMap,Af=new WeakMap,Cf=new WeakMap,_f=new WeakMap,Sf=new WeakMap,Nf=new WeakMap,ku=new WeakMap,Kc=new WeakMap,va=new WeakMap,Wc=new WeakMap,Tf=new WeakMap,xf=new WeakSet,ub=function(e,t){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return N7(this,r);case 1:return O7(this,r);case 2:return x7(this,r);case 3:return D7(this,r,t?this.blobs:null);case 4:return U7(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let kb=wa;function Zu(n){return Un(Ba(n))}var k7="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const KO=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),WO=4;function B7(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),s=1,i=[0,1];for(let R=1;R<r;R++)i.push(s+=t());let o=t(),l=e;e+=o;let h=0,d=0;function p(){return h==0&&(d=d<<8|n[e++],h=8),d>>--h&1}const g=31,y=2**g,b=y>>>1,v=b>>1,E=y-1;let A=0;for(let R=0;R<g;R++)A=A<<1|p();let S=[],x=0,T=y;for(;;){let R=Math.floor(((A-x+1)*s-1)/T),P=0,F=r;for(;F-P>1;){let z=P+F>>>1;R<i[z]?F=z:P=z}if(P==0)break;S.push(P);let $=x+Math.floor(T*i[P]/s),B=x+Math.floor(T*i[P+1]/s)-1;for(;(($^B)&b)==0;)A=A<<1&E|p(),$=$<<1&E,B=B<<1&E|1;for(;$&~B&v;)A=A&b|A<<1&E>>>1|p(),$=$<<1^b,B=(B^b)<<1|b|1;x=$,T=1+B-$}let k=r-4;return S.map(R=>{switch(R-k){case 3:return k+65792+(n[l++]<<16|n[l++]<<8|n[l++]);case 2:return k+256+(n[l++]<<8|n[l++]);case 1:return k+n[l++];default:return R-1}})}function L7(n){let e=0;return()=>n[e++]}function g8(n){return L7(B7(M7(n)))}function M7(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let t=n.length,r=new Uint8Array(6*t>>3);for(let s=0,i=0,o=0,l=0;s<t;s++)l=l<<6|e[n.charCodeAt(s)],o+=6,o>=8&&(r[i++]=l>>(o-=8));return r}function $7(n){return n&1?~n>>1:n>>1}function F7(n,e){let t=Array(n);for(let r=0,s=0;r<n;r++)t[r]=s+=$7(e());return t}function Rm(n,e=0){let t=[];for(;;){let r=n(),s=n();if(!s)break;e+=r;for(let i=0;i<s;i++)t.push(e+i);e+=s+1}return t}function m8(n){return Dm(()=>{let e=Rm(n);if(e.length)return e})}function y8(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(H7(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(z7(t,n))}return e.flat()}function Dm(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function w8(n,e,t){let r=Array(n).fill().map(()=>[]);for(let s=0;s<e;s++)F7(n,t).forEach((i,o)=>r[o].push(i));return r}function H7(n,e){let t=1+e(),r=e(),s=Dm(e);return w8(s.length,1+n,e).flatMap((o,l)=>{let[h,...d]=o;return Array(s[l]).fill().map((p,g)=>{let y=g*r;return[h+g*t,d.map(b=>b+y)]})})}function z7(n,e){let t=1+e();return w8(t,1+n,e).map(s=>[s[0],s.slice(1)])}function j7(n){let e=[],t=Rm(n);return s(r([]),[]),e;function r(i){let o=n(),l=Dm(()=>{let h=Rm(n).map(d=>t[d]);if(h.length)return r(h)});return{S:o,B:l,Q:i}}function s({S:i,B:o},l,h){if(!(i&4&&h===l[l.length-1])){i&2&&(h=l[l.length-1]),i&1&&e.push(l);for(let d of o)for(let p of d.Q)s(d,[...l,p],h)}}}function q7(n){return n.toString(16).toUpperCase().padStart(2,"0")}function b8(n){return`{${q7(n)}}`}function V7(n){let e=[];for(let t=0,r=n.length;t<r;){let s=n.codePointAt(t);t+=s<65536?1:2,e.push(s)}return e}function Jf(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let s=0;s<t;)r.push(String.fromCodePoint(...n.slice(s,s+=4096)));return r.join("")}function G7(n,e){let t=n.length,r=t-e.length;for(let s=0;r==0&&s<t;s++)r=n[s]-e[s];return r}var K7="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Pm=44032,Bb=4352,Lb=4449,Mb=4519,E8=19,v8=21,ep=28,$b=v8*ep,W7=E8*$b,Y7=Pm+W7,Q7=Bb+E8,Z7=Lb+v8,X7=Mb+ep;function Xg(n){return n>>24&255}function A8(n){return n&16777215}let E_,YO,v_,hb;function J7(){let n=g8(K7);E_=new Map(m8(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),YO=new Set(Rm(n)),v_=new Map,hb=new Map;for(let[e,t]of y8(n)){if(!YO.has(e)&&t.length==2){let[r,s]=t,i=hb.get(r);i||(i=new Map,hb.set(r,i)),i.set(s,e)}v_.set(e,t.reverse())}}function C8(n){return n>=Pm&&n<Y7}function eF(n,e){if(n>=Bb&&n<Q7&&e>=Lb&&e<Z7)return Pm+(n-Bb)*$b+(e-Lb)*ep;if(C8(n)&&e>Mb&&e<X7&&(n-Pm)%ep==0)return n+(e-Mb);{let t=hb.get(n);return t&&(t=t.get(e),t)?t:-1}}function _8(n){E_||J7();let e=[],t=[],r=!1;function s(i){let o=E_.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(C8(i)){let o=i-Pm,l=o/$b|0,h=o%$b/ep|0,d=o%ep;s(Bb+l),s(Lb+h),d>0&&s(Mb+d)}else{let o=v_.get(i);o?t.push(...o):s(i)}if(!t.length)break;i=t.pop()}if(r&&e.length>1){let i=Xg(e[0]);for(let o=1;o<e.length;o++){let l=Xg(e[o]);if(l==0||i<=l){i=l;continue}let h=o-1;for(;;){let d=e[h+1];if(e[h+1]=e[h],e[h]=d,!h||(i=Xg(e[--h]),i<=l))break}i=Xg(e[o])}}return e}function tF(n){let e=[],t=[],r=-1,s=0;for(let i of n){let o=Xg(i),l=A8(i);if(r==-1)o==0?r=l:e.push(l);else if(s>0&&s>=o)o==0?(e.push(r,...t),t.length=0,r=l):t.push(l),s=o;else{let h=eF(r,l);h>=0?r=h:s==0&&o==0?(e.push(r),r=l):(t.push(l),s=o)}}return r>=0&&e.push(r,...t),e}function S8(n){return _8(n).map(A8)}function nF(n){return tF(_8(n))}const QO=45,N8=".",T8=65039,x8=1,Fb=n=>Array.from(n);function Um(n,e){return n.P.has(e)||n.Q.has(e)}class rF extends Array{get is_emoji(){return!0}}let A_,I8,pu,C_,O8,Qd,VA,Dd,tu,ZO,__;function rS(){if(A_)return;let n=g8(k7);const e=()=>Rm(n),t=()=>new Set(e()),r=(p,g)=>g.forEach(y=>p.add(y));A_=new Map(y8(n)),I8=t(),pu=e(),C_=new Set(e().map(p=>pu[p])),pu=new Set(pu),O8=t(),t();let s=m8(n),i=n();const o=()=>{let p=new Set;return e().forEach(g=>r(p,s[g])),r(p,e()),p};Qd=Dm(p=>{let g=Dm(n).map(y=>y+96);if(g.length){let y=p>=i;g[0]-=32,g=Jf(g),y&&(g=`Restricted[${g}]`);let b=o(),v=o(),E=!n();return{N:g,P:b,Q:v,M:E,R:y}}}),VA=t(),Dd=new Map;let l=e().concat(Fb(VA)).sort((p,g)=>p-g);l.forEach((p,g)=>{let y=n(),b=l[g]=y?l[g-y]:{V:[],M:new Map};b.V.push(p),VA.has(p)||Dd.set(p,b)});for(let{V:p,M:g}of new Set(Dd.values())){let y=[];for(let v of p){let E=Qd.filter(S=>Um(S,v)),A=y.find(({G:S})=>E.some(x=>S.has(x)));A||(A={G:new Set,V:[]},y.push(A)),A.V.push(v),r(A.G,E)}let b=y.flatMap(v=>Fb(v.G));for(let{G:v,V:E}of y){let A=new Set(b.filter(S=>!v.has(S)));for(let S of E)g.set(S,A)}}tu=new Set;let h=new Set;const d=p=>tu.has(p)?h.add(p):tu.add(p);for(let p of Qd){for(let g of p.P)d(g);for(let g of p.Q)d(g)}for(let p of tu)!Dd.has(p)&&!h.has(p)&&Dd.set(p,x8);r(tu,S8(tu)),ZO=j7(n).map(p=>rF.from(p)).sort(G7),__=new Map;for(let p of ZO){let g=[__];for(let y of p){let b=g.map(v=>{let E=v.get(y);return E||(E=new Map,v.set(y,E)),E});y===T8?g.push(...b):g=b}for(let y of g)y.V=p}}function sS(n){return(R8(n)?"":`${iS(HE([n]))} `)+b8(n)}function iS(n){return`"${n}"‎`}function sF(n){if(n.length>=4&&n[2]==QO&&n[3]==QO)throw new Error(`invalid label extension: "${Jf(n.slice(0,4))}"`)}function iF(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function aF(n){let e=n[0],t=KO.get(e);if(t)throw lm(`leading ${t}`);let r=n.length,s=-1;for(let i=1;i<r;i++){e=n[i];let o=KO.get(e);if(o){if(s==i)throw lm(`${t} + ${o}`);s=i+1,t=o}}if(s==r)throw lm(`trailing ${t}`)}function HE(n,e=1/0,t=b8){let r=[];oF(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let s=0,i=n.length;for(let o=0;o<i;o++){let l=n[o];R8(l)&&(r.push(Jf(n.slice(s,o))),r.push(t(l)),s=o+1)}return r.push(Jf(n.slice(s,i))),r.join("")}function oF(n){return rS(),pu.has(n)}function R8(n){return rS(),O8.has(n)}function cF(n){return dF(lF(n,nF,gF))}function lF(n,e,t){if(!n)return[];rS();let r=0;return n.split(N8).map(s=>{let i=V7(s),o={input:i,offset:r};r+=i.length+1;try{let l=o.tokens=pF(i,e,t),h=l.length,d;if(!h)throw new Error("empty label");let p=o.output=l.flat();if(iF(p),!(o.emoji=h>1||l[0].is_emoji)&&p.every(y=>y<128))sF(p),d="ASCII";else{let y=l.flatMap(b=>b.is_emoji?[]:b);if(!y.length)d="Emoji";else{if(pu.has(p[0]))throw lm("leading combining mark");for(let E=1;E<h;E++){let A=l[E];if(!A.is_emoji&&pu.has(A[0]))throw lm(`emoji + combining mark: "${Jf(l[E-1])} + ${HE([A[0]])}"`)}aF(p);let b=Fb(new Set(y)),[v]=hF(b);fF(v,y),uF(v,b),d=v.N}}o.type=d}catch(l){o.error=l}return o})}function uF(n,e){let t,r=[];for(let s of e){let i=Dd.get(s);if(i===x8)return;if(i){let o=i.M.get(s);if(t=t?t.filter(l=>o.has(l)):Fb(o),!t.length)return}else r.push(s)}if(t){for(let s of t)if(r.every(i=>Um(s,i)))throw new Error(`whole-script confusable: ${n.N}/${s.N}`)}}function hF(n){let e=Qd;for(let t of n){let r=e.filter(s=>Um(s,t));if(!r.length)throw Qd.some(s=>Um(s,t))?P8(e[0],t):D8(t);if(e=r,r.length==1)break}return e}function dF(n){return n.map(({input:e,error:t,output:r})=>{if(t){let s=t.message;throw new Error(n.length==1?s:`Invalid label ${iS(HE(e,63))}: ${s}`)}return Jf(r)}).join(N8)}function D8(n){return new Error(`disallowed character: ${sS(n)}`)}function P8(n,e){let t=sS(e),r=Qd.find(s=>s.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function lm(n){return new Error(`illegal placement: ${n}`)}function fF(n,e){for(let t of e)if(!Um(n,t))throw P8(n,t);if(n.M){let t=S8(e);for(let r=1,s=t.length;r<s;r++)if(C_.has(t[r])){let i=r+1;for(let o;i<s&&C_.has(o=t[i]);i++)for(let l=r;l<i;l++)if(t[l]==o)throw new Error(`duplicate non-spacing marks: ${sS(o)}`);if(i-r>WO)throw new Error(`excessive non-spacing marks: ${iS(HE(t.slice(r-1,i)))} (${i-r}/${WO})`);r=i}}}function pF(n,e,t){let r=[],s=[];for(n=n.slice().reverse();n.length;){let i=mF(n);if(i)s.length&&(r.push(e(s)),s=[]),r.push(t(i));else{let o=n.pop();if(tu.has(o))s.push(o);else{let l=A_.get(o);if(l)s.push(...l);else if(!I8.has(o))throw D8(o)}}}return s.length&&r.push(e(s)),r}function gF(n){return n.filter(e=>e!=T8)}function mF(n,e){let t=__,r,s=n.length;for(;s&&(t=t.get(n[--s]),!!t);){let{V:i}=t;i&&(r=i,n.length=s)}return r}const U8=new Uint8Array(32);U8.fill(0);function XO(n){return Q(n.length!==0,"invalid ENS name; empty component","comp",n),n}function k8(n){const e=Ba(yF(n)),t=[];if(n.length===0)return t;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(t.push(XO(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",n),t.push(XO(e.slice(r))),t}function yF(n){try{if(n.length===0)throw new Error("empty label");return cF(n)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",n)}}function S_(n){Q(typeof n=="string","invalid ENS name; not a string","name",n),Q(n.length,"invalid ENS name (empty label)","name",n);let e=U8;const t=k8(n);for(;t.length;)e=Un(_n([e,Un(t.pop())]));return Oe(e)}function wF(n,e){const t=e;return Q(t<=255,"DNS encoded label cannot exceed 255","length",t),Oe(_n(k8(n).map(r=>{Q(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const B8=new Uint8Array(32);B8.fill(0);const bF=BigInt(-1),L8=BigInt(0),M8=BigInt(1),EF=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function vF(n){const e=pt(n),t=e.length%32;return t?_n([e,B8.slice(t)]):Oe(e)}const AF=gl(M8,32),CF=gl(L8,32),JO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},GA=["name","version","chainId","verifyingContract","salt"];function e3(n){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const _F={name:e3("name"),version:e3("version"),chainId:function(n){const e=He(n,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):ji(e)},verifyingContract:function(n){try{return Ft(n).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=pt(n,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",n),Oe(e)}};function KA(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const s=du(EF,t?r-1:r),i=t?(s+M8)*bF:L8;return function(o){const l=He(o,"value");return Q(l>=i&&l<=s,`value out-of-bounds for ${n}`,"value",l),gl(t?vU(l,256):l,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Q(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const s=pt(r);return Q(s.length===t,`invalid length for ${n}`,"value",r),vF(r)}}}switch(n){case"address":return function(e){return Ho(Ft(e),32)};case"bool":return function(e){return e?AF:CF};case"bytes":return function(e){return Un(e)};case"string":return function(e){return Zu(e)}}return null}function t3(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function Dw(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var O0,No,If,AE,$8;const ui=class ui{constructor(e){le(this,AE);ie(this,"primaryType");le(this,O0);le(this,No);le(this,If);H(this,No,new Map),H(this,If,new Map);const t=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(h=>{i[h]=e[h].map(({name:d,type:p})=>{let{base:g,index:y}=Dw(p);return g==="int"&&!e.int&&(g="int256"),g==="uint"&&!e.uint&&(g="uint256"),{name:d,type:g+(y||"")}}),t.set(h,new Set),r.set(h,[]),s.set(h,new Set)}),H(this,O0,JSON.stringify(i));for(const h in i){const d=new Set;for(const p of i[h]){Q(!d.has(p.name),`duplicate variable name ${JSON.stringify(p.name)} in ${JSON.stringify(h)}`,"types",e),d.add(p.name);const g=Dw(p.type).base;Q(g!==h,`circular type reference to ${JSON.stringify(g)}`,"types",e),!KA(g)&&(Q(r.has(g),`unknown type ${JSON.stringify(g)}`,"types",e),r.get(g).push(h),t.get(h).add(g))}}const o=Array.from(r.keys()).filter(h=>r.get(h).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(h=>JSON.stringify(h)).join(", ")}`,"types",e),Xe(this,{primaryType:o[0]});function l(h,d){Q(!d.has(h),`circular type reference to ${JSON.stringify(h)}`,"types",e),d.add(h);for(const p of t.get(h))if(r.has(p)){l(p,d);for(const g of d)s.get(g).add(p)}d.delete(h)}l(this.primaryType,new Set);for(const[h,d]of s){const p=Array.from(d);p.sort(),N(this,No).set(h,t3(h,i[h])+p.map(g=>t3(g,i[g])).join(""))}}get types(){return JSON.parse(N(this,O0))}getEncoder(e){let t=N(this,If).get(e);return t||(t=be(this,AE,$8).call(this,e),N(this,If).set(e,t)),t}encodeType(e){const t=N(this,No).get(e);return Q(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Un(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(KA(e))return r(e,t);const s=Dw(e).array;if(s)return Q(s.count===-1||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:l,type:h})=>(o[l]=this._visit(h,t[l],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ui(e)}static getPrimaryType(e){return ui.from(e).primaryType}static hashStruct(e,t,r){return ui.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const s=JO[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:s})}return t.sort((r,s)=>GA.indexOf(r.name)-GA.indexOf(s.name)),ui.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return _n(["0x1901",ui.hashDomain(e),ui.from(t).hash(r)])}static hash(e,t,r){return Un(ui.encode(e,t,r))}static async resolveNames(e,t,r,s){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const i={};e.verifyingContract&&!sn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ui.from(t);o.visit(r,(l,h)=>(l==="address"&&!sn(h,20)&&(i[h]="0x"),h));for(const l in i)i[l]=await s(l);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(l,h)=>l==="address"&&i[h]?i[h]:h),{domain:e,value:r}}static getPayload(e,t,r){ui.hashDomain(e);const s={},i=[];GA.forEach(h=>{const d=e[h];d!=null&&(s[h]=_F[h](d),i.push({name:h,type:JO[h]}))});const o=ui.from(t);t=o.types;const l=Object.assign({},t);return Q(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=i,o.encode(r),{types:l,domain:s,primaryType:o.primaryType,message:o.visit(r,(h,d)=>{if(h.match(/^bytes(\d*)/))return Oe(pt(d));if(h.match(/^u?int/))return He(d).toString();switch(h){case"address":return d.toLowerCase();case"bool":return!!d;case"string":return Q(typeof d=="string","invalid string","value",d),d}Q(!1,"unsupported type","type",h)})}}};O0=new WeakMap,No=new WeakMap,If=new WeakMap,AE=new WeakSet,$8=function(e){{const s=KA(e);if(s)return s}const t=Dw(e).array;if(t){const s=t.prefix,i=this.getEncoder(s);return o=>{Q(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let l=o.map(i);return N(this,No).has(s)&&(l=l.map(Un)),Un(_n(l))}}const r=this.types[e];if(r){const s=Zu(N(this,No).get(e));return i=>{const o=r.map(({name:l,type:h})=>{const d=this.getEncoder(h)(i[l]);return N(this,No).has(h)?Un(d):d});return o.unshift(s),_n(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let Hb=ui;function Gr(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const SF="external public payable override",NF=Gr(SF.split(" ")),F8="constant external internal payable private public pure view override",TF=Gr(F8.split(" ")),H8="constructor error event fallback function receive struct",z8=Gr(H8.split(" ")),j8="calldata memory storage payable indexed",xF=Gr(j8.split(" ")),IF="tuple returns",OF=[H8,j8,IF,F8].join(" "),RF=Gr(OF.split(" ")),DF={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},PF=new RegExp("^(\\s*)"),UF=new RegExp("^([0-9]+)"),kF=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),q8=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),V8=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var dr,Hi,R0,N_;const CE=class CE{constructor(e){le(this,R0);le(this,dr);le(this,Hi);H(this,dr,0),H(this,Hi,e.slice())}get offset(){return N(this,dr)}get length(){return N(this,Hi).length-N(this,dr)}clone(){return new CE(N(this,Hi))}reset(){H(this,dr,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=be(this,R0,N_).call(this,N(this,dr)+1,e.match+1);return H(this,dr,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;N(this,dr)<e.match-1;){const r=this.peek().linkNext;t.push(be(this,R0,N_).call(this,N(this,dr)+1,r)),H(this,dr,r)}return H(this,dr,e.match+1),t}peek(){if(N(this,dr)>=N(this,Hi).length)throw new Error("out-of-bounds");return N(this,Hi)[N(this,dr)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Sg(this,dr)._++,e}toString(){const e=[];for(let t=N(this,dr);t<N(this,Hi).length;t++){const r=N(this,Hi)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};dr=new WeakMap,Hi=new WeakMap,R0=new WeakSet,N_=function(e=0,t=0){return new CE(N(this,Hi).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Zi=CE;function Cl(n){const e=[],t=o=>{const l=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${l} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<n.length;){let o=n.substring(i),l=o.match(PF);l&&(i+=l[1].length,o=n.substring(i));const h={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(h);let d=DF[o[0]]||"";if(d){if(h.type=d,h.text=o[0],i++,d==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(d=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),h.match=r.pop(),e[h.match].match=e.length-1,h.depth--,h.linkBack=s.pop(),e[h.linkBack].linkNext=e.length-1;else if(d==="COMMA")h.linkBack=s.pop(),e[h.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(d==="OPEN_BRACKET")h.type="BRACKET";else if(d==="CLOSE_BRACKET"){let p=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const g=e.pop().text;p=g+p,e[e.length-1].value=lt(g)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=p}continue}if(l=o.match(kF),l){if(h.text=l[1],i+=h.text.length,RF.has(h.text)){h.type="KEYWORD";continue}if(h.text.match(V8)){h.type="TYPE";continue}h.type="ID";continue}if(l=o.match(UF),l){h.text=l[1],h.type="NUMBER",i+=h.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Zi(e.map(o=>Object.freeze(o)))}function n3(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function zE(n,e){if(e.peekKeyword(z8)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function jo(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function G8(n){let e=jo(n,TF);return n3(e,Gr("constant payable nonpayable".split(" "))),n3(e,Gr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Lo(n,e){return n.popParams().map(t=>mr.from(t,e))}function K8(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return He(n.pop().text);throw new Error("invalid gas")}return null}function Xu(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const BF=new RegExp(/^(.*)\[([0-9]*)\]$/);function r3(n){const e=n.match(V8);if(Q(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);Q(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);Q(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const bn={},vs=Symbol.for("_ethers_internal"),s3="_ParamTypeInternal",i3="_ErrorInternal",a3="_EventInternal",o3="_ConstructorInternal",c3="_FallbackInternal",l3="_FunctionInternal",u3="_StructInternal";var Of,db;const hi=class hi{constructor(e,t,r,s,i,o,l,h){le(this,Of);ie(this,"name");ie(this,"type");ie(this,"baseType");ie(this,"indexed");ie(this,"components");ie(this,"arrayLength");ie(this,"arrayChildren");if(H0(e,bn,"ParamType"),Object.defineProperty(this,vs,{value:s3}),o&&(o=Object.freeze(o.slice())),s==="array"){if(l==null||h==null)throw new Error("")}else if(l!=null||h!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Xe(this,{name:t,type:r,baseType:s,indexed:i,components:o,arrayLength:l,arrayChildren:h})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],s=[e];return be(this,Of,db).call(this,r,e,t,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,t){if(hi.isParamType(e))return e;if(typeof e=="string")try{return hi.from(Cl(e),t)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Zi){let l="",h="",d=null;jo(e,Gr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(h="tuple",d=e.popParams().map(E=>hi.from(E)),l=`tuple(${d.map(E=>E.format()).join(",")})`):(l=r3(e.popType("TYPE")),h=l);let p=null,g=null;for(;e.length&&e.peekType("BRACKET");){const E=e.pop();p=new hi(bn,"",l,h,null,d,g,p),g=E.value,l+=E.text,h="array",d=null}let y=null;if(jo(e,xF).has("indexed")){if(!t)throw new Error("");y=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new hi(bn,v,l,h,y,d,g,p)}const r=e.name;Q(!r||typeof r=="string"&&r.match(q8),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(BF);if(o){const l=parseInt(o[2]||"-1"),h=hi.from({type:o[1],components:e.components});return new hi(bn,r||"",i,"array",s,null,l,h)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const l=e.components!=null?e.components.map(d=>hi.from(d)):null;return new hi(bn,r||"",i,"tuple",s,l,null,null)}return i=r3(e.type),new hi(bn,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[vs]===s3}};Of=new WeakSet,db=function(e,t,r,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,l=t.slice();l.forEach((h,d)=>{var p;be(p=o,Of,db).call(p,e,h,r,g=>{l[d]=g})}),s(l);return}if(this.isTuple()){const o=this.components;let l;if(Array.isArray(t))l=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");l=o.map(h=>{if(!h.name)throw new Error("cannot use object value with unnamed components");if(!(h.name in t))throw new Error(`missing value for component ${h.name}`);return t[h.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((h,d)=>{var p;be(p=o[d],Of,db).call(p,e,h,r,g=>{l[d]=g})}),s(l);return}const i=r(this.type,t);i.then?e.push(async function(){s(await i)}()):s(i)};let mr=hi;class Ju{constructor(e,t,r){ie(this,"type");ie(this,"inputs");H0(e,bn,"Fragment"),r=Object.freeze(r.slice()),Xe(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{Ju.from(JSON.parse(e))}catch{}return Ju.from(Cl(e))}if(e instanceof Zi)switch(e.peekKeyword(z8)){case"constructor":return Uo.from(e);case"error":return ys.from(e);case"event":return Ra.from(e);case"fallback":case"receive":return Eo.from(e);case"function":return Da.from(e);case"struct":return Vu.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Uo.from(e);case"error":return ys.from(e);case"event":return Ra.from(e);case"fallback":case"receive":return Eo.from(e);case"function":return Da.from(e);case"struct":return Vu.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Uo.isFragment(e)}static isError(e){return ys.isFragment(e)}static isEvent(e){return Ra.isFragment(e)}static isFunction(e){return Da.isFragment(e)}static isStruct(e){return Vu.isFragment(e)}}class jE extends Ju{constructor(t,r,s,i){super(t,r,i);ie(this,"name");Q(typeof s=="string"&&s.match(q8),"invalid identifier","name",s),i=Object.freeze(i.slice()),Xe(this,{name:s})}}function km(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class ys extends jE{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,vs,{value:i3})}get selector(){return Zu(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+km(e,this.inputs)),t.join(" ")}static from(e){if(ys.isFragment(e))return e;if(typeof e=="string")return ys.from(Cl(e));if(e instanceof Zi){const t=zE("error",e),r=Lo(e);return Xu(e),new ys(bn,t,r)}return new ys(bn,e.name,e.inputs?e.inputs.map(mr.from):[])}static isFragment(e){return e&&e[vs]===i3}}class Ra extends jE{constructor(t,r,s,i){super(t,"event",r,s);ie(this,"anonymous");Object.defineProperty(this,vs,{value:a3}),Xe(this,{anonymous:i})}get topicHash(){return Zu(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+km(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(i=>mr.from(i)),new Ra(bn,t,r,!1).topicHash}static from(t){if(Ra.isFragment(t))return t;if(typeof t=="string")try{return Ra.from(Cl(t))}catch{Q(!1,"invalid event fragment","obj",t)}else if(t instanceof Zi){const r=zE("event",t),s=Lo(t,!0),i=!!jo(t,Gr(["anonymous"])).has("anonymous");return Xu(t),new Ra(bn,r,s,i)}return new Ra(bn,t.name,t.inputs?t.inputs.map(r=>mr.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[vs]===a3}}class Uo extends Ju{constructor(t,r,s,i,o){super(t,r,s);ie(this,"payable");ie(this,"gas");Object.defineProperty(this,vs,{value:o3}),Xe(this,{payable:i,gas:o})}format(t){if(me(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const r=[`constructor${km(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Uo.isFragment(t))return t;if(typeof t=="string")try{return Uo.from(Cl(t))}catch{Q(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Zi){jo(t,Gr(["constructor"]));const r=Lo(t),s=!!jo(t,NF).has("payable"),i=K8(t);return Xu(t),new Uo(bn,"constructor",r,s,i)}return new Uo(bn,"constructor",t.inputs?t.inputs.map(mr.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[vs]===o3}}class Eo extends Ju{constructor(t,r,s){super(t,"fallback",r);ie(this,"payable");Object.defineProperty(this,vs,{value:c3}),Xe(this,{payable:s})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(t){if(Eo.isFragment(t))return t;if(typeof t=="string")try{return Eo.from(Cl(t))}catch{Q(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Zi){const r=t.toString(),s=t.peekKeyword(Gr(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),t.popKeyword(Gr(["fallback","receive"]))==="receive"){const h=Lo(t);return Q(h.length===0,"receive cannot have arguments","obj.inputs",h),jo(t,Gr(["payable"])),Xu(t),new Eo(bn,[],!0)}let o=Lo(t);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(h=>h.format("minimal")).join(", ")):o=[mr.from("bytes")];const l=G8(t);if(Q(l==="nonpayable"||l==="payable","fallback cannot be constants","obj.stateMutability",l),jo(t,Gr(["returns"])).has("returns")){const h=Lo(t);Q(h.length===1&&h[0].type==="bytes","invalid fallback outputs","obj.outputs",h.map(d=>d.format("minimal")).join(", "))}return Xu(t),new Eo(bn,o,l==="payable")}if(t.type==="receive")return new Eo(bn,[],!0);if(t.type==="fallback"){const r=[mr.from("bytes")],s=t.stateMutability==="payable";return new Eo(bn,r,s)}Q(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[vs]===c3}}class Da extends jE{constructor(t,r,s,i,o,l){super(t,"function",r,i);ie(this,"constant");ie(this,"outputs");ie(this,"stateMutability");ie(this,"payable");ie(this,"gas");Object.defineProperty(this,vs,{value:l3}),o=Object.freeze(o.slice()),Xe(this,{constant:s==="view"||s==="pure",gas:l,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Zu(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t))),outputs:this.outputs.map(s=>JSON.parse(s.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+km(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(km(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(i=>mr.from(i)),new Da(bn,t,"view",r,[],null).selector}static from(t){if(Da.isFragment(t))return t;if(typeof t=="string")try{return Da.from(Cl(t))}catch{Q(!1,"invalid function fragment","obj",t)}else if(t instanceof Zi){const s=zE("function",t),i=Lo(t),o=G8(t);let l=[];jo(t,Gr(["returns"])).has("returns")&&(l=Lo(t));const h=K8(t);return Xu(t),new Da(bn,s,o,i,l,h)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new Da(bn,t.name,r,t.inputs?t.inputs.map(mr.from):[],t.outputs?t.outputs.map(mr.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[vs]===l3}}class Vu extends jE{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,vs,{value:u3})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Vu.from(Cl(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Zi){const t=zE("struct",e),r=Lo(e);return Xu(e),new Vu(bn,t,r)}return new Vu(bn,e.name,e.inputs?e.inputs.map(mr.from):[])}static isFragment(e){return e&&e[vs]===u3}}const Ji=new Map;Ji.set(0,"GENERIC_PANIC");Ji.set(1,"ASSERT_FALSE");Ji.set(17,"OVERFLOW");Ji.set(18,"DIVIDE_BY_ZERO");Ji.set(33,"ENUM_RANGE_ERROR");Ji.set(34,"BAD_STORAGE_DATA");Ji.set(49,"STACK_UNDERFLOW");Ji.set(50,"ARRAY_RANGE_ERROR");Ji.set(65,"OUT_OF_MEMORY");Ji.set(81,"UNINITIALIZED_FUNCTION_CALL");const LF=new RegExp(/^bytes([0-9]*)$/),MF=new RegExp(/^(u?int)([0-9]*)$/);let WA=null,h3=1024;function $F(n,e,t,r){let s="missing revert data",i=null;const o=null;let l=null;if(t){s="execution reverted";const d=pt(t);if(t=Oe(t),d.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(d.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(d.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],d.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(d.slice(0,4))==="0x4e487b71")try{const p=Number(r.decode(["uint256"],d.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[p]},i=`Panic due to ${Ji.get(p)||"UNKNOWN"}(${p})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const h={to:e.to?Ft(e.to):null,data:e.data||"0x"};return e.from&&(h.from=Ft(e.from)),pn(s,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:h,invocation:o,revert:l})}var Yc,Pd;const _E=class _E{constructor(){le(this,Yc)}getDefaultValue(e){const t=e.map(s=>be(this,Yc,Pd).call(this,mr.from(s)));return new Rw(t,"_").defaultValue()}encode(e,t){wU(t.length,e.length,"types/values length mismatch");const r=e.map(o=>be(this,Yc,Pd).call(this,mr.from(o))),s=new Rw(r,"_"),i=new d_;return s.encode(i,t),i.data}decode(e,t,r){const s=e.map(o=>be(this,Yc,Pd).call(this,mr.from(o)));return new Rw(s,"_").decode(new f_(t,r,h3))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),h3=e}static defaultAbiCoder(){return WA==null&&(WA=new _E),WA}static getBuiltinCallException(e,t,r){return $F(e,t,r,_E.defaultAbiCoder())}};Yc=new WeakSet,Pd=function(e){if(e.isArray())return new r7(be(this,Yc,Pd).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Rw(e.components.map(r=>be(this,Yc,Pd).call(this,r)),e.name);switch(e.baseType){case"address":return new t7(e.name);case"bool":return new s7(e.name);case"string":return new f7(e.name);case"bytes":return new i7(e.name);case"":return new c7(e.name)}let t=e.type.match(MF);if(t){let r=parseInt(t[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new d7(r/8,t[1]==="int",e.name)}if(t=e.type.match(LF),t){let r=parseInt(t[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new a7(r,e.name)}Q(!1,"invalid type","type",e.type)};let Bm=_E;class FF{constructor(e,t,r){ie(this,"fragment");ie(this,"name");ie(this,"signature");ie(this,"topic");ie(this,"args");const s=e.name,i=e.format();Xe(this,{fragment:e,name:s,signature:i,topic:t,args:r})}}class HF{constructor(e,t,r,s){ie(this,"fragment");ie(this,"name");ie(this,"args");ie(this,"signature");ie(this,"selector");ie(this,"value");const i=e.name,o=e.format();Xe(this,{fragment:e,name:i,args:r,signature:o,selector:t,value:s})}}class zF{constructor(e,t,r){ie(this,"fragment");ie(this,"name");ie(this,"args");ie(this,"signature");ie(this,"selector");const s=e.name,i=e.format();Xe(this,{fragment:e,name:s,args:r,signature:i,selector:t})}}class d3{constructor(e){ie(this,"hash");ie(this,"_isIndexed");Xe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const f3={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},p3={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&f3[n.toString()]&&(e=f3[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var Aa,Ca,_a,Tr,Ha,fb,pb;const uu=class uu{constructor(e){le(this,Ha);ie(this,"fragments");ie(this,"deploy");ie(this,"fallback");ie(this,"receive");le(this,Aa);le(this,Ca);le(this,_a);le(this,Tr);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,H(this,_a,new Map),H(this,Aa,new Map),H(this,Ca,new Map);const r=[];for(const o of t)try{r.push(Ju.from(o))}catch(l){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,l.message)}Xe(this,{fragments:Object.freeze(r)});let s=null,i=!1;H(this,Tr,this.getAbiCoder()),this.fragments.forEach((o,l)=>{let h;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Xe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${l}]`,o),s=o,i=s.payable);return;case"function":h=N(this,_a);break;case"event":h=N(this,Ca);break;case"error":h=N(this,Aa);break;default:return}const d=o.format();h.has(d)||h.set(d,o)}),this.deploy||Xe(this,{deploy:Uo.from("constructor()")}),Xe(this,{fallback:s,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(s=>s.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Bm.defaultAbiCoder()}getFunctionName(e){const t=be(this,Ha,fb).call(this,e,null,!1);return Q(t,"no matching function","key",e),t.name}hasFunction(e){return!!be(this,Ha,fb).call(this,e,null,!1)}getFunction(e,t){return be(this,Ha,fb).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(N(this,_a).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(N(this,_a).get(s),r)}}getEventName(e){const t=be(this,Ha,pb).call(this,e,null,!1);return Q(t,"no matching event","key",e),t.name}hasEvent(e){return!!be(this,Ha,pb).call(this,e,null,!1)}getEvent(e,t){return be(this,Ha,pb).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(N(this,Ca).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(N(this,Ca).get(s),r)}}getError(e,t){if(sn(e)){const s=e.toLowerCase();if(p3[s])return ys.from(p3[s].signature);for(const i of N(this,Aa).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of N(this,Aa))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?ys.from("error Error(string)"):e==="Panic"?ys.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=ys.from(e).format(),e==="Error(string)")return ys.from("error Error(string)");if(e==="Panic(uint256)")return ys.from("error Panic(uint256)");const r=N(this,Aa).get(e);return r||null}forEachError(e){const t=Array.from(N(this,Aa).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(N(this,Aa).get(s),r)}}_decodeParams(e,t){return N(this,Tr).decode(e,t)}_encodeParams(e,t){return N(this,Tr).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(Cn(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Cn(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return _n([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(Cn(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Cn(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return _n([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=jr(t);if(s.length%32===0)try{return N(this,Tr).decode(e.outputs,s)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=pt(e,"data"),s=Bm.getBuiltinCallException("call",t,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const l=Oe(r.slice(0,4)),h=this.getError(l);if(h)try{const d=N(this,Tr).decode(h.inputs,r.slice(4));s.revert={name:h.name,signature:h.format(),args:d},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Oe(N(this,Tr).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}me(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Zu(o):i.type==="bytes"?Un(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=gl(o):i.type.match(/^bytes/)?o=r9(o,32):i.type==="address"&&N(this,Tr).encode(["address"],[o]),Ho(Oe(o),32));for(t.forEach((i,o)=>{const l=e.inputs[o];if(!l.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,i);return}i==null?r.push(null):l.baseType==="array"||l.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+l.name,i):Array.isArray(i)?r.push(i.map(h=>s(l,h))):r.push(s(l,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,l)=>{const h=t[l];if(o.indexed)if(o.type==="string")r.push(Zu(h));else if(o.type==="bytes")r.push(Un(h));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(N(this,Tr).encode([o.type],[h]))}else s.push(o),i.push(h)}),{data:N(this,Tr).encode(s,i),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const b=this.getEvent(e);Q(b,"unknown event","eventFragment",e),e=b}if(r!=null&&!e.anonymous){const b=e.topicHash;Q(sn(r[0],32)&&r[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((b,v)=>{b.indexed?b.type==="string"||b.type==="bytes"||b.baseType==="tuple"||b.baseType==="array"?(s.push(mr.from({type:"bytes32",name:b.name})),o.push(!0)):(s.push(b),o.push(!1)):(i.push(b),o.push(!1))});const l=r!=null?N(this,Tr).decode(s,_n(r)):null,h=N(this,Tr).decode(i,t,!0),d=[],p=[];let g=0,y=0;return e.inputs.forEach((b,v)=>{let E=null;if(b.indexed)if(l==null)E=new d3(null);else if(o[v])E=new d3(l[y++]);else try{E=l[y++]}catch(A){E=A}else try{E=h[g++]}catch(A){E=A}d.push(E),p.push(b.name||null)}),Wf.fromItems(d,p)}parseTransaction(e){const t=pt(e.data,"tx.data"),r=He(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(t.slice(0,4)));if(!s)return null;const i=N(this,Tr).decode(s.inputs,t.slice(4));return new HF(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new FF(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Oe(e),r=this.getError(Cn(t,0,4));if(!r)return null;const s=N(this,Tr).decode(r.inputs,Cn(t,4));return new zF(r,r.selector,s)}static from(e){return e instanceof uu?e:typeof e=="string"?new uu(JSON.parse(e)):typeof e.formatJson=="function"?new uu(e.formatJson()):typeof e.format=="function"?new uu(e.format("json")):new uu(e)}};Aa=new WeakMap,Ca=new WeakMap,_a=new WeakMap,Tr=new WeakMap,Ha=new WeakSet,fb=function(e,t,r){if(sn(e)){const i=e.toLowerCase();for(const o of N(this,_a).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of N(this,_a))o.split("(")[0]===e&&i.push(l);if(t){const o=t.length>0?t[t.length-1]:null;let l=t.length,h=!0;Or.isTyped(o)&&o.type==="overrides"&&(h=!1,l--);for(let d=i.length-1;d>=0;d--){const p=i[d].inputs.length;p!==l&&(!h||p!==l-1)&&i.splice(d,1)}for(let d=i.length-1;d>=0;d--){const p=i[d].inputs;for(let g=0;g<t.length;g++)if(Or.isTyped(t[g])){if(g>=p.length){if(t[g].type==="overrides")continue;i.splice(d,1);break}if(t[g].type!==p[g].baseType){i.splice(d,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(l=>JSON.stringify(l.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=N(this,_a).get(Da.from(e).format());return s||null},pb=function(e,t,r){if(sn(e)){const i=e.toLowerCase();for(const o of N(this,Ca).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of N(this,Ca))o.split("(")[0]===e&&i.push(l);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const l=i[o].inputs;for(let h=0;h<t.length;h++)if(Or.isTyped(t[h])&&t[h].type!==l[h].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(l=>JSON.stringify(l.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=N(this,Ca).get(Ra.from(e).format());return s||null};let zb=uu;const W8=BigInt(0);function Zd(n){return n??null}function Tn(n){return n==null?null:n.toString()}class g3{constructor(e,t,r){ie(this,"gasPrice");ie(this,"maxFeePerGas");ie(this,"maxPriorityFeePerGas");Xe(this,{gasPrice:Zd(e),maxFeePerGas:Zd(t),maxPriorityFeePerGas:Zd(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Tn(e),maxFeePerGas:Tn(t),maxPriorityFeePerGas:Tn(r)}}}function jb(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Oe(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of t)!(s in n)||n[s]==null||(e[s]=He(n[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in n)||n[s]==null||(e[s]=lt(n[s],`request.${s}`));return n.accessList&&(e.accessList=fh(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>W2(s)?Oe(s):Object.assign({},s))),e}var To;class jF{constructor(e,t){ie(this,"provider");ie(this,"number");ie(this,"hash");ie(this,"timestamp");ie(this,"parentHash");ie(this,"parentBeaconBlockRoot");ie(this,"nonce");ie(this,"difficulty");ie(this,"gasLimit");ie(this,"gasUsed");ie(this,"stateRoot");ie(this,"receiptsRoot");ie(this,"blobGasUsed");ie(this,"excessBlobGas");ie(this,"miner");ie(this,"prevRandao");ie(this,"extraData");ie(this,"baseFeePerGas");le(this,To);H(this,To,e.transactions.map(r=>typeof r!="string"?new Lm(r,t):r)),Xe(this,{provider:t,hash:Zd(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Zd(e.prevRandao),extraData:e.extraData,baseFeePerGas:Zd(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return N(this,To).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=N(this,To).slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:l,prevRandao:h,nonce:d,number:p,parentHash:g,parentBeaconBlockRoot:y,stateRoot:b,receiptsRoot:v,timestamp:E,transactions:A}=this;return{_type:"Block",baseFeePerGas:Tn(e),difficulty:Tn(t),extraData:r,gasLimit:Tn(s),gasUsed:Tn(i),blobGasUsed:Tn(this.blobGasUsed),excessBlobGas:Tn(this.excessBlobGas),hash:o,miner:l,prevRandao:h,nonce:d,number:p,parentHash:g,timestamp:E,parentBeaconBlockRoot:y,stateRoot:b,receiptsRoot:v,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return N(this,To).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=N(this,To)[e];else{const r=e.toLowerCase();for(const s of N(this,To))if(typeof s=="string"){if(s!==r)continue;t=s;break}else{if(s.hash!==r)continue;t=s;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return qF(this)}}To=new WeakMap;class q0{constructor(e,t){ie(this,"provider");ie(this,"transactionHash");ie(this,"blockHash");ie(this,"blockNumber");ie(this,"removed");ie(this,"address");ie(this,"data");ie(this,"topics");ie(this,"index");ie(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());Xe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:s,index:i,removed:o,topics:l,transactionHash:h,transactionIndex:d}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:s,index:i,removed:o,topics:l,transactionHash:h,transactionIndex:d}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return VF(this)}}var D0;class Y8{constructor(e,t){ie(this,"provider");ie(this,"to");ie(this,"from");ie(this,"contractAddress");ie(this,"hash");ie(this,"index");ie(this,"blockHash");ie(this,"blockNumber");ie(this,"logsBloom");ie(this,"gasUsed");ie(this,"blobGasUsed");ie(this,"cumulativeGasUsed");ie(this,"gasPrice");ie(this,"blobGasPrice");ie(this,"type");ie(this,"status");ie(this,"root");le(this,D0);H(this,D0,Object.freeze(e.logs.map(s=>new q0(s,t))));let r=W8;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Xe(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return N(this,D0)}toJSON(){const{to:e,from:t,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:l,logsBloom:h,logs:d,status:p,root:g}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:l,contractAddress:r,cumulativeGasUsed:Tn(this.cumulativeGasUsed),from:t,gasPrice:Tn(this.gasPrice),blobGasUsed:Tn(this.blobGasUsed),blobGasPrice:Tn(this.blobGasPrice),gasUsed:Tn(this.gasUsed),hash:s,index:i,logs:d,logsBloom:h,root:g,status:p,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Z8(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Q8(this,e)}}D0=new WeakMap;var Qc;const aN=class aN{constructor(e,t){ie(this,"provider");ie(this,"blockNumber");ie(this,"blockHash");ie(this,"index");ie(this,"hash");ie(this,"type");ie(this,"to");ie(this,"from");ie(this,"nonce");ie(this,"gasLimit");ie(this,"gasPrice");ie(this,"maxPriorityFeePerGas");ie(this,"maxFeePerGas");ie(this,"maxFeePerBlobGas");ie(this,"data");ie(this,"value");ie(this,"chainId");ie(this,"signature");ie(this,"accessList");ie(this,"blobVersionedHashes");ie(this,"authorizationList");le(this,Qc);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,H(this,Qc,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:s,type:i,to:o,from:l,nonce:h,data:d,signature:p,accessList:g,blobVersionedHashes:y}=this;return{_type:"TransactionResponse",accessList:g,blockNumber:e,blockHash:t,blobVersionedHashes:y,chainId:Tn(this.chainId),data:d,from:l,gasLimit:Tn(this.gasLimit),gasPrice:Tn(this.gasPrice),hash:s,maxFeePerGas:Tn(this.maxFeePerGas),maxPriorityFeePerGas:Tn(this.maxPriorityFeePerGas),maxFeePerBlobGas:Tn(this.maxFeePerBlobGas),nonce:h,signature:p,to:o,index:r,type:i,value:Tn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await Hr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,s=t??0;let i=N(this,Qc),o=-1,l=i===-1;const h=async()=>{if(l)return null;const{blockNumber:y,nonce:b}=await Hr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){i=y;return}if(l)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=i-3,o<N(this,Qc)&&(o=N(this,Qc)));o<=y;){if(l)return null;const E=await this.provider.getBlock(o,!0);if(E==null)return;for(const A of E)if(A===this.hash)return;for(let A=0;A<E.length;A++){const S=await E.getTransaction(A);if(S.from===this.from&&S.nonce===this.nonce){if(l)return null;const x=await this.provider.getTransactionReceipt(S.hash);if(x==null||y-x.blockNumber+1<r)return;let T="replaced";S.data===this.data&&S.to===this.to&&S.value===this.value?T="repriced":S.data==="0x"&&S.from===S.to&&S.value===W8&&(T="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:S.replaceableTransaction(i),hash:S.hash,receipt:x})}}o++}},d=y=>{if(y==null||y.status!==0)return y;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:y.to,from:y.from,data:""},receipt:y})},p=await this.provider.getTransactionReceipt(this.hash);if(r===0)return d(p);if(p){if(r===1||await p.confirmations()>=r)return d(p)}else if(await h(),r===0)return null;return await new Promise((y,b)=>{const v=[],E=()=>{v.forEach(S=>S())};if(v.push(()=>{l=!0}),s>0){const S=setTimeout(()=>{E(),b(pn("wait for transaction timeout","TIMEOUT"))},s);v.push(()=>{clearTimeout(S)})}const A=async S=>{if(await S.confirmations()>=r){E();try{y(d(S))}catch(x){b(x)}}};if(v.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const S=async()=>{try{await h()}catch(x){if(gr(x,"TRANSACTION_REPLACED")){E(),b(x);return}}l||this.provider.once("block",S)};v.push(()=>{this.provider.off("block",S)}),this.provider.once("block",S)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Z8(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Q8(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new aN(this,this.provider);return H(t,Qc,e),t}};Qc=new WeakMap;let Lm=aN;function qF(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function Q8(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function Z8(n){return{orphan:"drop-transaction",tx:n}}function VF(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class aS extends q0{constructor(t,r,s){super(t,t.provider);ie(this,"interface");ie(this,"fragment");ie(this,"args");const i=r.decodeEventLog(s,t.data,t.topics);Xe(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class X8 extends q0{constructor(t,r){super(t,t.provider);ie(this,"error");Xe(this,{error:r})}}var Rf;class GF extends Y8{constructor(t,r,s){super(s,r);le(this,Rf);H(this,Rf,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?N(this,Rf).getEvent(t.topics[0]):null;if(r)try{return new aS(t,N(this,Rf),r)}catch(s){return new X8(t,s)}return t})}}Rf=new WeakMap;var P0;class oS extends Lm{constructor(t,r,s){super(s,r);le(this,P0);H(this,P0,t)}async wait(t,r){const s=await super.wait(t,r);return s==null?null:new GF(N(this,P0),this.provider,s)}}P0=new WeakMap;class J8 extends AU{constructor(t,r,s,i){super(t,r,s);ie(this,"log");Xe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class KF extends J8{constructor(e,t,r,s,i){super(e,t,r,new aS(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Xe(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const m3=BigInt(0);function e5(n){return n&&typeof n.call=="function"}function t5(n){return n&&typeof n.estimateGas=="function"}function qE(n){return n&&typeof n.resolveName=="function"}function n5(n){return n&&typeof n.sendTransaction=="function"}function r5(n){if(n!=null){if(qE(n))return n;if(n.provider)return n.provider}}var U0;class WF{constructor(e,t,r){le(this,U0);ie(this,"fragment");if(Xe(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const s=eh(e.runner,"resolveName"),i=qE(s)?s:null;H(this,U0,async function(){const o=await Promise.all(t.inputs.map((l,h)=>r[h]==null?null:l.walkAsync(r[h],(p,g)=>p==="address"?Array.isArray(g)?Promise.all(g.map(y=>Vr(y,i))):Vr(g,i):g)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return N(this,U0)}}U0=new WeakMap;function eh(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function gu(n){return n==null?null:n.provider||null}async function s5(n,e){const t=Or.dereference(n,"overrides");Q(typeof t=="object","invalid overrides parameter","overrides",n);const r=jb(t);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function YF(n,e,t){const r=eh(n,"resolveName"),s=qE(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(l,h)=>(h=Or.dereference(h,l),l==="address"?Vr(h,s):h))))}function QF(n){const e=async function(o){const l=await s5(o,["data"]);l.to=await n.getAddress(),l.from&&(l.from=await Vr(l.from,r5(n.runner)));const h=n.interface,d=He(l.value||m3,"overrides.value")===m3,p=(l.data||"0x")==="0x";h.fallback&&!h.fallback.payable&&h.receive&&!p&&!d&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(h.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data);const g=h.receive||h.fallback&&h.fallback.payable;return Q(g||d,"cannot send value to non-payable fallback","overrides.value",l.value),Q(h.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data),l},t=async function(o){const l=eh(n.runner,"call");me(e5(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await e(o);try{return await l.call(h)}catch(d){throw K2(d)&&d.data?n.interface.makeError(d.data,h):d}},r=async function(o){const l=n.runner;me(n5(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await l.sendTransaction(await e(o)),d=gu(n.runner);return new oS(n.interface,d,h)},s=async function(o){const l=eh(n.runner,"estimateGas");return me(t5(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(o))},i=async o=>await r(o);return Xe(i,{_contract:n,estimateGas:s,populateTransaction:e,send:r,staticCall:t}),i}function ZF(n,e){const t=function(...d){const p=n.interface.getFunction(e,d);return me(p,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:d}}),p},r=async function(...d){const p=t(...d);let g={};if(p.inputs.length+1===d.length&&(g=await s5(d.pop()),g.from&&(g.from=await Vr(g.from,r5(n.runner)))),p.inputs.length!==d.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const y=await YF(n.runner,p.inputs,d);return Object.assign({},g,await Hr({to:n.getAddress(),data:n.interface.encodeFunctionData(p,y)}))},s=async function(...d){const p=await l(...d);return p.length===1?p[0]:p},i=async function(...d){const p=n.runner;me(n5(p),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const g=await p.sendTransaction(await r(...d)),y=gu(n.runner);return new oS(n.interface,y,g)},o=async function(...d){const p=eh(n.runner,"estimateGas");return me(t5(p),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await p.estimateGas(await r(...d))},l=async function(...d){const p=eh(n.runner,"call");me(e5(p),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const g=await r(...d);let y="0x";try{y=await p.call(g)}catch(v){throw K2(v)&&v.data?n.interface.makeError(v.data,g):v}const b=t(...d);return n.interface.decodeFunctionResult(b,y)},h=async(...d)=>t(...d).constant?await s(...d):await i(...d);return Xe(h,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:l}),Object.defineProperty(h,"fragment",{configurable:!1,enumerable:!0,get:()=>{const d=n.interface.getFunction(e);return me(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),d}}),h}function XF(n,e){const t=function(...s){const i=n.interface.getEvent(e,s);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new WF(n,t(...s),s)};return Xe(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=n.interface.getEvent(e);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const qb=Symbol.for("_ethersInternal_contract"),i5=new WeakMap;function JF(n,e){i5.set(n[qb],e)}function ks(n){return i5.get(n[qb])}function eH(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function cS(n,e){let t,r=null;if(Array.isArray(e)){const i=function(o){if(sn(o,32))return o;const l=n.interface.getEvent(o);return Q(l,"unknown fragment","name",o),l.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?sn(e,32)?t=[e]:(r=n.interface.getEvent(e),Q(r,"unknown fragment","event",e),t=[r.topicHash]):eH(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):Q(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(l=>l.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:t}}async function Jg(n,e){const{subs:t}=ks(n);return t.get((await cS(n,e)).tag)||null}async function y3(n,e,t){const r=gu(n.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await cS(n,t),{addr:l,subs:h}=ks(n);let d=h.get(i);if(!d){const g={address:l||n,topics:o},y=A=>{let S=s;if(S==null)try{S=n.interface.getEvent(A.topics[0])}catch{}if(S){const x=S,T=s?n.interface.decodeEventLog(s,A.data,A.topics):[];x_(n,t,T,k=>new KF(n,k,t,x,A))}else x_(n,t,[],x=>new J8(n,x,t,A))};let b=[];d={tag:i,listeners:[],start:()=>{b.length||b.push(r.on(g,y))},stop:async()=>{if(b.length==0)return;let A=b;b=[],await Promise.all(A),r.off(g,y)}},h.set(i,d)}return d}let T_=Promise.resolve();async function tH(n,e,t,r){await T_;const s=await Jg(n,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:l})=>{const h=Array.from(t);r&&h.push(r(l?null:o));try{o.call(n,...h)}catch{}return!l}),s.listeners.length===0&&(s.stop(),ks(n).subs.delete(s.tag)),i>0}async function x_(n,e,t,r){try{await T_}catch{}const s=tH(n,e,t,r);return T_=s,await s}const Pw=["then"];var gU;gU=qb;const Tm=class Tm{constructor(e,t,r,s){ie(this,"target");ie(this,"interface");ie(this,"runner");ie(this,"filters");ie(this,gU);ie(this,"fallback");Q(typeof e=="string"||u8(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=zb.from(t);Xe(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,qb,{value:{}});let o,l=null,h=null;if(s){const g=gu(r);h=new oS(this.interface,g,s)}let d=new Map;if(typeof e=="string")if(sn(e))l=e,o=Promise.resolve(e);else{const g=eh(r,"resolveName");if(!qE(g))throw pn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=g.resolveName(e).then(y=>{if(y==null)throw pn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ks(this).addr=y,y})}else o=e.getAddress().then(g=>{if(g==null)throw new Error("TODO");return ks(this).addr=g,g});JF(this,{addrPromise:o,addr:l,deployTx:h,subs:d});const p=new Proxy({},{get:(g,y,b)=>{if(typeof y=="symbol"||Pw.indexOf(y)>=0)return Reflect.get(g,y,b);try{return this.getEvent(y)}catch(v){if(!gr(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,y)=>Pw.indexOf(y)>=0?Reflect.has(g,y):Reflect.has(g,y)||this.interface.hasEvent(String(y))});return Xe(this,{filters:p}),Xe(this,{fallback:i.receive||i.fallback?QF(this):null}),new Proxy(this,{get:(g,y,b)=>{if(typeof y=="symbol"||y in g||Pw.indexOf(y)>=0)return Reflect.get(g,y,b);try{return g.getFunction(y)}catch(v){if(!gr(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,y)=>typeof y=="symbol"||y in g||Pw.indexOf(y)>=0?Reflect.has(g,y):g.interface.hasFunction(y)})}connect(e){return new Tm(this.target,this.interface,e)}attach(e){return new Tm(e,this.interface,this.runner)}async getAddress(){return await ks(this).addrPromise}async getDeployedCode(){const e=gu(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=gu(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(l){i(l)}};o()})}deploymentTransaction(){return ks(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),ZF(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),XF(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=ks(this),o=s||await i,{fragment:l,topics:h}=await cS(this,e),d={address:o,topics:h,fromBlock:t,toBlock:r},p=gu(this.runner);return me(p,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await p.getLogs(d)).map(g=>{let y=l;if(y==null)try{y=this.interface.getEvent(g.topics[0])}catch{}if(y)try{return new aS(g,this.interface,y)}catch(b){return new X8(g,b)}return new q0(g,p)})}async on(e,t){const r=await y3(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await y3(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await x_(this,e,t,null)}async listenerCount(e){if(e){const s=await Jg(this,e);return s?s.listeners.length:0}const{subs:t}=ks(this);let r=0;for(const{listeners:s}of t.values())r+=s.length;return r}async listeners(e){if(e){const s=await Jg(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:t}=ks(this);let r=[];for(const{listeners:s}of t.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,t){const r=await Jg(this,e);if(!r)return this;if(t){const s=r.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(t==null||r.listeners.length===0)&&(r.stop(),ks(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await Jg(this,e);if(!t)return this;t.stop(),ks(this).subs.delete(t.tag)}else{const{subs:t}=ks(this);for(const{tag:r,stop:s}of t.values())s(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Tm{constructor(s,i=null){super(s,e,i)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let I_=Tm;function nH(){return I_}class Gu extends nH(){}function YA(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Q(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class rH{constructor(e){ie(this,"name");Xe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const a5=new RegExp("^(ipfs)://(.*)$","i"),w3=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),a5,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Zc,Bu,Xc,Ud,SE,o5;const Gd=class Gd{constructor(e,t,r){le(this,Xc);ie(this,"provider");ie(this,"address");ie(this,"name");le(this,Zc);le(this,Bu);Xe(this,{provider:e,address:t,name:r}),H(this,Zc,null),H(this,Bu,new Gu(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return N(this,Zc)==null&&H(this,Zc,(async()=>{try{return await N(this,Bu).supportsInterface("0x9061b923")}catch(e){if(gr(e,"CALL_EXCEPTION"))return!1;throw H(this,Zc,null),e}})()),await N(this,Zc)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await be(this,Xc,Ud).call(this,"addr(bytes32)");return i==null||i===Im?null:i}catch(i){if(gr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await be(this,Xc,Ud).call(this,"addr(bytes32,uint)",[i]);if(sn(o,20))return Ft(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof rH&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const r=await be(this,Xc,Ud).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await t.decodeAddress(e,r);if(s!=null)return s;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await be(this,Xc,Ud).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await be(this,Xc,Ud).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const s=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${s}://${i9("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<w3.length;r++){const s=t.match(w3[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=YA(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const h=(s[2]||"").split("/");if(h.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const d=h[1],p=new Gu(h[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const E=await p.ownerOf(d);if(l!==E)return e.push({type:"!owner",value:E}),{url:null,linkage:e};e.push({type:"owner",value:E})}else if(i==="erc1155"){const E=await p.balanceOf(l,d);if(!E)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:E.toString()})}let g=await p[o](d);if(g==null||g==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:g}),i==="erc1155"&&(g=g.replace("{id}",gl(d,32).substring(2)),e.push({type:"metadata-url-expanded",value:g})),g.match(/^ipfs:/i)&&(g=YA(g)),e.push({type:"metadata-url",value:g});let y={};const b=await new zo(g).send();b.assertOk();try{y=b.bodyJson}catch{try{e.push({type:"!metadata",value:b.bodyText})}catch{const S=b.body;return S&&e.push({type:"!metadata",value:Oe(S)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!y)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(y)});let v=y.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(a5)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=YA(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var s;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const i=await be(s=Gd,SE,o5).call(s,e,r);if(i!=null){const o=new Gd(e,i,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Zc=new WeakMap,Bu=new WeakMap,Xc=new WeakSet,Ud=async function(e,t){t=(t||[]).slice();const r=N(this,Bu).interface;t.unshift(S_(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),me(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[wF(this.name,255),r.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await N(this,Bu)[e](...t);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!gr(i,"CALL_EXCEPTION"))throw i}return null},SE=new WeakSet,o5=async function(e,t){const r=await Gd.getEnsAddress(e);try{const i=await new Gu(r,["function resolver(bytes32) view returns (address)"],e).resolver(S_(t),{enableCcipRead:!0});return i===Im?null:i}catch(s){throw s}return null},le(Gd,SE);let Vb=Gd;const b3=BigInt(0);function vt(n,e){return function(t){return t==null?e:n(t)}}function Mm(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function V0(n,e){return t=>{const r={};for(const s in n){let i=s;if(e&&s in e&&!(i in t)){for(const o of e[s])if(o in t){i=o;break}}try{const o=n[s](t[i]);o!==void 0&&(r[s]=o)}catch(o){const l=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${s} (${l})`,"BAD_DATA",{value:t})}}return r}}function sH(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function tp(n){return Q(sn(n,!0),"invalid data","value",n),n}function pr(n){return Q(sn(n,32),"invalid hash","value",n),n}const iH=V0({address:Ft,blockHash:pr,blockNumber:lt,data:tp,index:lt,removed:vt(sH,!1),topics:Mm(pr),transactionHash:pr,transactionIndex:lt},{index:["logIndex"]});function aH(n){return iH(n)}const oH=V0({hash:vt(pr),parentHash:pr,parentBeaconBlockRoot:vt(pr,null),number:lt,timestamp:lt,nonce:vt(tp),difficulty:He,gasLimit:He,gasUsed:He,stateRoot:vt(pr,null),receiptsRoot:vt(pr,null),blobGasUsed:vt(He,null),excessBlobGas:vt(He,null),miner:vt(Ft),prevRandao:vt(pr,null),extraData:tp,baseFeePerGas:vt(He)},{prevRandao:["mixHash"]});function cH(n){const e=oH(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:c5(t)),e}const lH=V0({transactionIndex:lt,blockNumber:lt,transactionHash:pr,address:Ft,topics:Mm(pr),data:tp,index:lt,blockHash:pr},{index:["logIndex"]});function uH(n){return lH(n)}const hH=V0({to:vt(Ft,null),from:vt(Ft,null),contractAddress:vt(Ft,null),index:lt,root:vt(Oe),gasUsed:He,blobGasUsed:vt(He,null),logsBloom:vt(tp),blockHash:pr,hash:pr,logs:Mm(uH),blockNumber:lt,cumulativeGasUsed:He,effectiveGasPrice:vt(He),blobGasPrice:vt(He,null),status:vt(lt),type:vt(lt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function dH(n){return hH(n)}function c5(n){n.to&&He(n.to)===b3&&(n.to="0x0000000000000000000000000000000000000000");const e=V0({hash:pr,index:vt(lt,void 0),type:t=>t==="0x"||t==null?0:lt(t),accessList:vt(fh,null),blobVersionedHashes:vt(Mm(pr,!0),null),authorizationList:vt(Mm(t=>{let r;if(t.signature)r=t.signature;else{let s=t.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},t,{yParity:s})}return{address:Ft(t.address),chainId:He(t.chainId),nonce:He(t.nonce),signature:Kr.from(r)}},!1),null),blockHash:vt(pr,null),blockNumber:vt(lt,null),transactionIndex:vt(lt,null),from:Ft,gasPrice:vt(He),maxPriorityFeePerGas:vt(He),maxFeePerGas:vt(He),maxFeePerBlobGas:vt(He,null),gasLimit:He,to:vt(Ft,null),value:He,nonce:lt,data:tp,creates:vt(Ft,null),chainId:vt(He,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=e7(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Kr.from(n.signature):e.signature=Kr.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&He(e.blockHash)===b3&&(e.blockHash=null),e}const fH="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class G0{constructor(e){ie(this,"name");Xe(this,{name:e})}clone(){return new G0(this.name)}}class VE extends G0{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);ie(this,"effectiveBlock");ie(this,"txBase");ie(this,"txCreate");ie(this,"txDataZero");ie(this,"txDataNonzero");ie(this,"txAccessListStorageKey");ie(this,"txAccessListAddress");const s={effectiveBlock:t};function i(o,l){let h=(r||{})[o];h==null&&(h=l),Q(typeof h=="number",`invalud value for ${o}`,"costs",r),s[o]=h}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Xe(this,s)}clone(){return new VE(this.effectiveBlock,this)}}class GE extends G0{constructor(t,r){super("org.ethers.plugins.network.Ens");ie(this,"address");ie(this,"targetNetwork");Xe(this,{address:t||fH,targetNetwork:r??1})}clone(){return new GE(this.address,this.targetNetwork)}}var k0,B0;class pH extends G0{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");le(this,k0);le(this,B0);H(this,k0,t),H(this,B0,r)}get url(){return N(this,k0)}get processFunc(){return N(this,B0)}clone(){return this}}k0=new WeakMap,B0=new WeakMap;const QA=new Map;var Df,Pf,Jc;const Kd=class Kd{constructor(e,t){le(this,Df);le(this,Pf);le(this,Jc);H(this,Df,e),H(this,Pf,He(t)),H(this,Jc,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return N(this,Df)}set name(e){H(this,Df,e)}get chainId(){return N(this,Pf)}set chainId(e){H(this,Pf,He(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===He(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===He(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===He(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(N(this,Jc).values())}attachPlugin(e){if(N(this,Jc).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return N(this,Jc).set(e.name,e.clone()),this}getPlugin(e){return N(this,Jc).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Kd(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new VE;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const s=fh(e.accessList);for(const i in s)r+=t.txAccessListAddress+t.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(gH(),e==null)return Kd.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=QA.get(e);if(t)return t();if(typeof e=="bigint")return new Kd("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Kd(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new GE(e.ensAddress,e.ensNetwork)),t}Q(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=QA.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),QA.set(e,t)}};Df=new WeakMap,Pf=new WeakMap,Jc=new WeakMap;let Ua=Kd;function E3(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function v3(n){return new pH(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const l=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:E3(l.maxFee,9),maxPriorityFeePerGas:E3(l.maxPriorityFee,9)}}catch(i){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let A3=!1;function gH(){if(A3)return;A3=!0;function n(e,t,r){const s=function(){const i=new Ua(e,t);return r.ensNetwork!=null&&i.attachPlugin(new GE(null,r.ensNetwork)),i.attachPlugin(new VE),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ua.register(e,s),Ua.register(t,s),r.altNames&&r.altNames.forEach(i=>{Ua.register(i,s)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[v3("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[v3("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function O_(n){return JSON.parse(JSON.stringify(n))}var xo,di,el,Sa,Uf,gb;class mH{constructor(e){le(this,Uf);le(this,xo);le(this,di);le(this,el);le(this,Sa);H(this,xo,e),H(this,di,null),H(this,el,4e3),H(this,Sa,-2)}get pollingInterval(){return N(this,el)}set pollingInterval(e){H(this,el,e)}start(){N(this,di)||(H(this,di,N(this,xo)._setTimeout(be(this,Uf,gb).bind(this),N(this,el))),be(this,Uf,gb).call(this))}stop(){N(this,di)&&(N(this,xo)._clearTimeout(N(this,di)),H(this,di,null))}pause(e){this.stop(),e&&H(this,Sa,-2)}resume(){this.start()}}xo=new WeakMap,di=new WeakMap,el=new WeakMap,Sa=new WeakMap,Uf=new WeakSet,gb=async function(){try{const e=await N(this,xo).getBlockNumber();if(N(this,Sa)===-2){H(this,Sa,e);return}if(e!==N(this,Sa)){for(let t=N(this,Sa)+1;t<=e;t++){if(N(this,di)==null)return;await N(this,xo).emit("block",t)}H(this,Sa,e)}}catch{}N(this,di)!=null&&H(this,di,N(this,xo)._setTimeout(be(this,Uf,gb).bind(this),N(this,el)))};var Lu,Mu,tl;class lS{constructor(e){le(this,Lu);le(this,Mu);le(this,tl);H(this,Lu,e),H(this,tl,!1),H(this,Mu,t=>{this._poll(t,N(this,Lu))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){N(this,tl)||(H(this,tl,!0),N(this,Mu).call(this,-2),N(this,Lu).on("block",N(this,Mu)))}stop(){N(this,tl)&&(H(this,tl,!1),N(this,Lu).off("block",N(this,Mu)))}pause(e){this.stop()}resume(){this.start()}}Lu=new WeakMap,Mu=new WeakMap,tl=new WeakMap;var kf,Io;class yH extends lS{constructor(t,r){super(t);le(this,kf);le(this,Io);H(this,kf,r),H(this,Io,-2)}pause(t){t&&H(this,Io,-2),super.pause(t)}async _poll(t,r){const s=await r.getBlock(N(this,kf));s!=null&&(N(this,Io)===-2?H(this,Io,s.number):s.number>N(this,Io)&&(r.emit(N(this,kf),s.number),H(this,Io,s.number)))}}kf=new WeakMap,Io=new WeakMap;var NE;class wH extends lS{constructor(t,r){super(t);le(this,NE);H(this,NE,O_(r))}async _poll(t,r){throw new Error("@TODO")}}NE=new WeakMap;var Bf;class bH extends lS{constructor(t,r){super(t);le(this,Bf);H(this,Bf,r)}async _poll(t,r){const s=await r.getTransactionReceipt(N(this,Bf));s&&r.emit(N(this,Bf),s)}}Bf=new WeakMap;var Oo,Lf,Mf,nl,fi,TE,l5;class uS{constructor(e,t){le(this,TE);le(this,Oo);le(this,Lf);le(this,Mf);le(this,nl);le(this,fi);H(this,Oo,e),H(this,Lf,O_(t)),H(this,Mf,be(this,TE,l5).bind(this)),H(this,nl,!1),H(this,fi,-2)}start(){N(this,nl)||(H(this,nl,!0),N(this,fi)===-2&&N(this,Oo).getBlockNumber().then(e=>{H(this,fi,e)}),N(this,Oo).on("block",N(this,Mf)))}stop(){N(this,nl)&&(H(this,nl,!1),N(this,Oo).off("block",N(this,Mf)))}pause(e){this.stop(),e&&H(this,fi,-2)}resume(){this.start()}}Oo=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,nl=new WeakMap,fi=new WeakMap,TE=new WeakSet,l5=async function(e){if(N(this,fi)===-2)return;const t=O_(N(this,Lf));t.fromBlock=N(this,fi)+1,t.toBlock=e;const r=await N(this,Oo).getLogs(t);if(r.length===0){N(this,fi)<e-60&&H(this,fi,e-60);return}for(const s of r)N(this,Oo).emit(N(this,Lf),s),H(this,fi,s.blockNumber)};const EH=BigInt(2),vH=10;function Uw(n){return n&&typeof n.then=="function"}function mb(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class u5{constructor(e){ie(this,"name");Xe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function AH(n){return JSON.parse(JSON.stringify(n))}function R_(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function ZA(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(sn(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:mb("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:mb("orphan",t),filter:AH(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(s=>s==null?null:Array.isArray(s)?R_(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(t.address){const s=[],i=[],o=l=>{sn(l)?s.push(l):i.push((async()=>{s.push(await Vr(l,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),r.address=R_(s.map(l=>l.toLowerCase()))}return{filter:r,tag:mb("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",n)}function XA(){return new Date().getTime()}const CH={cacheTimeout:250,pollingInterval:4e3};var xr,rl,Ir,$f,$s,$u,sl,Ro,L0,pi,Ff,Hf,mt,Ps,D_,P_,em,U_,tm,yb;class _H{constructor(e,t){le(this,mt);le(this,xr);le(this,rl);le(this,Ir);le(this,$f);le(this,$s);le(this,$u);le(this,sl);le(this,Ro);le(this,L0);le(this,pi);le(this,Ff);le(this,Hf);if(H(this,Hf,Object.assign({},CH,t||{})),e==="any")H(this,$u,!0),H(this,$s,null);else if(e){const r=Ua.from(e);H(this,$u,!1),H(this,$s,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else H(this,$u,!1),H(this,$s,null);H(this,Ro,-1),H(this,sl,new Map),H(this,xr,new Map),H(this,rl,new Map),H(this,Ir,null),H(this,$f,!1),H(this,L0,1),H(this,pi,new Map),H(this,Ff,!1)}get pollingInterval(){return N(this,Hf).pollingInterval}get provider(){return this}get plugins(){return Array.from(N(this,rl).values())}attachPlugin(e){if(N(this,rl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return N(this,rl).set(e.name,e.connect(this)),this}getPlugin(e){return N(this,rl).get(e)||null}get disableCcipRead(){return N(this,Ff)}set disableCcipRead(e){H(this,Ff,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let l=0;l<r.length;l++){const h=r[l],d=h.replace("{sender}",s).replace("{data}",i),p=new zo(d);h.indexOf("{data}")===-1&&(p.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:p,index:l,urls:r});let g="unknown error",y;try{y=await p.send()}catch(b){o.push(b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:{error:b}});continue}try{const b=y.bodyJson;if(b.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:p,result:b}),b.data;b.message&&(g=b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:b})}catch{}me(y.statusCode<400||y.statusCode>=500,`response not found during CCIP fetch: ${g}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:h,errorMessage:g}}),o.push(g)}me(!1,`error encountered during CCIP fetch: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new jF(cH(e),this)}_wrapLog(e,t){return new q0(aH(e),this)}_wrapTransactionReceipt(e,t){return new Y8(dH(e),this)}_wrapTransactionResponse(e,t){return new Lm(c5(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=lt(await be(this,mt,Ps).call(this,{method:"getBlockNumber"}),"%response");return N(this,Ro)>=0&&H(this,Ro,e),e}_getAddress(e){return Vr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(sn(e))return sn(e,32)?e:ji(e);if(typeof e=="bigint"&&(e=lt(e,"blockTag")),typeof e=="number")return e>=0?ji(e):N(this,Ro)>=0?ji(N(this,Ro)+e):this.getBlockNumber().then(t=>ji(t+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(h=>h==null?null:Array.isArray(h)?R_(h.map(d=>d.toLowerCase())):h.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(h,d,p)=>{let g;switch(h.length){case 0:break;case 1:g=h[0];break;default:h.sort(),g=h}if(r&&(d!=null||p!=null))throw new Error("invalid filter");const y={};return g&&(y.address=g),t.length&&(y.topics=t),d&&(y.fromBlock=d),p&&(y.toBlock=p),r&&(y.blockHash=r),y};let i=[];if(e.address)if(Array.isArray(e.address))for(const h of e.address)i.push(this._getAddress(h));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),i.filter(h=>typeof h!="string").length||o!=null&&typeof o!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(i),o,l]).then(h=>s(h[0],h[1],h[2])):s(i,o,l)}_getTransactionRequest(e){const t=jb(e),r=[];if(["to","from"].forEach(s=>{if(t[s]==null)return;const i=Vr(t[s],this);Uw(i)?r.push(async function(){t[s]=await i}()):t[s]=i}),t.blockTag!=null){const s=this._getBlockTag(t.blockTag);Uw(s)?r.push(async function(){t.blockTag=await s}()):t.blockTag=s}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(N(this,$s)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw N(this,$s)===s&&H(this,$s,null),i}})();return H(this,$s,s),(await s).clone()}const e=N(this,$s),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(N(this,$u)?(this.emit("network",r,t),N(this,$s)===e&&H(this,$s,Promise.resolve(r))):me(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Hr({_block:be(this,mt,U_).call(this,"latest",!1),gasPrice:(async()=>{try{const p=await be(this,mt,Ps).call(this,{method:"getGasPrice"});return He(p,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const p=await be(this,mt,Ps).call(this,{method:"getPriorityFee"});return He(p,"%response")}catch{}return null})()});let l=null,h=null;const d=this._wrapBlock(s,e);return d&&d.baseFeePerGas&&(h=o??BigInt("1000000000"),l=d.baseFeePerGas*EH+h),new g3(i,l,h)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new zo(r.url),i=await r.processFunc(t,this,s);return new g3(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Uw(t)&&(t=await t),He(await be(this,mt,Ps).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await Hr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await be(this,mt,P_).call(this,be(this,mt,D_).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return He(await be(this,mt,em).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return lt(await be(this,mt,em).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Oe(await be(this,mt,em).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const s=He(t,"position");return Oe(await be(this,mt,em).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:s}=await Hr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=kb.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:s}=await Hr({network:this.getNetwork(),params:be(this,mt,U_).call(this,e,!!t)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:t,params:r}=await Hr({network:this.getNetwork(),params:be(this,mt,Ps).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await Hr({network:this.getNetwork(),params:be(this,mt,Ps).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await be(this,mt,Ps).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await Hr({network:this.getNetwork(),result:be(this,mt,Ps).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Oe(t)}async getLogs(e){let t=this._getFilter(e);Uw(t)&&(t=await t);const{network:r,params:s}=await Hr({network:this.getNetwork(),params:be(this,mt,Ps).call(this,{method:"getLogs",filter:t})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Vb.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=Ft(e);const t=S_(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Vb.getEnsAddress(this),i=await new Gu(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===Im)return null;const l=await new Gu(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(l)!==e?null:l}catch(r){if(gr(r,"BAD_DATA")&&r.value==="0x"||gr(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const s=t??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let l=null;const h=async d=>{try{const p=await this.getTransactionReceipt(e);if(p!=null&&d-p.blockNumber+1>=s){i(p),l&&(clearTimeout(l),l=null);return}}catch(p){console.log("EEE",p)}this.once("block",h)};r!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",h),o(pn("timeout","TIMEOUT",{reason:"timeout"})))},r)),h(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=N(this,pi).get(e);t&&(t.timer&&clearTimeout(t.timer),N(this,pi).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=Sg(this,L0)._++,s=()=>{N(this,pi).delete(r),e()};if(this.paused)N(this,pi).set(r,{timer:null,func:s,time:t});else{const i=setTimeout(s,t);N(this,pi).set(r,{timer:i,func:s,time:XA()})}return r}_forEachSubscriber(e){for(const t of N(this,xr).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new u5(e.type);case"block":{const t=new mH(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new yH(this,e.type);case"event":return new uS(this,e.filter);case"transaction":return new bH(this,e.hash);case"orphan":return new wH(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of N(this,xr).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),N(this,Ir)!=null&&t.pause(N(this,Ir));break}}async on(e,t){const r=await be(this,mt,yb).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,N(this,Ir)!=null&&r.subscriber.pause(N(this,Ir))),this}async once(e,t){const r=await be(this,mt,yb).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,N(this,Ir)!=null&&r.subscriber.pause(N(this,Ir))),this}async emit(e,...t){const r=await be(this,mt,tm).call(this,e,t);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const l=new AU(this,o?null:i,e);try{i.call(this,...t,l)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),N(this,xr).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await be(this,mt,tm).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of N(this,xr).values())t+=r.length;return t}async listeners(e){if(e){const r=await be(this,mt,tm).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let t=[];for(const{listeners:r}of N(this,xr).values())t=t.concat(r.map(({listener:s})=>s));return t}async off(e,t){const r=await be(this,mt,tm).call(this,e);if(!r)return this;if(t){const s=r.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),N(this,xr).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:s}=await be(this,mt,yb).call(this,e);r&&s.stop(),N(this,xr).delete(t)}else for(const[t,{started:r,subscriber:s}]of N(this,xr))r&&s.stop(),N(this,xr).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return N(this,$f)}destroy(){this.removeAllListeners();for(const e of N(this,pi).keys())this._clearTimeout(e);H(this,$f,!0)}get paused(){return N(this,Ir)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(H(this,Ro,-1),N(this,Ir)!=null){if(N(this,Ir)==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),H(this,Ir,!!e);for(const t of N(this,pi).values())t.timer&&clearTimeout(t.timer),t.time=XA()-t.time}resume(){if(N(this,Ir)!=null){this._forEachSubscriber(e=>e.resume()),H(this,Ir,null);for(const e of N(this,pi).values()){let t=e.time;t<0&&(t=0),e.time=XA(),setTimeout(e.func,t)}}}}xr=new WeakMap,rl=new WeakMap,Ir=new WeakMap,$f=new WeakMap,$s=new WeakMap,$u=new WeakMap,sl=new WeakMap,Ro=new WeakMap,L0=new WeakMap,pi=new WeakMap,Ff=new WeakMap,Hf=new WeakMap,mt=new WeakSet,Ps=async function(e){const t=N(this,Hf).cacheTimeout;if(t<0)return await this._perform(e);const r=mb(e.method,e);let s=N(this,sl).get(r);return s||(s=this._perform(e),N(this,sl).set(r,s),setTimeout(()=>{N(this,sl).get(r)===s&&N(this,sl).delete(r)},t)),await s},D_=async function(e,t,r){me(r<vH,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=jb(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(i){if(!this.disableCcipRead&&K2(i)&&i.data&&r>=0&&t==="latest"&&s.to!=null&&Cn(i.data,0,4)==="0x556f1830"){const o=i.data,l=await Vr(s.to,this);let h;try{h=IH(Cn(i.data,4))}catch(g){me(!1,g.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}me(h.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:h.errorArgs}});const d=await this.ccipReadFetch(s,h.calldata,h.urls);me(d!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:h.errorArgs}});const p={to:l,data:_n([h.selector,xH([d,h.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:p});try{const g=await be(this,mt,D_).call(this,p,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},p),result:g}),g}catch(g){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},p),error:g}),g}}throw i}},P_=async function(e){const{value:t}=await Hr({network:this.getNetwork(),value:e});return t},em=async function(e,t,r){let s=this._getAddress(t),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await be(this,mt,P_).call(this,be(this,mt,Ps).call(this,Object.assign(e,{address:s,blockTag:i})))},U_=async function(e,t){if(sn(e,32))return await be(this,mt,Ps).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await be(this,mt,Ps).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},tm=async function(e,t){let r=await ZA(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await ZA({orphan:"drop-log",log:t[0]},this)),N(this,xr).get(r.tag)||null},yb=async function(e){const t=await ZA(e,this),r=t.tag;let s=N(this,xr).get(r);return s||(s={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},N(this,xr).set(r,s)),s};function SH(n,e){try{const t=k_(n,e);if(t)return Db(t)}catch{}return null}function k_(n,e){if(n==="0x")return null;try{const t=lt(Cn(n,e,e+32)),r=lt(Cn(n,t,t+32));return Cn(n,t+32,t+32+r)}catch{}return null}function C3(n){const e=zn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function NH(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const TH=new Uint8Array([]);function xH(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(TH),t+=32;for(let r=0;r<n.length;r++){const s=pt(n[r]);e[r]=C3(t),e.push(C3(s.length)),e.push(NH(s)),t+=32+Math.ceil(s.length/32)*32}return _n(e)}const _3="0x0000000000000000000000000000000000000000000000000000000000000000";function IH(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(Wd(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Cn(n,0,32);me(Cn(t,0,12)===Cn(_3,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Cn(t,12);try{const r=[],s=lt(Cn(n,32,64)),i=lt(Cn(n,s,s+32)),o=Cn(n,s+32);for(let l=0;l<i;l++){const h=SH(o,l*32);if(h==null)throw new Error("abort");r.push(h)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=k_(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(Cn(n,100,128)===Cn(_3,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Cn(n,96,100);try{const r=k_(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Vl(n,e){if(n.provider)return n.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function S3(n,e){let t=jb(e);if(t.to!=null&&(t.to=Vr(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),Vr(r,n)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else t.from=n.getAddress();return await Hr(t)}class OH{constructor(e){ie(this,"provider");Xe(this,{provider:e||null})}async getNonce(e){return Vl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await S3(this,e)}async populateTransaction(e){const t=Vl(this,"populateTransaction"),r=await S3(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=He(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const l=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=l,r.maxPriorityFeePerGas=l}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Hr(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Vl(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Vl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Vl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Vl(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Vl(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=kb.from(r);return await t.broadcastTransaction(await this.signTransaction(s))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function RH(n){return JSON.parse(JSON.stringify(n))}var Mr,Na,Fu,il,Hu,zf,Al,B_,L_;class h5{constructor(e){le(this,Al);le(this,Mr);le(this,Na);le(this,Fu);le(this,il);le(this,Hu);le(this,zf);H(this,Mr,e),H(this,Na,null),H(this,Fu,be(this,Al,B_).bind(this)),H(this,il,!1),H(this,Hu,null),H(this,zf,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){N(this,il)||(H(this,il,!0),be(this,Al,B_).call(this,-2))}stop(){N(this,il)&&(H(this,il,!1),H(this,zf,!0),be(this,Al,L_).call(this),N(this,Mr).off("block",N(this,Fu)))}pause(e){e&&be(this,Al,L_).call(this),N(this,Mr).off("block",N(this,Fu))}resume(){this.start()}}Mr=new WeakMap,Na=new WeakMap,Fu=new WeakMap,il=new WeakMap,Hu=new WeakMap,zf=new WeakMap,Al=new WeakSet,B_=async function(e){try{N(this,Na)==null&&H(this,Na,this._subscribe(N(this,Mr)));let t=null;try{t=await N(this,Na)}catch(i){if(!gr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){H(this,Na,null),N(this,Mr)._recoverSubscriber(this,this._recover(N(this,Mr)));return}const r=await N(this,Mr).getNetwork();if(N(this,Hu)||H(this,Hu,r),N(this,Hu).chainId!==r.chainId)throw new Error("chaid changed");if(N(this,zf))return;const s=await N(this,Mr).send("eth_getFilterChanges",[t]);await this._emitResults(N(this,Mr),s)}catch(t){console.log("@TODO",t)}N(this,Mr).once("block",N(this,Fu))},L_=function(){const e=N(this,Na);e&&(H(this,Na,null),e.then(t=>{N(this,Mr).destroyed||N(this,Mr).send("eth_uninstallFilter",[t])}))};var zu;class DH extends h5{constructor(t,r){super(t);le(this,zu);H(this,zu,RH(r))}_recover(t){return new uS(t,N(this,zu))}async _subscribe(t){return await t.send("eth_newFilter",[N(this,zu)])}async _emitResults(t,r){for(const s of r)t.emit(N(this,zu),t._wrapLog(s,t._network))}}zu=new WeakMap;class PH extends h5{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const UH="bigint,boolean,function,number,string,symbol".split(/,/g);function wb(n){if(n==null||UH.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(wb);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function kH(n){return new Promise(e=>{setTimeout(e,n)})}function hd(n){return n&&n.toLowerCase()}function N3(n){return n&&typeof n.pollingInterval=="number"}const d5={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Xd extends OH{constructor(t,r){super(t);ie(this,"address");r=Ft(r),Xe(this,{address:r})}connect(t){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=wb(t),s=[];if(r.from){const o=r.from;s.push((async()=>{const l=await Vr(o,this.provider);Q(l!=null&&l.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=l})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Vr(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(t);return await new Promise((i,o)=>{const l=[1e3,100];let h=0;const d=async()=>{try{const p=await this.provider.getTransaction(s);if(p!=null){i(p.replaceableTransaction(r));return}}catch(p){if(gr(p,"CANCELLED")||gr(p,"BAD_DATA")||gr(p,"NETWORK_ERROR")||gr(p,"UNSUPPORTED_OPERATION")){p.info==null&&(p.info={}),p.info.sendTransactionHash=s,o(p);return}if(gr(p,"INVALID_ARGUMENT")&&(h++,p.info==null&&(p.info={}),p.info.sendTransactionHash=s,h>10)){o(p);return}this.provider.emit("error",pn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:p}))}this.provider._setTimeout(()=>{d()},l.pop()||4e3)};d()})}async signTransaction(t){const r=wb(t);if(r.from){const i=await Vr(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(t){const r=typeof t=="string"?Ba(t):t;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(t,r,s){const i=wb(s),o=await Hb.resolveNames(t,r,i,async l=>{const h=await Vr(l);return Q(h!=null,"TypedData does not support null address","value",l),h});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Hb.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Ba(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var ju,jf,Do,Ta,zi,gi,ds,M0,M_;class BH extends _H{constructor(t,r){super(t,r);le(this,M0);le(this,ju);le(this,jf);le(this,Do);le(this,Ta);le(this,zi);le(this,gi);le(this,ds);H(this,jf,1),H(this,ju,Object.assign({},d5,r||{})),H(this,Do,[]),H(this,Ta,null),H(this,gi,null),H(this,ds,null);{let i=null;const o=new Promise(l=>{i=l});H(this,zi,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&t!=null&&H(this,gi,Ua.from(t))):s&&(Q(t==null||s.matches(t),"staticNetwork MUST match network object","options",r),H(this,gi,s))}_getOption(t){return N(this,ju)[t]}get _network(){return me(N(this,gi),"network is not available yet","NETWORK_ERROR"),N(this,gi)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let s=t.transaction;if(s&&s.type!=null&&He(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(N(this,gi))return N(this,gi)}else return t;return N(this,ds)?await N(this,ds):this.ready?(H(this,ds,(async()=>{try{const r=Ua.from(He(await this.send("eth_chainId",[])));return H(this,ds,null),r}catch(r){throw H(this,ds,null),r}})()),await N(this,ds)):(H(this,ds,(async()=>{const r={id:Sg(this,jf)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],H(this,ds,null)}catch(i){throw H(this,ds,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ua.from(He(s.result));throw this.getRpcError(r,s)})()),await N(this,ds))}_start(){N(this,zi)==null||N(this,zi).resolve==null||(N(this,zi).resolve(),H(this,zi,null),(async()=>{for(;N(this,gi)==null&&!this.destroyed;)try{H(this,gi,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",pn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await kH(1e3)}be(this,M0,M_).call(this)})())}async _waitUntilReady(){if(N(this,zi)!=null)return await N(this,zi).promise}_getSubscriber(t){return t.type==="pending"?new PH(this):t.type==="event"?this._getOption("polling")?new uS(this,t.filter):new DH(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new u5("orphan"):super._getSubscriber(t)}get ready(){return N(this,zi)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(t[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=ji(He(t[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{t[s]!=null&&(r[s]=Oe(t[s]))}),t.accessList&&(r.accessList=fh(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(s=>s.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(s=>{const i=p8(s);return{address:i.address,nonce:ji(i.nonce),chainId:ji(i.chainId),yParity:ji(i.signature.yParity),r:ji(i.signature.r),s:ji(i.signature.s)}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[hd(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[hd(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[hd(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[hd(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(hd):t.filter.address=hd(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:s}=t,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const h=i.message;if(!h.match(/revert/i)&&h.match(/insufficient funds/i))return pn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:i}});if(h.match(/nonce/i)&&h.match(/too low/i))return pn("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const h=$_(i),d=Bm.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",t.params[0],h?h.data:null);return d.info={error:i,payload:t},d}const o=JSON.stringify(MH(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return pn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:t,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const h=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return pn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:h,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return pn("nonce has already been used","NONCE_EXPIRED",{transaction:h,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return pn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:h,info:{error:i}});if(o.match(/only replay-protected/i))return pn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:h,info:{error:i}}})}let l=!!o.match(/the method .* does not exist/i);return l||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(l=!0),l?pn("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:i,payload:t}}):pn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(pn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const s=Sg(this,jf)._++,i=new Promise((o,l)=>{N(this,Do).push({resolve:o,reject:l,payload:{method:t,params:r,id:s,jsonrpc:"2.0"}})});return be(this,M0,M_).call(this),i}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const i=await r;if(t>=i.length)throw new Error("no such account");return new Xd(this,i[t])}const{accounts:s}=await Hr({network:this.getNetwork(),accounts:r});t=Ft(t);for(const i of s)if(Ft(i)===t)return new Xd(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Xd(this,r))}destroy(){N(this,Ta)&&(clearTimeout(N(this,Ta)),H(this,Ta,null));for(const{payload:t,reject:r}of N(this,Do))r(pn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));H(this,Do,[]),super.destroy()}}ju=new WeakMap,jf=new WeakMap,Do=new WeakMap,Ta=new WeakMap,zi=new WeakMap,gi=new WeakMap,ds=new WeakMap,M0=new WeakSet,M_=function(){if(N(this,Ta))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");H(this,Ta,setTimeout(()=>{H(this,Ta,null);const r=N(this,Do);for(H(this,Do,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==N(this,ju).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>N(this,ju).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:l,reject:h,payload:d}of s){if(this.destroyed){h(pn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:d.method}));continue}const p=o.filter(g=>g.id===d.id)[0];if(p==null){const g=pn("missing response for request","BAD_DATA",{value:o,info:{payload:d}});this.emit("error",g),h(g);continue}if("error"in p){h(this.getRpcError(d,p));continue}l(p.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:l}of s)l(o)}})()}},t))};var al;class f5 extends BH{constructor(t,r){super(t,r);le(this,al);let s=this._getOption("pollingInterval");s==null&&(s=d5.pollingInterval),H(this,al,s)}_getSubscriber(t){const r=super._getSubscriber(t);return N3(r)&&(r.pollingInterval=N(this,al)),r}get pollingInterval(){return N(this,al)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");H(this,al,t),this._forEachSubscriber(r=>{N3(r)&&(r.pollingInterval=N(this,al))})}}al=new WeakMap;var qf;class LH extends f5{constructor(t,r,s){t==null&&(t="http://localhost:8545");super(r,s);le(this,qf);typeof t=="string"?H(this,qf,new zo(t)):H(this,qf,t.clone())}_getConnection(){return N(this,qf).clone()}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){const r=this._getConnection();r.body=JSON.stringify(t),r.setHeader("content-type","application/json");const s=await r.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}qf=new WeakMap;function $_(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&sn(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=$_(n[e]);if(t)return t}return null}if(typeof n=="string")try{return $_(JSON.parse(n))}catch{}return null}function F_(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)F_(n[t],e);if(typeof n=="string")try{return F_(JSON.parse(n),e)}catch{}}}function MH(n){const e=[];return F_(n,e),e}var Vf,Gf;const hu=class hu extends f5{constructor(t,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,i);le(this,Vf);le(this,Gf);H(this,Gf,null),s&&s.providerInfo&&H(this,Gf,s.providerInfo),H(this,Vf,async(o,l)=>{const h={method:o,params:l};this.emit("debug",{action:"sendEip1193Request",payload:h});try{const d=await t.request(h);return this.emit("debug",{action:"receiveEip1193Result",result:d}),d}catch(d){const p=new Error(d.message);throw p.code=d.code,p.data=d.data,p.payload=h,this.emit("debug",{action:"receiveEip1193Error",error:p}),p}})}get providerInfo(){return N(this,Gf)}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){Q(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await N(this,Vf).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(s=>s.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await N(this,Vf).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new hu(t.provider);const r=t.window?t.window:typeof window<"u"?window:null;if(r==null)return null;const s=t.anyProvider;if(s&&r.ethereum)return new hu(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=t.timeout?t.timeout:300;return i===0?null:await new Promise((o,l)=>{let h=[];const d=y=>{h.push(y.detail),s&&p()},p=()=>{if(clearTimeout(g),h.length)if(t&&t.filter){const y=t.filter(h.map(b=>Object.assign({},b.info)));if(y==null)o(null);else if(y instanceof hu)o(y);else{let b=null;if(y.uuid&&(b=h.filter(E=>y.uuid===E.info.uuid)[0]),b){const{provider:v,info:E}=b;o(new hu(v,void 0,{providerInfo:E}))}else l(pn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:y}))}}else{const{provider:y,info:b}=h[0];o(new hu(y,void 0,{providerInfo:b}))}else o(null);r.removeEventListener("eip6963:announceProvider",d)},g=setTimeout(()=>{p()},i);r.addEventListener("eip6963:announceProvider",d),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Vf=new WeakMap,Gf=new WeakMap;let Jd=hu;const $H=["event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"],FH=new zb($H);function T3(n){console.log("Transaction logs:",n.logs);for(const e of n.logs){const t=FH.parseLog(e);if(t!=null&&t.name==="Transfer")return t.args.tokenId}return 0n}function HH(n){return`🔐 I'm human -- now it's verified on-chain.

Got my NFT proof: ${n}

Mint yours → @kaeru_proofs`}function zH({oracleNetwork:n,txResponse:e,txReceipt:t}){return we.jsxs(we.Fragment,{children:[we.jsx("h2",{children:"Humanhood proven"}),!e&&we.jsx("p",{children:"Sending transaction..."}),e&&we.jsx("p",{children:"Transaction sent."}),t&&t.status===1&&we.jsxs(we.Fragment,{children:[we.jsx("p",{children:"Proof is minted successfully."}),n&&we.jsxs(we.Fragment,{children:[we.jsx("p",{children:we.jsx("a",{href:n.getNtfUrl(T3(t)),target:"_blank",rel:"noopener",children:"View Your Token"})}),we.jsx("p",{children:we.jsx("a",{className:"btn btn-secondary btn-large",target:"_blank",rel:"noopener",href:`https://x.com/intent/post?text=${encodeURIComponent(HH(n.getNtfUrl(T3(t))))}`,children:we.jsxs("span",{children:["share on"," ",we.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 31 29",fill:"none",children:we.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.9375 0.628418H28.625L18.625 12.5365L30.5 28.6284H21.125L13.9375 18.9732L5.5 28.6284H0.8125L11.75 16.0767L0.5 0.628418H10.1875L16.75 9.63991L24.25 0.628418L23.9375 0.628418ZM22.375 25.7319H24.875L8.3125 3.20313H5.5L22.0625 25.7319H22.375Z",fill:"#fefefe"})})]})})})]})]})]})}const jH=[{chainId:1,name:"Ethereum Mainnet",rpcUrls:["https://eth.drpc.org"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockExplorerUrls:["https://etherscan.io/"],flowRegistryAddress:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",flowId:5n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://opensea.io/collection/kaeru-559786994",nftContractAddress:"0xc86B125DA2EDea870a6ef9a135bfeCE4923248bD",getNtfUrl:n=>`https://opensea.io/item/ethereum/0xc86B125DA2EDea870a6ef9a135bfeCE4923248bD/${n.toString()}`},{chainId:11155111,name:"Ethereum Sepolia",rpcUrls:["https://sepolia.drpc.org/"],nativeCurrency:{name:"Sepolia ETH",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.etherscan.io/"],flowRegistryAddress:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",flowId:15n,tdId:92250113589494843483616934760257915237426368566020892726663163551788832066762n,nftCollectionUrl:"https://testnets.opensea.io/collection/kaeru-17",nftContractAddress:"0x50b473E1c46c98890607Bd4aad9D36742e330717",getNtfUrl:n=>`https://testnets.opensea.io/assets/sepolia/0x50b473E1c46c98890607Bd4aad9D36742e330717/${n.toString()}`}],qH=jH.reduce((n,e)=>(n[e.chainId.toString()]=e,n),{});function VH(n){return qH[n.toString()]||null}const GH=Symbol(),hS=Symbol(),nm="a",p5="f",x3="p",g5="c",m5="t",dS="h",um="w",fS="o",pS="k";let KH=(n,e)=>new Proxy(n,e);const H_=Object.getPrototypeOf,z_=new WeakMap,y5=n=>n&&(z_.has(n)?z_.get(n):H_(n)===Object.prototype||H_(n)===Array.prototype),Gb=n=>typeof n=="object"&&n!==null,WH=n=>Object.values(Object.getOwnPropertyDescriptors(n)).some(e=>!e.configurable&&!e.writable),YH=n=>{if(Array.isArray(n))return Array.from(n);const e=Object.getOwnPropertyDescriptors(n);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(H_(n),e)},QH=(n,e)=>{const t={[p5]:e};let r=!1;const s=(l,h)=>{if(!r){let d=t[nm].get(n);if(d||(d={},t[nm].set(n,d)),l===um)d[um]=!0;else{let p=d[l];p||(p=new Set,d[l]=p),p.add(h)}}},i=()=>{r=!0,t[nm].delete(n)},o={get(l,h){return h===hS?n:(s(pS,h),w5(Reflect.get(l,h),t[nm],t[g5],t[m5]))},has(l,h){return h===GH?(i(),!0):(s(dS,h),Reflect.has(l,h))},getOwnPropertyDescriptor(l,h){return s(fS,h),Reflect.getOwnPropertyDescriptor(l,h)},ownKeys(l){return s(um),Reflect.ownKeys(l)}};return e&&(o.set=o.deleteProperty=()=>!1),[o,t]},gS=n=>n[hS]||n,w5=(n,e,t,r)=>{if(!y5(n))return n;let s=r&&r.get(n);if(!s){const h=gS(n);WH(h)?s=[h,YH(h)]:s=[h],r==null||r.set(n,s)}const[i,o]=s;let l=t&&t.get(i);return(!l||l[1][p5]!==!!o)&&(l=QH(i,!!o),l[1][x3]=KH(o||i,l[0]),t&&t.set(i,l)),l[1][nm]=e,l[1][g5]=t,l[1][m5]=r,l[1][x3]},ZH=(n,e)=>{const t=Reflect.ownKeys(n),r=Reflect.ownKeys(e);return t.length!==r.length||t.some((s,i)=>s!==r[i])},b5=(n,e,t,r,s=Object.is)=>{if(s(n,e))return!1;if(!Gb(n)||!Gb(e))return!0;const i=t.get(gS(n));if(!i)return!0;if(r){if(r.get(n)===e)return!1;r.set(n,e)}let o=null;for(const l of i[dS]||[])if(o=Reflect.has(n,l)!==Reflect.has(e,l),o)return o;if(i[um]===!0){if(o=ZH(n,e),o)return o}else for(const l of i[fS]||[]){const h=!!Reflect.getOwnPropertyDescriptor(n,l),d=!!Reflect.getOwnPropertyDescriptor(e,l);if(o=h!==d,o)return o}for(const l of i[pS]||[])if(o=b5(n[l],e[l],t,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},XH=n=>y5(n)&&n[hS]||null,I3=(n,e=!0)=>{z_.set(n,e)},JH=(n,e,t)=>{const r=[],s=new WeakSet,i=(o,l)=>{var h,d,p;if(s.has(o))return;Gb(o)&&s.add(o);const g=Gb(o)&&e.get(gS(o));if(g){if((h=g[dS])===null||h===void 0||h.forEach(y=>{const b=`:has(${String(y)})`;r.push(l?[...l,b]:[b])}),g[um]===!0){const y=":ownKeys";r.push(l?[...l,y]:[y])}else(d=g[fS])===null||d===void 0||d.forEach(y=>{const b=`:hasOwn(${String(y)})`;r.push(l?[...l,b]:[b])});(p=g[pS])===null||p===void 0||p.forEach(y=>{"value"in(Object.getOwnPropertyDescriptor(o,y)||{})&&i(o[y],l?[...l,y]:[y])})}else l&&r.push(l)};return i(n),r},Kb={},mS=n=>typeof n=="object"&&n!==null,ez=n=>mS(n)&&!K0.has(n)&&(Array.isArray(n)||!(Symbol.iterator in n))&&!(n instanceof WeakMap)&&!(n instanceof WeakSet)&&!(n instanceof Error)&&!(n instanceof Number)&&!(n instanceof Date)&&!(n instanceof String)&&!(n instanceof RegExp)&&!(n instanceof ArrayBuffer)&&!(n instanceof Promise),E5=(n,e)=>{const t=j_.get(n);if((t==null?void 0:t[0])===e)return t[1];const r=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return I3(r,!0),j_.set(n,[e,r]),Reflect.ownKeys(n).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(n,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(n,s),l={value:i,enumerable:o,configurable:!0};if(K0.has(i))I3(i,!1);else if(yl.has(i)){const[h,d]=yl.get(i);l.value=E5(h,d())}Object.defineProperty(r,s,l)}),Object.preventExtensions(r)},tz=(n,e,t,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);t(i);const l=Reflect.deleteProperty(s,i);return l&&r(["delete",[i],o]),l},set(s,i,o,l){const h=!n()&&Reflect.has(s,i),d=Reflect.get(s,i,l);if(h&&(O3(d,o)||$m.has(o)&&O3(d,$m.get(o))))return!0;t(i),mS(o)&&(o=XH(o)||o);const p=!yl.has(o)&&rz(o)?cn(o):o;return e(i,p),Reflect.set(s,i,p,l),r(["set",[i],o,d]),!0}}),yl=new WeakMap,K0=new WeakSet,j_=new WeakMap,rm=[1,1],$m=new WeakMap;let O3=Object.is,nz=(n,e)=>new Proxy(n,e),rz=ez,sz=E5,iz=tz;function cn(n={}){if(!mS(n))throw new Error("object required");const e=$m.get(n);if(e)return e;let t=rm[0];const r=new Set,s=(A,S=++rm[0])=>{t!==S&&(t=S,r.forEach(x=>x(A,S)))};let i=rm[1];const o=(A=++rm[1])=>(i!==A&&!r.size&&(i=A,h.forEach(([S])=>{const x=S[1](A);x>t&&(t=x)})),t),l=A=>(S,x)=>{const T=[...S];T[1]=[A,...T[1]],s(T,x)},h=new Map,d=(A,S)=>{const x=!K0.has(S)&&yl.get(S);if(x){if((Kb?"production":void 0)!=="production"&&h.has(A))throw new Error("prop listener already exists");if(r.size){const T=x[2](l(A));h.set(A,[x,T])}else h.set(A,[x])}},p=A=>{var S;const x=h.get(A);x&&(h.delete(A),(S=x[1])==null||S.call(x))},g=A=>(r.add(A),r.size===1&&h.forEach(([x,T],k)=>{if((Kb?"production":void 0)!=="production"&&T)throw new Error("remove already exists");const R=x[2](l(k));h.set(k,[x,R])}),()=>{r.delete(A),r.size===0&&h.forEach(([x,T],k)=>{T&&(T(),h.set(k,[x]))})});let y=!0;const b=iz(()=>y,d,p,s),v=nz(n,b);$m.set(n,v);const E=[n,o,g];return yl.set(v,E),Reflect.ownKeys(n).forEach(A=>{const S=Object.getOwnPropertyDescriptor(n,A);"value"in S&&S.writable&&(v[A]=n[A])}),y=!1,v}function sr(n,e,t){const r=yl.get(n);(Kb?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let l=!1;const d=o(p=>{i.push(p),s||(s=Promise.resolve().then(()=>{s=void 0,l&&e(i.splice(0))}))});return l=!0,()=>{l=!1,d()}}function th(n){const e=yl.get(n);(Kb?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[t,r]=e;return sz(t,r())}function nh(n){return K0.add(n),n}function az(){return{proxyStateMap:yl,refSet:K0,snapCache:j_,versionHolder:rm,proxyCache:$m}}function Dr(n,e,t,r){let s=n[e];return sr(n,()=>{const i=n[e];Object.is(s,i)||t(s=i)})}const{proxyStateMap:oz,snapCache:cz}=az(),kw=n=>oz.has(n);function lz(n){const e=[];let t=0;const r=new Map,s=new WeakMap,i=()=>{const d=cz.get(l),p=d==null?void 0:d[1];if(p&&!s.has(p)){const g=new Map(r);s.set(p,g)}},o=d=>s.get(d)||r,l={data:e,index:t,epoch:0,get size(){return kw(this)||i(),o(this).size},get(d){const g=o(this).get(d);if(g===void 0){this.epoch;return}return this.data[g]},has(d){const p=o(this);return this.epoch,p.has(d)},set(d,p){if(!kw(this))throw new Error("Cannot perform mutations on a snapshot");const g=r.get(d);return g===void 0?(r.set(d,this.index),this.data[this.index++]=p):this.data[g]=p,this.epoch++,this},delete(d){if(!kw(this))throw new Error("Cannot perform mutations on a snapshot");const p=r.get(d);return p===void 0?!1:(delete this.data[p],r.delete(d),this.epoch++,!0)},clear(){if(!kw(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(d){this.epoch,o(this).forEach((g,y)=>{d(this.data[g],y,this)})},*entries(){this.epoch;const d=o(this);for(const[p,g]of d)yield[p,this.data[g]]},*keys(){this.epoch;const d=o(this);for(const p of d.keys())yield p},*values(){this.epoch;const d=o(this);for(const p of d.values())yield this.data[p]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},h=cn(l);return Object.defineProperties(h,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(h),h}var R3={};const ce={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof R3<"u"?R3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},v5={caipNetworkIdToNumber(n){return n?Number(n.split(":")[1]):void 0},parseEvmChainId(n){return typeof n=="string"?this.caipNetworkIdToNumber(n):n},getNetworksByNamespace(n,e){return(n==null?void 0:n.filter(t=>t.chainNamespace===e))||[]},getFirstNetworkByNamespace(n,e){return this.getNetworksByNamespace(n,e)[0]},getNetworkNameByCaipNetworkId(n,e){var s;if(!e)return;const t=n.find(i=>i.caipNetworkId===e);if(t)return t.name;const[r]=e.split(":");return((s=ce.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var uz=20,hz=1,rh=1e6,D3=1e6,dz=-7,fz=21,pz=!1,W0="[big.js] ",gh=W0+"Invalid ",KE=gh+"decimal places",gz=gh+"rounding mode",A5=W0+"Division by zero",Kt={},La=void 0,mz=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function C5(){function n(e){var t=this;if(!(t instanceof n))return e===La?C5():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(gh+"value");e=e===0&&1/e<0?"-0":String(e)}yz(t,e)}t.constructor=n}return n.prototype=Kt,n.DP=uz,n.RM=hz,n.NE=dz,n.PE=fz,n.strict=pz,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function yz(n,e){var t,r,s;if(!mz.test(e))throw Error(gh+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)n.c=[n.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(n.e=t-r-1,n.c=[],t=0;r<=s;)n.c[t++]=+e.charAt(r++)}return n}function mh(n,e,t,r){var s=n.c;if(t===La&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(gz);if(e<1)r=t===3&&(r||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(r||s[1]!==La))),s.length=1,r?(n.e=n.e-e+1,s[0]=1):s[0]=n.e=0;else if(e<s.length){if(r=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==La||s[e-1]&1))||t===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++n.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return n}function yh(n,e,t){var r=n.e,s=n.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return n.s<0&&t?"-"+s:s}Kt.abs=function(){var n=new this.constructor(this);return n.s=1,n};Kt.cmp=function(n){var e,t=this,r=t.c,s=(n=new t.constructor(n)).c,i=t.s,o=n.s,l=t.e,h=n.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,l!=h)return l>h^e?1:-1;for(o=(l=r.length)<(h=s.length)?l:h,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return l==h?0:l>h^e?1:-1};Kt.div=function(n){var e=this,t=e.constructor,r=e.c,s=(n=new t(n)).c,i=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>rh)throw Error(KE);if(!s[0])throw Error(A5);if(!r[0])return n.s=i,n.c=[n.e=0],n;var l,h,d,p,g,y=s.slice(),b=l=s.length,v=r.length,E=r.slice(0,l),A=E.length,S=n,x=S.c=[],T=0,k=o+(S.e=e.e-n.e)+1;for(S.s=i,i=k<0?0:k,y.unshift(0);A++<l;)E.push(0);do{for(d=0;d<10;d++){if(l!=(A=E.length))p=l>A?1:-1;else for(g=-1,p=0;++g<l;)if(s[g]!=E[g]){p=s[g]>E[g]?1:-1;break}if(p<0){for(h=A==l?s:y;A;){if(E[--A]<h[A]){for(g=A;g&&!E[--g];)E[g]=9;--E[g],E[A]+=10}E[A]-=h[A]}for(;!E[0];)E.shift()}else break}x[T++]=p?d:++d,E[0]&&p?E[A]=r[b]||0:E=[r[b]]}while((b++<v||E[0]!==La)&&i--);return!x[0]&&T!=1&&(x.shift(),S.e--,k--),T>k&&mh(S,k,t.RM,E[0]!==La),S};Kt.eq=function(n){return this.cmp(n)===0};Kt.gt=function(n){return this.cmp(n)>0};Kt.gte=function(n){return this.cmp(n)>-1};Kt.lt=function(n){return this.cmp(n)<0};Kt.lte=function(n){return this.cmp(n)<1};Kt.minus=Kt.sub=function(n){var e,t,r,s,i=this,o=i.constructor,l=i.s,h=(n=new o(n)).s;if(l!=h)return n.s=-h,i.plus(n);var d=i.c.slice(),p=i.e,g=n.c,y=n.e;if(!d[0]||!g[0])return g[0]?n.s=-h:d[0]?n=new o(i):n.s=1,n;if(l=p-y){for((s=l<0)?(l=-l,r=d):(y=p,r=g),r.reverse(),h=l;h--;)r.push(0);r.reverse()}else for(t=((s=d.length<g.length)?d:g).length,l=h=0;h<t;h++)if(d[h]!=g[h]){s=d[h]<g[h];break}if(s&&(r=d,d=g,g=r,n.s=-n.s),(h=(t=g.length)-(e=d.length))>0)for(;h--;)d[e++]=0;for(h=e;t>l;){if(d[--t]<g[t]){for(e=t;e&&!d[--e];)d[e]=9;--d[e],d[t]+=10}d[t]-=g[t]}for(;d[--h]===0;)d.pop();for(;d[0]===0;)d.shift(),--y;return d[0]||(n.s=1,d=[y=0]),n.c=d,n.e=y,n};Kt.mod=function(n){var e,t=this,r=t.constructor,s=t.s,i=(n=new r(n)).s;if(!n.c[0])throw Error(A5);return t.s=n.s=1,e=n.cmp(t)==1,t.s=s,n.s=i,e?new r(t):(s=r.DP,i=r.RM,r.DP=r.RM=0,t=t.div(n),r.DP=s,r.RM=i,this.minus(t.times(n)))};Kt.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};Kt.plus=Kt.add=function(n){var e,t,r,s=this,i=s.constructor;if(n=new i(n),s.s!=n.s)return n.s=-n.s,s.minus(n);var o=s.e,l=s.c,h=n.e,d=n.c;if(!l[0]||!d[0])return d[0]||(l[0]?n=new i(s):n.s=s.s),n;if(l=l.slice(),e=o-h){for(e>0?(h=o,r=d):(e=-e,r=l),r.reverse();e--;)r.push(0);r.reverse()}for(l.length-d.length<0&&(r=d,d=l,l=r),e=d.length,t=0;e;l[e]%=10)t=(l[--e]=l[e]+d[e]+t)/10|0;for(t&&(l.unshift(t),++h),e=l.length;l[--e]===0;)l.pop();return n.c=l,n.e=h,n};Kt.pow=function(n){var e=this,t=new e.constructor("1"),r=t,s=n<0;if(n!==~~n||n<-D3||n>D3)throw Error(gh+"exponent");for(s&&(n=-n);n&1&&(r=r.times(e)),n>>=1,!!n;)e=e.times(e);return s?t.div(r):r};Kt.prec=function(n,e){if(n!==~~n||n<1||n>rh)throw Error(gh+"precision");return mh(new this.constructor(this),n,e)};Kt.round=function(n,e){if(n===La)n=0;else if(n!==~~n||n<-rh||n>rh)throw Error(KE);return mh(new this.constructor(this),n+this.e+1,e)};Kt.sqrt=function(){var n,e,t,r=this,s=r.constructor,i=r.s,o=r.e,l=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(W0+"No square root");i=Math.sqrt(+yh(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):n=new s(i+""),o=n.e+(s.DP+=4);do t=n,n=l.times(t.plus(r.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return mh(n,(s.DP-=4)+n.e+1,s.RM)};Kt.times=Kt.mul=function(n){var e,t=this,r=t.constructor,s=t.c,i=(n=new r(n)).c,o=s.length,l=i.length,h=t.e,d=n.e;if(n.s=t.s==n.s?1:-1,!s[0]||!i[0])return n.c=[n.e=0],n;for(n.e=h+d,o<l&&(e=s,s=i,i=e,d=o,o=l,l=d),e=new Array(d=o+l);d--;)e[d]=0;for(h=l;h--;){for(l=0,d=o+h;d>h;)l=e[d]+i[h]*s[d-h-1]+l,e[d--]=l%10,l=l/10|0;e[d]=l}for(l?++n.e:e.shift(),h=e.length;!e[--h];)e.pop();return n.c=e,n};Kt.toExponential=function(n,e){var t=this,r=t.c[0];if(n!==La){if(n!==~~n||n<0||n>rh)throw Error(KE);for(t=mh(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return yh(t,!0,!!r)};Kt.toFixed=function(n,e){var t=this,r=t.c[0];if(n!==La){if(n!==~~n||n<0||n>rh)throw Error(KE);for(t=mh(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return yh(t,!1,!!r)};Kt[Symbol.for("nodejs.util.inspect.custom")]=Kt.toJSON=Kt.toString=function(){var n=this,e=n.constructor;return yh(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};Kt.toNumber=function(){var n=+yh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(W0+"Imprecise conversion");return n};Kt.toPrecision=function(n,e){var t=this,r=t.constructor,s=t.c[0];if(n!==La){if(n!==~~n||n<1||n>rh)throw Error(gh+"precision");for(t=mh(new r(t),n,e);t.c.length<n;)t.c.push(0)}return yh(t,n<=t.e||t.e<=r.NE||t.e>=r.PE,!!s)};Kt.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(W0+"valueOf disallowed");return yh(n,n.e<=e.NE||n.e>=e.PE,!0)};var Rg=C5();const wz={bigNumber(n){return n?new Rg(n):new Rg(0)},multiply(n,e){if(n===void 0||e===void 0)return new Rg(0);const t=new Rg(n),r=new Rg(e);return t.times(r)},formatNumberToLocalString(n,e=2){return n===void 0?"0.00":typeof n=="number"?n.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(n).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(n){return n===void 0?0:parseFloat(n.replace(/,/gu,""))}},bz=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ez=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],vz=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Az={getERC20Abi:n=>ce.USDT_CONTRACT_ADDRESSES.includes(n)?vz:bz,getSwapAbi:()=>Ez},zr={validateCaipAddress(n){var e;if(((e=n.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return n},parseCaipAddress(n){const e=n.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${n}`);const[t,r,s]=e;if(!t||!r||!s)throw new Error(`Invalid CAIP-10 address: ${n}`);return{chainNamespace:t,chainId:r,address:s}},parseCaipNetworkId(n){const e=n.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${n}`);const[t,r]=e;if(!t||!r)throw new Error(`Invalid CAIP-2 network id: ${n}`);return{chainNamespace:t,chainId:r}}},st={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function JA(n){if(!n)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${n}:connected_connector_id`}const et={setItem(n,e){sm()&&e!==void 0&&localStorage.setItem(n,e)},getItem(n){if(sm())return localStorage.getItem(n)||void 0},removeItem(n){sm()&&localStorage.removeItem(n)},clear(){sm()&&localStorage.clear()}};function sm(){return typeof window<"u"&&typeof localStorage<"u"}function ko(n,e){return e==="light"?{"--w3m-accent":(n==null?void 0:n["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(n==null?void 0:n["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var P3={};const eC=(typeof process<"u"&&typeof P3<"u"?P3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",_5=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Cz="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",$t={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:eC,SECURE_SITE_DASHBOARD:`${eC}/dashboard`,SECURE_SITE_FAVICON:`${eC}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[ce.CHAIN.EVM,ce.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[ce.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[ce.CHAIN.EVM,ce.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[ce.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[ce.CHAIN.EVM,ce.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ve={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(n,e){return Date.now()-n>e},getActiveNetworkProps(){const n=ve.getActiveNamespace(),e=ve.getActiveCaipNetworkId(),t=e?e.split(":")[1]:void 0,r=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:n,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:n,href:e}){try{et.setItem(st.DEEPLINK_CHOICE,JSON.stringify({href:e,name:n}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const n=et.getItem(st.DEEPLINK_CHOICE);if(n)return JSON.parse(n)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{et.removeItem(st.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(n){try{et.setItem(st.ACTIVE_NAMESPACE,n)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(n){try{et.setItem(st.ACTIVE_CAIP_NETWORK_ID,n),ve.setActiveNamespace(n.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return et.getItem(st.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{et.removeItem(st.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(n){try{const e=JA(n);et.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(n){try{const e=ve.getRecentWallets();e.find(r=>r.id===n.id)||(e.unshift(n),e.length>2&&e.pop(),et.setItem(st.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const n=et.getItem(st.RECENT_WALLETS);return n?JSON.parse(n):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(n,e){try{const t=JA(n);et.setItem(t,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return et.getItem(st.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(n){if(n)try{const e=JA(n);return et.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",n)}},setConnectedSocialProvider(n){try{et.setItem(st.CONNECTED_SOCIAL,n)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return et.getItem(st.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{et.removeItem(st.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return et.getItem(st.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var t;const n=et.getItem(st.ACTIVE_CAIP_NETWORK_ID);return(t=n==null?void 0:n.split(":"))==null?void 0:t[1]},setConnectionStatus(n){try{et.setItem(st.CONNECTION_STATUS,n)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return et.getItem(st.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const n=et.getItem(st.CONNECTED_NAMESPACES);return n!=null&&n.length?n.split(","):[]}catch{return[]}},setConnectedNamespaces(n){try{const e=Array.from(new Set(n));et.setItem(st.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(n){try{const e=ve.getConnectedNamespaces();e.includes(n)||(e.push(n),ve.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(n){try{const e=ve.getConnectedNamespaces(),t=e.indexOf(n);t>-1&&(e.splice(t,1),ve.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return et.getItem(st.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(n){try{et.setItem(st.TELEGRAM_SOCIAL_PROVIDER,n)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{et.removeItem(st.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let n={};try{const e=et.getItem(st.PORTFOLIO_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromBalanceCache(n){try{const e=ve.getBalanceCache();et.setItem(st.PORTFOLIO_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getBalanceCacheForCaipAddress(n){try{const t=ve.getBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;ve.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateBalanceCache(n){try{const e=ve.getBalanceCache();e[n.caipAddress]=n,et.setItem(st.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getNativeBalanceCache(){let n={};try{const e=et.getItem(st.NATIVE_BALANCE_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromNativeBalanceCache(n){try{const e=ve.getBalanceCache();et.setItem(st.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getNativeBalanceCacheForCaipAddress(n){try{const t=ve.getNativeBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",n),ve.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateNativeBalanceCache(n){try{const e=ve.getNativeBalanceCache();e[n.caipAddress]=n,et.setItem(st.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getEnsCache(){let n={};try{const e=et.getItem(st.ENS_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return n},getEnsFromCacheForAddress(n){try{const t=ve.getEnsCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;ve.removeEnsFromCache(n)}catch{console.info("Unable to get ens name from cache",n)}},updateEnsCache(n){try{const e=ve.getEnsCache();e[n.address]=n,et.setItem(st.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",n)}},removeEnsFromCache(n){try{const e=ve.getEnsCache();et.setItem(st.ENS_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove ens name from cache",n)}},getIdentityCache(){let n={};try{const e=et.getItem(st.IDENTITY_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return n},getIdentityFromCacheForAddress(n){try{const t=ve.getIdentityCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;ve.removeIdentityFromCache(n)}catch{console.info("Unable to get identity from cache",n)}},updateIdentityCache(n){try{const e=ve.getIdentityCache();e[n.address]={identity:n.identity,timestamp:n.timestamp},et.setItem(st.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",n)}},removeIdentityFromCache(n){try{const e=ve.getIdentityCache();et.setItem(st.IDENTITY_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove identity from cache",n)}},clearAddressCache(){try{et.removeItem(st.PORTFOLIO_CACHE),et.removeItem(st.NATIVE_BALANCE_CACHE),et.removeItem(st.ENS_CACHE),et.removeItem(st.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(n){try{et.setItem(st.PREFERRED_ACCOUNT_TYPES,JSON.stringify(n))}catch{console.info("Unable to set preferred account types",n)}},getPreferredAccountTypes(){try{const n=et.getItem(st.PREFERRED_ACCOUNT_TYPES);return n?JSON.parse(n):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(n,e){try{const t=ve.getConnections(),r=t[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of n){const l=s.get(o.connectorId),h=o.connectorId===ce.CONNECTOR_ID.AUTH;if(l&&!h){const d=new Set(l.accounts.map(g=>g.address.toLowerCase())),p=o.accounts.filter(g=>!d.has(g.address.toLowerCase()));l.accounts.push(...p)}else s.set(o.connectorId,{...o})}const i={...t,[e]:Array.from(s.values())};et.setItem(st.CONNECTIONS,JSON.stringify(i))}catch(t){console.error("Unable to sync connections to storage",t)}},getConnections(){try{const n=et.getItem(st.CONNECTIONS);return n?JSON.parse(n):{}}catch(n){return console.error("Unable to get connections from storage",n),{}}},deleteAddressFromConnection({connectorId:n,address:e,namespace:t}){try{const r=ve.getConnections(),s=r[t]??[],i=new Map(s.map(l=>[l.connectorId,l])),o=i.get(n);o&&(o.accounts.filter(h=>h.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(n):i.set(n,{...o,accounts:o.accounts.filter(h=>h.address.toLowerCase()!==e.toLowerCase())})),et.setItem(st.CONNECTIONS,JSON.stringify({...r,[t]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${n}" in namespace "${t}"`)}},getDisconnectedConnectorIds(){try{const n=et.getItem(st.DISCONNECTED_CONNECTOR_IDS);return n?JSON.parse(n):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(n,e){try{const t=ve.getDisconnectedConnectorIds(),r=t[e]??[];r.push(n),et.setItem(st.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${n}" for namespace "${e}"`)}},removeDisconnectedConnectorId(n,e){try{const t=ve.getDisconnectedConnectorIds();let r=t[e]??[];r=r.filter(s=>s.toLowerCase()!==n.toLowerCase()),et.setItem(st.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${n}" for namespace "${e}"`)}},isConnectorDisconnected(n,e){try{return(ve.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===n.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${n}" for namespace "${e}"`)}return!1}},Le={isMobile(){var n;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((n=window.matchMedia("(pointer:coarse)"))!=null&&n.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(n,e=""){return n==null?void 0:n.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return Le.isMobile()&&n.includes("android")},isIos(){if(!this.isMobile())return!1;const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return n.includes("iphone")||n.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(n){return n?n-Date.now()<=$t.TEN_SEC_MS:!0},isAllowedRetry(n,e=$t.ONE_SEC_MS){return Date.now()-n>=e},copyToClopboard(n){navigator.clipboard.writeText(n)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var n,e;if(Le.isClient()&&window.self!==window.top)try{const t=(e=(n=window==null?void 0:window.location)==null?void 0:n.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(t){const s=new URL(t),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+$t.FOUR_MINUTES_MS},getNetworkId(n){return n==null?void 0:n.split(":")[1]},getPlainAddress(n){return n==null?void 0:n.split(":")[2]},async wait(n){return new Promise(e=>{setTimeout(e,n)})},debounce(n,e=500){let t;return(...r)=>{function s(){n(...r)}t&&clearTimeout(t),t=setTimeout(s,e)}},isHttpUrl(n){return n.startsWith("http://")||n.startsWith("https://")},formatNativeUrl(n,e,t=null){if(Le.isHttpUrl(n))return this.formatUniversalUrl(n,e);let r=n,s=t;r.includes("://")||(r=n.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(n,e){if(!Le.isHttpUrl(n))return this.formatNativeUrl(n,e);let t=n;t.endsWith("/")||(t=`${t}/`);const r=encodeURIComponent(e);return{redirect:`${t}wc?uri=${r}`,href:t}},getOpenTargetForPlatform(n){return n==="popupWindow"?n:this.isTelegram()?ve.getTelegramSocialProvider()?"_top":"_blank":n},openHref(n,e,t){window==null||window.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},returnOpenHref(n,e,t){return window==null?void 0:window.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var t,r;if(typeof window>"u")return!1;const n=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(t=window.matchMedia("(display-mode: standalone)"))==null?void 0:t.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(n||e)},async preloadImage(n){const e=new Promise((t,r)=>{const s=new Image;s.onload=t,s.onerror=r,s.crossOrigin="anonymous",s.src=n});return Promise.race([e,Le.wait(2e3)])},formatBalance(n,e){let t="0.000";if(typeof n=="string"){const r=Number(n);if(r){const s=Math.floor(r*1e3)/1e3;s&&(t=s.toString())}}return`${t}${e?` ${e}`:""}`},formatBalance2(n,e){var r;let t;if(n==="0")t="0";else if(typeof n=="string"){const s=Number(n);s&&(t=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:t??"0",rest:t==="0"?"000":"",symbol:e}},getApiUrl(){return ce.W3M_API_URL},getBlockchainApiUrl(){return ce.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ce.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})},parseError(n){var e,t;return typeof n=="string"?n:typeof((t=(e=n==null?void 0:n.issues)==null?void 0:e[0])==null?void 0:t.message)=="string"?n.issues[0].message:n instanceof Error?n.message:"Unknown error"},sortRequestedNetworks(n,e=[]){const t={};return e&&n&&(n.forEach((r,s)=>{t[r]=s}),e.sort((r,s)=>{const i=t[r.id],o=t[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(n){let e=0;for(const t of n)e+=t.value??0;return e},formatTokenBalance(n){const e=n.toFixed(2),[t,r]=e.split(".");return{dollars:t,pennies:r}},isAddress(n,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)||/^(?:0x)?[0-9A-F]{40}$/iu.test(n))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(n);default:return!1}},uniqueBy(n,e){const t=new Set;return n.filter(r=>{const s=r[e];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(n,e,t){const s=n.length===0?$t.ADAPTER_TYPES.UNIVERSAL:n.map(i=>i.adapterType).join(",");return`${e}-${s}-${t}`},createAccount(n,e,t,r,s){return{namespace:n,address:e,type:t,publicKey:r,path:s}},isCaipAddress(n){if(typeof n!="string")return!1;const e=n.split(":"),t=e[0];return e.filter(Boolean).length===3&&t in ce.CHAIN_NAME_MAP},getAccount(n){return n?typeof n=="string"?{address:n,chainId:void 0}:{address:n.address,chainId:n.chainId}:{address:void 0,chainId:void 0}},isMac(){const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return n.includes("macintosh")&&!n.includes("safari")},formatTelegramSocialLoginUrl(n){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,t="state=";if(new URL(n).host==="auth.magic.link"){const s="provider_authorization_url=",i=n.substring(n.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),t,e);return n.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(n,t,e)},injectIntoUrl(n,e,t){const r=n.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${n}`);const s=n.indexOf("&",r),i=e.length,o=s!==-1?s:n.length,l=n.substring(0,r+i),h=n.substring(r+i,o),d=n.substring(s),p=h+t;return l+p+d}};async function Dg(...n){const e=await fetch(...n);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Y0{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...s}){const i=this.createUrl(s);return(await Dg(i,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){const s=this.createUrl(r);return(await Dg(s,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await Dg(i,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await Dg(i,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await Dg(i,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const _z={getFeatureValue(n,e){const t=e==null?void 0:e[n];return t===void 0?$t.DEFAULT_FEATURES[n]:t},filterSocialsByPlatform(n){if(!n||!n.length)return n;if(Le.isTelegram()){if(Le.isIos())return n.filter(e=>e!=="google");if(Le.isMac())return n.filter(e=>e!=="x");if(Le.isAndroid())return n.filter(e=>!["facebook","x"].includes(e))}return n}},qe=cn({features:$t.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:$t.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ye={state:qe,subscribeKey(n,e){return Dr(qe,n,e)},setOptions(n){Object.assign(qe,n)},setRemoteFeatures(n){var t,r;if(!n)return;const e={...qe.remoteFeatures,...n};qe.remoteFeatures=e,(t=qe.remoteFeatures)!=null&&t.socials&&(qe.remoteFeatures.socials=_z.filterSocialsByPlatform(qe.remoteFeatures.socials)),(r=qe.features)!=null&&r.pay&&(qe.remoteFeatures.email=!1,qe.remoteFeatures.socials=!1)},setFeatures(n){var t;if(!n)return;qe.features||(qe.features=$t.DEFAULT_FEATURES);const e={...qe.features,...n};qe.features=e,(t=qe.features)!=null&&t.pay&&qe.remoteFeatures&&(qe.remoteFeatures.email=!1,qe.remoteFeatures.socials=!1)},setProjectId(n){qe.projectId=n},setCustomRpcUrls(n){qe.customRpcUrls=n},setAllWallets(n){qe.allWallets=n},setIncludeWalletIds(n){qe.includeWalletIds=n},setExcludeWalletIds(n){qe.excludeWalletIds=n},setFeaturedWalletIds(n){qe.featuredWalletIds=n},setTokens(n){qe.tokens=n},setTermsConditionsUrl(n){qe.termsConditionsUrl=n},setPrivacyPolicyUrl(n){qe.privacyPolicyUrl=n},setCustomWallets(n){qe.customWallets=n},setIsSiweEnabled(n){qe.isSiweEnabled=n},setIsUniversalProvider(n){qe.isUniversalProvider=n},setSdkVersion(n){qe.sdkVersion=n},setMetadata(n){qe.metadata=n},setDisableAppend(n){qe.disableAppend=n},setEIP6963Enabled(n){qe.enableEIP6963=n},setDebug(n){qe.debug=n},setEnableWalletConnect(n){qe.enableWalletConnect=n},setEnableWalletGuide(n){qe.enableWalletGuide=n},setEnableAuthLogger(n){qe.enableAuthLogger=n},setEnableWallets(n){qe.enableWallets=n},setPreferUniversalLinks(n){qe.experimental_preferUniversalLinks=n},setSIWX(n){if(n)for(const[e,t]of Object.entries($t.SIWX_DEFAULTS))n[e]??(n[e]=t);qe.siwx=n},setConnectMethodsOrder(n){qe.features={...qe.features,connectMethodsOrder:n}},setWalletFeaturesOrder(n){qe.features={...qe.features,walletFeaturesOrder:n}},setSocialsOrder(n){qe.remoteFeatures={...qe.remoteFeatures,socials:n}},setCollapseWallets(n){qe.features={...qe.features,collapseWallets:n}},setEnableEmbedded(n){qe.enableEmbedded=n},setAllowUnsupportedChain(n){qe.allowUnsupportedChain=n},setManualWCControl(n){qe.manualWCControl=n},setEnableNetworkSwitch(n){qe.enableNetworkSwitch=n},setEnableReconnect(n){qe.enableReconnect=n},setDefaultAccountTypes(n={}){Object.entries(n).forEach(([e,t])=>{t&&(qe.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(n){qe.universalProviderConfigOverride=n},getUniversalProviderConfigOverride(){return qe.universalProviderConfigOverride},getSnapshot(){return th(qe)}},Sz=Object.freeze({enabled:!0,events:[]}),Nz=new Y0({baseUrl:Le.getAnalyticsUrl(),clientId:null}),Tz=5,xz=60*1e3,_c=cn({...Sz}),Iz={state:_c,subscribeKey(n,e){return Dr(_c,n,e)},async sendError(n,e){if(!_c.enabled)return;const t=Date.now();if(_c.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return t-o<xz}).length>=Tz)return;const s={type:"error",event:e,properties:{errorType:n.name,errorMessage:n.message,stackTrace:n.stack,timestamp:new Date().toISOString()}};_c.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:l}=ye.state;await Nz.post({path:"/e",params:{projectId:i,st:o,sv:l||"html-wagmi-4.2.2"},body:{eventId:Le.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:n.name,errorMessage:n.message,stackTrace:n.stack}}})}catch{}},enable(){_c.enabled=!0},disable(){_c.enabled=!1},clearEvents(){_c.events=[]}};class np extends Error{constructor(e,t,r){super(e),this.name="AppKitError",this.category=t,this.originalError=r,Object.setPrototypeOf(this,np.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const l=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${l}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,np):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function U3(n,e){const t=n instanceof np?n:new np(n instanceof Error?n.message:String(n),e,n);throw Iz.sendError(t,t.category),t}function Gs(n,e="INTERNAL_SDK_ERROR"){const t={};return Object.keys(n).forEach(r=>{const s=n[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(l){return U3(l,e)}}:i=(...o)=>{try{return s(...o)}catch(l){return U3(l,e)}},t[r]=i}else t[r]=s}),t}var rp={};const Oz="https://secure.walletconnect.org/sdk",Rz=(typeof process<"u"&&typeof rp<"u"?rp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Oz,Dz=(typeof process<"u"&&typeof rp<"u"?rp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Pz=(typeof process<"u"&&typeof rp<"u"?rp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ze={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},jn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ia={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Uz={handleMobileDeeplinkRedirect(n,e){const t=window.location.href,r=encodeURIComponent(t);if(n===Ia.PHANTOM.id&&!("phantom"in window)){const s=t.startsWith("https")?"https":"http",i=t.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ia.PHANTOM.url}/ul/browse/${r}?ref=${o}`}n===Ia.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ia.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ce.CHAIN.SOLANA&&n===Ia.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ia.COINBASE.url}/dapp?cb_url=${r}`)}},Rs=cn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kz={state:Rs,subscribeNetworkImages(n){return sr(Rs.networkImages,()=>n(Rs.networkImages))},subscribeKey(n,e){return Dr(Rs,n,e)},subscribe(n){return sr(Rs,()=>n(Rs))},setWalletImage(n,e){Rs.walletImages[n]=e},setNetworkImage(n,e){Rs.networkImages[n]=e},setChainImage(n,e){Rs.chainImages[n]=e},setConnectorImage(n,e){Rs.connectorImages={...Rs.connectorImages,[n]:e}},setTokenImage(n,e){Rs.tokenImages[n]=e},setCurrencyImage(n,e){Rs.currencyImages[n]=e}},qi=Gs(kz),Bz={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},tC=cn({networkImagePromises:{}}),S5={async fetchWalletImage(n){if(n)return await Ge._fetchWalletImage(n),this.getWalletImageById(n)},async fetchNetworkImage(n){if(!n)return;const e=this.getNetworkImageById(n);return e||(tC.networkImagePromises[n]||(tC.networkImagePromises[n]=Ge._fetchNetworkImage(n)),await tC.networkImagePromises[n],this.getNetworkImageById(n))},getWalletImageById(n){if(n)return qi.state.walletImages[n]},getWalletImage(n){if(n!=null&&n.image_url)return n==null?void 0:n.image_url;if(n!=null&&n.image_id)return qi.state.walletImages[n.image_id]},getNetworkImage(n){var e,t,r;if((e=n==null?void 0:n.assets)!=null&&e.imageUrl)return(t=n==null?void 0:n.assets)==null?void 0:t.imageUrl;if((r=n==null?void 0:n.assets)!=null&&r.imageId)return qi.state.networkImages[n.assets.imageId]},getNetworkImageById(n){if(n)return qi.state.networkImages[n]},getConnectorImage(n){var e;if(n!=null&&n.imageUrl)return n.imageUrl;if((e=n==null?void 0:n.info)!=null&&e.icon)return n.info.icon;if(n!=null&&n.imageId)return qi.state.connectorImages[n.imageId]},getChainImage(n){return qi.state.networkImages[Bz[n]]}},Sc=cn({message:"",variant:"info",open:!1}),Lz={state:Sc,subscribeKey(n,e){return Dr(Sc,n,e)},open(n,e){const{debug:t}=ye.state,{shortMessage:r,longMessage:s}=n;t&&(Sc.message=r,Sc.variant=e,Sc.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Sc.open=!1,Sc.message="",Sc.variant="info"}},$n=Gs(Lz),Mz=Le.getAnalyticsUrl(),$z=new Y0({baseUrl:Mz,clientId:null}),Fz=["MODAL_CREATED"],ao=cn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Gt={state:ao,subscribe(n){return sr(ao,()=>n(ao))},getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=ye.state;return{projectId:n,st:e,sv:t||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(n){try{const e=Fe.state.address;if(Fz.includes(n.data.event)||typeof window>"u")return;await $z.post({path:"/e",params:Gt.getSdkProperties(),body:{eventId:Le.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:n.timestamp,props:{...n.data,address:e}}}),ao.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ce.HTTP_STATUS_CODES.FORBIDDEN&&!ao.reportedErrors.FORBIDDEN&&($n.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${sm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ao.reportedErrors.FORBIDDEN=!0)}},sendEvent(n){var e;ao.timestamp=Date.now(),ao.data=n,((e=ye.state.features)!=null&&e.analytics||n.event==="INITIALIZE")&&Gt._sendAnalyticsEvent(ao)}},Hz=Le.getApiUrl(),ns=new Y0({baseUrl:Hz,clientId:null}),zz=40,k3=4,jz=20,at=cn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ge={state:at,subscribeKey(n,e){return Dr(at,n,e)},_getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=ye.state;return{projectId:n,st:e||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(n){return ye.state.isUniversalProvider?n.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):n},async _fetchWalletImage(n){const e=`${ns.baseUrl}/getWalletImage/${n}`,t=await ns.getBlob({path:e,params:Ge._getSdkProperties()});qi.setWalletImage(n,URL.createObjectURL(t))},async _fetchNetworkImage(n){const e=`${ns.baseUrl}/public/getAssetImage/${n}`,t=await ns.getBlob({path:e,params:Ge._getSdkProperties()});qi.setNetworkImage(n,URL.createObjectURL(t))},async _fetchConnectorImage(n){const e=`${ns.baseUrl}/public/getAssetImage/${n}`,t=await ns.getBlob({path:e,params:Ge._getSdkProperties()});qi.setConnectorImage(n,URL.createObjectURL(t))},async _fetchCurrencyImage(n){const e=`${ns.baseUrl}/public/getCurrencyImage/${n}`,t=await ns.getBlob({path:e,params:Ge._getSdkProperties()});qi.setCurrencyImage(n,URL.createObjectURL(t))},async _fetchTokenImage(n){const e=`${ns.baseUrl}/public/getTokenImage/${n}`,t=await ns.getBlob({path:e,params:Ge._getSdkProperties()});qi.setTokenImage(n,URL.createObjectURL(t))},_filterWalletsByPlatform(n){return Le.isMobile()?n==null?void 0:n.filter(t=>t.mobile_link||t.id===Ia.COINBASE.id?!0:M.state.activeChain==="solana"&&(t.id===Ia.SOLFLARE.id||t.id===Ia.PHANTOM.id)):n},async fetchProjectConfig(){return(await ns.get({path:"/appkit/v1/config",params:Ge._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:n}=await ns.get({path:"/projects/v1/origins",params:Ge._getSdkProperties()});return n}catch(n){if(n instanceof Error&&n.cause instanceof Response){const e=n.cause.status;if(e===ce.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:n});if(e>=ce.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:n});return[]}return[]}},async fetchNetworkImages(){const n=M.getAllRequestedCaipNetworks(),e=n==null?void 0:n.map(({assets:t})=>t==null?void 0:t.imageId).filter(Boolean).filter(t=>!S5.getNetworkImageById(t));e&&await Promise.allSettled(e.map(t=>Ge._fetchNetworkImage(t)))},async fetchConnectorImages(){const{connectors:n}=_e.state,e=n.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(e.map(t=>Ge._fetchConnectorImage(t)))},async fetchCurrencyImages(n=[]){await Promise.allSettled(n.map(e=>Ge._fetchCurrencyImage(e)))},async fetchTokenImages(n=[]){await Promise.allSettled(n.map(e=>Ge._fetchTokenImage(e)))},async fetchWallets(n){var i;const e=n.exclude??[];Ge._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ia).map(o=>o.id));const r=await ns.get({path:"/getWallets",params:{...Ge._getSdkProperties(),...n,page:String(n.page),entries:String(n.entries),include:(i=n.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ge._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:n}=ye.state;if(n!=null&&n.length){const e={...Ge._getSdkProperties(),page:1,entries:(n==null?void 0:n.length)??k3,include:n},{data:t}=await Ge.fetchWallets(e),r=[...t].sort((i,o)=>n.indexOf(i.id)-n.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ge._fetchWalletImage(i))),at.featured=r,at.allFeatured=r}},async fetchRecommendedWallets(){try{at.isFetchingRecommendedWallets=!0;const{includeWalletIds:n,excludeWalletIds:e,featuredWalletIds:t}=ye.state,r=[...e??[],...t??[]].filter(Boolean),s=M.getRequestedCaipNetworkIds().join(","),i={page:1,entries:k3,include:n,exclude:r,chains:s},{data:o,count:l}=await Ge.fetchWallets(i),h=ve.getRecentWallets(),d=o.map(g=>g.image_id).filter(Boolean),p=h.map(g=>g.image_id).filter(Boolean);await Promise.allSettled([...d,...p].map(g=>Ge._fetchWalletImage(g))),at.recommended=o,at.allRecommended=o,at.count=l??0}catch{}finally{at.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:n}){const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=ye.state,s=M.getRequestedCaipNetworkIds().join(","),i=[...at.recommended.map(({id:p})=>p),...t??[],...r??[]].filter(Boolean),o={page:n,entries:zz,include:e,exclude:i,chains:s},{data:l,count:h}=await Ge.fetchWallets(o),d=l.slice(0,jz).map(p=>p.image_id).filter(Boolean);await Promise.allSettled(d.map(p=>Ge._fetchWalletImage(p))),at.wallets=Le.uniqueBy([...at.wallets,...Ge._filterOutExtensions(l)],"id").filter(p=>{var g;return(g=p.chains)==null?void 0:g.some(y=>s.includes(y))}),at.count=h>at.count?h:at.count,at.page=n},async initializeExcludedWallets({ids:n}){const e={page:1,entries:n.length,include:n},{data:t}=await Ge.fetchWallets(e);t&&t.forEach(r=>{at.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:n,badge:e}){const{includeWalletIds:t,excludeWalletIds:r}=ye.state,s=M.getRequestedCaipNetworkIds().join(",");at.search=[];const i={page:1,entries:100,search:n==null?void 0:n.trim(),badge_type:e,include:t,exclude:r,chains:s},{data:o}=await Ge.fetchWallets(i);Gt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:n??""}});const l=o.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...l.map(h=>Ge._fetchWalletImage(h)),Le.wait(300)]),at.search=Ge._filterOutExtensions(o)},initPromise(n,e){const t=at.promises[n];return t||(at.promises[n]=e())},prefetch({fetchConnectorImages:n=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:r=!0}={}){const s=[n&&Ge.initPromise("connectorImages",Ge.fetchConnectorImages),e&&Ge.initPromise("featuredWallets",Ge.fetchFeaturedWallets),t&&Ge.initPromise("recommendedWallets",Ge.fetchRecommendedWallets),r&&Ge.initPromise("networkImages",Ge.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var n;(n=ye.state.features)!=null&&n.analytics&&Ge.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:n}=await ns.get({path:"/getAnalyticsConfig",params:Ge._getSdkProperties()});ye.setFeatures({analytics:n})}catch{ye.setFeatures({analytics:!1})}},filterByNamespaces(n){if(!(n!=null&&n.length)){at.featured=at.allFeatured,at.recommended=at.allRecommended;return}const e=M.getRequestedCaipNetworkIds().join(",");at.featured=at.allFeatured.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.recommended=at.allRecommended.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.filteredWallets=at.wallets.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){at.filteredWallets=[]},setFilterByNamespace(n){if(!n){at.featured=at.allFeatured,at.recommended=at.allRecommended;return}const e=M.getRequestedCaipNetworkIds().join(",");at.featured=at.allFeatured.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.recommended=at.allRecommended.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.filteredWallets=at.wallets.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))})}},Xt=cn({view:"Connect",history:["Connect"],transactionStack:[]}),qz={state:Xt,subscribeKey(n,e){return Dr(Xt,n,e)},pushTransactionStack(n){Xt.transactionStack.push(n)},popTransactionStack(n){const e=Xt.transactionStack.pop();if(!e)return;const{onSuccess:t,onError:r,onCancel:s}=e;switch(n){case"success":t==null||t();break;case"error":r==null||r(),tt.goBack();break;case"cancel":s==null||s(),tt.goBack();break}},push(n,e){n!==Xt.view&&(Xt.view=n,Xt.history.push(n),Xt.data=e)},reset(n,e){Xt.view=n,Xt.history=[n],Xt.data=e},replace(n,e){Xt.history.at(-1)===n||(Xt.view=n,Xt.history[Xt.history.length-1]=n,Xt.data=e)},goBack(){var r;const n=M.state.activeCaipAddress,e=tt.state.view==="ConnectingFarcaster",t=!n&&e;if(Xt.history.length>1){Xt.history.pop();const[s]=Xt.history.slice(-1);s&&(n&&s==="Connect"?Xt.view="Account":Xt.view=s)}else Pt.close();(r=Xt.data)!=null&&r.wallet&&(Xt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(t){Fe.setFarcasterUrl(void 0,M.state.activeChain);const l=_e.getAuthConnector();(s=l==null?void 0:l.provider)==null||s.reload();const h=th(ye.state);(o=(i=l==null?void 0:l.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:h.metadata,sdkVersion:h.sdkVersion,projectId:h.projectId,sdkType:h.sdkType})}},100)},goBackToIndex(n){if(Xt.history.length>1){Xt.history=Xt.history.slice(0,n+1);const[e]=Xt.history.slice(-1);e&&(Xt.view=e)}},goBackOrCloseModal(){tt.state.history.length>1?tt.goBack():Pt.close()}},tt=Gs(qz),oo=cn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),q_={state:oo,subscribe(n){return sr(oo,()=>n(oo))},setThemeMode(n){oo.themeMode=n;try{const e=_e.getAuthConnector();if(e){const t=q_.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:n,themeVariables:t,w3mThemeVariables:ko(t,n)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(n){oo.themeVariables={...oo.themeVariables,...n};try{const e=_e.getAuthConnector();if(e){const t=q_.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:ko(oo.themeVariables,oo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return th(oo)}},fs=Gs(q_),N5={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},xt=cn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...N5},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Vz={state:xt,subscribe(n){return sr(xt,()=>{n(xt)})},subscribeKey(n,e){return Dr(xt,n,e)},initialize(n){n.forEach(e=>{const t=ve.getConnectedConnectorId(e);t&&_e.setConnectorId(t,e)})},setActiveConnector(n){n&&(xt.activeConnector=nh(n))},setConnectors(n){n.filter(s=>!xt.allConnectors.some(i=>i.id===s.id&&_e.getConnectorName(i.name)===_e.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&xt.allConnectors.push(nh(s))});const t=_e.getEnabledNamespaces(),r=_e.getEnabledConnectors(t);xt.connectors=_e.mergeMultiChainConnectors(r)},filterByNamespaces(n){Object.keys(xt.filterByNamespaceMap).forEach(e=>{xt.filterByNamespaceMap[e]=!1}),n.forEach(e=>{xt.filterByNamespaceMap[e]=!0}),_e.updateConnectorsForEnabledNamespaces()},filterByNamespace(n,e){xt.filterByNamespaceMap[n]=e,_e.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const n=_e.getEnabledNamespaces(),e=_e.getEnabledConnectors(n),t=_e.areAllNamespacesEnabled();xt.connectors=_e.mergeMultiChainConnectors(e),t?Ge.clearFilterByNamespaces():Ge.filterByNamespaces(n)},getEnabledNamespaces(){return Object.entries(xt.filterByNamespaceMap).filter(([n,e])=>e).map(([n])=>n)},getEnabledConnectors(n){return xt.allConnectors.filter(e=>n.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(xt.filterByNamespaceMap).every(n=>n)},mergeMultiChainConnectors(n){const e=_e.generateConnectorMapByName(n),t=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ce.CONNECTOR_ID.AUTH;r.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&t.push(s)}),t},generateConnectorMapByName(n){const e=new Map;return n.forEach(t=>{const{name:r}=t,s=_e.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(l=>l.chain===t.chain)||i.push(t),e.set(s,i)}),e},getConnectorName(n){return n&&({"Trust Wallet":"Trust"}[n]||n)},getUniqueConnectorsByName(n){const e=[];return n.forEach(t=>{e.find(r=>r.chain===t.chain)||e.push(t)}),e},addConnector(n){var e,t,r;if(n.id===ce.CONNECTOR_ID.AUTH){const s=n,i=th(ye.state),o=fs.getSnapshot().themeMode,l=fs.getSnapshot().themeVariables;(t=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||t.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:l,w3mThemeVariables:ko(l,o)}),_e.setConnectors([n])}else _e.setConnectors([n])},getAuthConnector(n){var r;const e=n||M.state.activeChain,t=xt.connectors.find(s=>s.id===ce.CONNECTOR_ID.AUTH);if(t)return(r=t==null?void 0:t.connectors)!=null&&r.length?t.connectors.find(i=>i.chain===e):t},getAnnouncedConnectorRdns(){return xt.connectors.filter(n=>n.type==="ANNOUNCED").map(n=>{var e;return(e=n.info)==null?void 0:e.rdns})},getConnectorById(n){return xt.allConnectors.find(e=>e.id===n)},getConnector(n,e){return xt.allConnectors.filter(r=>r.chain===M.state.activeChain).find(r=>{var s;return r.explorerId===n||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(n){var i,o;if(n.id!=="ID_AUTH")return;const e=n,t=th(ye.state),r=fs.getSnapshot().themeMode,s=fs.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ko(s,r)})},getConnectorsByNamespace(n){const e=xt.allConnectors.filter(t=>t.chain===n);return _e.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(n){return M.checkIfSmartAccountEnabled()&&qs(n)===jn.ACCOUNT_TYPES.EOA},selectWalletConnector(n){const e=_e.getConnector(n.id,n.rdns);Uz.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||n.id,M.state.activeChain),e?tt.push("ConnectingExternal",{connector:e}):tt.push("ConnectingWalletConnect",{wallet:n})},getConnectors(n){return n?_e.getConnectorsByNamespace(n):_e.mergeMultiChainConnectors(xt.allConnectors)},setFilterByNamespace(n){xt.filterByNamespace=n,xt.connectors=_e.getConnectors(n),Ge.setFilterByNamespace(n)},setConnectorId(n,e){n&&(xt.activeConnectorIds={...xt.activeConnectorIds,[e]:n},ve.setConnectedConnectorId(e,n))},removeConnectorId(n){xt.activeConnectorIds={...xt.activeConnectorIds,[n]:void 0},ve.deleteConnectedConnectorId(n)},getConnectorId(n){if(n)return xt.activeConnectorIds[n]},isConnected(n){return n?!!xt.activeConnectorIds[n]:Object.values(xt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){xt.activeConnectorIds={...N5}}},_e=Gs(Vz),Gz=1e3,Pg={checkNamespaceConnectorId(n,e){return _e.getConnectorId(n)===e},isSocialProvider(n){return $t.DEFAULT_REMOTE_FEATURES.socials.includes(n)},connectWalletConnect({walletConnect:n,connector:e,closeModalOnConnect:t=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,l)=>{if(n&&_e.setActiveConnector(e),s==null||s(Le.isMobile()&&n),r){const d=Pt.subscribeKey("open",p=>{p||(tt.state.view!==r&&tt.replace(r),d(),l(new Error("Modal closed")))})}const h=M.subscribeKey("activeCaipAddress",d=>{d&&(i==null||i(),t&&Pt.close(),h(),o(zr.parseCaipAddress(d)))})})},connectExternal(n){return new Promise((e,t)=>{const r=M.subscribeKey("activeCaipAddress",s=>{s&&(Pt.close(),r(),e(zr.parseCaipAddress(s)))});xe.connectExternal(n,n.chain).catch(()=>{r(),t(new Error("Connection rejected"))})})},connectSocial({social:n,closeModalOnConnect:e=!0,onOpenFarcaster:t,onConnect:r}){let s=Fe.state.socialWindow,i=Fe.state.socialProvider,o=!1,l=null;const h=M.subscribeKey("activeCaipAddress",d=>{d&&(e&&Pt.close(),h())});return new Promise((d,p)=>{async function g(b){var v,E;if((v=b.data)!=null&&v.resultUri)if(b.origin===ce.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",g,!1);try{const A=_e.getAuthConnector();if(A&&!o){s&&(s.close(),Fe.setSocialWindow(void 0,M.state.activeChain),s=Fe.state.socialWindow),o=!0;const S=b.data.resultUri;if(i&&Gt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){ve.setConnectedSocialProvider(i),await xe.connectExternal({id:A.id,type:A.type,socialUri:S},A.chain);const x=M.state.activeCaipAddress;if(!x){p(new Error("Failed to connect"));return}d(zr.parseCaipAddress(x)),Gt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(E=M.getActiveCaipNetwork())==null?void 0:E.caipNetworkId}})}}}catch{i&&Gt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),p(new Error("Failed to connect"))}}else i&&Gt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function y(){if(n&&(Fe.setSocialProvider(n,M.state.activeChain),i=Fe.state.socialProvider,Gt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){t==null||t();const b=Pt.subscribeKey("open",E=>{!E&&n==="farcaster"&&(p(new Error("Popup closed")),r==null||r(),b())}),v=_e.getAuthConnector();if(v&&!Fe.state.farcasterUrl)try{const{url:E}=await v.provider.getFarcasterUri();Fe.setFarcasterUrl(E,M.state.activeChain)}catch{p(new Error("Failed to connect to farcaster"))}}else{const b=_e.getAuthConnector();l=Le.returnOpenHref(`${ce.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(b&&i){const{uri:v}=await b.provider.getSocialRedirectUri({provider:i});if(l&&v){Fe.setSocialWindow(l,M.state.activeChain),s=Fe.state.socialWindow,l.location.href=v;const E=setInterval(()=>{s!=null&&s.closed&&!o&&(p(new Error("Popup closed")),clearInterval(E))},1e3);window.addEventListener("message",g,!1)}else l==null||l.close(),p(new Error("Failed to initiate social connection"))}}catch{p(new Error("Failed to initiate social connection")),l==null||l.close()}}}y()})},connectEmail({closeModalOnConnect:n=!0,redirectViewOnModalClose:e="Connect",onOpen:t,onConnect:r}){return new Promise((s,i)=>{if(t==null||t(),e){const l=Pt.subscribeKey("open",h=>{h||(tt.state.view!==e&&tt.replace(e),l(),i(new Error("Modal closed")))})}const o=M.subscribeKey("activeCaipAddress",l=>{l&&(r==null||r(),n&&Pt.close(),o(),s(zr.parseCaipAddress(l)))})})},async updateEmail(){const n=ve.getConnectedConnectorId(M.state.activeChain),e=_e.getAuthConnector();if(!e)throw new Error("No auth connector found");if(n!==ce.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const t=e.provider.getEmail()??"";return tt.push("UpdateEmailWallet",{email:t,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const l=e.provider.getEmail()??"";l!==t&&(Pt.close(),clearInterval(i),o(),r({email:l}))},Gz),o=Pt.subscribeKey("open",l=>{l||(tt.state.view!=="Connect"&&tt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(n){return M.checkIfSmartAccountEnabled()&&qs(n)===jn.ACCOUNT_TYPES.EOA}};function T5(){var r,s;const n=((r=M.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=M.state.activeCaipNetwork)==null?void 0:s.id)||1,t=$t.NATIVE_TOKEN_ADDRESS[n];return`${n}:${e}:${t}`}function qs(n){var t;return(t=M.getAccountData(n))==null?void 0:t.preferredAccountType}const Wb={getConnectionStatus(n,e){const t=_e.state.activeConnectorIds[e],r=xe.getConnections(e);return!!t&&n.connectorId===t?"connected":r.some(o=>o.connectorId.toLowerCase()===n.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:n,connectorId:e,addresses:t}){return n.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&t){const i=r.accounts.filter(o=>!t.some(h=>h.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(n,e){const t=new Set(n);return e.filter(r=>!t.has(r.connectorId))},getConnectionsByConnectorId(n,e){return n.filter(t=>t.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(n){var l;const e=!!((l=ye.state.remoteFeatures)!=null&&l.multiWallet),t=_e.state.activeConnectorIds[n],r=xe.getConnections(n),i=(xe.state.recentConnections.get(n)??[]).filter(h=>_e.getConnectorById(h.connectorId)),o=Wb.excludeExistingConnections([...r.map(h=>h.connectorId),...t?[t]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(h=>h.connectorId.toLowerCase()===(t==null?void 0:t.toLowerCase())),recentConnections:[]}}},nu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ln=cn({...nu}),Kz={state:Ln,subscribeKey(n,e){return Dr(Ln,n,e)},showLoading(n,e={}){this._showMessage({message:n,variant:"loading",...e})},showSuccess(n){this._showMessage({message:n,variant:"success"})},showSvg(n,e){this._showMessage({message:n,svg:e})},showError(n){const e=Le.parseError(n);this._showMessage({message:e,variant:"error"})},hide(){Ln.message=nu.message,Ln.variant=nu.variant,Ln.svg=nu.svg,Ln.open=nu.open,Ln.autoClose=nu.autoClose},_showMessage({message:n,svg:e,variant:t="success",autoClose:r=nu.autoClose}){Ln.open?(Ln.open=!1,setTimeout(()=>{Ln.message=n,Ln.variant=t,Ln.svg=e,Ln.open=!0,Ln.autoClose=r},150)):(Ln.message=n,Ln.variant=t,Ln.svg=e,Ln.open=!0,Ln.autoClose=r)}},ka=Kz,fn=cn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Wz={state:fn,subscribe(n){return sr(fn,()=>n(fn))},setLastNetworkInView(n){fn.lastNetworkInView=n},async fetchTransactions(n){var e;if(!n)throw new Error("Transactions can't be fetched without an accountAddress");fn.loading=!0;try{const t=await We.fetchTransactions({account:n,cursor:fn.next,chainId:(e=M.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=bb.filterSpamTransactions(t.data),s=bb.filterByConnectedChain(r),i=[...fn.transactions,...s];fn.loading=!1,fn.transactions=i,fn.transactionsByYear=bb.groupTransactionsByYearAndMonth(fn.transactionsByYear,s),fn.empty=i.length===0,fn.next=t.next?t.next:void 0}catch{const r=M.state.activeChain;Gt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:n,projectId:ye.state.projectId,cursor:fn.next,isSmartAccount:qs(r)===jn.ACCOUNT_TYPES.SMART_ACCOUNT}}),ka.showError("Failed to fetch transactions"),fn.loading=!1,fn.empty=!0,fn.next=void 0}},groupTransactionsByYearAndMonth(n={},e=[]){const t=n;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=t[s]??{},h=(o[i]??[]).filter(d=>d.id!==r.id);t[s]={...o,[i]:[...h,r].sort((d,p)=>new Date(p.metadata.minedAt).getTime()-new Date(d.metadata.minedAt).getTime())}}),t},filterSpamTransactions(n){return n.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(n){var r;const e=(r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return n.filter(s=>s.metadata.chain===e)},clearCursor(){fn.next=void 0},resetTransactions(){fn.transactions=[],fn.transactionsByYear={},fn.lastNetworkInView=void 0,fn.loading=!1,fn.empty=!1,fn.next=void 0}},bb=Gs(Wz,"API_ERROR"),_t=cn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Gl;const Yz={state:_t,subscribe(n){return sr(_t,()=>n(_t))},subscribeKey(n,e){return Dr(_t,n,e)},_getClient(){return _t._client},setClient(n){_t._client=nh(n)},initialize(n){const e=n.filter(t=>!!t.namespace).map(t=>t.namespace);xe.syncStorageConnections(e)},syncStorageConnections(n){const e=ve.getConnections(),t=n??Array.from(M.state.chains.keys());for(const r of t){const s=e[r]??[],i=new Map(_t.recentConnections);i.set(r,s),_t.recentConnections=i}},getConnections(n){return n?_t.connections.get(n)??[]:[]},hasAnyConnection(n){const e=xe.state.connections;return Array.from(e.values()).flatMap(t=>t).some(({connectorId:t})=>t===n)},async connectWalletConnect(){var n,e,t,r;if(Le.isTelegram()||Le.isSafari()&&Le.isIos()){if(Gl){await Gl,Gl=void 0;return}if(!Le.isPairingExpired(_t==null?void 0:_t.wcPairingExpiry)){const s=_t.wcUri;_t.wcUri=s;return}Gl=(e=(n=xe._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:e.call(n).catch(()=>{}),xe.state.status="connecting",await Gl,Gl=void 0,_t.wcPairingExpiry=void 0,xe.state.status="connected"}else await((r=(t=xe._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:r.call(t))},async connectExternal(n,e,t=!0){var s,i;const r=await((i=(s=xe._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,n));return t&&M.setActiveNamespace(e),r},async reconnectExternal(n){var t,r;await((r=(t=xe._getClient())==null?void 0:t.reconnectExternal)==null?void 0:r.call(t,n));const e=n.chain||M.state.activeChain;e&&_e.setConnectorId(n.id,e)},async setPreferredAccountType(n,e){var r;if(!e)return;Pt.setLoading(!0,M.state.activeChain);const t=_e.getAuthConnector();t&&(Fe.setPreferredAccountType(n,e),await t.provider.setPreferredAccount(n),ve.setPreferredAccountTypes(Object.entries(M.state.chains).reduce((s,[i,o])=>{const l=i,h=qs(l);return h!==void 0&&(s[l]=h),s},{})),await xe.reconnectExternal(t),Pt.setLoading(!1,M.state.activeChain),Gt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:n,network:((r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(n){var e;return(e=xe._getClient())==null?void 0:e.signMessage(n)},parseUnits(n,e){var t;return(t=xe._getClient())==null?void 0:t.parseUnits(n,e)},formatUnits(n,e){var t;return(t=xe._getClient())==null?void 0:t.formatUnits(n,e)},async sendTransaction(n){var e;return(e=xe._getClient())==null?void 0:e.sendTransaction(n)},async getCapabilities(n){var e;return(e=xe._getClient())==null?void 0:e.getCapabilities(n)},async grantPermissions(n){var e;return(e=xe._getClient())==null?void 0:e.grantPermissions(n)},async walletGetAssets(n){var e;return((e=xe._getClient())==null?void 0:e.walletGetAssets(n))??{}},async estimateGas(n){var e;return(e=xe._getClient())==null?void 0:e.estimateGas(n)},async writeContract(n){var e;return(e=xe._getClient())==null?void 0:e.writeContract(n)},async getEnsAddress(n){var e;return(e=xe._getClient())==null?void 0:e.getEnsAddress(n)},async getEnsAvatar(n){var e;return(e=xe._getClient())==null?void 0:e.getEnsAvatar(n)},checkInstalled(n){var e,t;return((t=(e=xe._getClient())==null?void 0:e.checkInstalled)==null?void 0:t.call(e,n))||!1},resetWcConnection(){_t.wcUri=void 0,_t.wcPairingExpiry=void 0,_t.wcLinking=void 0,_t.recentWallet=void 0,_t.status="disconnected",bb.resetTransactions(),ve.deleteWalletConnectDeepLink()},resetUri(){_t.wcUri=void 0,_t.wcPairingExpiry=void 0,Gl=void 0},finalizeWcConnection(){var t,r,s;const{wcLinking:n,recentWallet:e}=xe.state;n&&ve.setWalletConnectDeepLink(n),e&&ve.setAppKitRecent(e),Gt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:n?"mobile":"qrcode",name:((r=(t=tt.state.data)==null?void 0:t.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=M.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(n){_t.wcBasic=n},setUri(n){_t.wcUri=n,_t.wcPairingExpiry=Le.getPairingExpiry()},setWcLinking(n){_t.wcLinking=n},setWcError(n){_t.wcError=n,_t.buffering=!1},setRecentWallet(n){_t.recentWallet=n},setBuffering(n){_t.buffering=n},setStatus(n){_t.status=n},setIsSwitchingConnection(n){_t.isSwitchingConnection=n},async disconnect({id:n,namespace:e,initialDisconnect:t}={}){var r;try{await((r=xe._getClient())==null?void 0:r.disconnect({id:n,chainNamespace:e,initialDisconnect:t}))}catch(s){throw new np("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(n,e){const t=new Map(_t.connections);t.set(e,n),_t.connections=t},async handleAuthAccountSwitch({address:n,namespace:e}){var s,i;const t=(i=(s=Fe.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=t&&t.address.toLowerCase()===n.toLowerCase()&&Pg.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await xe.setPreferredAccountType(r,e)},async handleActiveConnection({connection:n,namespace:e,address:t}){const r=_e.getConnectorById(n.connectorId),s=n.connectorId===ce.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${n.connectorId}`);if(s)s&&t&&await xe.handleAuthAccountSwitch({address:t,namespace:e});else{const i=await xe.connectExternal({id:r.id,type:r.type,provider:r.provider,address:t,chain:e},e);return i==null?void 0:i.address}return t},async handleDisconnectedConnection({connection:n,namespace:e,address:t,closeModalOnConnect:r}){var d,p;const s=_e.getConnectorById(n.connectorId),i=(p=(d=n.auth)==null?void 0:d.name)==null?void 0:p.toLowerCase(),o=n.connectorId===ce.CONNECTOR_ID.AUTH,l=n.connectorId===ce.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${n.connectorId}`);let h;if(o)if(i&&Pg.isSocialProvider(i)){const{address:g}=await Pg.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Pt.open({view:"ConnectingFarcaster"})},onConnect(){tt.replace("ProfileWallets")}});h=g}else{const{address:g}=await Pg.connectEmail({closeModalOnConnect:r,onOpen(){Pt.open({view:"EmailLogin"})},onConnect(){tt.replace("ProfileWallets")}});h=g}else if(l){const{address:g}=await Pg.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(y){Pt.open({view:y?"AllWallets":"ConnectingWalletConnect"})},onConnect(){tt.replace("ProfileWallets")}});h=g}else{const g=await xe.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);g&&(h=g.address)}return o&&t&&await xe.handleAuthAccountSwitch({address:t,namespace:e}),h},async switchConnection({connection:n,address:e,namespace:t,closeModalOnConnect:r,onChange:s}){let i;const o=Fe.getCaipAddress(t);if(o){const{address:h}=zr.parseCaipAddress(o);i=h}const l=Wb.getConnectionStatus(n,t);switch(l){case"connected":case"active":{const h=await xe.handleActiveConnection({connection:n,namespace:t,address:e});if(i&&h){const d=h.toLowerCase()!==i.toLowerCase();s==null||s({address:h,namespace:t,hasSwitchedAccount:d,hasSwitchedWallet:l==="active"})}break}case"disconnected":{const h=await xe.handleDisconnectedConnection({connection:n,namespace:t,address:e,closeModalOnConnect:r});h&&(s==null||s({address:h,namespace:t,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${l}`)}}},xe=Gs(Yz),dd=cn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ma={state:dd,subscribe(n){return sr(dd,()=>n(dd))},subscribeOpen(n){return Dr(dd,"open",n)},set(n){Object.assign(dd,{...dd,...n})}},Qz={async getTokenList(){var r;const n=M.state.activeCaipNetwork,e=await We.fetchSwapTokens({chainId:n==null?void 0:n.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const n=M.state.activeCaipNetwork;if(!n)return null;try{switch(n.chainNamespace){case"solana":const t=(e=await(xe==null?void 0:xe.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:t,fast:t,instant:t};case"eip155":default:return await We.fetchGasPrice({chainId:n.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:n,userAddress:e,sourceTokenAmount:t,sourceTokenDecimals:r}){const s=await We.fetchSwapAllowance({tokenAddress:n,userAddress:e});if(s!=null&&s.allowance&&t&&r){const i=xe.parseUnits(t,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(n){const e=await vS.getMyTokensWithBalance(n);return Fe.setTokenBalance(e,M.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(n){return(n==null?void 0:n.map(e=>({...e,address:e!=null&&e.address?e.address:T5(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Vt=cn({tokenBalances:[],loading:!1}),Zz={state:Vt,subscribe(n){return sr(Vt,()=>n(Vt))},subscribeKey(n,e){return Dr(Vt,n,e)},setToken(n){n&&(Vt.token=nh(n))},setTokenAmount(n){Vt.sendTokenAmount=n},setReceiverAddress(n){Vt.receiverAddress=n},setReceiverProfileImageUrl(n){Vt.receiverProfileImageUrl=n},setReceiverProfileName(n){Vt.receiverProfileName=n},setNetworkBalanceInUsd(n){Vt.networkBalanceInUSD=n},setLoading(n){Vt.loading=n},async sendToken(){var n;try{switch(Mt.setLoading(!0),(n=M.state.activeCaipNetwork)==null?void 0:n.chainNamespace){case"eip155":await Mt.sendEvmToken();return;case"solana":await Mt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Mt.setLoading(!1)}},async sendEvmToken(){var t,r,s;const n=M.state.activeChain;if(!n)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=qs(n);if(!Mt.state.sendTokenAmount||!Mt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Mt.state.token)throw new Error("A token is required");(t=Mt.state.token)!=null&&t.address?(Gt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===jn.ACCOUNT_TYPES.SMART_ACCOUNT,token:Mt.state.token.address,amount:Mt.state.sendTokenAmount,network:((r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Mt.sendERC20Token({receiverAddress:Mt.state.receiverAddress,tokenAddress:Mt.state.token.address,sendTokenAmount:Mt.state.sendTokenAmount,decimals:Mt.state.token.quantity.decimals})):(Gt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===jn.ACCOUNT_TYPES.SMART_ACCOUNT,token:Mt.state.token.symbol||"",amount:Mt.state.sendTokenAmount,network:((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Mt.sendNativeToken({receiverAddress:Mt.state.receiverAddress,sendTokenAmount:Mt.state.sendTokenAmount,decimals:Mt.state.token.quantity.decimals}))},async fetchTokenBalance(n){var i,o;Vt.loading=!0;const e=(i=M.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=M.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=M.state.activeCaipAddress,s=r?Le.getPlainAddress(r):void 0;if(Vt.lastRetry&&!Le.isAllowedRetry(Vt.lastRetry,30*$t.ONE_SEC_MS))return Vt.loading=!1,[];try{if(s&&e&&t){const l=await vS.getMyTokensWithBalance();return Vt.tokenBalances=l,Vt.lastRetry=void 0,l}}catch(l){Vt.lastRetry=Date.now(),n==null||n(l),ka.showError("Token Balance Unavailable")}finally{Vt.loading=!1}return[]},fetchNetworkBalance(){if(Vt.tokenBalances.length===0)return;const n=Qz.mapBalancesToSwapTokens(Vt.tokenBalances);if(!n)return;const e=n.find(t=>t.address===T5());e&&(Vt.networkBalanceInUSD=e?wz.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(n){var i,o,l;tt.pushTransactionStack({});const e=n.receiverAddress,t=Fe.state.address,r=xe.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));await xe.sendTransaction({chainNamespace:ce.CHAIN.EVM,to:e,address:t,data:"0x",value:r??BigInt(0)}),Gt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:qs("eip155")===jn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Mt.state.token)==null?void 0:i.symbol)||"",amount:n.sendTokenAmount,network:((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(l=xe._getClient())==null||l.updateBalance("eip155"),Mt.resetSend()},async sendERC20Token(n){tt.pushTransactionStack({onSuccess(){tt.replace("Account")}});const e=xe.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));if(Fe.state.address&&n.sendTokenAmount&&n.receiverAddress&&n.tokenAddress){const t=Le.getPlainAddress(n.tokenAddress);if(!t)throw new Error("SendController:sendERC20Token - tokenAddress is required");await xe.writeContract({fromAddress:Fe.state.address,tokenAddress:t,args:[n.receiverAddress,e??BigInt(0)],method:"transfer",abi:Az.getERC20Abi(t),chainNamespace:ce.CHAIN.EVM}),Mt.resetSend()}},async sendSolanaToken(){var n;if(!Mt.state.sendTokenAmount||!Mt.state.receiverAddress)throw new Error("An amount and receiver address are required");tt.pushTransactionStack({onSuccess(){tt.replace("Account")}}),await xe.sendTransaction({chainNamespace:"solana",to:Mt.state.receiverAddress,value:Mt.state.sendTokenAmount}),(n=xe._getClient())==null||n.updateBalance("solana"),Mt.resetSend()},resetSend(){Vt.token=void 0,Vt.sendTokenAmount=void 0,Vt.receiverAddress=void 0,Vt.receiverProfileImageUrl=void 0,Vt.receiverProfileName=void 0,Vt.loading=!1,Vt.tokenBalances=[]}},Mt=Gs(Zz),nC={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Bw={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ie=cn({chains:lz(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Xz={state:Ie,subscribe(n){return sr(Ie,()=>{n(Ie)})},subscribeKey(n,e){return Dr(Ie,n,e)},subscribeChainProp(n,e,t){let r;return sr(Ie.chains,()=>{var i;const s=t||Ie.activeChain;if(s){const o=(i=Ie.chains.get(s))==null?void 0:i[n];r!==o&&(r=o,e(o))}})},initialize(n,e,t){const{chainId:r,namespace:s}=ve.getActiveNetworkProps(),i=e==null?void 0:e.find(p=>p.id.toString()===(r==null?void 0:r.toString())),l=n.find(p=>(p==null?void 0:p.namespace)===s)||(n==null?void 0:n[0]),h=n.map(p=>p.namespace).filter(p=>p!==void 0),d=ye.state.enableEmbedded?new Set([...h]):new Set([...(e==null?void 0:e.map(p=>p.chainNamespace))??[]]);((n==null?void 0:n.length)===0||!l)&&(Ie.noAdapters=!0),Ie.noAdapters||(Ie.activeChain=l==null?void 0:l.namespace,Ie.activeCaipNetwork=i,M.setChainNetworkData(l==null?void 0:l.namespace,{caipNetwork:i}),Ie.activeChain&&Ma.set({activeChain:l==null?void 0:l.namespace})),d.forEach(p=>{const g=e==null?void 0:e.filter(v=>v.chainNamespace===p),y=ve.getPreferredAccountTypes()||{},b={...ye.state.defaultAccountTypes,...y};M.state.chains.set(p,{namespace:p,networkState:cn({...Bw,caipNetwork:g==null?void 0:g[0]}),accountState:cn({...nC,preferredAccountType:b[p]}),caipNetworks:g??[],...t}),M.setRequestedCaipNetworks(g??[],p)})},removeAdapter(n){var e,t;if(Ie.activeChain===n){const r=Array.from(Ie.chains.entries()).find(([s])=>s!==n);if(r){const s=(t=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:t[0];s&&M.setActiveCaipNetwork(s)}}Ie.chains.delete(n)},addAdapter(n,{networkControllerClient:e,connectionControllerClient:t},r){if(!n.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ie.chains.set(n.namespace,{namespace:n.namespace,networkState:{...Bw,caipNetwork:r[0]},accountState:nC,caipNetworks:r,connectionControllerClient:t,networkControllerClient:e}),M.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===n.namespace))??[],n.namespace)},addNetwork(n){var t;const e=Ie.chains.get(n.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(t=e.caipNetworks)!=null&&t.find(s=>s.id===n.id)||r.push(n),Ie.chains.set(n.chainNamespace,{...e,caipNetworks:r}),M.setRequestedCaipNetworks(r,n.chainNamespace),_e.filterByNamespace(n.chainNamespace,!0)}},removeNetwork(n,e){var r,s,i;const t=Ie.chains.get(n);if(t){const o=((r=Ie.activeCaipNetwork)==null?void 0:r.id)===e,l=[...((s=t.caipNetworks)==null?void 0:s.filter(h=>h.id!==e))||[]];o&&((i=t==null?void 0:t.caipNetworks)!=null&&i[0])&&M.setActiveCaipNetwork(t.caipNetworks[0]),Ie.chains.set(n,{...t,caipNetworks:l}),M.setRequestedCaipNetworks(l||[],n),l.length===0&&_e.filterByNamespace(n,!1)}},setAdapterNetworkState(n,e){const t=Ie.chains.get(n);t&&(t.networkState={...t.networkState||Bw,...e},Ie.chains.set(n,t))},setChainAccountData(n,e,t=!0){if(!n)throw new Error("Chain is required to update chain account data");const r=Ie.chains.get(n);if(r){const s={...r.accountState||nC,...e};Ie.chains.set(n,{...r,accountState:s}),(Ie.chains.size===1||Ie.activeChain===n)&&(e.caipAddress&&(Ie.activeCaipAddress=e.caipAddress),Fe.replaceState(s))}},setChainNetworkData(n,e){if(!n)return;const t=Ie.chains.get(n);if(t){const r={...t.networkState||Bw,...e};Ie.chains.set(n,{...t,networkState:r})}},setAccountProp(n,e,t,r=!0){M.setChainAccountData(t,{[n]:e},r)},setActiveNamespace(n){var r,s;Ie.activeChain=n;const e=n?Ie.chains.get(n):void 0,t=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;t!=null&&t.id&&n&&(Ie.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ie.activeCaipNetwork=t,M.setChainNetworkData(n,{caipNetwork:t}),ve.setActiveCaipNetworkId(t==null?void 0:t.caipNetworkId),Ma.set({activeChain:n,selectedNetworkId:t==null?void 0:t.caipNetworkId}))},setActiveCaipNetwork(n){var r,s,i;if(!n)return;Ie.activeChain!==n.chainNamespace&&M.setIsSwitchingNamespace(!0);const e=Ie.chains.get(n.chainNamespace);Ie.activeChain=n.chainNamespace,Ie.activeCaipNetwork=n,M.setChainNetworkData(n.chainNamespace,{caipNetwork:n}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ie.activeCaipAddress=`${n.chainNamespace}:${n.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ie.activeCaipAddress=void 0,M.setAccountProp("caipAddress",Ie.activeCaipAddress,n.chainNamespace),e&&Fe.replaceState(e.accountState),Mt.resetSend(),Ma.set({activeChain:Ie.activeChain,selectedNetworkId:(i=Ie.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ve.setActiveCaipNetworkId(n.caipNetworkId),!M.checkIfSupportedNetwork(n.chainNamespace)&&ye.state.enableNetworkSwitch&&!ye.state.allowUnsupportedChain&&!xe.state.wcBasic&&M.showUnsupportedChainUI()},addCaipNetwork(n){var t;if(!n)return;const e=Ie.chains.get(n.chainNamespace);e&&((t=e==null?void 0:e.caipNetworks)==null||t.push(n))},async switchActiveNamespace(n){var s;if(!n)return;const e=n!==M.state.activeChain,t=(s=M.getNetworkData(n))==null?void 0:s.caipNetwork,r=M.getCaipNetworkByNamespace(n,t==null?void 0:t.id);e&&r&&await M.switchActiveNetwork(r)},async switchActiveNetwork(n){var i;const e=M.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const t=M.state.chains.get(e),r=!((i=t==null?void 0:t.caipNetworks)!=null&&i.some(o=>{var l;return o.id===((l=Ie.activeCaipNetwork)==null?void 0:l.id)})),s=M.getNetworkControllerClient(n.chainNamespace);if(s){try{await s.switchCaipNetwork(n),r&&Pt.close()}catch{tt.goBack()}Gt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:n.caipNetworkId}})}},getNetworkControllerClient(n){const e=n||Ie.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const t=Ie.chains.get(e);if(!t)throw new Error("Chain adapter not found");if(!t.networkControllerClient)throw new Error("NetworkController client not set");return t.networkControllerClient},getConnectionControllerClient(n){const e=n||Ie.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const t=Ie.chains.get(e);if(!(t!=null&&t.connectionControllerClient))throw new Error("ConnectionController client not set");return t.connectionControllerClient},getAccountProp(n,e){var s;let t=Ie.activeChain;if(e&&(t=e),!t)return;const r=(s=Ie.chains.get(t))==null?void 0:s.accountState;if(r)return r[n]},getNetworkProp(n,e){var r;const t=(r=Ie.chains.get(e))==null?void 0:r.networkState;if(t)return t[n]},getRequestedCaipNetworks(n){const e=Ie.chains.get(n),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Le.sortRequestedNetworks(t,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const n=[];return Ie.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const t=M.getRequestedCaipNetworks(e.namespace);n.push(...t)}),n},setRequestedCaipNetworks(n,e){M.setAdapterNetworkState(e,{requestedCaipNetworks:n});const r=M.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));_e.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const n=[];return Ie.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const t=M.getApprovedCaipNetworkIds(e.namespace);n.push(...t)}),n},getActiveCaipNetwork(n){var e,t;return n?(t=(e=Ie.chains.get(n))==null?void 0:e.networkState)==null?void 0:t.caipNetwork:Ie.activeCaipNetwork},getActiveCaipAddress(){return Ie.activeCaipAddress},getApprovedCaipNetworkIds(n){var r;const e=Ie.chains.get(n);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(n){const e=M.getNetworkControllerClient(),t=await(e==null?void 0:e.getApprovedCaipNetworksData());M.setAdapterNetworkState(n,{approvedCaipNetworkIds:t==null?void 0:t.approvedCaipNetworkIds,supportsAllNetworks:t==null?void 0:t.supportsAllNetworks})},checkIfSupportedNetwork(n,e){const t=e||Ie.activeCaipNetwork,r=M.getRequestedCaipNetworks(n);return r.length?r==null?void 0:r.some(s=>s.id===(t==null?void 0:t.id)):!0},checkIfSupportedChainId(n){if(!Ie.activeChain)return!0;const e=M.getRequestedCaipNetworks(Ie.activeChain);return e==null?void 0:e.some(t=>t.id===n)},setSmartAccountEnabledNetworks(n,e){M.setAdapterNetworkState(e,{smartAccountEnabledNetworks:n})},checkIfSmartAccountEnabled(){var r;const n=v5.caipNetworkIdToNumber((r=Ie.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ie.activeChain;if(!e||!n)return!1;const t=M.getNetworkProp("smartAccountEnabledNetworks",e);return!!(t!=null&&t.includes(Number(n)))},showUnsupportedChainUI(){Pt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const n=Ie.activeCaipNetwork;return!!(n!=null&&n.chainNamespace&&$t.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(n.chainNamespace))},resetNetwork(n){M.setAdapterNetworkState(n,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(n){const e=n;if(!e)throw new Error("Chain is required to set account prop");const t=ye.state.defaultAccountTypes[e],r=M.getAccountProp("preferredAccountType",e);Ie.activeCaipAddress=void 0,M.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:t||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),_e.removeConnectorId(e)},setIsSwitchingNamespace(n){Ie.isSwitchingNamespace=n},getFirstCaipNetworkSupportsAuthConnector(){var t,r;const n=[];let e;if(Ie.chains.forEach(s=>{ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&n.push(s.namespace)}),n.length>0){const s=n[0];return e=s?(r=(t=Ie.chains.get(s))==null?void 0:t.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(n){var e;return n?(e=M.state.chains.get(n))==null?void 0:e.accountState:Fe.state},getNetworkData(n){var t;const e=n||Ie.activeChain;if(e)return(t=M.state.chains.get(e))==null?void 0:t.networkState},getCaipNetworkByNamespace(n,e){var s,i,o;if(!n)return;const t=M.state.chains.get(n),r=(s=t==null?void 0:t.caipNetworks)==null?void 0:s.find(l=>l.id===e);return r||((i=t==null?void 0:t.networkState)==null?void 0:i.caipNetwork)||((o=t==null?void 0:t.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const n=_e.state.filterByNamespace;return(n?[Ie.chains.get(n)]:Array.from(Ie.chains.values())).flatMap(t=>(t==null?void 0:t.caipNetworks)||[]).map(t=>t.caipNetworkId)},getCaipNetworks(n){return n?M.getRequestedCaipNetworks(n):M.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(n){Ie.lastConnectedSIWECaipNetwork=n},getLastConnectedSIWECaipNetwork(){return Ie.lastConnectedSIWECaipNetwork}},M=Gs(Xz),Jz={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},x5=Le.getBlockchainApiUrl(),rs=cn({clientId:null,api:new Y0({baseUrl:x5,clientId:null}),supportedChains:{http:[],ws:[]}}),We={state:rs,async get(n){const{st:e,sv:t}=We.getSdkProperties(),r=ye.state.projectId,s={...n.params||{},st:e,sv:t,projectId:r};return rs.api.get({...n,params:s})},getSdkProperties(){const{sdkType:n,sdkVersion:e}=ye.state;return{st:n||"unknown",sv:e||"unknown"}},async isNetworkSupported(n){if(!n)return!1;try{rs.supportedChains.http.length||await We.getSupportedNetworks()}catch{return!1}return rs.supportedChains.http.includes(n)},async getSupportedNetworks(){try{const n=await We.get({path:"v1/supported-chains"});return rs.supportedChains=n,n}catch{return rs.supportedChains}},async fetchIdentity({address:n,caipNetworkId:e}){if(!await We.isNetworkSupported(e))return{avatar:"",name:""};const r=ve.getIdentityFromCacheForAddress(n);if(r)return r;const s=await We.get({path:`/v1/identity/${n}`,params:{sender:M.state.activeCaipAddress?Le.getPlainAddress(M.state.activeCaipAddress):void 0}});return ve.updateIdentityCache({address:n,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:n,cursor:e,signal:t,cache:r,chainId:s}){var o;return await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?We.get({path:`/v1/account/${n}/history`,params:{cursor:e,chainId:s},signal:t,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:n,userAddress:e,from:t,to:r,gasPrice:s}){var o;return await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?We.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:n,userAddress:e,from:t,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:n}){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:"/v1/convert/tokens",params:{chainId:n}}):{tokens:[]}},async fetchTokenPrice({addresses:n}){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?rs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:n,projectId:ye.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:n,userAddress:e}){var r;return await We.isNetworkSupported((r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?We.get({path:"/v1/convert/allowance",params:{tokenAddress:n,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:n}){var s;const{st:e,sv:t}=We.getSdkProperties();if(!await We.isNetworkSupported((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return We.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:n,st:e,sv:t}})},async generateSwapCalldata({amount:n,from:e,to:t,userAddress:r,disableEstimate:s}){var o;if(!await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return rs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:n,eip155:{slippage:$t.CONVERT_SLIPPAGE_TOLERANCE},projectId:ye.state.projectId,from:e,to:t,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:n,to:e,userAddress:t}){var o;const{st:r,sv:s}=We.getSdkProperties();if(!await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return We.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:n,to:e,st:r,sv:s}})},async getBalance(n,e,t){var d;const{st:r,sv:s}=We.getSdkProperties();if(!await We.isNetworkSupported((d=M.state.activeCaipNetwork)==null?void 0:d.caipNetworkId))return ka.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${n}`,l=ve.getBalanceCacheForCaipAddress(o);if(l)return l;const h=await We.get({path:`/v1/account/${n}/balance`,params:{currency:"usd",chainId:e,forceUpdate:t,st:r,sv:s}});return ve.updateBalanceCache({caipAddress:o,balance:h,timestamp:Date.now()}),h},async lookupEnsName(n){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/profile/account/${n}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:n}){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/profile/reverse/${n}`,params:{sender:Fe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(n){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/profile/suggestions/${n}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:n,address:e,message:t,signature:r}){var i;return await We.isNetworkSupported((i=M.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?rs.api.post({path:"/v1/profile/account",body:{coin_type:n,address:e,message:t,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:n,partnerUserId:e,defaultNetwork:t,purchaseAmount:r,paymentAmount:s}){var l;return await We.isNetworkSupported((l=M.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)?(await rs.api.post({path:"/v1/generators/onrampurl",params:{projectId:ye.state.projectId},body:{destinationWallets:n,defaultNetwork:t,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await We.isNetworkSupported((e=M.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await We.get({path:"/v1/onramp/options"})}catch{return Jz}},async getOnrampQuote({purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}){var s;try{return await We.isNetworkSupported((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await rs.api.post({path:"/v1/onramp/quote",params:{projectId:ye.state.projectId},body:{purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}}):null}catch{return{networkFee:{amount:t,currency:e.id},paymentSubtotal:{amount:t,currency:e.id},paymentTotal:{amount:t,currency:e.id},purchaseAmount:{amount:t,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(n){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/sessions/${n}`}):[]},async revokeSmartSession(n,e,t){var s;return await We.isNetworkSupported((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?rs.api.post({path:`/v1/sessions/${n}/revoke`,params:{projectId:ye.state.projectId},body:{pci:e,signature:t}}):{success:!1}},setClientId(n){rs.clientId=n,rs.api=new Y0({baseUrl:x5,clientId:n})}};function ej(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function B3(n){return ej(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const I5="2.31.7";let Ug={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${I5}`},ea=class V_ extends Error{constructor(e,t={}){var l;const r=(()=>{var h;return t.cause instanceof V_?t.cause.details:(h=t.cause)!=null&&h.message?t.cause.message:t.details})(),s=t.cause instanceof V_&&t.cause.docsPath||t.docsPath,i=(l=Ug.getDocsUrl)==null?void 0:l.call(Ug,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Ug.version?[`Version: ${Ug.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=I5}walk(e){return O5(this,e)}};function O5(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?O5(n.cause,e):e?null:n}class Che extends ea{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let R5=class extends ea{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function yS(n,{dir:e,size:t=32}={}){return typeof n=="string"?tj(n,{dir:e,size:t}):nj(n,{dir:e,size:t})}function tj(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new R5({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function nj(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new R5({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}let rj=class extends ea{constructor({max:e,min:t,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},sj=class extends ea{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function D5(n,{size:e}){if(B3(n)>e)throw new sj({givenSize:B3(n),maxSize:e})}const ij=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function L3(n,e={}){return typeof n=="number"||typeof n=="bigint"?oj(n,e):typeof n=="string"?U5(n,e):typeof n=="boolean"?aj(n,e):P5(n,e)}function aj(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(D5(t,{size:e.size}),yS(t,{size:e.size})):t}function P5(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=ij[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(D5(r,{size:e.size}),yS(r,{dir:"right",size:e.size})):r}function oj(n,e={}){const{signed:t,size:r}=e,s=BigInt(n);let i;r?t?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const h=typeof n=="bigint"?"n":"";throw new rj({max:i?`${i}${h}`:void 0,min:`${o}${h}`,signed:t,size:r,value:`${n}${h}`})}const l=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?yS(l,{size:r}):l}const cj=new TextEncoder;function U5(n,e={}){const t=cj.encode(n);return P5(t,e)}const Lw=BigInt(2**32-1),M3=BigInt(32);function lj(n,e=!1){return e?{h:Number(n&Lw),l:Number(n>>M3&Lw)}:{h:Number(n>>M3&Lw)|0,l:Number(n&Lw)|0}}function uj(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l}=lj(n[i],e);[r[i],s[i]]=[o,l]}return[r,s]}const hj=(n,e,t)=>n<<t|e>>>32-t,dj=(n,e,t)=>e<<t|n>>>32-t,fj=(n,e,t)=>e<<t-32|n>>>64-t,pj=(n,e,t)=>n<<t-32|e>>>64-t,fd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gj(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Yb(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function sp(n,...e){if(!gj(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function The(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yb(n.outputLen),Yb(n.blockLen)}function $3(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function mj(n,e){sp(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function yj(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function k5(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function xhe(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ihe(n,e){return n<<32-e|n>>>e}const wj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bj(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Ej(n){for(let e=0;e<n.length;e++)n[e]=bj(n[e]);return n}const F3=wj?n=>n:Ej,vj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Aj=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ohe(n){if(sp(n),vj)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Aj[n[t]];return e}function Cj(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function B5(n){return typeof n=="string"&&(n=Cj(n)),sp(n),n}function Rhe(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];sp(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}class _j{}function Sj(n){const e=r=>n().update(B5(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Dhe(n=32){if(fd&&typeof fd.getRandomValues=="function")return fd.getRandomValues(new Uint8Array(n));if(fd&&typeof fd.randomBytes=="function")return Uint8Array.from(fd.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const Nj=BigInt(0),kg=BigInt(1),Tj=BigInt(2),xj=BigInt(7),Ij=BigInt(256),Oj=BigInt(113),L5=[],M5=[],$5=[];for(let n=0,e=kg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],L5.push(2*(5*r+t)),M5.push((n+1)*(n+2)/2%64);let s=Nj;for(let i=0;i<7;i++)e=(e<<kg^(e>>xj)*Oj)%Ij,e&Tj&&(s^=kg<<(kg<<BigInt(i))-kg);$5.push(s)}const F5=uj($5,!0),Rj=F5[0],Dj=F5[1],H3=(n,e,t)=>t>32?fj(n,e,t):hj(n,e,t),z3=(n,e,t)=>t>32?pj(n,e,t):dj(n,e,t);function Pj(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,d=t[h],p=t[h+1],g=H3(d,p,1)^t[l],y=z3(d,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=M5[o],h=H3(s,i,l),d=z3(s,i,l),p=L5[o];s=n[p],i=n[p+1],n[p]=h,n[p+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=Rj[r],n[1]^=Dj[r]}k5(t)}class wS extends _j{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,Yb(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=yj(this.state)}clone(){return this._cloneInto()}keccak(){F3(this.state32),Pj(this.state32,this.rounds),F3(this.state32),this.posOut=0,this.pos=0}update(e){$3(this),e=B5(e),sp(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){$3(this,!1),sp(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yb(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,k5(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new wS(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Uj=(n,e,t)=>Sj(()=>new wS(e,n,t)),kj=Uj(1,136,256/8);let Bj=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Ku=(n,e,t)=>JSON.stringify(n,(r,s)=>typeof s=="bigint"?s.toString():s,t);function Lj(n,e){let t=n.toString();const r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,i]=[t.slice(0,t.length-e),t.slice(t.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}const bS=n=>n;class hm extends ea{constructor({body:e,cause:t,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${bS(o)}`,e&&`Request body: ${Ku(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class H5 extends ea{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${bS(r)}`,`Request body: ${Ku(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class j3 extends ea{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${bS(t)}`,`Request body: ${Ku(e)}`],name:"TimeoutError"})}}const Mj=-1;class As extends ea{constructor(e,{code:t,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof H5?e.code:t??Mj}}class Ks extends As{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Fm extends As{constructor(e){super(e,{code:Fm.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Fm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Hm extends As{constructor(e){super(e,{code:Hm.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Hm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class zm extends As{constructor(e,{method:t}={}){super(e,{code:zm.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(zm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class jm extends As{constructor(e){super(e,{code:jm.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(jm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ip extends As{constructor(e){super(e,{code:ip.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class qm extends As{constructor(e){super(e,{code:qm.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(qm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Vm extends As{constructor(e){super(e,{code:Vm.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Vm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Gm extends As{constructor(e){super(e,{code:Gm.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Gm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ap extends As{constructor(e){super(e,{code:ap.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ap,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class mu extends As{constructor(e,{method:t}={}){super(e,{code:mu.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(mu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class op extends As{constructor(e){super(e,{code:op.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(op,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Km extends As{constructor(e){super(e,{code:Km.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Km,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Wu extends Ks{constructor(e){super(e,{code:Wu.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Wu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Wm extends Ks{constructor(e){super(e,{code:Wm.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ym extends Ks{constructor(e,{method:t}={}){super(e,{code:Ym.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(Ym,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Qm extends Ks{constructor(e){super(e,{code:Qm.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Qm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Zm extends Ks{constructor(e){super(e,{code:Zm.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Zm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Xm extends Ks{constructor(e){super(e,{code:Xm.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Xm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Jm extends Ks{constructor(e){super(e,{code:Jm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Jm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class e0 extends Ks{constructor(e){super(e,{code:e0.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(e0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class t0 extends Ks{constructor(e){super(e,{code:t0.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(t0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class n0 extends Ks{constructor(e){super(e,{code:n0.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(n0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class r0 extends Ks{constructor(e){super(e,{code:r0.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(r0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class s0 extends Ks{constructor(e){super(e,{code:s0.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(s0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class i0 extends Ks{constructor(e){super(e,{code:i0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(i0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class $j extends As{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Fj="modulepreload",Hj=function(n){return"/captcha-frontend-test/"+n},q3={},$r=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(t.map(d=>{if(d=Hj(d),d in q3)return;q3[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Fj,p||(y.as="script"),y.crossOrigin="",y.href=d,h&&y.setAttribute("nonce",h),document.head.appendChild(y),p)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};class ES extends ea{constructor({cause:e,message:t}={}){var s;const r=(s=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ES,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(ES,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function zj(){let n=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{n=r,e=s}),resolve:n,reject:e}}const rC=new Map;function jj({fn:n,id:e,shouldSplitBatch:t,wait:r=0,sort:s}){const i=async()=>{const p=h();o();const g=p.map(({args:y})=>y);g.length!==0&&n(g).then(y=>{s&&Array.isArray(y)&&y.sort(s);for(let b=0;b<p.length;b++){const{resolve:v}=p[b];v==null||v([y[b],y])}}).catch(y=>{for(let b=0;b<p.length;b++){const{reject:v}=p[b];v==null||v(y)}})},o=()=>rC.delete(e),l=()=>h().map(({args:p})=>p),h=()=>rC.get(e)||[],d=p=>rC.set(e,[...h(),p]);return{flush:o,async schedule(p){const{promise:g,resolve:y,reject:b}=zj();return(t==null?void 0:t([...l(),p]))&&i(),h().length>0?(d({args:p,resolve:y,reject:b}),g):(d({args:p,resolve:y,reject:b}),setTimeout(i,r),g)}}}async function z5(n){return new Promise(e=>setTimeout(e,n))}const G_=256;let Mw=G_,$w;function qj(n=11){if(!$w||Mw+n>G_*2){$w="",Mw=0;for(let e=0;e<G_;e++)$w+=(256+Math.random()*256|0).toString(16).substring(1)}return $w.substring(Mw,Mw+++n)}const Fw=new Bj(8192);function Vj(n,{enabled:e=!0,id:t}){if(!e||!t)return n();if(Fw.get(t))return Fw.get(t);const r=n().finally(()=>Fw.delete(t));return Fw.set(t,r),r}function Gj(n,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:l=0}={})=>{const h=async({error:d})=>{const p=typeof e=="function"?e({count:l,error:d}):e;p&&await z5(p),o({count:l+1})};try{const d=await n();s(d)}catch(d){if(l<t&&await r({count:l,error:d}))return h({error:d});i(d)}};o()})}function Kj(n,e={}){return async(t,r={})=>{var g;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:l=3,uid:h}={...e,...r},{method:d}=t;if((g=i==null?void 0:i.exclude)!=null&&g.includes(d))throw new mu(new Error("method not supported"),{method:d});if(i!=null&&i.include&&!i.include.includes(d))throw new mu(new Error("method not supported"),{method:d});const p=s?U5(`${h}.${Ku(t)}`):void 0;return Vj(()=>Gj(async()=>{try{return await n(t)}catch(y){const b=y;switch(b.code){case Fm.code:throw new Fm(b);case Hm.code:throw new Hm(b);case zm.code:throw new zm(b,{method:t.method});case jm.code:throw new jm(b);case ip.code:throw new ip(b);case qm.code:throw new qm(b);case Vm.code:throw new Vm(b);case Gm.code:throw new Gm(b);case ap.code:throw new ap(b);case mu.code:throw new mu(b,{method:t.method});case op.code:throw new op(b);case Km.code:throw new Km(b);case Wu.code:throw new Wu(b);case Wm.code:throw new Wm(b);case Ym.code:throw new Ym(b);case Qm.code:throw new Qm(b);case Zm.code:throw new Zm(b);case Xm.code:throw new Xm(b);case Jm.code:throw new Jm(b);case e0.code:throw new e0(b);case t0.code:throw new t0(b);case n0.code:throw new n0(b);case r0.code:throw new r0(b);case s0.code:throw new s0(b);case i0.code:throw new i0(b);case 5e3:throw new Wu(b);default:throw y instanceof ea?y:new $j(b)}}},{delay:({count:y,error:b})=>{var v;if(b&&b instanceof hm){const E=(v=b==null?void 0:b.headers)==null?void 0:v.get("Retry-After");if(E!=null&&E.match(/\d/))return Number.parseInt(E)*1e3}return~~(1<<y)*o},retryCount:l,shouldRetry:({error:y})=>Wj(y)}),{enabled:s,id:p})}}function Wj(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===op.code||n.code===ip.code:n instanceof hm&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function j5({key:n,methods:e,name:t,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:l},h){const d=qj();return{config:{key:n,methods:e,name:t,request:r,retryCount:s,retryDelay:i,timeout:o,type:l},request:Kj(r,{methods:e,retryCount:s,retryDelay:i,uid:d}),value:h}}function V3(n,e={}){const{key:t="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Yj,retryCount:o,retryDelay:l}=e;return({chain:h,pollingInterval:d=4e3,timeout:p,...g})=>{let y=n,b=()=>{};const v=j5({key:t,name:r,async request({method:E,params:A}){let S;const x=async(T=0)=>{const k=y[T]({...g,chain:h,retryCount:0,timeout:p});try{const R=await k.request({method:E,params:A});return b({method:E,params:A,response:R,transport:k,status:"success"}),R}catch(R){if(b({error:R,method:E,params:A,transport:k,status:"error"}),i(R)||T===y.length-1||(S??(S=y.slice(T+1).some(P=>{const{include:F,exclude:$}=P({chain:h}).config.methods||{};return F?F.includes(E):$?!$.includes(E):!0})),!S))throw R;return x(T+1)}};return x()},retryCount:o,retryDelay:l,type:"fallback"},{onResponse:E=>b=E,transports:y.map(E=>E({chain:h,retryCount:0}))});if(s){const E=typeof s=="object"?s:{};Qj({chain:h,interval:E.interval??d,onTransports:A=>y=A,ping:E.ping,sampleCount:E.sampleCount,timeout:E.timeout,transports:y,weights:E.weights})}return v}}function Yj(n){return!!("code"in n&&typeof n.code=="number"&&(n.code===ap.code||n.code===Wu.code||ES.nodeMessage.test(n.message)||n.code===5e3))}function Qj({chain:n,interval:e=4e3,onTransports:t,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:l={}}){const{stability:h=.7,latency:d=.3}=l,p=[],g=async()=>{const y=await Promise.all(o.map(async E=>{const A=E({chain:n,retryCount:0,timeout:i}),S=Date.now();let x,T;try{await(r?r({transport:A}):A.request({method:"net_listening"})),T=1}catch{T=0}finally{x=Date.now()}return{latency:x-S,success:T}}));p.push(y),p.length>s&&p.shift();const b=Math.max(...p.map(E=>Math.max(...E.map(({latency:A})=>A)))),v=o.map((E,A)=>{const S=p.map(P=>P[A].latency),T=1-S.reduce((P,F)=>P+F,0)/S.length/b,k=p.map(P=>P[A].success),R=k.reduce((P,F)=>P+F,0)/k.length;return R===0?[0,A]:[d*T+h*R,A]}).sort((E,A)=>A[0]-E[0]);t(v.map(([,E])=>o[E])),await z5(e),g()};g()}class Zj extends ea{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Xj(n,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const l=new AbortController;t>0&&(o=setTimeout(()=>{r&&l.abort()},t)),s(await n({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&i(e),i(l)}finally{clearTimeout(o)}})()})}function Jj(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const G3=Jj();function eq(n,e={}){return{async request(t){var g;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=t,l={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:h,method:d,signal:p}=l;try{const y=await Xj(async({signal:v})=>{const E={...l,body:Array.isArray(r)?Ku(r.map(T=>({jsonrpc:"2.0",id:T.id??G3.take(),...T}))):Ku({jsonrpc:"2.0",id:r.id??G3.take(),...r}),headers:{"Content-Type":"application/json",...h},method:d||"POST",signal:p||(o>0?v:null)},A=new Request(n,E),S=await(s==null?void 0:s(A,E))??{...E,url:n};return await fetch(S.url??n,S)},{errorInstance:new j3({body:r,url:n}),timeout:o,signal:!0});i&&await i(y);let b;if((g=y.headers.get("Content-Type"))!=null&&g.startsWith("application/json"))b=await y.json();else{b=await y.text();try{b=JSON.parse(b||"{}")}catch(v){if(y.ok)throw v;b={error:b}}}if(!y.ok)throw new hm({body:r,details:Ku(b.error)||y.statusText,headers:y.headers,status:y.status,url:n});return b}catch(y){throw y instanceof hm||y instanceof j3?y:new hm({body:r,cause:y,url:n})}}}}function Hw(n,e={}){const{batch:t,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:h,retryDelay:d,raw:p}=e;return({chain:g,retryCount:y,timeout:b})=>{const{batchSize:v=1e3,wait:E=0}=typeof t=="object"?t:{},A=e.retryCount??y,S=b??e.timeout??1e4,x=n||(g==null?void 0:g.rpcUrls.default.http[0]);if(!x)throw new Zj;const T=eq(x,{fetchOptions:r,onRequest:l,onResponse:h,timeout:S});return j5({key:s,methods:i,name:o,async request({method:k,params:R}){const P={method:k,params:R},{schedule:F}=jj({id:x,wait:E,shouldSplitBatch(j){return j.length>v},fn:j=>T.request({body:j}),sort:(j,W)=>j.id-W.id}),$=async j=>t?F(j):[await T.request({body:j})],[{error:B,result:z}]=await $(P);if(p)return{error:B,result:z};if(B)throw new H5({body:P,error:B,url:x});return z},retryCount:A,retryDelay:d,timeout:S,type:"http"},{fetchOptions:r,url:x})}}function q5(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const sC={createBalance(n,e){const t={name:n.metadata.name||"",symbol:n.metadata.symbol||"",decimals:n.metadata.decimals||0,value:n.metadata.value||0,price:n.metadata.price||0,iconUrl:n.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:e,address:n.address==="native"?void 0:this.convertAddressToCAIP10Address(n.address,e),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:n.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:n,decimals:e}){return Lj(BigInt(n),e)},convertAddressToCAIP10Address(n,e){return`${e}:${n}`},createCAIP2ChainId(n,e){return`${e}:${parseInt(n,16)}`},getChainIdHexFromCAIP2ChainId(n){const e=n.split(":");if(e.length<2||!e[1])return"0x0";const t=e[1],r=parseInt(t,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(n){return typeof n!="object"||n===null?!1:Object.values(n).every(e=>Array.isArray(e)&&e.every(t=>this.isValidAsset(t)))},isValidAsset(n){return typeof n=="object"&&n!==null&&typeof n.address=="string"&&typeof n.balance=="string"&&(n.type==="ERC20"||n.type==="NATIVE")&&typeof n.metadata=="object"&&n.metadata!==null&&typeof n.metadata.name=="string"&&typeof n.metadata.symbol=="string"&&typeof n.metadata.decimals=="number"&&typeof n.metadata.price=="number"&&typeof n.metadata.iconUrl=="string"}},vS={async getMyTokensWithBalance(n){const e=Fe.state.address,t=M.state.activeCaipNetwork,r=_e.getConnectorId("eip155")===ce.CONNECTOR_ID.AUTH;if(!e||!t)return[];const s=`${t.caipNetworkId}:${e}`,i=ve.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(t.chainNamespace===ce.CHAIN.EVM&&r){const l=await this.getEIP155Balances(e,t);if(l)return this.filterLowQualityTokens(l)}const o=await We.getBalance(e,t.caipNetworkId,n);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(n,e){var t,r;try{const s=sC.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await xe.getCapabilities(n);if(!((r=(t=i==null?void 0:i[s])==null?void 0:t.assetDiscovery)!=null&&r.supported))return null;const o=await xe.walletGetAssets({account:n,chainFilter:[s]});if(!sC.isWalletGetAssetsResponse(o))return null;const h=(o[s]||[]).map(d=>sC.createBalance(d,e.caipNetworkId));return ve.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${n}`,balance:{balances:h},timestamp:Date.now()}),h}catch{return null}},filterLowQualityTokens(n){return n.filter(e=>e.quantity.decimals!=="0")}},ua=cn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),tq={state:ua,replaceState(n){n&&Object.assign(ua,nh(n))},subscribe(n){return M.subscribeChainProp("accountState",e=>{if(e)return n(e)})},subscribeKey(n,e,t){let r;return M.subscribeChainProp("accountState",s=>{if(s){const i=s[n];r!==i&&(r=i,e(i))}},t)},setStatus(n,e){M.setAccountProp("status",n,e)},getCaipAddress(n){return M.getAccountProp("caipAddress",n)},setCaipAddress(n,e){const t=n?Le.getPlainAddress(n):void 0;e===M.state.activeChain&&(M.state.activeCaipAddress=n),M.setAccountProp("caipAddress",n,e),M.setAccountProp("address",t,e)},setBalance(n,e,t){M.setAccountProp("balance",n,t),M.setAccountProp("balanceSymbol",e,t)},setProfileName(n,e){M.setAccountProp("profileName",n,e)},setProfileImage(n,e){M.setAccountProp("profileImage",n,e)},setUser(n,e){M.setAccountProp("user",n,e)},setAddressExplorerUrl(n,e){M.setAccountProp("addressExplorerUrl",n,e)},setSmartAccountDeployed(n,e){M.setAccountProp("smartAccountDeployed",n,e)},setCurrentTab(n){M.setAccountProp("currentTab",n,M.state.activeChain)},setTokenBalance(n,e){n&&M.setAccountProp("tokenBalance",n,e)},setShouldUpdateToAddress(n,e){M.setAccountProp("shouldUpdateToAddress",n,e)},addAddressLabel(n,e,t){const r=M.getAccountProp("addressLabels",t)||new Map;r.set(n,e),M.setAccountProp("addressLabels",r,t)},removeAddressLabel(n,e){const t=M.getAccountProp("addressLabels",e)||new Map;t.delete(n),M.setAccountProp("addressLabels",t,e)},setConnectedWalletInfo(n,e){M.setAccountProp("connectedWalletInfo",n,e,!1)},setPreferredAccountType(n,e){M.setAccountProp("preferredAccountType",n,e)},setSocialProvider(n,e){n&&M.setAccountProp("socialProvider",n,e)},setSocialWindow(n,e){M.setAccountProp("socialWindow",n?nh(n):void 0,e)},setFarcasterUrl(n,e){M.setAccountProp("farcasterUrl",n,e)},async fetchTokenBalance(n){var i,o;ua.balanceLoading=!0;const e=(i=M.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=M.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=M.state.activeCaipAddress,s=r?Le.getPlainAddress(r):void 0;if(ua.lastRetry&&!Le.isAllowedRetry(ua.lastRetry,30*$t.ONE_SEC_MS))return ua.balanceLoading=!1,[];try{if(s&&e&&t){const l=await vS.getMyTokensWithBalance();return Fe.setTokenBalance(l,t),ua.lastRetry=void 0,ua.balanceLoading=!1,l}}catch(l){ua.lastRetry=Date.now(),n==null||n(l),ka.showError("Token Balance Unavailable")}finally{ua.balanceLoading=!1}return[]},resetAccount(n){M.resetAccount(n)}},Fe=Gs(tq),nq={onSwitchNetwork({network:n,ignoreSwitchConfirmation:e=!1}){const t=M.state.activeCaipNetwork,r=tt.state.data;if(n.id===(t==null?void 0:t.id))return;const i=Fe.getCaipAddress(M.state.activeChain),o=n.chainNamespace!==M.state.activeChain,l=Fe.getCaipAddress(n.chainNamespace),d=_e.getConnectorId(M.state.activeChain)===ce.CONNECTOR_ID.AUTH,p=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===n.chainNamespace);e||d&&p?tt.push("SwitchNetwork",{...r,network:n}):i&&o&&!l?tt.push("SwitchActiveChain",{switchToChain:n.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:n}):tt.push("SwitchNetwork",{...r,network:n})}},ss=cn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),rq={state:ss,subscribe(n){return sr(ss,()=>n(ss))},subscribeKey(n,e){return Dr(ss,n,e)},async open(n){var i,o;const e=n==null?void 0:n.namespace,t=M.state.activeChain,r=e&&e!==t,s=(i=M.getAccountData(n==null?void 0:n.namespace))==null?void 0:i.caipAddress;if(xe.state.wcBasic?Ge.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ge.prefetch(),_e.setFilterByNamespace(n==null?void 0:n.namespace),Pt.setLoading(!0,e),e&&r){const l=((o=M.getNetworkData(e))==null?void 0:o.caipNetwork)||M.getRequestedCaipNetworks(e)[0];l&&nq.onSwitchNetwork({network:l,ignoreSwitchConfirmation:!0})}else{const l=M.state.noAdapters;ye.state.manualWCControl||l&&!s?Le.isMobile()?tt.reset("AllWallets"):tt.reset("ConnectingWalletConnectBasic"):n!=null&&n.view?tt.reset(n.view,n.data):s?tt.reset("Account"):tt.reset("Connect")}ss.open=!0,Ma.set({open:!0}),Gt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const n=ye.state.enableEmbedded,e=!!M.state.activeCaipAddress;ss.open&&Gt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ss.open=!1,tt.reset("Connect"),Pt.clearLoading(),n?e?tt.replace("Account"):tt.push("Connect"):Ma.set({open:!1}),xe.resetUri()},setLoading(n,e){e&&ss.loadingNamespaceMap.set(e,n),ss.loading=n,Ma.set({loading:n})},clearLoading(){ss.loadingNamespaceMap.clear(),ss.loading=!1},shake(){ss.shake||(ss.shake=!0,setTimeout(()=>{ss.shake=!1},500))}},Pt=Gs(rq),dm={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},K_={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},sq={providers:_5,selectedProvider:null,error:null,purchaseCurrency:dm,paymentCurrency:K_,purchaseCurrencies:[dm],paymentCurrencies:[],quotesLoading:!1},St=cn(sq),iq={state:St,subscribe(n){return sr(St,()=>n(St))},subscribeKey(n,e){return Dr(St,n,e)},setSelectedProvider(n){if(n&&n.name==="meld"){const e=M.state.activeChain,t=e===ce.CHAIN.SOLANA?"SOL":"USDC",r=M.getAccountProp("address",e)??"",s=new URL(n.url);s.searchParams.append("publicKey",Cz),s.searchParams.append("destinationCurrencyCode",t),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",ye.state.projectId),St.selectedProvider={...n,url:s.toString()}}else St.selectedProvider=n},setOnrampProviders(n){if(Array.isArray(n)&&n.every(e=>typeof e=="string")){const e=n,t=_5.filter(r=>e.includes(r.name));St.providers=t}else St.providers=[]},setPurchaseCurrency(n){St.purchaseCurrency=n},setPaymentCurrency(n){St.paymentCurrency=n},setPurchaseAmount(n){W_.state.purchaseAmount=n},setPaymentAmount(n){W_.state.paymentAmount=n},async getAvailableCurrencies(){const n=await We.getOnrampOptions();St.purchaseCurrencies=n.purchaseCurrencies,St.paymentCurrencies=n.paymentCurrencies,St.paymentCurrency=n.paymentCurrencies[0]||K_,St.purchaseCurrency=n.purchaseCurrencies[0]||dm,await Ge.fetchCurrencyImages(n.paymentCurrencies.map(e=>e.id)),await Ge.fetchTokenImages(n.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var n,e;St.quotesLoading=!0;try{const t=await We.getOnrampQuote({purchaseCurrency:St.purchaseCurrency,paymentCurrency:St.paymentCurrency,amount:((n=St.paymentAmount)==null?void 0:n.toString())||"0",network:(e=St.purchaseCurrency)==null?void 0:e.symbol});return St.quotesLoading=!1,St.purchaseAmount=Number(t==null?void 0:t.purchaseAmount.amount),t}catch(t){return St.error=t.message,St.quotesLoading=!1,null}finally{St.quotesLoading=!1}},resetState(){St.selectedProvider=null,St.error=null,St.purchaseCurrency=dm,St.paymentCurrency=K_,St.purchaseCurrencies=[dm],St.paymentCurrencies=[],St.paymentAmount=void 0,St.purchaseAmount=void 0,St.quotesLoading=!1}},W_=Gs(iq),K3=2147483648,aq={convertEVMChainIdToCoinType(n){if(n>=K3)throw new Error("Invalid chainId");return(K3|n)>>>0}},ii=cn({suggestions:[],loading:!1}),oq={state:ii,subscribe(n){return sr(ii,()=>n(ii))},subscribeKey(n,e){return Dr(ii,n,e)},async resolveName(n){var e,t;try{return await We.lookupEnsName(n)}catch(r){const s=r;throw new Error(((t=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:t.description)||"Error resolving name")}},async isNameRegistered(n){try{return await We.lookupEnsName(n),!0}catch{return!1}},async getSuggestions(n){try{ii.loading=!0,ii.suggestions=[];const e=await We.getEnsNameSuggestions(n);return ii.suggestions=e.suggestions.map(t=>({...t,name:t.name}))||[],ii.suggestions}catch(e){const t=fm.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{ii.loading=!1}},async getNamesForAddress(n){try{if(!M.state.activeCaipNetwork)return[];const t=ve.getEnsFromCacheForAddress(n);if(t)return t;const r=await We.reverseLookupEnsName({address:n});return ve.updateEnsCache({address:n,ens:r,timestamp:Date.now()}),r}catch(e){const t=fm.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(n){const e=M.state.activeCaipNetwork,t=Fe.state.address,r=_e.getAuthConnector();if(!e)throw new Error("Network not found");if(!t||!r)throw new Error("Address or auth connector not found");ii.loading=!0;try{const s=JSON.stringify({name:n,attributes:{},timestamp:Math.floor(Date.now()/1e3)});tt.pushTransactionStack({onCancel(){tt.replace("RegisterAccountName")}});const i=await xe.signMessage(s);ii.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const l=aq.convertEVMChainIdToCoinType(Number(o));await We.registerEnsName({coinType:l,address:t,signature:i,message:s}),Fe.setProfileName(n,e.chainNamespace),tt.replace("RegisterAccountNameSuccess")}catch(s){const i=fm.parseEnsApiError(s,`Error registering name ${n}`);throw tt.replace("RegisterAccountName"),new Error(i)}finally{ii.loading=!1}},validateName(n){return/^[a-zA-Z0-9-]{4,}$/u.test(n)},parseEnsApiError(n,e){var r,s;const t=n;return((s=(r=t==null?void 0:t.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},fm=Gs(oq);var zw={exports:{}},W3;function cq(){if(W3)return zw.exports;W3=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(R,P,F){return Function.prototype.apply.call(R,P,F)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:t=function(R){return Object.getOwnPropertyNames(R)};function r(k){console&&console.warn&&console.warn(k)}var s=Number.isNaN||function(R){return R!==R};function i(){i.init.call(this)}zw.exports=i,zw.exports.once=S,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function l(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");o=k}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||s(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function h(k){return k._maxListeners===void 0?i.defaultMaxListeners:k._maxListeners}i.prototype.getMaxListeners=function(){return h(this)},i.prototype.emit=function(R){for(var P=[],F=1;F<arguments.length;F++)P.push(arguments[F]);var $=R==="error",B=this._events;if(B!==void 0)$=$&&B.error===void 0;else if(!$)return!1;if($){var z;if(P.length>0&&(z=P[0]),z instanceof Error)throw z;var j=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw j.context=z,j}var W=B[R];if(W===void 0)return!1;if(typeof W=="function")e(W,this,P);else for(var ne=W.length,J=v(W,ne),F=0;F<ne;++F)e(J[F],this,P);return!0};function d(k,R,P,F){var $,B,z;if(l(P),B=k._events,B===void 0?(B=k._events=Object.create(null),k._eventsCount=0):(B.newListener!==void 0&&(k.emit("newListener",R,P.listener?P.listener:P),B=k._events),z=B[R]),z===void 0)z=B[R]=P,++k._eventsCount;else if(typeof z=="function"?z=B[R]=F?[P,z]:[z,P]:F?z.unshift(P):z.push(P),$=h(k),$>0&&z.length>$&&!z.warned){z.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=k,j.type=R,j.count=z.length,r(j)}return k}i.prototype.addListener=function(R,P){return d(this,R,P,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(R,P){return d(this,R,P,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(k,R,P){var F={fired:!1,wrapFn:void 0,target:k,type:R,listener:P},$=p.bind(F);return $.listener=P,F.wrapFn=$,$}i.prototype.once=function(R,P){return l(P),this.on(R,g(this,R,P)),this},i.prototype.prependOnceListener=function(R,P){return l(P),this.prependListener(R,g(this,R,P)),this},i.prototype.removeListener=function(R,P){var F,$,B,z,j;if(l(P),$=this._events,$===void 0)return this;if(F=$[R],F===void 0)return this;if(F===P||F.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete $[R],$.removeListener&&this.emit("removeListener",R,F.listener||P));else if(typeof F!="function"){for(B=-1,z=F.length-1;z>=0;z--)if(F[z]===P||F[z].listener===P){j=F[z].listener,B=z;break}if(B<0)return this;B===0?F.shift():E(F,B),F.length===1&&($[R]=F[0]),$.removeListener!==void 0&&this.emit("removeListener",R,j||P)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(R){var P,F,$;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[R]),this;if(arguments.length===0){var B=Object.keys(F),z;for($=0;$<B.length;++$)z=B[$],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=F[R],typeof P=="function")this.removeListener(R,P);else if(P!==void 0)for($=P.length-1;$>=0;$--)this.removeListener(R,P[$]);return this};function y(k,R,P){var F=k._events;if(F===void 0)return[];var $=F[R];return $===void 0?[]:typeof $=="function"?P?[$.listener||$]:[$]:P?A($):v($,$.length)}i.prototype.listeners=function(R){return y(this,R,!0)},i.prototype.rawListeners=function(R){return y(this,R,!1)},i.listenerCount=function(k,R){return typeof k.listenerCount=="function"?k.listenerCount(R):b.call(k,R)},i.prototype.listenerCount=b;function b(k){var R=this._events;if(R!==void 0){var P=R[k];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function v(k,R){for(var P=new Array(R),F=0;F<R;++F)P[F]=k[F];return P}function E(k,R){for(;R+1<k.length;R++)k[R]=k[R+1];k.pop()}function A(k){for(var R=new Array(k.length),P=0;P<R.length;++P)R[P]=k[P].listener||k[P];return R}function S(k,R){return new Promise(function(P,F){function $(z){k.removeListener(R,B),F(z)}function B(){typeof k.removeListener=="function"&&k.removeListener("error",$),P([].slice.call(arguments))}T(k,R,B,{once:!0}),R!=="error"&&x(k,$,{once:!0})})}function x(k,R,P){typeof k.on=="function"&&T(k,"error",R,P)}function T(k,R,P,F){if(typeof k.on=="function")F.once?k.once(R,P):k.on(R,P);else if(typeof k.addEventListener=="function")k.addEventListener(R,function $(B){F.once&&k.removeEventListener(R,$),P(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return zw.exports}var Ai=cq();const AS=$0(Ai);var iC={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y_=function(n,e){return Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},Y_(n,e)};function lq(n,e){Y_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Q_=function(){return Q_=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Q_.apply(this,arguments)};function uq(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function hq(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(o=n[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function dq(n,e){return function(t,r){e(t,r,n)}}function fq(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function pq(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(p){try{d(r.next(p))}catch(g){o(g)}}function h(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?i(p.value):s(p.value).then(l,h)}d((r=r.apply(n,e||[])).next())})}function gq(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return h([d,p])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function mq(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function yq(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Z_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function V5(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function wq(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(V5(arguments[e]));return n}function bq(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,s++)r[s]=i[o];return r}function a0(n){return this instanceof a0?(this.v=n,this):new a0(n)}function Eq(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(y){r[y]&&(s[y]=function(b){return new Promise(function(v,E){i.push([y,b,v,E])>1||l(y,b)})})}function l(y,b){try{h(r[y](b))}catch(v){g(i[0][3],v)}}function h(y){y.value instanceof a0?Promise.resolve(y.value.v).then(d,p):g(i[0][2],y)}function d(y){l("next",y)}function p(y){l("throw",y)}function g(y,b){y(b),i.shift(),i.length&&l(i[0][0],i[0][1])}}function vq(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=n[s]?function(o){return(t=!t)?{value:a0(n[s](o)),done:s==="return"}:i?i(o):o}:i}}function Aq(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Z_=="function"?Z_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(l,h){o=n[i](o),s(l,h,o.done,o.value)})}}function s(i,o,l,h){Promise.resolve(h).then(function(d){i({value:d,done:l})},o)}}function Cq(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function _q(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Sq(n){return n&&n.__esModule?n:{default:n}}function Nq(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Tq(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const xq=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Q_},__asyncDelegator:vq,__asyncGenerator:Eq,__asyncValues:Aq,__await:a0,__awaiter:pq,__classPrivateFieldGet:Nq,__classPrivateFieldSet:Tq,__createBinding:mq,__decorate:hq,__exportStar:yq,__extends:lq,__generator:gq,__importDefault:Sq,__importStar:_q,__makeTemplateObject:Cq,__metadata:fq,__param:dq,__read:V5,__rest:uq,__spread:wq,__spreadArrays:bq,__values:Z_},Symbol.toStringTag,{value:"Module"})),Q0=oM(xq);var aC={},Bg={},Y3;function Iq(){if(Y3)return Bg;Y3=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Bg.delay=n,Bg}var Kl={},oC={},Wl={},Q3;function Oq(){return Q3||(Q3=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.ONE_THOUSAND=Wl.ONE_HUNDRED=void 0,Wl.ONE_HUNDRED=100,Wl.ONE_THOUSAND=1e3),Wl}var cC={},Z3;function Rq(){return Z3||(Z3=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(cC)),cC}var X3;function G5(){return X3||(X3=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Q0;e.__exportStar(Oq(),n),e.__exportStar(Rq(),n)}(oC)),oC}var J3;function Dq(){if(J3)return Kl;J3=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.fromMiliseconds=Kl.toMiliseconds=void 0;const n=G5();function e(r){return r*n.ONE_THOUSAND}Kl.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return Kl.fromMiliseconds=t,Kl}var eR;function Pq(){return eR||(eR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Q0;e.__exportStar(Iq(),n),e.__exportStar(Dq(),n)}(aC)),aC}var pd={},tR;function Uq(){if(tR)return pd;tR=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:s})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return pd.Watch=n,pd.default=n,pd}var lC={},Lg={},nR;function kq(){if(nR)return Lg;nR=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.IWatch=void 0;class n{}return Lg.IWatch=n,Lg}var rR;function Bq(){return rR||(rR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Q0.__exportStar(kq(),n)}(lC)),lC}var sR;function Lq(){return sR||(sR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Q0;e.__exportStar(Pq(),n),e.__exportStar(Uq(),n),e.__exportStar(Bq(),n),e.__exportStar(G5(),n)}(iC)),iC}var Se=Lq();class wh{}let Mq=class extends wh{constructor(e){super()}};const iR=Se.FIVE_SECONDS,bh={pulse:"heartbeat_pulse"};let $q=class K5 extends Mq{constructor(e){super(e),this.events=new Ai.EventEmitter,this.interval=iR,this.interval=(e==null?void 0:e.interval)||iR}static async init(e){const t=new K5(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Se.toMiliseconds(this.interval))}pulse(){this.events.emit(bh.pulse)}};const Fq=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Hq=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,zq=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jq(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){qq(n);return}return e}function qq(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function jw(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!zq.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(Fq.test(n)||Hq.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,jq)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function Vq(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function Qn(n,...e){try{return Vq(n(...e))}catch(t){return Promise.reject(t)}}function Gq(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function Kq(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Eb(n){if(Gq(n))return String(n);if(Kq(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Eb(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const X_="base64:";function Wq(n){return typeof n=="string"?n:X_+Zq(n)}function Yq(n){return typeof n!="string"||!n.startsWith(X_)?n:Qq(n.slice(X_.length))}function Qq(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function Zq(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function ls(n){var e;return n&&((e=n.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Xq(...n){return ls(n.join(":"))}function qw(n){return n=ls(n),n?n+":":""}function Jq(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function eV(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const tV="memory",nV=()=>{const n=new Map;return{name:tV,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function rV(n={}){const e={mounts:{"":n.driver||nV()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=d=>{for(const p of e.mountpoints)if(d.startsWith(p))return{base:p,relativeKey:d.slice(p.length),driver:e.mounts[p]};return{base:"",relativeKey:d,driver:e.mounts[""]}},r=(d,p)=>e.mountpoints.filter(g=>g.startsWith(d)||p&&d.startsWith(g)).map(g=>({relativeBase:d.length>g.length?d.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),s=(d,p)=>{if(e.watching){p=ls(p);for(const g of e.watchListeners)g(d,p)}},i=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await aR(e.mounts[d],s,d)}},o=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},l=(d,p,g)=>{const y=new Map,b=v=>{let E=y.get(v.base);return E||(E={driver:v.driver,base:v.base,items:[]},y.set(v.base,E)),E};for(const v of d){const E=typeof v=="string",A=ls(E?v:v.key),S=E?void 0:v.value,x=E||!v.options?p:{...p,...v.options},T=t(A);b(T).items.push({key:A,value:S,relativeKey:T.relativeKey,options:x})}return Promise.all([...y.values()].map(v=>g(v))).then(v=>v.flat())},h={hasItem(d,p={}){d=ls(d);const{relativeKey:g,driver:y}=t(d);return Qn(y.hasItem,g,p)},getItem(d,p={}){d=ls(d);const{relativeKey:g,driver:y}=t(d);return Qn(y.getItem,g,p).then(b=>jw(b))},getItems(d,p={}){return l(d,p,g=>g.driver.getItems?Qn(g.driver.getItems,g.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(b=>({key:Xq(g.base,b.key),value:jw(b.value)}))):Promise.all(g.items.map(y=>Qn(g.driver.getItem,y.relativeKey,y.options).then(b=>({key:y.key,value:jw(b)})))))},getItemRaw(d,p={}){d=ls(d);const{relativeKey:g,driver:y}=t(d);return y.getItemRaw?Qn(y.getItemRaw,g,p):Qn(y.getItem,g,p).then(b=>Yq(b))},async setItem(d,p,g={}){if(p===void 0)return h.removeItem(d);d=ls(d);const{relativeKey:y,driver:b}=t(d);b.setItem&&(await Qn(b.setItem,y,Eb(p),g),b.watch||s("update",d))},async setItems(d,p){await l(d,p,async g=>{if(g.driver.setItems)return Qn(g.driver.setItems,g.items.map(y=>({key:y.relativeKey,value:Eb(y.value),options:y.options})),p);g.driver.setItem&&await Promise.all(g.items.map(y=>Qn(g.driver.setItem,y.relativeKey,Eb(y.value),y.options)))})},async setItemRaw(d,p,g={}){if(p===void 0)return h.removeItem(d,g);d=ls(d);const{relativeKey:y,driver:b}=t(d);if(b.setItemRaw)await Qn(b.setItemRaw,y,p,g);else if(b.setItem)await Qn(b.setItem,y,Wq(p),g);else return;b.watch||s("update",d)},async removeItem(d,p={}){typeof p=="boolean"&&(p={removeMeta:p}),d=ls(d);const{relativeKey:g,driver:y}=t(d);y.removeItem&&(await Qn(y.removeItem,g,p),(p.removeMeta||p.removeMata)&&await Qn(y.removeItem,g+"$",p),y.watch||s("remove",d))},async getMeta(d,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),d=ls(d);const{relativeKey:g,driver:y}=t(d),b=Object.create(null);if(y.getMeta&&Object.assign(b,await Qn(y.getMeta,g,p)),!p.nativeOnly){const v=await Qn(y.getItem,g+"$",p).then(E=>jw(E));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(b,v))}return b},setMeta(d,p,g={}){return this.setItem(d+"$",p,g)},removeMeta(d,p={}){return this.removeItem(d+"$",p)},async getKeys(d,p={}){var A;d=qw(d);const g=r(d,!0);let y=[];const b=[];let v=!0;for(const S of g){(A=S.driver.flags)!=null&&A.maxDepth||(v=!1);const x=await Qn(S.driver.getKeys,S.relativeBase,p);for(const T of x){const k=S.mountpoint+ls(T);y.some(R=>k.startsWith(R))||b.push(k)}y=[S.mountpoint,...y.filter(T=>!T.startsWith(S.mountpoint))]}const E=p.maxDepth!==void 0&&!v;return b.filter(S=>(!E||Jq(S,p.maxDepth))&&eV(S,d))},async clear(d,p={}){d=qw(d),await Promise.all(r(d,!1).map(async g=>{if(g.driver.clear)return Qn(g.driver.clear,g.relativeBase,p);if(g.driver.removeItem){const y=await g.driver.getKeys(g.relativeBase||"",p);return Promise.all(y.map(b=>g.driver.removeItem(b,p)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>oR(d)))},async watch(d){return await i(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(p=>p!==d),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(d,p){if(d=qw(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((g,y)=>y.length-g.length)),e.mounts[d]=p,e.watching&&Promise.resolve(aR(p,s,d)).then(g=>{e.unwatch[d]=g}).catch(console.error),h},async unmount(d,p=!0){var g,y;d=qw(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&((y=(g=e.unwatch)[d])==null||y.call(g),delete e.unwatch[d]),p&&await oR(e.mounts[d]),e.mountpoints=e.mountpoints.filter(b=>b!==d),delete e.mounts[d])},getMount(d=""){d=ls(d)+":";const p=t(d);return{driver:p.driver,base:p.base}},getMounts(d="",p={}){return d=ls(d),r(d,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(d,p={})=>h.getKeys(d,p),get:(d,p={})=>h.getItem(d,p),set:(d,p,g={})=>h.setItem(d,p,g),has:(d,p={})=>h.hasItem(d,p),del:(d,p={})=>h.removeItem(d,p),remove:(d,p={})=>h.removeItem(d,p)};return h}function aR(n,e,t){return n.watch?n.watch((r,s)=>e(r,t+s)):()=>{}}async function oR(n){typeof n.dispose=="function"&&await Qn(n.dispose)}function Eh(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function W5(n,e){let t;const r=()=>{if(t)return t;const s=indexedDB.open(n);return s.onupgradeneeded=()=>s.result.createObjectStore(e),t=Eh(s),t.then(i=>{i.onclose=()=>t=void 0},()=>{}),t};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let uC;function Z0(){return uC||(uC=W5("keyval-store","keyval")),uC}function cR(n,e=Z0()){return e("readonly",t=>Eh(t.get(n)))}function sV(n,e,t=Z0()){return t("readwrite",r=>(r.put(e,n),Eh(r.transaction)))}function iV(n,e=Z0()){return e("readwrite",t=>(t.delete(n),Eh(t.transaction)))}function aV(n=Z0()){return n("readwrite",e=>(e.clear(),Eh(e.transaction)))}function oV(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Eh(n.transaction)}function cV(n=Z0()){return n("readonly",e=>{if(e.getAllKeys)return Eh(e.getAllKeys());const t=[];return oV(e,r=>t.push(r.key)).then(()=>t)})}const lV=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),uV=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function sh(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return uV(n)}catch{return n}}function qo(n){return typeof n=="string"?n:lV(n)||""}const hV="idb-keyval";var dV=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=s=>e+s;let r;return n.dbName&&n.storeName&&(r=W5(n.dbName,n.storeName)),{name:hV,options:n,async hasItem(s){return!(typeof await cR(t(s),r)>"u")},async getItem(s){return await cR(t(s),r)??null},setItem(s,i){return sV(t(s),i,r)},removeItem(s){return iV(t(s),r)},getKeys(){return cV(r)},clear(){return aV(r)}}};const fV="WALLET_CONNECT_V2_INDEXED_DB",pV="keyvaluestorage";let gV=class{constructor(){this.indexedDb=rV({driver:dV({dbName:fV,storeName:pV})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,qo(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var hC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vb={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof hC<"u"&&hC.localStorage?vb.exports=hC.localStorage:typeof window<"u"&&window.localStorage?vb.exports=window.localStorage:vb.exports=new e})();function mV(n){var e;return[n[0],sh((e=n[1])!=null?e:"")]}let yV=class{constructor(){this.localStorage=vb.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(mV)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return sh(t)}async setItem(e,t){this.localStorage.setItem(e,qo(t))}async removeItem(e){this.localStorage.removeItem(e)}};const wV="wc_storage_version",lR=1,bV=async(n,e,t)=>{const r=wV,s=await e.getItem(r);if(s&&s>=lR){t(e);return}const i=await n.getKeys();if(!i.length){t(e);return}const o=[];for(;i.length;){const l=i.shift();if(!l)continue;const h=l.toLowerCase();if(h.includes("wc@")||h.includes("walletconnect")||h.includes("wc_")||h.includes("wallet_connect")){const d=await n.getItem(l);await e.setItem(l,d),o.push(l)}}await e.setItem(r,lR),t(e),EV(n,o)},EV=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let vV=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new yV;this.storage=e;try{const t=new gV;bV(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var dC,uR;function AV(){if(uR)return dC;uR=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}dC=e;function e(t,r,s){var i=s&&s.stringify||n,o=1;if(typeof t=="object"&&t!==null){var l=r.length+o;if(l===1)return t;var h=new Array(l);h[0]=i(t);for(var d=1;d<l;d++)h[d]=i(r[d]);return h.join(" ")}if(typeof t!="string")return t;var p=r.length;if(p===0)return t;for(var g="",y=1-o,b=-1,v=t&&t.length||0,E=0;E<v;){if(t.charCodeAt(E)===37&&E+1<v){switch(b=b>-1?b:0,t.charCodeAt(E+1)){case 100:case 102:if(y>=p||r[y]==null)break;b<E&&(g+=t.slice(b,E)),g+=Number(r[y]),b=E+2,E++;break;case 105:if(y>=p||r[y]==null)break;b<E&&(g+=t.slice(b,E)),g+=Math.floor(Number(r[y])),b=E+2,E++;break;case 79:case 111:case 106:if(y>=p||r[y]===void 0)break;b<E&&(g+=t.slice(b,E));var A=typeof r[y];if(A==="string"){g+="'"+r[y]+"'",b=E+2,E++;break}if(A==="function"){g+=r[y].name||"<anonymous>",b=E+2,E++;break}g+=i(r[y]),b=E+2,E++;break;case 115:if(y>=p)break;b<E&&(g+=t.slice(b,E)),g+=String(r[y]),b=E+2,E++;break;case 37:b<E&&(g+=t.slice(b,E)),g+="%",b=E+2,E++,y--;break}++y}++E}return b===-1?t:(b<v&&(g+=t.slice(b)),g)}return dC}var fC,hR;function CV(){if(hR)return fC;hR=1;const n=AV();fC=s;const e=R().console||{},t={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:v,res:v,err:y};function r(P,F){return Array.isArray(P)?P.filter(function(B){return B!=="!stdSerializers.err"}):P===!0?Object.keys(F):!1}function s(P){P=P||{},P.browser=P.browser||{};const F=P.browser.transmit;if(F&&typeof F.send!="function")throw Error("pino: transmit option must have a send function");const $=P.browser.write||e;P.browser.write&&(P.browser.asObject=!0);const B=P.serializers||{},z=r(P.browser.serialize,B);let j=P.browser.serialize;Array.isArray(P.browser.serialize)&&P.browser.serialize.indexOf("!stdSerializers.err")>-1&&(j=!1);const W=["error","fatal","warn","info","debug","trace"];typeof $=="function"&&($.error=$.fatal=$.warn=$.info=$.debug=$.trace=$),P.enabled===!1&&(P.level="silent");const ne=P.level||"info",J=Object.create($);J.log||(J.log=A),Object.defineProperty(J,"levelVal",{get:_}),Object.defineProperty(J,"level",{get:L,set:q});const I={transmit:F,serialize:z,asObject:P.browser.asObject,levels:W,timestamp:b(P)};J.levels=s.levels,J.level=ne,J.setMaxListeners=J.getMaxListeners=J.emit=J.addListener=J.on=J.prependListener=J.once=J.prependOnceListener=J.removeListener=J.removeAllListeners=J.listeners=J.listenerCount=J.eventNames=J.write=J.flush=A,J.serializers=B,J._serialize=z,J._stdErrSerialize=j,J.child=K,F&&(J._logEvent=g());function _(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function q(O){if(O!=="silent"&&!this.levels.values[O])throw Error("unknown level "+O);this._level=O,i(I,J,"error","log"),i(I,J,"fatal","error"),i(I,J,"warn","error"),i(I,J,"info","log"),i(I,J,"debug","log"),i(I,J,"trace","log")}function K(O,G){if(!O)throw new Error("missing bindings for child Pino");G=G||{},z&&O.serializers&&(G.serializers=O.serializers);const Z=G.serializers;if(z&&Z){var re=Object.assign({},B,Z),ee=P.browser.serialize===!0?Object.keys(re):z;delete O.serializers,h([O],ee,re,this._stdErrSerialize)}function ue(ge){this._childLevel=(ge._childLevel|0)+1,this.error=d(ge,O,"error"),this.fatal=d(ge,O,"fatal"),this.warn=d(ge,O,"warn"),this.info=d(ge,O,"info"),this.debug=d(ge,O,"debug"),this.trace=d(ge,O,"trace"),re&&(this.serializers=re,this._serialize=ee),F&&(this._logEvent=g([].concat(ge._logEvent.bindings,O)))}return ue.prototype=this,new ue(this)}return J}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:x,unixTime:T,isoTime:k});function i(P,F,$,B){const z=Object.getPrototypeOf(F);F[$]=F.levelVal>F.levels.values[$]?A:z[$]?z[$]:e[$]||e[B]||A,o(P,F,$)}function o(P,F,$){!P.transmit&&F[$]===A||(F[$]=function(B){return function(){const j=P.timestamp(),W=new Array(arguments.length),ne=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var J=0;J<W.length;J++)W[J]=arguments[J];if(P.serialize&&!P.asObject&&h(W,this._serialize,this.serializers,this._stdErrSerialize),P.asObject?B.call(ne,l(this,$,W,j)):B.apply(ne,W),P.transmit){const I=P.transmit.level||F.level,_=s.levels.values[I],L=s.levels.values[$];if(L<_)return;p(this,{ts:j,methodLevel:$,methodValue:L,transmitValue:s.levels.values[P.transmit.level||F.level],send:P.transmit.send,val:F.levelVal},W)}}}(F[$]))}function l(P,F,$,B){P._serialize&&h($,P._serialize,P.serializers,P._stdErrSerialize);const z=$.slice();let j=z[0];const W={};B&&(W.time=B),W.level=s.levels.values[F];let ne=(P._childLevel|0)+1;if(ne<1&&(ne=1),j!==null&&typeof j=="object"){for(;ne--&&typeof z[0]=="object";)Object.assign(W,z.shift());j=z.length?n(z.shift(),z):void 0}else typeof j=="string"&&(j=n(z.shift(),z));return j!==void 0&&(W.msg=j),W}function h(P,F,$,B){for(const z in P)if(B&&P[z]instanceof Error)P[z]=s.stdSerializers.err(P[z]);else if(typeof P[z]=="object"&&!Array.isArray(P[z]))for(const j in P[z])F&&F.indexOf(j)>-1&&j in $&&(P[z][j]=$[j](P[z][j]))}function d(P,F,$){return function(){const B=new Array(1+arguments.length);B[0]=F;for(var z=1;z<B.length;z++)B[z]=arguments[z-1];return P[$].apply(this,B)}}function p(P,F,$){const B=F.send,z=F.ts,j=F.methodLevel,W=F.methodValue,ne=F.val,J=P._logEvent.bindings;h($,P._serialize||Object.keys(P.serializers),P.serializers,P._stdErrSerialize===void 0?!0:P._stdErrSerialize),P._logEvent.ts=z,P._logEvent.messages=$.filter(function(I){return J.indexOf(I)===-1}),P._logEvent.level.label=j,P._logEvent.level.value=W,B(j,P._logEvent,ne),P._logEvent=g(J)}function g(P){return{ts:0,messages:[],bindings:P||[],level:{label:"",value:0}}}function y(P){const F={type:P.constructor.name,msg:P.message,stack:P.stack};for(const $ in P)F[$]===void 0&&(F[$]=P[$]);return F}function b(P){return typeof P.timestamp=="function"?P.timestamp:P.timestamp===!1?S:x}function v(){return{}}function E(P){return P}function A(){}function S(){return!1}function x(){return Date.now()}function T(){return Math.round(Date.now()/1e3)}function k(){return new Date(Date.now()).toISOString()}function R(){function P(F){return typeof F<"u"&&F}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return P(self)||P(window)||P(this)||{}}}return fC}var kd=CV();const X0=$0(kd),_V={level:"info"},J0="custom_context",CS=1e3*1024;let SV=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},dR=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new SV(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},Y5=class{constructor(e,t=CS){this.level=e??"error",this.levelValue=kd.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new dR(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===kd.levels.values.error?console.error(e):t===kd.levels.values.warn?console.warn(e):t===kd.levels.values.debug?console.debug(e):t===kd.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(qo({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new dR(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(qo({extraMetadata:e})),new Blob(t,{type:"application/json"})}},NV=class{constructor(e,t=CS){this.baseChunkLogger=new Y5(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},TV=class{constructor(e,t=CS){this.baseChunkLogger=new Y5(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var xV=Object.defineProperty,IV=Object.defineProperties,OV=Object.getOwnPropertyDescriptors,fR=Object.getOwnPropertySymbols,RV=Object.prototype.hasOwnProperty,DV=Object.prototype.propertyIsEnumerable,pR=(n,e,t)=>e in n?xV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qb=(n,e)=>{for(var t in e||(e={}))RV.call(e,t)&&pR(n,t,e[t]);if(fR)for(var t of fR(e))DV.call(e,t)&&pR(n,t,e[t]);return n},Zb=(n,e)=>IV(n,OV(e));function yp(n){return Zb(Qb({},n),{level:(n==null?void 0:n.level)||_V.level})}function PV(n,e=J0){return n[e]||""}function UV(n,e,t=J0){return n[t]=e,n}function Cs(n,e=J0){let t="";return typeof n.bindings>"u"?t=PV(n,e):t=n.bindings().context||"",t}function kV(n,e,t=J0){const r=Cs(n,t);return r.trim()?`${r}/${e}`:e}function Pr(n,e,t=J0){const r=kV(n,e,t),s=n.child({context:r});return UV(s,r,t)}function BV(n){var e,t;const r=new NV((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:X0(Zb(Qb({},n.opts),{level:"trace",browser:Zb(Qb({},(t=n.opts)==null?void 0:t.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function LV(n){var e;const t=new TV((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:X0(Zb(Qb({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function _S(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?BV(n):LV(n)}var MV=Object.defineProperty,$V=(n,e,t)=>e in n?MV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gR=(n,e,t)=>$V(n,typeof e!="symbol"?e+"":e,t);let FV=class extends wh{constructor(e){super(),this.opts=e,gR(this,"protocol","wc"),gR(this,"version",2)}};var HV=Object.defineProperty,zV=(n,e,t)=>e in n?HV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jV=(n,e,t)=>zV(n,e+"",t);let qV=class extends wh{constructor(e,t){super(),this.core=e,this.logger=t,jV(this,"records",new Map)}},VV=class{constructor(e,t){this.logger=e,this.core=t}},GV=class extends wh{constructor(e,t){super(),this.relayer=e,this.logger=t}},KV=class extends wh{constructor(e){super()}},WV=class{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}},YV=class extends wh{constructor(e,t){super(),this.relayer=e,this.logger=t}},QV=class extends wh{constructor(e,t){super(),this.core=e,this.logger=t}},ZV=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},XV=class{constructor(e,t){this.projectId=e,this.logger=t}},JV=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var eG=Object.defineProperty,tG=(n,e,t)=>e in n?eG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mR=(n,e,t)=>tG(n,typeof e!="symbol"?e+"":e,t);let nG=class{constructor(e){this.opts=e,mR(this,"protocol","wc"),mR(this,"version",2)}},rG=class{constructor(e){this.client=e}};function sG(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Q5(n,...e){if(!sG(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function yR(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function iG(n,e){Q5(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const gd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pC=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function aG(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Z5(n){return typeof n=="string"&&(n=aG(n)),Q5(n),n}let oG=class{clone(){return this._cloneInto()}};function cG(n){const e=r=>n().update(Z5(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function X5(n=32){if(gd&&typeof gd.getRandomValues=="function")return gd.getRandomValues(new Uint8Array(n));if(gd&&typeof gd.randomBytes=="function")return gd.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function lG(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}let uG=class extends oG{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pC(this.buffer)}update(e){yR(this);const{view:t,buffer:r,blockLen:s}=this;e=Z5(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=pC(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yR(this),iG(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;lG(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=pC(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}};const Vw=BigInt(2**32-1),J_=BigInt(32);function J5(n,e=!1){return e?{h:Number(n&Vw),l:Number(n>>J_&Vw)}:{h:Number(n>>J_&Vw)|0,l:Number(n&Vw)|0}}function hG(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=J5(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const dG=(n,e)=>BigInt(n>>>0)<<J_|BigInt(e>>>0),fG=(n,e,t)=>n>>>t,pG=(n,e,t)=>n<<32-t|e>>>t,gG=(n,e,t)=>n>>>t|e<<32-t,mG=(n,e,t)=>n<<32-t|e>>>t,yG=(n,e,t)=>n<<64-t|e>>>t-32,wG=(n,e,t)=>n>>>t-32|e<<64-t,bG=(n,e)=>e,EG=(n,e)=>n,vG=(n,e,t)=>n<<t|e>>>32-t,AG=(n,e,t)=>e<<t|n>>>32-t,CG=(n,e,t)=>e<<t-32|n>>>64-t,_G=(n,e,t)=>n<<t-32|e>>>64-t;function SG(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const NG=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),TG=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,xG=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),IG=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,OG=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),RG=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,ht={fromBig:J5,split:hG,toBig:dG,shrSH:fG,shrSL:pG,rotrSH:gG,rotrSL:mG,rotrBH:yG,rotrBL:wG,rotr32H:bG,rotr32L:EG,rotlSH:vG,rotlSL:AG,rotlBH:CG,rotlBL:_G,add:SG,add3L:NG,add3H:TG,add4L:xG,add4H:IG,add5H:RG,add5L:OG},[DG,PG]=ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Nc=new Uint32Array(80),Tc=new Uint32Array(80);let UG=class extends uG{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)Nc[T]=e.getUint32(t),Tc[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const k=Nc[T-15]|0,R=Tc[T-15]|0,P=ht.rotrSH(k,R,1)^ht.rotrSH(k,R,8)^ht.shrSH(k,R,7),F=ht.rotrSL(k,R,1)^ht.rotrSL(k,R,8)^ht.shrSL(k,R,7),$=Nc[T-2]|0,B=Tc[T-2]|0,z=ht.rotrSH($,B,19)^ht.rotrBH($,B,61)^ht.shrSH($,B,6),j=ht.rotrSL($,B,19)^ht.rotrBL($,B,61)^ht.shrSL($,B,6),W=ht.add4L(F,j,Tc[T-7],Tc[T-16]),ne=ht.add4H(W,P,z,Nc[T-7],Nc[T-16]);Nc[T]=ne|0,Tc[T]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:A,Hh:S,Hl:x}=this;for(let T=0;T<80;T++){const k=ht.rotrSH(g,y,14)^ht.rotrSH(g,y,18)^ht.rotrBH(g,y,41),R=ht.rotrSL(g,y,14)^ht.rotrSL(g,y,18)^ht.rotrBL(g,y,41),P=g&b^~g&E,F=y&v^~y&A,$=ht.add5L(x,R,F,PG[T],Tc[T]),B=ht.add5H($,S,k,P,DG[T],Nc[T]),z=$|0,j=ht.rotrSH(r,s,28)^ht.rotrBH(r,s,34)^ht.rotrBH(r,s,39),W=ht.rotrSL(r,s,28)^ht.rotrBL(r,s,34)^ht.rotrBL(r,s,39),ne=r&i^r&l^i&l,J=s&o^s&h^o&h;S=E|0,x=A|0,E=b|0,A=v|0,b=g|0,v=y|0,{h:g,l:y}=ht.add(d|0,p|0,B|0,z|0),d=l|0,p=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const I=ht.add3L(z,W,J);r=ht.add3H(I,B,j,ne),s=I|0}({h:r,l:s}=ht.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ht.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=ht.add(this.Ch|0,this.Cl|0,l|0,h|0),{h:d,l:p}=ht.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=ht.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=ht.add(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:A}=ht.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:x}=ht.add(this.Hh|0,this.Hl|0,S|0,x|0),this.set(r,s,i,o,l,h,d,p,g,y,b,v,E,A,S,x)}roundClean(){Nc.fill(0),Tc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const kG=cG(()=>new UG);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SS=BigInt(0),e4=BigInt(1),BG=BigInt(2);function NS(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function TS(n){if(!NS(n))throw new Error("Uint8Array expected")}function gC(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const LG=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function xS(n){TS(n);let e="";for(let t=0;t<n.length;t++)e+=LG[n[t]];return e}function t4(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?SS:BigInt("0x"+n)}const co={_0:48,_9:57,A:65,F:70,a:97,f:102};function wR(n){if(n>=co._0&&n<=co._9)return n-co._0;if(n>=co.A&&n<=co.F)return n-(co.A-10);if(n>=co.a&&n<=co.f)return n-(co.a-10)}function n4(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=wR(n.charCodeAt(i)),l=wR(n.charCodeAt(i+1));if(o===void 0||l===void 0){const h=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}r[s]=o*16+l}return r}function MG(n){return t4(xS(n))}function Ab(n){return TS(n),t4(xS(Uint8Array.from(n).reverse()))}function r4(n,e){return n4(n.toString(16).padStart(e*2,"0"))}function e2(n,e){return r4(n,e).reverse()}function lo(n,e,t){let r;if(typeof e=="string")try{r=n4(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(NS(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}function bR(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];TS(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}const mC=n=>typeof n=="bigint"&&SS<=n;function $G(n,e,t){return mC(n)&&mC(e)&&mC(t)&&e<=n&&n<t}function Mg(n,e,t,r){if(!$G(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function FG(n){let e;for(e=0;n>SS;n>>=e4,e+=1);return e}const HG=n=>(BG<<BigInt(n-1))-e4,zG={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||NS(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function IS(n,e,t={}){const r=(s,i,o)=>{const l=zG[i];if(typeof l!="function")throw new Error("invalid validator function");const h=n[s];if(!(o&&h===void 0)&&!l(h,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+h)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}function ER(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const rr=BigInt(0),In=BigInt(1),au=BigInt(2),jG=BigInt(3),t2=BigInt(4),vR=BigInt(5),AR=BigInt(8);function Hn(n,e){const t=n%e;return t>=rr?t:e+t}function qG(n,e,t){if(e<rr)throw new Error("invalid exponent, negatives unsupported");if(t<=rr)throw new Error("invalid modulus");if(t===In)return rr;let r=In;for(;e>rr;)e&In&&(r=r*n%t),n=n*n%t,e>>=In;return r}function ha(n,e,t){let r=n;for(;e-- >rr;)r*=r,r%=t;return r}function CR(n,e){if(n===rr)throw new Error("invert: expected non-zero number");if(e<=rr)throw new Error("invert: expected positive modulus, got "+e);let t=Hn(n,e),r=e,s=rr,i=In;for(;t!==rr;){const o=r/t,l=r%t,h=s-i*o;r=t,t=l,s=i,i=h}if(r!==In)throw new Error("invert: does not exist");return Hn(s,e)}function VG(n){const e=(n-In)/au;let t,r,s;for(t=n-In,r=0;t%au===rr;t/=au,r++);for(s=au;s<n&&qG(s,e,n)!==n-In;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+In)/t2;return function(l,h){const d=l.pow(h,o);if(!l.eql(l.sqr(d),h))throw new Error("Cannot find square root");return d}}const i=(t+In)/au;return function(o,l){if(o.pow(l,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let h=r,d=o.pow(o.mul(o.ONE,s),t),p=o.pow(l,i),g=o.pow(l,t);for(;!o.eql(g,o.ONE);){if(o.eql(g,o.ZERO))return o.ZERO;let y=1;for(let v=o.sqr(g);y<h&&!o.eql(v,o.ONE);y++)v=o.sqr(v);const b=o.pow(d,In<<BigInt(h-y-1));d=o.sqr(b),p=o.mul(p,b),g=o.mul(g,d),h=y}return p}}function GG(n){if(n%t2===jG){const e=(n+In)/t2;return function(t,r){const s=t.pow(r,e);if(!t.eql(t.sqr(s),r))throw new Error("Cannot find square root");return s}}if(n%AR===vR){const e=(n-vR)/AR;return function(t,r){const s=t.mul(r,au),i=t.pow(s,e),o=t.mul(r,i),l=t.mul(t.mul(o,au),i),h=t.mul(o,t.sub(l,t.ONE));if(!t.eql(t.sqr(h),r))throw new Error("Cannot find square root");return h}}return VG(n)}const KG=(n,e)=>(Hn(n,e)&In)===In,WG=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function YG(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=WG.reduce((r,s)=>(r[s]="function",r),e);return IS(n,t)}function QG(n,e,t){if(t<rr)throw new Error("invalid exponent, negatives unsupported");if(t===rr)return n.ONE;if(t===In)return e;let r=n.ONE,s=e;for(;t>rr;)t&In&&(r=n.mul(r,s)),s=n.sqr(s),t>>=In;return r}function ZG(n,e){const t=new Array(e.length),r=e.reduce((i,o,l)=>n.is0(o)?i:(t[l]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,l)=>n.is0(o)?i:(t[l]=n.mul(i,t[l]),n.mul(i,o)),s),t}function s4(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function i4(n,e,t=!1,r={}){if(n<=rr)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=s4(n,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const l=Object.freeze({ORDER:n,isLE:t,BITS:s,BYTES:i,MASK:HG(s),ZERO:rr,ONE:In,create:h=>Hn(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return rr<=h&&h<n},is0:h=>h===rr,isOdd:h=>(h&In)===In,neg:h=>Hn(-h,n),eql:(h,d)=>h===d,sqr:h=>Hn(h*h,n),add:(h,d)=>Hn(h+d,n),sub:(h,d)=>Hn(h-d,n),mul:(h,d)=>Hn(h*d,n),pow:(h,d)=>QG(l,h,d),div:(h,d)=>Hn(h*CR(d,n),n),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>CR(h,n),sqrt:r.sqrt||(h=>(o||(o=GG(n)),o(l,h))),invertBatch:h=>ZG(l,h),cmov:(h,d,p)=>p?d:h,toBytes:h=>t?e2(h,i):r4(h,i),fromBytes:h=>{if(h.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+h.length);return t?Ab(h):MG(h)}});return Object.freeze(l)}const _R=BigInt(0),Gw=BigInt(1);function yC(n,e){const t=e.negate();return n?t:e}function a4(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function wC(n,e){a4(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function XG(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function JG(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const bC=new WeakMap,o4=new WeakMap;function EC(n){return o4.get(n)||1}function eK(n,e){return{constTimeNegate:yC,hasPrecomputes(t){return EC(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>_R;)r&Gw&&(s=s.add(i)),i=i.double(),r>>=Gw;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=wC(r,e),o=[];let l=t,h=l;for(let d=0;d<s;d++){h=l,o.push(h);for(let p=1;p<i;p++)h=h.add(l),o.push(h);l=h.double()}return o},wNAF(t,r,s){const{windows:i,windowSize:o}=wC(t,e);let l=n.ZERO,h=n.BASE;const d=BigInt(2**t-1),p=2**t,g=BigInt(t);for(let y=0;y<i;y++){const b=y*o;let v=Number(s&d);s>>=g,v>o&&(v-=p,s+=Gw);const E=b,A=b+Math.abs(v)-1,S=y%2!==0,x=v<0;v===0?h=h.add(yC(S,r[E])):l=l.add(yC(x,r[A]))}return{p:l,f:h}},wNAFUnsafe(t,r,s,i=n.ZERO){const{windows:o,windowSize:l}=wC(t,e),h=BigInt(2**t-1),d=2**t,p=BigInt(t);for(let g=0;g<o;g++){const y=g*l;if(s===_R)break;let b=Number(s&h);if(s>>=p,b>l&&(b-=d,s+=Gw),b===0)continue;let v=r[y+Math.abs(b)-1];b<0&&(v=v.negate()),i=i.add(v)}return i},getPrecomputes(t,r,s){let i=bC.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&bC.set(r,s(i))),i},wNAFCached(t,r,s){const i=EC(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=EC(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){a4(r,e),o4.set(t,r),bC.delete(t)}}}function tK(n,e,t,r){if(XG(t,n),JG(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,i=FG(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,l=(1<<o)-1,h=new Array(l+1).fill(s),d=Math.floor((e.BITS-1)/o)*o;let p=s;for(let g=d;g>=0;g-=o){h.fill(s);for(let b=0;b<r.length;b++){const v=r[b],E=Number(v>>BigInt(g)&BigInt(l));h[E]=h[E].add(t[b])}let y=s;for(let b=h.length-1,v=s;b>0;b--)v=v.add(h[b]),y=y.add(v);if(p=p.add(y),g!==0)for(let b=0;b<o;b++)p=p.double()}return p}function nK(n){return YG(n.Fp),IS(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...s4(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const xi=BigInt(0),is=BigInt(1),Kw=BigInt(2),rK=BigInt(8),sK={zip215:!0};function iK(n){const e=nK(n);return IS(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function aK(n){const e=iK(n),{Fp:t,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:l,h}=e,d=Kw<<BigInt(l*8)-is,p=t.create,g=i4(e.n,e.nBitLength),y=e.uvRatio||((I,_)=>{try{return{isValid:!0,value:t.sqrt(I*t.inv(_))}}catch{return{isValid:!1,value:xi}}}),b=e.adjustScalarBytes||(I=>I),v=e.domain||((I,_,L)=>{if(gC("phflag",L),_.length||L)throw new Error("Contexts/pre-hash are not supported");return I});function E(I,_){Mg("coordinate "+I,_,xi,d)}function A(I){if(!(I instanceof T))throw new Error("ExtendedPoint expected")}const S=ER((I,_)=>{const{ex:L,ey:q,ez:K}=I,O=I.is0();_==null&&(_=O?rK:t.inv(K));const G=p(L*_),Z=p(q*_),re=p(K*_);if(O)return{x:xi,y:is};if(re!==is)throw new Error("invZ was invalid");return{x:G,y:Z}}),x=ER(I=>{const{a:_,d:L}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:q,ey:K,ez:O,et:G}=I,Z=p(q*q),re=p(K*K),ee=p(O*O),ue=p(ee*ee),ge=p(Z*_),Ce=p(ee*p(ge+re)),Pe=p(ue+p(L*p(Z*re)));if(Ce!==Pe)throw new Error("bad point: equation left != right (1)");const Te=p(q*K),Qe=p(O*G);if(Te!==Qe)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(_,L,q,K){this.ex=_,this.ey=L,this.ez=q,this.et=K,E("x",_),E("y",L),E("z",q),E("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof T)throw new Error("extended point not allowed");const{x:L,y:q}=_||{};return E("x",L),E("y",q),new T(L,q,is,p(L*q))}static normalizeZ(_){const L=t.invertBatch(_.map(q=>q.ez));return _.map((q,K)=>q.toAffine(L[K])).map(T.fromAffine)}static msm(_,L){return tK(T,g,_,L)}_setWindowSize(_){P.setWindowSize(this,_)}assertValidity(){x(this)}equals(_){A(_);const{ex:L,ey:q,ez:K}=this,{ex:O,ey:G,ez:Z}=_,re=p(L*Z),ee=p(O*K),ue=p(q*Z),ge=p(G*K);return re===ee&&ue===ge}is0(){return this.equals(T.ZERO)}negate(){return new T(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:_}=e,{ex:L,ey:q,ez:K}=this,O=p(L*L),G=p(q*q),Z=p(Kw*p(K*K)),re=p(_*O),ee=L+q,ue=p(p(ee*ee)-O-G),ge=re+G,Ce=ge-Z,Pe=re-G,Te=p(ue*Ce),Qe=p(ge*Pe),Wt=p(ue*Pe),Bt=p(Ce*ge);return new T(Te,Qe,Bt,Wt)}add(_){A(_);const{a:L,d:q}=e,{ex:K,ey:O,ez:G,et:Z}=this,{ex:re,ey:ee,ez:ue,et:ge}=_;if(L===BigInt(-1)){const Np=p((O-K)*(ee+re)),Tp=p((O+K)*(ee-re)),Yo=p(Tp-Np);if(Yo===xi)return this.double();const uy=p(G*Kw*ge),xp=p(Z*Kw*ue),hy=xp+uy,dy=Tp+Np,Qo=xp-uy,Ur=p(hy*Yo),ra=p(dy*Qo),kr=p(hy*Qo),gv=p(Yo*dy);return new T(Ur,ra,gv,kr)}const Ce=p(K*re),Pe=p(O*ee),Te=p(Z*q*ge),Qe=p(G*ue),Wt=p((K+O)*(re+ee)-Ce-Pe),Bt=Qe-Te,mn=Qe+Te,hn=p(Pe-L*Ce),na=p(Wt*Bt),Ch=p(mn*hn),Ws=p(Wt*hn),pv=p(Bt*mn);return new T(na,Ch,pv,Ws)}subtract(_){return this.add(_.negate())}wNAF(_){return P.wNAFCached(this,_,T.normalizeZ)}multiply(_){const L=_;Mg("scalar",L,is,r);const{p:q,f:K}=this.wNAF(L);return T.normalizeZ([q,K])[0]}multiplyUnsafe(_,L=T.ZERO){const q=_;return Mg("scalar",q,xi,r),q===xi?R:this.is0()||q===is?this:P.wNAFCachedUnsafe(this,q,T.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return P.unsafeLadder(this,r).is0()}toAffine(_){return S(this,_)}clearCofactor(){const{h:_}=e;return _===is?this:this.multiplyUnsafe(_)}static fromHex(_,L=!1){const{d:q,a:K}=e,O=t.BYTES;_=lo("pointHex",_,O),gC("zip215",L);const G=_.slice(),Z=_[O-1];G[O-1]=Z&-129;const re=Ab(G),ee=L?d:t.ORDER;Mg("pointHex.y",re,xi,ee);const ue=p(re*re),ge=p(ue-is),Ce=p(q*ue-K);let{isValid:Pe,value:Te}=y(ge,Ce);if(!Pe)throw new Error("Point.fromHex: invalid y coordinate");const Qe=(Te&is)===is,Wt=(Z&128)!==0;if(!L&&Te===xi&&Wt)throw new Error("Point.fromHex: x=0 and x_0=1");return Wt!==Qe&&(Te=p(-Te)),T.fromAffine({x:Te,y:re})}static fromPrivateKey(_){return B(_).point}toRawBytes(){const{x:_,y:L}=this.toAffine(),q=e2(L,t.BYTES);return q[q.length-1]|=_&is?128:0,q}toHex(){return xS(this.toRawBytes())}}T.BASE=new T(e.Gx,e.Gy,is,p(e.Gx*e.Gy)),T.ZERO=new T(xi,is,is,xi);const{BASE:k,ZERO:R}=T,P=eK(T,l*8);function F(I){return Hn(I,r)}function $(I){return F(Ab(I))}function B(I){const _=t.BYTES;I=lo("private key",I,_);const L=lo("hashed private key",i(I),2*_),q=b(L.slice(0,_)),K=L.slice(_,2*_),O=$(q),G=k.multiply(O),Z=G.toRawBytes();return{head:q,prefix:K,scalar:O,point:G,pointBytes:Z}}function z(I){return B(I).pointBytes}function j(I=new Uint8Array,..._){const L=bR(..._);return $(i(v(L,lo("context",I),!!s)))}function W(I,_,L={}){I=lo("message",I),s&&(I=s(I));const{prefix:q,scalar:K,pointBytes:O}=B(_),G=j(L.context,q,I),Z=k.multiply(G).toRawBytes(),re=j(L.context,Z,O,I),ee=F(G+re*K);Mg("signature.s",ee,xi,r);const ue=bR(Z,e2(ee,t.BYTES));return lo("result",ue,t.BYTES*2)}const ne=sK;function J(I,_,L,q=ne){const{context:K,zip215:O}=q,G=t.BYTES;I=lo("signature",I,2*G),_=lo("message",_),L=lo("publicKey",L,G),O!==void 0&&gC("zip215",O),s&&(_=s(_));const Z=Ab(I.slice(G,2*G));let re,ee,ue;try{re=T.fromHex(L,O),ee=T.fromHex(I.slice(0,G),O),ue=k.multiplyUnsafe(Z)}catch{return!1}if(!O&&re.isSmallOrder())return!1;const ge=j(K,ee.toRawBytes(),re.toRawBytes(),_);return ee.add(re.multiplyUnsafe(ge)).subtract(ue).clearCofactor().equals(T.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:W,verify:J,ExtendedPoint:T,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(t.BYTES),precompute(I=8,_=T.BASE){return _._setWindowSize(I),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const OS=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),SR=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const oK=BigInt(1),NR=BigInt(2);BigInt(3);const cK=BigInt(5),lK=BigInt(8);function uK(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=OS,o=n*n%i*n%i,l=ha(o,NR,i)*o%i,h=ha(l,oK,i)*n%i,d=ha(h,cK,i)*h%i,p=ha(d,e,i)*d%i,g=ha(p,t,i)*p%i,y=ha(g,r,i)*g%i,b=ha(y,s,i)*y%i,v=ha(b,s,i)*y%i,E=ha(v,e,i)*d%i;return{pow_p_5_8:ha(E,NR,i)*n%i,b2:o}}function hK(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function dK(n,e){const t=OS,r=Hn(e*e*e,t),s=Hn(r*r*e,t),i=uK(n*s).pow_p_5_8;let o=Hn(n*r*i,t);const l=Hn(e*o*o,t),h=o,d=Hn(o*SR,t),p=l===n,g=l===Hn(-n,t),y=l===Hn(-n*SR,t);return p&&(o=h),(g||y)&&(o=d),KG(o,t)&&(o=Hn(-o,t)),{isValid:p||g,value:o}}const fK=i4(OS,void 0,!0),pK={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:fK,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:lK,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:kG,randomBytes:X5,adjustScalarBytes:hK,uvRatio:dK},c4=aK(pK),gK="EdDSA",mK="JWT",Xb=".",WE="base64url",l4="utf8",u4="utf8",yK=":",wK="did",bK="key",TR="base58btc",EK="z",vK="K36",AK=32;function RS(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function h4(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?RS(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function d4(n,e){e||(e=n.reduce((s,i)=>s+i.length,0));const t=h4(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return RS(t)}function CK(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,h=n.charAt(0),d=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,A=0,S=0,x=v.length;S!==x&&v[S]===0;)S++,E++;for(var T=(x-S)*p+1>>>0,k=new Uint8Array(T);S!==x;){for(var R=v[S],P=0,F=T-1;(R!==0||P<A)&&F!==-1;F--,P++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=P,S++}for(var $=T-A;$!==T&&k[$]===0;)$++;for(var B=h.repeat(E);$<T;++$)B+=n.charAt(k[$]);return B}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var A=0,S=0;v[E]===h;)A++,E++;for(var x=(v.length-E)*d+1>>>0,T=new Uint8Array(x);v[E];){var k=t[v.charCodeAt(E)];if(k===255)return;for(var R=0,P=x-1;(k!==0||R<S)&&P!==-1;P--,R++)k+=l*T[P]>>>0,T[P]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,E++}if(v[E]!==" "){for(var F=x-S;F!==x&&T[F]===0;)F++;for(var $=new Uint8Array(A+(x-F)),B=A;F!==x;)$[B++]=T[F++];return $}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var _K=CK,SK=_K;const f4=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},NK=n=>new TextEncoder().encode(n),TK=n=>new TextDecoder().decode(n);let xK=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},IK=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return p4(this,e)}},OK=class{constructor(e){this.decoders=e}or(e){return p4(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const p4=(n,e)=>new OK({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let RK=class{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new xK(e,t,r),this.decoder=new IK(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const YE=({name:n,prefix:e,encode:t,decode:r})=>new RK(n,e,t,r),ey=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=SK(t,e);return YE({prefix:n,name:e,encode:r,decode:i=>f4(s(i))})},DK=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,h=0,d=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|g,l+=t,l>=8&&(l-=8,o[d++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return o},PK=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let h=0;h<n.length;++h)for(l=l<<8|n[h],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},yr=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>YE({prefix:e,name:n,encode(s){return PK(s,r,t)},decode(s){return DK(s,r,t,n)}}),UK=YE({prefix:"\0",name:"identity",encode:n=>TK(n),decode:n=>NK(n)});var kK=Object.freeze({__proto__:null,identity:UK});const BK=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var LK=Object.freeze({__proto__:null,base2:BK});const MK=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $K=Object.freeze({__proto__:null,base8:MK});const FK=ey({prefix:"9",name:"base10",alphabet:"0123456789"});var HK=Object.freeze({__proto__:null,base10:FK});const zK=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jK=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qK=Object.freeze({__proto__:null,base16:zK,base16upper:jK});const VK=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),GK=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),KK=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),WK=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),YK=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),QK=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZK=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),XK=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),JK=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eW=Object.freeze({__proto__:null,base32:VK,base32upper:GK,base32pad:KK,base32padupper:WK,base32hex:YK,base32hexupper:QK,base32hexpad:ZK,base32hexpadupper:XK,base32z:JK});const tW=ey({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nW=ey({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rW=Object.freeze({__proto__:null,base36:tW,base36upper:nW});const sW=ey({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iW=ey({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var aW=Object.freeze({__proto__:null,base58btc:sW,base58flickr:iW});const oW=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cW=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lW=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uW=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hW=Object.freeze({__proto__:null,base64:oW,base64pad:cW,base64url:lW,base64urlpad:uW});const g4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),dW=g4.reduce((n,e,t)=>(n[t]=e,n),[]),fW=g4.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function pW(n){return n.reduce((e,t)=>(e+=dW[t],e),"")}function gW(n){const e=[];for(const t of n){const r=fW[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const mW=YE({prefix:"🚀",name:"base256emoji",encode:pW,decode:gW});var yW=Object.freeze({__proto__:null,base256emoji:mW}),wW=m4,xR=128,bW=-128,EW=Math.pow(2,31);function m4(n,e,t){e=e||[],t=t||0;for(var r=t;n>=EW;)e[t++]=n&255|xR,n/=128;for(;n&bW;)e[t++]=n&255|xR,n>>>=7;return e[t]=n|0,m4.bytes=t-r+1,e}var vW=n2,AW=128,IR=127;function n2(n,r){var t=0,r=r||0,s=0,i=r,o,l=n.length;do{if(i>=l)throw n2.bytes=0,new RangeError("Could not decode varint");o=n[i++],t+=s<28?(o&IR)<<s:(o&IR)*Math.pow(2,s),s+=7}while(o>=AW);return n2.bytes=i-r,t}var CW=Math.pow(2,7),_W=Math.pow(2,14),SW=Math.pow(2,21),NW=Math.pow(2,28),TW=Math.pow(2,35),xW=Math.pow(2,42),IW=Math.pow(2,49),OW=Math.pow(2,56),RW=Math.pow(2,63),DW=function(n){return n<CW?1:n<_W?2:n<SW?3:n<NW?4:n<TW?5:n<xW?6:n<IW?7:n<OW?8:n<RW?9:10},PW={encode:wW,decode:vW,encodingLength:DW},y4=PW;const OR=(n,e,t=0)=>(y4.encode(n,e,t),e),RR=n=>y4.encodingLength(n),r2=(n,e)=>{const t=e.byteLength,r=RR(n),s=r+RR(t),i=new Uint8Array(s+t);return OR(n,i,0),OR(t,i,r),i.set(e,s),new UW(n,t,e,i)};let UW=class{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}};const w4=({name:n,code:e,encode:t})=>new kW(n,e,t);let kW=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?r2(this.code,t):t.then(r=>r2(this.code,r))}else throw Error("Unknown type, must be binary type")}};const b4=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),BW=w4({name:"sha2-256",code:18,encode:b4("SHA-256")}),LW=w4({name:"sha2-512",code:19,encode:b4("SHA-512")});var MW=Object.freeze({__proto__:null,sha256:BW,sha512:LW});const E4=0,$W="identity",v4=f4,FW=n=>r2(E4,v4(n)),HW={code:E4,name:$W,encode:v4,digest:FW};var zW=Object.freeze({__proto__:null,identity:HW});new TextEncoder,new TextDecoder;const DR={...kK,...LK,...$K,...HK,...qK,...eW,...rW,...aW,...hW,...yW};({...MW,...zW});function A4(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const PR=A4("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),vC=A4("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=h4(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),C4={utf8:PR,"utf-8":PR,hex:DR.base16,latin1:vC,ascii:vC,binary:vC,...DR};function QE(n,e="utf8"){const t=C4[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function wp(n,e="utf8"){const t=C4[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?RS(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function UR(n){return sh(QE(wp(n,WE),l4))}function Jb(n){return QE(wp(qo(n),l4),WE)}function _4(n){const e=wp(vK,TR),t=EK+QE(d4([e,n]),TR);return[wK,bK,t].join(yK)}function jW(n){return QE(n,WE)}function qW(n){return wp(n,WE)}function VW(n){return wp([Jb(n.header),Jb(n.payload)].join(Xb),u4)}function GW(n){return[Jb(n.header),Jb(n.payload),jW(n.signature)].join(Xb)}function s2(n){const e=n.split(Xb),t=UR(e[0]),r=UR(e[1]),s=qW(e[2]),i=wp(e.slice(0,2).join(Xb),u4);return{header:t,payload:r,signature:s,data:i}}function kR(n=X5(AK)){const e=c4.getPublicKey(n);return{secretKey:d4([n,e]),publicKey:e}}async function KW(n,e,t,r,s=Se.fromMiliseconds(Date.now())){const i={alg:gK,typ:mK},o=_4(r.publicKey),l=s+t,h={iss:o,sub:n,aud:e,iat:s,exp:l},d=VW({header:i,payload:h}),p=c4.sign(d,r.secretKey.slice(0,32));return GW({header:i,payload:h,signature:p})}var BR=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},WW=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),YW=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),QW=function(){function n(e,t,r,s){this.name=e,this.version=t,this.os=r,this.bot=s,this.type="bot-device"}return n}(),ZW=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),XW=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),JW=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,eY=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,LR=3,tY=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",JW]],MR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nY(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new XW:typeof navigator<"u"?sY(navigator.userAgent):aY()}function rY(n){return n!==""&&tY.reduce(function(e,t){var r=t[0],s=t[1];if(e)return e;var i=s.exec(n);return!!i&&[r,i]},!1)}function sY(n){var e=rY(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new ZW;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<LR&&(s=BR(BR([],s,!0),oY(LR-s.length),!0)):s=[];var i=s.join("."),o=iY(n),l=eY.exec(n);return l&&l[1]?new QW(t,i,o,l[1]):new WW(t,i,o)}function iY(n){for(var e=0,t=MR.length;e<t;e++){var r=MR[e],s=r[0],i=r[1],o=i.exec(n);if(o)return s}return null}function aY(){var n=typeof process<"u"&&process.version;return n?new YW(process.version.slice(1)):null}function oY(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var nn={},$R;function S4(){if($R)return nn;$R=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.getLocalStorage=nn.getLocalStorageOrThrow=nn.getCrypto=nn.getCryptoOrThrow=nn.getLocation=nn.getLocationOrThrow=nn.getNavigator=nn.getNavigatorOrThrow=nn.getDocument=nn.getDocumentOrThrow=nn.getFromWindowOrThrow=nn.getFromWindow=void 0;function n(y){let b;return typeof window<"u"&&typeof window[y]<"u"&&(b=window[y]),b}nn.getFromWindow=n;function e(y){const b=n(y);if(!b)throw new Error(`${y} is not defined in Window`);return b}nn.getFromWindowOrThrow=e;function t(){return e("document")}nn.getDocumentOrThrow=t;function r(){return n("document")}nn.getDocument=r;function s(){return e("navigator")}nn.getNavigatorOrThrow=s;function i(){return n("navigator")}nn.getNavigator=i;function o(){return e("location")}nn.getLocationOrThrow=o;function l(){return n("location")}nn.getLocation=l;function h(){return e("crypto")}nn.getCryptoOrThrow=h;function d(){return n("crypto")}nn.getCrypto=d;function p(){return e("localStorage")}nn.getLocalStorageOrThrow=p;function g(){return n("localStorage")}return nn.getLocalStorage=g,nn}var Vo=S4(),$g={},FR;function cY(){if(FR)return $g;FR=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.getWindowMetadata=void 0;const n=S4();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function s(){const b=t.getElementsByTagName("link"),v=[];for(let E=0;E<b.length;E++){const A=b[E],S=A.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const x=A.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let T=r.protocol+"//"+r.host;if(x.indexOf("/")===0)T+=x;else{const k=r.pathname.split("/");k.pop();const R=k.join("/");T+=R+"/"+x}v.push(T)}else if(x.indexOf("//")===0){const T=r.protocol+x;v.push(T)}else v.push(x)}}return v}function i(...b){const v=t.getElementsByTagName("meta");for(let E=0;E<v.length;E++){const A=v[E],S=["itemprop","property","name"].map(x=>A.getAttribute(x)).filter(x=>x?b.includes(x):!1);if(S.length&&S){const x=A.getAttribute("content");if(x)return x}}return""}function o(){let b=i("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function l(){return i("description","og:description","twitter:description","keywords")}const h=o(),d=l(),p=r.origin,g=s();return{description:d,url:p,icons:g,name:h}}return $g.getWindowMetadata=e,$g}var lY=cY();function o0(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function i2(n){return o0(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const N4="2.31.0";let Fg={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${N4}`};class ih extends Error{constructor(e,t={}){var l;const r=(()=>{var h;return t.cause instanceof ih?t.cause.details:(h=t.cause)!=null&&h.message?t.cause.message:t.details})(),s=t.cause instanceof ih&&t.cause.docsPath||t.docsPath,i=(l=Fg.getDocsUrl)==null?void 0:l.call(Fg,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Fg.version?[`Version: ${Fg.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=N4}walk(e){return T4(this,e)}}function T4(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?T4(n.cause,e):e?null:n}class x4 extends ih{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function bp(n,{dir:e,size:t=32}={}){return typeof n=="string"?uY(n,{dir:e,size:t}):hY(n,{dir:e,size:t})}function uY(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new x4({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function hY(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new x4({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}class dY extends ih{constructor({max:e,min:t,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class fY extends ih{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Ep(n,{size:e}){if(i2(n)>e)throw new fY({givenSize:i2(n),maxSize:e})}function a2(n,e={}){const{signed:t}=e;e.size&&Ep(n,{size:e.size});const r=BigInt(n);if(!t)return r;const s=(n.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function pY(n,e={}){return Number(a2(n,e))}const gY=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function o2(n,e={}){return typeof n=="number"||typeof n=="bigint"?O4(n,e):typeof n=="string"?wY(n,e):typeof n=="boolean"?mY(n,e):I4(n,e)}function mY(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(Ep(t,{size:e.size}),bp(t,{size:e.size})):t}function I4(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=gY[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(Ep(r,{size:e.size}),bp(r,{dir:"right",size:e.size})):r}function O4(n,e={}){const{signed:t,size:r}=e,s=BigInt(n);let i;r?t?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const h=typeof n=="bigint"?"n":"";throw new dY({max:i?`${i}${h}`:void 0,min:`${o}${h}`,signed:t,size:r,value:`${n}${h}`})}const l=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?bp(l,{size:r}):l}const yY=new TextEncoder;function wY(n,e={}){const t=yY.encode(n);return I4(t,e)}const bY=new TextEncoder;function EY(n,e={}){return typeof n=="number"||typeof n=="bigint"?AY(n,e):typeof n=="boolean"?vY(n,e):o0(n)?R4(n,e):D4(n,e)}function vY(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(Ep(t,{size:e.size}),bp(t,{size:e.size})):t}const uo={zero:48,nine:57,A:65,F:70,a:97,f:102};function HR(n){if(n>=uo.zero&&n<=uo.nine)return n-uo.zero;if(n>=uo.A&&n<=uo.F)return n-(uo.A-10);if(n>=uo.a&&n<=uo.f)return n-(uo.a-10)}function R4(n,e={}){let t=n;e.size&&(Ep(t,{size:e.size}),t=bp(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,l=0;o<s;o++){const h=HR(r.charCodeAt(l++)),d=HR(r.charCodeAt(l++));if(h===void 0||d===void 0)throw new ih(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);i[o]=h*16+d}return i}function AY(n,e){const t=O4(n,e);return R4(t)}function D4(n,e={}){const t=bY.encode(n);return typeof e.size=="number"?(Ep(t,{size:e.size}),bp(t,{dir:"right",size:e.size})):t}function P4(n,e){const t=e||"hex",r=kj(o0(n,{strict:!1})?EY(n):n);return t==="bytes"?r:o2(r)}class CY extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const AC=new CY(8192);function _Y(n,e){if(AC.has(`${n}.${e}`))return AC.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=P4(D4(t),"bytes"),s=t.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return AC.set(`${n}.${e}`,i),i}function SY(n){const e=P4(`0x${n.substring(4)}`).substring(26);return _Y(`0x${e}`)}async function NY({hash:n,signature:e}){const t=o0(n)?n:o2(n),{secp256k1:r}=await $r(async()=>{const{secp256k1:o}=await import("./secp256k1-BbzfhM9c.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:p,v:g,yParity:y}=e,b=Number(y??g),v=zR(b);return new r.Signature(a2(d),a2(p)).addRecoveryBit(v)}const o=o0(e)?e:o2(e);if(i2(o)!==65)throw new Error("invalid signature length");const l=pY(`0x${o.slice(130)}`),h=zR(l);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(h)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function zR(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function TY({hash:n,signature:e}){return SY(await NY({hash:n,signature:e}))}function xY(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<n.length;d++){const p=n.charAt(d),g=p.charCodeAt(0);if(e[g]!==255)throw new TypeError(p+" is ambiguous");e[g]=d}const t=n.length,r=n.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let p=0,g=0,y=0;const b=d.length;for(;y!==b&&d[y]===0;)y++,p++;const v=(b-y)*i+1>>>0,E=new Uint8Array(v);for(;y!==b;){let x=d[y],T=0;for(let k=v-1;(x!==0||T<g)&&k!==-1;k--,T++)x+=256*E[k]>>>0,E[k]=x%t>>>0,x=x/t>>>0;if(x!==0)throw new Error("Non-zero carry");g=T,y++}let A=v-g;for(;A!==v&&E[A]===0;)A++;let S=r.repeat(p);for(;A<v;++A)S+=n.charAt(E[A]);return S}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let p=0,g=0,y=0;for(;d[p]===r;)g++,p++;const b=(d.length-p)*s+1>>>0,v=new Uint8Array(b);for(;p<d.length;){const x=d.charCodeAt(p);if(x>255)return;let T=e[x];if(T===255)return;let k=0;for(let R=b-1;(T!==0||k<y)&&R!==-1;R--,k++)T+=t*v[R]>>>0,v[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");y=k,p++}let E=b-y;for(;E!==b&&v[E]===0;)E++;const A=new Uint8Array(g+(b-E));let S=g;for(;E!==b;)A[S++]=v[E++];return A}function h(d){const p=l(d);if(p)return p;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:h}}var IY="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const vp=xY(IY);function OY(n){const e=n.length;let t=0,r=0;for(;r<e;){let s=n.charCodeAt(r++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&r<e){const i=n.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}function RY(n,e,t){const r=n.length;let s=t,i=0;for(;i<r;){let o=n.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const l=n.charCodeAt(i);(l&64512)===56320&&(++i,o=((o&1023)<<10)+(l&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const DY=new TextEncoder,PY=50;function UY(n,e,t){DY.encodeInto(n,e.subarray(t))}function kY(n,e,t){n.length>PY?UY(n,e,t):RY(n,e,t)}const BY=4096;function U4(n,e,t){let r=e;const s=r+t,i=[];let o="";for(;r<s;){const l=n[r++];if((l&128)===0)i.push(l);else if((l&224)===192){const h=n[r++]&63;i.push((l&31)<<6|h)}else if((l&240)===224){const h=n[r++]&63,d=n[r++]&63;i.push((l&31)<<12|h<<6|d)}else if((l&248)===240){const h=n[r++]&63,d=n[r++]&63,p=n[r++]&63;let g=(l&7)<<18|h<<12|d<<6|p;g>65535&&(g-=65536,i.push(g>>>10&1023|55296),g=56320|g&1023),i.push(g)}else i.push(l);i.length>=BY&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const LY=new TextDecoder,MY=200;function $Y(n,e,t){const r=n.subarray(e,e+t);return LY.decode(r)}function FY(n,e,t){return t>MY?$Y(n,e,t):U4(n,e,t)}class Ww{constructor(e,t){this.type=e,this.data=t}}class Fs extends Error{constructor(e){super(e);const t=Object.create(Fs.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Fs.name})}}const Hg=4294967295;function HY(n,e,t){const r=t/4294967296,s=t;n.setUint32(e,r),n.setUint32(e+4,s)}function k4(n,e,t){const r=Math.floor(t/4294967296),s=t;n.setUint32(e,r),n.setUint32(e+4,s)}function B4(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function zY(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const jY=-1,qY=4294967296-1,VY=17179869184-1;function GY({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=VY)if(e===0&&n<=qY){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|t&3),i.setUint32(4,r),s}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),k4(r,4,n),t}}function KY(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,s=Math.floor(r/1e9);return{sec:t+s,nsec:r-s*1e9}}function WY(n){if(n instanceof Date){const e=KY(n);return GY(e)}else return null}function YY(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),s=(t&3)*4294967296+r,i=t>>>2;return{sec:s,nsec:i}}case 12:{const t=B4(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new Fs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function QY(n){const e=YY(n);return new Date(e.sec*1e3+e.nsec/1e6)}const ZY={type:jY,encode:WY,decode:QY};class eE{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(ZY)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=t,this.builtInDecoders[s]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,t);if(i!=null){const o=-1-r;return new Ww(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,t);if(i!=null){const o=r;return new Ww(o,i)}}}return e instanceof Ww?e:null}decode(e,t,r){const s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(e,t,r):new Ww(t,e)}}eE.defaultCodec=new eE;function XY(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function c2(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):XY(n)?new Uint8Array(n):Uint8Array.from(n)}const JY=100,eQ=2048;let tQ=class L4{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??eE.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??JY,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??eQ,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new L4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),s=new DataView(t);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=OY(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),kY(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=c2(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,t+1)}countWithoutUndefined(e,t){let r=0;for(const s of t)e[s]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),HY(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),k4(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function nQ(n,e){return new tQ(e).encodeSharedRef(n)}function CC(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const rQ=16,sQ=16;class iQ{constructor(e=rQ,t=sQ){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let l=0;l<r;l++)if(o[l]!==e[t+l])continue e;return i.str}return null}store(e,t){const r=this.caches[e.length-1],s={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,t,r){const s=this.find(e,t,r);if(s!=null)return this.hit++,s;this.miss++;const i=U4(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,i),i}}const l2="array",pm="map_key",M4="map_value",aQ=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new Fs("The type of key must be string or number but "+typeof n)};class oQ{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=l2,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=pm,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===l2){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===pm||e.type===M4){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const zg=-1,DS=new DataView(new ArrayBuffer(0)),cQ=new Uint8Array(DS.buffer);try{DS.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const jR=new RangeError("Insufficient data"),lQ=new iQ;let uQ=class $4{constructor(e){this.totalPos=0,this.pos=0,this.view=DS,this.bytes=cQ,this.headByte=zg,this.stack=new oQ,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??eE.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Hg,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Hg,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Hg,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Hg,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Hg,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:lQ,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??aQ}clone(){return new $4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=zg,this.stack.reset()}setBuffer(e){const t=c2(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===zg&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=c2(e),s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const l of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{r=this.doDecodeSync(),t=!0}catch(h){if(!(h instanceof RangeError))throw h}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${CC(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,s=-1;for await(const i of e){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{const s=e-160;t=this.decodeString(s,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const s=this.lookU8();t=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();t=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();t=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===196){const s=this.lookU8();t=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();t=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();t=this.decodeBinary(s,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();t=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();t=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();t=this.decodeExtension(s,4)}else throw new Fs(`Unrecognized type byte: ${CC(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===l2)if(s.array[s.position]=t,s.position++,s.position===s.size)t=s.array,r.release(s);else continue e;else if(s.type===pm){if(t==="__proto__")throw new Fs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(t),s.type=M4;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)t=s.map,r.release(s);else{s.key=null,s.type=pm;continue e}}return t}}readHeadByte(){return this.headByte===zg&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=zg}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Fs(`Unrecognized array type byte: ${CC(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Fs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Fs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){var i;if(e>this.maxStrLength)throw new Fs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw jR;const r=this.pos+t;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=FY(this.bytes,r,e),this.pos+=t+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===pm:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new Fs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw jR;const r=this.pos+t,s=this.bytes.subarray(r,r+e);return this.pos+=t+e,s}decodeExtension(e,t){if(e>this.maxExtLength)throw new Fs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),s=this.decodeBinary(e,t+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=zY(this.view,this.pos);return this.pos+=8,e}readI64(){const e=B4(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function hQ(n,e){return new uQ(e).decode(n)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dQ(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function F4(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function tE(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function PS(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function u2(n){if(!Array.isArray(n))throw new Error("array expected")}function nE(n,e){if(!F4(!0,e))throw new Error(`${n}: array of strings expected`)}function fQ(n,e){if(!F4(!1,e))throw new Error(`${n}: array of numbers expected`)}function pQ(...n){const e=i=>i,t=(i,o)=>l=>i(o(l)),r=n.map(i=>i.encode).reduceRight(t,e),s=n.map(i=>i.decode).reduce(t,e);return{encode:r,decode:s}}function gQ(n){const e=typeof n=="string"?n.split(""):n,t=e.length;nE("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(u2(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${n}`);return e[i]})),decode:s=>(u2(s),s.map(i=>{tE("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${n}`);return o}))}}function mQ(n=""){return tE("join",n),{encode:e=>(nE("join.decode",e),e.join(n)),decode:e=>(tE("join.decode",e),e.split(n))}}function yQ(n,e="="){return PS(n),tE("padding",e),{encode(t){for(nE("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){nE("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const H4=(n,e)=>e===0?n:H4(e,n%e),rE=(n,e)=>n+(e-H4(n,e)),_C=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function qR(n,e,t,r){if(u2(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(rE(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${rE(e,t)}`);let s=0,i=0;const o=_C[e],l=_C[t]-1,h=[];for(const d of n){if(PS(d),d>=o)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(s=s<<e|d,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=t;i-=t)h.push((s>>i-t&l)>>>0);const p=_C[i];if(p===void 0)throw new Error("invalid carry");s&=p-1}if(s=s<<t-i&l,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&h.push(s>>>0),h}function wQ(n,e=!1){if(PS(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(rE(8,n)>32||rE(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!dQ(t))throw new Error("radix2.encode input should be Uint8Array");return qR(Array.from(t),8,n,!e)},decode:t=>(fQ("radix2.decode",t),Uint8Array.from(qR(t,n,8,e)))}}const bQ=pQ(wQ(5),gQ("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),yQ(5),mQ(""));function US(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function z4(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?US(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function gm(n,e){e||(e=n.reduce((s,i)=>s+i.length,0));const t=z4(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return US(t)}function EQ(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,h=n.charAt(0),d=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,A=0,S=0,x=v.length;S!==x&&v[S]===0;)S++,E++;for(var T=(x-S)*p+1>>>0,k=new Uint8Array(T);S!==x;){for(var R=v[S],P=0,F=T-1;(R!==0||P<A)&&F!==-1;F--,P++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=P,S++}for(var $=T-A;$!==T&&k[$]===0;)$++;for(var B=h.repeat(E);$<T;++$)B+=n.charAt(k[$]);return B}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var A=0,S=0;v[E]===h;)A++,E++;for(var x=(v.length-E)*d+1>>>0,T=new Uint8Array(x);v[E];){var k=t[v.charCodeAt(E)];if(k===255)return;for(var R=0,P=x-1;(k!==0||R<S)&&P!==-1;P--,R++)k+=l*T[P]>>>0,T[P]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,E++}if(v[E]!==" "){for(var F=x-S;F!==x&&T[F]===0;)F++;for(var $=new Uint8Array(A+(x-F)),B=A;F!==x;)$[B++]=T[F++];return $}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var vQ=EQ,AQ=vQ;const CQ=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},_Q=n=>new TextEncoder().encode(n),SQ=n=>new TextDecoder().decode(n);class NQ{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class TQ{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return j4(this,e)}}class xQ{constructor(e){this.decoders=e}or(e){return j4(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const j4=(n,e)=>new xQ({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class IQ{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new NQ(e,t,r),this.decoder=new TQ(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ZE=({name:n,prefix:e,encode:t,decode:r})=>new IQ(n,e,t,r),ty=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=AQ(t,e);return ZE({prefix:n,name:e,encode:r,decode:i=>CQ(s(i))})},OQ=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,h=0,d=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|g,l+=t,l>=8&&(l-=8,o[d++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return o},RQ=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let h=0;h<n.length;++h)for(l=l<<8|n[h],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},wr=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>ZE({prefix:e,name:n,encode(s){return RQ(s,r,t)},decode(s){return OQ(s,r,t,n)}}),DQ=ZE({prefix:"\0",name:"identity",encode:n=>SQ(n),decode:n=>_Q(n)}),PQ=Object.freeze(Object.defineProperty({__proto__:null,identity:DQ},Symbol.toStringTag,{value:"Module"})),UQ=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),kQ=Object.freeze(Object.defineProperty({__proto__:null,base2:UQ},Symbol.toStringTag,{value:"Module"})),BQ=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),LQ=Object.freeze(Object.defineProperty({__proto__:null,base8:BQ},Symbol.toStringTag,{value:"Module"})),MQ=ty({prefix:"9",name:"base10",alphabet:"0123456789"}),$Q=Object.freeze(Object.defineProperty({__proto__:null,base10:MQ},Symbol.toStringTag,{value:"Module"})),FQ=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HQ=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),zQ=Object.freeze(Object.defineProperty({__proto__:null,base16:FQ,base16upper:HQ},Symbol.toStringTag,{value:"Module"})),jQ=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qQ=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),VQ=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),GQ=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),KQ=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),WQ=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),YQ=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QQ=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZQ=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),XQ=Object.freeze(Object.defineProperty({__proto__:null,base32:jQ,base32hex:KQ,base32hexpad:YQ,base32hexpadupper:QQ,base32hexupper:WQ,base32pad:VQ,base32padupper:GQ,base32upper:qQ,base32z:ZQ},Symbol.toStringTag,{value:"Module"})),JQ=ty({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eZ=ty({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),tZ=Object.freeze(Object.defineProperty({__proto__:null,base36:JQ,base36upper:eZ},Symbol.toStringTag,{value:"Module"})),nZ=ty({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rZ=ty({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),sZ=Object.freeze(Object.defineProperty({__proto__:null,base58btc:nZ,base58flickr:rZ},Symbol.toStringTag,{value:"Module"})),iZ=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aZ=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oZ=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cZ=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),lZ=Object.freeze(Object.defineProperty({__proto__:null,base64:iZ,base64pad:aZ,base64url:oZ,base64urlpad:cZ},Symbol.toStringTag,{value:"Module"})),q4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),uZ=q4.reduce((n,e,t)=>(n[t]=e,n),[]),hZ=q4.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function dZ(n){return n.reduce((e,t)=>(e+=uZ[t],e),"")}function fZ(n){const e=[];for(const t of n){const r=hZ[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const pZ=ZE({prefix:"🚀",name:"base256emoji",encode:dZ,decode:fZ}),gZ=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:pZ},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const VR={...PQ,...kQ,...LQ,...$Q,...zQ,...XQ,...tZ,...sZ,...lZ,...gZ};function V4(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const GR=V4("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),SC=V4("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=z4(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),G4={utf8:GR,"utf-8":GR,hex:VR.base16,latin1:SC,ascii:SC,binary:SC,...VR};function bi(n,e="utf8"){const t=G4[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?US(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function Es(n,e="utf8"){const t=G4[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const mZ={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var NC,KR;function K4(){if(KR)return NC;KR=1;const n="Input must be an string, Buffer or Uint8Array";function e(o){let l;if(o instanceof Uint8Array)l=o;else if(typeof o=="string")l=new TextEncoder().encode(o);else throw new Error(n);return l}function t(o){return Array.prototype.map.call(o,function(l){return(l<16?"0":"")+l.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,l,h){let d=`
`+o+" = ";for(let p=0;p<l.length;p+=2){if(h===32)d+=r(l[p]).toUpperCase(),d+=" ",d+=r(l[p+1]).toUpperCase();else if(h===64)d+=r(l[p+1]).toUpperCase(),d+=r(l[p]).toUpperCase();else throw new Error("Invalid size "+h);p%6===4?d+=`
`+new Array(o.length+4).join(" "):p<l.length-2&&(d+=" ")}console.log(d)}function i(o,l,h){let d=new Date().getTime();const p=new Uint8Array(l);for(let y=0;y<l;y++)p[y]=y%256;const g=new Date().getTime();console.log("Generated random input in "+(g-d)+"ms"),d=g;for(let y=0;y<h;y++){const b=o(p),v=new Date().getTime(),E=v-d;d=v,console.log("Hashed in "+E+"ms: "+b.substring(0,20)+"..."),console.log(Math.round(l/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return NC={normalizeInput:e,toHex:t,debugPrint:s,testSpeed:i},NC}var TC,WR;function yZ(){if(WR)return TC;WR=1;const n=K4();function e(S,x,T){const k=S[x]+S[T];let R=S[x+1]+S[T+1];k>=4294967296&&R++,S[x]=k,S[x+1]=R}function t(S,x,T,k){let R=S[x]+T;T<0&&(R+=4294967296);let P=S[x+1]+k;R>=4294967296&&P++,S[x]=R,S[x+1]=P}function r(S,x){return S[x]^S[x+1]<<8^S[x+2]<<16^S[x+3]<<24}function s(S,x,T,k,R,P){const F=d[R],$=d[R+1],B=d[P],z=d[P+1];e(h,S,x),t(h,S,F,$);let j=h[k]^h[S],W=h[k+1]^h[S+1];h[k]=W,h[k+1]=j,e(h,T,k),j=h[x]^h[T],W=h[x+1]^h[T+1],h[x]=j>>>24^W<<8,h[x+1]=W>>>24^j<<8,e(h,S,x),t(h,S,B,z),j=h[k]^h[S],W=h[k+1]^h[S+1],h[k]=j>>>16^W<<16,h[k+1]=W>>>16^j<<16,e(h,T,k),j=h[x]^h[T],W=h[x+1]^h[T+1],h[x]=W>>>31^j<<1,h[x+1]=j>>>31^W<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],l=new Uint8Array(o.map(function(S){return S*2})),h=new Uint32Array(32),d=new Uint32Array(32);function p(S,x){let T=0;for(T=0;T<16;T++)h[T]=S.h[T],h[T+16]=i[T];for(h[24]=h[24]^S.t,h[25]=h[25]^S.t/4294967296,x&&(h[28]=~h[28],h[29]=~h[29]),T=0;T<32;T++)d[T]=r(S.b,4*T);for(T=0;T<12;T++)s(0,8,16,24,l[T*16+0],l[T*16+1]),s(2,10,18,26,l[T*16+2],l[T*16+3]),s(4,12,20,28,l[T*16+4],l[T*16+5]),s(6,14,22,30,l[T*16+6],l[T*16+7]),s(0,10,20,30,l[T*16+8],l[T*16+9]),s(2,12,22,24,l[T*16+10],l[T*16+11]),s(4,14,16,26,l[T*16+12],l[T*16+13]),s(6,8,18,28,l[T*16+14],l[T*16+15]);for(T=0;T<16;T++)S.h[T]=S.h[T]^h[T]^h[T+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(S,x,T,k){if(S===0||S>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(x&&x.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(T&&T.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(k&&k.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const R={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:S};g.fill(0),g[0]=S,x&&(g[1]=x.length),g[2]=1,g[3]=1,T&&g.set(T,32),k&&g.set(k,48);for(let P=0;P<16;P++)R.h[P]=i[P]^r(g,P*4);return x&&(b(R,x),R.c=128),R}function b(S,x){for(let T=0;T<x.length;T++)S.c===128&&(S.t+=S.c,p(S,!1),S.c=0),S.b[S.c++]=x[T]}function v(S){for(S.t+=S.c;S.c<128;)S.b[S.c++]=0;p(S,!0);const x=new Uint8Array(S.outlen);for(let T=0;T<S.outlen;T++)x[T]=S.h[T>>2]>>8*(T&3);return x}function E(S,x,T,k,R){T=T||64,S=n.normalizeInput(S),k&&(k=n.normalizeInput(k)),R&&(R=n.normalizeInput(R));const P=y(T,x,k,R);return b(P,S),v(P)}function A(S,x,T,k,R){const P=E(S,x,T,k,R);return n.toHex(P)}return TC={blake2b:E,blake2bHex:A,blake2bInit:y,blake2bUpdate:b,blake2bFinal:v},TC}var xC,YR;function wZ(){if(YR)return xC;YR=1;const n=K4();function e(v,E){return v[E]^v[E+1]<<8^v[E+2]<<16^v[E+3]<<24}function t(v,E,A,S,x,T){o[v]=o[v]+o[E]+x,o[S]=r(o[S]^o[v],16),o[A]=o[A]+o[S],o[E]=r(o[E]^o[A],12),o[v]=o[v]+o[E]+T,o[S]=r(o[S]^o[v],8),o[A]=o[A]+o[S],o[E]=r(o[E]^o[A],7)}function r(v,E){return v>>>E^v<<32-E}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),l=new Uint32Array(16);function h(v,E){let A=0;for(A=0;A<8;A++)o[A]=v.h[A],o[A+8]=s[A];for(o[12]^=v.t,o[13]^=v.t/4294967296,E&&(o[14]=~o[14]),A=0;A<16;A++)l[A]=e(v.b,4*A);for(A=0;A<10;A++)t(0,4,8,12,l[i[A*16+0]],l[i[A*16+1]]),t(1,5,9,13,l[i[A*16+2]],l[i[A*16+3]]),t(2,6,10,14,l[i[A*16+4]],l[i[A*16+5]]),t(3,7,11,15,l[i[A*16+6]],l[i[A*16+7]]),t(0,5,10,15,l[i[A*16+8]],l[i[A*16+9]]),t(1,6,11,12,l[i[A*16+10]],l[i[A*16+11]]),t(2,7,8,13,l[i[A*16+12]],l[i[A*16+13]]),t(3,4,9,14,l[i[A*16+14]],l[i[A*16+15]]);for(A=0;A<8;A++)v.h[A]^=o[A]^o[A+8]}function d(v,E){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=E?E.length:0;if(E&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const S={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:v};return S.h[0]^=16842752^A<<8^v,A>0&&(p(S,E),S.c=64),S}function p(v,E){for(let A=0;A<E.length;A++)v.c===64&&(v.t+=v.c,h(v,!1),v.c=0),v.b[v.c++]=E[A]}function g(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;h(v,!0);const E=new Uint8Array(v.outlen);for(let A=0;A<v.outlen;A++)E[A]=v.h[A>>2]>>8*(A&3)&255;return E}function y(v,E,A){A=A||32,v=n.normalizeInput(v);const S=d(A,E);return p(S,v),g(S)}function b(v,E,A){const S=y(v,E,A);return n.toHex(S)}return xC={blake2s:y,blake2sHex:b,blake2sInit:d,blake2sUpdate:p,blake2sFinal:g},xC}var IC,QR;function bZ(){if(QR)return IC;QR=1;const n=yZ(),e=wZ();return IC={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},IC}var EZ=bZ(),vZ={};const AZ=":";function ef(n){const[e,t]=n.split(AZ);return{namespace:e,reference:t}}function W4(n,e){return n.includes(":")?[n]:e.chains||[]}var CZ=Object.defineProperty,_Z=Object.defineProperties,SZ=Object.getOwnPropertyDescriptors,ZR=Object.getOwnPropertySymbols,NZ=Object.prototype.hasOwnProperty,TZ=Object.prototype.propertyIsEnumerable,XR=(n,e,t)=>e in n?CZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,JR=(n,e)=>{for(var t in e||(e={}))NZ.call(e,t)&&XR(n,t,e[t]);if(ZR)for(var t of ZR(e))TZ.call(e,t)&&XR(n,t,e[t]);return n},xZ=(n,e)=>_Z(n,SZ(e));const IZ="ReactNative",js={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},OZ="js";function sE(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function _l(){return!Vo.getDocument()&&!!Vo.getNavigator()&&navigator.product===IZ}function RZ(){return _l()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function DZ(){return _l()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ap(){return!sE()&&!!Vo.getNavigator()&&!!Vo.getDocument()}function ny(){return _l()?js.reactNative:sE()?js.node:Ap()?js.browser:js.unknown}function eD(){var n;try{return _l()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function PZ(n,e){const t=new URLSearchParams(n);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&t.set(r,s)}return t.toString()}function UZ(n){var e,t;const r=Y4();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n==null?void 0:n.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(s=>s!=="")),xZ(JR(JR({},r),n),{url:(n==null?void 0:n.url)||r.url,name:(n==null?void 0:n.name)||r.name,description:(n==null?void 0:n.description)||r.description,icons:(t=n==null?void 0:n.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),n||r}}function Y4(){return lY.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function kZ(){if(ny()===js.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=nY();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function BZ(){var n;const e=ny();return e===js.browser?[e,((n=Vo.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function Q4(n,e,t){const r=kZ(),s=BZ();return[[n,e].join("-"),[OZ,t].join("-"),r,s].join("/")}function LZ({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:l,packageName:h}){const d=t.split("?"),p=Q4(n,e,r),g={auth:s,ua:p,projectId:i,useOnCloseEvent:o,packageName:h||void 0,bundleId:l||void 0},y=PZ(d[1]||"",g);return d[0]+"?"+y}function yu(n,e){return n.filter(t=>e.includes(t)).length===n.length}function h2(n){return Object.fromEntries(n.entries())}function d2(n){return new Map(Object.entries(n))}function ru(n=Se.FIVE_MINUTES,e){const t=Se.toMiliseconds(n||Se.FIVE_MINUTES);let r,s,i,o;return{resolve:l=>{i&&r&&(clearTimeout(i),r(l),o=Promise.resolve(l))},reject:l=>{i&&s&&(clearTimeout(i),s(l))},done:()=>new Promise((l,h)=>{if(o)return l(o);i=setTimeout(()=>{const d=new Error(e);o=Promise.reject(d),h(d)},t),r=l,s=h})}}function ol(n,e,t){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(t)),e);try{const o=await n;r(o)}catch(o){s(o)}clearTimeout(i)})}function Z4(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function MZ(n){return Z4("topic",n)}function $Z(n){return Z4("id",n)}function X4(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function Fn(n,e){return Se.fromMiliseconds(Date.now()+Se.toMiliseconds(n))}function Bc(n){return Date.now()>=Se.toMiliseconds(n)}function Ht(n,e){return`${n}${e?`:${e}`:""}`}function $a(n=[],e=[]){return[...new Set([...n,...e])]}async function FZ({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=HZ(i,n,e),l=ny();if(l===js.browser){if(!((r=Vo.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}zZ(o)}else l===js.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function HZ(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let s=`${n}`;if(n.startsWith("https://t.me")){const i=n.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${GZ(r,!0)}`}else s=`${s}/wc?${r}`;return s}function zZ(n){let e="_self";VZ()?e="_top":(qZ()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function jZ(n,e){let t="";try{if(Ap()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function tD(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function nD(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function kS(){return typeof process<"u"&&vZ.IS_VITEST==="true"}function qZ(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function VZ(){try{return window.self!==window.top}catch{return!1}}function GZ(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function J4(n){return Buffer.from(n,"base64").toString("utf-8")}function KZ(n){return new Promise(e=>setTimeout(e,n))}const Yw=BigInt(2**32-1),rD=BigInt(32);function ek(n,e=!1){return e?{h:Number(n&Yw),l:Number(n>>rD&Yw)}:{h:Number(n>>rD&Yw)|0,l:Number(n&Yw)|0}}function tk(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l}=ek(n[i],e);[r[i],s[i]]=[o,l]}return[r,s]}const sD=(n,e,t)=>n>>>t,iD=(n,e,t)=>n<<32-t|e>>>t,Lc=(n,e,t)=>n>>>t|e<<32-t,Mc=(n,e,t)=>n<<32-t|e>>>t,im=(n,e,t)=>n<<64-t|e>>>t-32,am=(n,e,t)=>n>>>t-32|e<<64-t,WZ=(n,e)=>e,YZ=(n,e)=>n,QZ=(n,e,t)=>n<<t|e>>>32-t,ZZ=(n,e,t)=>e<<t|n>>>32-t,XZ=(n,e,t)=>e<<t-32|n>>>64-t,JZ=(n,e,t)=>n<<t-32|e>>>64-t;function Ui(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const BS=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),LS=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,eX=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),tX=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,nX=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),rX=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,md=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function MS(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Go(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Ei(n,...e){if(!MS(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function $S(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Go(n.outputLen),Go(n.blockLen)}function wl(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function FS(n,e){Ei(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function c0(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function vi(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function OC(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function da(n,e){return n<<32-e|n>>>e}const nk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rk(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const mo=nk?n=>n:n=>rk(n);function sX(n){for(let e=0;e<n.length;e++)n[e]=rk(n[e]);return n}const $c=nk?n=>n:sX,sk=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",iX=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function l0(n){if(Ei(n),sk)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=iX[n[t]];return e}const ho={_0:48,_9:57,A:65,F:70,a:97,f:102};function aD(n){if(n>=ho._0&&n<=ho._9)return n-ho._0;if(n>=ho.A&&n<=ho.F)return n-(ho.A-10);if(n>=ho.a&&n<=ho.f)return n-(ho.a-10)}function HS(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(sk)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=aD(n.charCodeAt(i)),l=aD(n.charCodeAt(i+1));if(o===void 0||l===void 0){const h=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}r[s]=o*16+l}return r}function aX(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Wi(n){return typeof n=="string"&&(n=aX(n)),Ei(n),n}function wu(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];Ei(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}let XE=class{};function ry(n){const e=r=>n().update(Wi(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function oX(n){const e=(r,s)=>n(s).update(Wi(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function Cp(n=32){if(md&&typeof md.getRandomValues=="function")return md.getRandomValues(new Uint8Array(n));if(md&&typeof md.randomBytes=="function")return Uint8Array.from(md.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const cX=BigInt(0),jg=BigInt(1),lX=BigInt(2),uX=BigInt(7),hX=BigInt(256),dX=BigInt(113),ik=[],ak=[],ok=[];for(let n=0,e=jg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],ik.push(2*(5*r+t)),ak.push((n+1)*(n+2)/2%64);let s=cX;for(let i=0;i<7;i++)e=(e<<jg^(e>>uX)*dX)%hX,e&lX&&(s^=jg<<(jg<<BigInt(i))-jg);ok.push(s)}const ck=tk(ok,!0),fX=ck[0],pX=ck[1],oD=(n,e,t)=>t>32?XZ(n,e,t):QZ(n,e,t),cD=(n,e,t)=>t>32?JZ(n,e,t):ZZ(n,e,t);function gX(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,d=t[h],p=t[h+1],g=oD(d,p,1)^t[l],y=cD(d,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=ak[o],h=oD(s,i,l),d=cD(s,i,l),p=ik[o];s=n[p],i=n[p+1],n[p]=h,n[p+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=fX[r],n[1]^=pX[r]}vi(t)}let mX=class lk extends XE{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,Go(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=c0(this.state)}clone(){return this._cloneInto()}keccak(){$c(this.state32),gX(this.state32,this.rounds),$c(this.state32),this.posOut=0,this.pos=0}update(e){wl(this),e=Wi(e),Ei(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){wl(this,!1),Ei(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Go(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(FS(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,vi(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new lk(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const yX=(n,e,t)=>ry(()=>new mX(e,n,t)),wX=yX(1,136,256/8);function bX(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}function EX(n,e,t){return n&e^~n&t}function vX(n,e,t){return n&e^n&t^e&t}let uk=class extends XE{constructor(e,t,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=OC(this.buffer)}update(e){wl(this),e=Wi(e),Ei(e);const{view:t,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=OC(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wl(this),FS(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,vi(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;bX(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=OC(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=l,s%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const xc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),_r=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),AX=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ic=new Uint32Array(64);let CX=class extends uk{constructor(e=32){super(64,e,8,!1),this.A=xc[0]|0,this.B=xc[1]|0,this.C=xc[2]|0,this.D=xc[3]|0,this.E=xc[4]|0,this.F=xc[5]|0,this.G=xc[6]|0,this.H=xc[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:h}=this;return[e,t,r,s,i,o,l,h]}set(e,t,r,s,i,o,l,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=h|0}process(e,t){for(let g=0;g<16;g++,t+=4)Ic[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=Ic[g-15],b=Ic[g-2],v=da(y,7)^da(y,18)^y>>>3,E=da(b,17)^da(b,19)^b>>>10;Ic[g]=E+Ic[g-7]+v+Ic[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:h,G:d,H:p}=this;for(let g=0;g<64;g++){const y=da(l,6)^da(l,11)^da(l,25),b=p+y+EX(l,h,d)+AX[g]+Ic[g]|0,v=(da(r,2)^da(r,13)^da(r,22))+vX(r,s,i)|0;p=d,d=h,h=l,l=o+b|0,o=i,i=s,s=r,r=b+v|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,h,d,p)}roundClean(){vi(Ic)}destroy(){this.set(0,0,0,0,0,0,0,0),vi(this.buffer)}};const hk=tk(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),_X=hk[0],SX=hk[1],Oc=new Uint32Array(80),Rc=new Uint32Array(80);let zS=class extends uk{constructor(e=64){super(128,e,16,!1),this.Ah=_r[0]|0,this.Al=_r[1]|0,this.Bh=_r[2]|0,this.Bl=_r[3]|0,this.Ch=_r[4]|0,this.Cl=_r[5]|0,this.Dh=_r[6]|0,this.Dl=_r[7]|0,this.Eh=_r[8]|0,this.El=_r[9]|0,this.Fh=_r[10]|0,this.Fl=_r[11]|0,this.Gh=_r[12]|0,this.Gl=_r[13]|0,this.Hh=_r[14]|0,this.Hl=_r[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)Oc[T]=e.getUint32(t),Rc[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const k=Oc[T-15]|0,R=Rc[T-15]|0,P=Lc(k,R,1)^Lc(k,R,8)^sD(k,R,7),F=Mc(k,R,1)^Mc(k,R,8)^iD(k,R,7),$=Oc[T-2]|0,B=Rc[T-2]|0,z=Lc($,B,19)^im($,B,61)^sD($,B,6),j=Mc($,B,19)^am($,B,61)^iD($,B,6),W=eX(F,j,Rc[T-7],Rc[T-16]),ne=tX(W,P,z,Oc[T-7],Oc[T-16]);Oc[T]=ne|0,Rc[T]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:A,Hh:S,Hl:x}=this;for(let T=0;T<80;T++){const k=Lc(g,y,14)^Lc(g,y,18)^im(g,y,41),R=Mc(g,y,14)^Mc(g,y,18)^am(g,y,41),P=g&b^~g&E,F=y&v^~y&A,$=nX(x,R,F,SX[T],Rc[T]),B=rX($,S,k,P,_X[T],Oc[T]),z=$|0,j=Lc(r,s,28)^im(r,s,34)^im(r,s,39),W=Mc(r,s,28)^am(r,s,34)^am(r,s,39),ne=r&i^r&l^i&l,J=s&o^s&h^o&h;S=E|0,x=A|0,E=b|0,A=v|0,b=g|0,v=y|0,{h:g,l:y}=Ui(d|0,p|0,B|0,z|0),d=l|0,p=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const I=BS(z,W,J);r=LS(I,B,j,ne),s=I|0}({h:r,l:s}=Ui(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ui(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=Ui(this.Ch|0,this.Cl|0,l|0,h|0),{h:d,l:p}=Ui(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=Ui(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=Ui(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:A}=Ui(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:x}=Ui(this.Hh|0,this.Hl|0,S|0,x|0),this.set(r,s,i,o,l,h,d,p,g,y,b,v,E,A,S,x)}roundClean(){vi(Oc,Rc)}destroy(){vi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},NX=class extends zS{constructor(){super(48),this.Ah=Cr[0]|0,this.Al=Cr[1]|0,this.Bh=Cr[2]|0,this.Bl=Cr[3]|0,this.Ch=Cr[4]|0,this.Cl=Cr[5]|0,this.Dh=Cr[6]|0,this.Dl=Cr[7]|0,this.Eh=Cr[8]|0,this.El=Cr[9]|0,this.Fh=Cr[10]|0,this.Fl=Cr[11]|0,this.Gh=Cr[12]|0,this.Gl=Cr[13]|0,this.Hh=Cr[14]|0,this.Hl=Cr[15]|0}};const Sr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let TX=class extends zS{constructor(){super(32),this.Ah=Sr[0]|0,this.Al=Sr[1]|0,this.Bh=Sr[2]|0,this.Bl=Sr[3]|0,this.Ch=Sr[4]|0,this.Cl=Sr[5]|0,this.Dh=Sr[6]|0,this.Dl=Sr[7]|0,this.Eh=Sr[8]|0,this.El=Sr[9]|0,this.Fh=Sr[10]|0,this.Fl=Sr[11]|0,this.Gh=Sr[12]|0,this.Gl=Sr[13]|0,this.Hh=Sr[14]|0,this.Hl=Sr[15]|0}};const JE=ry(()=>new CX),xX=ry(()=>new zS),IX=ry(()=>new NX),OX=ry(()=>new TX),RX=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Mn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Re=new Uint32Array(32);function Dc(n,e,t,r,s,i){const o=s[i],l=s[i+1];let h=Re[2*n],d=Re[2*n+1],p=Re[2*e],g=Re[2*e+1],y=Re[2*t],b=Re[2*t+1],v=Re[2*r],E=Re[2*r+1],A=BS(h,p,o);d=LS(A,d,g,l),h=A|0,{Dh:E,Dl:v}={Dh:E^d,Dl:v^h},{Dh:E,Dl:v}={Dh:WZ(E,v),Dl:YZ(E)},{h:b,l:y}=Ui(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:Lc(g,p,24),Bl:Mc(g,p,24)},Re[2*n]=h,Re[2*n+1]=d,Re[2*e]=p,Re[2*e+1]=g,Re[2*t]=y,Re[2*t+1]=b,Re[2*r]=v,Re[2*r+1]=E}function Pc(n,e,t,r,s,i){const o=s[i],l=s[i+1];let h=Re[2*n],d=Re[2*n+1],p=Re[2*e],g=Re[2*e+1],y=Re[2*t],b=Re[2*t+1],v=Re[2*r],E=Re[2*r+1],A=BS(h,p,o);d=LS(A,d,g,l),h=A|0,{Dh:E,Dl:v}={Dh:E^d,Dl:v^h},{Dh:E,Dl:v}={Dh:Lc(E,v,16),Dl:Mc(E,v,16)},{h:b,l:y}=Ui(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:im(g,p,63),Bl:am(g,p,63)},Re[2*n]=h,Re[2*n+1]=d,Re[2*e]=p,Re[2*e+1]=g,Re[2*t]=y,Re[2*t+1]=b,Re[2*r]=v,Re[2*r+1]=E}function DX(n,e={},t,r,s){if(Go(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:l}=e;if(i!==void 0&&(i.length<1||i.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(l!==void 0&&l.length!==s)throw new Error("personalization must be undefined or "+s)}class PX extends XE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Go(e),Go(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=c0(this.buffer)}update(e){wl(this),e=Wi(e),Ei(e);const{blockLen:t,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,l=e.buffer;for(let h=0;h<i;){this.pos===t&&($c(s),this.compress(s,0,!1),$c(s),this.pos=0);const d=Math.min(t-this.pos,i-h),p=o+h;if(d===t&&!(p%4)&&h+d<i){const g=new Uint32Array(l,p,Math.floor((i-h)/4));$c(g);for(let y=0;h+t<i;y+=s.length,h+=t)this.length+=t,this.compress(g,y,!1);$c(g);continue}r.set(e.subarray(h,h+d),this.pos),this.pos+=d,this.length+=d,h+=d}return this}digestInto(e){wl(this),FS(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,vi(this.buffer.subarray(t)),$c(r),this.compress(r,0,!0),$c(r);const s=c0(e);this.get().forEach((i,o)=>s[o]=mo(i))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:s,destroyed:i,outputLen:o,pos:l}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=s,e.length=r,e.pos=l,e.outputLen=o,e}clone(){return this._cloneInto()}}class UX extends PX{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Mn[0]|0,this.v0h=Mn[1]|0,this.v1l=Mn[2]|0,this.v1h=Mn[3]|0,this.v2l=Mn[4]|0,this.v2h=Mn[5]|0,this.v3l=Mn[6]|0,this.v3h=Mn[7]|0,this.v4l=Mn[8]|0,this.v4h=Mn[9]|0,this.v5l=Mn[10]|0,this.v5h=Mn[11]|0,this.v6l=Mn[12]|0,this.v6h=Mn[13]|0,this.v7l=Mn[14]|0,this.v7h=Mn[15]|0,DX(t,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Wi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Wi(i);const l=c0(i);this.v4l^=mo(l[0]),this.v4h^=mo(l[1]),this.v5l^=mo(l[2]),this.v5h^=mo(l[3])}if(s!==void 0){s=Wi(s);const l=c0(s);this.v6l^=mo(l[0]),this.v6h^=mo(l[1]),this.v7l^=mo(l[2]),this.v7h^=mo(l[3])}if(r!==void 0){const l=new Uint8Array(this.blockLen);l.set(r),this.update(l)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:s,v2l:i,v2h:o,v3l:l,v3h:h,v4l:d,v4h:p,v5l:g,v5h:y,v6l:b,v6h:v,v7l:E,v7h:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,v,E,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=l|0,this.v3h=h|0,this.v4l=d|0,this.v4h=p|0,this.v5l=g|0,this.v5h=y|0,this.v6l=b|0,this.v6h=v|0,this.v7l=E|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((h,d)=>Re[d]=h),Re.set(Mn,16);let{h:s,l:i}=ek(BigInt(this.length));Re[24]=Mn[8]^i,Re[25]=Mn[9]^s,r&&(Re[28]=~Re[28],Re[29]=~Re[29]);let o=0;const l=RX;for(let h=0;h<12;h++)Dc(0,4,8,12,e,t+2*l[o++]),Pc(0,4,8,12,e,t+2*l[o++]),Dc(1,5,9,13,e,t+2*l[o++]),Pc(1,5,9,13,e,t+2*l[o++]),Dc(2,6,10,14,e,t+2*l[o++]),Pc(2,6,10,14,e,t+2*l[o++]),Dc(3,7,11,15,e,t+2*l[o++]),Pc(3,7,11,15,e,t+2*l[o++]),Dc(0,5,10,15,e,t+2*l[o++]),Pc(0,5,10,15,e,t+2*l[o++]),Dc(1,6,11,12,e,t+2*l[o++]),Pc(1,6,11,12,e,t+2*l[o++]),Dc(2,7,8,13,e,t+2*l[o++]),Pc(2,7,8,13,e,t+2*l[o++]),Dc(3,4,9,14,e,t+2*l[o++]),Pc(3,4,9,14,e,t+2*l[o++]);this.v0l^=Re[0]^Re[16],this.v0h^=Re[1]^Re[17],this.v1l^=Re[2]^Re[18],this.v1h^=Re[3]^Re[19],this.v2l^=Re[4]^Re[20],this.v2h^=Re[5]^Re[21],this.v3l^=Re[6]^Re[22],this.v3h^=Re[7]^Re[23],this.v4l^=Re[8]^Re[24],this.v4h^=Re[9]^Re[25],this.v5l^=Re[10]^Re[26],this.v5h^=Re[11]^Re[27],this.v6l^=Re[12]^Re[28],this.v6h^=Re[13]^Re[29],this.v7l^=Re[14]^Re[30],this.v7h^=Re[15]^Re[31],vi(Re)}destroy(){this.destroyed=!0,vi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const kX=oX(n=>new UX(n)),BX="https://rpc.walletconnect.org/v1";function dk(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(wX(t)).toString("hex")}async function LX(n,e,t,r,s,i){switch(t.t){case"eip191":return await MX(n,e,t.s);case"eip1271":return await $X(n,e,t.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function MX(n,e,t){return(await TY({hash:dk(e),signature:t})).toLowerCase()===n.toLowerCase()}async function $X(n,e,t,r,s,i){const o=ef(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const l="0x1626ba7e",h="0000000000000000000000000000000000000000000000000000000000000040",d=t.substring(2),p=(d.length/2).toString(16).padStart(64,"0"),g=(e.startsWith("0x")?e:dk(e)).substring(2),y=l+g+h+p+d,b=await fetch(`${i||BX}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:FX(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:y},"latest"]})}),{result:v}=await b.json();return v?v.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function FX(){return Date.now()+Math.floor(Math.random()*1e3)}function HX(n){const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const r=t[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(t.length<s)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const i=Buffer.from(n,"base64").slice(1,65);return vp.encode(i)}function zX(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const s=kX(r,{dkLen:32});return vp.encode(s)}function lD(n){const e=new Uint8Array(JE(jX(n)));return vp.encode(e)}function jX(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function uD(n){const e=Buffer.from(n,"base64"),t=hQ(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=nQ(t),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=OX(i);return bQ.encode(o).replace(/=+$/,"")}function RC(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function qX(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(RC(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(RC(t.length)),s.push(t),s.push(Buffer.from([26])),s.push(RC(r.length)),s.push(r);const i=Buffer.concat(s),o=JE(i);return Buffer.from(o).toString("hex").toUpperCase()}var VX=Object.defineProperty,GX=Object.defineProperties,KX=Object.getOwnPropertyDescriptors,hD=Object.getOwnPropertySymbols,WX=Object.prototype.hasOwnProperty,YX=Object.prototype.propertyIsEnumerable,dD=(n,e,t)=>e in n?VX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,QX=(n,e)=>{for(var t in e||(e={}))WX.call(e,t)&&dD(n,t,e[t]);if(hD)for(var t of hD(e))YX.call(e,t)&&dD(n,t,e[t]);return n},ZX=(n,e)=>GX(n,KX(e));const XX="did:pkh:",jS=n=>n==null?void 0:n.split(":"),JX=n=>{const e=n&&jS(n);if(e)return n.includes(XX)?e[3]:e[1]},f2=n=>{const e=n&&jS(n);if(e)return e[2]+":"+e[3]},iE=n=>{const e=n&&jS(n);if(e)return e.pop()};async function fD(n){const{cacao:e,projectId:t}=n,{s:r,p:s}=e,i=fk(s,s.iss),o=iE(s.iss);return await LX(o,i,r,f2(s.iss),t)}const fk=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=iE(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=n.statement||void 0;const i=`URI: ${n.aud||n.uri}`,o=`Version: ${n.version}`,l=`Chain ID: ${JX(e)}`,h=`Nonce: ${n.nonce}`,d=`Issued At: ${n.iat}`,p=n.exp?`Expiration Time: ${n.exp}`:void 0,g=n.nbf?`Not Before: ${n.nbf}`:void 0,y=n.requestId?`Request ID: ${n.requestId}`:void 0,b=n.resources?`Resources:${n.resources.map(E=>`
- ${E}`).join("")}`:void 0,v=Cb(n.resources);if(v){const E=u0(v);s=cJ(s,E)}return[t,r,"",s,"",i,o,l,h,d,p,g,y,b].filter(E=>E!=null).join(`
`)};function eJ(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function tJ(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function ah(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function nJ(n,e,t,r={}){return t==null||t.sort((s,i)=>s.localeCompare(i)),{att:{[n]:rJ(e,t,r)}}}function rJ(n,e,t={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${n}/${s}`]:[t]}));return Object.assign({},...r)}function pk(n){return ah(n),`urn:recap:${eJ(n).replace(/=/g,"")}`}function u0(n){const e=tJ(n.replace("urn:recap:",""));return ah(e),e}function sJ(n,e,t){const r=nJ(n,e,t);return pk(r)}function iJ(n){return n&&n.includes("urn:recap:")}function aJ(n,e){const t=u0(n),r=u0(e),s=oJ(t,r);return pk(s)}function oJ(n,e){ah(n),ah(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return t.forEach(s=>{var i,o;Object.keys(((i=n.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((l,h)=>l.localeCompare(h)).forEach(l=>{var h,d;r.att[s]=ZX(QX({},r.att[s]),{[l]:((h=n.att[s])==null?void 0:h[l])||((d=e.att[s])==null?void 0:d[l])})})}),r}function cJ(n="",e){ah(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let s=0;Object.keys(e.att).forEach(l=>{const h=Object.keys(e.att[l]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));h.sort((g,y)=>g.action.localeCompare(y.action));const d={};h.forEach(g=>{d[g.ability]||(d[g.ability]=[]),d[g.ability].push(g.action)});const p=Object.keys(d).map(g=>(s++,`(${s}) '${g}': '${d[g].join("', '")}' for '${l}'.`));r.push(p.join(", ").replace(".,","."))});const i=r.join(" "),o=`${t}${i}`;return`${n?n+" ":""}${o}`}function pD(n){var e;const t=u0(n);ah(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function gD(n){const e=u0(n);ah(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function Cb(n){if(!n)return;const e=n==null?void 0:n[n.length-1];return iJ(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function gk(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function p2(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function DC(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function ms(n,...e){if(!gk(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function mD(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function lJ(n,e){ms(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function ul(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function cp(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function uJ(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const hJ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function dJ(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function g2(n){if(typeof n=="string")n=dJ(n);else if(gk(n))n=m2(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function fJ(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function pJ(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const gJ=(n,e)=>{function t(r,...s){if(ms(r),!hJ)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const d=s[0];if(!d)throw new Error("nonce / iv required");n.varSizeNonce?ms(d):ms(d,n.nonceLength)}const i=n.tagLength;i&&s[1]!==void 0&&ms(s[1]);const o=e(r,...s),l=(d,p)=>{if(p!==void 0){if(d!==2)throw new Error("cipher output not supported");ms(p)}};let h=!1;return{encrypt(d,p){if(h)throw new Error("cannot encrypt() twice with same key + nonce");return h=!0,ms(d),l(o.encrypt.length,p),o.encrypt(d,p)},decrypt(d,p){if(ms(d),i&&d.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return l(o.decrypt.length,p),o.decrypt(d,p)}}}return Object.assign(t,n),t};function yD(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!yJ(e))throw new Error("invalid output, must be aligned");return e}function wD(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i);n.setUint32(e+4,o,r),n.setUint32(e+0,l,r)}function mJ(n,e,t){p2(t);const r=new Uint8Array(16),s=uJ(r);return wD(s,0,BigInt(e),t),wD(s,8,BigInt(n),t),r}function yJ(n){return n.byteOffset%4===0}function m2(n){return Uint8Array.from(n)}const mk=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),wJ=mk("expand 16-byte k"),bJ=mk("expand 32-byte k"),EJ=ul(wJ),vJ=ul(bJ);function It(n,e){return n<<e|n>>>32-e}function y2(n){return n.byteOffset%4===0}const Qw=64,AJ=16,yk=2**32-1,bD=new Uint32Array;function CJ(n,e,t,r,s,i,o,l){const h=s.length,d=new Uint8Array(Qw),p=ul(d),g=y2(s)&&y2(i),y=g?ul(s):bD,b=g?ul(i):bD;for(let v=0;v<h;o++){if(n(e,t,r,p,o,l),o>=yk)throw new Error("arx: counter overflow");const E=Math.min(Qw,h-v);if(g&&E===Qw){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let S=0,x;S<AJ;S++)x=A+S,b[x]=y[x]^p[S];v+=Qw;continue}for(let A=0,S;A<E;A++)S=v+A,i[S]=s[S]^d[A];v+=E}}function _J(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=fJ({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return DC(s),DC(o),p2(i),p2(t),(l,h,d,p,g=0)=>{ms(l),ms(h),ms(d);const y=d.length;if(p===void 0&&(p=new Uint8Array(y)),ms(p),DC(g),g<0||g>=yk)throw new Error("arx: counter overflow");if(p.length<y)throw new Error(`arx: output (${p.length}) is shorter than data (${y})`);const b=[];let v=l.length,E,A;if(v===32)b.push(E=m2(l)),A=vJ;else if(v===16&&t)E=new Uint8Array(32),E.set(l),E.set(l,16),A=EJ,b.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);y2(h)||b.push(h=m2(h));const S=ul(E);if(r){if(h.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,S,ul(h.subarray(0,16)),S),h=h.subarray(16)}const x=16-s;if(x!==h.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){const k=new Uint8Array(12);k.set(h,i?0:12-h.length),h=k,b.push(h)}const T=ul(h);return CJ(n,A,S,T,d,p,g,o),cp(...b),p}}const cr=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class SJ{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=g2(e),ms(e,32);const t=cr(e,0),r=cr(e,2),s=cr(e,4),i=cr(e,6),o=cr(e,8),l=cr(e,10),h=cr(e,12),d=cr(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|l<<2)&8191,this.r[7]=(l>>>11|h<<5)&8065,this.r[8]=(h>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let p=0;p<8;p++)this.pad[p]=cr(e,16+2*p)}process(e,t,r=!1){const s=r?0:2048,{h:i,r:o}=this,l=o[0],h=o[1],d=o[2],p=o[3],g=o[4],y=o[5],b=o[6],v=o[7],E=o[8],A=o[9],S=cr(e,t+0),x=cr(e,t+2),T=cr(e,t+4),k=cr(e,t+6),R=cr(e,t+8),P=cr(e,t+10),F=cr(e,t+12),$=cr(e,t+14);let B=i[0]+(S&8191),z=i[1]+((S>>>13|x<<3)&8191),j=i[2]+((x>>>10|T<<6)&8191),W=i[3]+((T>>>7|k<<9)&8191),ne=i[4]+((k>>>4|R<<12)&8191),J=i[5]+(R>>>1&8191),I=i[6]+((R>>>14|P<<2)&8191),_=i[7]+((P>>>11|F<<5)&8191),L=i[8]+((F>>>8|$<<8)&8191),q=i[9]+($>>>5|s),K=0,O=K+B*l+z*(5*A)+j*(5*E)+W*(5*v)+ne*(5*b);K=O>>>13,O&=8191,O+=J*(5*y)+I*(5*g)+_*(5*p)+L*(5*d)+q*(5*h),K+=O>>>13,O&=8191;let G=K+B*h+z*l+j*(5*A)+W*(5*E)+ne*(5*v);K=G>>>13,G&=8191,G+=J*(5*b)+I*(5*y)+_*(5*g)+L*(5*p)+q*(5*d),K+=G>>>13,G&=8191;let Z=K+B*d+z*h+j*l+W*(5*A)+ne*(5*E);K=Z>>>13,Z&=8191,Z+=J*(5*v)+I*(5*b)+_*(5*y)+L*(5*g)+q*(5*p),K+=Z>>>13,Z&=8191;let re=K+B*p+z*d+j*h+W*l+ne*(5*A);K=re>>>13,re&=8191,re+=J*(5*E)+I*(5*v)+_*(5*b)+L*(5*y)+q*(5*g),K+=re>>>13,re&=8191;let ee=K+B*g+z*p+j*d+W*h+ne*l;K=ee>>>13,ee&=8191,ee+=J*(5*A)+I*(5*E)+_*(5*v)+L*(5*b)+q*(5*y),K+=ee>>>13,ee&=8191;let ue=K+B*y+z*g+j*p+W*d+ne*h;K=ue>>>13,ue&=8191,ue+=J*l+I*(5*A)+_*(5*E)+L*(5*v)+q*(5*b),K+=ue>>>13,ue&=8191;let ge=K+B*b+z*y+j*g+W*p+ne*d;K=ge>>>13,ge&=8191,ge+=J*h+I*l+_*(5*A)+L*(5*E)+q*(5*v),K+=ge>>>13,ge&=8191;let Ce=K+B*v+z*b+j*y+W*g+ne*p;K=Ce>>>13,Ce&=8191,Ce+=J*d+I*h+_*l+L*(5*A)+q*(5*E),K+=Ce>>>13,Ce&=8191;let Pe=K+B*E+z*v+j*b+W*y+ne*g;K=Pe>>>13,Pe&=8191,Pe+=J*p+I*d+_*h+L*l+q*(5*A),K+=Pe>>>13,Pe&=8191;let Te=K+B*A+z*E+j*v+W*b+ne*y;K=Te>>>13,Te&=8191,Te+=J*g+I*p+_*d+L*h+q*l,K+=Te>>>13,Te&=8191,K=(K<<2)+K|0,K=K+O|0,O=K&8191,K=K>>>13,G+=K,i[0]=O,i[1]=G,i[2]=Z,i[3]=re,i[4]=ee,i[5]=ue,i[6]=ge,i[7]=Ce,i[8]=Pe,i[9]=Te}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=s,s=e[l]>>>13,e[l]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let l=1;l<10;l++)r[l]=e[l]+s,s=r[l]>>>13,r[l]&=8191;r[9]-=8192;let i=(s^1)-1;for(let l=0;l<10;l++)r[l]&=i;i=~i;for(let l=0;l<10;l++)e[l]=e[l]&i|r[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let l=1;l<8;l++)o=(e[l]+t[l]|0)+(o>>>16)|0,e[l]=o&65535;cp(r)}update(e){mD(this),e=g2(e),ms(e);const{buffer:t,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){cp(this.h,this.r,this.buffer,this.pad)}digestInto(e){mD(this),lJ(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function NJ(n){const e=(r,s)=>n(s).update(g2(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const TJ=NJ(n=>new SJ(n));function xJ(n,e,t,r,s,i=20){let o=n[0],l=n[1],h=n[2],d=n[3],p=e[0],g=e[1],y=e[2],b=e[3],v=e[4],E=e[5],A=e[6],S=e[7],x=s,T=t[0],k=t[1],R=t[2],P=o,F=l,$=h,B=d,z=p,j=g,W=y,ne=b,J=v,I=E,_=A,L=S,q=x,K=T,O=k,G=R;for(let re=0;re<i;re+=2)P=P+z|0,q=It(q^P,16),J=J+q|0,z=It(z^J,12),P=P+z|0,q=It(q^P,8),J=J+q|0,z=It(z^J,7),F=F+j|0,K=It(K^F,16),I=I+K|0,j=It(j^I,12),F=F+j|0,K=It(K^F,8),I=I+K|0,j=It(j^I,7),$=$+W|0,O=It(O^$,16),_=_+O|0,W=It(W^_,12),$=$+W|0,O=It(O^$,8),_=_+O|0,W=It(W^_,7),B=B+ne|0,G=It(G^B,16),L=L+G|0,ne=It(ne^L,12),B=B+ne|0,G=It(G^B,8),L=L+G|0,ne=It(ne^L,7),P=P+j|0,G=It(G^P,16),_=_+G|0,j=It(j^_,12),P=P+j|0,G=It(G^P,8),_=_+G|0,j=It(j^_,7),F=F+W|0,q=It(q^F,16),L=L+q|0,W=It(W^L,12),F=F+W|0,q=It(q^F,8),L=L+q|0,W=It(W^L,7),$=$+ne|0,K=It(K^$,16),J=J+K|0,ne=It(ne^J,12),$=$+ne|0,K=It(K^$,8),J=J+K|0,ne=It(ne^J,7),B=B+z|0,O=It(O^B,16),I=I+O|0,z=It(z^I,12),B=B+z|0,O=It(O^B,8),I=I+O|0,z=It(z^I,7);let Z=0;r[Z++]=o+P|0,r[Z++]=l+F|0,r[Z++]=h+$|0,r[Z++]=d+B|0,r[Z++]=p+z|0,r[Z++]=g+j|0,r[Z++]=y+W|0,r[Z++]=b+ne|0,r[Z++]=v+J|0,r[Z++]=E+I|0,r[Z++]=A+_|0,r[Z++]=S+L|0,r[Z++]=x+q|0,r[Z++]=T+K|0,r[Z++]=k+O|0,r[Z++]=R+G|0}const IJ=_J(xJ,{counterRight:!1,counterLength:4,allowShortKeys:!1}),OJ=new Uint8Array(16),ED=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(OJ.subarray(t))},RJ=new Uint8Array(32);function vD(n,e,t,r,s){const i=n(e,t,RJ),o=TJ.create(i);s&&ED(o,s),ED(o,r);const l=mJ(r.length,s?s.length:0,!0);o.update(l);const h=o.digest();return cp(i,l),h}const DJ=n=>(e,t,r)=>({encrypt(s,i){const o=s.length;i=yD(o+16,i,!1),i.set(s);const l=i.subarray(0,-16);n(e,t,l,l,1);const h=vD(n,e,t,l,r);return i.set(h,o),cp(h),i},decrypt(s,i){i=yD(s.length-16,i,!1);const o=s.subarray(0,-16),l=s.subarray(-16),h=vD(n,e,t,o,r);if(!pJ(l,h))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),n(e,t,i,i,1),cp(h),i}}),wk=gJ({blockSize:64,nonceLength:12,tagLength:16},DJ(IJ));let bk=class extends XE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,$S(e);const r=Wi(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),vi(i)}update(e){return wl(this),this.iHash.update(e),this}digestInto(e){wl(this),Ei(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ev=(n,e,t)=>new bk(n,e).update(t).digest();ev.create=(n,e)=>new bk(n,e);function PJ(n,e,t){return $S(n),t===void 0&&(t=new Uint8Array(n.outputLen)),ev(n,Wi(t),Wi(e))}const PC=Uint8Array.from([0]),AD=Uint8Array.of();function UJ(n,e,t,r=32){$S(n),Go(r);const s=n.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);t===void 0&&(t=AD);const o=new Uint8Array(i*s),l=ev.create(n,e),h=l._cloneInto(),d=new Uint8Array(l.outputLen);for(let p=0;p<i;p++)PC[0]=p+1,h.update(p===0?AD:d).update(t).update(PC).digestInto(d),o.set(d,s*p),l._cloneInto(h);return l.destroy(),h.destroy(),vi(d,PC),o.slice(0,r)}const kJ=(n,e,t,r,s)=>UJ(n,PJ(n,e,t),r,s),tv=JE,qS=BigInt(0),w2=BigInt(1);function aE(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function Zw(n){const e=n.toString(16);return e.length&1?"0"+e:e}function Ek(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?qS:BigInt("0x"+n)}function nv(n){return Ek(l0(n))}function oE(n){return Ei(n),Ek(l0(Uint8Array.from(n).reverse()))}function VS(n,e){return HS(n.toString(16).padStart(e*2,"0"))}function GS(n,e){return VS(n,e).reverse()}function ps(n,e,t){let r;if(typeof e=="string")try{r=HS(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(MS(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}const UC=n=>typeof n=="bigint"&&qS<=n;function BJ(n,e,t){return UC(n)&&UC(e)&&UC(t)&&e<=n&&n<t}function b2(n,e,t,r){if(!BJ(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function LJ(n){let e;for(e=0;n>qS;n>>=w2,e+=1);return e}const rv=n=>(w2<<BigInt(n))-w2;function MJ(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),s=y=>Uint8Array.of(y);let i=r(n),o=r(n),l=0;const h=()=>{i.fill(1),o.fill(0),l=0},d=(...y)=>t(o,i,...y),p=(y=r(0))=>{o=d(s(0),y),i=d(),y.length!==0&&(o=d(s(1),y),i=d())},g=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const b=[];for(;y<e;){i=d();const v=i.slice();b.push(v),y+=i.length}return wu(...b)};return(y,b)=>{h(),p(y);let v;for(;!(v=b(g()));)p();return h(),v}}function sv(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const l=n[s];if(o&&l===void 0)return;const h=typeof l;if(h!==i||l===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${h}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(t).forEach(([s,i])=>r(s,i,!0))}function CD(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const bs=BigInt(0),Wr=BigInt(1),bu=BigInt(2),$J=BigInt(3),vk=BigInt(4),Ak=BigInt(5),Ck=BigInt(8);function wi(n,e){const t=n%e;return t>=bs?t:e+t}function Di(n,e,t){let r=n;for(;e-- >bs;)r*=r,r%=t;return r}function _D(n,e){if(n===bs)throw new Error("invert: expected non-zero number");if(e<=bs)throw new Error("invert: expected positive modulus, got "+e);let t=wi(n,e),r=e,s=bs,i=Wr;for(;t!==bs;){const o=r/t,l=r%t,h=s-i*o;r=t,t=l,s=i,i=h}if(r!==Wr)throw new Error("invert: does not exist");return wi(s,e)}function _k(n,e){const t=(n.ORDER+Wr)/vk,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function FJ(n,e){const t=(n.ORDER-Ak)/Ck,r=n.mul(e,bu),s=n.pow(r,t),i=n.mul(e,s),o=n.mul(n.mul(i,bu),s),l=n.mul(i,n.sub(o,n.ONE));if(!n.eql(n.sqr(l),e))throw new Error("Cannot find square root");return l}function HJ(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-Wr,t=0;for(;e%bu===bs;)e/=bu,t++;let r=bu;const s=_p(n);for(;SD(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return _k;let i=s.pow(r,e);const o=(e+Wr)/bu;return function(l,h){if(l.is0(h))return h;if(SD(l,h)!==1)throw new Error("Cannot find square root");let d=t,p=l.mul(l.ONE,i),g=l.pow(h,e),y=l.pow(h,o);for(;!l.eql(g,l.ONE);){if(l.is0(g))return l.ZERO;let b=1,v=l.sqr(g);for(;!l.eql(v,l.ONE);)if(b++,v=l.sqr(v),b===d)throw new Error("Cannot find square root");const E=Wr<<BigInt(d-b-1),A=l.pow(p,E);d=b,p=l.sqr(A),g=l.mul(g,p),y=l.mul(y,A)}return y}}function zJ(n){return n%vk===$J?_k:n%Ck===Ak?FJ:HJ(n)}const jJ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qJ(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=jJ.reduce((r,s)=>(r[s]="function",r),e);return sv(n,t),n}function VJ(n,e,t){if(t<bs)throw new Error("invalid exponent, negatives unsupported");if(t===bs)return n.ONE;if(t===Wr)return e;let r=n.ONE,s=e;for(;t>bs;)t&Wr&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Wr;return r}function Sk(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),s=e.reduce((o,l,h)=>n.is0(l)?o:(r[h]=o,n.mul(o,l)),n.ONE),i=n.inv(s);return e.reduceRight((o,l,h)=>n.is0(l)?o:(r[h]=n.mul(o,r[h]),n.mul(o,l)),i),r}function SD(n,e){const t=(n.ORDER-Wr)/bu,r=n.pow(e,t),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function GJ(n,e){e!==void 0&&Go(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function _p(n,e,t=!1,r={}){if(n<=bs)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(s=p.BITS),p.sqrt&&(i=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:l}=GJ(n,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const d=Object.freeze({ORDER:n,isLE:t,BITS:o,BYTES:l,MASK:rv(o),ZERO:bs,ONE:Wr,create:p=>wi(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return bs<=p&&p<n},is0:p=>p===bs,isValidNot0:p=>!d.is0(p)&&d.isValid(p),isOdd:p=>(p&Wr)===Wr,neg:p=>wi(-p,n),eql:(p,g)=>p===g,sqr:p=>wi(p*p,n),add:(p,g)=>wi(p+g,n),sub:(p,g)=>wi(p-g,n),mul:(p,g)=>wi(p*g,n),pow:(p,g)=>VJ(d,p,g),div:(p,g)=>wi(p*_D(g,n),n),sqrN:p=>p*p,addN:(p,g)=>p+g,subN:(p,g)=>p-g,mulN:(p,g)=>p*g,inv:p=>_D(p,n),sqrt:i||(p=>(h||(h=zJ(n)),h(d,p))),toBytes:p=>t?GS(p,l):VS(p,l),fromBytes:p=>{if(p.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+p.length);return t?oE(p):nv(p)},invertBatch:p=>Sk(d,p),cmov:(p,g,y)=>y?g:p});return Object.freeze(d)}function Nk(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Tk(n){const e=Nk(n);return e+Math.ceil(e/2)}function KJ(n,e,t=!1){const r=n.length,s=Nk(e),i=Tk(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=t?oE(n):nv(n),l=wi(o,e-Wr)+Wr;return t?GS(l,s):VS(l,s)}const lp=BigInt(0),Eu=BigInt(1);function mm(n,e){const t=e.negate();return n?t:e}function WJ(n,e,t){const r=i=>i.pz,s=Sk(n.Fp,t.map(r));return t.map((i,o)=>i.toAffine(s[o])).map(n.fromAffine)}function xk(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function kC(n,e){xk(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),s=2**n,i=rv(n),o=BigInt(n);return{windows:t,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function ND(n,e,t){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=t;let l=Number(n&s),h=n>>o;l>r&&(l-=i,h+=Eu);const d=e*r,p=d+Math.abs(l)-1,g=l===0,y=l<0,b=e%2!==0;return{nextN:h,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:d}}function YJ(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function QJ(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const BC=new WeakMap,Ik=new WeakMap;function LC(n){return Ik.get(n)||1}function TD(n){if(n!==lp)throw new Error("invalid wNAF")}function ZJ(n,e){return{constTimeNegate:mm,hasPrecomputes(t){return LC(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>lp;)r&Eu&&(s=s.add(i)),i=i.double(),r>>=Eu;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=kC(r,e),o=[];let l=t,h=l;for(let d=0;d<s;d++){h=l,o.push(h);for(let p=1;p<i;p++)h=h.add(l),o.push(h);l=h.double()}return o},wNAF(t,r,s){let i=n.ZERO,o=n.BASE;const l=kC(t,e);for(let h=0;h<l.windows;h++){const{nextN:d,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:v}=ND(s,h,l);s=d,g?o=o.add(mm(b,r[v])):i=i.add(mm(y,r[p]))}return TD(s),{p:i,f:o}},wNAFUnsafe(t,r,s,i=n.ZERO){const o=kC(t,e);for(let l=0;l<o.windows&&s!==lp;l++){const{nextN:h,offset:d,isZero:p,isNeg:g}=ND(s,l,o);if(s=h,!p){const y=r[d];i=i.add(g?y.negate():y)}}return TD(s),i},getPrecomputes(t,r,s){let i=BC.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&(typeof s=="function"&&(i=s(i)),BC.set(r,i))),i},wNAFCached(t,r,s){const i=LC(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=LC(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){xk(r,e),Ik.set(t,r),BC.delete(t)}}}function XJ(n,e,t,r){let s=e,i=n.ZERO,o=n.ZERO;for(;t>lp||r>lp;)t&Eu&&(i=i.add(s)),r&Eu&&(o=o.add(s)),s=s.double(),t>>=Eu,r>>=Eu;return{p1:i,p2:o}}function JJ(n,e,t,r){YJ(t,n),QJ(r,e);const s=t.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,l=LJ(BigInt(s));let h=1;l>12?h=l-3:l>4?h=l-2:l>0&&(h=2);const d=rv(h),p=new Array(Number(d)+1).fill(o),g=Math.floor((e.BITS-1)/h)*h;let y=o;for(let b=g;b>=0;b-=h){p.fill(o);for(let E=0;E<i;E++){const A=r[E],S=Number(A>>BigInt(b)&d);p[S]=p[S].add(t[E])}let v=o;for(let E=p.length-1,A=o;E>0;E--)A=A.add(p[E]),v=v.add(A);if(y=y.add(v),b!==0)for(let E=0;E<h;E++)y=y.double()}return y}function xD(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return qJ(e),e}else return _p(n)}function eee(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const o of["p","n","h"]){const l=e[o];if(!(typeof l=="bigint"&&l>lp))throw new Error(`CURVE.${o} must be positive bigint`)}const r=xD(e.p,t.Fp),s=xD(e.n,t.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const qg=BigInt(0),yd=BigInt(1),Xw=BigInt(2);function tee(n){return sv(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function nee(n){const e=tee(n),{P:t,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,l=r==="x25519";if(!l&&r!=="x448")throw new Error("invalid type");const h=o||Cp,d=l?255:448,p=l?32:56,g=BigInt(l?9:5),y=BigInt(l?121665:39081),b=l?Xw**BigInt(254):Xw**BigInt(447),v=l?BigInt(8)*Xw**BigInt(251)-yd:BigInt(4)*Xw**BigInt(445)-yd,E=b+v+yd,A=B=>wi(B,t),S=x(g);function x(B){return GS(A(B),p)}function T(B){const z=ps("u coordinate",B,p);return l&&(z[31]&=127),A(oE(z))}function k(B){return oE(s(ps("scalar",B,p)))}function R(B,z){const j=$(T(z),k(B));if(j===qg)throw new Error("invalid private or public key received");return x(j)}function P(B){return R(B,S)}function F(B,z,j){const W=A(B*(z-j));return z=A(z-W),j=A(j+W),{x_2:z,x_3:j}}function $(B,z){b2("u",B,qg,t),b2("scalar",z,b,E);const j=z,W=B;let ne=yd,J=qg,I=B,_=yd,L=qg;for(let K=BigInt(d-1);K>=qg;K--){const O=j>>K&yd;L^=O,{x_2:ne,x_3:I}=F(L,ne,I),{x_2:J,x_3:_}=F(L,J,_),L=O;const G=ne+J,Z=A(G*G),re=ne-J,ee=A(re*re),ue=Z-ee,ge=I+_,Ce=I-_,Pe=A(Ce*G),Te=A(ge*re),Qe=Pe+Te,Wt=Pe-Te;I=A(Qe*Qe),_=A(W*A(Wt*Wt)),ne=A(Z*ee),J=A(ue*(Z+A(y*ue)))}({x_2:ne,x_3:I}=F(L,ne,I)),{x_2:J,x_3:_}=F(L,J,_);const q=i(J);return A(ne*q)}return{scalarMult:R,scalarMultBase:P,getSharedSecret:(B,z)=>R(B,z),getPublicKey:B=>P(B),utils:{randomPrivateKey:()=>h(p)},GuBytes:S.slice()}}BigInt(0);const ree=BigInt(1),ID=BigInt(2),see=BigInt(3),iee=BigInt(5);BigInt(8);const Ok={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function aee(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=Ok.p,o=n*n%i*n%i,l=Di(o,ID,i)*o%i,h=Di(l,ree,i)*n%i,d=Di(h,iee,i)*h%i,p=Di(d,e,i)*d%i,g=Di(p,t,i)*p%i,y=Di(g,r,i)*g%i,b=Di(y,s,i)*y%i,v=Di(b,s,i)*y%i,E=Di(v,e,i)*d%i;return{pow_p_5_8:Di(E,ID,i)*n%i,b2:o}}function oee(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const E2=(()=>{const n=Ok.p;return nee({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=aee(e);return wi(Di(t,see,n)*r,n)},adjustScalarBytes:oee})})();function OD(n){n.lowS!==void 0&&aE("lowS",n.lowS),n.prehash!==void 0&&aE("prehash",n.prehash)}class cee extends Error{constructor(e=""){super(e)}}const vo={Err:cee,_tlv:{encode:(n,e)=>{const{Err:t}=vo;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,s=Zw(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=r>127?Zw(s.length/2|128):"";return Zw(n)+i+s+e},decode(n,e){const{Err:t}=vo;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const h=s&127;if(!h)throw new t("tlv.decode(long): indefinite length not supported");if(h>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+h);if(d.length!==h)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const p of d)o=o<<8|p;if(r+=h,o<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(r,r+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=vo;if(n<ym)throw new e("integer: negative integers are not allowed");let t=Zw(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=vo;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return nv(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=vo,s=ps("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:h}=r.decode(2,i),{v:d,l:p}=r.decode(2,h);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(d)}},hexFromSig(n){const{_tlv:e,_int:t}=vo,r=e.encode(2,t.encode(n.r)),s=e.encode(2,t.encode(n.s)),i=r+s;return e.encode(48,i)}},ym=BigInt(0),wm=BigInt(1),lee=BigInt(2),Jw=BigInt(3),uee=BigInt(4);function hee(n,e,t){function r(s){const i=n.sqr(s),o=n.mul(i,s);return n.add(n.add(o,n.mul(s,e)),t)}return r}function Rk(n,e,t){const{BYTES:r}=n;function s(i){let o;if(typeof i=="bigint")o=i;else{let l=ps("private key",i);if(e){if(!e.includes(l.length*2))throw new Error("invalid private key");const h=new Uint8Array(r);h.set(l,h.length-l.length),l=h}try{o=n.fromBytes(l)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(t&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function dee(n,e={}){const{Fp:t,Fn:r}=eee("weierstrass",n,e),{h:s,n:i}=n;sv(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function l(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h($,B,z){const{x:j,y:W}=B.toAffine(),ne=t.toBytes(j);if(aE("isCompressed",z),z){l();const J=!t.isOdd(W);return wu(Dk(J),ne)}else return wu(Uint8Array.of(4),ne,t.toBytes(W))}function d($){Ei($);const B=t.BYTES,z=B+1,j=2*B+1,W=$.length,ne=$[0],J=$.subarray(1);if(W===z&&(ne===2||ne===3)){const I=t.fromBytes(J);if(!t.isValid(I))throw new Error("bad point: is not on curve, wrong x");const _=y(I);let L;try{L=t.sqrt(_)}catch(K){const O=K instanceof Error?": "+K.message:"";throw new Error("bad point: is not on curve, sqrt error"+O)}l();const q=t.isOdd(L);return(ne&1)===1!==q&&(L=t.neg(L)),{x:I,y:L}}else if(W===j&&ne===4){const I=t.fromBytes(J.subarray(B*0,B*1)),_=t.fromBytes(J.subarray(B*1,B*2));if(!b(I,_))throw new Error("bad point: is not on curve");return{x:I,y:_}}else throw new Error(`bad point: got length ${W}, expected compressed=${z} or uncompressed=${j}`)}const p=e.toBytes||h,g=e.fromBytes||d,y=hee(t,n.a,n.b);function b($,B){const z=t.sqr(B),j=y($);return t.eql(z,j)}if(!b(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const v=t.mul(t.pow(n.a,Jw),uee),E=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(v,E)))throw new Error("bad curve params: a or b");function A($,B,z=!1){if(!t.isValid(B)||z&&t.is0(B))throw new Error(`bad point coordinate ${$}`);return B}function S($){if(!($ instanceof R))throw new Error("ProjectivePoint expected")}const x=CD(($,B)=>{const{px:z,py:j,pz:W}=$;if(t.eql(W,t.ONE))return{x:z,y:j};const ne=$.is0();B==null&&(B=ne?t.ONE:t.inv(W));const J=t.mul(z,B),I=t.mul(j,B),_=t.mul(W,B);if(ne)return{x:t.ZERO,y:t.ZERO};if(!t.eql(_,t.ONE))throw new Error("invZ was invalid");return{x:J,y:I}}),T=CD($=>{if($.is0()){if(e.allowInfinityPoint&&!t.is0($.py))return;throw new Error("bad point: ZERO")}const{x:B,y:z}=$.toAffine();if(!t.isValid(B)||!t.isValid(z))throw new Error("bad point: x or y not field elements");if(!b(B,z))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function k($,B,z,j,W){return z=new R(t.mul(z.px,$),z.py,z.pz),B=mm(j,B),z=mm(W,z),B.add(z)}class R{constructor(B,z,j){this.px=A("x",B),this.py=A("y",z,!0),this.pz=A("z",j),Object.freeze(this)}static fromAffine(B){const{x:z,y:j}=B||{};if(!B||!t.isValid(z)||!t.isValid(j))throw new Error("invalid affine point");if(B instanceof R)throw new Error("projective point not allowed");return t.is0(z)&&t.is0(j)?R.ZERO:new R(z,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){return WJ(R,"pz",B)}static fromBytes(B){return Ei(B),R.fromHex(B)}static fromHex(B){const z=R.fromAffine(g(ps("pointHex",B)));return z.assertValidity(),z}static fromPrivateKey(B){const z=Rk(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return R.BASE.multiply(z(B))}static msm(B,z){return JJ(R,r,B,z)}precompute(B=8,z=!0){return F.setWindowSize(this,B),z||this.multiply(Jw),this}_setWindowSize(B){this.precompute(B)}assertValidity(){T(this)}hasEvenY(){const{y:B}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(B)}equals(B){S(B);const{px:z,py:j,pz:W}=this,{px:ne,py:J,pz:I}=B,_=t.eql(t.mul(z,I),t.mul(ne,W)),L=t.eql(t.mul(j,I),t.mul(J,W));return _&&L}negate(){return new R(this.px,t.neg(this.py),this.pz)}double(){const{a:B,b:z}=n,j=t.mul(z,Jw),{px:W,py:ne,pz:J}=this;let I=t.ZERO,_=t.ZERO,L=t.ZERO,q=t.mul(W,W),K=t.mul(ne,ne),O=t.mul(J,J),G=t.mul(W,ne);return G=t.add(G,G),L=t.mul(W,J),L=t.add(L,L),I=t.mul(B,L),_=t.mul(j,O),_=t.add(I,_),I=t.sub(K,_),_=t.add(K,_),_=t.mul(I,_),I=t.mul(G,I),L=t.mul(j,L),O=t.mul(B,O),G=t.sub(q,O),G=t.mul(B,G),G=t.add(G,L),L=t.add(q,q),q=t.add(L,q),q=t.add(q,O),q=t.mul(q,G),_=t.add(_,q),O=t.mul(ne,J),O=t.add(O,O),q=t.mul(O,G),I=t.sub(I,q),L=t.mul(O,K),L=t.add(L,L),L=t.add(L,L),new R(I,_,L)}add(B){S(B);const{px:z,py:j,pz:W}=this,{px:ne,py:J,pz:I}=B;let _=t.ZERO,L=t.ZERO,q=t.ZERO;const K=n.a,O=t.mul(n.b,Jw);let G=t.mul(z,ne),Z=t.mul(j,J),re=t.mul(W,I),ee=t.add(z,j),ue=t.add(ne,J);ee=t.mul(ee,ue),ue=t.add(G,Z),ee=t.sub(ee,ue),ue=t.add(z,W);let ge=t.add(ne,I);return ue=t.mul(ue,ge),ge=t.add(G,re),ue=t.sub(ue,ge),ge=t.add(j,W),_=t.add(J,I),ge=t.mul(ge,_),_=t.add(Z,re),ge=t.sub(ge,_),q=t.mul(K,ue),_=t.mul(O,re),q=t.add(_,q),_=t.sub(Z,q),q=t.add(Z,q),L=t.mul(_,q),Z=t.add(G,G),Z=t.add(Z,G),re=t.mul(K,re),ue=t.mul(O,ue),Z=t.add(Z,re),re=t.sub(G,re),re=t.mul(K,re),ue=t.add(ue,re),G=t.mul(Z,ue),L=t.add(L,G),G=t.mul(ge,ue),_=t.mul(ee,_),_=t.sub(_,G),G=t.mul(ee,Z),q=t.mul(ge,q),q=t.add(q,G),new R(_,L,q)}subtract(B){return this.add(B.negate())}is0(){return this.equals(R.ZERO)}multiply(B){const{endo:z}=e;if(!r.isValidNot0(B))throw new Error("invalid scalar: out of range");let j,W;const ne=J=>F.wNAFCached(this,J,R.normalizeZ);if(z){const{k1neg:J,k1:I,k2neg:_,k2:L}=z.splitScalar(B),{p:q,f:K}=ne(I),{p:O,f:G}=ne(L);W=K.add(G),j=k(z.beta,q,O,J,_)}else{const{p:J,f:I}=ne(B);j=J,W=I}return R.normalizeZ([j,W])[0]}multiplyUnsafe(B){const{endo:z}=e,j=this;if(!r.isValid(B))throw new Error("invalid scalar: out of range");if(B===ym||j.is0())return R.ZERO;if(B===wm)return j;if(F.hasPrecomputes(this))return this.multiply(B);if(z){const{k1neg:W,k1:ne,k2neg:J,k2:I}=z.splitScalar(B),{p1:_,p2:L}=XJ(R,j,ne,I);return k(z.beta,_,L,W,J)}else return F.wNAFCachedUnsafe(j,B)}multiplyAndAddUnsafe(B,z,j){const W=this.multiplyUnsafe(z).add(B.multiplyUnsafe(j));return W.is0()?void 0:W}toAffine(B){return x(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return s===wm?!0:B?B(R,this):F.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:B}=e;return s===wm?this:B?B(R,this):this.multiplyUnsafe(s)}toBytes(B=!0){return aE("isCompressed",B),this.assertValidity(),p(R,this,B)}toRawBytes(B=!0){return this.toBytes(B)}toHex(B=!0){return l0(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}R.BASE=new R(n.Gx,n.Gy,t.ONE),R.ZERO=new R(t.ZERO,t.ONE,t.ZERO),R.Fp=t,R.Fn=r;const P=r.BITS,F=ZJ(R,e.endo?Math.ceil(P/2):P);return R}function Dk(n){return Uint8Array.of(n?2:3)}function fee(n,e,t={}){sv(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Cp,s=e.hmac||((j,...W)=>ev(e.hash,j,wu(...W))),{Fp:i,Fn:o}=n,{ORDER:l,BITS:h}=o;function d(j){const W=l>>wm;return j>W}function p(j){return d(j)?o.neg(j):j}function g(j,W){if(!o.isValidNot0(W))throw new Error(`invalid signature ${j}: out of range 1..CURVE.n`)}class y{constructor(W,ne,J){g("r",W),g("s",ne),this.r=W,this.s=ne,J!=null&&(this.recovery=J),Object.freeze(this)}static fromCompact(W){const ne=o.BYTES,J=ps("compactSignature",W,ne*2);return new y(o.fromBytes(J.subarray(0,ne)),o.fromBytes(J.subarray(ne,ne*2)))}static fromDER(W){const{r:ne,s:J}=vo.toSig(ps("DER",W));return new y(ne,J)}assertValidity(){}addRecoveryBit(W){return new y(this.r,this.s,W)}recoverPublicKey(W){const ne=i.ORDER,{r:J,s:I,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(l*lee<ne&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=_===2||_===3?J+l:J;if(!i.isValid(L))throw new Error("recovery id 2 or 3 invalid");const q=i.toBytes(L),K=n.fromHex(wu(Dk((_&1)===0),q)),O=o.inv(L),G=T(ps("msgHash",W)),Z=o.create(-G*O),re=o.create(I*O),ee=n.BASE.multiplyUnsafe(Z).add(K.multiplyUnsafe(re));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toBytes(W){if(W==="compact")return wu(o.toBytes(this.r),o.toBytes(this.s));if(W==="der")return HS(vo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return l0(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return l0(this.toBytes("compact"))}}const b=Rk(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),v={isValidPrivateKey(j){try{return b(j),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const j=l;return KJ(r(Tk(j)),j)},precompute(j=8,W=n.BASE){return W.precompute(j,!1)}};function E(j,W=!0){return n.fromPrivateKey(j).toBytes(W)}function A(j){if(typeof j=="bigint")return!1;if(j instanceof n)return!0;const W=ps("key",j).length,ne=i.BYTES,J=ne+1,I=2*ne+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===J))return W===J||W===I}function S(j,W,ne=!0){if(A(j)===!0)throw new Error("first arg must be private key");if(A(W)===!1)throw new Error("second arg must be public key");return n.fromHex(W).multiply(b(j)).toBytes(ne)}const x=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const W=nv(j),ne=j.length*8-h;return ne>0?W>>BigInt(ne):W},T=e.bits2int_modN||function(j){return o.create(x(j))},k=rv(h);function R(j){return b2("num < 2^"+h,j,ym,k),o.toBytes(j)}function P(j,W,ne=F){if(["recovered","canonical"].some(ee=>ee in ne))throw new Error("sign() legacy options not supported");const{hash:J}=e;let{lowS:I,prehash:_,extraEntropy:L}=ne;I==null&&(I=!0),j=ps("msgHash",j),OD(ne),_&&(j=ps("prehashed msgHash",J(j)));const q=T(j),K=b(W),O=[R(K),R(q)];if(L!=null&&L!==!1){const ee=L===!0?r(i.BYTES):L;O.push(ps("extraEntropy",ee))}const G=wu(...O),Z=q;function re(ee){const ue=x(ee);if(!o.isValidNot0(ue))return;const ge=o.inv(ue),Ce=n.BASE.multiply(ue).toAffine(),Pe=o.create(Ce.x);if(Pe===ym)return;const Te=o.create(ge*o.create(Z+Pe*K));if(Te===ym)return;let Qe=(Ce.x===Pe?0:2)|Number(Ce.y&wm),Wt=Te;return I&&d(Te)&&(Wt=p(Te),Qe^=1),new y(Pe,Wt,Qe)}return{seed:G,k2sig:re}}const F={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function B(j,W,ne=F){const{seed:J,k2sig:I}=P(j,W,ne);return MJ(e.hash.outputLen,o.BYTES,s)(J,I)}n.BASE.precompute(8);function z(j,W,ne,J=$){const I=j;W=ps("msgHash",W),ne=ps("publicKey",ne),OD(J);const{lowS:_,prehash:L,format:q}=J;if("strict"in J)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&!["compact","der","js"].includes(q))throw new Error('format must be "compact", "der" or "js"');const K=typeof I=="string"||MS(I),O=!K&&!q&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!K&&!O)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,Z;try{if(O)if(q===void 0||q==="js")G=new y(I.r,I.s);else throw new Error("invalid format");if(K){try{q!=="compact"&&(G=y.fromDER(I))}catch(Qe){if(!(Qe instanceof vo.Err))throw Qe}!G&&q!=="der"&&(G=y.fromCompact(I))}Z=n.fromHex(ne)}catch{return!1}if(!G||_&&G.hasHighS())return!1;L&&(W=e.hash(W));const{r:re,s:ee}=G,ue=T(W),ge=o.inv(ee),Ce=o.create(ue*ge),Pe=o.create(re*ge),Te=n.BASE.multiplyUnsafe(Ce).add(Z.multiplyUnsafe(Pe));return Te.is0()?!1:o.create(Te.x)===re}return Object.freeze({getPublicKey:E,getSharedSecret:S,sign:B,verify:z,utils:v,Point:n,Signature:y})}function pee(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=_p(e.n,n.nBitLength),s={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function gee(n){const{CURVE:e,curveOpts:t}=pee(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function mee(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function yee(n){const{CURVE:e,curveOpts:t,ecdsaOpts:r}=gee(n),s=dee(e,t),i=fee(s,r,t);return mee(n,i)}function v2(n,e){const t=r=>yee({...n,hash:r});return{...t(e),create:t}}const Pk={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Uk={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},kk={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},wee=_p(Pk.p),bee=_p(Uk.p),Eee=_p(kk.p),vee=v2({...Pk,Fp:wee,lowS:!1},JE);v2({...Uk,Fp:bee,lowS:!1},IX),v2({...kk,Fp:Eee,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},xX);const Aee=vee,Bk="base10",Yr="base16",Gi="base64pad",Hc="base64url",sy="utf8",Lk=0,Mo=1,iy=2,Cee=0,RD=1,bm=12,KS=32;function _ee(){const n=E2.utils.randomPrivateKey(),e=E2.getPublicKey(n);return{privateKey:Es(n,Yr),publicKey:Es(e,Yr)}}function A2(){const n=Cp(KS);return Es(n,Yr)}function See(n,e){const t=E2.getSharedSecret(bi(n,Yr),bi(e,Yr)),r=kJ(tv,t,void 0,void 0,KS);return Es(r,Yr)}function _b(n){const e=tv(bi(n,Yr));return Es(e,Yr)}function Oa(n){const e=tv(bi(n,sy));return Es(e,Yr)}function Mk(n){return bi(`${n}`,Bk)}function oh(n){return Number(Es(n,Bk))}function $k(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Fk(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function Nee(n){const e=Mk(typeof n.type<"u"?n.type:Lk);if(oh(e)===Mo&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?bi(n.senderPublicKey,Yr):void 0,r=typeof n.iv<"u"?bi(n.iv,Yr):Cp(bm),s=bi(n.symKey,Yr),i=wk(s,r).encrypt(bi(n.message,sy)),o=Hk({type:e,sealed:i,iv:r,senderPublicKey:t});return n.encoding===Hc?$k(o):o}function Tee(n){const e=bi(n.symKey,Yr),{sealed:t,iv:r}=h0({encoded:n.encoded,encoding:n.encoding}),s=wk(e,r).decrypt(t);if(s===null)throw new Error("Failed to decrypt");return Es(s,sy)}function xee(n,e){const t=Mk(iy),r=Cp(bm),s=bi(n,sy),i=Hk({type:t,sealed:s,iv:r});return e===Hc?$k(i):i}function Iee(n,e){const{sealed:t}=h0({encoded:n,encoding:e});return Es(t,sy)}function Hk(n){if(oh(n.type)===iy)return Es(gm([n.type,n.sealed]),Gi);if(oh(n.type)===Mo){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Es(gm([n.type,n.senderPublicKey,n.iv,n.sealed]),Gi)}return Es(gm([n.type,n.iv,n.sealed]),Gi)}function h0(n){const e=(n.encoding||Gi)===Hc?Fk(n.encoded):n.encoded,t=bi(e,Gi),r=t.slice(Cee,RD),s=RD;if(oh(r)===Mo){const h=s+KS,d=h+bm,p=t.slice(s,h),g=t.slice(h,d),y=t.slice(d);return{type:r,sealed:y,iv:g,senderPublicKey:p}}if(oh(r)===iy){const h=t.slice(s),d=Cp(bm);return{type:r,sealed:h,iv:d}}const i=s+bm,o=t.slice(s,i),l=t.slice(i);return{type:r,sealed:l,iv:o}}function Oee(n,e){const t=h0({encoded:n,encoding:e==null?void 0:e.encoding});return zk({type:oh(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Es(t.senderPublicKey,Yr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function zk(n){const e=(n==null?void 0:n.type)||Lk;if(e===Mo){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function DD(n){return n.type===Mo&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function PD(n){return n.type===iy}function Ree(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return gm([new Uint8Array([4]),e,t])}function Dee(n,e){const[t,r,s]=n.split("."),i=Buffer.from(Fk(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),l=i.slice(32,64),h=`${t}.${r}`,d=tv(h),p=Ree(e);if(!Aee.verify(gm([o,l]),d,p))throw new Error("Invalid signature");return s2(n).payload}const Pee="irn";function cE(n){return(n==null?void 0:n.relay)||{protocol:Pee}}function om(n){const e=mZ[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}function Uee(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=n[s];t[i]=o}}),t}function UD(n){if(!n.includes("wc:")){const d=J4(n);d!=null&&d.includes("wc:")&&(n=d)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),s=n.substring(e+1,t).split("@"),i=typeof t<"u"?n.substring(t):"",o=new URLSearchParams(i),l={};o.forEach((d,p)=>{l[p]=d});const h=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:r,topic:kee(s[0]),version:parseInt(s[1],10),symKey:l.symKey,relay:Uee(l),methods:h,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function kee(n){return n.startsWith("//")?n.substring(2):n}function Bee(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(s=>{const i=s,o=t+e+i;n[i]&&(r[o]=n[i])}),r}function kD(n){const e=new URLSearchParams,t=Bee(n.relay);Object.keys(t).sort().forEach(s=>{e.set(s,t[s])}),e.set("symKey",n.symKey),n.expiryTimestamp&&e.set("expiryTimestamp",n.expiryTimestamp.toString()),n.methods&&e.set("methods",n.methods.join(","));const r=e.toString();return`${n.protocol}:${n.topic}@${n.version}?${r}`}function eb(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var Lee=Object.defineProperty,Mee=Object.defineProperties,$ee=Object.getOwnPropertyDescriptors,BD=Object.getOwnPropertySymbols,Fee=Object.prototype.hasOwnProperty,Hee=Object.prototype.propertyIsEnumerable,LD=(n,e,t)=>e in n?Lee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zee=(n,e)=>{for(var t in e||(e={}))Fee.call(e,t)&&LD(n,t,e[t]);if(BD)for(var t of BD(e))Hee.call(e,t)&&LD(n,t,e[t]);return n},jee=(n,e)=>Mee(n,$ee(e));function Sp(n){const e=[];return n.forEach(t=>{const[r,s]=t.split(":");e.push(`${r}:${s}`)}),e}function qee(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Sp(t.accounts))}),e}function Vee(n,e){const t=[];return Object.values(n).forEach(r=>{Sp(r.accounts).includes(e)&&t.push(...r.methods)}),t}function Gee(n,e){const t=[];return Object.values(n).forEach(r=>{Sp(r.accounts).includes(e)&&t.push(...r.events)}),t}function iv(n){return n.includes(":")}function jd(n){return iv(n)?n.split(":")[0]:n}function MD(n){var e,t,r;const s={};if(!hl(n))return s;for(const[i,o]of Object.entries(n)){const l=iv(i)?[i]:o.chains,h=o.methods||[],d=o.events||[],p=jd(i);s[p]=jee(zee({},s[p]),{chains:$a(l,(e=s[p])==null?void 0:e.chains),methods:$a(h,(t=s[p])==null?void 0:t.methods),events:$a(d,(r=s[p])==null?void 0:r.events)})}return s}function Kee(n){const e={};return n==null||n.forEach(t=>{var r;const[s,i]=t.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(t),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function $D(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=Kee(e);for(const[r,s]of Object.entries(t))s.methods?s.methods=$a(s.methods,n):s.methods=n,s.events=["chainChanged","accountsChanged"];return t}function Wee(n,e){var t,r,s,i,o,l;const h=MD(n),d=MD(e),p={},g=Object.keys(h).concat(Object.keys(d));for(const y of g)p[y]={chains:$a((t=h[y])==null?void 0:t.chains,(r=d[y])==null?void 0:r.chains),methods:$a((s=h[y])==null?void 0:s.methods,(i=d[y])==null?void 0:i.methods),events:$a((o=h[y])==null?void 0:o.events,(l=d[y])==null?void 0:l.events)};return p}const Yee={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Qee={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ne(n,e){const{message:t,code:r}=Qee[n];return{message:e?`${t} ${e}`:t,code:r}}function gn(n,e){const{message:t,code:r}=Yee[n];return{message:e?`${t} ${e}`:t,code:r}}function $o(n,e){return!!Array.isArray(n)}function hl(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function fr(n){return typeof n>"u"}function Pn(n,e){return e&&fr(n)?!0:typeof n=="string"&&!!n.trim().length}function WS(n,e){return e&&fr(n)?!0:typeof n=="number"&&!isNaN(n)}function Zee(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),s=Object.keys(t);let i=!0;return yu(s,r)?(r.forEach(o=>{const{accounts:l,methods:h,events:d}=n.namespaces[o],p=Sp(l),g=t[o];(!yu(W4(o,g),p)||!yu(g.methods,h)||!yu(g.events,d))&&(i=!1)}),i):!1}function lE(n){return Pn(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function Xee(n){if(Pn(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&lE(t)}}return!1}function Jee(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Pn(n,!1)){if(e(n))return!0;const t=J4(n);return e(t)}}catch{}return!1}function ete(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function tte(n){return n==null?void 0:n.topic}function nte(n,e){let t=null;return Pn(n==null?void 0:n.publicKey,!1)||(t=Ne("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function FD(n){let e=!0;return $o(n)?n.length&&(e=n.every(t=>Pn(t,!1))):e=!1,e}function rte(n,e,t){let r=null;return $o(e)&&e.length?e.forEach(s=>{r||lE(s)||(r=gn("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):lE(n)||(r=gn("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function ste(n,e,t){let r=null;return Object.entries(n).forEach(([s,i])=>{if(r)return;const o=rte(s,W4(s,i),`${e} ${t}`);o&&(r=o)}),r}function ite(n,e){let t=null;return $o(n)?n.forEach(r=>{t||Xee(r)||(t=gn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=gn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function ate(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=ite(r==null?void 0:r.accounts,`${e} namespace`);s&&(t=s)}),t}function ote(n,e){let t=null;return FD(n==null?void 0:n.methods)?FD(n==null?void 0:n.events)||(t=gn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=gn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function jk(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=ote(r,`${e}, namespace`);s&&(t=s)}),t}function cte(n,e,t){let r=null;if(n&&hl(n)){const s=jk(n,e);s&&(r=s);const i=ste(n,e,t);i&&(r=i)}else r=Ne("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function MC(n,e){let t=null;if(n&&hl(n)){const r=jk(n,e);r&&(t=r);const s=ate(n,e);s&&(t=s)}else t=Ne("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function qk(n){return Pn(n.protocol,!0)}function lte(n,e){let t=!1;return n?n&&$o(n)&&n.length&&n.forEach(r=>{t=qk(r)}):t=!0,t}function ute(n){return typeof n=="number"}function us(n){return typeof n<"u"&&typeof n!==null}function hte(n){return!(!n||typeof n!="object"||!n.code||!WS(n.code,!1)||!n.message||!Pn(n.message,!1))}function dte(n){return!(fr(n)||!Pn(n.method,!1))}function fte(n){return!(fr(n)||fr(n.result)&&fr(n.error)||!WS(n.id,!1)||!Pn(n.jsonrpc,!1))}function pte(n){return!(fr(n)||!Pn(n.name,!1))}function HD(n,e){return!(!lE(e)||!qee(n).includes(e))}function gte(n,e,t){return Pn(t,!1)?Vee(n,e).includes(t):!1}function mte(n,e,t){return Pn(t,!1)?Gee(n,e).includes(t):!1}function zD(n,e,t){let r=null;const s=yte(n),i=wte(e),o=Object.keys(s),l=Object.keys(i),h=jD(Object.keys(n)),d=jD(Object.keys(e)),p=h.filter(g=>!d.includes(g));return p.length&&(r=Ne("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(e).toString()}`)),yu(o,l)||(r=Ne("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||r)return;const y=Sp(e[g].accounts);y.includes(g)||(r=Ne("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${y.toString()}`))}),o.forEach(g=>{r||(yu(s[g].methods,i[g].methods)?yu(s[g].events,i[g].events)||(r=Ne("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${g}`)):r=Ne("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${g}`))}),r}function yte(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(s=>{e[s]={methods:n[t].methods,events:n[t].events}})}),e}function jD(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wte(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const r=Sp(n[t].accounts);r==null||r.forEach(s=>{e[s]={accounts:n[t].accounts.filter(i=>i.includes(`${s}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function bte(n,e){return WS(n,!1)&&n<=e.max&&n>=e.min}function qD(){const n=ny();return new Promise(e=>{switch(n){case js.browser:e(Ete());break;case js.reactNative:e(vte());break;case js.node:e(Ate());break;default:e(!0)}})}function Ete(){return Ap()&&(navigator==null?void 0:navigator.onLine)}async function vte(){if(_l()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function Ate(){return!0}function Cte(n){switch(ny()){case js.browser:_te(n);break;case js.reactNative:Ste(n);break}}function _te(n){!_l()&&Ap()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function Ste(n){_l()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}function Nte(){var n;return Ap()&&Vo.getDocument()?((n=Vo.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const $C={};class Vg{static get(e){return $C[e]}static set(e,t){$C[e]=t}static delete(e){delete $C[e]}}function Tte(n){const e=vp.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function xte({publicKey:n,signature:e,payload:t}){var r;const s=C2(t.method),i=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),o=Rte(t.address),l=t.era==="00"?new Uint8Array([0]):C2(t.era);if(l.length!==1&&l.length!==2)throw new Error("Invalid era length");const h=parseInt(t.nonce,16),d=new Uint8Array([h&255,h>>8&255]),p=BigInt(`0x${Ote(t.tip)}`),g=Pte(p),y=new Uint8Array([0,...n,o,...e,...l,...d,...g,...s]),b=Dte(y.length+1);return new Uint8Array([...b,i,...y])}function Ite(n){const e=C2(n),t=EZ.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function C2(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Ote(n){return n.startsWith("0x")?n.slice(2):n}function Rte(n){const e=vp.decode(n)[0];return e===42?0:e===60?2:1}function Dte(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Pte(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Ute(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=Tte(n.transaction.address),r=xte({publicKey:t,signature:e,payload:n.transaction}),s=Buffer.from(r).toString("hex");return Ite(s)}const kte="PARSE_ERROR",Bte="INVALID_REQUEST",Lte="METHOD_NOT_FOUND",Mte="INVALID_PARAMS",Vk="INTERNAL_ERROR",YS="SERVER_ERROR",$te=[-32700,-32600,-32601,-32602,-32603],Em={[kte]:{code:-32700,message:"Parse error"},[Bte]:{code:-32600,message:"Invalid Request"},[Lte]:{code:-32601,message:"Method not found"},[Mte]:{code:-32602,message:"Invalid params"},[Vk]:{code:-32603,message:"Internal error"},[YS]:{code:-32e3,message:"Server error"}},Gk=YS;function Fte(n){return $te.includes(n)}function VD(n){return Object.keys(Em).includes(n)?Em[n]:Em[Gk]}function Hte(n){const e=Object.values(Em).find(t=>t.code===n);return e||Em[Gk]}function Kk(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var FC={},fo={},GD;function zte(){if(GD)return fo;GD=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.isBrowserCryptoAvailable=fo.getSubtleCrypto=fo.getBrowerCrypto=void 0;function n(){return(xa==null?void 0:xa.crypto)||(xa==null?void 0:xa.msCrypto)||{}}fo.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}fo.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return fo.isBrowserCryptoAvailable=t,fo}var po={},KD;function jte(){if(KD)return po;KD=1,Object.defineProperty(po,"__esModule",{value:!0}),po.isBrowser=po.isNode=po.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}po.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}po.isNode=e;function t(){return!n()&&!e()}return po.isBrowser=t,po}var WD;function qte(){return WD||(WD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Q0;e.__exportStar(zte(),n),e.__exportStar(jte(),n)}(FC)),FC}var Vte=qte();function ma(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function vu(n=6){return BigInt(ma(n))}function cl(n,e,t){return{id:t||ma(),jsonrpc:"2.0",method:n,params:e}}function av(n,e){return{id:n,jsonrpc:"2.0",result:e}}function ov(n,e,t){return{id:n,jsonrpc:"2.0",error:Gte(e)}}function Gte(n,e){return typeof n>"u"?VD(Vk):(typeof n=="string"&&(n=Object.assign(Object.assign({},VD(YS)),{message:n})),Fte(n.code)&&(n=Hte(n.code)),n)}let Kte=class{},Wte=class extends Kte{constructor(){super()}},Yte=class extends Wte{constructor(e){super()}};const Qte="^https?:",Zte="^wss?:";function Xte(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Wk(n,e){const t=Xte(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function YD(n){return Wk(n,Qte)}function QD(n){return Wk(n,Zte)}function Jte(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function Yk(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function QS(n){return Yk(n)&&"method"in n}function cv(n){return Yk(n)&&(ya(n)||yi(n))}function ya(n){return"result"in n}function yi(n){return"error"in n}let Ci=class extends Yte{constructor(e){super(e),this.events=new Ai.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(cl(e.method,e.params||[],e.id||vu().toString()),t)}async requestStrict(e,t){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{yi(i)?s(i.error):r(i.result)});try{await this.connection.send(e,t)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),cv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const ene=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),tne=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ZD=n=>n.split("?")[0],XD=10,nne=ene();let rne=class{constructor(e){if(this.url=e,this.events=new Ai.EventEmitter,this.registering=!1,!QD(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(qo(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!QD(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const s=Vte.isReactNative()?void 0:{rejectUnauthorized:!Jte(e)},i=new nne(e,[],s);tne()?i.onerror=o=>{const l=o;r(this.emitError(l.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?sh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),i=ov(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return Kk(e,ZD(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>XD&&this.events.setMaxListeners(XD)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ZD(this.url)}`));return this.events.emit("register_error",t),t}};var sne={};const Qk="wc",Zk=2,_2="core",za=`${Qk}@2:${_2}:`,ine={logger:"error"},ane={database:":memory:"},one="crypto",JD="client_ed25519_seed",cne=Se.ONE_DAY,lne="keychain",une="0.3",hne="messages",dne="0.3",eP=Se.SIX_HOURS,fne="publisher",Xk="irn",pne="error",Jk="wss://relay.walletconnect.org",gne="relayer",Jn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},mne="_subscription",ai={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},yne=.1,S2="2.21.3",un={link_mode:"link_mode",relay:"relay"},Sb={inbound:"inbound",outbound:"outbound"},wne="0.3",bne="WALLETCONNECT_CLIENT_ID",tP="WALLETCONNECT_LINK_MODE_APPS",Us={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Ene="subscription",vne="0.3",Ane="pairing",Cne="0.3",Gg={wc_pairingDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:0},res:{ttl:Se.ONE_DAY,prompt:!1,tag:0}}},ou={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ii={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_ne="history",Sne="0.3",Nne="expirer",li={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Tne="0.3",xne="verify-api",Ine="https://verify.walletconnect.com",e6="https://verify.walletconnect.org",vm=e6,One=`${vm}/v3`,Rne=[Ine,e6],Dne="echo",Pne="https://echo.walletconnect.com",ga={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},yo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Oi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Yl={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ql={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Kg={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Une=.1,kne="event-client",Bne=86400,Lne="https://pulse.walletconnect.org/batch";function Mne(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,h=n.charAt(0),d=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,A=0,S=0,x=v.length;S!==x&&v[S]===0;)S++,E++;for(var T=(x-S)*p+1>>>0,k=new Uint8Array(T);S!==x;){for(var R=v[S],P=0,F=T-1;(R!==0||P<A)&&F!==-1;F--,P++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=P,S++}for(var $=T-A;$!==T&&k[$]===0;)$++;for(var B=h.repeat(E);$<T;++$)B+=n.charAt(k[$]);return B}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var A=0,S=0;v[E]===h;)A++,E++;for(var x=(v.length-E)*d+1>>>0,T=new Uint8Array(x);v[E];){var k=t[v.charCodeAt(E)];if(k===255)return;for(var R=0,P=x-1;(k!==0||R<S)&&P!==-1;P--,R++)k+=l*T[P]>>>0,T[P]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,E++}if(v[E]!==" "){for(var F=x-S;F!==x&&T[F]===0;)F++;for(var $=new Uint8Array(A+(x-F)),B=A;F!==x;)$[B++]=T[F++];return $}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var $ne=Mne,Fne=$ne;const t6=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Hne=n=>new TextEncoder().encode(n),zne=n=>new TextDecoder().decode(n);class jne{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qne{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return n6(this,e)}}class Vne{constructor(e){this.decoders=e}or(e){return n6(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const n6=(n,e)=>new Vne({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Gne{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new jne(e,t,r),this.decoder=new qne(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const lv=({name:n,prefix:e,encode:t,decode:r})=>new Gne(n,e,t,r),ay=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=Fne(t,e);return lv({prefix:n,name:e,encode:r,decode:i=>t6(s(i))})},Kne=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,h=0,d=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|g,l+=t,l>=8&&(l-=8,o[d++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return o},Wne=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let h=0;h<n.length;++h)for(l=l<<8|n[h],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},br=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>lv({prefix:e,name:n,encode(s){return Wne(s,r,t)},decode(s){return Kne(s,r,t,n)}}),Yne=lv({prefix:"\0",name:"identity",encode:n=>zne(n),decode:n=>Hne(n)});var Qne=Object.freeze({__proto__:null,identity:Yne});const Zne=br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Xne=Object.freeze({__proto__:null,base2:Zne});const Jne=br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ere=Object.freeze({__proto__:null,base8:Jne});const tre=ay({prefix:"9",name:"base10",alphabet:"0123456789"});var nre=Object.freeze({__proto__:null,base10:tre});const rre=br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sre=br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ire=Object.freeze({__proto__:null,base16:rre,base16upper:sre});const are=br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ore=br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cre=br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lre=br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ure=br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hre=br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dre=br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fre=br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pre=br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gre=Object.freeze({__proto__:null,base32:are,base32upper:ore,base32pad:cre,base32padupper:lre,base32hex:ure,base32hexupper:hre,base32hexpad:dre,base32hexpadupper:fre,base32z:pre});const mre=ay({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yre=ay({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wre=Object.freeze({__proto__:null,base36:mre,base36upper:yre});const bre=ay({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ere=ay({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vre=Object.freeze({__proto__:null,base58btc:bre,base58flickr:Ere});const Are=br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Cre=br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_re=br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Sre=br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Nre=Object.freeze({__proto__:null,base64:Are,base64pad:Cre,base64url:_re,base64urlpad:Sre});const r6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Tre=r6.reduce((n,e,t)=>(n[t]=e,n),[]),xre=r6.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Ire(n){return n.reduce((e,t)=>(e+=Tre[t],e),"")}function Ore(n){const e=[];for(const t of n){const r=xre[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const Rre=lv({prefix:"🚀",name:"base256emoji",encode:Ire,decode:Ore});var Dre=Object.freeze({__proto__:null,base256emoji:Rre}),Pre=s6,nP=128,Ure=-128,kre=Math.pow(2,31);function s6(n,e,t){e=e||[],t=t||0;for(var r=t;n>=kre;)e[t++]=n&255|nP,n/=128;for(;n&Ure;)e[t++]=n&255|nP,n>>>=7;return e[t]=n|0,s6.bytes=t-r+1,e}var Bre=N2,Lre=128,rP=127;function N2(n,r){var t=0,r=r||0,s=0,i=r,o,l=n.length;do{if(i>=l)throw N2.bytes=0,new RangeError("Could not decode varint");o=n[i++],t+=s<28?(o&rP)<<s:(o&rP)*Math.pow(2,s),s+=7}while(o>=Lre);return N2.bytes=i-r,t}var Mre=Math.pow(2,7),$re=Math.pow(2,14),Fre=Math.pow(2,21),Hre=Math.pow(2,28),zre=Math.pow(2,35),jre=Math.pow(2,42),qre=Math.pow(2,49),Vre=Math.pow(2,56),Gre=Math.pow(2,63),Kre=function(n){return n<Mre?1:n<$re?2:n<Fre?3:n<Hre?4:n<zre?5:n<jre?6:n<qre?7:n<Vre?8:n<Gre?9:10},Wre={encode:Pre,decode:Bre,encodingLength:Kre},i6=Wre;const sP=(n,e,t=0)=>(i6.encode(n,e,t),e),iP=n=>i6.encodingLength(n),T2=(n,e)=>{const t=e.byteLength,r=iP(n),s=r+iP(t),i=new Uint8Array(s+t);return sP(n,i,0),sP(t,i,r),i.set(e,s),new Yre(n,t,e,i)};class Yre{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const a6=({name:n,code:e,encode:t})=>new Qre(n,e,t);class Qre{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?T2(this.code,t):t.then(r=>T2(this.code,r))}else throw Error("Unknown type, must be binary type")}}const o6=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Zre=a6({name:"sha2-256",code:18,encode:o6("SHA-256")}),Xre=a6({name:"sha2-512",code:19,encode:o6("SHA-512")});var Jre=Object.freeze({__proto__:null,sha256:Zre,sha512:Xre});const c6=0,ese="identity",l6=t6,tse=n=>T2(c6,l6(n)),nse={code:c6,name:ese,encode:l6,digest:tse};var rse=Object.freeze({__proto__:null,identity:nse});new TextEncoder,new TextDecoder;const aP={...Qne,...Xne,...ere,...nre,...ire,...gre,...wre,...vre,...Nre,...Dre};({...Jre,...rse});function u6(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function sse(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?u6(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function h6(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const oP=h6("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),HC=h6("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=sse(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),ise={utf8:oP,"utf-8":oP,hex:aP.base16,latin1:HC,ascii:HC,binary:HC,...aP};function ase(n,e="utf8"){const t=ise[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?u6(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var ose=Object.defineProperty,cse=(n,e,t)=>e in n?ose(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fa=(n,e,t)=>cse(n,typeof e!="symbol"?e+"":e,t);class lse{constructor(e,t){this.core=e,this.logger=t,fa(this,"keychain",new Map),fa(this,"name",lne),fa(this,"version",une),fa(this,"initialized",!1),fa(this,"storagePrefix",za),fa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),fa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),fa(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),fa(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ne("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),fa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Pr(t,this.name)}get context(){return Cs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,h2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?d2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var use=Object.defineProperty,hse=(n,e,t)=>e in n?use(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lr=(n,e,t)=>hse(n,typeof e!="symbol"?e+"":e,t);class dse{constructor(e,t,r){this.core=e,this.logger=t,lr(this,"name",one),lr(this,"keychain"),lr(this,"randomSessionIdentifier",A2()),lr(this,"initialized",!1),lr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),lr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),lr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=kR(s);return _4(i.publicKey)}),lr(this,"generateKeyPair",()=>{this.isInitialized();const s=_ee();return this.setPrivateKey(s.publicKey,s.privateKey)}),lr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=kR(i),l=this.randomSessionIdentifier;return await KW(l,s,cne,o)}),lr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const l=this.getPrivateKey(s),h=See(l,i);return this.setSymKey(h,o)}),lr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||_b(s);return await this.keychain.set(o,s),o}),lr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),lr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),lr(this,"encode",async(s,i,o)=>{this.isInitialized();const l=zk(o),h=qo(i);if(PD(l))return xee(h,o==null?void 0:o.encoding);if(DD(l)){const y=l.senderPublicKey,b=l.receiverPublicKey;s=await this.generateSharedKey(y,b)}const d=this.getSymKey(s),{type:p,senderPublicKey:g}=l;return Nee({type:p,symKey:d,message:h,senderPublicKey:g,encoding:o==null?void 0:o.encoding})}),lr(this,"decode",async(s,i,o)=>{this.isInitialized();const l=Oee(i,o);if(PD(l)){const h=Iee(i,o==null?void 0:o.encoding);return sh(h)}if(DD(l)){const h=l.receiverPublicKey,d=l.senderPublicKey;s=await this.generateSharedKey(h,d)}try{const h=this.getSymKey(s),d=Tee({symKey:h,encoded:i,encoding:o==null?void 0:o.encoding});return sh(d)}catch(h){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}}),lr(this,"getPayloadType",(s,i=Gi)=>{const o=h0({encoded:s,encoding:i});return oh(o.type)}),lr(this,"getPayloadSenderPublicKey",(s,i=Gi)=>{const o=h0({encoded:s,encoding:i});return o.senderPublicKey?Es(o.senderPublicKey,Yr):void 0}),this.core=e,this.logger=Pr(t,this.name),this.keychain=r||new lse(this.core,this.logger)}get context(){return Cs(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(JD)}catch{e=A2(),await this.keychain.set(JD,e)}return ase(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fse=Object.defineProperty,pse=Object.defineProperties,gse=Object.getOwnPropertyDescriptors,cP=Object.getOwnPropertySymbols,mse=Object.prototype.hasOwnProperty,yse=Object.prototype.propertyIsEnumerable,x2=(n,e,t)=>e in n?fse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wse=(n,e)=>{for(var t in e||(e={}))mse.call(e,t)&&x2(n,t,e[t]);if(cP)for(var t of cP(e))yse.call(e,t)&&x2(n,t,e[t]);return n},bse=(n,e)=>pse(n,gse(e)),Ds=(n,e,t)=>x2(n,typeof e!="symbol"?e+"":e,t);class Ese extends VV{constructor(e,t){super(e,t),this.logger=e,this.core=t,Ds(this,"messages",new Map),Ds(this,"messagesWithoutClientAck",new Map),Ds(this,"name",hne),Ds(this,"version",dne),Ds(this,"initialized",!1),Ds(this,"storagePrefix",za),Ds(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Ds(this,"set",async(r,s,i)=>{this.isInitialized();const o=Oa(s);let l=this.messages.get(r);if(typeof l>"u"&&(l={}),typeof l[o]<"u")return o;if(l[o]=s,this.messages.set(r,l),i===Sb.inbound){const h=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,bse(wse({},h),{[o]:s}))}return await this.persist(),o}),Ds(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Ds(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Ds(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Oa(s);return typeof i[o]<"u"}),Ds(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Oa(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Ds(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Pr(e,this.name),this.core=t}get context(){return Cs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,h2(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,h2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?d2(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?d2(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vse=Object.defineProperty,Ase=Object.defineProperties,Cse=Object.getOwnPropertyDescriptors,lP=Object.getOwnPropertySymbols,_se=Object.prototype.hasOwnProperty,Sse=Object.prototype.propertyIsEnumerable,I2=(n,e,t)=>e in n?vse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tb=(n,e)=>{for(var t in e||(e={}))_se.call(e,t)&&I2(n,t,e[t]);if(lP)for(var t of lP(e))Sse.call(e,t)&&I2(n,t,e[t]);return n},zC=(n,e)=>Ase(n,Cse(e)),Ri=(n,e,t)=>I2(n,typeof e!="symbol"?e+"":e,t);class Nse extends GV{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Ri(this,"events",new Ai.EventEmitter),Ri(this,"name",fne),Ri(this,"queue",new Map),Ri(this,"publishTimeout",Se.toMiliseconds(Se.ONE_MINUTE)),Ri(this,"initialPublishTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),Ri(this,"needsTransportRestart",!1),Ri(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const l=(i==null?void 0:i.ttl)||eP,h=cE(i),d=(i==null?void 0:i.prompt)||!1,p=(i==null?void 0:i.tag)||0,g=(i==null?void 0:i.id)||vu().toString(),y={topic:r,message:s,opts:{ttl:l,relay:h,prompt:d,tag:p,id:g,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},b=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{const v=new Promise(async E=>{const A=({id:x})=>{y.opts.id===x&&(this.removeRequestFromQueue(x),this.relayer.events.removeListener(Jn.publish,A),E(y))};this.relayer.events.on(Jn.publish,A);const S=ol(new Promise((x,T)=>{this.rpcPublish({topic:r,message:s,ttl:l,prompt:d,tag:p,id:g,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(x).catch(k=>{this.logger.warn(k,k==null?void 0:k.message),T(k)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await S,this.events.removeListener(Jn.publish,A)}catch(x){this.queue.set(g,zC(tb({},y),{attempt:1})),this.logger.warn(x,x==null?void 0:x.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:s,opts:i}}),await ol(v,this.publishTimeout,b)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw v}finally{this.queue.delete(g)}}),Ri(this,"on",(r,s)=>{this.events.on(r,s)}),Ri(this,"once",(r,s)=>{this.events.once(r,s)}),Ri(this,"off",(r,s)=>{this.events.off(r,s)}),Ri(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Pr(t,this.name),this.registerEventListeners()}get context(){return Cs(this.logger)}async rpcPublish(e){var t,r,s,i;const{topic:o,message:l,ttl:h=eP,prompt:d,tag:p,id:g,attestation:y,tvf:b}=e,v={method:om(cE().protocol).publish,params:tb({topic:o,message:l,ttl:h,prompt:d,tag:p,attestation:y},b),id:g};fr((t=v.params)==null?void 0:t.prompt)&&((r=v.params)==null||delete r.prompt),fr((s=v.params)==null?void 0:s.tag)&&((i=v.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const E=await this.relayer.request(v);return this.relayer.events.emit(Jn.publish,e),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const r=e.attempt+1;this.queue.set(t,zC(tb({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(zC(tb({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:l,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(bh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Jn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Jn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Tse=Object.defineProperty,xse=(n,e,t)=>e in n?Tse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wd=(n,e,t)=>xse(n,typeof e!="symbol"?e+"":e,t);class Ise{constructor(){wd(this,"map",new Map),wd(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),wd(this,"get",e=>this.map.get(e)||[]),wd(this,"exists",(e,t)=>this.get(e).includes(t)),wd(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const s=r.filter(i=>i!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),wd(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Ose=Object.defineProperty,Rse=Object.defineProperties,Dse=Object.getOwnPropertyDescriptors,uP=Object.getOwnPropertySymbols,Pse=Object.prototype.hasOwnProperty,Use=Object.prototype.propertyIsEnumerable,O2=(n,e,t)=>e in n?Ose(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wg=(n,e)=>{for(var t in e||(e={}))Pse.call(e,t)&&O2(n,t,e[t]);if(uP)for(var t of uP(e))Use.call(e,t)&&O2(n,t,e[t]);return n},jC=(n,e)=>Rse(n,Dse(e)),rn=(n,e,t)=>O2(n,typeof e!="symbol"?e+"":e,t);class kse extends YV{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,rn(this,"subscriptions",new Map),rn(this,"topicMap",new Ise),rn(this,"events",new Ai.EventEmitter),rn(this,"name",Ene),rn(this,"version",vne),rn(this,"pending",new Map),rn(this,"cached",[]),rn(this,"initialized",!1),rn(this,"storagePrefix",za),rn(this,"subscribeTimeout",Se.toMiliseconds(Se.ONE_MINUTE)),rn(this,"initialSubscribeTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),rn(this,"clientId"),rn(this,"batchSubscribeTopicsLimit",500),rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),rn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=cE(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const l=await this.rpcSubscribe(r,i,s);return typeof l=="string"&&(this.onSubscribe(l,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),l}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),rn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),rn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),rn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),rn(this,"on",(r,s)=>{this.events.on(r,s)}),rn(this,"once",(r,s)=>{this.events.once(r,s)}),rn(this,"off",(r,s)=>{this.events.off(r,s)}),rn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),rn(this,"start",async()=>{await this.onConnect()}),rn(this,"stop",async()=>{await this.onDisconnect()}),rn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),rn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),rn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(bh.pulse,async()=>{await this.checkPending()}),this.events.on(Us.created,async r=>{const s=Us.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Us.deleted,async r=>{const s=Us.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Pr(t,this.name),this.clientId=""}get context(){return Cs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const s=cE(r);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const i=gn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,r){var s;(!r||(r==null?void 0:r.transportType)===un.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:om(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===un.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(p=>this.logger.warn(p))},Se.toMiliseconds(Se.ONE_SECOND)),l;const h=new Promise(async p=>{const g=y=>{y.topic===e&&(this.events.removeListener(Us.created,g),p(y.id))};this.events.on(Us.created,g);try{const y=await ol(new Promise((b,v)=>{this.relayer.request(i).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),v(E)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Us.created,g),p(y)}catch{}}),d=await ol(h,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!d&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return d?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Jn.connection_stalled),o)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:om(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await ol(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Jn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:om(t.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await ol(new Promise((i,o)=>{this.relayer.request(r).catch(l=>{this.logger.warn(l),o(l)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Jn.connection_stalled)}return s}rpcUnsubscribe(e,t,r){const s={method:om(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,jC(Wg({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Wg({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Wg({},t)),this.topicMap.set(t.topic,e),this.events.emit(Us.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Us.deleted,jC(Wg({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Us.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Us.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>jC(Wg({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await KZ(Se.toMiliseconds(Se.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Oa(e+await this.getClientId())}}var Bse=Object.defineProperty,hP=Object.getOwnPropertySymbols,Lse=Object.prototype.hasOwnProperty,Mse=Object.prototype.propertyIsEnumerable,R2=(n,e,t)=>e in n?Bse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dP=(n,e)=>{for(var t in e||(e={}))Lse.call(e,t)&&R2(n,t,e[t]);if(hP)for(var t of hP(e))Mse.call(e,t)&&R2(n,t,e[t]);return n},Ot=(n,e,t)=>R2(n,typeof e!="symbol"?e+"":e,t);class $se extends KV{constructor(e){super(e),Ot(this,"protocol","wc"),Ot(this,"version",2),Ot(this,"core"),Ot(this,"logger"),Ot(this,"events",new Ai.EventEmitter),Ot(this,"provider"),Ot(this,"messages"),Ot(this,"subscriber"),Ot(this,"publisher"),Ot(this,"name",gne),Ot(this,"transportExplicitlyClosed",!1),Ot(this,"initialized",!1),Ot(this,"connectionAttemptInProgress",!1),Ot(this,"relayUrl"),Ot(this,"projectId"),Ot(this,"packageName"),Ot(this,"bundleId"),Ot(this,"hasExperiencedNetworkDisruption",!1),Ot(this,"pingTimeout"),Ot(this,"heartBeatTimeout",Se.toMiliseconds(Se.THIRTY_SECONDS+Se.FIVE_SECONDS)),Ot(this,"reconnectTimeout"),Ot(this,"connectPromise"),Ot(this,"reconnectInProgress",!1),Ot(this,"requestsInFlight",[]),Ot(this,"connectTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),Ot(this,"request",async t=>{var r,s;this.logger.debug("Publishing Request Payload");const i=t.id||vu().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=t.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const l=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(h=>h!==o),l}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ot(this,"resetPingTimeout",()=>{sE()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ot(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),Ot(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Jn.connect)}),Ot(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Ot(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(Jn.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ot(this,"registerProviderListeners",()=>{this.provider.on(ai.payload,this.onPayloadHandler),this.provider.on(ai.connect,this.onConnectHandler),this.provider.on(ai.disconnect,this.onDisconnectHandler),this.provider.on(ai.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pr(e.logger,this.name):X0(yp({level:e.logger||pne})),this.messages=new Ese(this.logger,e.core),this.subscriber=new kse(this,this.logger),this.publisher=new Nse(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Jk,this.projectId=e.projectId,RZ()?this.packageName=eD():DZ()&&(this.bundleId=eD()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Cs(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:un.relay},Sb.outbound)}async subscribe(e,t){var r,s,i;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=t==null?void 0:t.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=t==null?void 0:t.internal)==null?void 0:s.throwOnFailedPublish;let l=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",h;const d=p=>{p.topic===e&&(this.subscriber.off(Us.created,d),h())};return await Promise.all([new Promise(p=>{h=p,this.subscriber.on(Us.created,d)}),new Promise(async(p,g)=>{l=await this.subscriber.subscribe(e,dP({internal:{throwOnFailedPublish:o}},t)).catch(y=>{o&&g(y)})||l,p()})]),l}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ol(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await qD())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const s=Fn(Se.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Jn.message,e),await this.recordMessageEvent(e,Sb.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(ai.disconnect,i),await ol(new Promise((o,l)=>{this.provider.connect().then(o).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ai.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,l)=>{const h=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ai.disconnect,h),await this.subscriber.start().then(o).catch(l).finally(()=>{this.provider.off(ai.disconnect,h)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,Se.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,s,i;if(sE())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ci(new rne(LZ({sdkVersion:S2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:s}=e;await this.messages.set(r,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),QS(e)){if(!e.method.endsWith(mne))return;const t=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=t.data,l={topic:r,message:s,publishedAt:i,transportType:un.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(dP({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else cv(e)&&this.events.emit(Jn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Sb.inbound),this.events.emit(Jn.message,e))}async acknowledgePayload(e){const t=av(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ai.payload,this.onPayloadHandler),this.provider.off(ai.connect,this.onConnectHandler),this.provider.off(ai.disconnect,this.onDisconnectHandler),this.provider.off(ai.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await qD();Cte(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(bh.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Nte())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Jn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Se.toMiliseconds(yne)))))}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Fse(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function fP(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function pP(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Hse="[object RegExp]",zse="[object String]",jse="[object Number]",qse="[object Boolean]",gP="[object Arguments]",Vse="[object Symbol]",Gse="[object Date]",Kse="[object Map]",Wse="[object Set]",Yse="[object Array]",Qse="[object Function]",Zse="[object ArrayBuffer]",qC="[object Object]",Xse="[object Error]",Jse="[object DataView]",eie="[object Uint8Array]",tie="[object Uint8ClampedArray]",nie="[object Uint16Array]",rie="[object Uint32Array]",sie="[object BigUint64Array]",iie="[object Int8Array]",aie="[object Int16Array]",oie="[object Int32Array]",cie="[object BigInt64Array]",lie="[object Float32Array]",uie="[object Float64Array]";function hie(){}function mP(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function die(n,e,t){return cm(n,e,void 0,void 0,void 0,void 0,t)}function cm(n,e,t,r,s,i,o){const l=o(n,e,t,r,s,i);if(l!==void 0)return l;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return Am(n,e,i,o)}return Am(n,e,i,o)}function Am(n,e,t,r){if(Object.is(n,e))return!0;let s=pP(n),i=pP(e);if(s===gP&&(s=qC),i===gP&&(i=qC),s!==i)return!1;switch(s){case zse:return n.toString()===e.toString();case jse:{const h=n.valueOf(),d=e.valueOf();return Fse(h,d)}case qse:case Gse:case Vse:return Object.is(n.valueOf(),e.valueOf());case Hse:return n.source===e.source&&n.flags===e.flags;case Qse:return n===e}t=t??new Map;const o=t.get(n),l=t.get(e);if(o!=null&&l!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(s){case Kse:{if(n.size!==e.size)return!1;for(const[h,d]of n.entries())if(!e.has(h)||!cm(d,e.get(h),h,n,e,t,r))return!1;return!0}case Wse:{if(n.size!==e.size)return!1;const h=Array.from(n.values()),d=Array.from(e.values());for(let p=0;p<h.length;p++){const g=h[p],y=d.findIndex(b=>cm(g,b,void 0,n,e,t,r));if(y===-1)return!1;d.splice(y,1)}return!0}case Yse:case eie:case tie:case nie:case rie:case sie:case iie:case aie:case oie:case cie:case lie:case uie:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let h=0;h<n.length;h++)if(!cm(n[h],e[h],h,n,e,t,r))return!1;return!0}case Zse:return n.byteLength!==e.byteLength?!1:Am(new Uint8Array(n),new Uint8Array(e),t,r);case Jse:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:Am(new Uint8Array(n),new Uint8Array(e),t,r);case Xse:return n.name===e.name&&n.message===e.message;case qC:{if(!(Am(n.constructor,e.constructor,t,r)||mP(n)&&mP(e)))return!1;const h=[...Object.keys(n),...fP(n)],d=[...Object.keys(e),...fP(e)];if(h.length!==d.length)return!1;for(let p=0;p<h.length;p++){const g=h[p],y=n[g];if(!Object.hasOwn(e,g))return!1;const b=e[g];if(!cm(y,b,g,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function fie(n,e){return die(n,e,hie)}var pie=Object.defineProperty,yP=Object.getOwnPropertySymbols,gie=Object.prototype.hasOwnProperty,mie=Object.prototype.propertyIsEnumerable,D2=(n,e,t)=>e in n?pie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wP=(n,e)=>{for(var t in e||(e={}))gie.call(e,t)&&D2(n,t,e[t]);if(yP)for(var t of yP(e))mie.call(e,t)&&D2(n,t,e[t]);return n},as=(n,e,t)=>D2(n,typeof e!="symbol"?e+"":e,t);class vh extends WV{constructor(e,t,r,s=za,i=void 0){super(e,t,r,s),this.core=e,this.logger=t,this.name=r,as(this,"map",new Map),as(this,"version",wne),as(this,"cached",[]),as(this,"initialized",!1),as(this,"getKey"),as(this,"storagePrefix",za),as(this,"recentlyDeleted",[]),as(this,"recentlyDeletedLimit",200),as(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!fr(o)?this.map.set(this.getKey(o),o):ete(o)?this.map.set(o.id,o):tte(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),as(this,"set",async(o,l)=>{this.isInitialized(),this.map.has(o)?await this.update(o,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:l}),this.map.set(o,l),await this.persist())}),as(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),as(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(l=>Object.keys(o).every(h=>fie(l[h],o[h]))):this.values)),as(this,"update",async(o,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:l});const h=wP(wP({},this.getData(o)),l);this.map.set(o,h),await this.persist()}),as(this,"delete",async(o,l)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:l}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Pr(t,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Cs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=Ne("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yie=Object.defineProperty,wie=(n,e,t)=>e in n?yie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bt=(n,e,t)=>wie(n,typeof e!="symbol"?e+"":e,t);class bie{constructor(e,t){this.core=e,this.logger=t,bt(this,"name",Ane),bt(this,"version",Cne),bt(this,"events",new AS),bt(this,"pairings"),bt(this,"initialized",!1),bt(this,"storagePrefix",za),bt(this,"ignoredPayloadTypes",[Mo]),bt(this,"registeredMethods",[]),bt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),bt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),bt(this,"create",async r=>{this.isInitialized();const s=A2(),i=await this.core.crypto.setSymKey(s),o=Fn(Se.FIVE_MINUTES),l={protocol:Xk},h={topic:i,expiry:o,relay:l,active:!1,methods:r==null?void 0:r.methods},d=kD({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:l,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ou.create,h),this.core.expirer.set(i,o),await this.pairings.set(i,h),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:d}}),bt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ga.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:l,expiryTimestamp:h,methods:d}=UD(r.uri);s.props.properties.topic=i,s.addTrace(ga.pairing_uri_validation_success),s.addTrace(ga.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(i)){if(p=this.pairings.get(i),s.addTrace(ga.existing_pairing),p.active)throw s.setError(yo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ga.pairing_not_expired)}const g=h||Fn(Se.FIVE_MINUTES),y={topic:i,relay:l,expiry:g,active:!1,methods:d};this.core.expirer.set(i,g),await this.pairings.set(i,y),s.addTrace(ga.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ou.create,y),s.addTrace(ga.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ga.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(yo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:l})}catch(b){throw s.setError(yo.subscribe_pairing_topic_failure),b}return s.addTrace(ga.subscribe_pairing_topic_success),y}),bt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Fn(Se.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),bt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:l,reject:h}=ru();this.events.once(Ht("pairing_ping",i),({error:d})=>{d?h(d):l()}),await o()}}),bt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),bt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),bt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),bt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",gn("USER_DISCONNECTED")),await this.deletePairing(s))}),bt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:l}=r,h=this.core.crypto.keychain.get(s);return kD({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:h,relay:i,expiryTimestamp:o,methods:l})}),bt(this,"sendRequest",async(r,s,i)=>{const o=cl(s,i),l=await this.core.crypto.encode(r,o),h=Gg[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,l,h),o.id}),bt(this,"sendResult",async(r,s,i)=>{const o=av(r,i),l=await this.core.crypto.encode(s,o),h=(await this.core.history.get(s,r)).request.method,d=Gg[h].res;await this.core.relayer.publish(s,l,d),await this.core.history.resolve(o)}),bt(this,"sendError",async(r,s,i)=>{const o=ov(r,i),l=await this.core.crypto.encode(s,o),h=(await this.core.history.get(s,r)).request.method,d=Gg[h]?Gg[h].res:Gg.unregistered_method.res;await this.core.relayer.publish(s,l,d),await this.core.history.resolve(o)}),bt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,gn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),bt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Bc(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),bt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),bt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),bt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ou.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ya(s)?this.events.emit(Ht("pairing_ping",i),{}):yi(s)&&this.events.emit(Ht("pairing_ping",i),{error:s.error})},500)}),bt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ou.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const l=gn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,l),this.logger.error(l)}catch(l){await this.sendError(i,r,l),this.logger.error(l)}}),bt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(gn("WC_METHOD_UNSUPPORTED",r))}),bt(this,"isValidPair",(r,s)=>{var i;if(!us(r)){const{message:l}=Ne("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(yo.malformed_pairing_uri),new Error(l)}if(!Jee(r.uri)){const{message:l}=Ne("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(yo.malformed_pairing_uri),new Error(l)}const o=UD(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:l}=Ne("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(yo.malformed_pairing_uri),new Error(l)}if(!(o!=null&&o.symKey)){const{message:l}=Ne("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(yo.malformed_pairing_uri),new Error(l)}if(o!=null&&o.expiryTimestamp&&Se.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(yo.pairing_expired);const{message:l}=Ne("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),bt(this,"isValidPing",async r=>{if(!us(r)){const{message:i}=Ne("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidDisconnect",async r=>{if(!us(r)){const{message:i}=Ne("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidPairingTopic",async r=>{if(!Pn(r,!1)){const{message:s}=Ne("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Bc(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ne("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Pr(t,this.name),this.pairings=new vh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Cs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Jn.message,async e=>{const{topic:t,message:r,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==un.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(t,r);QS(i)?(this.core.history.set(t,i),await this.onRelayEventRequest({topic:t,payload:i})):cv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id)),await this.core.relayer.messages.ack(t,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(li.expired,async e=>{const{topic:t}=X4(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ou.expire,{topic:t}))})}}var Eie=Object.defineProperty,vie=(n,e,t)=>e in n?Eie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ur=(n,e,t)=>vie(n,typeof e!="symbol"?e+"":e,t);class Aie extends qV{constructor(e,t){super(e,t),this.core=e,this.logger=t,ur(this,"records",new Map),ur(this,"events",new Ai.EventEmitter),ur(this,"name",_ne),ur(this,"version",Sne),ur(this,"cached",[]),ur(this,"initialized",!1),ur(this,"storagePrefix",za),ur(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ur(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Fn(Se.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ii.created,o)}),ur(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=yi(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ii.updated,s))}),ur(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ur(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Ii.deleted,i)}}),this.persist()}),ur(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ur(this,"on",(r,s)=>{this.events.on(r,s)}),ur(this,"once",(r,s)=>{this.events.once(r,s)}),ur(this,"off",(r,s)=>{this.events.off(r,s)}),ur(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Pr(t,this.name)}get context(){return Cs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:cl(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ii.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ii.created,e=>{const t=Ii.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ii.updated,e=>{const t=Ii.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ii.deleted,e=>{const t=Ii.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(bh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{Se.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ii.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Cie=Object.defineProperty,_ie=(n,e,t)=>e in n?Cie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nr=(n,e,t)=>_ie(n,typeof e!="symbol"?e+"":e,t);class Sie extends QV{constructor(e,t){super(e,t),this.core=e,this.logger=t,Nr(this,"expirations",new Map),Nr(this,"events",new Ai.EventEmitter),Nr(this,"name",Nne),Nr(this,"version",Tne),Nr(this,"cached",[]),Nr(this,"initialized",!1),Nr(this,"storagePrefix",za),Nr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Nr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Nr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(li.created,{target:i,expiration:o})}),Nr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Nr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(li.deleted,{target:s,expiration:i})}}),Nr(this,"on",(r,s)=>{this.events.on(r,s)}),Nr(this,"once",(r,s)=>{this.events.once(r,s)}),Nr(this,"off",(r,s)=>{this.events.off(r,s)}),Nr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Pr(t,this.name)}get context(){return Cs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return MZ(e);if(typeof e=="number")return $Z(e);const{message:t}=Ne("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(li.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;Se.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(li.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(bh.pulse,()=>this.checkExpirations()),this.events.on(li.created,e=>{const t=li.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(li.expired,e=>{const t=li.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(li.deleted,e=>{const t=li.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nie=Object.defineProperty,Tie=(n,e,t)=>e in n?Nie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dn=(n,e,t)=>Tie(n,typeof e!="symbol"?e+"":e,t);class xie extends ZV{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Dn(this,"name",xne),Dn(this,"abortController"),Dn(this,"isDevEnv"),Dn(this,"verifyUrlV3",One),Dn(this,"storagePrefix",za),Dn(this,"version",Zk),Dn(this,"publicKey"),Dn(this,"fetchPromise"),Dn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Se.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Dn(this,"register",async s=>{if(!Ap()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:l}=s,h=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${l}`;try{const d=Vo.getDocument(),p=this.startAbortTimer(Se.ONE_SECOND*5),g=await new Promise((y,b)=>{const v=()=>{window.removeEventListener("message",A),d.body.removeChild(E),b("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const E=d.createElement("iframe");E.src=h,E.style.display="none",E.addEventListener("error",v,{signal:this.abortController.signal});const A=S=>{if(S.data&&typeof S.data=="string")try{const x=JSON.parse(S.data);if(x.type==="verify_attestation"){if(s2(x.attestation).payload.id!==o)return;clearInterval(p),d.body.removeChild(E),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",A),y(x.attestation===null?"":x.attestation)}}catch(x){this.logger.warn(x)}};d.body.appendChild(E),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(d){this.logger.warn(d)}return""}),Dn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:l}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(s2(i).payload.id!==l)return;const d=await this.isValidJwtAttestation(i);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!o)return;const h=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,h)}),Dn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Se.ONE_SECOND*5),l=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),l.status===200?await l.json():void 0}),Dn(this,"getVerifyUrl",s=>{let i=s||vm;return Rne.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${vm}`),i=vm),i}),Dn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Se.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Dn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Dn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Dn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),Dn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Dn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Dn(this,"validateAttestation",(s,i)=>{const o=Dee(s,i.publicKey),l={hasExpired:Se.toMiliseconds(o.exp)<Date.now(),payload:o};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=Pr(t,this.name),this.abortController=new AbortController,this.isDevEnv=kS(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Cs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Se.toMiliseconds(e))}}var Iie=Object.defineProperty,Oie=(n,e,t)=>e in n?Iie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bP=(n,e,t)=>Oie(n,typeof e!="symbol"?e+"":e,t);class Rie extends XV{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,bP(this,"context",Dne),bP(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:l=!1}=r,h=`${Pne}/${this.projectId}/clients`;await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:l})})}),this.logger=Pr(t,this.context)}}var Die=Object.defineProperty,EP=Object.getOwnPropertySymbols,Pie=Object.prototype.hasOwnProperty,Uie=Object.prototype.propertyIsEnumerable,P2=(n,e,t)=>e in n?Die(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yg=(n,e)=>{for(var t in e||(e={}))Pie.call(e,t)&&P2(n,t,e[t]);if(EP)for(var t of EP(e))Uie.call(e,t)&&P2(n,t,e[t]);return n},Wn=(n,e,t)=>P2(n,typeof e!="symbol"?e+"":e,t);class kie extends JV{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,Wn(this,"context",kne),Wn(this,"storagePrefix",za),Wn(this,"storageVersion",Une),Wn(this,"events",new Map),Wn(this,"shouldPersist",!1),Wn(this,"init",async()=>{if(!kS())try{const s={eventId:nD(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Q4(this.core.relayer.protocol,this.core.relayer.version,S2)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Wn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:l,trace:h}}=s,d=nD(),p=this.core.projectId||"",g=Date.now(),y=Yg({eventId:d,timestamp:g,props:{event:i,type:o,properties:{topic:l,trace:h}},bundleId:p,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,y),this.shouldPersist=!0),y}),Wn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const l=Array.from(this.events.values()).find(h=>h.props.properties.topic===o);if(l)return Yg(Yg({},l),this.setMethods(l.eventId))}),Wn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Wn(this,"setEventListeners",()=>{this.core.heartbeat.on(bh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Se.fromMiliseconds(Date.now())-Se.fromMiliseconds(s.timestamp)>Bne&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Wn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Wn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Wn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Wn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Wn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Yg(Yg({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Wn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Wn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Lne}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${S2}${i}`,{method:"POST",body:JSON.stringify(s)})}),Wn(this,"getAppDomain",()=>Y4().url),this.logger=Pr(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Bie=Object.defineProperty,vP=Object.getOwnPropertySymbols,Lie=Object.prototype.hasOwnProperty,Mie=Object.prototype.propertyIsEnumerable,U2=(n,e,t)=>e in n?Bie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,AP=(n,e)=>{for(var t in e||(e={}))Lie.call(e,t)&&U2(n,t,e[t]);if(vP)for(var t of vP(e))Mie.call(e,t)&&U2(n,t,e[t]);return n},on=(n,e,t)=>U2(n,typeof e!="symbol"?e+"":e,t);let $ie=class d6 extends FV{constructor(e){var t;super(e),on(this,"protocol",Qk),on(this,"version",Zk),on(this,"name",_2),on(this,"relayUrl"),on(this,"projectId"),on(this,"customStoragePrefix"),on(this,"events",new Ai.EventEmitter),on(this,"logger"),on(this,"heartbeat"),on(this,"relayer"),on(this,"crypto"),on(this,"storage"),on(this,"history"),on(this,"expirer"),on(this,"pairing"),on(this,"verify"),on(this,"echoClient"),on(this,"linkModeSupportedApps"),on(this,"eventClient"),on(this,"initialized",!1),on(this,"logChunkController"),on(this,"on",(l,h)=>this.events.on(l,h)),on(this,"once",(l,h)=>this.events.once(l,h)),on(this,"off",(l,h)=>this.events.off(l,h)),on(this,"removeListener",(l,h)=>this.events.removeListener(l,h)),on(this,"dispatchEnvelope",({topic:l,message:h,sessionExists:d})=>{if(!l||!h)return;const p={topic:l,message:h,publishedAt:Date.now(),transportType:un.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:d})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(l){console.warn("Failed to copy global core",l)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Jk,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=yp({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:ine.logger,name:_2}),{logger:i,chunkLoggerController:o}=_S({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var l,h;(l=this.logChunkController)!=null&&l.downloadLogsBlobInBrowser&&((h=this.logChunkController)==null||h.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Pr(i,this.name),this.heartbeat=new $q,this.crypto=new dse(this,this.logger,e==null?void 0:e.keychain),this.history=new Aie(this,this.logger),this.expirer=new Sie(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new vV(AP(AP({},ane),e==null?void 0:e.storageOptions)),this.relayer=new $se({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new bie(this,this.logger),this.verify=new xie(this,this.logger,this.storage),this.echoClient=new Rie(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new kie(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new d6(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(bne,r),t}get context(){return Cs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(tP,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(tP)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&sne.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Fie=$ie,f6="wc",p6=2,g6="client",ZS=`${f6}@${p6}:${g6}:`,VC={name:g6,logger:"error"},CP="WALLETCONNECT_DEEPLINK_CHOICE",Hie="proposal",_P="Proposal expired",zie="session",bd=Se.SEVEN_DAYS,jie="engine",Yn={wc_sessionPropose:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Se.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Se.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1119}}},GC={min:Se.FIVE_MINUTES,max:Se.SEVEN_DAYS},pa={idle:"IDLE",active:"ACTIVE"},qie={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Vie="request",Gie=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Kie="wc",Wie="auth",Yie="authKeys",Qie="pairingTopics",Zie="requests",uv=`${Kie}@${1.5}:${Wie}:`,Nb=`${uv}:PUB_KEY`;var Xie=Object.defineProperty,Jie=Object.defineProperties,eae=Object.getOwnPropertyDescriptors,SP=Object.getOwnPropertySymbols,tae=Object.prototype.hasOwnProperty,nae=Object.prototype.propertyIsEnumerable,k2=(n,e,t)=>e in n?Xie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ln=(n,e)=>{for(var t in e||(e={}))tae.call(e,t)&&k2(n,t,e[t]);if(SP)for(var t of SP(e))nae.call(e,t)&&k2(n,t,e[t]);return n},os=(n,e)=>Jie(n,eae(e)),Ee=(n,e,t)=>k2(n,typeof e!="symbol"?e+"":e,t);class rae extends rG{constructor(e){super(e),Ee(this,"name",jie),Ee(this,"events",new AS),Ee(this,"initialized",!1),Ee(this,"requestQueue",{state:pa.idle,queue:[]}),Ee(this,"sessionRequestQueue",{state:pa.idle,queue:[]}),Ee(this,"requestQueueDelay",Se.ONE_SECOND),Ee(this,"expectedPairingMethodMap",new Map),Ee(this,"recentlyDeletedMap",new Map),Ee(this,"recentlyDeletedLimit",200),Ee(this,"relayMessageCache",[]),Ee(this,"pendingSessions",new Map),Ee(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Yn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Se.toMiliseconds(this.requestQueueDelay)))}),Ee(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=os(ln({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Wee(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:l,scopedProperties:h,relays:d}=r;let p=s,g,y=!1;try{if(p){const P=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),P}if(!p||!y){const{topic:P,uri:F}=await this.client.core.pairing.create();p=P,g=F}if(!p){const{message:P}=Ne("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(P)}const b=await this.client.core.crypto.generateKeyPair(),v=Yn.wc_sessionPropose.req.ttl||Se.FIVE_MINUTES,E=Fn(v),A=os(ln(ln({requiredNamespaces:i,optionalNamespaces:o,relays:d??[{protocol:Xk}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},l&&{sessionProperties:l}),h&&{scopedProperties:h}),{id:ma()}),S=Ht("session_connect",A.id),{reject:x,resolve:T,done:k}=ru(v,_P),R=({id:P})=>{P===A.id&&(this.client.events.off("proposal_expire",R),this.pendingSessions.delete(A.id),this.events.emit(S,{error:{message:_P,code:0}}))};return this.client.events.on("proposal_expire",R),this.events.once(S,({error:P,session:F})=>{this.client.events.off("proposal_expire",R),P?x(P):F&&T(F)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:A,throwOnFailedPublish:!0,clientRpcId:A.id}),await this.setProposal(A.id,A),{uri:g,approval:k}}),Ee(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Ee(this,"approve",async t=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=t==null?void 0:t.id)==null?void 0:r.toString(),trace:[Oi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(B){throw o.setError(Yl.no_internet_connection),B}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(B){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),o.setError(Yl.proposal_not_found),B}try{await this.isValidApprove(t)}catch(B){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Yl.session_approve_namespace_validation_failure),B}const{id:l,relayProtocol:h,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=t,b=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:v,proposer:E,requiredNamespaces:A,optionalNamespaces:S}=b;let x=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:v});x||(x=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Oi.session_approve_started,properties:{topic:v,trace:[Oi.session_approve_started,Oi.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),k=E.publicKey,R=await this.client.core.crypto.generateSharedKey(T,k),P=ln(ln(ln({relay:{protocol:h??"irn"},namespaces:d,controller:{publicKey:T,metadata:this.client.metadata},expiry:Fn(bd)},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),F=un.relay;x.addTrace(Oi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:F})}catch(B){throw x.setError(Yl.subscribe_session_topic_failure),B}x.addTrace(Oi.subscribe_session_topic_success);const $=os(ln({},P),{topic:R,requiredNamespaces:A,optionalNamespaces:S,pairingTopic:v,acknowledged:!1,self:P.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:T,transportType:un.relay});await this.client.session.set(R,$),x.addTrace(Oi.store_session);try{x.addTrace(Oi.publishing_session_settle),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:P,throwOnFailedPublish:!0}).catch(B=>{throw x==null||x.setError(Yl.session_settle_publish_failure),B}),x.addTrace(Oi.session_settle_publish_success),x.addTrace(Oi.publishing_session_approve),await this.sendResult({id:l,topic:v,result:{relay:{protocol:h??"irn"},responderPublicKey:T},throwOnFailedPublish:!0}).catch(B=>{throw x==null||x.setError(Yl.session_approve_publish_failure),B}),x.addTrace(Oi.session_approve_publish_success)}catch(B){throw this.client.logger.error(B),this.client.session.delete(R,gn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),B}return this.client.core.eventClient.deleteEvent({eventId:x.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:E.metadata}),await this.deleteProposal(l),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(R,Fn(bd)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}}),Ee(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=t;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Yn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),Ee(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:r,namespaces:s}=t,{done:i,resolve:o,reject:l}=ru(),h=ma(),d=vu().toString(),p=this.client.session.get(r).namespaces;return this.events.once(Ht("session_update",h),({error:g})=>{g?l(g):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:h,relayRpcId:d}).catch(g=>{this.client.logger.error(g),this.client.session.update(r,{namespaces:p}),l(g)}),{acknowledged:i}}),Ee(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(h){throw this.client.logger.error("extend() -> isValidExtend() failed"),h}const{topic:r}=t,s=ma(),{done:i,resolve:o,reject:l}=ru();return this.events.once(Ht("session_extend",s),({error:h})=>{h?l(h):o()}),await this.setExpiry(r,Fn(bd)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(h=>{l(h)}),{acknowledged:i}}),Ee(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:s,topic:i,expiry:o=Yn.wc_sessionRequest.req.ttl}=t,l=this.client.session.get(i);(l==null?void 0:l.transportType)===un.relay&&await this.confirmOnlineStateOrThrow();const h=ma(),d=vu().toString(),{done:p,resolve:g,reject:y}=ru(o,"Request expired. Please try again.");this.events.once(Ht("session_request",h),({error:A,result:S})=>{A?y(A):g(S)});const b="wc_sessionRequest",v=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(v)return await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:i,method:b,params:{request:os(ln({},s),{expiryTimestamp:Fn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:v}).catch(A=>y(A)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:h}),await p();const E={request:os(ln({},s),{expiryTimestamp:Fn(o)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:i,method:b,params:E,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(h,E)}).catch(S=>y(S)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:h}),A()}),new Promise(async A=>{var S;if(!((S=l.sessionConfig)!=null&&S.disableDeepLink)){const x=await jZ(this.client.core.storage,CP);await FZ({id:h,topic:i,wcDeepLink:x})}A()}),p()]).then(A=>A[2])}),Ee(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:s}=t,{id:i}=s,o=this.client.session.get(r);o.transportType===un.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);ya(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:l}):yi(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:l}),this.cleanupAfterResponse(t)}),Ee(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=t;if(this.client.session.keys.includes(r)){const s=ma(),i=vu().toString(),{done:o,resolve:l,reject:h}=ru();this.events.once(Ht("session_ping",s),({error:d})=>{d?h(d):l()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Ee(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:s,chainId:i}=t,o=vu().toString(),l=ma();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:l})}),Ee(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:gn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ne("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Ee(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>Zee(r,t)))),Ee(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ee(this,"authenticate",async(t,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?un.link_mode:un.relay;o===un.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:h="",uri:d,domain:p,nonce:g,type:y,exp:b,nbf:v,methods:E=[],expiry:A}=t,S=[...t.resources||[]],{topic:x,uri:T}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:x,uri:T}});const k=await this.client.core.crypto.generateKeyPair(),R=_b(k);if(await Promise.all([this.client.auth.authKeys.set(Nb,{responseTopic:R,publicKey:k}),this.client.auth.pairingTopics.set(R,{topic:R,pairingTopic:x})]),await this.client.core.relayer.subscribe(R,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${x}`),E.length>0){const{namespace:K}=ef(l[0]);let O=sJ(K,"request",E);Cb(S)&&(O=aJ(O,S.pop())),S.push(O)}const P=A&&A>Yn.wc_sessionAuthenticate.req.ttl?A:Yn.wc_sessionAuthenticate.req.ttl,F={authPayload:{type:y??"caip122",chains:l,statement:h,aud:d,domain:p,version:"1",nonce:g,iat:new Date().toISOString(),exp:b,nbf:v,resources:S},requester:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:Fn(P)},$={eip155:{chains:l,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:x,proposer:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:Fn(Yn.wc_sessionPropose.req.ttl),id:ma()},{done:z,resolve:j,reject:W}=ru(P,"Request expired"),ne=ma(),J=Ht("session_connect",B.id),I=Ht("session_request",ne),_=async({error:K,session:O})=>{this.events.off(I,L),K?W(K):O&&j({session:O})},L=async K=>{var O,G,Z;if(await this.deletePendingAuthRequest(ne,{message:"fulfilled",code:0}),K.error){const Te=gn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return K.error.code===Te.code?void 0:(this.events.off(J,_),W(K.error.message))}await this.deleteProposal(B.id),this.events.off(J,_);const{cacaos:re,responder:ee}=K.result,ue=[],ge=[];for(const Te of re){await fD({cacao:Te,projectId:this.client.core.projectId})||(this.client.logger.error(Te,"Signature verification failed"),W(gn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Qe}=Te,Wt=Cb(Qe.resources),Bt=[f2(Qe.iss)],mn=iE(Qe.iss);if(Wt){const hn=pD(Wt),na=gD(Wt);ue.push(...hn),Bt.push(...na)}for(const hn of Bt)ge.push(`${hn}:${mn}`)}const Ce=await this.client.core.crypto.generateSharedKey(k,ee.publicKey);let Pe;ue.length>0&&(Pe={topic:Ce,acknowledged:!0,self:{publicKey:k,metadata:this.client.metadata},peer:ee,controller:ee.publicKey,expiry:Fn(bd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:x,namespaces:$D([...new Set(ue)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(Ce,{transportType:o}),await this.client.session.set(Ce,Pe),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:ee.metadata}),Pe=this.client.session.get(Ce)),(O=this.client.metadata.redirect)!=null&&O.linkMode&&(G=ee.metadata.redirect)!=null&&G.linkMode&&(Z=ee.metadata.redirect)!=null&&Z.universal&&r&&(this.client.core.addLinkModeSupportedApp(ee.metadata.redirect.universal),this.client.session.update(Ce,{transportType:un.link_mode})),j({auths:re,session:Pe})};this.events.once(J,_),this.events.once(I,L);let q;try{if(i){const K=cl("wc_sessionAuthenticate",F,ne);this.client.core.history.set(x,K);const O=await this.client.core.crypto.encode("",K,{type:iy,encoding:Hc});q=eb(r,x,O)}else await Promise.all([this.sendRequest({topic:x,method:"wc_sessionAuthenticate",params:F,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:ne}),this.sendRequest({topic:x,method:"wc_sessionPropose",params:B,expiry:Yn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(K){throw this.events.off(J,_),this.events.off(I,L),K}return await this.setProposal(B.id,B),await this.setAuthRequest(ne,{request:os(ln({},F),{verifyContext:{}}),pairingTopic:x,transportType:o}),{uri:q??T,response:z}}),Ee(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:s}=t,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Ql.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw i.setError(Kg.no_internet_connection),A}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Kg.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const l=o.transportType||un.relay;l===un.relay&&await this.confirmOnlineStateOrThrow();const h=o.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=_b(h),g={type:Mo,receiverPublicKey:h,senderPublicKey:d},y=[],b=[];for(const A of s){if(!await fD({cacao:A,projectId:this.client.core.projectId})){i.setError(Kg.invalid_cacao);const R=gn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:R,encodeOpts:g}),new Error(R.message)}i.addTrace(Ql.cacaos_verified);const{p:S}=A,x=Cb(S.resources),T=[f2(S.iss)],k=iE(S.iss);if(x){const R=pD(x),P=gD(x);y.push(...R),T.push(...P)}for(const R of T)b.push(`${R}:${k}`)}const v=await this.client.core.crypto.generateSharedKey(d,h);i.addTrace(Ql.create_authenticated_session_topic);let E;if((y==null?void 0:y.length)>0){E={topic:v,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:h,metadata:o.requester.metadata},controller:h,expiry:Fn(bd),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:$D([...new Set(y)],[...new Set(b)]),transportType:l},i.addTrace(Ql.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:l})}catch(A){throw i.setError(Kg.subscribe_authenticated_session_topic_failure),A}i.addTrace(Ql.subscribe_authenticated_session_topic_success),await this.client.session.set(v,E),i.addTrace(Ql.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Ql.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:s,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,l)})}catch(A){throw i.setError(Kg.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:E}}),Ee(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:s}=t,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===un.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),h=_b(o),d={type:Mo,receiverPublicKey:o,senderPublicKey:l};await this.sendError({id:r,topic:h,error:s,encodeOpts:d,rpcOpts:Yn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),Ee(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:s}=t;return fk(r,s)}),Ee(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),Ee(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,l;return((o=i.peerMetadata)==null?void 0:o.url)&&((l=i.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Ee(this,"deleteSession",async t=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:l=0}=t,{self:h}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,gn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(h.publicKey)&&await this.client.core.crypto.deleteKeyPair(h.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(CP).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===s&&this.deletePendingSessionRequest(d.id,gn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=pa.idle),o&&this.client.events.emit("session_delete",{id:l,topic:s})}),Ee(this,"deleteProposal",async(t,r)=>{if(r)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Yl.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,gn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),Ee(this,"deletePendingSessionRequest",async(t,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),s&&(this.sessionRequestQueue.state=pa.idle,this.client.events.emit("session_request_expire",{id:t}))}),Ee(this,"deletePendingAuthRequest",async(t,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),s?Promise.resolve():this.client.core.expirer.del(t)])}),Ee(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),Ee(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,Fn(Yn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),Ee(this,"setAuthRequest",async(t,r)=>{const{request:s,pairingTopic:i,transportType:o=un.relay}=r;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Ee(this,"setPendingSessionRequest",async t=>{const{id:r,topic:s,params:i,verifyContext:o}=t,l=i.request.expiryTimestamp||Fn(Yn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,l),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Ee(this,"sendRequest",async t=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:l,clientRpcId:h,throwOnFailedPublish:d,appLink:p,tvf:g}=t,y=cl(s,i,h);let b;const v=!!p;try{const S=v?Hc:Gi;b=await this.client.core.crypto.encode(r,y,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),S}let E;if(Gie.includes(s)){const S=Oa(JSON.stringify(y)),x=Oa(b);E=await this.client.core.verify.register({id:x,decryptedId:S})}const A=Yn[s].req;if(A.attestation=E,o&&(A.ttl=o),l&&(A.id=l),this.client.core.history.set(r,y),v){const S=eb(p,r,b);await global.Linking.openURL(S,this.client.name)}else{const S=Yn[s].req;o&&(S.ttl=o),l&&(S.id=l),S.tvf=os(ln({},g),{correlationId:y.id}),d?(S.internal=os(ln({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,b,S)):this.client.core.relayer.publish(r,b,S).catch(x=>this.client.logger.error(x))}return y.id}),Ee(this,"sendResult",async t=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:l,appLink:h}=t,d=av(r,i);let p;const g=h&&typeof(global==null?void 0:global.Linking)<"u";try{const v=g?Hc:Gi;p=await this.client.core.crypto.encode(s,d,os(ln({},l||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),v}let y,b;try{y=await this.client.core.history.get(s,r);const v=y.request;try{b=this.getTVFParams(r,v.params,i)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E==null?void 0:E.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),v}if(g){const v=eb(h,s,p);await global.Linking.openURL(v,this.client.name)}else{const v=y.request.method,E=Yn[v].res;E.tvf=os(ln({},b),{correlationId:r}),o?(E.internal=os(ln({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,E)):this.client.core.relayer.publish(s,p,E).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(d)}),Ee(this,"sendError",async t=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:l,appLink:h}=t,d=ov(r,i);let p;const g=h&&typeof(global==null?void 0:global.Linking)<"u";try{const b=g?Hc:Gi;p=await this.client.core.crypto.encode(s,d,os(ln({},o||{}),{encoding:b}))}catch(b){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),b}let y;try{y=await this.client.core.history.get(s,r)}catch(b){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),b}if(g){const b=eb(h,s,p);await global.Linking.openURL(b,this.client.name)}else{const b=y.request.method,v=l||Yn[b].res;this.client.core.relayer.publish(s,p,v)}await this.client.core.history.resolve(d)}),Ee(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Bc(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Bc(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Ee(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),Ee(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),Ee(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===pa.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=pa.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=pa.idle}),Ee(this,"processRequest",async t=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:l}=t,h=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:h}))switch(h){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:l,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:l,transportType:o});default:return this.client.logger.info(`Unsupported request method ${h}`)}}),Ee(this,"onRelayEventResponse",async t=>{const{topic:r,payload:s,transportType:i}=t,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ee(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:s}=Ne("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Ee(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:s}=t,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ee(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=t,{params:l,id:h}=s;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d==null||d.setError(yo.proposal_listener_not_found)),this.isValidConnect(ln({},s.params));const p=l.expiryTimestamp||Fn(Yn.wc_sessionPropose.req.ttl),g=ln({id:h,pairingTopic:r,expiryTimestamp:p,attestation:i,encryptedId:o},l);await this.setProposal(h,g);const y=await this.getVerifyContext({attestationId:i,hash:Oa(JSON.stringify(s)),encryptedId:o,metadata:g.proposer.metadata});d==null||d.addTrace(ga.emit_session_proposal),this.client.events.emit("session_proposal",{id:h,params:g,verifyContext:y})}catch(d){await this.sendError({id:h,topic:r,error:d,rpcOpts:Yn.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),Ee(this,"onSessionProposeResponse",async(t,r,s)=>{const{id:i}=r;if(ya(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const l=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const h=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});const d=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const p=await this.client.core.crypto.generateSharedKey(h,d);this.pendingSessions.set(i,{sessionTopic:p,pairingTopic:t,proposalId:i,publicKey:h});const g=await this.client.core.relayer.subscribe(p,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:t})}else if(yi(r)){await this.deleteProposal(i);const o=Ht("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Ee(this,"onSessionSettleRequest",async(t,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:l,expiry:h,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=r.params,b=[...this.pendingSessions.values()].find(A=>A.sessionTopic===t);if(!b)return this.client.logger.error(`Pending session not found for topic ${t}`);const v=this.client.proposal.get(b.proposalId),E=os(ln(ln(ln({topic:t,relay:o,expiry:h,namespaces:d,acknowledged:!0,pairingTopic:b.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:l.publicKey,self:{publicKey:b.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),{transportType:un.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:b.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(Ht("session_connect",b.proposalId),{session:E}),this.pendingSessions.delete(b.proposalId),this.deleteProposal(b.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:t,result:!0})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),Ee(this,"onSessionSettleResponse",async(t,r)=>{const{id:s}=r;ya(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ht("session_approve",s),{})):yi(r)&&(await this.client.session.delete(t,gn("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",s),{error:r.error}))}),Ee(this,"onSessionUpdateRequest",async(t,r)=>{const{params:s,id:i}=r;try{const o=`${t}_session_update`,l=Vg.get(o);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:gn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ln({topic:t},s));try{Vg.set(o,i),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:t,result:!0})}catch(h){throw Vg.delete(o),h}this.client.events.emit("session_update",{id:i,topic:t,params:s})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),Ee(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),Ee(this,"onSessionUpdateResponse",(t,r)=>{const{id:s}=r,i=Ht("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ya(r)?this.events.emit(Ht("session_update",s),{}):yi(r)&&this.events.emit(Ht("session_update",s),{error:r.error})}),Ee(this,"onSessionExtendRequest",async(t,r)=>{const{id:s}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Fn(bd)),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),Ee(this,"onSessionExtendResponse",(t,r)=>{const{id:s}=r,i=Ht("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ya(r)?this.events.emit(Ht("session_extend",s),{}):yi(r)&&this.events.emit(Ht("session_extend",s),{error:r.error})}),Ee(this,"onSessionPingRequest",async(t,r)=>{const{id:s}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),Ee(this,"onSessionPingResponse",(t,r)=>{const{id:s}=r,i=Ht("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ya(r)?this.events.emit(Ht("session_ping",s),{}):yi(r)&&this.events.emit(Ht("session_ping",s),{error:r.error})},500)}),Ee(this,"onSessionDeleteRequest",async(t,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Jn.publish,async()=>{i(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:gn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Ee(this,"onSessionRequest",async t=>{var r,s,i;const{topic:o,payload:l,attestation:h,encryptedId:d,transportType:p}=t,{id:g,params:y}=l;try{await this.isValidRequest(ln({topic:o},y));const b=this.client.session.get(o),v=await this.getVerifyContext({attestationId:h,hash:Oa(JSON.stringify(cl("wc_sessionRequest",y,g))),encryptedId:d,metadata:b.peer.metadata,transportType:p}),E={id:g,topic:o,params:y,verifyContext:v};await this.setPendingSessionRequest(E),p===un.link_mode&&(r=b.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=b.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(b){await this.sendError({id:g,topic:o,error:b}),this.client.logger.error(b)}}),Ee(this,"onSessionRequestResponse",(t,r)=>{const{id:s}=r,i=Ht("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ya(r)?this.events.emit(Ht("session_request",s),{result:r.result}):yi(r)&&this.events.emit(Ht("session_request",s),{error:r.error})}),Ee(this,"onSessionEventRequest",async(t,r)=>{const{id:s,params:i}=r;try{const o=`${t}_session_event_${i.event.name}`,l=Vg.get(o);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ln({topic:t},i)),this.client.events.emit("session_event",{id:s,topic:t,params:i}),Vg.set(o,s)}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),Ee(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),ya(r)?this.events.emit(Ht("session_request",s),{result:r.result}):yi(r)&&this.events.emit(Ht("session_request",s),{error:r.error})}),Ee(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:l,transportType:h}=t;try{const{requester:d,authPayload:p,expiryTimestamp:g}=i.params,y=await this.getVerifyContext({attestationId:o,hash:Oa(JSON.stringify(i)),encryptedId:l,metadata:d.metadata,transportType:h}),b={requester:d,pairingTopic:s,id:i.id,authPayload:p,verifyContext:y,expiryTimestamp:g};await this.setAuthRequest(i.id,{request:b,pairingTopic:s,transportType:h}),h===un.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:y})}catch(d){this.client.logger.error(d);const p=i.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(i.params.requester.metadata,h),b={type:Mo,receiverPublicKey:p,senderPublicKey:g};await this.sendError({id:i.id,topic:s,error:d,encodeOpts:b,rpcOpts:Yn.wc_sessionAuthenticate.autoReject,appLink:y})}}),Ee(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),Ee(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=pa.idle,this.processSessionRequestQueue()},Se.toMiliseconds(this.requestQueueDelay))}),Ee(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===t&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,l=Ht("session_request",o);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(Ht("session_request",i.request.id),{error:r})})}),Ee(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===pa.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=pa.active,this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),Ee(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),Ee(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:cl("wc_sessionPropose",os(ln({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),Ee(this,"isValidConnect",async t=>{if(!us(t)){const{message:d}=Ne("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:l,relays:h}=t;if(fr(r)||await this.isValidPairingTopic(r),!lte(h)){const{message:d}=Ne("MISSING_OR_INVALID",`connect() relays: ${h}`);throw new Error(d)}if(!fr(s)&&hl(s)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(s,"requiredNamespaces")}if(!fr(i)&&hl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),fr(o)||this.validateSessionProps(o,"sessionProperties"),!fr(l)){this.validateSessionProps(l,"scopedProperties");const d=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(l).every(p=>d.includes(p)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),Ee(this,"validateNamespaces",(t,r)=>{const s=cte(t,"connect()",r);if(s)throw new Error(s.message)}),Ee(this,"isValidApprove",async t=>{if(!us(t))throw new Error(Ne("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:l}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const h=this.client.proposal.get(r),d=MC(s,"approve()");if(d)throw new Error(d.message);const p=zD(h.requiredNamespaces,s,"approve()");if(p)throw new Error(p.message);if(!Pn(i,!0)){const{message:g}=Ne("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(g)}if(fr(o)||this.validateSessionProps(o,"sessionProperties"),!fr(l)){this.validateSessionProps(l,"scopedProperties");const g=new Set(Object.keys(s));if(!Object.keys(l).every(y=>g.has(y)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),Ee(this,"isValidReject",async t=>{if(!us(t)){const{message:i}=Ne("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(i)}const{id:r,reason:s}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!hte(s)){const{message:i}=Ne("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Ee(this,"isValidSessionSettleRequest",t=>{if(!us(t)){const{message:d}=Ne("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(d)}const{relay:r,controller:s,namespaces:i,expiry:o}=t;if(!qk(r)){const{message:d}=Ne("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const l=nte(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const h=MC(i,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(Bc(o)){const{message:d}=Ne("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),Ee(this,"isValidUpdate",async t=>{if(!us(t)){const{message:h}=Ne("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(h)}const{topic:r,namespaces:s}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=MC(s,"update()");if(o)throw new Error(o.message);const l=zD(i.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)}),Ee(this,"isValidExtend",async t=>{if(!us(t)){const{message:s}=Ne("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Ee(this,"isValidRequest",async t=>{if(!us(t)){const{message:h}=Ne("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(h)}const{topic:r,request:s,chainId:i,expiry:o}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:l}=this.client.session.get(r);if(!HD(l,i)){const{message:h}=Ne("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(h)}if(!dte(s)){const{message:h}=Ne("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(h)}if(!gte(l,i,s.method)){const{message:h}=Ne("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(h)}if(o&&!bte(o,GC)){const{message:h}=Ne("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${GC.min} and ${GC.max}`);throw new Error(h)}}),Ee(this,"isValidRespond",async t=>{var r;if(!us(t)){const{message:o}=Ne("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:s,response:i}=t;try{await this.isValidSessionTopic(s)}catch(o){throw(r=t==null?void 0:t.response)!=null&&r.id&&this.cleanupAfterResponse(t),o}if(!fte(i)){const{message:o}=Ne("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Ee(this,"isValidPing",async t=>{if(!us(t)){const{message:s}=Ne("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),Ee(this,"isValidEmit",async t=>{if(!us(t)){const{message:l}=Ne("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:r,event:s,chainId:i}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!HD(o,i)){const{message:l}=Ne("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(l)}if(!pte(s)){const{message:l}=Ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!mte(o,i,s.name)){const{message:l}=Ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}}),Ee(this,"isValidDisconnect",async t=>{if(!us(t)){const{message:s}=Ne("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),Ee(this,"isValidAuthenticate",t=>{const{chains:r,uri:s,domain:i,nonce:o}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Pn(s,!1))throw new Error("uri is required parameter");if(!Pn(i,!1))throw new Error("domain is required parameter");if(!Pn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(h=>ef(h).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=ef(r[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ee(this,"getVerifyContext",async t=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:l}=t,h={verified:{verifyUrl:o.verifyUrl||vm,validation:"UNKNOWN",origin:o.url||""}};try{if(l===un.link_mode){const p=this.getAppLinkIfEnabled(o,l);return h.verified.validation=p&&new URL(p).origin===new URL(o.url).origin?"VALID":"INVALID",h}const d=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});d&&(h.verified.origin=d.origin,h.verified.isScam=d.isScam,h.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(h)}`),h}),Ee(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((s,i)=>{if(s==null){const{message:o}=Ne("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(t)[i]}`);throw new Error(o)}})}),Ee(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),Ee(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Ee(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:s}=Ne("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(s)}}),Ee(this,"isLinkModeEnabled",(t,r)=>{var s,i,o,l,h,d,p,g,y;return!t||r!==un.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((l=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:l.universal)!==void 0&&((d=(h=this.client.metadata)==null?void 0:h.redirect)==null?void 0:d.universal)!==""&&((p=t==null?void 0:t.redirect)==null?void 0:p.universal)!==void 0&&((g=t==null?void 0:t.redirect)==null?void 0:g.universal)!==""&&((y=t==null?void 0:t.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Ee(this,"getAppLinkIfEnabled",(t,r)=>{var s;return this.isLinkModeEnabled(t,r)?(s=t==null?void 0:t.redirect)==null?void 0:s.universal:void 0}),Ee(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=tD(t,"topic")||"",s=decodeURIComponent(tD(t,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:un.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Ee(this,"registerLinkModeListeners",async()=>{var t;if(kS()||_l()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Ee(this,"getTVFParams",(t,r,s)=>{var i,o,l;if(!((i=r.request)!=null&&i.method))return{};const h={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const d=this.extractTxHashesFromResult(r.request,s);h.txHashes=d,h.contractAddresses=this.isValidContractData(r.request.params)?[(l=(o=r.request.params)==null?void 0:o[0])==null?void 0:l.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return h}),Ee(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const s=(t==null?void 0:t.data)||((r=t==null?void 0:t[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Ee(this,"extractTxHashesFromResult",(t,r)=>{var s;try{if(!r)return[];const i=t.method,o=qie[i];if(i==="sui_signTransaction")return[zX(r.transactionBytes)];if(i==="near_signTransaction")return[lD(r)];if(i==="near_signTransactions")return r.map(h=>lD(h));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Ute({transaction:t.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return $o(r)?r.map(h=>uD(h)):[uD(r)];if(i==="cosmos_signDirect")return[qX(r)];if(typeof r=="string")return[r];const l=r[o.key];if($o(l))return i==="solana_signAllTransactions"?l.map(h=>HX(h)):l;if(typeof l=="string")return[l]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(t))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Jn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Nb)?this.client.auth.authKeys.get(Nb):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:i===un.link_mode?Hc:Gi});QS(l)?(this.client.core.history.set(t,l),await this.onRelayEventRequest({topic:t,payload:l,attestation:s,transportType:i,encryptedId:Oa(r)})):cv(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:t,payload:l,transportType:i}),this.client.core.history.delete(t,l.id)):await this.onRelayEventUnknownPayload({topic:t,payload:l,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(li.expired,async e=>{const{topic:t,id:r}=X4(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ne("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ne("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ou.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ou.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Pn(e,!1)){const{message:t}=Ne("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Bc(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ne("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Pn(e,!1)){const{message:t}=Ne("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ne("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Bc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ne("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ne("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Pn(e,!1)){const{message:t}=Ne("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Ne("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!ute(e)){const{message:t}=Ne("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ne("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Bc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ne("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class sae extends vh{constructor(e,t){super(e,t,Hie,ZS),this.core=e,this.logger=t}}let iae=class extends vh{constructor(e,t){super(e,t,zie,ZS),this.core=e,this.logger=t}};class aae extends vh{constructor(e,t){super(e,t,Vie,ZS,r=>r.id),this.core=e,this.logger=t}}class oae extends vh{constructor(e,t){super(e,t,Yie,uv,()=>Nb),this.core=e,this.logger=t}}class cae extends vh{constructor(e,t){super(e,t,Qie,uv),this.core=e,this.logger=t}}class lae extends vh{constructor(e,t){super(e,t,Zie,uv,r=>r.id),this.core=e,this.logger=t}}var uae=Object.defineProperty,hae=(n,e,t)=>e in n?uae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,KC=(n,e,t)=>hae(n,typeof e!="symbol"?e+"":e,t);class dae{constructor(e,t){this.core=e,this.logger=t,KC(this,"authKeys"),KC(this,"pairingTopics"),KC(this,"requests"),this.authKeys=new oae(this.core,this.logger),this.pairingTopics=new cae(this.core,this.logger),this.requests=new lae(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var fae=Object.defineProperty,pae=(n,e,t)=>e in n?fae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Et=(n,e,t)=>pae(n,typeof e!="symbol"?e+"":e,t);let gae=class m6 extends nG{constructor(e){super(e),Et(this,"protocol",f6),Et(this,"version",p6),Et(this,"name",VC.name),Et(this,"metadata"),Et(this,"core"),Et(this,"logger"),Et(this,"events",new Ai.EventEmitter),Et(this,"engine"),Et(this,"session"),Et(this,"proposal"),Et(this,"pendingRequest"),Et(this,"auth"),Et(this,"signConfig"),Et(this,"on",(r,s)=>this.events.on(r,s)),Et(this,"once",(r,s)=>this.events.once(r,s)),Et(this,"off",(r,s)=>this.events.off(r,s)),Et(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Et(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Et(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Et(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||VC.name,this.metadata=UZ(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:X0(yp({level:(e==null?void 0:e.logger)||VC.logger}));this.core=(e==null?void 0:e.core)||new Fie(e),this.logger=Pr(t,this.name),this.session=new iae(this.core,this.logger),this.proposal=new sae(this.core,this.logger),this.pendingRequest=new aae(this.core,this.logger),this.engine=new rae(this),this.auth=new dae(this.core,this.logger)}static async init(e){const t=new m6(e);return await t.initialize(),t}get context(){return Cs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Se.toMiliseconds(Se.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var nb={exports:{}},NP;function mae(){return NP||(NP=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof xa<"u"&&xa,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof xa<"u"&&xa||{},h={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d(I){return I&&DataView.prototype.isPrototypeOf(I)}if(h.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(I){return I&&p.indexOf(Object.prototype.toString.call(I))>-1};function y(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function b(I){return typeof I!="string"&&(I=String(I)),I}function v(I){var _={next:function(){var L=I.shift();return{done:L===void 0,value:L}}};return h.iterable&&(_[Symbol.iterator]=function(){return _}),_}function E(I){this.map={},I instanceof E?I.forEach(function(_,L){this.append(L,_)},this):Array.isArray(I)?I.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(_){this.append(_,I[_])},this)}E.prototype.append=function(I,_){I=y(I),_=b(_);var L=this.map[I];this.map[I]=L?L+", "+_:_},E.prototype.delete=function(I){delete this.map[y(I)]},E.prototype.get=function(I){return I=y(I),this.has(I)?this.map[I]:null},E.prototype.has=function(I){return this.map.hasOwnProperty(y(I))},E.prototype.set=function(I,_){this.map[y(I)]=b(_)},E.prototype.forEach=function(I,_){for(var L in this.map)this.map.hasOwnProperty(L)&&I.call(_,this.map[L],L,this)},E.prototype.keys=function(){var I=[];return this.forEach(function(_,L){I.push(L)}),v(I)},E.prototype.values=function(){var I=[];return this.forEach(function(_){I.push(_)}),v(I)},E.prototype.entries=function(){var I=[];return this.forEach(function(_,L){I.push([L,_])}),v(I)},h.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function A(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function S(I){return new Promise(function(_,L){I.onload=function(){_(I.result)},I.onerror=function(){L(I.error)}})}function x(I){var _=new FileReader,L=S(_);return _.readAsArrayBuffer(I),L}function T(I){var _=new FileReader,L=S(_),q=/charset=([A-Za-z0-9_-]+)/.exec(I.type),K=q?q[1]:"utf-8";return _.readAsText(I,K),L}function k(I){for(var _=new Uint8Array(I),L=new Array(_.length),q=0;q<_.length;q++)L[q]=String.fromCharCode(_[q]);return L.join("")}function R(I){if(I.slice)return I.slice(0);var _=new Uint8Array(I.byteLength);return _.set(new Uint8Array(I)),_.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:h.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:h.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():h.arrayBuffer&&h.blob&&d(I)?(this._bodyArrayBuffer=R(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||g(I))?this._bodyArrayBuffer=R(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var I=A(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=A(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(h.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=A(this);if(I)return I;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(I){var _=I.toUpperCase();return F.indexOf(_)>-1?_:I}function B(I,_){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var L=_.body;if(I instanceof B){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,_.headers||(this.headers=new E(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!L&&I._bodyInit!=null&&(L=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new E(_.headers)),this.method=$(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in l){var O=new AbortController;return O.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var q=/([?&])_=[^&]*/;if(q.test(this.url))this.url=this.url.replace(q,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function z(I){var _=new FormData;return I.trim().split("&").forEach(function(L){if(L){var q=L.split("="),K=q.shift().replace(/\+/g," "),O=q.join("=").replace(/\+/g," ");_.append(decodeURIComponent(K),decodeURIComponent(O))}}),_}function j(I){var _=new E,L=I.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(q){return q.indexOf(`
`)===0?q.substr(1,q.length):q}).forEach(function(q){var K=q.split(":"),O=K.shift().trim();if(O){var G=K.join(":").trim();try{_.append(O,G)}catch(Z){console.warn("Response "+Z.message)}}}),_}P.call(B.prototype);function W(I,_){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new E(_.headers),this.url=_.url||"",this._initBody(I)}P.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},W.error=function(){var I=new W(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var ne=[301,302,303,307,308];W.redirect=function(I,_){if(ne.indexOf(_)===-1)throw new RangeError("Invalid status code");return new W(null,{status:_,headers:{location:I}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,L){this.message=_,this.name=L;var q=Error(_);this.stack=q.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function J(I,_){return new Promise(function(L,q){var K=new B(I,_);if(K.signal&&K.signal.aborted)return q(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function G(){O.abort()}O.onload=function(){var ee={statusText:O.statusText,headers:j(O.getAllResponseHeaders()||"")};K.url.indexOf("file://")===0&&(O.status<200||O.status>599)?ee.status=200:ee.status=O.status,ee.url="responseURL"in O?O.responseURL:ee.headers.get("X-Request-URL");var ue="response"in O?O.response:O.responseText;setTimeout(function(){L(new W(ue,ee))},0)},O.onerror=function(){setTimeout(function(){q(new TypeError("Network request failed"))},0)},O.ontimeout=function(){setTimeout(function(){q(new TypeError("Network request timed out"))},0)},O.onabort=function(){setTimeout(function(){q(new o.DOMException("Aborted","AbortError"))},0)};function Z(ee){try{return ee===""&&l.location.href?l.location.href:ee}catch{return ee}}if(O.open(K.method,Z(K.url),!0),K.credentials==="include"?O.withCredentials=!0:K.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&(h.blob?O.responseType="blob":h.arrayBuffer&&(O.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof E||l.Headers&&_.headers instanceof l.Headers)){var re=[];Object.getOwnPropertyNames(_.headers).forEach(function(ee){re.push(y(ee)),O.setRequestHeader(ee,b(_.headers[ee]))}),K.headers.forEach(function(ee,ue){re.indexOf(ue)===-1&&O.setRequestHeader(ue,ee)})}else K.headers.forEach(function(ee,ue){O.setRequestHeader(ue,ee)});K.signal&&(K.signal.addEventListener("abort",G),O.onreadystatechange=function(){O.readyState===4&&K.signal.removeEventListener("abort",G)}),O.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return J.polyfill=!0,l.fetch||(l.fetch=J,l.Headers=E,l.Request=B,l.Response=W),o.Headers=E,o.Request=B,o.Response=W,o.fetch=J,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=t.fetch?t:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e}(nb,nb.exports)),nb.exports}var yae=mae();const TP=$0(yae);var wae=Object.defineProperty,bae=Object.defineProperties,Eae=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,vae=Object.prototype.hasOwnProperty,Aae=Object.prototype.propertyIsEnumerable,IP=(n,e,t)=>e in n?wae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,OP=(n,e)=>{for(var t in e||(e={}))vae.call(e,t)&&IP(n,t,e[t]);if(xP)for(var t of xP(e))Aae.call(e,t)&&IP(n,t,e[t]);return n},RP=(n,e)=>bae(n,Eae(e));const Cae={Accept:"application/json","Content-Type":"application/json"},_ae="POST",DP={headers:Cae,method:_ae},PP=10;let ta=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Ai.EventEmitter,this.isAvailable=!1,this.registering=!1,!YD(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=qo(e),r=await(await TP(this.url,RP(OP({},DP),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!YD(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=qo({id:1,jsonrpc:"2.0",method:"test",params:[]});await TP(e,RP(OP({},DP),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?sh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),i=ov(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return Kk(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>PP&&this.events.setMaxListeners(PP)}};const UP="error",Sae="wss://relay.walletconnect.org",Nae="wc",Tae="universal_provider",rb=`${Nae}@2:${Tae}:`,y6="https://rpc.walletconnect.org/v1/",Bd="generic",xae=`${y6}bundler`,_i={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function XS(n){return n==null||typeof n!="object"&&typeof n!="function"}function w6(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function b6(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Iae="[object RegExp]",E6="[object String]",v6="[object Number]",A6="[object Boolean]",C6="[object Arguments]",Oae="[object Symbol]",Rae="[object Date]",Dae="[object Map]",Pae="[object Set]",Uae="[object Array]",kae="[object ArrayBuffer]",Bae="[object Object]",Lae="[object DataView]",Mae="[object Uint8Array]",$ae="[object Uint8ClampedArray]",Fae="[object Uint16Array]",Hae="[object Uint32Array]",zae="[object Int8Array]",jae="[object Int16Array]",qae="[object Int32Array]",Vae="[object Float32Array]",Gae="[object Float64Array]";function JS(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Kae(n,e){return qd(n,void 0,n,new Map,e)}function qd(n,e,t,r=new Map,s=void 0){const i=s==null?void 0:s(n,e,t,r);if(i!=null)return i;if(XS(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let l=0;l<n.length;l++)o[l]=qd(n[l],l,t,r,s);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[l,h]of n)o.set(l,qd(h,l,t,r,s));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const l of n)o.add(qd(l,void 0,t,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(JS(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let l=0;l<n.length;l++)o[l]=qd(n[l],l,t,r,s);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),cu(o,n,t,r,s),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),cu(o,n,t,r,s),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),cu(o,n,t,r,s),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,cu(o,n,t,r,s),o}if(typeof n=="object"&&Wae(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),cu(o,n,t,r,s),o}return n}function cu(n,e,t=n,r,s){const i=[...Object.keys(e),...w6(e)];for(let o=0;o<i.length;o++){const l=i[o],h=Object.getOwnPropertyDescriptor(n,l);(h==null||h.writable)&&(n[l]=qd(e[l],l,t,r,s))}}function Wae(n){switch(b6(n)){case C6:case Uae:case kae:case Lae:case A6:case Rae:case Vae:case Gae:case zae:case jae:case qae:case Dae:case v6:case Bae:case Iae:case Pae:case E6:case Oae:case Mae:case $ae:case Fae:case Hae:return!0;default:return!1}}function Yae(n,e){return Kae(n,(t,r,s,i)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case v6:case E6:case A6:{const o=new n.constructor(n==null?void 0:n.valueOf());return cu(o,n),o}case C6:{const o={};return cu(o,n),o.length=n.length,o[Symbol.iterator]=n[Symbol.iterator],o}default:return}})}function kP(n){return Yae(n)}function BP(n){return n!==null&&typeof n=="object"&&b6(n)==="[object Arguments]"}function LP(n){return typeof n=="object"&&n!==null}function Qae(){}function Zae(n){return JS(n)}function Xae(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function Jae(n){if(XS(n))return n;if(Array.isArray(n)||JS(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function eoe(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let s=n;for(let i=0;i<t.length;i++){const o=t[i];s=B2(s,o,r,new Map)}return s}function B2(n,e,t,r){if(XS(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return Jae(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...w6(e)];for(let i=0;i<s.length;i++){const o=s[i];let l=e[o],h=n[o];if(BP(l)&&(l={...l}),BP(h)&&(h={...h}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=kP(l)),Array.isArray(l))if(typeof h=="object"&&h!=null){const p=[],g=Reflect.ownKeys(h);for(let y=0;y<g.length;y++){const b=g[y];p[b]=h[b]}h=p}else h=[];const d=t(h,l,o,n,e,r);d!=null?n[o]=d:Array.isArray(l)||LP(h)&&LP(l)?n[o]=B2(h,l,t,r):h==null&&Xae(l)?n[o]=B2({},l,t,r):h==null&&Zae(l)?n[o]=kP(l):(h===void 0||l!==void 0)&&(n[o]=l)}return n}function toe(n,...e){return eoe(n,...e,Qae)}var noe=Object.defineProperty,roe=Object.defineProperties,soe=Object.getOwnPropertyDescriptors,MP=Object.getOwnPropertySymbols,ioe=Object.prototype.hasOwnProperty,aoe=Object.prototype.propertyIsEnumerable,$P=(n,e,t)=>e in n?noe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sb=(n,e)=>{for(var t in e||(e={}))ioe.call(e,t)&&$P(n,t,e[t]);if(MP)for(var t of MP(e))aoe.call(e,t)&&$P(n,t,e[t]);return n},ooe=(n,e)=>roe(n,soe(e));function Vs(n,e,t){var r;const s=ef(n);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${y6}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function Ah(n){return n.includes(":")?n.split(":")[1]:n}function _6(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function coe(n,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(n));if(!t.length)return[];const r=[];return t.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function ib(n={},e={}){const t=FP(n),r=FP(e);return toe(t,r)}function FP(n){var e,t,r,s,i;const o={};if(!hl(n))return o;for(const[l,h]of Object.entries(n)){const d=iv(l)?[l]:h.chains,p=h.methods||[],g=h.events||[],y=h.rpcMap||{},b=jd(l);o[b]=ooe(sb(sb({},o[b]),h),{chains:$a(d,(e=o[b])==null?void 0:e.chains),methods:$a(p,(t=o[b])==null?void 0:t.methods),events:$a(g,(r=o[b])==null?void 0:r.events)}),(hl(y)||hl(((s=o[b])==null?void 0:s.rpcMap)||{}))&&(o[b].rpcMap=sb(sb({},y),(i=o[b])==null?void 0:i.rpcMap))}return o}function HP(n){return n.includes(":")?n.split(":")[2]:n}function zP(n){const e={};for(const[t,r]of Object.entries(n)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],l=iv(t)?[t]:r.chains?r.chains:_6(r.accounts);e[t]={chains:l,methods:s,events:i,accounts:o}}return e}function WC(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}const S6={},kt=n=>S6[n],YC=(n,e)=>{S6[n]=e};var loe=Object.defineProperty,uoe=(n,e,t)=>e in n?loe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ed=(n,e,t)=>uoe(n,typeof e!="symbol"?e+"":e,t);class hoe{constructor(e){Ed(this,"name","polkadot"),Ed(this,"client"),Ed(this,"httpProviders"),Ed(this,"events"),Ed(this,"namespace"),Ed(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=Ah(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var doe=Object.defineProperty,foe=Object.defineProperties,poe=Object.getOwnPropertyDescriptors,jP=Object.getOwnPropertySymbols,goe=Object.prototype.hasOwnProperty,moe=Object.prototype.propertyIsEnumerable,L2=(n,e,t)=>e in n?doe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qP=(n,e)=>{for(var t in e||(e={}))goe.call(e,t)&&L2(n,t,e[t]);if(jP)for(var t of jP(e))moe.call(e,t)&&L2(n,t,e[t]);return n},VP=(n,e)=>foe(n,poe(e)),vd=(n,e,t)=>L2(n,typeof e!="symbol"?e+"":e,t);class yoe{constructor(e){vd(this,"name","eip155"),vd(this,"client"),vd(this,"chainId"),vd(this,"namespace"),vd(this,"httpProviders"),vd(this,"events"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||Vs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=parseInt(Ah(t));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,s,i,o;const l=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],h=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],d=`${l}${h.join(",")}`;if(!l)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const p=this.client.session.get(e.topic),g=((o=p==null?void 0:p.sessionProperties)==null?void 0:o.capabilities)||{};if(g!=null&&g[d])return g==null?void 0:g[d];const y=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:VP(qP({},p.sessionProperties||{}),{capabilities:VP(qP({},g||{}),{[d]:y})})})}catch(b){console.warn("Failed to update session with capabilities",b)}return y}async getCallStatus(e){var t,r;const s=this.client.session.get(e.topic),i=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(i){const l=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(l,e)}catch(h){console.warn("Failed to fetch call status from bundler",h,l)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(cl("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${xae}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var woe=Object.defineProperty,boe=(n,e,t)=>e in n?woe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ad=(n,e,t)=>boe(n,typeof e!="symbol"?e+"":e,t);class Eoe{constructor(e){Ad(this,"name","solana"),Ad(this,"client"),Ad(this,"httpProviders"),Ad(this,"events"),Ad(this,"namespace"),Ad(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=Ah(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var voe=Object.defineProperty,Aoe=(n,e,t)=>e in n?voe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cd=(n,e,t)=>Aoe(n,typeof e!="symbol"?e+"":e,t);class Coe{constructor(e){Cd(this,"name","cosmos"),Cd(this,"client"),Cd(this,"httpProviders"),Cd(this,"events"),Cd(this,"namespace"),Cd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=Ah(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var _oe=Object.defineProperty,Soe=(n,e,t)=>e in n?_oe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_d=(n,e,t)=>Soe(n,typeof e!="symbol"?e+"":e,t);class Noe{constructor(e){_d(this,"name","algorand"),_d(this,"client"),_d(this,"httpProviders"),_d(this,"events"),_d(this,"namespace"),_d(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Vs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ci(new ta(r,kt("disableProviderPing")))}}var Toe=Object.defineProperty,xoe=(n,e,t)=>e in n?Toe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Sd=(n,e,t)=>xoe(n,typeof e!="symbol"?e+"":e,t);class Ioe{constructor(e){Sd(this,"name","cip34"),Sd(this,"client"),Sd(this,"httpProviders"),Sd(this,"events"),Sd(this,"namespace"),Sd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t),s=Ah(t);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var Ooe=Object.defineProperty,Roe=(n,e,t)=>e in n?Ooe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nd=(n,e,t)=>Roe(n,typeof e!="symbol"?e+"":e,t);class Doe{constructor(e){Nd(this,"name","elrond"),Nd(this,"client"),Nd(this,"httpProviders"),Nd(this,"events"),Nd(this,"namespace"),Nd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=Ah(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var Poe=Object.defineProperty,Uoe=(n,e,t)=>e in n?Poe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Td=(n,e,t)=>Uoe(n,typeof e!="symbol"?e+"":e,t);class koe{constructor(e){Td(this,"name","multiversx"),Td(this,"client"),Td(this,"httpProviders"),Td(this,"events"),Td(this,"namespace"),Td(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=Ah(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var Boe=Object.defineProperty,Loe=(n,e,t)=>e in n?Boe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xd=(n,e,t)=>Loe(n,typeof e!="symbol"?e+"":e,t);class Moe{constructor(e){xd(this,"name","near"),xd(this,"client"),xd(this,"httpProviders"),xd(this,"events"),xd(this,"namespace"),xd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Vs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace);return typeof r>"u"?void 0:new Ci(new ta(r,kt("disableProviderPing")))}}var $oe=Object.defineProperty,Foe=(n,e,t)=>e in n?$oe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Id=(n,e,t)=>Foe(n,typeof e!="symbol"?e+"":e,t);class Hoe{constructor(e){Id(this,"name","tezos"),Id(this,"client"),Id(this,"httpProviders"),Id(this,"events"),Id(this,"namespace"),Id(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Vs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace);return typeof r>"u"?void 0:new Ci(new ta(r))}}var zoe=Object.defineProperty,joe=(n,e,t)=>e in n?zoe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Od=(n,e,t)=>joe(n,typeof e!="symbol"?e+"":e,t);class qoe{constructor(e){Od(this,"name",Bd),Od(this,"client"),Od(this,"httpProviders"),Od(this,"events"),Od(this,"namespace"),Od(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const i=ef(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Vs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ci(new ta(r,kt("disableProviderPing")))}}var Voe=Object.defineProperty,Goe=Object.defineProperties,Koe=Object.getOwnPropertyDescriptors,GP=Object.getOwnPropertySymbols,Woe=Object.prototype.hasOwnProperty,Yoe=Object.prototype.propertyIsEnumerable,M2=(n,e,t)=>e in n?Voe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ab=(n,e)=>{for(var t in e||(e={}))Woe.call(e,t)&&M2(n,t,e[t]);if(GP)for(var t of GP(e))Yoe.call(e,t)&&M2(n,t,e[t]);return n},QC=(n,e)=>Goe(n,Koe(e)),oi=(n,e,t)=>M2(n,typeof e!="symbol"?e+"":e,t);let Qoe=class N6{constructor(e){oi(this,"client"),oi(this,"namespaces"),oi(this,"optionalNamespaces"),oi(this,"sessionProperties"),oi(this,"scopedProperties"),oi(this,"events",new AS),oi(this,"rpcProviders",{}),oi(this,"session"),oi(this,"providerOpts"),oi(this,"logger"),oi(this,"uri"),oi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:X0(yp({level:(e==null?void 0:e.logger)||UP})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new N6(e);return await t.initialize(),t}async request(e,t,r){const[s,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:ab({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>t(null,av(i,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:gn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=zP(this.session.namespaces);this.namespaces=ib(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await r();this.session=s;const i=zP(s.namespaces);return this.namespaces=ib(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Bd?i.setDefaultChain(`${r}:${s}`,t):i.setDefaultChain(s,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if($o(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await gae.init({core:this.providerOpts.core,logger:this.providerOpts.logger||UP,relayUrl:this.providerOpts.relayUrl||Sae,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>jd(t)))];YC("client",this.client),YC("events",this.events),YC("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=coe(t,this.session),s=_6(r),i=ib(this.namespaces,this.optionalNamespaces),o=QC(ab({},i[t]),{accounts:r,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new yoe({namespace:o});break;case"algorand":this.rpcProviders[t]=new Noe({namespace:o});break;case"solana":this.rpcProviders[t]=new Eoe({namespace:o});break;case"cosmos":this.rpcProviders[t]=new Coe({namespace:o});break;case"polkadot":this.rpcProviders[t]=new hoe({namespace:o});break;case"cip34":this.rpcProviders[t]=new Ioe({namespace:o});break;case"elrond":this.rpcProviders[t]=new Doe({namespace:o});break;case"multiversx":this.rpcProviders[t]=new koe({namespace:o});break;case"near":this.rpcProviders[t]=new Moe({namespace:o});break;case"tezos":this.rpcProviders[t]=new Hoe({namespace:o});break;default:this.rpcProviders[Bd]?this.rpcProviders[Bd].updateNamespace(o):this.rpcProviders[Bd]=new qoe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:s}=e;if(s!==((t=this.session)==null?void 0:t.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&$o(o)&&this.events.emit("accountsChanged",o.map(HP))}else if(i.name==="chainChanged"){const o=r.chainId,l=r.event.data,h=jd(o),d=WC(o)!==WC(l)?`${h}:${WC(l)}`:o;this.onChainChanged(d)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=t,o=(s=this.client)==null?void 0:s.session.get(e);this.session=QC(ab({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",QC(ab({},gn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(_i.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Bd]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=ib(t,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[t,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>jd(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const s=jd(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var s,i;try{if(t===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const l=o.filter(h=>h.includes(`${r}:`)).map(HP);if(!$o(l))return;this.events.emit("accountsChanged",l)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,s={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${rb}/${e}${s}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${rb}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${rb}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(rb)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}},Zl=null;const Hs={getSIWX(){return ye.state.siwx},async initializeIfEnabled(){var i;const n=ye.state.siwx,e=M.getActiveCaipAddress();if(!(n&&e))return;const[t,r,s]=e.split(":");if(M.checkIfSupportedNetwork(t))try{if(Zl&&await Zl,(await n.getSessions(`${t}:${r}`,s)).length)return;await Pt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Gt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=xe._getClient())==null?void 0:i.disconnect().catch(console.error)),tt.reset("Connect"),ka.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const n=ye.state.siwx,e=Le.getPlainAddress(M.getActiveCaipAddress()),t=M.getActiveCaipNetwork(),r=xe._getClient();if(!n)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!t)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await n.createMessage({chainId:t.caipNetworkId,accountAddress:e}),i=s.toString();_e.getConnectorId(t.chainNamespace)===ce.CONNECTOR_ID.AUTH&&tt.pushTransactionStack({});const l=await r.signMessage(i);await n.addSession({data:s,message:i,signature:l}),M.setLastConnectedSIWECaipNetwork(t),Pt.close(),Gt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Pt.state.open||tt.state.view==="ApproveTransaction")&&await Pt.open({view:"SIWXSignMessage"}),ka.showError("Error signing message"),Gt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var n;try{const e=this.getSIWX();if((n=e==null?void 0:e.getRequired)==null?void 0:n.call(e)){const r=M.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Le.getPlainAddress(M.getActiveCaipAddress())||""));s&&s.length>0?await M.switchActiveNetwork(r):await xe.disconnect()}else await xe.disconnect()}else Pt.close();Pt.close(),Gt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const n=this.getSIWX(),e=M.getAllRequestedCaipNetworks(),t=[];return await Promise.all(e.map(async r=>{const s=await(n==null?void 0:n.getSessions(r.caipNetworkId,Le.getPlainAddress(M.getActiveCaipAddress())||""));s&&t.push(...s)})),t},async getSessions(n){const e=ye.state.siwx;let t=n==null?void 0:n.address;if(!t){const s=M.getActiveCaipAddress();t=Le.getPlainAddress(s)}let r=n==null?void 0:n.caipNetworkId;if(!r){const s=M.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&t&&r?e.getSessions(r,t):[]},async isSIWXCloseDisabled(){var e;const n=this.getSIWX();if(n){const t=tt.state.view==="ApproveTransaction",r=tt.state.view==="SIWXSignMessage";if(t||r)return((e=n.getRequired)==null?void 0:e.call(n))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:n,chainId:e,socialUri:t,preferredAccountType:r,chainNamespace:s}){var d;const i=Hs.getSIWX();if(!i||!s.includes(ce.CHAIN.EVM)){const p=await n.connect({chainId:e,socialUri:t,preferredAccountType:r});return{address:p.address,chainId:p.chainId,accounts:p.accounts}}const o=await i.createMessage({chainId:((d=M.getActiveCaipNetwork())==null?void 0:d.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),l={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},h=await n.connect({chainId:e,socialUri:t,siwxMessage:l,preferredAccountType:r});return l.accountAddress=h.address,l.serializedMessage=h.message||"",h.signature&&h.message&&await Hs.addEmbeddedWalletSession(l,h.message,h.signature),{address:h.address,chainId:h.chainId,accounts:h.accounts}},async addEmbeddedWalletSession(n,e,t){if(Zl)return Zl;const r=Hs.getSIWX();return r?(Zl=r.addSession({data:n,message:e,signature:t}).finally(()=>{Zl=null}),Zl):Promise.resolve()},async universalProviderAuthenticate({universalProvider:n,chains:e,methods:t}){var l,h,d;const r=Hs.getSIWX(),s=new Set(e.map(p=>p.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((l=M.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:""}),o=await n.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:t,chains:[i.chainId,...e.filter(p=>p!==i.chainId)]});if(ka.showLoading("Authenticating...",{autoClose:!1}),Fe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(h=o.session.peer.metadata.icons)==null?void 0:h[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(d=o==null?void 0:o.auths)!=null&&d.length){const p=o.auths.map(g=>{const y=n.client.formatAuthMessage({request:g.p,iss:g.p.iss});return{data:{...g.p,accountAddress:g.p.iss.split(":").slice(-1).join(""),chainId:g.p.iss.split(":").slice(2,4).join(":"),uri:g.p.aud,version:g.p.version||i.version,expirationTime:g.p.exp,issuedAt:g.p.iat,notBefore:g.p.nbf},message:y,signature:g.s.s,cacao:g}});try{await r.setSessions(p),Gt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Hs.getSIWXEventProperties()})}catch(g){throw console.error("SIWX:universalProviderAuth - failed to set sessions",g),Gt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Hs.getSIWXEventProperties()}),await n.disconnect().catch(console.error),g}finally{ka.hide()}}return!0},getSIWXEventProperties(){var e;const n=M.state.activeChain;if(!n)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=M.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:qs(n)===jn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const n=this.getSIWX();n&&await n.setSessions([])}},Zoe={},Xoe=(n,e)=>{const t=de.useRef(void 0);de.useEffect(()=>{t.current=JH(n,e)}),de.useDebugValue(t.current)},Joe=Xoe,ece=new WeakMap;function $2(n,e){const r=de.useMemo(()=>n&&new WeakMap,[n]),s=de.useRef(void 0);let i=!0;const o=de.useSyncExternalStore(de.useCallback(h=>{const d=sr(n,h);return h(),d},[n,void 0]),()=>{const h=th(n);try{if(!i&&s.current&&!b5(s.current,h,r,new WeakMap))return s.current}catch{}return h},()=>th(n));i=!1,de.useLayoutEffect(()=>{s.current=o}),(Zoe?"production":void 0)!=="production"&&Joe(o,r);const l=de.useMemo(()=>new WeakMap,[]);return w5(o,r,l,ece)}function tce(){const{activeCaipNetwork:n}=$2(M.state);return{caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId}}function nce(n){var d;const e=$2(M.state),{activeConnectorIds:t}=$2(_e.state),r=e.activeChain;if(!r)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const s=(d=e.chains.get(r))==null?void 0:d.accountState,i=_e.getAuthConnector(r),o=t[r];return{allAccounts:xe.getConnections(r).flatMap(p=>p.accounts.map(({address:g})=>Le.createAccount(r,g,"eoa"))),caipAddress:s==null?void 0:s.caipAddress,address:Le.getPlainAddress(s==null?void 0:s.caipAddress),isConnected:!!(s!=null&&s.caipAddress),status:s==null?void 0:s.status,embeddedWalletInfo:i&&o===ce.CONNECTOR_ID.AUTH?{user:s!=null&&s.user?{...s.user,username:ve.getConnectedSocialUsername()}:void 0,authProvider:(s==null?void 0:s.socialProvider)||"email",accountType:s==null?void 0:s.preferredAccountType,isSmartAccountDeployed:!!(s!=null&&s.smartAccountDeployed)}:void 0}}const Dt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ce.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Pa={ConnectorExplorerIds:{[ce.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ce.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ce.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Dt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Dt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Dt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Dt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Dt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Dt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Dt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Dt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Dt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Dt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Dt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ce.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ce.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ce.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ce.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ce.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ce.CONNECTOR_ID.COINBASE]:"Coinbase",[ce.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ce.CONNECTOR_ID.LEDGER]:"Ledger",[ce.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ce.CONNECTOR_ID.INJECTED]:"INJECTED",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ce.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ce.CONNECTOR_ID.AUTH]:"AUTH",[Dt.CONNECTOR_TYPE_AUTH]:"AUTH"}},tr={getCaipTokens(n){if(!n)return;const e={};return Object.entries(n).forEach(([t,r])=>{e[`${Dt.EIP155}:${t}`]=r}),e},isLowerCaseMatch(n,e){return(n==null?void 0:n.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const n=M.state.activeChain;return ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>_e.getConnectorId(e)===ce.CONNECTOR_ID.AUTH&&e===n)},withRetry({conditionFn:n,intervalMs:e,maxRetries:t}){let r=0;return new Promise(s=>{async function i(){return r+=1,await n()?s(!0):r>=t?s(!1):(setTimeout(i,e),null)}i()})}},rce=new AbortController,Fr={EmbeddedWalletAbortController:rce,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found. Please make sure it is included in 'networks' array in createAppKit function."},ORIGIN_NOT_ALLOWED:{shortMessage:"Origin Not Allowed",longMessage:()=>`🔧 Origin ${sce()?window.origin:"unknown"} not found on allow list. Please update your project configurations on dashboard.reown.com.`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Unverified Domain",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider. Please check your time settings and connect again."},INVALID_PROJECT_ID:{shortMessage:"Invalid Project ID",longMessage:"The project ID is invalid. Visit dashboard.reown.com to get a new one."},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:n=>`Failed to get App Configuration ${n||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function sce(){return typeof window<"u"}const ice={createLogger(n,e="error"){const t=yp({level:e}),{logger:r}=_S({opts:t});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){n(i,...s);return}n(void 0,...s)},r}},ace="rpc.walletconnect.org";function KP(n,e){const t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",n),t.searchParams.set("projectId",e),t.toString()}const ZC=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ld={extendRpcUrlWithProjectId(n,e){let t=!1;try{t=new URL(n).host===ace}catch{t=!1}if(t){const r=new URL(n);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return n},isCaipNetwork(n){return"chainNamespace"in n&&"caipNetworkId"in n},getChainNamespace(n){return this.isCaipNetwork(n)?n.chainNamespace:ce.CHAIN.EVM},getCaipNetworkId(n){return this.isCaipNetwork(n)?n.caipNetworkId:`${ce.CHAIN.EVM}:${n.id}`},getDefaultRpcUrl(n,e,t){var s,i,o;const r=(o=(i=(s=n.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return ZC.includes(e)?KP(e,t):r||""},extendCaipNetwork(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){var y,b,v,E,A,S,x;const s=this.getChainNamespace(n),i=this.getCaipNetworkId(n),o=(v=(b=(y=n.rpcUrls)==null?void 0:y.default)==null?void 0:b.http)==null?void 0:v[0],l=this.getDefaultRpcUrl(n,i,t),h=((S=(A=(E=n==null?void 0:n.rpcUrls)==null?void 0:E.chainDefault)==null?void 0:A.http)==null?void 0:S[0])||o,d=((x=r==null?void 0:r[i])==null?void 0:x.map(T=>T.url))||[],p=[...d,...l?[l]:[]],g=[...d];return h&&!g.includes(h)&&g.push(h),{...n,chainNamespace:s,caipNetworkId:i,assets:{imageId:Pa.NetworkImageIds[n.id],imageUrl:e==null?void 0:e[n.id]},rpcUrls:{...n.rpcUrls,default:{http:p},chainDefault:{http:g}}}},extendCaipNetworks(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){return n.map(s=>Ld.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:t}))},getViemTransport(n,e,t){var s,i,o;const r=[];return t==null||t.forEach(l=>{r.push(Hw(l.url,l.config))}),ZC.includes(n.caipNetworkId)&&r.push(Hw(KP(n.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=n==null?void 0:n.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(l=>{r.push(Hw(l))}),V3(r)},extendWagmiTransports(n,e,t){if(ZC.includes(n.caipNetworkId)){const r=this.getDefaultRpcUrl(n,n.caipNetworkId,e);return V3([t,Hw(r)])}return t},getUnsupportedNetwork(n){return{id:n.split(":")[1],caipNetworkId:n,name:ce.UNSUPPORTED_NETWORK_NAME,chainNamespace:n.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(n){var h;const e=ve.getActiveCaipNetworkId(),t=M.getAllRequestedCaipNetworks(),r=Array.from(((h=M.state.chains)==null?void 0:h.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=t==null?void 0:t.find(d=>d.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||n||(t==null?void 0:t[0])}},uE={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},cs=cn({providers:{...uE},providerIds:{...uE}}),Rt={state:cs,subscribeKey(n,e){return Dr(cs,n,e)},subscribe(n){return sr(cs,()=>{n(cs)})},subscribeProviders(n){return sr(cs.providers,()=>n(cs.providers))},setProvider(n,e){n&&e&&(cs.providers[n]=nh(e))},getProvider(n){if(n)return cs.providers[n]},setProviderId(n,e){e&&(cs.providerIds[n]=e)},getProviderId(n){if(n)return cs.providerIds[n]},reset(){cs.providers={...uE},cs.providerIds={...uE}},resetChain(n){cs.providers[n]=void 0,cs.providerIds[n]=void 0}},WP={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},hr={set(n,e){zs.isClient&&localStorage.setItem(`${ze.STORAGE_KEY}${n}`,e)},get(n){return zs.isClient?localStorage.getItem(`${ze.STORAGE_KEY}${n}`):null},delete(n,e){zs.isClient&&(e?localStorage.removeItem(n):localStorage.removeItem(`${ze.STORAGE_KEY}${n}`))}},ob=30*1e3,zs={checkIfAllowedToTriggerEmail(){const n=hr.get(ze.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<ob){const t=Math.ceil((ob-e)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){const n=hr.get(ze.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<ob)return Math.ceil((ob-e)/1e3)}return 0},checkIfRequestExists(n){return jn.NOT_SAFE_RPC_METHODS.includes(n.method)||jn.SAFE_RPC_METHODS.includes(n.method)},getResponseType(n){return typeof n=="string"&&((n==null?void 0:n.match(WP.transactionHash))||(n==null?void 0:n.match(WP.signedMessage)))?ze.RPC_RESPONSE_TYPE_TX:ze.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(n){return jn.SAFE_RPC_METHODS.includes(n.method)},isClient:typeof window<"u"};var Ut;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ut||(Ut={}));var F2;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(F2||(F2={}));const Ue=Ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zc=n=>{switch(typeof n){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(n)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(n)?Ue.array:n===null?Ue.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ue.promise:typeof Map<"u"&&n instanceof Map?Ue.map:typeof Set<"u"&&n instanceof Set?Ue.set:typeof Date<"u"&&n instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ae=Ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),oce=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Yi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let l=r,h=0;for(;h<o.path.length;){const d=o.path[h];h===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],h++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Yi.create=n=>new Yi(n);const d0=(n,e)=>{let t;switch(n.code){case Ae.invalid_type:n.received===Ue.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Ae.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Ut.jsonStringifyReplacer)}`;break;case Ae.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ut.joinValues(n.keys,", ")}`;break;case Ae.invalid_union:t="Invalid input";break;case Ae.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ut.joinValues(n.options)}`;break;case Ae.invalid_enum_value:t=`Invalid enum value. Expected ${Ut.joinValues(n.options)}, received '${n.received}'`;break;case Ae.invalid_arguments:t="Invalid function arguments";break;case Ae.invalid_return_type:t="Invalid function return type";break;case Ae.invalid_date:t="Invalid date";break;case Ae.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Ut.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Ae.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Ae.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Ae.custom:t="Invalid input";break;case Ae.invalid_intersection_types:t="Intersection results could not be merged";break;case Ae.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Ae.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ut.assertNever(n)}return{message:t}};let T6=d0;function cce(n){T6=n}function hE(){return T6}const dE=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};let l="";const h=r.filter(d=>!!d).slice().reverse();for(const d of h)l=d(o,{data:e,defaultError:l}).message;return{...s,path:i,message:s.message||l}},lce=[];function Me(n,e){const t=dE({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,hE(),d0].filter(r=>!!r)});n.common.issues.push(t)}class Rr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return it;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t)r.push({key:await s.key,value:await s.value});return Rr.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return it;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const it=Object.freeze({status:"aborted"}),x6=n=>({status:"dirty",value:n}),Qr=n=>({status:"valid",value:n}),H2=n=>n.status==="aborted",z2=n=>n.status==="dirty",f0=n=>n.status==="valid",fE=n=>typeof Promise<"u"&&n instanceof Promise;var Ke;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ke||(Ke={}));class ja{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const YP=(n,e)=>{if(f0(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Yi(n.common.issues);return this._error=t,this._error}}};function ot(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>o.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:r??l.defaultError}:{message:t??l.defaultError},description:s}}class dt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return zc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:zc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rr,ctx:{common:e.parent.common,data:e.data,parsedType:zc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(fE(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return YP(s,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(fE(s)?s:Promise.resolve(s));return YP(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:Ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(h=>h?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Xi({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Fo.create(this,this._def)}nullable(){return uh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qi.create(this,this._def)}promise(){return hp.create(this,this._def)}or(e){return y0.create([this,e],this._def)}and(e){return w0.create(this,e,this._def)}transform(e){return new Xi({...ot(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new C0({...ot(this._def),innerType:this,defaultValue:t,typeName:nt.ZodDefault})}brand(){return new O6({typeName:nt.ZodBranded,type:this,...ot(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new yE({...ot(this._def),innerType:this,catchValue:t,typeName:nt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return oy.create(this,e)}readonly(){return bE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const uce=/^c[^\s-]{8,}$/i,hce=/^[a-z][a-z0-9]*$/,dce=/^[0-9A-HJKMNP-TV-Z]{26}$/,fce=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pce=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gce="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let XC;const mce=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,yce=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,wce=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function bce(n,e){return!!((e==="v4"||!e)&&mce.test(n)||(e==="v6"||!e)&&yce.test(n))}class Ki extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.string,received:i.parsedType}),it}const r=new Rr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Me(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Me(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")pce.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")XC||(XC=new RegExp(gce,"u")),XC.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")fce.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")uce.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")hce.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")dce.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:Ae.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:Ae.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?wce(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?bce(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:Ae.invalid_string,message:i.message}),r.dirty()):Ut.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:Ae.invalid_string,...Ke.errToObj(r)})}_addCheck(e){return new Ki({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ke.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ke.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ke.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ke.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ke.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ke.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ke.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ke.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Ke.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ke.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ke.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ke.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ke.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ke.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ke.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ke.errToObj(t)})}nonempty(e){return this.min(1,Ke.errToObj(e))}trim(){return new Ki({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ki({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ki({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ki.create=n=>{var e;return new Ki({checks:[],typeName:nt.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ot(n)})};function Ece(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class bl extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.number,received:i.parsedType}),it}let r;const s=new Rr;for(const i of this._def.checks)i.kind==="int"?Ut.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Ece(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.not_finite,message:i.message}),s.dirty()):Ut.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ke.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ke.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ke.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ke.toString(t))}setLimit(e,t,r,s){return new bl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ke.toString(s)}]})}_addCheck(e){return new bl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ke.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ke.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ke.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ke.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ke.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ke.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ut.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}bl.create=n=>new bl({checks:[],typeName:nt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ot(n)});class El extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.bigint,received:i.parsedType}),it}let r;const s=new Rr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ut.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ke.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ke.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ke.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ke.toString(t))}setLimit(e,t,r,s){return new El({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ke.toString(s)}]})}_addCheck(e){return new El({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ke.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ke.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}El.create=n=>{var e;return new El({checks:[],typeName:nt.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ot(n)})};class p0 extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.boolean,received:r.parsedType}),it}return Qr(e.data)}}p0.create=n=>new p0({typeName:nt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ot(n)});class ch extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.date,received:i.parsedType}),it}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_date}),it}const r=new Rr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ut.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ch({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ke.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ke.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ch.create=n=>new ch({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:nt.ZodDate,...ot(n)});class pE extends dt{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.symbol,received:r.parsedType}),it}return Qr(e.data)}}pE.create=n=>new pE({typeName:nt.ZodSymbol,...ot(n)});class g0 extends dt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.undefined,received:r.parsedType}),it}return Qr(e.data)}}g0.create=n=>new g0({typeName:nt.ZodUndefined,...ot(n)});class m0 extends dt{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.null,received:r.parsedType}),it}return Qr(e.data)}}m0.create=n=>new m0({typeName:nt.ZodNull,...ot(n)});class up extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return Qr(e.data)}}up.create=n=>new up({typeName:nt.ZodAny,...ot(n)});class Yu extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qr(e.data)}}Yu.create=n=>new Yu({typeName:nt.ZodUnknown,...ot(n)});class Ko extends dt{_parse(e){const t=this._getOrReturnCtx(e);return Me(t,{code:Ae.invalid_type,expected:Ue.never,received:t.parsedType}),it}}Ko.create=n=>new Ko({typeName:nt.ZodNever,...ot(n)});class gE extends dt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.void,received:r.parsedType}),it}return Qr(e.data)}}gE.create=n=>new gE({typeName:nt.ZodVoid,...ot(n)});class Qi extends dt{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==Ue.array)return Me(t,{code:Ae.invalid_type,expected:Ue.array,received:t.parsedType}),it;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(o||l)&&(Me(t,{code:o?Ae.too_big:Ae.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Me(t,{code:Ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Me(t,{code:Ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>s.type._parseAsync(new ja(t,o,t.path,l)))).then(o=>Rr.mergeArray(r,o));const i=[...t.data].map((o,l)=>s.type._parseSync(new ja(t,o,t.path,l)));return Rr.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Qi({...this._def,minLength:{value:e,message:Ke.toString(t)}})}max(e,t){return new Qi({...this._def,maxLength:{value:e,message:Ke.toString(t)}})}length(e,t){return new Qi({...this._def,exactLength:{value:e,message:Ke.toString(t)}})}nonempty(e){return this.min(1,e)}}Qi.create=(n,e)=>new Qi({type:n,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...ot(e)});function Md(n){if(n instanceof wn){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Fo.create(Md(r))}return new wn({...n._def,shape:()=>e})}else return n instanceof Qi?new Qi({...n._def,type:Md(n.element)}):n instanceof Fo?Fo.create(Md(n.unwrap())):n instanceof uh?uh.create(Md(n.unwrap())):n instanceof qa?qa.create(n.items.map(e=>Md(e))):n}class wn extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Ut.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ue.object){const d=this._getOrReturnCtx(e);return Me(d,{code:Ae.invalid_type,expected:Ue.object,received:d.parsedType}),it}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ko&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const h=[];for(const d of o){const p=i[d],g=s.data[d];h.push({key:{status:"valid",value:d},value:p._parse(new ja(s,g,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ko){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)h.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(d==="strict")l.length>0&&(Me(s,{code:Ae.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const g=s.data[p];h.push({key:{status:"valid",value:p},value:d._parse(new ja(s,g,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of h){const g=await p.key;d.push({key:g,value:await p.value,alwaysSet:p.alwaysSet})}return d}).then(d=>Rr.mergeObjectSync(r,d)):Rr.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return Ke.errToObj,new wn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,o,l;const h=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(l=Ke.errToObj(e).message)!==null&&l!==void 0?l:h}:{message:h}}}:{}})}strip(){return new wn({...this._def,unknownKeys:"strip"})}passthrough(){return new wn({...this._def,unknownKeys:"passthrough"})}extend(e){return new wn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new wn({...this._def,catchall:e})}pick(e){const t={};return Ut.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new wn({...this._def,shape:()=>t})}omit(e){const t={};return Ut.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new wn({...this._def,shape:()=>t})}deepPartial(){return Md(this)}partial(e){const t={};return Ut.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new wn({...this._def,shape:()=>t})}required(e){const t={};return Ut.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Fo;)i=i._def.innerType;t[r]=i}}),new wn({...this._def,shape:()=>t})}keyof(){return I6(Ut.objectKeys(this.shape))}}wn.create=(n,e)=>new wn({shape:()=>n,unknownKeys:"strip",catchall:Ko.create(),typeName:nt.ZodObject,...ot(e)});wn.strictCreate=(n,e)=>new wn({shape:()=>n,unknownKeys:"strict",catchall:Ko.create(),typeName:nt.ZodObject,...ot(e)});wn.lazycreate=(n,e)=>new wn({shape:n,unknownKeys:"strip",catchall:Ko.create(),typeName:nt.ZodObject,...ot(e)});class y0 extends dt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Yi(l.ctx.common.issues));return Me(t,{code:Ae.invalid_union,unionErrors:o}),it}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const h of r){const d={...t,common:{...t.common,issues:[]},parent:null},p=h._parseSync({data:t.data,path:t.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(h=>new Yi(h));return Me(t,{code:Ae.invalid_union,unionErrors:l}),it}}get options(){return this._def.options}}y0.create=(n,e)=>new y0({options:n,typeName:nt.ZodUnion,...ot(e)});const Tb=n=>n instanceof E0?Tb(n.schema):n instanceof Xi?Tb(n.innerType()):n instanceof v0?[n.value]:n instanceof vl?n.options:n instanceof A0?Object.keys(n.enum):n instanceof C0?Tb(n._def.innerType):n instanceof g0?[void 0]:n instanceof m0?[null]:null;class hv extends dt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.object)return Me(t,{code:Ae.invalid_type,expected:Ue.object,received:t.parsedType}),it;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Me(t,{code:Ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),it)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const o=Tb(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new hv({typeName:nt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ot(r)})}}function j2(n,e){const t=zc(n),r=zc(e);if(n===e)return{valid:!0,data:n};if(t===Ue.object&&r===Ue.object){const s=Ut.objectKeys(e),i=Ut.objectKeys(n).filter(l=>s.indexOf(l)!==-1),o={...n,...e};for(const l of i){const h=j2(n[l],e[l]);if(!h.valid)return{valid:!1};o[l]=h.data}return{valid:!0,data:o}}else if(t===Ue.array&&r===Ue.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],l=e[i],h=j2(o,l);if(!h.valid)return{valid:!1};s.push(h.data)}return{valid:!0,data:s}}else return t===Ue.date&&r===Ue.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class w0 extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(H2(i)||H2(o))return it;const l=j2(i.value,o.value);return l.valid?((z2(i)||z2(o))&&t.dirty(),{status:t.value,value:l.data}):(Me(r,{code:Ae.invalid_intersection_types}),it)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}w0.create=(n,e,t)=>new w0({left:n,right:e,typeName:nt.ZodIntersection,...ot(t)});class qa extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return Me(r,{code:Ae.invalid_type,expected:Ue.array,received:r.parsedType}),it;if(r.data.length<this._def.items.length)return Me(r,{code:Ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),it;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:Ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,l)=>{const h=this._def.items[l]||this._def.rest;return h?h._parse(new ja(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Rr.mergeArray(t,o)):Rr.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new qa({...this._def,rest:e})}}qa.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qa({items:n,typeName:nt.ZodTuple,rest:null,...ot(e)})};class b0 extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return Me(r,{code:Ae.invalid_type,expected:Ue.object,received:r.parsedType}),it;const s=[],i=this._def.keyType,o=this._def.valueType;for(const l in r.data)s.push({key:i._parse(new ja(r,l,r.path,l)),value:o._parse(new ja(r,r.data[l],r.path,l))});return r.common.async?Rr.mergeObjectAsync(t,s):Rr.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof dt?new b0({keyType:e,valueType:t,typeName:nt.ZodRecord,...ot(r)}):new b0({keyType:Ki.create(),valueType:e,typeName:nt.ZodRecord,...ot(t)})}}class mE extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return Me(r,{code:Ae.invalid_type,expected:Ue.map,received:r.parsedType}),it;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,h],d)=>({key:s._parse(new ja(r,l,r.path,[d,"key"])),value:i._parse(new ja(r,h,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const h of o){const d=await h.key,p=await h.value;if(d.status==="aborted"||p.status==="aborted")return it;(d.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(d.value,p.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const h of o){const d=h.key,p=h.value;if(d.status==="aborted"||p.status==="aborted")return it;(d.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(d.value,p.value)}return{status:t.value,value:l}}}}mE.create=(n,e,t)=>new mE({valueType:e,keyType:n,typeName:nt.ZodMap,...ot(t)});class lh extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return Me(r,{code:Ae.invalid_type,expected:Ue.set,received:r.parsedType}),it;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:Ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:Ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(h){const d=new Set;for(const p of h){if(p.status==="aborted")return it;p.status==="dirty"&&t.dirty(),d.add(p.value)}return{status:t.value,value:d}}const l=[...r.data.values()].map((h,d)=>i._parse(new ja(r,h,r.path,d)));return r.common.async?Promise.all(l).then(h=>o(h)):o(l)}min(e,t){return new lh({...this._def,minSize:{value:e,message:Ke.toString(t)}})}max(e,t){return new lh({...this._def,maxSize:{value:e,message:Ke.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}lh.create=(n,e)=>new lh({valueType:n,minSize:null,maxSize:null,typeName:nt.ZodSet,...ot(e)});class tf extends dt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.function)return Me(t,{code:Ae.invalid_type,expected:Ue.function,received:t.parsedType}),it;function r(l,h){return dE({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,hE(),d0].filter(d=>!!d),issueData:{code:Ae.invalid_arguments,argumentsError:h}})}function s(l,h){return dE({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,hE(),d0].filter(d=>!!d),issueData:{code:Ae.invalid_return_type,returnTypeError:h}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof hp){const l=this;return Qr(async function(...h){const d=new Yi([]),p=await l._def.args.parseAsync(h,i).catch(b=>{throw d.addIssue(r(h,b)),d}),g=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(g,i).catch(b=>{throw d.addIssue(s(g,b)),d})})}else{const l=this;return Qr(function(...h){const d=l._def.args.safeParse(h,i);if(!d.success)throw new Yi([r(h,d.error)]);const p=Reflect.apply(o,this,d.data),g=l._def.returns.safeParse(p,i);if(!g.success)throw new Yi([s(p,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tf({...this._def,args:qa.create(e).rest(Yu.create())})}returns(e){return new tf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new tf({args:e||qa.create([]).rest(Yu.create()),returns:t||Yu.create(),typeName:nt.ZodFunction,...ot(r)})}}class E0 extends dt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}E0.create=(n,e)=>new E0({getter:n,typeName:nt.ZodLazy,...ot(e)});class v0 extends dt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Me(t,{received:t.data,code:Ae.invalid_literal,expected:this._def.value}),it}return{status:"valid",value:e.data}}get value(){return this._def.value}}v0.create=(n,e)=>new v0({value:n,typeName:nt.ZodLiteral,...ot(e)});function I6(n,e){return new vl({values:n,typeName:nt.ZodEnum,...ot(e)})}class vl extends dt{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Me(t,{expected:Ut.joinValues(r),received:t.parsedType,code:Ae.invalid_type}),it}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return Me(t,{received:t.data,code:Ae.invalid_enum_value,options:r}),it}return Qr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return vl.create(e)}exclude(e){return vl.create(this.options.filter(t=>!e.includes(t)))}}vl.create=I6;class A0 extends dt{_parse(e){const t=Ut.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=Ut.objectValues(t);return Me(r,{expected:Ut.joinValues(s),received:r.parsedType,code:Ae.invalid_type}),it}if(t.indexOf(e.data)===-1){const s=Ut.objectValues(t);return Me(r,{received:r.data,code:Ae.invalid_enum_value,options:s}),it}return Qr(e.data)}get enum(){return this._def.values}}A0.create=(n,e)=>new A0({values:n,typeName:nt.ZodNativeEnum,...ot(e)});class hp extends dt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.promise&&t.common.async===!1)return Me(t,{code:Ae.invalid_type,expected:Ue.promise,received:t.parsedType}),it;const r=t.parsedType===Ue.promise?t.data:Promise.resolve(t.data);return Qr(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}hp.create=(n,e)=>new hp({type:n,typeName:nt.ZodPromise,...ot(e)});class Xi extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Me(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(l=>this._def.schema._parseAsync({data:l,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=l=>{const h=s.refinement(l,i);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?it:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?it:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!f0(o))return o;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>f0(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:t.value,value:l})):o);Ut.assertNever(s)}}Xi.create=(n,e,t)=>new Xi({schema:n,typeName:nt.ZodEffects,effect:e,...ot(t)});Xi.createWithPreprocess=(n,e,t)=>new Xi({schema:e,effect:{type:"preprocess",transform:n},typeName:nt.ZodEffects,...ot(t)});class Fo extends dt{_parse(e){return this._getType(e)===Ue.undefined?Qr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fo.create=(n,e)=>new Fo({innerType:n,typeName:nt.ZodOptional,...ot(e)});class uh extends dt{_parse(e){return this._getType(e)===Ue.null?Qr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}uh.create=(n,e)=>new uh({innerType:n,typeName:nt.ZodNullable,...ot(e)});class C0 extends dt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}C0.create=(n,e)=>new C0({innerType:n,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ot(e)});class yE extends dt{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fE(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Yi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Yi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}yE.create=(n,e)=>new yE({innerType:n,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ot(e)});class wE extends dt{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.nan,received:r.parsedType}),it}return{status:"valid",value:e.data}}}wE.create=n=>new wE({typeName:nt.ZodNaN,...ot(n)});const vce=Symbol("zod_brand");class O6 extends dt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class oy extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?it:i.status==="dirty"?(t.dirty(),x6(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?it:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new oy({in:e,out:t,typeName:nt.ZodPipeline})}}class bE extends dt{_parse(e){const t=this._def.innerType._parse(e);return f0(t)&&(t.value=Object.freeze(t.value)),t}}bE.create=(n,e)=>new bE({innerType:n,typeName:nt.ZodReadonly,...ot(e)});const R6=(n,e={},t)=>n?up.create().superRefine((r,s)=>{var i,o;if(!n(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,h=(o=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,d=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...d,fatal:h})}}):up.create(),Ace={object:wn.lazycreate};var nt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(nt||(nt={}));const Cce=(n,e={message:`Input not instance of ${n.name}`})=>R6(t=>t instanceof n,e),D6=Ki.create,P6=bl.create,_ce=wE.create,Sce=El.create,U6=p0.create,Nce=ch.create,Tce=pE.create,xce=g0.create,Ice=m0.create,Oce=up.create,Rce=Yu.create,Dce=Ko.create,Pce=gE.create,Uce=Qi.create,kce=wn.create,Bce=wn.strictCreate,Lce=y0.create,Mce=hv.create,$ce=w0.create,Fce=qa.create,Hce=b0.create,zce=mE.create,jce=lh.create,qce=tf.create,Vce=E0.create,Gce=v0.create,Kce=vl.create,Wce=A0.create,Yce=hp.create,QP=Xi.create,Qce=Fo.create,Zce=uh.create,Xce=Xi.createWithPreprocess,Jce=oy.create,ele=()=>D6().optional(),tle=()=>P6().optional(),nle=()=>U6().optional(),rle={string:n=>Ki.create({...n,coerce:!0}),number:n=>bl.create({...n,coerce:!0}),boolean:n=>p0.create({...n,coerce:!0}),bigint:n=>El.create({...n,coerce:!0}),date:n=>ch.create({...n,coerce:!0})},sle=it;var D=Object.freeze({__proto__:null,defaultErrorMap:d0,setErrorMap:cce,getErrorMap:hE,makeIssue:dE,EMPTY_PATH:lce,addIssueToContext:Me,ParseStatus:Rr,INVALID:it,DIRTY:x6,OK:Qr,isAborted:H2,isDirty:z2,isValid:f0,isAsync:fE,get util(){return Ut},get objectUtil(){return F2},ZodParsedType:Ue,getParsedType:zc,ZodType:dt,ZodString:Ki,ZodNumber:bl,ZodBigInt:El,ZodBoolean:p0,ZodDate:ch,ZodSymbol:pE,ZodUndefined:g0,ZodNull:m0,ZodAny:up,ZodUnknown:Yu,ZodNever:Ko,ZodVoid:gE,ZodArray:Qi,ZodObject:wn,ZodUnion:y0,ZodDiscriminatedUnion:hv,ZodIntersection:w0,ZodTuple:qa,ZodRecord:b0,ZodMap:mE,ZodSet:lh,ZodFunction:tf,ZodLazy:E0,ZodLiteral:v0,ZodEnum:vl,ZodNativeEnum:A0,ZodPromise:hp,ZodEffects:Xi,ZodTransformer:Xi,ZodOptional:Fo,ZodNullable:uh,ZodDefault:C0,ZodCatch:yE,ZodNaN:wE,BRAND:vce,ZodBranded:O6,ZodPipeline:oy,ZodReadonly:bE,custom:R6,Schema:dt,ZodSchema:dt,late:Ace,get ZodFirstPartyTypeKind(){return nt},coerce:rle,any:Oce,array:Uce,bigint:Sce,boolean:U6,date:Nce,discriminatedUnion:Mce,effect:QP,enum:Kce,function:qce,instanceof:Cce,intersection:$ce,lazy:Vce,literal:Gce,map:zce,nan:_ce,nativeEnum:Wce,never:Dce,null:Ice,nullable:Zce,number:P6,object:kce,oboolean:nle,onumber:tle,optional:Qce,ostring:ele,pipeline:Jce,preprocess:Xce,promise:Yce,record:Hce,set:jce,strictObject:Bce,string:D6,symbol:Tce,transformer:QP,tuple:Fce,undefined:xce,union:Lce,unknown:Rce,void:Pce,NEVER:sle,ZodIssueCode:Ae,quotelessJson:oce,ZodError:Yi});const An=D.object({message:D.string()});function ke(n){return D.literal(ze[n])}const dv=D.object({serializedMessage:D.string().optional(),accountAddress:D.string(),chainId:D.string(),notBefore:D.string().optional(),domain:D.string(),uri:D.string(),version:D.string(),nonce:D.string(),statement:D.string().optional(),resources:D.array(D.string()).optional(),requestId:D.string().optional(),issuedAt:D.string().optional(),expirationTime:D.string().optional()});D.object({accessList:D.array(D.string()),blockHash:D.string().nullable(),blockNumber:D.string().nullable(),chainId:D.string().or(D.number()),from:D.string(),gas:D.string(),hash:D.string(),input:D.string().nullable(),maxFeePerGas:D.string(),maxPriorityFeePerGas:D.string(),nonce:D.string(),r:D.string(),s:D.string(),to:D.string(),transactionIndex:D.string().nullable(),type:D.string(),v:D.string(),value:D.string()});const ile=D.object({chainId:D.string().or(D.number()),rpcUrl:D.optional(D.string())}),ale=D.object({email:D.string().email()}),ole=D.object({otp:D.string()}),cle=D.object({uri:D.string(),preferredAccountType:D.optional(D.string()),chainId:D.optional(D.string().or(D.number())),siwxMessage:D.optional(dv),rpcUrl:D.optional(D.string())}),lle=D.object({chainId:D.optional(D.string().or(D.number())),preferredAccountType:D.optional(D.string()),socialUri:D.optional(D.string()),siwxMessage:D.optional(dv),rpcUrl:D.optional(D.string())}),ule=D.object({provider:D.enum(["google","github","apple","facebook","x","discord"])}),hle=D.object({email:D.string().email()}),dle=D.object({otp:D.string()}),fle=D.object({otp:D.string()}),ple=D.object({themeMode:D.optional(D.enum(["light","dark"])),themeVariables:D.optional(D.record(D.string(),D.string().or(D.number()))),w3mThemeVariables:D.optional(D.record(D.string(),D.string()))}),gle=D.object({metadata:D.object({name:D.string(),description:D.string(),url:D.string(),icons:D.array(D.string())}).optional(),sdkVersion:D.string().optional(),sdkType:D.string().optional(),projectId:D.string()}),mle=D.object({type:D.string()}),yle=D.object({action:D.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),wle=D.object({url:D.string()}),ble=D.object({userName:D.string()}),Ele=D.object({email:D.string().optional().nullable(),address:D.string(),chainId:D.string().or(D.number()),accounts:D.array(D.object({address:D.string(),type:D.enum([jn.ACCOUNT_TYPES.EOA,jn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:D.string().optional().nullable(),preferredAccountType:D.optional(D.string()),signature:D.string().optional(),message:D.string().optional(),siwxMessage:D.optional(dv)}),vle=D.object({action:D.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Ale=D.object({email:D.string().email().optional().nullable(),address:D.string(),chainId:D.string().or(D.number()),smartAccountDeployed:D.optional(D.boolean()),accounts:D.array(D.object({address:D.string(),type:D.enum([jn.ACCOUNT_TYPES.EOA,jn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:D.optional(D.string()),signature:D.string().optional(),message:D.string().optional(),siwxMessage:D.optional(dv)}),Cle=D.object({uri:D.string()}),_le=D.object({isConnected:D.boolean()}),Sle=D.object({chainId:D.string().or(D.number())}),Nle=D.object({chainId:D.string().or(D.number())}),Tle=D.object({newEmail:D.string().email()}),xle=D.object({smartAccountEnabledNetworks:D.array(D.number())});D.object({address:D.string(),isDeployed:D.boolean()});const Ile=D.object({version:D.string().optional()}),Ole=D.object({type:D.string(),address:D.string()}),Rle=D.any(),Dle=D.object({method:D.literal("eth_accounts")}),Ple=D.object({method:D.literal("eth_blockNumber")}),Ule=D.object({method:D.literal("eth_call"),params:D.array(D.any())}),kle=D.object({method:D.literal("eth_chainId")}),Ble=D.object({method:D.literal("eth_estimateGas"),params:D.array(D.any())}),Lle=D.object({method:D.literal("eth_feeHistory"),params:D.array(D.any())}),Mle=D.object({method:D.literal("eth_gasPrice")}),$le=D.object({method:D.literal("eth_getAccount"),params:D.array(D.any())}),Fle=D.object({method:D.literal("eth_getBalance"),params:D.array(D.any())}),Hle=D.object({method:D.literal("eth_getBlockByHash"),params:D.array(D.any())}),zle=D.object({method:D.literal("eth_getBlockByNumber"),params:D.array(D.any())}),jle=D.object({method:D.literal("eth_getBlockReceipts"),params:D.array(D.any())}),qle=D.object({method:D.literal("eth_getBlockTransactionCountByHash"),params:D.array(D.any())}),Vle=D.object({method:D.literal("eth_getBlockTransactionCountByNumber"),params:D.array(D.any())}),Gle=D.object({method:D.literal("eth_getCode"),params:D.array(D.any())}),Kle=D.object({method:D.literal("eth_getFilterChanges"),params:D.array(D.any())}),Wle=D.object({method:D.literal("eth_getFilterLogs"),params:D.array(D.any())}),Yle=D.object({method:D.literal("eth_getLogs"),params:D.array(D.any())}),Qle=D.object({method:D.literal("eth_getProof"),params:D.array(D.any())}),Zle=D.object({method:D.literal("eth_getStorageAt"),params:D.array(D.any())}),Xle=D.object({method:D.literal("eth_getTransactionByBlockHashAndIndex"),params:D.array(D.any())}),Jle=D.object({method:D.literal("eth_getTransactionByBlockNumberAndIndex"),params:D.array(D.any())}),eue=D.object({method:D.literal("eth_getTransactionByHash"),params:D.array(D.any())}),tue=D.object({method:D.literal("eth_getTransactionCount"),params:D.array(D.any())}),nue=D.object({method:D.literal("eth_getTransactionReceipt"),params:D.array(D.any())}),rue=D.object({method:D.literal("eth_getUncleCountByBlockHash"),params:D.array(D.any())}),sue=D.object({method:D.literal("eth_getUncleCountByBlockNumber"),params:D.array(D.any())}),iue=D.object({method:D.literal("eth_maxPriorityFeePerGas")}),aue=D.object({method:D.literal("eth_newBlockFilter")}),oue=D.object({method:D.literal("eth_newFilter"),params:D.array(D.any())}),cue=D.object({method:D.literal("eth_newPendingTransactionFilter")}),lue=D.object({method:D.literal("eth_sendRawTransaction"),params:D.array(D.any())}),uue=D.object({method:D.literal("eth_syncing"),params:D.array(D.any())}),hue=D.object({method:D.literal("eth_uninstallFilter"),params:D.array(D.any())}),ZP=D.object({method:D.literal("personal_sign"),params:D.array(D.any())}),due=D.object({method:D.literal("eth_signTypedData_v4"),params:D.array(D.any())}),fue=D.object({method:D.literal("eth_sendTransaction"),params:D.array(D.any())}),pue=D.object({method:D.literal("solana_signMessage"),params:D.object({message:D.string(),pubkey:D.string()})}),gue=D.object({method:D.literal("solana_signTransaction"),params:D.object({transaction:D.string()})}),mue=D.object({method:D.literal("solana_signAllTransactions"),params:D.object({transactions:D.array(D.string())})}),yue=D.object({method:D.literal("solana_signAndSendTransaction"),params:D.object({transaction:D.string(),options:D.object({skipPreflight:D.boolean().optional(),preflightCommitment:D.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:D.number().optional(),minContextSlot:D.number().optional()}).optional()})}),wue=D.object({method:D.literal("wallet_sendCalls"),params:D.array(D.object({chainId:D.string().or(D.number()).optional(),from:D.string().optional(),version:D.string().optional(),capabilities:D.any().optional(),calls:D.array(D.object({to:D.string().startsWith("0x"),data:D.string().startsWith("0x").optional(),value:D.string().optional()}))}))}),bue=D.object({method:D.literal("wallet_getCallsStatus"),params:D.array(D.string())}),Eue=D.object({method:D.literal("wallet_getCapabilities"),params:D.array(D.string().or(D.number()).optional()).optional()}),vue=D.object({method:D.literal("wallet_grantPermissions"),params:D.array(D.any())}),Aue=D.object({method:D.literal("wallet_revokePermissions"),params:D.any()}),Cue=D.object({method:D.literal("wallet_getAssets"),params:D.any()}),XP=D.object({token:D.string()}),Be=D.object({id:D.string().optional()}),JC={appEvent:Be.extend({type:ke("APP_SWITCH_NETWORK"),payload:ile}).or(Be.extend({type:ke("APP_CONNECT_EMAIL"),payload:ale})).or(Be.extend({type:ke("APP_CONNECT_DEVICE")})).or(Be.extend({type:ke("APP_CONNECT_OTP"),payload:ole})).or(Be.extend({type:ke("APP_CONNECT_SOCIAL"),payload:cle})).or(Be.extend({type:ke("APP_GET_FARCASTER_URI")})).or(Be.extend({type:ke("APP_CONNECT_FARCASTER")})).or(Be.extend({type:ke("APP_GET_USER"),payload:D.optional(lle)})).or(Be.extend({type:ke("APP_GET_SOCIAL_REDIRECT_URI"),payload:ule})).or(Be.extend({type:ke("APP_SIGN_OUT")})).or(Be.extend({type:ke("APP_IS_CONNECTED"),payload:D.optional(XP)})).or(Be.extend({type:ke("APP_GET_CHAIN_ID")})).or(Be.extend({type:ke("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:ke("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:ke("APP_SET_PREFERRED_ACCOUNT"),payload:mle})).or(Be.extend({type:ke("APP_RPC_REQUEST"),payload:ZP.or(Cue).or(Dle).or(Ple).or(Ule).or(kle).or(Ble).or(Lle).or(Mle).or($le).or(Fle).or(Hle).or(zle).or(jle).or(qle).or(Vle).or(Gle).or(Kle).or(Wle).or(Yle).or(Qle).or(Zle).or(Xle).or(Jle).or(eue).or(tue).or(nue).or(rue).or(sue).or(iue).or(aue).or(oue).or(cue).or(lue).or(uue).or(hue).or(ZP).or(due).or(fue).or(pue).or(gue).or(mue).or(yue).or(bue).or(wue).or(Eue).or(vue).or(Aue).and(D.object({chainId:D.string().or(D.number()).optional(),chainNamespace:D.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:D.string().optional()}))})).or(Be.extend({type:ke("APP_UPDATE_EMAIL"),payload:hle})).or(Be.extend({type:ke("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:dle})).or(Be.extend({type:ke("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:fle})).or(Be.extend({type:ke("APP_SYNC_THEME"),payload:ple})).or(Be.extend({type:ke("APP_SYNC_DAPP_DATA"),payload:gle})).or(Be.extend({type:ke("APP_RELOAD")})).or(Be.extend({type:ke("APP_RPC_ABORT")})),frameEvent:Be.extend({type:ke("FRAME_SWITCH_NETWORK_ERROR"),payload:An}).or(Be.extend({type:ke("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Nle})).or(Be.extend({type:ke("FRAME_CONNECT_EMAIL_SUCCESS"),payload:yle})).or(Be.extend({type:ke("FRAME_CONNECT_EMAIL_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:wle})).or(Be.extend({type:ke("FRAME_GET_FARCASTER_URI_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:ble})).or(Be.extend({type:ke("FRAME_CONNECT_FARCASTER_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_CONNECT_OTP_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:ke("FRAME_CONNECT_DEVICE_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:ke("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Ele})).or(Be.extend({type:ke("FRAME_CONNECT_SOCIAL_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_GET_USER_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_GET_USER_SUCCESS"),payload:Ale})).or(Be.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Cle})).or(Be.extend({type:ke("FRAME_SIGN_OUT_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:ke("FRAME_IS_CONNECTED_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_IS_CONNECTED_SUCCESS"),payload:_le})).or(Be.extend({type:ke("FRAME_GET_CHAIN_ID_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Sle})).or(Be.extend({type:ke("FRAME_RPC_REQUEST_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_RPC_REQUEST_SUCCESS"),payload:Rle})).or(Be.extend({type:ke("FRAME_SESSION_UPDATE"),payload:XP})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_SUCCESS"),payload:vle})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Tle})).or(Be.extend({type:ke("FRAME_SYNC_THEME_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:ke("FRAME_SYNC_DAPP_DATA_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:xle})).or(Be.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Ole})).or(Be.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_READY"),payload:Ile})).or(Be.extend({type:ke("FRAME_RELOAD_ERROR"),payload:An})).or(Be.extend({type:ke("FRAME_RELOAD_SUCCESS")}))};function e_(n,e={}){var t;return typeof(e==null?void 0:e.type)=="string"&&((t=e==null?void 0:e.type)==null?void 0:t.includes(n))}function _ue({projectId:n,chainId:e,version:t,enableLogger:r,rpcUrl:s=ce.BLOCKCHAIN_API_RPC_URL}){const i=new URL(Rz);return i.searchParams.set("projectId",n),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",t),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Sue{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ce.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,l,h)=>{function d({data:p}){var y;if(!e_(ze.FRAME_EVENT_KEY,p))return;const g=JC.frameEvent.safeParse(p);if(!g.success){console.warn("W3mFrame: invalid frame event",g.error.message);return}((y=g.data)==null?void 0:y.id)===o&&(l(g.data),window.removeEventListener("message",d))}zs.isClient&&(window.addEventListener("message",d),h.addEventListener("abort",()=>{window.removeEventListener("message",d)}))},onFrameEvent:o=>{zs.isClient&&window.addEventListener("message",({data:l})=>{if(!e_(ze.FRAME_EVENT_KEY,l))return;const h=JC.frameEvent.safeParse(l);h.success?o(h.data):console.warn("W3mFrame: invalid frame event",h.error.message)})},onAppEvent:o=>{zs.isClient&&window.addEventListener("message",({data:l})=>{if(!e_(ze.APP_EVENT_KEY,l))return;const h=JC.appEvent.safeParse(l);h.success||console.warn("W3mFrame: invalid app event",h.error.message),o(l)})},postAppEvent:o=>{var l;if(zs.isClient){if(!((l=this.iframe)!=null&&l.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(zs.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,l)=>{this.frameLoadPromiseResolver={resolve:o,reject:l}}),this.rpcUrl=i,t&&(this.frameLoadPromise=new Promise((o,l)=>{this.frameLoadPromiseResolver={resolve:o,reject:l}}),zs.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=_ue({projectId:e,chainId:r,version:Pz,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var l;(l=this.frameLoadPromiseResolver)==null||l.reject("Unable to load email login dependency")},this.events.onFrameEvent(l=>{var h;l.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(h=this.frameLoadPromiseResolver)==null||h.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...e)}}class Nue{constructor(e){var i;const t=yp({level:Dz}),{logger:r,chunkLoggerController:s}=_S({opts:t});this.logger=Pr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Tue{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Nue(e)),this.abortController=i,this.getActiveCaipNetwork=o;const l=this.getRpcUrl(t);this.w3mFrame=new Sue({projectId:e,isAppClient:!0,chainId:t,enableLogger:r,rpcUrl:l}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(t=>{t.type===ze.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!hr.get(ze.EMAIL_LOGIN_USED_KEY)}getEmail(){return hr.get(ze.EMAIL)}getUsername(){return hr.get(ze.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:ze.APP_RELOAD})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error reloading iframe"),t}}async connectEmail(e){var t;try{zs.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ze.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:ze.APP_CONNECT_DEVICE})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting device"),t}}async connectOtp(e){var t;try{return this.appEvent({type:ze.APP_CONNECT_OTP,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const t=await this.appEvent({type:ze.APP_IS_CONNECTED});return t!=null&&t.isConnected||this.deleteAuthLoginCache(),t}catch(t){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error checking connection"),t}}async getChainId(){var e;try{const t=await this.appEvent({type:ze.APP_GET_CHAIN_ID});return this.setLastUsedChainId(t.chainId),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting chain id"),t}}async getSocialRedirectUri(e){var t;try{return await this.init(),this.appEvent({type:ze.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var t;try{const r=await this.appEvent({type:ze.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var t;try{return this.appEvent({type:ze.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var t;try{const r=await this.appEvent({type:ze.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var t;try{return this.appEvent({type:ze.APP_SYNC_THEME,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var t;try{return this.appEvent({type:ze.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const t=await this.appEvent({type:ze.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(t.smartAccountEnabledNetworks),t}catch(t){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting smart account enabled networks"),t}}async setPreferredAccount(e){var t;try{return this.appEvent({type:ze.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var t,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:ze.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(t=this.w3mLogger)==null||t.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var t;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ze.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:t,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(t),o=await this.appEvent({type:ze.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:t,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:ze.APP_GET_FARCASTER_URI})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting farcaster uri"),t}}async connectFarcaster(){var e;try{const t=await this.appEvent({type:ze.APP_CONNECT_FARCASTER});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting farcaster"),t}}async switchNetwork({chainId:e}){var t;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:ze.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:ze.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error disconnecting"),t}}async request(e){var r,s,i,o,l;const t=e;try{if(jn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const h=e.chainNamespace||"eip155",d=(r=this.getActiveCaipNetwork(h))==null?void 0:r.id;t.chainNamespace=h,t.chainId=d,t.rpcUrl=this.getRpcUrl(d),(s=this.rpcRequestHandler)==null||s.call(this,e);const p=await this.appEvent({type:ze.APP_RPC_REQUEST,payload:t});return(i=this.rpcSuccessHandler)==null||i.call(this,p,t),p}catch(h){throw(o=this.rpcErrorHandler)==null||o.call(this,h,t),(l=this.w3mLogger)==null||l.logger.error({error:h},"Error requesting"),h}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ze.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ze.FRAME_IS_CONNECTED_ERROR&&e(),t.type===ze.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ze.FRAME_GET_USER_SUCCESS&&e(t.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ze.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ze.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===ze.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:jn.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:t,method:r})=>{jn.SAFE_RPC_METHODS.includes(r)||t.abort(),await this.appEvent({type:ze.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(t){(e=this.w3mLogger)==null||e.logger.error({error:t},"Error aborting RPC request")}}async appEvent(e){let t,r;function s(h){return h.replace("@w3m-app/","")}const i=[ze.APP_SYNC_DAPP_DATA,ze.APP_SYNC_THEME,ze.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var h;(h=this.onTimeout)==null||h.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[ze.APP_CONNECT_EMAIL,ze.APP_CONNECT_DEVICE,ze.APP_CONNECT_OTP,ze.APP_CONNECT_SOCIAL,ze.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(t=setTimeout(()=>{var h;(h=this.onTimeout)==null||h.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((h,d)=>{var b,v,E;const p=Math.random().toString(36).substring(7);(E=(b=this.w3mLogger)==null?void 0:(v=b.logger).info)==null||E.call(v,{event:e,id:p},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:p});const g=new AbortController;if(o==="RPC_REQUEST"){const A=e;this.openRpcRequests=[...this.openRpcRequests,{...A.payload,abortController:g}]}g.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?d(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&d(new Error("Something went wrong"))});function y(A,S){var x,T,k;A.id===p&&((T=S==null?void 0:(x=S.logger).info)==null||T.call(x,{framEvent:A,id:p},"Received frame response"),A.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in A&&h(A.payload),h(void 0)):A.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in A&&d(new Error(((k=A.payload)==null?void 0:k.message)||"An error occurred")),d(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(p,A=>y(A,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){hr.set(ze.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){hr.set(ze.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&hr.set(ze.EMAIL,e),hr.set(ze.EMAIL_LOGIN_USED_KEY,"true"),hr.delete(ze.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){hr.delete(ze.EMAIL_LOGIN_USED_KEY),hr.delete(ze.EMAIL),hr.delete(ze.LAST_USED_CHAIN_KEY),hr.delete(ze.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&hr.set(ze.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=hr.get(ze.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){hr.set(ze.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let t=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?t=(s=zr.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?t="eip155":t="solana");const r=this.getActiveCaipNetwork(t);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Cm{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Cm.instance||(Cm.instance=new Tue({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Cm.instance}}var JP={};const xue={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof JP<"u"?JP.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},q2={filterOutDuplicatesByRDNS(n){const e=ye.state.enableEIP6963?_e.state.connectors:[],t=ve.getRecentWallets(),r=e.map(l=>{var h;return(h=l.info)==null?void 0:h.rdns}).filter(Boolean),s=t.map(l=>l.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Le.isMobile()){const l=i.indexOf("io.metamask.mobile");i[l]="io.metamask"}return n.filter(l=>!(l!=null&&l.rdns&&i.includes(String(l.rdns))||!(l!=null&&l.rdns)&&e.some(d=>d.name===l.name)))},filterOutDuplicatesByIds(n){const e=_e.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),t=ve.getRecentWallets(),r=e.map(l=>l.explorerId),s=t.map(l=>l.id),i=r.concat(s);return n.filter(l=>!i.includes(l==null?void 0:l.id))},filterOutDuplicateWallets(n){const e=this.filterOutDuplicatesByRDNS(n);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(n){const{connectors:e}=_e.state,{featuredWalletIds:t}=ye.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,l)=>{var h;return(h=l.info)!=null&&h.rdns&&(o[l.info.rdns]=!0),o},{});return n.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,l)=>{const h=Number(l.installed)-Number(o.installed);if(h!==0)return h;if(t!=null&&t.length){const d=t.indexOf(o.id),p=t.indexOf(l.id);if(d!==-1&&p!==-1)return d-p;if(d!==-1)return-1;if(p!==-1)return 1}return 0})},getConnectOrderMethod(n,e){var h;const t=(n==null?void 0:n.connectMethodsOrder)||((h=ye.state.features)==null?void 0:h.connectMethodsOrder),r=e||_e.state.connectors;if(t)return t;const{injected:s,announced:i}=xb.getConnectorsByType(r,Ge.state.recommended,Ge.state.featured),o=s.filter(xb.showConnector),l=i.filter(xb.showConnector);return o.length||l.length?["wallet","email","social"]:xue.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(n){const e=!!n.rdns&&Ge.state.excludedWallets.some(r=>r.rdns===n.rdns),t=!!n.name&&Ge.state.excludedWallets.some(r=>tr.isLowerCaseMatch(r.name,n.name));return e||t}},xb={getConnectorsByType(n,e,t){const{customWallets:r}=ye.state,s=ve.getRecentWallets(),i=q2.filterOutDuplicateWallets(e),o=q2.filterOutDuplicateWallets(t),l=n.filter(g=>g.type==="MULTI_CHAIN"),h=n.filter(g=>g.type==="ANNOUNCED"),d=n.filter(g=>g.type==="INJECTED"),p=n.filter(g=>g.type==="EXTERNAL");return{custom:r,recent:s,external:p,multiChain:l,announced:h,injected:d,recommended:i,featured:o}},showConnector(n){var s;const e=(s=n.info)==null?void 0:s.rdns,t=!!e&&Ge.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!n.name&&Ge.state.excludedWallets.some(i=>tr.isLowerCaseMatch(i.name,n.name));return!(n.type==="INJECTED"&&(n.name==="Browser Wallet"&&(!Le.isMobile()||Le.isMobile()&&!e&&!xe.checkInstalled())||t||r)||(n.type==="ANNOUNCED"||n.type==="EXTERNAL")&&(t||r))},getIsConnectedWithWC(){return Array.from(M.state.chains.values()).some(t=>_e.getConnectorId(t.namespace)===ce.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:n,featured:e,custom:t,recent:r,announced:s,injected:i,multiChain:o,external:l,overriddenConnectors:h=(d=>(d=ye.state.features)==null?void 0:d.connectorTypeOrder)()??[]}){const y=[{type:"walletConnect",isEnabled:ye.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:t&&t.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:n.length>0}].filter(A=>A.isEnabled),b=new Set(y.map(A=>A.type)),v=h.filter(A=>b.has(A)).map(A=>({type:A,isEnabled:!0})),E=y.filter(({type:A})=>!v.some(({type:x})=>x===A));return Array.from(new Set([...v,...E].map(({type:A})=>A)))},getAuthName({email:n,socialUsername:e,socialProvider:t}){return e?t&&t==="discord"&&e.endsWith("0")?e.slice(0,-1):e:n.length>30?`${n.slice(0,-3)}...`:n},async fetchProviderData(n){var e,t;try{if(n.name==="Browser Wallet"&&!Le.isMobile())return{accounts:[],chainId:void 0};if(n.id===ce.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=n.provider)==null?void 0:e.request({method:"eth_accounts"}),(t=n.provider)==null?void 0:t.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${n.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ib=globalThis,eN=Ib.ShadowRoot&&(Ib.ShadyCSS===void 0||Ib.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tN=Symbol(),eU=new WeakMap;let k6=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==tN)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(eN&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=eU.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&eU.set(t,e))}return e}toString(){return this.cssText}};const ci=n=>new k6(typeof n=="string"?n:n+"",void 0,tN),nf=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+n[i+1],n[0]);return new k6(t,n,tN)},Iue=(n,e)=>{if(eN)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),s=Ib.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=t.cssText,n.appendChild(r)}},tU=eN?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return ci(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Oue,defineProperty:Rue,getOwnPropertyDescriptor:Due,getOwnPropertyNames:Pue,getOwnPropertySymbols:Uue,getPrototypeOf:kue}=Object,dl=globalThis,nU=dl.trustedTypes,Bue=nU?nU.emptyScript:"",t_=dl.reactiveElementPolyfillSupport,_m=(n,e)=>n,V2={toAttribute(n,e){switch(e){case Boolean:n=n?Bue:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},B6=(n,e)=>!Oue(n,e),rU={attribute:!0,type:String,converter:V2,reflect:!1,useDefault:!1,hasChanged:B6};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),dl.litPropertyMetadata??(dl.litPropertyMetadata=new WeakMap);let $d=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=rU){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,t);s!==void 0&&Rue(this.prototype,e,s)}}static getPropertyDescriptor(e,t,r){const{get:s,set:i}=Due(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:s,set(o){const l=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??rU}static _$Ei(){if(this.hasOwnProperty(_m("elementProperties")))return;const e=kue(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(_m("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(_m("properties"))){const t=this.properties,r=[...Pue(t),...Uue(t)];for(const s of r)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,s]of t)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const s=this._$Eu(t,r);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)t.unshift(tU(s))}else e!==void 0&&t.push(tU(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Iue(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostConnected)==null?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostDisconnected)==null?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:V2).toAttribute(t,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const l=r.getPropertyOptions(s),h=typeof l.converter=="function"?{fromAttribute:l.converter}:((i=l.converter)==null?void 0:i.fromAttribute)!==void 0?l.converter:V2;this._$Em=s;const d=h.fromAttribute(t,l.type);this[s]=d??((o=this._$Ej)==null?void 0:o.get(s))??d,this._$Em=null}}requestUpdate(e,t,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??B6)(o,t)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:l}=o,h=this[i];l!==!0||this._$AL.has(i)||h===void 0||this.C(i,void 0,o,h)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(t)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};$d.elementStyles=[],$d.shadowRootOptions={mode:"open"},$d[_m("elementProperties")]=new Map,$d[_m("finalized")]=new Map,t_==null||t_({ReactiveElement:$d}),(dl.reactiveElementVersions??(dl.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sm=globalThis,EE=Sm.trustedTypes,sU=EE?EE.createPolicy("lit-html",{createHTML:n=>n}):void 0,L6="$lit$",jc=`lit$${Math.random().toFixed(9).slice(2)}$`,M6="?"+jc,Lue=`<${M6}>`,hh=document,_0=()=>hh.createComment(""),S0=n=>n===null||typeof n!="object"&&typeof n!="function",nN=Array.isArray,Mue=n=>nN(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",n_=`[ 	
\f\r]`,Qg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,iU=/-->/g,aU=/>/g,Xl=RegExp(`>|${n_}(?:([^\\s"'>=/]+)(${n_}*=${n_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),oU=/'/g,cU=/"/g,$6=/^(?:script|style|textarea|title)$/i,F6=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Tde=F6(1),xde=F6(2),dp=Symbol.for("lit-noChange"),er=Symbol.for("lit-nothing"),lU=new WeakMap,Au=hh.createTreeWalker(hh,129);function H6(n,e){if(!nN(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return sU!==void 0?sU.createHTML(e):e}const $ue=(n,e)=>{const t=n.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Qg;for(let l=0;l<t;l++){const h=n[l];let d,p,g=-1,y=0;for(;y<h.length&&(o.lastIndex=y,p=o.exec(h),p!==null);)y=o.lastIndex,o===Qg?p[1]==="!--"?o=iU:p[1]!==void 0?o=aU:p[2]!==void 0?($6.test(p[2])&&(s=RegExp("</"+p[2],"g")),o=Xl):p[3]!==void 0&&(o=Xl):o===Xl?p[0]===">"?(o=s??Qg,g=-1):p[1]===void 0?g=-2:(g=o.lastIndex-p[2].length,d=p[1],o=p[3]===void 0?Xl:p[3]==='"'?cU:oU):o===cU||o===oU?o=Xl:o===iU||o===aU?o=Qg:(o=Xl,s=void 0);const b=o===Xl&&n[l+1].startsWith("/>")?" ":"";i+=o===Qg?h+Lue:g>=0?(r.push(d),h.slice(0,g)+L6+h.slice(g)+jc+b):h+jc+(g===-2?l:b)}return[H6(n,i+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class N0{constructor({strings:e,_$litType$:t},r){let s;this.parts=[];let i=0,o=0;const l=e.length-1,h=this.parts,[d,p]=$ue(e,t);if(this.el=N0.createElement(d,r),Au.currentNode=this.el.content,t===2||t===3){const g=this.el.content.firstChild;g.replaceWith(...g.childNodes)}for(;(s=Au.nextNode())!==null&&h.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const g of s.getAttributeNames())if(g.endsWith(L6)){const y=p[o++],b=s.getAttribute(g).split(jc),v=/([.?@])?(.*)/.exec(y);h.push({type:1,index:i,name:v[2],strings:b,ctor:v[1]==="."?Hue:v[1]==="?"?zue:v[1]==="@"?jue:fv}),s.removeAttribute(g)}else g.startsWith(jc)&&(h.push({type:6,index:i}),s.removeAttribute(g));if($6.test(s.tagName)){const g=s.textContent.split(jc),y=g.length-1;if(y>0){s.textContent=EE?EE.emptyScript:"";for(let b=0;b<y;b++)s.append(g[b],_0()),Au.nextNode(),h.push({type:2,index:++i});s.append(g[y],_0())}}}else if(s.nodeType===8)if(s.data===M6)h.push({type:2,index:i});else{let g=-1;for(;(g=s.data.indexOf(jc,g+1))!==-1;)h.push({type:7,index:i}),g+=jc.length-1}i++}}static createElement(e,t){const r=hh.createElement("template");return r.innerHTML=e,r}}function fp(n,e,t=n,r){var o,l;if(e===dp)return e;let s=r!==void 0?(o=t._$Co)==null?void 0:o[r]:t._$Cl;const i=S0(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((l=s==null?void 0:s._$AO)==null||l.call(s,!1),i===void 0?s=void 0:(s=new i(n),s._$AT(n,t,r)),r!==void 0?(t._$Co??(t._$Co=[]))[r]=s:t._$Cl=s),s!==void 0&&(e=fp(n,s._$AS(n,e.values),s,r)),e}class Fue{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??hh).importNode(t,!0);Au.currentNode=s;let i=Au.nextNode(),o=0,l=0,h=r[0];for(;h!==void 0;){if(o===h.index){let d;h.type===2?d=new cy(i,i.nextSibling,this,e):h.type===1?d=new h.ctor(i,h.name,h.strings,this,e):h.type===6&&(d=new que(i,this,e)),this._$AV.push(d),h=r[++l]}o!==(h==null?void 0:h.index)&&(i=Au.nextNode(),o++)}return Au.currentNode=hh,s}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class cy{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,r,s){this.type=2,this._$AH=er,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=fp(this,e,t),S0(e)?e===er||e==null||e===""?(this._$AH!==er&&this._$AR(),this._$AH=er):e!==this._$AH&&e!==dp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Mue(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==er&&S0(this._$AH)?this._$AA.nextSibling.data=e:this.T(hh.createTextNode(e)),this._$AH=e}$(e){var i;const{values:t,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=N0.createElement(H6(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(t);else{const o=new Fue(s,this),l=o.u(this.options);o.p(t),this.T(l),this._$AH=o}}_$AC(e){let t=lU.get(e.strings);return t===void 0&&lU.set(e.strings,t=new N0(e)),t}k(e){nN(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,s=0;for(const i of e)s===t.length?t.push(r=new cy(this.O(_0()),this.O(_0()),this,this.options)):r=t[s],r._$AI(i),s++;s<t.length&&(this._$AR(r&&r._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,t);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class fv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,s,i){this.type=1,this._$AH=er,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=er}_$AI(e,t=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=fp(this,e,t,0),o=!S0(e)||e!==this._$AH&&e!==dp,o&&(this._$AH=e);else{const l=e;let h,d;for(e=i[0],h=0;h<i.length-1;h++)d=fp(this,l[r+h],t,h),d===dp&&(d=this._$AH[h]),o||(o=!S0(d)||d!==this._$AH[h]),d===er?e=er:e!==er&&(e+=(d??"")+i[h+1]),this._$AH[h]=d}o&&!s&&this.j(e)}j(e){e===er?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Hue extends fv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===er?void 0:e}}class zue extends fv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==er)}}class jue extends fv{constructor(e,t,r,s,i){super(e,t,r,s,i),this.type=5}_$AI(e,t=this){if((e=fp(this,e,t,0)??er)===dp)return;const r=this._$AH,s=e===er&&r!==er||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==er&&(r===er||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class que{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){fp(this,e)}}const r_=Sm.litHtmlPolyfillSupport;r_==null||r_(N0,cy),(Sm.litHtmlVersions??(Sm.litHtmlVersions=[])).push("3.3.1");const Vue=(n,e,t)=>{const r=(t==null?void 0:t.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(t==null?void 0:t.renderBefore)??null;r._$litPart$=s=new cy(e.insertBefore(_0(),i),i,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qu=globalThis;class Ob extends $d{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Vue(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return dp}}var mU;Ob._$litElement$=!0,Ob.finalized=!0,(mU=Qu.litElementHydrateSupport)==null||mU.call(Qu,{LitElement:Ob});const s_=Qu.litElementPolyfillSupport;s_==null||s_({LitElement:Ob});(Qu.litElementVersions??(Qu.litElementVersions=[])).push("4.2.1");let Nm,fl,pl;function Ide(n,e){Nm=document.createElement("style"),fl=document.createElement("style"),pl=document.createElement("style"),Nm.textContent=rf(n).core.cssText,fl.textContent=rf(n).dark.cssText,pl.textContent=rf(n).light.cssText,document.head.appendChild(Nm),document.head.appendChild(fl),document.head.appendChild(pl),z6(e)}function z6(n){fl&&pl&&(n==="light"?(fl.removeAttribute("media"),pl.media="enabled"):(pl.removeAttribute("media"),fl.media="enabled"))}function Gue(n){Nm&&fl&&pl&&(Nm.textContent=rf(n).core.cssText,fl.textContent=rf(n).dark.cssText,pl.textContent=rf(n).light.cssText)}function rf(n){return{core:nf`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ci(n!=null&&n["--w3m-color-mix-strength"]?`${n["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ci((n==null?void 0:n["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ci((n==null?void 0:n["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ci((n==null?void 0:n["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ci((n==null?void 0:n["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:nf`
      :root {
        --w3m-color-mix: ${ci((n==null?void 0:n["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ci(ko(n,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ci(ko(n,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:nf`
      :root {
        --w3m-color-mix: ${ci((n==null?void 0:n["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ci(ko(n,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ci(ko(n,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Ode=nf`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Rde=nf`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Dde=nf`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,sf={hexStringToNumber(n){const e=n.startsWith("0x")?n.slice(2):n;return parseInt(e,16)},numberToHexString(n){return`0x${n.toString(16)}`},async getUserInfo(n){const[e,t]=await Promise.all([sf.getAddresses(n),sf.getChainId(n)]);return{chainId:t,addresses:e}},async getChainId(n){const e=await n.request({method:"eth_chainId"});return Number(e)},async getAddress(n){const[e]=await n.request({method:"eth_accounts"});return e},async getAddresses(n){return await n.request({method:"eth_accounts"})},async addEthereumChain(n,e){var r,s;const t=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await n.request({method:"wallet_addEthereumChain",params:[{chainId:sf.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Pa.NetworkImageIds[e.id]]}]})}},Rd={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},Kue=q5({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),Wue=q5({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function ly(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const uU=ly({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),hU=ly({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});ly({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});ly({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});ly({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Yue={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Fa={getMethodsByChainNamespace(n){return Yue[n]||[]},createDefaultNamespace(n){return{methods:this.getMethodsByChainNamespace(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(n,e){if(!e)return{...n};const t={...n},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{t[s]&&(t[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{t[s]&&(t[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{t[s]&&(t[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[l,h]=i.split(":");!l||!h||!t[l]||(t[l].rpcMap||(t[l].rpcMap={}),s.has(l)||(t[l].rpcMap={},s.add(l)),t[l].rpcMap[h]=o)})}return t},createNamespaces(n,e){const t=n.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:l}=s,h=l.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const d=`${o}:${i}`,p=r[o];switch(p.chains.push(d),d){case uU.caipNetworkId:p.chains.push(uU.deprecatedCaipNetworkId);break;case hU.caipNetworkId:p.chains.push(hU.deprecatedCaipNetworkId);break}return p!=null&&p.rpcMap&&h&&(p.rpcMap[i]=h),r},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async n=>{var r;const e=await fm.resolveName(n);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(n={}){return Object.values(n).flatMap(e=>{const t=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...t,...r]))})},isSessionEventData(n){return typeof n=="object"&&n!==null&&"id"in n&&"topic"in n&&"params"in n&&typeof n.params=="object"&&n.params!==null&&"chainId"in n.params&&"event"in n.params&&typeof n.params.event=="object"&&n.params.event!==null},isOriginAllowed(n,e,t){for(const r of[...e,...t])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(n))return!0}else try{if(new URL(r).origin===n)return!0}catch{if(r===n)return!0}return!1},listenWcProvider({universalProvider:n,namespace:e,onConnect:t,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){t&&n.on("connect",()=>{const l=Fa.getWalletConnectAccounts(n,e);t(l)}),r&&n.on("disconnect",()=>{r()}),s&&n.on("session_event",l=>{if(Fa.isSessionEventData(l)){const{name:h,data:d}=l.params.event;if(h==="accountsChanged"&&Array.isArray(d)){const p=d.filter(g=>Le.isCaipAddress(g)).map(g=>zr.parseCaipAddress(g)).filter(g=>g.chainNamespace===e);s(p)}}}),i&&n.on("chainChanged",l=>{i(l)}),o&&n.on("display_uri",l=>{o(l)})},getWalletConnectAccounts(n,e){var s,i,o,l;const t=new Set,r=(l=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:l.map(h=>zr.parseCaipAddress(h)).filter(({address:h})=>t.has(h.toLowerCase())?!1:(t.add(h.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Que{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ce.CHAIN.EVM:await this.syncEVMConnections(e);break;case ce.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ce.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:h,hasConnected:d}=s(l.id);return!h&&d}).map(async l=>{if(l.id===ce.CONNECTOR_ID.WALLET_CONNECT){const h=Fa.getWalletConnectAccounts(r,this.namespace),d=t.find(p=>{var g,y;return p.chainNamespace===this.namespace&&p.id.toString()===((y=(g=h[0])==null?void 0:g.chainId)==null?void 0:y.toString())});h.length>0&&i({connectorId:l.id,accounts:h.map(p=>({address:p.address})),caipNetwork:d})}else{const{accounts:h,chainId:d}=await xb.fetchProviderData(l);if(h.length>0&&d){const p=t.find(g=>g.chainNamespace===this.namespace&&g.id.toString()===d.toString());i({connectorId:l.id,accounts:h.map(g=>({address:g})),caipNetwork:p}),l.provider&&l.id!==ce.CONNECTOR_ID.AUTH&&l.id!==ce.CONNECTOR_ID.WALLET_CONNECT&&o(l.id,l.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:h,hasConnected:d}=s(l.id);return!h&&d}).map(async l=>{if(l.id===ce.CONNECTOR_ID.WALLET_CONNECT){const h=Fa.getWalletConnectAccounts(r,this.namespace);h.length>0&&i({connectorId:l.id,accounts:h.map(d=>({address:d.address})),caipNetwork:t})}else{const h=await l.connect({chainId:t==null?void 0:t.id});h&&(i({connectorId:l.id,accounts:[{address:h}],caipNetwork:t}),o(l.id,l.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:h,hasConnected:d}=s(l.id);return!h&&d}).map(async l=>{var y,b,v,E,A,S;if(l.id===ce.CONNECTOR_ID.WALLET_CONNECT){const x=Fa.getWalletConnectAccounts(r,this.namespace);x.length>0&&i({connectorId:l.id,accounts:x.map(T=>({address:T.address})),caipNetwork:t});return}const h=await l.connect(),d=await l.getAccountAddresses();let p=d==null?void 0:d.map(x=>Le.createAccount(ce.CHAIN.BITCOIN,x.address,x.purpose||"payment",x.publicKey,x.path));if(p&&p.length>1&&(p=[{namespace:ce.CHAIN.BITCOIN,publicKey:((y=p[Rd.ACCOUNT_INDEXES.PAYMENT])==null?void 0:y.publicKey)??"",path:((b=p[Rd.ACCOUNT_INDEXES.PAYMENT])==null?void 0:b.path)??"",address:((v=p[Rd.ACCOUNT_INDEXES.PAYMENT])==null?void 0:v.address)??"",type:"payment"},{namespace:ce.CHAIN.BITCOIN,publicKey:((E=p[Rd.ACCOUNT_INDEXES.ORDINAL])==null?void 0:E.publicKey)??"",path:((A=p[Rd.ACCOUNT_INDEXES.ORDINAL])==null?void 0:A.path)??"",address:((S=p[Rd.ACCOUNT_INDEXES.ORDINAL])==null?void 0:S.address)??"",type:"ordinal"}]),!(l.chains.find(x=>x.id===(t==null?void 0:t.id))||l.chains[0]))throw new Error("The connector does not support any of the requested chains");h&&(o(l.id,l.provider),i({connectorId:l.id,accounts:p.map(x=>({address:x.address,type:x.type})),caipNetwork:t}))}))}getConnection({address:e,connectorId:t,connections:r,connectors:s}){if(t){const o=r.find(d=>tr.isLowerCaseMatch(d.connectorId,t));if(!o)return null;const l=s.find(d=>tr.isLowerCaseMatch(d.id,o.connectorId)),h=e?o.accounts.find(d=>tr.isLowerCaseMatch(d.address,e)):o.accounts[0];return{...o,account:h,connector:l}}const i=r.find(o=>o.accounts.length>0&&s.some(l=>tr.isLowerCaseMatch(l.id,o.connectorId)));if(i){const[o]=i.accounts,l=s.find(h=>tr.isLowerCaseMatch(h.id,i.connectorId));return{...i,account:o,connector:l}}return null}}const Bo={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class rN{constructor({provider:e,namespace:t}){this.id=ce.CONNECTOR_ID.WALLET_CONNECT,this.name=Pa.ConnectorNamesMap[ce.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Pa.ConnectorImageIds[ce.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=M.getCaipNetworks.bind(M),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const t=this.getCaipNetworks(),r=ye.state.universalProviderConfigOverride,s=Fa.createNamespaces(t,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(t=>t.caipNetworkId);return Hs.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Zue})}}const Zue=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Xue=[ce.CONNECTOR_ID.AUTH,ce.CONNECTOR_ID.WALLET_CONNECT];class j6{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=t=>M.getCaipNetworks(t),this.getConnectorId=t=>_e.getConnectorId(t),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new Que({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:t}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(t==null?void 0:t.toString()));e&&r&&this.addConnection({connectorId:ce.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ce.CONNECTOR_ID.AUTH,type:"AUTH",name:ce.CONNECTOR_NAMES.AUTH,provider:e,imageId:Pa.ConnectorImageIds[ce.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>t.has(r.id)?!1:(t.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const t=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>t.has(r.connectorId.toLowerCase())?!1:(t.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(t=>!tr.isLowerCaseMatch(t.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,t){Fe.setStatus(e,t)}on(e,t){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=qs(t.chainNamespace);await i.switchNetwork({chainId:t.caipNetworkId});const l=await i.getUser({chainId:t.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",l)}}getWalletConnectConnector(){const e=this.connectors.find(t=>t instanceof rN);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,t){if(e.length>0){const{address:r,chainId:s}=Le.getAccount(e[0]),i=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(l=>l.id===t);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:t,accounts:e.map(l=>{const{address:h}=Le.getAccount(l);return{address:h}}),caipNetwork:i}))}}onAccountsChanged(e,t,r=!0){var s,i;if(e.length>0){const{address:o}=Le.getAccount(e[0]),l=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});o&&tr.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),t)&&this.emit("accountChanged",{address:o,chainId:(i=l==null?void 0:l.caipNetwork)==null?void 0:i.id,connector:l==null?void 0:l.connector}),this.addConnection({connectorId:t,accounts:e.map(h=>{const{address:d}=Le.getAccount(h);return{address:d}}),caipNetwork:l==null?void 0:l.caipNetwork})}else r&&this.onDisconnect(t)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),tr.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,t){var o;const r=typeof e=="string"&&e.startsWith("0x")?sf.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===r);s&&this.addConnection({connectorId:t,accounts:s.accounts,caipNetwork:i}),tr.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),t)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,t){if(Xue.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",i),t.on("accountsChanged",r),t.on("chainChanged",s),this.providerHandlers[e]={provider:t,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:t,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];t.removeListener("disconnect",r),t.removeListener("accountsChanged",s),t.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var t,r;const e=(t=this.connectionManager)==null?void 0:t.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class Jue extends j6{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new rN({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,l;const t=this.provider,r=((l=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:l.map(h=>{const[,,d]=h.split(":");return d}).filter((h,d,p)=>p.indexOf(h)===d))||[];return Promise.resolve({accounts:r.map(h=>Le.createAccount(e,h,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,l,h,d;if(!(e.caipNetwork&&$t.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""};if(Fe.state.balanceLoading&&e.chainId===((h=M.state.activeCaipNetwork)==null?void 0:h.id))return{balance:Fe.state.balance||"0.00",symbol:Fe.state.balanceSymbol||""};const s=(await Fe.fetchTokenBalance()).find(p=>{var g,y;return p.chainId===`${(g=e.caipNetwork)==null?void 0:g.chainNamespace}:${e.chainId}`&&p.symbol===((y=e.caipNetwork)==null?void 0:y.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)||""}}async signMessage(e){var o,l,h;const{provider:t,message:r,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=M.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ce.CHAIN.SOLANA?i=(await t.request({method:"solana_signMessage",params:{message:vp.encode(new TextEncoder().encode(r)),pubkey:s}},(l=M.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)).signature:i=await t.request({method:"personal_sign",params:[r,s]},(h=M.state.activeCaipNetwork)==null?void 0:h.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,l,h,d;const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===ce.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:L3(t.id)}]}))}catch(p){if(p.code===Bo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||p.code===Bo.ERROR_INVALID_CHAIN_ID||p.code===Bo.ERROR_CODE_DEFAULT||((o=(i=p==null?void 0:p.data)==null?void 0:i.originalError)==null?void 0:o.code)===Bo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((d=r.provider)==null?void 0:d.request({method:"wallet_addEthereumChain",params:[{chainId:L3(t.id),rpcUrls:[(l=t==null?void 0:t.rpcUrls.chainDefault)==null?void 0:l.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[(h=t.blockExplorers)==null?void 0:h.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const ehe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],cb={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return!!n.isEnabled&&e.includes("email")},processFallback:n=>n===void 0?$t.DEFAULT_REMOTE_FEATURES.email:!!n},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:n=>n===void 0?$t.DEFAULT_REMOTE_FEATURES.socials:typeof n=="boolean"?n?$t.DEFAULT_REMOTE_FEATURES.socials:!1:n},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?$t.DEFAULT_REMOTE_FEATURES.swaps:typeof n=="boolean"?n?$t.DEFAULT_REMOTE_FEATURES.swaps:!1:n},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?$t.DEFAULT_REMOTE_FEATURES.onramp:typeof n=="boolean"?n?$t.DEFAULT_REMOTE_FEATURES.onramp:!1:n},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?$t.DEFAULT_REMOTE_FEATURES.activity:!!n},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?$t.DEFAULT_REMOTE_FEATURES.reownBranding:!!n},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:()=>$t.DEFAULT_REMOTE_FEATURES.multiWallet}},the={localSettingsOverridden:new Set,getApiConfig(n,e){return e==null?void 0:e.find(t=>t.id===n)},addWarning(n,e){if(n!==void 0){const t=cb[e],r=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(n,e,t,r,s){const i=cb[n],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const l=this.getApiConfig(i.apiFeatureName,t);return(l==null?void 0:l.config)===null?this.processFallbackFeature(n,o):l!=null&&l.config?(o!==void 0&&this.addWarning(o,n),this.processApiFeature(n,l)):!1}return this.processFallbackFeature(n,o)},processApiFeature(n,e){return cb[n].processApi(e)},processFallbackFeature(n,e){return cb[n].processFallback(e)},async fetchRemoteFeatures(n){const e=n.basic??!1,t=n.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Ge.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?$t.DEFAULT_REMOTE_FEATURES:$t.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of ehe){const l=this.processFeature(o,t,r,s,e);Object.assign(i,{[o]:l})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),$t.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;$n.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class nhe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,r)=>{var s,i,o;if(t){const l=(s=M.getCaipNetworks(t))==null?void 0:s.find(p=>p.id===r);if(l)return l;const h=(i=M.getNetworkData(t))==null?void 0:i.caipNetwork;return h||((o=M.getRequestedCaipNetworks(t).filter(p=>p.chainNamespace===t))==null?void 0:o[0])}return M.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>M.getCaipNetworks(t),this.getActiveChainNamespace=()=>M.state.activeChain,this.setRequestedCaipNetworks=(t,r)=>{M.setRequestedCaipNetworks(t,r)},this.getApprovedCaipNetworkIds=()=>M.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>M.state.activeChain===t||!t?M.state.activeCaipAddress:M.getAccountProp("caipAddress",t),this.setClientId=t=>{We.setClientId(t)},this.getProvider=t=>Rt.getProvider(t),this.getProviderType=t=>Rt.getProviderId(t),this.getPreferredAccountType=t=>qs(t),this.setCaipAddress=(t,r)=>{Fe.setCaipAddress(t,r)},this.setBalance=(t,r,s)=>{Fe.setBalance(t,r,s)},this.setProfileName=(t,r)=>{Fe.setProfileName(t,r)},this.setProfileImage=(t,r)=>{Fe.setProfileImage(t,r)},this.setUser=(t,r)=>{Fe.setUser(t,r)},this.resetAccount=t=>{Fe.resetAccount(t)},this.setCaipNetwork=t=>{M.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,r)=>{M.setChainNetworkData(r,{caipNetwork:t})},this.setStatus=(t,r)=>{Fe.setStatus(t,r),_e.isConnected()?ve.setConnectionStatus("connected"):ve.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>M.getAccountProp("address",t),this.setConnectors=t=>{const r=[..._e.state.allConnectors,...t];_e.setConnectors(r)},this.setConnections=(t,r)=>{ve.setConnections(t,r),xe.setConnections(t,r)},this.fetchIdentity=t=>We.fetchIdentity(t),this.getReownName=t=>fm.getNamesForAddress(t),this.getConnectors=()=>_e.getConnectors(),this.getConnectorImage=t=>S5.getConnectorImage(t),this.getConnections=t=>this.remoteFeatures.multiWallet?Wb.getConnectionsData(t).connections:($n.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=t=>this.remoteFeatures.multiWallet?Wb.getConnectionsData(t).recentConnections:($n.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async t=>{if(!this.remoteFeatures.multiWallet){$n.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await xe.switchConnection(t)},this.deleteConnection=t=>{if(!this.remoteFeatures.multiWallet){$n.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}ve.deleteAddressFromConnection(t),xe.syncStorageConnections()},this.setConnectedWalletInfo=(t,r)=>{const s=Rt.getProviderId(r),i=t?{...t,type:s}:void 0;Fe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!M.state.activeCaipAddress,this.addAddressLabel=(t,r,s)=>{Fe.addAddressLabel(t,r,s)},this.removeAddressLabel=(t,r)=>{Fe.removeAddressLabel(t,r)},this.getAddress=t=>M.state.activeChain===t||!t?Fe.state.address:M.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>M.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{M.resetNetwork(t)},this.addConnector=t=>{_e.addConnector(t)},this.resetWcConnection=()=>{xe.resetWcConnection()},this.setAddressExplorerUrl=(t,r)=>{Fe.setAddressExplorerUrl(t,r)},this.setSmartAccountDeployed=(t,r)=>{Fe.setSmartAccountDeployed(t,r)},this.setPreferredAccountType=(t,r)=>{M.setAccountProp("preferredAccountType",t,r)},this.setEIP6963Enabled=t=>{ye.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=t==null?void 0:t.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var t,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),ye.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await the.fetchRemoteFeatures(e),ye.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&W_.setOnrampProviders(this.remoteFeatures.onramp),((t=ye.state.remoteFeatures)!=null&&t.email||Array.isArray((r=ye.state.remoteFeatures)==null?void 0:r.socials)&&((s=ye.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Ge.fetchAllowedOrigins();if(!e||!Le.isClient()){$n.open(Fr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const t=window.location.origin;Fa.isOriginAllowed(t,e,Bo.DEFAULT_ALLOWED_ANCESTORS)||$n.open(Fr.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){$n.open(Fr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":$n.open(Fr.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const t=e.cause instanceof Error?e.cause:e;$n.open({shortMessage:Fr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Fr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(t.message)},"error");break}default:$n.open(Fr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...t}=e;delete t.adapters,delete t.universalProvider,Gt.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&fs.setThemeMode(e.themeMode),e.themeVariables&&fs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");M.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&M.setActiveCaipNetwork(t)}initializeConnectionController(e){xe.initialize(e.adapters??[]),xe.setWcBasic(e.basic??!1)}initializeConnectorController(){_e.initialize(this.chainNamespaces)}initializeProjectSettings(e){ye.setProjectId(e.projectId),ye.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;ye.setDebug(e.debug!==!1),ye.setEnableWalletConnect(e.enableWalletConnect!==!1),ye.setEnableWalletGuide(e.enableWalletGuide!==!1),ye.setEnableWallets(e.enableWallets!==!1),ye.setEIP6963Enabled(e.enableEIP6963!==!1),ye.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ye.setEnableReconnect(e.enableReconnect!==!1),ye.setEnableAuthLogger(e.enableAuthLogger!==!1),ye.setCustomRpcUrls(e.customRpcUrls),ye.setEnableEmbedded(e.enableEmbedded),ye.setAllWallets(e.allWallets),ye.setIncludeWalletIds(e.includeWalletIds),ye.setExcludeWalletIds(e.excludeWalletIds),ye.setFeaturedWalletIds(e.featuredWalletIds),ye.setTokens(e.tokens),ye.setTermsConditionsUrl(e.termsConditionsUrl),ye.setPrivacyPolicyUrl(e.privacyPolicyUrl),ye.setCustomWallets(e.customWallets),ye.setFeatures(e.features),ye.setAllowUnsupportedChain(e.allowUnsupportedChain),ye.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ye.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ye.setDefaultAccountTypes(e.defaultAccountTypes);const t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),ye.setMetadata(e.metadata),ye.setDisableAppend(e.disableAppend),ye.setEnableEmbedded(e.enableEmbedded),ye.setSIWX(e.siwx),!e.projectId){$n.open(Fr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===ce.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ye.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,t,r,s;return Le.isClient()?{name:((t=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:t.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=Ld.getUnsupportedNetwork(`${t}:${e}`);M.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ld.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return Ld.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Ld.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return t?Ld.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,t){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:i}=M.getAccountData(e)||{};return(i||!ye.state.enableReconnect)&&(s!=null&&s.disconnect)&&(r=await s.disconnect({id:t})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var d;const e=M.state.activeChain,t=this.getAdapter(e),r=(d=this.getCaipNetwork(e))==null?void 0:d.id,s=xe.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!t)throw new Error("Adapter not found");const l=await t.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((l==null?void 0:l.clientId)||null),ve.setConnectedNamespaces([...M.state.chains.keys()]),await this.syncWalletConnectAccount(),await Hs.initializeIfEnabled()},connectExternal:async({id:e,address:t,info:r,type:s,provider:i,chain:o,caipNetwork:l,socialUri:h})=>{var v,E,A,S,x,T;const d=M.state.activeChain,p=o||d,g=this.getAdapter(p);if(o&&o!==d&&!l){const k=this.getCaipNetworks().find(R=>R.chainNamespace===o);k&&this.setCaipNetwork(k)}if(!p)throw new Error("connectExternal: namespace not found");if(!g)throw new Error("connectExternal: adapter not found");const y=this.getCaipNetwork(p),b=await g.connect({id:e,address:t,info:r,type:s,provider:i,socialUri:h,chainId:(l==null?void 0:l.id)||(y==null?void 0:y.id),rpcUrl:((A=(E=(v=l==null?void 0:l.rpcUrls)==null?void 0:v.default)==null?void 0:E.http)==null?void 0:A[0])||((T=(x=(S=y==null?void 0:y.rpcUrls)==null?void 0:S.default)==null?void 0:x.http)==null?void 0:T[0])});if(b)return ve.addConnectedNamespace(p),this.syncProvider({...b,chainNamespace:p}),this.setStatus("connected",p),this.syncConnectedWalletInfo(p),ve.removeDisconnectedConnectorId(e,p),{address:b.address}},reconnectExternal:async({id:e,info:t,type:r,provider:s})=>{var l;const i=M.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:t,type:r,provider:s,chainId:(l=this.getCaipNetwork())==null?void 0:l.id})),ve.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var d;const{id:t,chainNamespace:r,initialDisconnect:s}=e||{},i=r||M.state.activeChain,o=_e.getConnectorId(i),l=t===ce.CONNECTOR_ID.AUTH||o===ce.CONNECTOR_ID.AUTH,h=t===ce.CONNECTOR_ID.WALLET_CONNECT||o===ce.CONNECTOR_ID.WALLET_CONNECT;try{const p=Array.from(M.state.chains.keys());let g=r?[r]:p;(h||l)&&(g=p);const y=g.map(async E=>{const A=_e.getConnectorId(E),S=await this.disconnectNamespace(E,t||A);S&&(l&&ve.deleteConnectedSocialProvider(),S.connections.forEach(x=>{ve.addDisconnectedConnectorId(x.connectorId,E)})),s&&this.onDisconnectNamespace({chainNamespace:E,closeModal:!1})}),b=await Promise.allSettled(y);Mt.resetSend(),xe.resetWcConnection(),(d=Hs.getSIWX())!=null&&d.signOutOnDisconnect&&await Hs.clearSessions(),_e.setFilterByNamespace(void 0),xe.syncStorageConnections();const v=b.filter(E=>E.status==="rejected");if(v.length>0)throw new Error(v.map(E=>E.reason.message).join(", "));Gt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(p){throw new Error(`Failed to disconnect chains: ${p.message}`)}},checkInstalled:e=>e?e.some(t=>{var r;return!!((r=window.ethereum)!=null&&r[String(t)])}):!!window.ethereum,signMessage:async e=>{const t=M.state.activeChain,r=this.getAdapter(M.state.activeChain);if(!t)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:Fe.state.address,provider:Rt.getProvider(t)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const t=e.chainNamespace;if(!t)throw new Error("sendTransaction: namespace not found");if($t.SEND_SUPPORTED_NAMESPACES.includes(t)){const r=this.getAdapter(t);if(!r)throw new Error("sendTransaction: adapter not found");const s=Rt.getProvider(t),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const t=e.chainNamespace;if(t===ce.CHAIN.EVM){const r=this.getAdapter(t);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Rt.getProvider(t),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var t;const e=M.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Fe.state.address,chainId:Number((t=this.getCaipNetwork())==null?void 0:t.id),chainNamespace:e}),Fe.state.profileImage||!1},getEnsAddress:async e=>await Fa.resolveReownName(e),writeContract:async e=>{const t=M.state.activeChain,r=this.getAdapter(t);if(!t)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Rt.getProvider(t);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const l=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return l==null?void 0:l.hash},parseUnits:(e,t)=>{const r=this.getAdapter(M.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:t}))??0n},formatUnits:(e,t)=>{const r=this.getAdapter(M.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:t}))??"0"},getCapabilities:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("getCapabilities: adapter is required but got undefined");return await(t==null?void 0:t.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("grantPermissions: adapter is required but got undefined");return await(t==null?void 0:t.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("revokePermissions: adapter is required but got undefined");return t!=null&&t.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("walletGetAssets: adapter is required but got undefined");return await(t==null?void 0:t.walletGetAssets(e))??{}},updateBalance:e=>{const t=this.getCaipNetwork(e);!t||!Fe.state.address||this.updateNativeBalance(Fe.state.address,t==null?void 0:t.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},xe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var t,r,s,i,o;if(Rt.getProviderId(M.state.activeChain)===Dt.CONNECTOR_TYPE_WALLET_CONNECT){const l=(r=(t=this.universalProvider)==null?void 0:t.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(l)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Rt.getProvider(t),i=Rt.getProviderId(t);if(e.chainNamespace===M.state.activeChain){const o=this.getAdapter(t);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Dt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(t);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{const r=t.chains||[],s=t.accounts.map(i=>{const{chainId:o,chainNamespace:l}=zr.parseCaipAddress(i);return`${l}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),t[r]=s):t[r]=new Jue({namespace:r,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){var t;this.onConnectors(e),this.listenAdapter(e),await((t=this.chainAdapters)==null?void 0:t[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const t=this.getAdapter(e);t==null||t.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=ve.getConnectionStatus();ye.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ve.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),l=M.state.activeChain===e,h=M.getAccountProp("address",e);if(o){const d=l&&s?s:h;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),t.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),t.on("connections",s=>{this.setConnections(s,e)}),t.on("pendingTransactions",()=>{const s=Fe.state.address,i=M.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),t.on("accountChanged",({address:s,chainId:i,connector:o})=>{var h,d;const l=M.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),l&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):l&&((h=M.state.activeCaipNetwork)!=null&&h.id)?this.syncAccount({address:s,chainId:(d=M.state.activeCaipNetwork)==null?void 0:d.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),ve.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var t,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>xe.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===ce.CHAIN.EVM&&Le.isSafeApp()&&_e.setConnectorId(ce.CONNECTOR_ID.SAFE,e);const t=_e.getConnectorId(e);switch(this.setStatus("connecting",e),t){case ce.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ce.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:t,closeModal:r}=e||{};M.resetAccount(t),M.resetNetwork(t),ve.removeConnectedNamespace(t);const s=Array.from(M.state.chains.keys());(t?[t]:s).forEach(o=>ve.addDisconnectedConnectorId(_e.getConnectorId(o)||"",o)),_e.removeConnectorId(t),Rt.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t),r!==!1&&Pt.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const t=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!t,caipNetwork:r,getConnectorStorageInfo(i){const l=ve.getConnections()[e]??[];return{hasDisconnected:ve.isConnectorDisconnected(i,e),hasConnected:l.some(h=>tr.isLowerCaseMatch(h.connectorId,i))}}})}))}async syncAdapterConnection(e){var l,h,d;const t=this.getAdapter(e),r=_e.getConnectorId(e),s=this.getCaipNetwork(e),o=_e.getConnectors(e).find(p=>p.id===r);try{if(!t||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const p=await(t==null?void 0:t.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(d=(h=(l=s==null?void 0:s.rpcUrls)==null?void 0:l.default)==null?void 0:h.http)==null?void 0:d[0]}));p?(this.syncProvider({...p,chainNamespace:e}),await this.syncAccount({...p,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),t=this.chainNamespaces.map(async i=>{var p,g,y,b,v;const o=this.getAdapter(i);if(!o)return;const l=((b=(y=(g=(p=this.universalProvider)==null?void 0:p.session)==null?void 0:g.namespaces)==null?void 0:y[i])==null?void 0:b.accounts)||[],h=(v=M.state.activeCaipNetwork)==null?void 0:v.id,d=l.find(E=>{const{chainId:A}=zr.parseCaipAddress(E);return A===(h==null?void 0:h.toString())})||l[0];if(d){const E=zr.validateCaipAddress(d),{chainId:A,address:S}=zr.parseCaipAddress(E);if(Rt.setProviderId(i,Dt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&M.state.activeCaipNetwork&&o.namespace!==ce.CHAIN.EVM){const x=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:M.state.activeCaipNetwork});Rt.setProvider(i,x)}else Rt.setProvider(i,this.universalProvider);_e.setConnectorId(ce.CONNECTOR_ID.WALLET_CONNECT,i),ve.addConnectedNamespace(i),await this.syncAccount({address:S,chainId:A,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await M.setApprovedCaipNetworksData(i)});await Promise.all(t)}syncProvider({type:e,provider:t,id:r,chainNamespace:s}){Rt.setProviderId(s,e),Rt.setProvider(s,t),_e.setConnectorId(r,s)}async syncAccount(e){var g,y;const t=e.chainNamespace===M.state.activeChain,r=M.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:l}=ve.getActiveNetworkProps(),h=i||l,d=((g=M.state.activeCaipNetwork)==null?void 0:g.name)===ce.UNSUPPORTED_NETWORK_NAME,p=M.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(d&&!p)&&h){let b=this.getCaipNetworks().find(A=>A.id.toString()===h.toString()),v=this.getCaipNetworks().find(A=>A.chainNamespace===o);if(!p&&!b&&!v){const A=this.getApprovedCaipNetworkIds()||[],S=A.find(T=>{var k;return((k=zr.parseCaipNetworkId(T))==null?void 0:k.chainId)===h.toString()}),x=A.find(T=>{var k;return((k=zr.parseCaipNetworkId(T))==null?void 0:k.chainNamespace)===o});b=this.getCaipNetworks().find(T=>T.caipNetworkId===S),v=this.getCaipNetworks().find(T=>T.caipNetworkId===x||"deprecatedCaipNetworkId"in T&&T.deprecatedCaipNetworkId===x)}const E=b||v;(E==null?void 0:E.chainNamespace)===M.state.activeChain?ye.state.enableNetworkSwitch&&!ye.state.allowUnsupportedChain&&((y=M.state.activeCaipNetwork)==null?void 0:y.name)===ce.UNSUPPORTED_NETWORK_NAME?M.showUnsupportedChainUI():this.setCaipNetwork(E):t||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),tr.isLowerCaseMatch(s,Fe.state.address)||this.syncAccountInfo(s,E==null?void 0:E.id,o),t?await this.syncBalance({address:s,chainId:E==null?void 0:E.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,t,r){const s=this.getCaipAddress(r),i=t||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){var s;const t=_e.getConnectorId(e),r=Rt.getProviderId(e);if(r===Dt.CONNECTOR_TYPE_ANNOUNCED||r===Dt.CONNECTOR_TYPE_INJECTED){if(t){const i=this.getConnectors().find(o=>{var p,g;const l=o.id===t,h=((p=o.info)==null?void 0:p.rdns)===t,d=(g=o.connectors)==null?void 0:g.some(y=>{var b;return y.id===t||((b=y.info)==null?void 0:b.rdns)===t});return l||h||!!d});if(i){const{info:o,name:l,imageUrl:h}=i,d=h||this.getConnectorImage(i);this.setConnectedWalletInfo({name:l,icon:d,...o},e)}}}else if(r===Dt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Rt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(t&&t===ce.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ce.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!v5.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,r){const s=this.getAdapter(r),i=M.getCaipNetworkByNamespace(r,t);if(s){const o=await s.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,l,h,d,p,g,y;const e=ice.createLogger((b,...v)=>{b&&this.handleAlertError(b),console.error(...v)}),t={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(l=this.options)==null?void 0:l.metadata.description:"",url:(h=this.options)!=null&&h.metadata?(d=this.options)==null?void 0:d.metadata.url:"",icons:(p=this.options)!=null&&p.metadata?(g=this.options)==null?void 0:g.metadata.icons:[""]},logger:e};ye.setManualWCControl(!!((y=this.options)!=null&&y.manualWCControl)),this.universalProvider=this.options.universalProvider??await Qoe.init(t),ye.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Fa.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:t=>{xe.setUri(t)},onConnect:()=>{xe.finalizeWcConnection()},onDisconnect:()=>{M.state.noAdapters&&this.resetAccount(e),xe.resetWcConnection()},onChainChanged:t=>{const r=M.state.activeChain,s=r&&_e.state.activeConnectorIds[r]===ce.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(M.state.noAdapters||s)){const i=this.getCaipNetworks().find(l=>l.id.toString()===t.toString()||l.caipNetworkId.toString()===t.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(t);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:t=>{const r=M.state.activeChain,s=r&&_e.state.activeConnectorIds[r]===ce.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(M.state.noAdapters||s)&&t.length>0){const i=t[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Le.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Gt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(Fr.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[r,s]=t??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const l=Fr.ALERT_ERRORS[o];l&&($n.open(l,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var t;if(e)return(t=this.chainAdapters)==null?void 0:t[e]}createAdapter(e){var s;if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&xe.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Pt.open({...e,data:{swap:e.arguments}})}return Pt.open(e)}async close(){await this.injectModalUi(),Pt.close()}setLoading(e,t){Pt.setLoading(e,t)}async disconnect(e){await xe.disconnect({namespace:e})}getSIWX(){return ye.state.siwx}getError(){return""}getChainId(){var e;return(e=M.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const t=this.getCaipNetworks().find(r=>r.id===e.id);if(!t){$n.open(Fr.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await M.switchActiveNetwork(t)}getWalletProvider(){return M.state.activeChain?Rt.state.providers[M.state.activeChain]:null}getWalletProviderType(){return Rt.getProviderId(M.state.activeChain)}subscribeProviders(e){return Rt.subscribeProviders(e)}getThemeMode(){return fs.state.themeMode}getThemeVariables(){return fs.state.themeVariables}setThemeMode(e){fs.setThemeMode(e),z6(fs.state.themeMode)}setTermsConditionsUrl(e){ye.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ye.setPrivacyPolicyUrl(e)}setThemeVariables(e){fs.setThemeVariables(e),Gue(fs.state.themeVariables)}subscribeTheme(e){return fs.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?xe.subscribe(e):($n.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?M.getAccountProp("connectedWalletInfo",e):Fe.state.connectedWalletInfo}getAccount(e){const t=e||M.state.activeChain,r=_e.getAuthConnector(t),s=M.getAccountData(t),i=ve.getConnectedConnectorId(M.state.activeChain),o=xe.getConnections(t);if(!t)throw new Error("AppKit:getAccount - namespace is required");const l=o.flatMap(h=>h.accounts.map(({address:d,type:p})=>Le.createAccount(t,d,p||"eoa")));if(s)return{allAccounts:l,caipAddress:s.caipAddress,address:Le.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===ce.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:ve.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:qs(t),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,t){const r=()=>{const s=this.getAccount(t);s&&e(s)};t?M.subscribeChainProp("accountState",r,t):M.subscribe(r),_e.subscribe(r)}subscribeNetwork(e){return M.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId})})}subscribeWalletInfo(e,t){return t?Fe.subscribeKey("connectedWalletInfo",e,t):Fe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Fe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){M.subscribeKey("activeCaipNetwork",e)}getState(){return Ma.state}getRemoteFeatures(){return ye.state.remoteFeatures}subscribeState(e){return Ma.subscribe(e)}subscribeRemoteFeatures(e){return ye.subscribeKey("remoteFeatures",e)}showErrorMessage(e){ka.showError(e)}showSuccessMessage(e){ka.showSuccess(e)}getEvent(){return{...Gt.state}}subscribeEvents(e){return Gt.subscribe(e)}replace(e){tt.replace(e)}redirect(e){tt.push(e)}popTransactionStack(e){tt.popTransactionStack(e)}isOpen(){return Pt.state.open}isTransactionStackEmpty(){return tt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ye.setFeatures(e)}updateRemoteFeatures(e){ye.setRemoteFeatures(e)}updateOptions(e){const r={...ye.state||{},...e};ye.setOptions(r)}setConnectMethodsOrder(e){ye.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ye.setWalletFeaturesOrder(e)}setCollapseWallets(e){ye.setCollapseWallets(e)}setSocialsOrder(e){ye.setSocialsOrder(e)}getConnectMethodsOrder(){return q2.getConnectOrderMethod(ye.state.features,_e.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||M.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&M.removeNetwork(e,t)}}let dU=!1;class rhe extends nhe{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Hs.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const t=M.state.activeChain;if(!t)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=t===ce.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=ye.state.defaultAccountTypes[t],i=qs(t),o=e.preferredAccountType||i||s;tr.isLowerCaseMatch(e.address,Fe.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:t}),this.setCaipAddress(r,t);const{signature:l,siwxMessage:h,message:d,...p}=e;this.setUser({...Fe.state.user||{},...p},t),this.setSmartAccountDeployed(!!e.smartAccountDeployed,t),this.setPreferredAccountType(o,t),this.setLoading(!1,t)}setupAuthConnectorListeners(e){e.onRpcRequest(t=>{zs.checkIfRequestExists(t)?zs.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(jn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(jn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,r)=>{const s=zs.checkIfRequestIsSafe(r),i=Fe.state.address,o=M.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const t=M.state.activeChain;if(!t)throw new Error("AppKit:onNotConnected - namespace is required");_e.getConnectorId(t)===ce.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:t,type:r})=>{const s=M.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");t&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const t=fs.getSnapshot(),r=ye.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:t.themeMode,themeVariables:t.themeVariables,w3mThemeVariables:ko(t.themeVariables,t.themeMode)})])}async syncAuthConnector(e,t){var d,p,g,y;const r=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t),s=t===M.state.activeChain;if(!r)return;this.setLoading(!0,t);const i=e.getLoginEmailUsed();this.setLoading(i,t),i&&this.setStatus("connecting",t);const o=e.getEmail(),l=e.getUsername();this.setUser({...((d=Fe.state)==null?void 0:d.user)||{},username:l,email:o},t),this.setupAuthConnectorListeners(e);const{isConnected:h}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),t&&r&&s){const b=await e.getSmartAccountEnabledNetworks();M.setSmartAccountEnabledNetworks((b==null?void 0:b.smartAccountEnabledNetworks)||[],t),h&&((p=this.connectionControllerClient)!=null&&p.connectExternal)?(await((y=this.connectionControllerClient)==null?void 0:y.connectExternal({id:ce.CONNECTOR_ID.AUTH,info:{name:ce.CONNECTOR_ID.AUTH},type:Dt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(g=M.state.activeCaipNetwork)==null?void 0:g.id,chain:t})),this.setStatus("connected",t)):_e.getConnectorId(t)===ce.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),ve.removeConnectedNamespace(t))}this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){var t,r;try{if(!Le.isTelegram())return;const s=ve.getTelegramSocialProvider();if(!s||!Le.isClient())return;const o=new URL(window.location.href).searchParams.get("result_uri");if(!o)return;Fe.setSocialProvider(s,e),await((t=this.authProvider)==null?void 0:t.init());const l=_e.getAuthConnector();s&&l&&(this.setLoading(!0,e),await xe.connectExternal({id:l.id,type:l.type,socialUri:o},l.chain),ve.setConnectedSocialProvider(s),ve.removeTelegramSocialProvider(),Gt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s,caipNetworkId:(r=M.getActiveCaipNetwork())==null?void 0:r.caipNetworkId}}))}catch(s){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",s)}try{const s=new URL(window.location.href);s.searchParams.delete("result_uri"),window.history.replaceState({},document.title,s.toString())}catch(s){console.error("tma social login failed",s)}}createAuthProvider(e){var d,p,g,y;if(!ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(d=this.remoteFeatures)==null?void 0:d.email,s=Array.isArray((p=this.remoteFeatures)==null?void 0:p.socials)&&this.remoteFeatures.socials.length>0,i=r||s,l=tr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((g=this.options)!=null&&g.projectId)&&i&&(this.authProvider=Cm.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(y=this.getCaipNetwork(l))==null?void 0:y.caipNetworkId,abortController:Fr.EmbeddedWalletAbortController,onTimeout:b=>{b==="iframe_load_failed"?$n.open(Fr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):b==="iframe_request_timeout"?$n.open(Fr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):b==="unverified_domain"&&$n.open(Fr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:b=>M.getActiveCaipNetwork(b)}),Ma.subscribeOpen(b=>{var v;!b&&this.isTransactionStackEmpty()&&((v=this.authProvider)==null||v.rejectRpcRequests())}));const h=e===M.state.activeChain&&ye.state.enableReconnect;ye.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&h&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var t,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ge.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,l;if(!e)return;const t=M.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===t&&s){const h=this.getAdapter(r),d=Rt.getProvider(r),p=Rt.getProviderId(r);await(h==null?void 0:h.switchNetwork({caipNetwork:e,provider:d,providerType:p})),this.setCaipNetwork(e)}else{const d=Rt.getProviderId(t)===Dt.CONNECTOR_TYPE_AUTH,p=Rt.getProviderId(r),g=p===Dt.CONNECTOR_TYPE_AUTH,y=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((d&&p===void 0||g)&&y)try{if(M.state.activeChain=e.chainNamespace,s){const b=this.getAdapter(r);await(b==null?void 0:b.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}))}else await((l=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:l.call(o,{id:ce.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Dt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const v=this.getAdapter(r);await(v==null?void 0:v.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}))}else if(p===Dt.CONNECTOR_TYPE_WALLET_CONNECT){if(!M.state.noAdapters){const b=this.getAdapter(r),v=Rt.getProvider(r),E=Rt.getProviderId(r);await(b==null?void 0:b.switchNetwork({caipNetwork:e,provider:v,providerType:E}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var t;await super.initialize(e),(t=this.chainNamespaces)==null||t.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ma.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:r}){var o;const s=`${r}:${t}`,i=(o=this.caipNetworks)==null?void 0:o.find(l=>l.caipNetworkId===s);if(r!==ce.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:l,avatar:h}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(l,r),this.setProfileImage(h,r)}catch{await this.syncReownName(e,r),t!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=Rt.getProviderId(e);if(t===Dt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ve.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Le.isClient()&&!dU)try{const e={...$t.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),Le.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ye.state.disableAppend&&!ye.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}dU=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!Le.isClient())return;const r=[];(t.email||t.socials&&t.socials.length>0)&&r.push($r(()=>import("./embedded-wallet-CkNbX7le.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13]))),t.email&&r.push($r(()=>import("./email-Dv9Vt-EG.js"),__vite__mapDeps([14,3,13,7,12,6,11,15,8]))),t.socials&&r.push($r(()=>import("./socials-D_tM_yoc.js"),__vite__mapDeps([16,3,17,6,18,19,12,20,11,7,13,21,5,22]))),t.swaps&&t.swaps.length>0&&r.push($r(()=>import("./swaps-DQkzpjAs.js"),__vite__mapDeps([23,3,11,7,24,25,26,5,12,22,8,6]))),e.send&&r.push($r(()=>import("./send-DARW-x05.js"),__vite__mapDeps([27,3,11,7,12,6,18,13,26,5,8,28,29]))),e.receive&&r.push($r(()=>import("./receive-DvYorRV8.js"),__vite__mapDeps([30,3,31,5,21]))),t.onramp&&t.onramp.length>0&&r.push($r(()=>import("./onramp-DHdvNsE0.js"),__vite__mapDeps([32,3,33,5,7,12,17,6,18,34,13,11,20,8]))),t.activity&&r.push($r(()=>import("./transactions-D67LuTra.js"),__vite__mapDeps([35,3,36,12,13,5,22]))),e.pay&&r.push($r(()=>import("./index-lydWdwNq.js"),__vite__mapDeps([37,3,11,7,38,5,12,9,33,29,20]))),await Promise.all([...r,$r(()=>import("./index-BLPunXaX.js"),__vite__mapDeps([39,3,5,7,28,12,40,25,9,33,11,10,38,36,13,22,24,29,6,8,15,17,18,19,4,20,31,21,34])),$r(()=>import("./w3m-modal-DKjIS4s6.js"),__vite__mapDeps([41,3,9,5,12,10,7,25,40]))])}}let kc;function she(n){n&&(kc=n)}function ihe(){if(!kc)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function n(t){await(kc==null?void 0:kc.open(t))}async function e(){await(kc==null?void 0:kc.close())}return{open:n,close:e}}const ahe="1.7.15";let Cu;function ohe(n){return Cu||(Cu=new rhe({...n,sdkVersion:Le.generateSdkVersion(n.adapters??[],"react",ahe)}),she(Cu)),Cu}function che(){const{caipNetwork:n,caipNetworkId:e,chainId:t}=tce();function r(s){Cu==null||Cu.switchNetwork(s)}return{caipNetwork:n,caipNetworkId:e,chainId:t,switchNetwork:r}}const Jl={signMessage:async(n,e,t)=>{if(!e)throw new Error("signMessage - provider is undefined");const r=sn(n)?n:Oe(Ba(n));return await e.request({method:"personal_sign",params:[r,t]})},estimateGas:async(n,e,t,r)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!t)throw new Error("estimateGas - address is undefined");if(n.chainNamespace&&n.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:n.address,to:n.to,data:n.data,type:0},i=new Jd(e,r);return await new Xd(i,t).estimateGas(s)},sendTransaction:async(n,e,t,r)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!t)throw new Error("sendTransaction - address is undefined");if(n.chainNamespace&&n.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:n.to,value:n.value,gasLimit:n.gas,gasPrice:n.gasPrice,data:n.data,type:0},i=new Jd(e,r),h=await(await new Xd(i,t).sendTransaction(s)).wait();return(h==null?void 0:h.hash)||null},writeContract:async(n,e,t,r)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!t)throw new Error("writeContract - address is undefined");const s=new Jd(e,r),i=new Xd(s,t),o=new Gu(n.tokenAddress,n.abi,i);if(!o||!n.method)throw new Error("Contract method is undefined");const l=o[n.method];if(l)return await l(...n.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:n=>{try{return JSON.parse(n)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:_9,formatUnits:RU};class lhe extends j6{constructor(){super({adapterType:ce.ADAPTER_TYPES.ETHERS,namespace:ce.CHAIN.EVM}),this.balancePromises={}}async createEthersConfig(e){if(!e.metadata)return;let t;function r(){if(t)return t;if(!(typeof window>"u")&&window.ethereum)return t=window.ethereum,t}async function s(){const{SafeProvider:l}=await $r(async()=>{const{SafeProvider:y}=await import("./SafeProvider-DVmZGcy5.js");return{SafeProvider:y}},__vite__mapDeps([42,43,44])),{default:h}=await $r(async()=>{const{default:y}=await import("./index-DgAA_zSK.js");return{default:y}},__vite__mapDeps([45,43])),d=new h,p=await d.safe.getInfo(),g=new l(p,d);return await g.connect().catch(y=>{console.info("Failed to auto-connect to Safe:",y)}),g}async function i(){var l,h,d;try{const{createCoinbaseWalletSDK:p}=await $r(async()=>{const{createCoinbaseWalletSDK:y}=await import("./index-D1xaZoRt.js");return{createCoinbaseWalletSDK:y}},__vite__mapDeps([46,44,1]));return typeof window>"u"?void 0:p({appName:(l=e==null?void 0:e.metadata)==null?void 0:l.name,appLogoUrl:(h=e==null?void 0:e.metadata)==null?void 0:h.icons[0],appChainIds:((d=e.networks)==null?void 0:d.map(y=>y.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(p){console.error("Failed to import Coinbase Wallet SDK:",p);return}}const o={metadata:e.metadata};if(e.enableInjected!==!1&&(o.injected=r()),e.enableCoinbase!==!1){const l=await i();l&&(o.coinbase=l)}if(Le.isSafeApp()){const l=await s();l&&(o.safe=l)}return o.EIP6963=e.enableEIP6963!==!1,o}async signMessage(e){const{message:t,address:r,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await Jl.signMessage(t,s,r)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var r;if(!e.provider)throw new Error("Provider is undefined");return{hash:await Jl.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:Fe.state.address},e.provider,Fe.state.address,Number((r=e.caipNetwork)==null?void 0:r.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:t}=zr.parseCaipAddress(e.caipAddress);return{hash:await Jl.writeContract(e,e.provider,t,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:t,caipNetwork:r,address:s}=e;if(!t)throw new Error("Provider is undefined");try{return{gas:await Jl.estimateGas({data:e.data,to:e.to,address:s},t,s,Number(r==null?void 0:r.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return Jl.parseUnits(e.value,e.decimals)}formatUnits(e){return Jl.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:t,chainId:r}=e,s=this.connectors.find(h=>h.id===t),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),l=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(t,i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(l)||Number(r),provider:i,type:s.type,id:t}}async syncConnectors(e){var r;this.ethersConfig=await this.createEthersConfig(e),(r=this.ethersConfig)!=null&&r.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var l,h;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===ce.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:Pa.ConnectorExplorerIds[i],imageUrl:(l=e==null?void 0:e.connectorImages)==null?void 0:l[i],name:Pa.ConnectorNamesMap[i]||"Unknown",imageId:Pa.ConnectorImageIds[i],type:Pa.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(h=this.ethersConfig)==null?void 0:h[s]})})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async t=>{const r=this.connectors.find(s=>tr.isLowerCaseMatch(s.id,t.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),t}))}}async syncConnections({connectToFirstConnector:e,getConnectorStorageInfo:t}){var r;await((r=this.connectionManager)==null?void 0:r.syncConnections({connectors:this.connectors,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenProviderEvents.bind(this),getConnectionStatusInfo(s){return t(s)}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const t=ce.CONNECTOR_ID.WALLET_CONNECT;return Fa.listenWcProvider({universalProvider:e,namespace:ce.CHAIN.EVM,onConnect:r=>this.onConnect(r,t),onDisconnect:()=>this.onDisconnect(t),onAccountsChanged:r=>this.onAccountsChanged(r,t,!1),onChainChanged:r=>this.onChainChanged(r,t)}),this.addConnector(new rN({provider:e,caipNetworks:this.getCaipNetworks(),namespace:ce.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){var t;if(e.detail){const{info:r,provider:s}=e.detail;if(!((t=this.connectors)==null?void 0:t.find(o=>o.name===(r==null?void 0:r.name)))){const o=Pa.ConnectorTypesMap[ce.CONNECTOR_ID.EIP6963],l=(r==null?void 0:r.rdns)||(r==null?void 0:r.name)||(r==null?void 0:r.uuid);this.namespace&&l&&this.addConnector({id:l,type:o,imageUrl:r==null?void 0:r.icon,name:(r==null?void 0:r.name)||"Unknown",provider:s,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const t=this.eip6963EventHandler.bind(this);window.addEventListener(Dt.EIP6963_ANNOUNCE_EVENT,t),window.dispatchEvent(new Event(Dt.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:t,type:r,chainId:s,socialUri:i}){var g;const o=this.connectors.find(y=>tr.isLowerCaseMatch(y.id,e));if(!o)throw new Error("Connector not found");const l=(g=this.connectionManager)==null?void 0:g.getConnection({address:t,connectorId:e,connections:this.connections,connectors:this.connectors});if(l){const y=l.caipNetwork;if(!y)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(l.account)return this.emit("accountChanged",{address:l.account.address,chainId:y.id,connector:o}),{address:l.account.address,chainId:y.id,provider:o.provider,type:o.type,id:e}}const h=o==null?void 0:o.provider;if(!h)throw new Error("Provider not found");let d=[],p;if(r===Dt.CONNECTOR_TYPE_AUTH){const{address:y,accounts:b}=await Hs.authConnectorAuthenticate({authConnector:h,chainNamespace:ce.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:qs("eip155")}),v=this.getCaipNetworks().find(E=>E.id.toString()===(s==null?void 0:s.toString()));d=[y],this.addConnection({connectorId:e,accounts:b?b.map(E=>({address:E.address})):d.map(E=>({address:E})),caipNetwork:v,auth:{name:ve.getConnectedSocialProvider(),username:ve.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:d[0],chainId:Number(s),connector:o})}else{d=await h.request({method:"eth_requestAccounts"}),p=await h.request({method:"eth_chainId"});const y=this.getCaipNetworks().find(b=>b.id.toString()===(s==null?void 0:s.toString()));if(p!==s){if(!y)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:y,provider:h,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:d[0],chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:d.map(b=>({address:b})),caipNetwork:y}),o.id!==ce.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,h)}return{address:d[0],chainId:Number(s),provider:h,type:r,id:e}}async reconnect(e){const{id:t,chainId:r}=e,s=this.connectors.find(i=>i.id===t);s&&s.type==="AUTH"&&r&&await Hs.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:ce.CHAIN.EVM,chainId:r,preferredAccountType:qs("eip155")})}async getAccounts(e){var o;const t=this.connectors.find(l=>l.id===e.id),r=t==null?void 0:t.provider;if(!r||!t)throw new Error("Provider not found");const s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:l})=>Le.createAccount(ce.CHAIN.EVM,l,"eoa"))};if(e.id===ce.CONNECTOR_ID.AUTH){const l=t.provider;if(!l.user)return{accounts:[]};const{accounts:h,address:d}=l.user;return Promise.resolve({accounts:(h||[{address:d,type:"eoa"}]).map(p=>Le.createAccount(ce.CHAIN.EVM,p.address,p.type))})}return{accounts:(await r.request({method:"eth_requestAccounts"})).map(l=>Le.createAccount(ce.CHAIN.EVM,l,"eoa"))}}async disconnect(e){var t,r;if(e.id){const s=this.connectors.find(o=>tr.isLowerCaseMatch(o.id,e.id));if(!s)throw new Error("Connector not found");const i=(t=this.connectionManager)==null?void 0:t.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(s.type){case Dt.CONNECTOR_TYPE_WALLET_CONNECT:s.provider.session&&s.provider.disconnect();break;case Dt.CONNECTOR_TYPE_AUTH:await((r=s.provider)==null?void 0:r.disconnect());break;case Dt.CONNECTOR_TYPE_ANNOUNCED:case Dt.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(s.provider);break;default:throw new Error("Unsupported provider type")}return s.id&&(this.removeProviderListeners(s.id),this.deleteConnection(s.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:i?[i]:[]}}return this.disconnectAll()}async getBalance(e){const t=e.address,r=this.getCaipNetworks().find(s=>{var i;return s.id.toString()===((i=e.chainId)==null?void 0:i.toString())});if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&r.chainNamespace===ce.CHAIN.EVM){const s=`${r.caipNetworkId}:${t}`,i=this.balancePromises[s];if(i)return i;const o=ve.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const l=new LH(r.rpcUrls.default.http[0],{chainId:r.id,name:r.name});if(l)try{return this.balancePromises[s]=new Promise(async h=>{try{const d=await l.getBalance(t),p=S9(d);ve.updateNativeBalanceCache({caipAddress:s,balance:p,symbol:r.nativeCurrency.symbol,timestamp:Date.now()}),h({balance:p,symbol:r.nativeCurrency.symbol})}catch{h({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){var i,o;const{caipNetwork:t,provider:r,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await r.request({method:"wallet_switchEthereumChain",params:[{chainId:sf.numberToHexString(t.id)}]})}catch(l){if(l.code===Bo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===Bo.ERROR_INVALID_CHAIN_ID||l.code===Bo.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===Bo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await sf.addEthereumChain(r,t);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(t=>t.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(t){console.info("Could not revoke permissions from wallet. Disconnecting...",t)}}async getCapabilities(e){var s,i;const t=Rt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");const r=(i=(s=t.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(r){const l=Jl.parseWalletCapabilities(r)[e];if(l)return l}return await t.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const t=Rt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const t=Rt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const t=Rt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_getAssets",params:[e]})}}const uhe="357b7e54a01a9e3492feb9855d2ab152",hhe=[Kue,Wue],dhe={name:"Kaeru CAPTCHA",description:"CAPTCHA leveraging the TEE technology",url:"https://quex-tech.github.io/captcha-frontend-test/",icons:[]},fU=ohe({adapters:[new lhe],networks:hhe,metadata:dhe,projectId:uhe,features:{analytics:!1}});async function fhe(n,e){const r=await phe().getSigner();return new Gu(n,e,r)}function phe(){if(!fU.getIsConnectedState())throw new Error("Not connected");const n=fU.getProvider("eip155");if(!n)throw new Error("No provider");return new Jd(n)}async function ghe(n,e){const t=await fhe(n.flowRegistryAddress,["function getQuexFee(uint256 flowId) external view returns (uint256)",`function pushData(
      (
        uint256 actionId,
        (uint256 timestamp, uint256 err, bytes value) dataItem,
        address relayer
      ) memory msg,
      (bytes32 r, bytes32 s, uint8 v) memory sig,
      uint256 flowId,
      uint256 tdId
      ) external payable`]),r=await t.getQuexFee(n.flowId),s=Kr.from(e.sig);return t.pushData({actionId:BigInt(e.msg.actionId),dataItem:{timestamp:BigInt(e.msg.dataItem.timestamp),err:BigInt(e.msg.dataItem.error),value:e.msg.dataItem.value},relayer:e.msg.relayer},{r:s.r,s:s.s,v:s.v},n.flowId,e.tdId??n.tdId,{value:r,gasLimit:8e5})}function mhe({navigate:n}){const{open:e}=ihe(),{address:t,isConnected:r}=nce(),{chainId:s}=che(),[i,o]=de.useState(null),[l,h]=de.useState(null),[d,p]=de.useState(null),[g,y]=de.useState(null),b=s!==void 0?VH(BigInt(s)):null,v=async E=>{if(o(E),!!b)try{const A=await ghe(b,E);h(A),p(await A.wait())}catch(A){console.error(A),A instanceof Error&&y(`An error has occurred. In case your transaction was successful, please find your token on <a href="${b.nftCollectionUrl}" target="_blank" rel="noopener">OpenSea</a> and in your wallet app`)}};return we.jsxs("div",{className:"home",children:[we.jsx("img",{className:"logo",src:wM,alt:"Kaeru Logo"}),we.jsxs("div",{className:"card",children:[!r&&we.jsx("button",{className:"btn-large",onClick:()=>e(),children:"connect wallet"}),t&&r&&s&&!i&&we.jsxs(we.Fragment,{children:[b&&we.jsx(e9,{address:Ft(t),chainId:BigInt(s),onSuccess:v}),!b&&we.jsx("p",{children:"Unsupported network"})]}),i&&we.jsx(zH,{oracleNetwork:b,txResponse:l,txReceipt:d}),g&&we.jsx("p",{dangerouslySetInnerHTML:{__html:g},className:"error text-small"}),we.jsxs("div",{className:"logos",children:[we.jsxs("div",{className:"secret-logo",children:[we.jsx("p",{children:"powered by"}),we.jsx("a",{href:"https://scrt.network/",target:"_blank",rel:"noopener",children:we.jsx("img",{src:bM,alt:"Secret Logo"})})]}),we.jsxs("div",{className:"quex-logo",children:[we.jsx("p",{children:"verified by"}),we.jsx("a",{href:"https://quex.tech/",target:"_blank",rel:"noopener",children:we.jsx("img",{src:EM,alt:"Quex Logo"})})]})]}),we.jsx("a",{className:"btn btn-large btn-secondary",href:`${"/captcha-frontend-test".replace(/\/$/,"")}/how-it-works/`,onClick:E=>{E.preventDefault(),n("/how-it-works/")},children:"how it works"})]})]})}const yhe="/captcha-frontend-test/scheme.svg";function whe({navigate:n}){return we.jsxs("div",{className:"about",children:[we.jsx("a",{href:"",onClick:e=>{e.preventDefault(),n("/")},children:"Home"}),we.jsx("h1",{children:"How it works"}),we.jsx("p",{children:"Kaeru is a Proof-of-Concept project leveraging the Trusted Execution Environment (TEE) technology together with the EVM-based decentralized verification by Quex and Secret Network."}),we.jsx("h2",{id:"what-is-it-about",children:"What is it about?"}),we.jsx("p",{children:"Kaeru provides an on-chain evidence for the CAPTCHA solution. The server generating and verifying the CAPTCHA puzzles resides inside a Confidential Virtual Machine using TEE technology (specifically, Intel Trust Domain Extensions TDX). Once the user successfully solves the CAPTCHA puzzle, the machine generates a digitally signed message which is delivered on-chain. After the set of smart-contracts performed the signature verification and checked that a message indeed originated from the TD with the pre-defined code, a non-fungible token is minted to the party who solved the puzzle."}),we.jsx("h2",{id:"role-of-the-confidential-vm",children:"Role of the Confidential VM"}),we.jsx("p",{children:"The solution uses Confidential VMs relying on Trust Domain Extensions technology by Intel. TDX allows one to start the virtual machines residing in an encrypted memory region, such that only the CPU itself is capable of decrypting the private VM pages. The Trust Domain (which is the term for such an encrypted VM) becomes protected not only from the external attacker, but also from the host machine, including the host owner with physical access and superuser privileges on the host. In case the TD is set up with a minimal set of devices and no prescribed access (for example, no console, no ssh service etc), it also becomes protected from its creator."}),we.jsx("p",{children:"The integrity of the deployed TD can be verified using the process known as remote attestation. During the remote attestation, the CPU issues the quote containing the measurements of the TD (hashes of the VM initialization process and hashes of the runtime memory measurements). This quote gets signed by a keychain (with lowest keys belonging to the CPU), which can be traced back to the vendor's certificate authority."}),we.jsx("p",{children:"By verifying the set of signatures on the quote and the attestation report and checking the measurements, one can verify that the Confidential VM is running the specific source code it is expected to run, and thus to make sure that execution flow was not tampered with. If the VM has no known vulnerabilities, no ways to log in, and was instantiated correctly, this quote becomes a sound proof of genuine code execution."}),we.jsxs("p",{children:["The solution uses the"," ",we.jsx("a",{href:"https://docs.scrt.network/secret-network-documentation/secretvm-confidential-virtual-machines/verifiable-message-signing",target:"_blank",rel:"noopener",children:"Verifiable Message Signing"})," ","scheme. If the machine has exclusive access to the secret key, the corresponding public key can be inserted in the quote, which effectively turns the quote into this key certificate. Now, the messages signed with this key are known to have originated from the particular software. Moreover, if the key management system (KMS) is designed properly, no other party can obtain the same key and forge signature."]}),we.jsx("h2",{id:"infrastructure",children:"Infrastructure"}),we.jsxs("p",{children:["Kaeru hosts the CAPTCHA generating and verifying service inside TD on Secret's SecretVM, available at SecretAI Developer Portal (",we.jsx("a",{href:"https://secretai.scrtlabs.com",target:"_blank",rel:"noopener",children:"https://secretai.scrtlabs.com"}),") The private key is held by Secret’s on-chain Key Management Service, and can only be accessed by the TD itself, so no person or company or bot can forge the signature (if the hardware security guarantees hold). In order to provide fault tolerance, there is a backup Trust Domain with the same service running on Quex own infrastructure. These TDs are united in the oracle pool to serve the same data flow on-chain. The corresponding public keys are registered on-chain with the Quex data infrastructure layer (",we.jsx("a",{href:"https://docs.quex.tech/how-it-works/verification",target:"_blank",children:"https://docs.quex.tech/how-it-works/verification"}),"). In our terminology, the TDs become oracles providing the external data for the on-chain usage. The NFT contract is connected to Quex data infrastructure as a data consumer contract. It is set to only accept the messages originating from this particular oracle pool. The CAPTCHA service is a fork of go-captcha project tailored for use with TDX, SecretVM and Quex."]}),we.jsx("figure",{style:{position:"relative",textAlign:"center",maxWidth:"70ch"},children:we.jsx("img",{style:{width:"80%"},src:yhe,alt:"Diagram showing Kaeru's architecture and workflow"})}),we.jsx("h2",{id:"user-flow",children:"User Flow"}),we.jsx("p",{children:"Once a user visits the Kaeru page, the browser accesses the TD for the CAPTCHA puzzle. If a user solves five puzzles in a row successfully, TD returns a signed message containing several data fields (including the connected user wallet address). Then the front-end queries the user wallet to send this data to Quex smart contract. In case the user approves the transaction, the data is sent. Quex contracts verify that the public key corresponding to the signature belongs to the previously attested TD, and the quote was registered beforehand. Then, after a few technical steps, the data is pushed to the callback of the NFT contract. NFT contract verifies the origin of the message and correctness of its routing, and finally mints the token according to the data delivered."}),we.jsx("h2",{id:"value-added-by-tee",children:"Value added by TEE"}),we.jsx("p",{children:'With this way of using TEE, one can provide the sound guarantees that NFTs correspond exactly to puzzle solutions. No extra tokens can be issued by anyone, including admins, developers, hosting companies and infrastructure providers. With a slight exaggeration, one can say that we use "Proof of Machinehood" (a term coined by Automata Network, as far as we know) to create the "Proof of Humanhood" on-chain.'}),we.jsx("h2",{id:"using-kaeru-nft",children:"Using Kaeru NFT"}),we.jsx("p",{children:"To use the Kaeru NFT in your smart-contract, in addition to ERC721 methods, you can use the following method"}),we.jsx("p",{children:we.jsx("code",{children:"function getNFTInfo(uint256 tokenId) external view returns (NFTInfo memory)"})}),we.jsx("p",{children:"which returns the structure of the form"}),we.jsx("pre",{children:we.jsx("code",{children:`struct NFTInfo {
    uint256 generation;
    uint256 counter;
    uint256 seed;
    uint256 timestamp;
    bytes userData;
    address minter;
}`})}),we.jsxs("p",{children:["Here ",we.jsx("code",{children:"generation"})," is NFT generation, ",we.jsx("code",{children:"counter"})," is the sequential number of the NFT inside the generation,"," ",we.jsx("code",{children:"seed"})," is the unique seed for PRNG used to derive the particular CAPTCHA instance for the token, ",we.jsx("code",{children:"timestamp"})," is the timestamp, ",we.jsx("code",{children:"userData"})," is the arbitrary user-supplied data which can be added while minting the token, ",we.jsx("code",{children:"minter"})," is the address of the account used for the token mint (the first owner of the token). ",we.jsx("code",{children:"minter"})," does not change on token transfers."]}),we.jsx("h2",{id:"project-outline",children:"Project Outline"}),we.jsx("p",{children:"Kaeru is a joint Proof-of-Concept by Quex and Secret Network. With it, we demonstrate practical interoperability of two independent TDX infrastructures, a new practical application of TEE technology, and a set of interfaces for further use. And we mint some NFTs with cute techno-frogs, of course!"}),we.jsx("h2",{id:"links",children:"Links"}),we.jsx("p",{children:we.jsx("a",{href:"https://opensea.io/collection/kaeru-559786994",target:"_blank",rel:"noopener",children:"Kaeru on OpenSea"})}),we.jsx("p",{children:we.jsx("a",{href:"https://etherscan.io/token/0xc86B125DA2EDea870a6ef9a135bfeCE4923248bD",target:"_blank",rel:"noopener",children:"Kaeru NFT on Etherscan"})}),we.jsx("p",{children:we.jsx("a",{href:"https://quex.tech",target:"_blank",children:"Quex"})}),we.jsx("p",{children:we.jsx("a",{href:"https://secretai.scrtlabs.com",target:"_blank",rel:"noopener",children:"SecretAI Developer Portal"})})]})}function bhe(){const n=pU("/captcha-frontend-test"),[e,t]=de.useState(window.location.pathname);de.useEffect(()=>{const i=()=>t(window.location.pathname);return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]);const r=i=>{window.history.pushState({},"",n+i),t(n+i)},s=pU(e);return s===n?we.jsx(mhe,{navigate:r}):s===n+"/how-it-works"?we.jsx(whe,{navigate:r}):we.jsx("h1",{children:"404 Not Found"})}function pU(n){return n.replace(/\/$/,"")}yM.createRoot(document.getElementById("root")).render(we.jsx(de.StrictMode,{children:we.jsx(bhe,{})}));export{Hs as $,Fe as A,We as B,_e as C,T5 as D,fm as E,Dr as F,sr as G,W_ as H,qi as I,Rt as J,Az as K,xb as L,Pt as M,wz as N,ye as O,zr as P,Wb as Q,tt as R,ka as S,fs as T,tr as U,Dde as V,jn as W,Ge as X,q2 as Y,Ld as Z,nq as _,Ob as a,$0 as a0,xde as a1,er as a2,bb as a3,Ide as a4,B6 as a5,V2 as a6,dp as a7,$r as a8,oM as a9,Rhe as aA,xhe as aB,mj as aC,Sj as aD,Ihe as aE,cq as aa,ea as ab,B3 as ac,ej as ad,oj as ae,D5 as af,yS as ag,kj as ah,L3 as ai,Bj as aj,Che as ak,tj as al,aj as am,rj as an,U5 as ao,Ku as ap,P5 as aq,Ohe as ar,_j as as,The as at,B5 as au,k5 as av,$3 as aw,sp as ax,Yb as ay,Dhe as az,$t as b,ce as c,Le as d,Gt as e,qs as f,ko as g,M as h,nf as i,Rde as j,zs as k,xe as l,Dt as m,Tue as n,$n as o,xue as p,ve as q,Ode as r,Fr as s,Mt as t,S5 as u,cn as v,Gs as w,Tde as x,Qz as y,vS as z};

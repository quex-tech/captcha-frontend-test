const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-2YclrV2_.js","assets/if-defined-B0-JLYVp.js","assets/index-CldZ5yrp.js","assets/index-BJGffgN9.js","assets/ref-CThaYN9T.js","assets/index-DeZKGLWw.js","assets/index-BBYwoQm0.js","assets/index-DDoKa9X5.js","assets/index-xtDH35ui.js","assets/index-DKUHkTlE.js","assets/index-BOrx25Ds.js","assets/index-CH3HmJA0.js","assets/email-BGmQjJ51.js","assets/index-B4jC_gFX.js","assets/socials-jslSdM0B.js","assets/index-B5EvONpK.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BiH_s0Bz.js","assets/index-CILuW0V3.js","assets/index-DirBltIh.js","assets/index-DE72Sb0G.js","assets/swaps-Cd39021O.js","assets/index-DJd-DJeo.js","assets/index-CCCewUvk.js","assets/index-6Rnl9Pmq.js","assets/send-12aOS0zJ.js","assets/index-DGmBkc-s.js","assets/index-5NjaPRFk.js","assets/receive-DZDoB7X9.js","assets/index-DgdnEBzT.js","assets/onramp-Dwkr2rjN.js","assets/index-Ba549WJ-.js","assets/index-Th-bM_G1.js","assets/transactions-BH-u3LlU.js","assets/index-CyhxIUby.js","assets/index-BzJRekCm.js","assets/index-C6P8x3N6.js","assets/index-DUT5Dot-.js","assets/index-DZNePJRI.js","assets/w3m-modal-BvDYdmiv.js","assets/SafeProvider-D6Gtasli.js","assets/index-CCQ-jUte.js","assets/sha3-DVSzrknm.js","assets/index-BRs_Oh5P.js","assets/index-RtP0vSO5.js"])))=>i.map(i=>d[i]);
var E9=Object.defineProperty;var j3=n=>{throw TypeError(n)};var v9=(n,e,t)=>e in n?E9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ie=(n,e,t)=>v9(n,typeof e!="symbol"?e+"":e,t),nC=(n,e,t)=>e.has(n)||j3("Cannot "+t);var x=(n,e,t)=>(nC(n,e,"read from private field"),t?t.call(n):e.get(n)),le=(n,e,t)=>e.has(n)?j3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),z=(n,e,t,r)=>(nC(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),be=(n,e,t)=>(nC(n,e,"access private method"),t);var Hg=(n,e,t,r)=>({set _(s){z(n,e,s,t)},get _(){return x(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function A9(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var rC={exports:{}},jg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q3;function C9(){if(q3)return jg;q3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:n,type:r,key:o,ref:s!==void 0?s:null,props:i}}return jg.Fragment=e,jg.jsx=t,jg.jsxs=t,jg}var G3;function _9(){return G3||(G3=1,rC.exports=C9()),rC.exports}var ue=_9(),sC={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3;function S9(){if(V3)return ct;V3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(O){return O===null||typeof O!="object"?null:(O=g&&O[g]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,v={};function A(O,V,Z){this.props=O,this.context=V,this.refs=v,this.updater=Z||b}A.prototype.isReactComponent={},A.prototype.setState=function(O,V){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,V,"setState")},A.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=A.prototype;function T(O,V,Z){this.props=O,this.context=V,this.refs=v,this.updater=Z||b}var N=T.prototype=new S;N.constructor=T,E(N,A.prototype),N.isPureReactComponent=!0;var k=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function F(O,V,Z,re,ee,he){return Z=he.ref,{$$typeof:n,type:O,key:V,ref:Z!==void 0?Z:null,props:he}}function $(O,V){return F(O.type,V,void 0,void 0,void 0,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function H(O){var V={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Z){return V[Z]})}var j=/\/+/g;function W(O,V){return typeof O=="object"&&O!==null&&O.key!=null?H(""+O.key):V.toString(36)}function ne(){}function J(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ne,ne):(O.status="pending",O.then(function(V){O.status==="pending"&&(O.status="fulfilled",O.value=V)},function(V){O.status==="pending"&&(O.status="rejected",O.reason=V)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function I(O,V,Z,re,ee){var he=typeof O;(he==="undefined"||he==="boolean")&&(O=null);var me=!1;if(O===null)me=!0;else switch(he){case"bigint":case"string":case"number":me=!0;break;case"object":switch(O.$$typeof){case n:case e:me=!0;break;case p:return me=O._init,I(me(O._payload),V,Z,re,ee)}}if(me)return ee=ee(O),me=re===""?"."+W(O,0):re,k(ee)?(Z="",me!=null&&(Z=me.replace(j,"$&/")+"/"),I(ee,V,Z,"",function(Ne){return Ne})):ee!=null&&(B(ee)&&(ee=$(ee,Z+(ee.key==null||O&&O.key===ee.key?"":(""+ee.key).replace(j,"$&/")+"/")+me)),V.push(ee)),1;me=0;var Ce=re===""?".":re+":";if(k(O))for(var Pe=0;Pe<O.length;Pe++)re=O[Pe],he=Ce+W(re,Pe),me+=I(re,V,Z,he,ee);else if(Pe=y(O),typeof Pe=="function")for(O=Pe.call(O),Pe=0;!(re=O.next()).done;)re=re.value,he=Ce+W(re,Pe++),me+=I(re,V,Z,he,ee);else if(he==="object"){if(typeof O.then=="function")return I(J(O),V,Z,re,ee);throw V=String(O),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return me}function _(O,V,Z){if(O==null)return O;var re=[],ee=0;return I(O,re,"","",function(he){return V.call(Z,he,ee++)}),re}function L(O){if(O._status===-1){var V=O._result;V=V(),V.then(function(Z){(O._status===0||O._status===-1)&&(O._status=1,O._result=Z)},function(Z){(O._status===0||O._status===-1)&&(O._status=2,O._result=Z)}),O._status===-1&&(O._status=0,O._result=V)}if(O._status===1)return O._result.default;throw O._result}var q=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function K(){}return ct.Children={map:_,forEach:function(O,V,Z){_(O,function(){V.apply(this,arguments)},Z)},count:function(O){var V=0;return _(O,function(){V++}),V},toArray:function(O){return _(O,function(V){return V})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ct.Component=A,ct.Fragment=t,ct.Profiler=s,ct.PureComponent=T,ct.StrictMode=r,ct.Suspense=h,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ct.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},ct.cache=function(O){return function(){return O.apply(null,arguments)}},ct.cloneElement=function(O,V,Z){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var re=E({},O.props),ee=O.key,he=void 0;if(V!=null)for(me in V.ref!==void 0&&(he=void 0),V.key!==void 0&&(ee=""+V.key),V)!P.call(V,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&V.ref===void 0||(re[me]=V[me]);var me=arguments.length-2;if(me===1)re.children=Z;else if(1<me){for(var Ce=Array(me),Pe=0;Pe<me;Pe++)Ce[Pe]=arguments[Pe+2];re.children=Ce}return F(O.type,ee,void 0,void 0,he,re)},ct.createContext=function(O){return O={$$typeof:o,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:i,_context:O},O},ct.createElement=function(O,V,Z){var re,ee={},he=null;if(V!=null)for(re in V.key!==void 0&&(he=""+V.key),V)P.call(V,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ee[re]=V[re]);var me=arguments.length-2;if(me===1)ee.children=Z;else if(1<me){for(var Ce=Array(me),Pe=0;Pe<me;Pe++)Ce[Pe]=arguments[Pe+2];ee.children=Ce}if(O&&O.defaultProps)for(re in me=O.defaultProps,me)ee[re]===void 0&&(ee[re]=me[re]);return F(O,he,void 0,void 0,null,ee)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(O){return{$$typeof:l,render:O}},ct.isValidElement=B,ct.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:L}},ct.memo=function(O,V){return{$$typeof:d,type:O,compare:V===void 0?null:V}},ct.startTransition=function(O){var V=R.T,Z={};R.T=Z;try{var re=O(),ee=R.S;ee!==null&&ee(Z,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(K,q)}catch(he){q(he)}finally{R.T=V}},ct.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ct.use=function(O){return R.H.use(O)},ct.useActionState=function(O,V,Z){return R.H.useActionState(O,V,Z)},ct.useCallback=function(O,V){return R.H.useCallback(O,V)},ct.useContext=function(O){return R.H.useContext(O)},ct.useDebugValue=function(){},ct.useDeferredValue=function(O,V){return R.H.useDeferredValue(O,V)},ct.useEffect=function(O,V,Z){var re=R.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(O,V)},ct.useId=function(){return R.H.useId()},ct.useImperativeHandle=function(O,V,Z){return R.H.useImperativeHandle(O,V,Z)},ct.useInsertionEffect=function(O,V){return R.H.useInsertionEffect(O,V)},ct.useLayoutEffect=function(O,V){return R.H.useLayoutEffect(O,V)},ct.useMemo=function(O,V){return R.H.useMemo(O,V)},ct.useOptimistic=function(O,V){return R.H.useOptimistic(O,V)},ct.useReducer=function(O,V,Z){return R.H.useReducer(O,V,Z)},ct.useRef=function(O){return R.H.useRef(O)},ct.useState=function(O){return R.H.useState(O)},ct.useSyncExternalStore=function(O,V,Z){return R.H.useSyncExternalStore(O,V,Z)},ct.useTransition=function(){return R.H.useTransition()},ct.version="19.1.0",ct}var K3;function DS(){return K3||(K3=1,sC.exports=S9()),sC.exports}var fe=DS();const De=iy(fe);var iC={exports:{}},qg={},aC={exports:{}},oC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W3;function x9(){return W3||(W3=1,function(n){function e(_,L){var q=_.length;_.push(L);e:for(;0<q;){var K=q-1>>>1,O=_[K];if(0<s(O,L))_[K]=L,_[q]=O,q=K;else break e}}function t(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var L=_[0],q=_.pop();if(q!==L){_[0]=q;e:for(var K=0,O=_.length,V=O>>>1;K<V;){var Z=2*(K+1)-1,re=_[Z],ee=Z+1,he=_[ee];if(0>s(re,q))ee<O&&0>s(he,re)?(_[K]=he,_[ee]=q,K=ee):(_[K]=re,_[Z]=q,K=Z);else if(ee<O&&0>s(he,q))_[K]=he,_[ee]=q,K=ee;else break e}}return L}function s(_,L){var q=_.sortIndex-L.sortIndex;return q!==0?q:_.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var h=[],d=[],p=1,g=null,y=3,b=!1,E=!1,v=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(_){for(var L=t(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=_)r(d),L.sortIndex=L.expirationTime,e(h,L);else break;L=t(d)}}function R(_){if(v=!1,k(_),!E)if(t(h)!==null)E=!0,P||(P=!0,W());else{var L=t(d);L!==null&&I(R,L.startTime-_)}}var P=!1,F=-1,$=5,B=-1;function H(){return A?!0:!(n.unstable_now()-B<$)}function j(){if(A=!1,P){var _=n.unstable_now();B=_;var L=!0;try{e:{E=!1,v&&(v=!1,T(F),F=-1),b=!0;var q=y;try{t:{for(k(_),g=t(h);g!==null&&!(g.expirationTime>_&&H());){var K=g.callback;if(typeof K=="function"){g.callback=null,y=g.priorityLevel;var O=K(g.expirationTime<=_);if(_=n.unstable_now(),typeof O=="function"){g.callback=O,k(_),L=!0;break t}g===t(h)&&r(h),k(_)}else r(h);g=t(h)}if(g!==null)L=!0;else{var V=t(d);V!==null&&I(R,V.startTime-_),L=!1}}break e}finally{g=null,y=q,b=!1}L=void 0}}finally{L?W():P=!1}}}var W;if(typeof N=="function")W=function(){N(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,J=ne.port2;ne.port1.onmessage=j,W=function(){J.postMessage(null)}}else W=function(){S(j,0)};function I(_,L){F=S(function(){_(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(_){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var q=y;y=L;try{return _()}finally{y=q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(_,L){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var q=y;y=_;try{return L()}finally{y=q}},n.unstable_scheduleCallback=function(_,L,q){var K=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,_){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=q+O,_={id:p++,callback:L,priorityLevel:_,startTime:q,expirationTime:O,sortIndex:-1},q>K?(_.sortIndex=q,e(d,_),t(h)===null&&_===t(d)&&(v?(T(F),F=-1):v=!0,I(R,q-K))):(_.sortIndex=O,e(h,_),E||b||(E=!0,P||(P=!0,W()))),_},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(_){var L=y;return function(){var q=y;y=L;try{return _.apply(this,arguments)}finally{y=q}}}}(oC)),oC}var Y3;function N9(){return Y3||(Y3=1,aC.exports=x9()),aC.exports}var cC={exports:{}},_r={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3;function T9(){if(Q3)return _r;Q3=1;var n=DS();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(h,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:h,containerInfo:d,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return _r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_r.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return i(h,d,null,p)},_r.flushSync=function(h){var d=o.T,p=r.p;try{if(o.T=null,r.p=2,h)return h()}finally{o.T=d,r.p=p,r.d.f()}},_r.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},_r.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},_r.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},_r.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=l(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},_r.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin);r.d.L(h,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},_r.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=l(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},_r.requestFormReset=function(h){r.d.r(h)},_r.unstable_batchedUpdates=function(h,d){return h(d)},_r.useFormState=function(h,d,p){return o.H.useFormState(h,d,p)},_r.useFormStatus=function(){return o.H.useHostTransitionStatus()},_r.version="19.1.0",_r}var Z3;function I9(){if(Z3)return cC.exports;Z3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cC.exports=T9(),cC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X3;function O9(){if(X3)return qg;X3=1;var n=N9(),e=DS(),t=I9();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var c=a,u=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(u=c.return),a=c.return;while(a)}return c.tag===3?u:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(i(a)!==a)throw Error(r(188))}function h(a){var c=a.alternate;if(!c){if(c=i(a),c===null)throw Error(r(188));return c!==a?null:a}for(var u=a,f=c;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return l(m),a;if(w===f)return l(m),c;w=w.sibling}throw Error(r(188))}if(u.return!==f.return)u=m,f=w;else{for(var C=!1,U=m.child;U;){if(U===u){C=!0,u=m,f=w;break}if(U===f){C=!0,f=m,u=w;break}U=U.sibling}if(!C){for(U=w.child;U;){if(U===u){C=!0,u=w,f=m;break}if(U===f){C=!0,f=w,u=m;break}U=U.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Symbol.for("react.client.reference");function J(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ne?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case A:return"Profiler";case v:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case N:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case k:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case F:return c=a.displayName||null,c!==null?c:J(a.type)||"Memo";case $:c=a._payload,a=a._init;try{return J(a(c))}catch{}}return null}var I=Array.isArray,_=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},K=[],O=-1;function V(a){return{current:a}}function Z(a){0>O||(a.current=K[O],K[O]=null,O--)}function re(a,c){O++,K[O]=a.current,a.current=c}var ee=V(null),he=V(null),me=V(null),Ce=V(null);function Pe(a,c){switch(re(me,c),re(he,a),re(ee,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?y3(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=y3(c),a=w3(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(ee),re(ee,a)}function Ne(){Z(ee),Z(he),Z(me)}function Qe(a){a.memoizedState!==null&&re(Ce,a);var c=ee.current,u=w3(c,a.type);c!==u&&(re(he,a),re(ee,u))}function Qt(a){he.current===a&&(Z(ee),Z(he)),Ce.current===a&&(Z(Ce),Lg._currentValue=q)}var Lt=Object.prototype.hasOwnProperty,wn=n.unstable_scheduleCallback,fn=n.unstable_cancelCallback,ra=n.unstable_shouldYield,Bh=n.unstable_requestPaint,Qs=n.unstable_now,jv=n.unstable_getCurrentPriorityLevel,jp=n.unstable_ImmediatePriority,qp=n.unstable_UserBlockingPriority,Xo=n.unstable_NormalPriority,Dy=n.unstable_LowPriority,Gp=n.unstable_IdlePriority,Py=n.log,Uy=n.unstable_setDisableYieldValue,Jo=null,Br=null;function sa(a){if(typeof Py=="function"&&Uy(a),Br&&typeof Br.setStrictMode=="function")try{Br.setStrictMode(Jo,a)}catch{}}var Lr=Math.clz32?Math.clz32:aL,qv=Math.log,iL=Math.LN2;function aL(a){return a>>>=0,a===0?32:31-(qv(a)/iL|0)|0}var ky=256,By=4194304;function Pl(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ly(a,c,u){var f=a.pendingLanes;if(f===0)return 0;var m=0,w=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var U=f&134217727;return U!==0?(f=U&~w,f!==0?m=Pl(f):(C&=U,C!==0?m=Pl(C):u||(u=U&~a,u!==0&&(m=Pl(u))))):(U=f&~w,U!==0?m=Pl(U):C!==0?m=Pl(C):u||(u=f&~a,u!==0&&(m=Pl(u)))),m===0?0:c!==0&&c!==m&&(c&w)===0&&(w=m&-m,u=c&-c,w>=u||w===32&&(u&4194048)!==0)?c:m}function Vp(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function oL(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eN(){var a=ky;return ky<<=1,(ky&4194048)===0&&(ky=256),a}function tN(){var a=By;return By<<=1,(By&62914560)===0&&(By=4194304),a}function Gv(a){for(var c=[],u=0;31>u;u++)c.push(a);return c}function Kp(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function cL(a,c,u,f,m,w){var C=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var U=a.entanglements,G=a.expirationTimes,se=a.hiddenUpdates;for(u=C&~u;0<u;){var de=31-Lr(u),ge=1<<de;U[de]=0,G[de]=-1;var ae=se[de];if(ae!==null)for(se[de]=null,de=0;de<ae.length;de++){var oe=ae[de];oe!==null&&(oe.lane&=-536870913)}u&=~ge}f!==0&&nN(a,f,0),w!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=w&~(C&~c))}function nN(a,c,u){a.pendingLanes|=c,a.suspendedLanes&=~c;var f=31-Lr(c);a.entangledLanes|=c,a.entanglements[f]=a.entanglements[f]|1073741824|u&4194090}function rN(a,c){var u=a.entangledLanes|=c;for(a=a.entanglements;u;){var f=31-Lr(u),m=1<<f;m&c|a[f]&c&&(a[f]|=c),u&=~m}}function Vv(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Kv(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function sN(){var a=L.p;return a!==0?a:(a=window.event,a===void 0?32:L3(a.type))}function lL(a,c){var u=L.p;try{return L.p=a,c()}finally{L.p=u}}var ec=Math.random().toString(36).slice(2),Ar="__reactFiber$"+ec,Jr="__reactProps$"+ec,Lh="__reactContainer$"+ec,Wv="__reactEvents$"+ec,uL="__reactListeners$"+ec,hL="__reactHandles$"+ec,iN="__reactResources$"+ec,Wp="__reactMarker$"+ec;function Yv(a){delete a[Ar],delete a[Jr],delete a[Wv],delete a[uL],delete a[hL]}function Mh(a){var c=a[Ar];if(c)return c;for(var u=a.parentNode;u;){if(c=u[Lh]||u[Ar]){if(u=c.alternate,c.child!==null||u!==null&&u.child!==null)for(a=A3(a);a!==null;){if(u=a[Ar])return u;a=A3(a)}return c}a=u,u=a.parentNode}return null}function $h(a){if(a=a[Ar]||a[Lh]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Yp(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Fh(a){var c=a[iN];return c||(c=a[iN]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Vn(a){a[Wp]=!0}var aN=new Set,oN={};function Ul(a,c){zh(a,c),zh(a+"Capture",c)}function zh(a,c){for(oN[a]=c,a=0;a<c.length;a++)aN.add(c[a])}var dL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cN={},lN={};function fL(a){return Lt.call(lN,a)?!0:Lt.call(cN,a)?!1:dL.test(a)?lN[a]=!0:(cN[a]=!0,!1)}function My(a,c,u){if(fL(c))if(u===null)a.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var f=c.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+u)}}function $y(a,c,u){if(u===null)a.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+u)}}function Ka(a,c,u,f){if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(c,u,""+f)}}var Qv,uN;function Hh(a){if(Qv===void 0)try{throw Error()}catch(u){var c=u.stack.trim().match(/\n( *(at )?)/);Qv=c&&c[1]||"",uN=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qv+a+uN}var Zv=!1;function Xv(a,c){if(!a||Zv)return"";Zv=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(c){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(oe){var ae=oe}Reflect.construct(a,[],ge)}else{try{ge.call()}catch(oe){ae=oe}a.call(ge.prototype)}}else{try{throw Error()}catch(oe){ae=oe}(ge=a())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(oe){if(oe&&ae&&typeof oe.stack=="string")return[oe.stack,ae.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=f.DetermineComponentFrameRoot(),C=w[0],U=w[1];if(C&&U){var G=C.split(`
`),se=U.split(`
`);for(m=f=0;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;for(;m<se.length&&!se[m].includes("DetermineComponentFrameRoot");)m++;if(f===G.length||m===se.length)for(f=G.length-1,m=se.length-1;1<=f&&0<=m&&G[f]!==se[m];)m--;for(;1<=f&&0<=m;f--,m--)if(G[f]!==se[m]){if(f!==1||m!==1)do if(f--,m--,0>m||G[f]!==se[m]){var de=`
`+G[f].replace(" at new "," at ");return a.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",a.displayName)),de}while(1<=f&&0<=m);break}}}finally{Zv=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Hh(u):""}function pL(a){switch(a.tag){case 26:case 27:case 5:return Hh(a.type);case 16:return Hh("Lazy");case 13:return Hh("Suspense");case 19:return Hh("SuspenseList");case 0:case 15:return Xv(a.type,!1);case 11:return Xv(a.type.render,!1);case 1:return Xv(a.type,!0);case 31:return Hh("Activity");default:return""}}function hN(a){try{var c="";do c+=pL(a),a=a.return;while(a);return c}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Zs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function dN(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function gL(a){var c=dN(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),f=""+a[c];if(!a.hasOwnProperty(c)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return m.call(this)},set:function(C){f=""+C,w.call(this,C)}}),Object.defineProperty(a,c,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Fy(a){a._valueTracker||(a._valueTracker=gL(a))}function fN(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var u=c.getValue(),f="";return a&&(f=dN(a)?a.checked?"true":"false":a.value),a=f,a!==u?(c.setValue(a),!0):!1}function zy(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var mL=/[\n"\\]/g;function Xs(a){return a.replace(mL,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Jv(a,c,u,f,m,w,C,U){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),c!=null?C==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Zs(c)):a.value!==""+Zs(c)&&(a.value=""+Zs(c)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),c!=null?e1(a,C,Zs(c)):u!=null?e1(a,C,Zs(u)):f!=null&&a.removeAttribute("value"),m==null&&w!=null&&(a.defaultChecked=!!w),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.name=""+Zs(U):a.removeAttribute("name")}function pN(a,c,u,f,m,w,C,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),c!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;u=u!=null?""+Zs(u):"",c=c!=null?""+Zs(c):u,U||c===a.value||(a.value=c),a.defaultValue=c}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=U?a.checked:!!f,a.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C)}function e1(a,c,u){c==="number"&&zy(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function jh(a,c,u,f){if(a=a.options,c){c={};for(var m=0;m<u.length;m++)c["$"+u[m]]=!0;for(u=0;u<a.length;u++)m=c.hasOwnProperty("$"+a[u].value),a[u].selected!==m&&(a[u].selected=m),m&&f&&(a[u].defaultSelected=!0)}else{for(u=""+Zs(u),c=null,m=0;m<a.length;m++){if(a[m].value===u){a[m].selected=!0,f&&(a[m].defaultSelected=!0);return}c!==null||a[m].disabled||(c=a[m])}c!==null&&(c.selected=!0)}}function gN(a,c,u){if(c!=null&&(c=""+Zs(c),c!==a.value&&(a.value=c),u==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=u!=null?""+Zs(u):""}function mN(a,c,u,f){if(c==null){if(f!=null){if(u!=null)throw Error(r(92));if(I(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),c=u}u=Zs(c),a.defaultValue=u,f=a.textContent,f===u&&f!==""&&f!==null&&(a.value=f)}function qh(a,c){if(c){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=c;return}}a.textContent=c}var yL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yN(a,c,u){var f=c.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":f?a.setProperty(c,u):typeof u!="number"||u===0||yL.has(c)?c==="float"?a.cssFloat=u:a[c]=(""+u).trim():a[c]=u+"px"}function wN(a,c,u){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||c!=null&&c.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var m in c)f=c[m],c.hasOwnProperty(m)&&u[m]!==f&&yN(a,m,f)}else for(var w in c)c.hasOwnProperty(w)&&yN(a,w,c[w])}function t1(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hy(a){return bL.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var n1=null;function r1(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Gh=null,Vh=null;function bN(a){var c=$h(a);if(c&&(a=c.stateNode)){var u=a[Jr]||null;e:switch(a=c.stateNode,c.type){case"input":if(Jv(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),c=u.name,u.type==="radio"&&c!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Xs(""+c)+'"][type="radio"]'),c=0;c<u.length;c++){var f=u[c];if(f!==a&&f.form===a.form){var m=f[Jr]||null;if(!m)throw Error(r(90));Jv(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(c=0;c<u.length;c++)f=u[c],f.form===a.form&&fN(f)}break e;case"textarea":gN(a,u.value,u.defaultValue);break e;case"select":c=u.value,c!=null&&jh(a,!!u.multiple,c,!1)}}}var s1=!1;function EN(a,c,u){if(s1)return a(c,u);s1=!0;try{var f=a(c);return f}finally{if(s1=!1,(Gh!==null||Vh!==null)&&(Nw(),Gh&&(c=Gh,a=Vh,Vh=Gh=null,bN(c),a)))for(c=0;c<a.length;c++)bN(a[c])}}function Qp(a,c){var u=a.stateNode;if(u===null)return null;var f=u[Jr]||null;if(f===null)return null;u=f[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,c,typeof u));return u}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i1=!1;if(Wa)try{var Zp={};Object.defineProperty(Zp,"passive",{get:function(){i1=!0}}),window.addEventListener("test",Zp,Zp),window.removeEventListener("test",Zp,Zp)}catch{i1=!1}var tc=null,a1=null,jy=null;function vN(){if(jy)return jy;var a,c=a1,u=c.length,f,m="value"in tc?tc.value:tc.textContent,w=m.length;for(a=0;a<u&&c[a]===m[a];a++);var C=u-a;for(f=1;f<=C&&c[u-f]===m[w-f];f++);return jy=m.slice(a,1<f?1-f:void 0)}function qy(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Gy(){return!0}function AN(){return!1}function es(a){function c(u,f,m,w,C){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var U in a)a.hasOwnProperty(U)&&(u=a[U],this[U]=u?u(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Gy:AN,this.isPropagationStopped=AN,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Gy)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Gy)},persist:function(){},isPersistent:Gy}),c}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vy=es(kl),Xp=p({},kl,{view:0,detail:0}),EL=es(Xp),o1,c1,Jp,Ky=p({},Xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Jp&&(Jp&&a.type==="mousemove"?(o1=a.screenX-Jp.screenX,c1=a.screenY-Jp.screenY):c1=o1=0,Jp=a),o1)},movementY:function(a){return"movementY"in a?a.movementY:c1}}),CN=es(Ky),vL=p({},Ky,{dataTransfer:0}),AL=es(vL),CL=p({},Xp,{relatedTarget:0}),l1=es(CL),_L=p({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),SL=es(_L),xL=p({},kl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),NL=es(xL),TL=p({},kl,{data:0}),_N=es(TL),IL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DL(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=RL[a])?!!c[a]:!1}function u1(){return DL}var PL=p({},Xp,{key:function(a){if(a.key){var c=IL[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=qy(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?OL[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(a){return a.type==="keypress"?qy(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?qy(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),UL=es(PL),kL=p({},Ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SN=es(kL),BL=p({},Xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),LL=es(BL),ML=p({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),$L=es(ML),FL=p({},Ky,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zL=es(FL),HL=p({},kl,{newState:0,oldState:0}),jL=es(HL),qL=[9,13,27,32],h1=Wa&&"CompositionEvent"in window,eg=null;Wa&&"documentMode"in document&&(eg=document.documentMode);var GL=Wa&&"TextEvent"in window&&!eg,xN=Wa&&(!h1||eg&&8<eg&&11>=eg),NN=" ",TN=!1;function IN(a,c){switch(a){case"keyup":return qL.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ON(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Kh=!1;function VL(a,c){switch(a){case"compositionend":return ON(c);case"keypress":return c.which!==32?null:(TN=!0,NN);case"textInput":return a=c.data,a===NN&&TN?null:a;default:return null}}function KL(a,c){if(Kh)return a==="compositionend"||!h1&&IN(a,c)?(a=vN(),jy=a1=tc=null,Kh=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return xN&&c.locale!=="ko"?null:c.data;default:return null}}var WL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RN(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!WL[a.type]:c==="textarea"}function DN(a,c,u,f){Gh?Vh?Vh.push(f):Vh=[f]:Gh=f,c=Pw(c,"onChange"),0<c.length&&(u=new Vy("onChange","change",null,u,f),a.push({event:u,listeners:c}))}var tg=null,ng=null;function YL(a){d3(a,0)}function Wy(a){var c=Yp(a);if(fN(c))return a}function PN(a,c){if(a==="change")return c}var UN=!1;if(Wa){var d1;if(Wa){var f1="oninput"in document;if(!f1){var kN=document.createElement("div");kN.setAttribute("oninput","return;"),f1=typeof kN.oninput=="function"}d1=f1}else d1=!1;UN=d1&&(!document.documentMode||9<document.documentMode)}function BN(){tg&&(tg.detachEvent("onpropertychange",LN),ng=tg=null)}function LN(a){if(a.propertyName==="value"&&Wy(ng)){var c=[];DN(c,ng,a,r1(a)),EN(YL,c)}}function QL(a,c,u){a==="focusin"?(BN(),tg=c,ng=u,tg.attachEvent("onpropertychange",LN)):a==="focusout"&&BN()}function ZL(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Wy(ng)}function XL(a,c){if(a==="click")return Wy(c)}function JL(a,c){if(a==="input"||a==="change")return Wy(c)}function eM(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var xs=typeof Object.is=="function"?Object.is:eM;function rg(a,c){if(xs(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var u=Object.keys(a),f=Object.keys(c);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!Lt.call(c,m)||!xs(a[m],c[m]))return!1}return!0}function MN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $N(a,c){var u=MN(a);a=0;for(var f;u;){if(u.nodeType===3){if(f=a+u.textContent.length,a<=c&&f>=c)return{node:u,offset:c-a};a=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=MN(u)}}function FN(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?FN(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function zN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=zy(a.document);c instanceof a.HTMLIFrameElement;){try{var u=typeof c.contentWindow.location.href=="string"}catch{u=!1}if(u)a=c.contentWindow;else break;c=zy(a.document)}return c}function p1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var tM=Wa&&"documentMode"in document&&11>=document.documentMode,Wh=null,g1=null,sg=null,m1=!1;function HN(a,c,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;m1||Wh==null||Wh!==zy(f)||(f=Wh,"selectionStart"in f&&p1(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),sg&&rg(sg,f)||(sg=f,f=Pw(g1,"onSelect"),0<f.length&&(c=new Vy("onSelect","select",null,c,u),a.push({event:c,listeners:f}),c.target=Wh)))}function Bl(a,c){var u={};return u[a.toLowerCase()]=c.toLowerCase(),u["Webkit"+a]="webkit"+c,u["Moz"+a]="moz"+c,u}var Yh={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},y1={},jN={};Wa&&(jN=document.createElement("div").style,"AnimationEvent"in window||(delete Yh.animationend.animation,delete Yh.animationiteration.animation,delete Yh.animationstart.animation),"TransitionEvent"in window||delete Yh.transitionend.transition);function Ll(a){if(y1[a])return y1[a];if(!Yh[a])return a;var c=Yh[a],u;for(u in c)if(c.hasOwnProperty(u)&&u in jN)return y1[a]=c[u];return a}var qN=Ll("animationend"),GN=Ll("animationiteration"),VN=Ll("animationstart"),nM=Ll("transitionrun"),rM=Ll("transitionstart"),sM=Ll("transitioncancel"),KN=Ll("transitionend"),WN=new Map,w1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");w1.push("scrollEnd");function Ni(a,c){WN.set(a,c),Ul(c,[a])}var YN=new WeakMap;function Js(a,c){if(typeof a=="object"&&a!==null){var u=YN.get(a);return u!==void 0?u:(c={value:a,source:c,stack:hN(c)},YN.set(a,c),c)}return{value:a,source:c,stack:hN(c)}}var ei=[],Qh=0,b1=0;function Yy(){for(var a=Qh,c=b1=Qh=0;c<a;){var u=ei[c];ei[c++]=null;var f=ei[c];ei[c++]=null;var m=ei[c];ei[c++]=null;var w=ei[c];if(ei[c++]=null,f!==null&&m!==null){var C=f.pending;C===null?m.next=m:(m.next=C.next,C.next=m),f.pending=m}w!==0&&QN(u,m,w)}}function Qy(a,c,u,f){ei[Qh++]=a,ei[Qh++]=c,ei[Qh++]=u,ei[Qh++]=f,b1|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function E1(a,c,u,f){return Qy(a,c,u,f),Zy(a)}function Zh(a,c){return Qy(a,null,null,c),Zy(a)}function QN(a,c,u){a.lanes|=u;var f=a.alternate;f!==null&&(f.lanes|=u);for(var m=!1,w=a.return;w!==null;)w.childLanes|=u,f=w.alternate,f!==null&&(f.childLanes|=u),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(m=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,m&&c!==null&&(m=31-Lr(u),a=w.hiddenUpdates,f=a[m],f===null?a[m]=[c]:f.push(c),c.lane=u|536870912),w):null}function Zy(a){if(50<Ig)throw Ig=0,xA=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Xh={};function iM(a,c,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(a,c,u,f){return new iM(a,c,u,f)}function v1(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ya(a,c){var u=a.alternate;return u===null?(u=Ns(a.tag,c,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=c,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,c=a.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function ZN(a,c){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,c=u.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Xy(a,c,u,f,m,w){var C=0;if(f=a,typeof a=="function")v1(a)&&(C=1);else if(typeof a=="string")C=o9(a,u,ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Ns(31,u,c,m),a.elementType=B,a.lanes=w,a;case E:return Ml(u.children,m,w,c);case v:C=8,m|=24;break;case A:return a=Ns(12,u,c,m|2),a.elementType=A,a.lanes=w,a;case R:return a=Ns(13,u,c,m),a.elementType=R,a.lanes=w,a;case P:return a=Ns(19,u,c,m),a.elementType=P,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case S:case N:C=10;break e;case T:C=9;break e;case k:C=11;break e;case F:C=14;break e;case $:C=16,f=null;break e}C=29,u=Error(r(130,a===null?"null":typeof a,"")),f=null}return c=Ns(C,u,c,m),c.elementType=a,c.type=f,c.lanes=w,c}function Ml(a,c,u,f){return a=Ns(7,a,f,c),a.lanes=u,a}function A1(a,c,u){return a=Ns(6,a,null,c),a.lanes=u,a}function C1(a,c,u){return c=Ns(4,a.children!==null?a.children:[],a.key,c),c.lanes=u,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Jh=[],ed=0,Jy=null,ew=0,ti=[],ni=0,$l=null,Qa=1,Za="";function Fl(a,c){Jh[ed++]=ew,Jh[ed++]=Jy,Jy=a,ew=c}function XN(a,c,u){ti[ni++]=Qa,ti[ni++]=Za,ti[ni++]=$l,$l=a;var f=Qa;a=Za;var m=32-Lr(f)-1;f&=~(1<<m),u+=1;var w=32-Lr(c)+m;if(30<w){var C=m-m%5;w=(f&(1<<C)-1).toString(32),f>>=C,m-=C,Qa=1<<32-Lr(c)+m|u<<m|f,Za=w+a}else Qa=1<<w|u<<m|f,Za=a}function _1(a){a.return!==null&&(Fl(a,1),XN(a,1,0))}function S1(a){for(;a===Jy;)Jy=Jh[--ed],Jh[ed]=null,ew=Jh[--ed],Jh[ed]=null;for(;a===$l;)$l=ti[--ni],ti[ni]=null,Za=ti[--ni],ti[ni]=null,Qa=ti[--ni],ti[ni]=null}var Mr=null,An=null,Mt=!1,zl=null,ia=!1,x1=Error(r(519));function Hl(a){var c=Error(r(418,""));throw og(Js(c,a)),x1}function JN(a){var c=a.stateNode,u=a.type,f=a.memoizedProps;switch(c[Ar]=a,c[Jr]=f,u){case"dialog":wt("cancel",c),wt("close",c);break;case"iframe":case"object":case"embed":wt("load",c);break;case"video":case"audio":for(u=0;u<Rg.length;u++)wt(Rg[u],c);break;case"source":wt("error",c);break;case"img":case"image":case"link":wt("error",c),wt("load",c);break;case"details":wt("toggle",c);break;case"input":wt("invalid",c),pN(c,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Fy(c);break;case"select":wt("invalid",c);break;case"textarea":wt("invalid",c),mN(c,f.value,f.defaultValue,f.children),Fy(c)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||c.textContent===""+u||f.suppressHydrationWarning===!0||m3(c.textContent,u)?(f.popover!=null&&(wt("beforetoggle",c),wt("toggle",c)),f.onScroll!=null&&wt("scroll",c),f.onScrollEnd!=null&&wt("scrollend",c),f.onClick!=null&&(c.onclick=Uw),c=!0):c=!1,c||Hl(a)}function eT(a){for(Mr=a.return;Mr;)switch(Mr.tag){case 5:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:Mr=Mr.return}}function ig(a){if(a!==Mr)return!1;if(!Mt)return eT(a),Mt=!0,!1;var c=a.tag,u;if((u=c!==3&&c!==27)&&((u=c===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||HA(a.type,a.memoizedProps)),u=!u),u&&An&&Hl(a),eT(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(c===0){An=Ii(a.nextSibling);break e}c--}else u!=="$"&&u!=="$!"&&u!=="$?"||c++;a=a.nextSibling}An=null}}else c===27?(c=An,yc(a.type)?(a=VA,VA=null,An=a):An=c):An=Mr?Ii(a.stateNode.nextSibling):null;return!0}function ag(){An=Mr=null,Mt=!1}function tT(){var a=zl;return a!==null&&(rs===null?rs=a:rs.push.apply(rs,a),zl=null),a}function og(a){zl===null?zl=[a]:zl.push(a)}var N1=V(null),jl=null,Xa=null;function nc(a,c,u){re(N1,c._currentValue),c._currentValue=u}function Ja(a){a._currentValue=N1.current,Z(N1)}function T1(a,c,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,f!==null&&(f.childLanes|=c)):f!==null&&(f.childLanes&c)!==c&&(f.childLanes|=c),a===u)break;a=a.return}}function I1(a,c,u,f){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var w=m.dependencies;if(w!==null){var C=m.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=m;for(var G=0;G<c.length;G++)if(U.context===c[G]){w.lanes|=u,U=w.alternate,U!==null&&(U.lanes|=u),T1(w.return,u,a),f||(C=null);break e}w=U.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=u,w=C.alternate,w!==null&&(w.lanes|=u),T1(C,u,a),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===a){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function cg(a,c,u,f){a=null;for(var m=c,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var U=m.type;xs(m.pendingProps.value,C.value)||(a!==null?a.push(U):a=[U])}}else if(m===Ce.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(Lg):a=[Lg])}m=m.return}a!==null&&I1(c,a,u,f),c.flags|=262144}function tw(a){for(a=a.firstContext;a!==null;){if(!xs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ql(a){jl=a,Xa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Cr(a){return nT(jl,a)}function nw(a,c){return jl===null&&ql(a),nT(a,c)}function nT(a,c){var u=c._currentValue;if(c={context:c,memoizedValue:u,next:null},Xa===null){if(a===null)throw Error(r(308));Xa=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Xa=Xa.next=c;return u}var aM=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(u,f){a.push(f)}};this.abort=function(){c.aborted=!0,a.forEach(function(u){return u()})}},oM=n.unstable_scheduleCallback,cM=n.unstable_NormalPriority,Ln={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function O1(){return{controller:new aM,data:new Map,refCount:0}}function lg(a){a.refCount--,a.refCount===0&&oM(cM,function(){a.controller.abort()})}var ug=null,R1=0,td=0,nd=null;function lM(a,c){if(ug===null){var u=ug=[];R1=0,td=PA(),nd={status:"pending",value:void 0,then:function(f){u.push(f)}}}return R1++,c.then(rT,rT),c}function rT(){if(--R1===0&&ug!==null){nd!==null&&(nd.status="fulfilled");var a=ug;ug=null,td=0,nd=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function uM(a,c){var u=[],f={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return a.then(function(){f.status="fulfilled",f.value=c;for(var m=0;m<u.length;m++)(0,u[m])(c)},function(m){for(f.status="rejected",f.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),f}var sT=_.S;_.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&lM(a,c),sT!==null&&sT(a,c)};var Gl=V(null);function D1(){var a=Gl.current;return a!==null?a:cn.pooledCache}function rw(a,c){c===null?re(Gl,Gl.current):re(Gl,c.pool)}function iT(){var a=D1();return a===null?null:{parent:Ln._currentValue,pool:a}}var hg=Error(r(460)),aT=Error(r(474)),sw=Error(r(542)),P1={then:function(){}};function oT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function iw(){}function cT(a,c,u){switch(u=a[u],u===void 0?a.push(c):u!==c&&(c.then(iw,iw),c=u),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,uT(a),a;default:if(typeof c.status=="string")c.then(iw,iw);else{if(a=cn,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(f){if(c.status==="pending"){var m=c;m.status="fulfilled",m.value=f}},function(f){if(c.status==="pending"){var m=c;m.status="rejected",m.reason=f}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,uT(a),a}throw dg=c,hg}}var dg=null;function lT(){if(dg===null)throw Error(r(459));var a=dg;return dg=null,a}function uT(a){if(a===hg||a===sw)throw Error(r(483))}var rc=!1;function U1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function k1(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function sc(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ic(a,c,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(qt&2)!==0){var m=f.pending;return m===null?c.next=c:(c.next=m.next,m.next=c),f.pending=c,c=Zy(a),QN(a,null,u),c}return Qy(a,f,c,u),Zy(a)}function fg(a,c,u){if(c=c.updateQueue,c!==null&&(c=c.shared,(u&4194048)!==0)){var f=c.lanes;f&=a.pendingLanes,u|=f,c.lanes=u,rN(a,u)}}function B1(a,c){var u=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?m=w=C:w=w.next=C,u=u.next}while(u!==null);w===null?m=w=c:w=w.next=c}else m=w=c;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,callbacks:f.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=c}var L1=!1;function pg(){if(L1){var a=nd;if(a!==null)throw a}}function gg(a,c,u,f){L1=!1;var m=a.updateQueue;rc=!1;var w=m.firstBaseUpdate,C=m.lastBaseUpdate,U=m.shared.pending;if(U!==null){m.shared.pending=null;var G=U,se=G.next;G.next=null,C===null?w=se:C.next=se,C=G;var de=a.alternate;de!==null&&(de=de.updateQueue,U=de.lastBaseUpdate,U!==C&&(U===null?de.firstBaseUpdate=se:U.next=se,de.lastBaseUpdate=G))}if(w!==null){var ge=m.baseState;C=0,de=se=G=null,U=w;do{var ae=U.lane&-536870913,oe=ae!==U.lane;if(oe?(_t&ae)===ae:(f&ae)===ae){ae!==0&&ae===td&&(L1=!0),de!==null&&(de=de.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var rt=a,Ze=U;ae=c;var Jt=u;switch(Ze.tag){case 1:if(rt=Ze.payload,typeof rt=="function"){ge=rt.call(Jt,ge,ae);break e}ge=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=Ze.payload,ae=typeof rt=="function"?rt.call(Jt,ge,ae):rt,ae==null)break e;ge=p({},ge,ae);break e;case 2:rc=!0}}ae=U.callback,ae!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=m.callbacks,oe===null?m.callbacks=[ae]:oe.push(ae))}else oe={lane:ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},de===null?(se=de=oe,G=ge):de=de.next=oe,C|=ae;if(U=U.next,U===null){if(U=m.shared.pending,U===null)break;oe=U,U=oe.next,oe.next=null,m.lastBaseUpdate=oe,m.shared.pending=null}}while(!0);de===null&&(G=ge),m.baseState=G,m.firstBaseUpdate=se,m.lastBaseUpdate=de,w===null&&(m.shared.lanes=0),fc|=C,a.lanes=C,a.memoizedState=ge}}function hT(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function dT(a,c){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)hT(u[a],c)}var rd=V(null),aw=V(0);function fT(a,c){a=ao,re(aw,a),re(rd,c),ao=a|c.baseLanes}function M1(){re(aw,ao),re(rd,rd.current)}function $1(){ao=aw.current,Z(rd),Z(aw)}var ac=0,ft=null,Zt=null,Dn=null,ow=!1,sd=!1,Vl=!1,cw=0,mg=0,id=null,hM=0;function Nn(){throw Error(r(321))}function F1(a,c){if(c===null)return!1;for(var u=0;u<c.length&&u<a.length;u++)if(!xs(a[u],c[u]))return!1;return!0}function z1(a,c,u,f,m,w){return ac=w,ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,_.H=a===null||a.memoizedState===null?QT:ZT,Vl=!1,w=u(f,m),Vl=!1,sd&&(w=gT(c,u,f,m)),pT(a),w}function pT(a){_.H=pw;var c=Zt!==null&&Zt.next!==null;if(ac=0,Dn=Zt=ft=null,ow=!1,mg=0,id=null,c)throw Error(r(300));a===null||Kn||(a=a.dependencies,a!==null&&tw(a)&&(Kn=!0))}function gT(a,c,u,f){ft=a;var m=0;do{if(sd&&(id=null),mg=0,sd=!1,25<=m)throw Error(r(301));if(m+=1,Dn=Zt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}_.H=wM,w=c(u,f)}while(sd);return w}function dM(){var a=_.H,c=a.useState()[0];return c=typeof c.then=="function"?yg(c):c,a=a.useState()[0],(Zt!==null?Zt.memoizedState:null)!==a&&(ft.flags|=1024),c}function H1(){var a=cw!==0;return cw=0,a}function j1(a,c,u){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~u}function q1(a){if(ow){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ow=!1}ac=0,Dn=Zt=ft=null,sd=!1,mg=cw=0,id=null}function ts(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ft.memoizedState=Dn=a:Dn=Dn.next=a,Dn}function Pn(){if(Zt===null){var a=ft.alternate;a=a!==null?a.memoizedState:null}else a=Zt.next;var c=Dn===null?ft.memoizedState:Dn.next;if(c!==null)Dn=c,Zt=a;else{if(a===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Zt=a,a={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Dn===null?ft.memoizedState=Dn=a:Dn=Dn.next=a}return Dn}function G1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yg(a){var c=mg;return mg+=1,id===null&&(id=[]),a=cT(id,a,c),c=ft,(Dn===null?c.memoizedState:Dn.next)===null&&(c=c.alternate,_.H=c===null||c.memoizedState===null?QT:ZT),a}function lw(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return yg(a);if(a.$$typeof===N)return Cr(a)}throw Error(r(438,String(a)))}function V1(a){var c=null,u=ft.updateQueue;if(u!==null&&(c=u.memoCache),c==null){var f=ft.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(c={data:f.data.map(function(m){return m.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),u===null&&(u=G1(),ft.updateQueue=u),u.memoCache=c,u=c.data[c.index],u===void 0)for(u=c.data[c.index]=Array(a),f=0;f<a;f++)u[f]=H;return c.index++,u}function eo(a,c){return typeof c=="function"?c(a):c}function uw(a){var c=Pn();return K1(c,Zt,a)}function K1(a,c,u){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var m=a.baseQueue,w=f.pending;if(w!==null){if(m!==null){var C=m.next;m.next=w.next,w.next=C}c.baseQueue=m=w,f.pending=null}if(w=a.baseState,m===null)a.memoizedState=w;else{c=m.next;var U=C=null,G=null,se=c,de=!1;do{var ge=se.lane&-536870913;if(ge!==se.lane?(_t&ge)===ge:(ac&ge)===ge){var ae=se.revertLane;if(ae===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ge===td&&(de=!0);else if((ac&ae)===ae){se=se.next,ae===td&&(de=!0);continue}else ge={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},G===null?(U=G=ge,C=w):G=G.next=ge,ft.lanes|=ae,fc|=ae;ge=se.action,Vl&&u(w,ge),w=se.hasEagerState?se.eagerState:u(w,ge)}else ae={lane:ge,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},G===null?(U=G=ae,C=w):G=G.next=ae,ft.lanes|=ge,fc|=ge;se=se.next}while(se!==null&&se!==c);if(G===null?C=w:G.next=U,!xs(w,a.memoizedState)&&(Kn=!0,de&&(u=nd,u!==null)))throw u;a.memoizedState=w,a.baseState=C,a.baseQueue=G,f.lastRenderedState=w}return m===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function W1(a){var c=Pn(),u=c.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var f=u.dispatch,m=u.pending,w=c.memoizedState;if(m!==null){u.pending=null;var C=m=m.next;do w=a(w,C.action),C=C.next;while(C!==m);xs(w,c.memoizedState)||(Kn=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),u.lastRenderedState=w}return[w,f]}function mT(a,c,u){var f=ft,m=Pn(),w=Mt;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=c();var C=!xs((Zt||m).memoizedState,u);C&&(m.memoizedState=u,Kn=!0),m=m.queue;var U=bT.bind(null,f,m,a);if(wg(2048,8,U,[a]),m.getSnapshot!==c||C||Dn!==null&&Dn.memoizedState.tag&1){if(f.flags|=2048,ad(9,hw(),wT.bind(null,f,m,u,c),null),cn===null)throw Error(r(349));w||(ac&124)!==0||yT(f,c,u)}return u}function yT(a,c,u){a.flags|=16384,a={getSnapshot:c,value:u},c=ft.updateQueue,c===null?(c=G1(),ft.updateQueue=c,c.stores=[a]):(u=c.stores,u===null?c.stores=[a]:u.push(a))}function wT(a,c,u,f){c.value=u,c.getSnapshot=f,ET(c)&&vT(a)}function bT(a,c,u){return u(function(){ET(c)&&vT(a)})}function ET(a){var c=a.getSnapshot;a=a.value;try{var u=c();return!xs(a,u)}catch{return!0}}function vT(a){var c=Zh(a,2);c!==null&&Ds(c,a,2)}function Y1(a){var c=ts();if(typeof a=="function"){var u=a;if(a=u(),Vl){sa(!0);try{u()}finally{sa(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:a},c}function AT(a,c,u,f){return a.baseState=u,K1(a,Zt,typeof f=="function"?f:eo)}function fM(a,c,u,f,m){if(fw(a))throw Error(r(485));if(a=c.action,a!==null){var w={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};_.T!==null?u(!0):w.isTransition=!1,f(w),u=c.pending,u===null?(w.next=c.pending=w,CT(c,w)):(w.next=u.next,c.pending=u.next=w)}}function CT(a,c){var u=c.action,f=c.payload,m=a.state;if(c.isTransition){var w=_.T,C={};_.T=C;try{var U=u(m,f),G=_.S;G!==null&&G(C,U),_T(a,c,U)}catch(se){Q1(a,c,se)}finally{_.T=w}}else try{w=u(m,f),_T(a,c,w)}catch(se){Q1(a,c,se)}}function _T(a,c,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){ST(a,c,f)},function(f){return Q1(a,c,f)}):ST(a,c,u)}function ST(a,c,u){c.status="fulfilled",c.value=u,xT(c),a.state=u,c=a.pending,c!==null&&(u=c.next,u===c?a.pending=null:(u=u.next,c.next=u,CT(a,u)))}function Q1(a,c,u){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do c.status="rejected",c.reason=u,xT(c),c=c.next;while(c!==f)}a.action=null}function xT(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function NT(a,c){return c}function TT(a,c){if(Mt){var u=cn.formState;if(u!==null){e:{var f=ft;if(Mt){if(An){t:{for(var m=An,w=ia;m.nodeType!==8;){if(!w){m=null;break t}if(m=Ii(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){An=Ii(m.nextSibling),f=m.data==="F!";break e}}Hl(f)}f=!1}f&&(c=u[0])}}return u=ts(),u.memoizedState=u.baseState=c,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NT,lastRenderedState:c},u.queue=f,u=KT.bind(null,ft,f),f.dispatch=u,f=Y1(!1),w=tA.bind(null,ft,!1,f.queue),f=ts(),m={state:c,dispatch:null,action:a,pending:null},f.queue=m,u=fM.bind(null,ft,m,w,u),m.dispatch=u,f.memoizedState=a,[c,u,!1]}function IT(a){var c=Pn();return OT(c,Zt,a)}function OT(a,c,u){if(c=K1(a,c,NT)[0],a=uw(eo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var f=yg(c)}catch(C){throw C===hg?sw:C}else f=c;c=Pn();var m=c.queue,w=m.dispatch;return u!==c.memoizedState&&(ft.flags|=2048,ad(9,hw(),pM.bind(null,m,u),null)),[f,w,a]}function pM(a,c){a.action=c}function RT(a){var c=Pn(),u=Zt;if(u!==null)return OT(c,u,a);Pn(),c=c.memoizedState,u=Pn();var f=u.queue.dispatch;return u.memoizedState=a,[c,f,!1]}function ad(a,c,u,f){return a={tag:a,create:u,deps:f,inst:c,next:null},c=ft.updateQueue,c===null&&(c=G1(),ft.updateQueue=c),u=c.lastEffect,u===null?c.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,c.lastEffect=a),a}function hw(){return{destroy:void 0,resource:void 0}}function DT(){return Pn().memoizedState}function dw(a,c,u,f){var m=ts();f=f===void 0?null:f,ft.flags|=a,m.memoizedState=ad(1|c,hw(),u,f)}function wg(a,c,u,f){var m=Pn();f=f===void 0?null:f;var w=m.memoizedState.inst;Zt!==null&&f!==null&&F1(f,Zt.memoizedState.deps)?m.memoizedState=ad(c,w,u,f):(ft.flags|=a,m.memoizedState=ad(1|c,w,u,f))}function PT(a,c){dw(8390656,8,a,c)}function UT(a,c){wg(2048,8,a,c)}function kT(a,c){return wg(4,2,a,c)}function BT(a,c){return wg(4,4,a,c)}function LT(a,c){if(typeof c=="function"){a=a();var u=c(a);return function(){typeof u=="function"?u():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function MT(a,c,u){u=u!=null?u.concat([a]):null,wg(4,4,LT.bind(null,c,a),u)}function Z1(){}function $T(a,c){var u=Pn();c=c===void 0?null:c;var f=u.memoizedState;return c!==null&&F1(c,f[1])?f[0]:(u.memoizedState=[a,c],a)}function FT(a,c){var u=Pn();c=c===void 0?null:c;var f=u.memoizedState;if(c!==null&&F1(c,f[1]))return f[0];if(f=a(),Vl){sa(!0);try{a()}finally{sa(!1)}}return u.memoizedState=[f,c],f}function X1(a,c,u){return u===void 0||(ac&1073741824)!==0?a.memoizedState=c:(a.memoizedState=u,a=jI(),ft.lanes|=a,fc|=a,u)}function zT(a,c,u,f){return xs(u,c)?u:rd.current!==null?(a=X1(a,u,f),xs(a,c)||(Kn=!0),a):(ac&42)===0?(Kn=!0,a.memoizedState=u):(a=jI(),ft.lanes|=a,fc|=a,c)}function HT(a,c,u,f,m){var w=L.p;L.p=w!==0&&8>w?w:8;var C=_.T,U={};_.T=U,tA(a,!1,c,u);try{var G=m(),se=_.S;if(se!==null&&se(U,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var de=uM(G,f);bg(a,c,de,Rs(a))}else bg(a,c,f,Rs(a))}catch(ge){bg(a,c,{then:function(){},status:"rejected",reason:ge},Rs())}finally{L.p=w,_.T=C}}function gM(){}function J1(a,c,u,f){if(a.tag!==5)throw Error(r(476));var m=jT(a).queue;HT(a,m,c,q,u===null?gM:function(){return qT(a),u(f)})}function jT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:q},next:null};var u={};return c.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:u},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function qT(a){var c=jT(a).next.queue;bg(a,c,{},Rs())}function eA(){return Cr(Lg)}function GT(){return Pn().memoizedState}function VT(){return Pn().memoizedState}function mM(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var u=Rs();a=sc(u);var f=ic(c,a,u);f!==null&&(Ds(f,c,u),fg(f,c,u)),c={cache:O1()},a.payload=c;return}c=c.return}}function yM(a,c,u){var f=Rs();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},fw(a)?WT(c,u):(u=E1(a,c,u,f),u!==null&&(Ds(u,a,f),YT(u,c,f)))}function KT(a,c,u){var f=Rs();bg(a,c,u,f)}function bg(a,c,u,f){var m={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(fw(a))WT(c,m);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var C=c.lastRenderedState,U=w(C,u);if(m.hasEagerState=!0,m.eagerState=U,xs(U,C))return Qy(a,c,m,0),cn===null&&Yy(),!1}catch{}finally{}if(u=E1(a,c,m,f),u!==null)return Ds(u,a,f),YT(u,c,f),!0}return!1}function tA(a,c,u,f){if(f={lane:2,revertLane:PA(),action:f,hasEagerState:!1,eagerState:null,next:null},fw(a)){if(c)throw Error(r(479))}else c=E1(a,u,f,2),c!==null&&Ds(c,a,2)}function fw(a){var c=a.alternate;return a===ft||c!==null&&c===ft}function WT(a,c){sd=ow=!0;var u=a.pending;u===null?c.next=c:(c.next=u.next,u.next=c),a.pending=c}function YT(a,c,u){if((u&4194048)!==0){var f=c.lanes;f&=a.pendingLanes,u|=f,c.lanes=u,rN(a,u)}}var pw={readContext:Cr,use:lw,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn},QT={readContext:Cr,use:lw,useCallback:function(a,c){return ts().memoizedState=[a,c===void 0?null:c],a},useContext:Cr,useEffect:PT,useImperativeHandle:function(a,c,u){u=u!=null?u.concat([a]):null,dw(4194308,4,LT.bind(null,c,a),u)},useLayoutEffect:function(a,c){return dw(4194308,4,a,c)},useInsertionEffect:function(a,c){dw(4,2,a,c)},useMemo:function(a,c){var u=ts();c=c===void 0?null:c;var f=a();if(Vl){sa(!0);try{a()}finally{sa(!1)}}return u.memoizedState=[f,c],f},useReducer:function(a,c,u){var f=ts();if(u!==void 0){var m=u(c);if(Vl){sa(!0);try{u(c)}finally{sa(!1)}}}else m=c;return f.memoizedState=f.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},f.queue=a,a=a.dispatch=yM.bind(null,ft,a),[f.memoizedState,a]},useRef:function(a){var c=ts();return a={current:a},c.memoizedState=a},useState:function(a){a=Y1(a);var c=a.queue,u=KT.bind(null,ft,c);return c.dispatch=u,[a.memoizedState,u]},useDebugValue:Z1,useDeferredValue:function(a,c){var u=ts();return X1(u,a,c)},useTransition:function(){var a=Y1(!1);return a=HT.bind(null,ft,a.queue,!0,!1),ts().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,u){var f=ft,m=ts();if(Mt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=c(),cn===null)throw Error(r(349));(_t&124)!==0||yT(f,c,u)}m.memoizedState=u;var w={value:u,getSnapshot:c};return m.queue=w,PT(bT.bind(null,f,w,a),[a]),f.flags|=2048,ad(9,hw(),wT.bind(null,f,w,u,c),null),u},useId:function(){var a=ts(),c=cn.identifierPrefix;if(Mt){var u=Za,f=Qa;u=(f&~(1<<32-Lr(f)-1)).toString(32)+u,c="«"+c+"R"+u,u=cw++,0<u&&(c+="H"+u.toString(32)),c+="»"}else u=hM++,c="«"+c+"r"+u.toString(32)+"»";return a.memoizedState=c},useHostTransitionStatus:eA,useFormState:TT,useActionState:TT,useOptimistic:function(a){var c=ts();c.memoizedState=c.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=u,c=tA.bind(null,ft,!0,u),u.dispatch=c,[a,c]},useMemoCache:V1,useCacheRefresh:function(){return ts().memoizedState=mM.bind(null,ft)}},ZT={readContext:Cr,use:lw,useCallback:$T,useContext:Cr,useEffect:UT,useImperativeHandle:MT,useInsertionEffect:kT,useLayoutEffect:BT,useMemo:FT,useReducer:uw,useRef:DT,useState:function(){return uw(eo)},useDebugValue:Z1,useDeferredValue:function(a,c){var u=Pn();return zT(u,Zt.memoizedState,a,c)},useTransition:function(){var a=uw(eo)[0],c=Pn().memoizedState;return[typeof a=="boolean"?a:yg(a),c]},useSyncExternalStore:mT,useId:GT,useHostTransitionStatus:eA,useFormState:IT,useActionState:IT,useOptimistic:function(a,c){var u=Pn();return AT(u,Zt,a,c)},useMemoCache:V1,useCacheRefresh:VT},wM={readContext:Cr,use:lw,useCallback:$T,useContext:Cr,useEffect:UT,useImperativeHandle:MT,useInsertionEffect:kT,useLayoutEffect:BT,useMemo:FT,useReducer:W1,useRef:DT,useState:function(){return W1(eo)},useDebugValue:Z1,useDeferredValue:function(a,c){var u=Pn();return Zt===null?X1(u,a,c):zT(u,Zt.memoizedState,a,c)},useTransition:function(){var a=W1(eo)[0],c=Pn().memoizedState;return[typeof a=="boolean"?a:yg(a),c]},useSyncExternalStore:mT,useId:GT,useHostTransitionStatus:eA,useFormState:RT,useActionState:RT,useOptimistic:function(a,c){var u=Pn();return Zt!==null?AT(u,Zt,a,c):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:V1,useCacheRefresh:VT},od=null,Eg=0;function gw(a){var c=Eg;return Eg+=1,od===null&&(od=[]),cT(od,a,c)}function vg(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function mw(a,c){throw c.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function XT(a){var c=a._init;return c(a._payload)}function JT(a){function c(X,Y){if(a){var te=X.deletions;te===null?(X.deletions=[Y],X.flags|=16):te.push(Y)}}function u(X,Y){if(!a)return null;for(;Y!==null;)c(X,Y),Y=Y.sibling;return null}function f(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function m(X,Y){return X=Ya(X,Y),X.index=0,X.sibling=null,X}function w(X,Y,te){return X.index=te,a?(te=X.alternate,te!==null?(te=te.index,te<Y?(X.flags|=67108866,Y):te):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function C(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function U(X,Y,te,pe){return Y===null||Y.tag!==6?(Y=A1(te,X.mode,pe),Y.return=X,Y):(Y=m(Y,te),Y.return=X,Y)}function G(X,Y,te,pe){var je=te.type;return je===E?de(X,Y,te.props.children,pe,te.key):Y!==null&&(Y.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===$&&XT(je)===Y.type)?(Y=m(Y,te.props),vg(Y,te),Y.return=X,Y):(Y=Xy(te.type,te.key,te.props,null,X.mode,pe),vg(Y,te),Y.return=X,Y)}function se(X,Y,te,pe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==te.containerInfo||Y.stateNode.implementation!==te.implementation?(Y=C1(te,X.mode,pe),Y.return=X,Y):(Y=m(Y,te.children||[]),Y.return=X,Y)}function de(X,Y,te,pe,je){return Y===null||Y.tag!==7?(Y=Ml(te,X.mode,pe,je),Y.return=X,Y):(Y=m(Y,te),Y.return=X,Y)}function ge(X,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=A1(""+Y,X.mode,te),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return te=Xy(Y.type,Y.key,Y.props,null,X.mode,te),vg(te,Y),te.return=X,te;case b:return Y=C1(Y,X.mode,te),Y.return=X,Y;case $:var pe=Y._init;return Y=pe(Y._payload),ge(X,Y,te)}if(I(Y)||W(Y))return Y=Ml(Y,X.mode,te,null),Y.return=X,Y;if(typeof Y.then=="function")return ge(X,gw(Y),te);if(Y.$$typeof===N)return ge(X,nw(X,Y),te);mw(X,Y)}return null}function ae(X,Y,te,pe){var je=Y!==null?Y.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return je!==null?null:U(X,Y,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return te.key===je?G(X,Y,te,pe):null;case b:return te.key===je?se(X,Y,te,pe):null;case $:return je=te._init,te=je(te._payload),ae(X,Y,te,pe)}if(I(te)||W(te))return je!==null?null:de(X,Y,te,pe,null);if(typeof te.then=="function")return ae(X,Y,gw(te),pe);if(te.$$typeof===N)return ae(X,Y,nw(X,te),pe);mw(X,te)}return null}function oe(X,Y,te,pe,je){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return X=X.get(te)||null,U(Y,X,""+pe,je);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return X=X.get(pe.key===null?te:pe.key)||null,G(Y,X,pe,je);case b:return X=X.get(pe.key===null?te:pe.key)||null,se(Y,X,pe,je);case $:var gt=pe._init;return pe=gt(pe._payload),oe(X,Y,te,pe,je)}if(I(pe)||W(pe))return X=X.get(te)||null,de(Y,X,pe,je,null);if(typeof pe.then=="function")return oe(X,Y,te,gw(pe),je);if(pe.$$typeof===N)return oe(X,Y,te,nw(Y,pe),je);mw(Y,pe)}return null}function rt(X,Y,te,pe){for(var je=null,gt=null,Ge=Y,Je=Y=0,Yn=null;Ge!==null&&Je<te.length;Je++){Ge.index>Je?(Yn=Ge,Ge=null):Yn=Ge.sibling;var Nt=ae(X,Ge,te[Je],pe);if(Nt===null){Ge===null&&(Ge=Yn);break}a&&Ge&&Nt.alternate===null&&c(X,Ge),Y=w(Nt,Y,Je),gt===null?je=Nt:gt.sibling=Nt,gt=Nt,Ge=Yn}if(Je===te.length)return u(X,Ge),Mt&&Fl(X,Je),je;if(Ge===null){for(;Je<te.length;Je++)Ge=ge(X,te[Je],pe),Ge!==null&&(Y=w(Ge,Y,Je),gt===null?je=Ge:gt.sibling=Ge,gt=Ge);return Mt&&Fl(X,Je),je}for(Ge=f(Ge);Je<te.length;Je++)Yn=oe(Ge,X,Je,te[Je],pe),Yn!==null&&(a&&Yn.alternate!==null&&Ge.delete(Yn.key===null?Je:Yn.key),Y=w(Yn,Y,Je),gt===null?je=Yn:gt.sibling=Yn,gt=Yn);return a&&Ge.forEach(function(Ac){return c(X,Ac)}),Mt&&Fl(X,Je),je}function Ze(X,Y,te,pe){if(te==null)throw Error(r(151));for(var je=null,gt=null,Ge=Y,Je=Y=0,Yn=null,Nt=te.next();Ge!==null&&!Nt.done;Je++,Nt=te.next()){Ge.index>Je?(Yn=Ge,Ge=null):Yn=Ge.sibling;var Ac=ae(X,Ge,Nt.value,pe);if(Ac===null){Ge===null&&(Ge=Yn);break}a&&Ge&&Ac.alternate===null&&c(X,Ge),Y=w(Ac,Y,Je),gt===null?je=Ac:gt.sibling=Ac,gt=Ac,Ge=Yn}if(Nt.done)return u(X,Ge),Mt&&Fl(X,Je),je;if(Ge===null){for(;!Nt.done;Je++,Nt=te.next())Nt=ge(X,Nt.value,pe),Nt!==null&&(Y=w(Nt,Y,Je),gt===null?je=Nt:gt.sibling=Nt,gt=Nt);return Mt&&Fl(X,Je),je}for(Ge=f(Ge);!Nt.done;Je++,Nt=te.next())Nt=oe(Ge,X,Je,Nt.value,pe),Nt!==null&&(a&&Nt.alternate!==null&&Ge.delete(Nt.key===null?Je:Nt.key),Y=w(Nt,Y,Je),gt===null?je=Nt:gt.sibling=Nt,gt=Nt);return a&&Ge.forEach(function(b9){return c(X,b9)}),Mt&&Fl(X,Je),je}function Jt(X,Y,te,pe){if(typeof te=="object"&&te!==null&&te.type===E&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case y:e:{for(var je=te.key;Y!==null;){if(Y.key===je){if(je=te.type,je===E){if(Y.tag===7){u(X,Y.sibling),pe=m(Y,te.props.children),pe.return=X,X=pe;break e}}else if(Y.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===$&&XT(je)===Y.type){u(X,Y.sibling),pe=m(Y,te.props),vg(pe,te),pe.return=X,X=pe;break e}u(X,Y);break}else c(X,Y);Y=Y.sibling}te.type===E?(pe=Ml(te.props.children,X.mode,pe,te.key),pe.return=X,X=pe):(pe=Xy(te.type,te.key,te.props,null,X.mode,pe),vg(pe,te),pe.return=X,X=pe)}return C(X);case b:e:{for(je=te.key;Y!==null;){if(Y.key===je)if(Y.tag===4&&Y.stateNode.containerInfo===te.containerInfo&&Y.stateNode.implementation===te.implementation){u(X,Y.sibling),pe=m(Y,te.children||[]),pe.return=X,X=pe;break e}else{u(X,Y);break}else c(X,Y);Y=Y.sibling}pe=C1(te,X.mode,pe),pe.return=X,X=pe}return C(X);case $:return je=te._init,te=je(te._payload),Jt(X,Y,te,pe)}if(I(te))return rt(X,Y,te,pe);if(W(te)){if(je=W(te),typeof je!="function")throw Error(r(150));return te=je.call(te),Ze(X,Y,te,pe)}if(typeof te.then=="function")return Jt(X,Y,gw(te),pe);if(te.$$typeof===N)return Jt(X,Y,nw(X,te),pe);mw(X,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Y!==null&&Y.tag===6?(u(X,Y.sibling),pe=m(Y,te),pe.return=X,X=pe):(u(X,Y),pe=A1(te,X.mode,pe),pe.return=X,X=pe),C(X)):u(X,Y)}return function(X,Y,te,pe){try{Eg=0;var je=Jt(X,Y,te,pe);return od=null,je}catch(Ge){if(Ge===hg||Ge===sw)throw Ge;var gt=Ns(29,Ge,null,X.mode);return gt.lanes=pe,gt.return=X,gt}finally{}}}var cd=JT(!0),eI=JT(!1),ri=V(null),aa=null;function oc(a){var c=a.alternate;re(Mn,Mn.current&1),re(ri,a),aa===null&&(c===null||rd.current!==null||c.memoizedState!==null)&&(aa=a)}function tI(a){if(a.tag===22){if(re(Mn,Mn.current),re(ri,a),aa===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(aa=a)}}else cc()}function cc(){re(Mn,Mn.current),re(ri,ri.current)}function to(a){Z(ri),aa===a&&(aa=null),Z(Mn)}var Mn=V(0);function yw(a){for(var c=a;c!==null;){if(c.tag===13){var u=c.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||GA(u)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function nA(a,c,u,f){c=a.memoizedState,u=u(f,c),u=u==null?c:p({},c,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var rA={enqueueSetState:function(a,c,u){a=a._reactInternals;var f=Rs(),m=sc(f);m.payload=c,u!=null&&(m.callback=u),c=ic(a,m,f),c!==null&&(Ds(c,a,f),fg(c,a,f))},enqueueReplaceState:function(a,c,u){a=a._reactInternals;var f=Rs(),m=sc(f);m.tag=1,m.payload=c,u!=null&&(m.callback=u),c=ic(a,m,f),c!==null&&(Ds(c,a,f),fg(c,a,f))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var u=Rs(),f=sc(u);f.tag=2,c!=null&&(f.callback=c),c=ic(a,f,u),c!==null&&(Ds(c,a,u),fg(c,a,u))}};function nI(a,c,u,f,m,w,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,w,C):c.prototype&&c.prototype.isPureReactComponent?!rg(u,f)||!rg(m,w):!0}function rI(a,c,u,f){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(u,f),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(u,f),c.state!==a&&rA.enqueueReplaceState(c,c.state,null)}function Kl(a,c){var u=c;if("ref"in c){u={};for(var f in c)f!=="ref"&&(u[f]=c[f])}if(a=a.defaultProps){u===c&&(u=p({},u));for(var m in a)u[m]===void 0&&(u[m]=a[m])}return u}var ww=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function sI(a){ww(a)}function iI(a){console.error(a)}function aI(a){ww(a)}function bw(a,c){try{var u=a.onUncaughtError;u(c.value,{componentStack:c.stack})}catch(f){setTimeout(function(){throw f})}}function oI(a,c,u){try{var f=a.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function sA(a,c,u){return u=sc(u),u.tag=3,u.payload={element:null},u.callback=function(){bw(a,c)},u}function cI(a){return a=sc(a),a.tag=3,a}function lI(a,c,u,f){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var w=f.value;a.payload=function(){return m(w)},a.callback=function(){oI(c,u,f)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){oI(c,u,f),typeof m!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var U=f.stack;this.componentDidCatch(f.value,{componentStack:U!==null?U:""})})}function bM(a,c,u,f,m){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(c=u.alternate,c!==null&&cg(c,u,m,!0),u=ri.current,u!==null){switch(u.tag){case 13:return aa===null?TA():u.alternate===null&&Cn===0&&(Cn=3),u.flags&=-257,u.flags|=65536,u.lanes=m,f===P1?u.flags|=16384:(c=u.updateQueue,c===null?u.updateQueue=new Set([f]):c.add(f),OA(a,f,m)),!1;case 22:return u.flags|=65536,f===P1?u.flags|=16384:(c=u.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=c):(u=c.retryQueue,u===null?c.retryQueue=new Set([f]):u.add(f)),OA(a,f,m)),!1}throw Error(r(435,u.tag))}return OA(a,f,m),TA(),!1}if(Mt)return c=ri.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=m,f!==x1&&(a=Error(r(422),{cause:f}),og(Js(a,u)))):(f!==x1&&(c=Error(r(423),{cause:f}),og(Js(c,u))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,f=Js(f,u),m=sA(a.stateNode,f,m),B1(a,m),Cn!==4&&(Cn=2)),!1;var w=Error(r(520),{cause:f});if(w=Js(w,u),Tg===null?Tg=[w]:Tg.push(w),Cn!==4&&(Cn=2),c===null)return!0;f=Js(f,u),u=c;do{switch(u.tag){case 3:return u.flags|=65536,a=m&-m,u.lanes|=a,a=sA(u.stateNode,f,a),B1(u,a),!1;case 1:if(c=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(pc===null||!pc.has(w))))return u.flags|=65536,m&=-m,u.lanes|=m,m=cI(m),lI(m,a,u,f),B1(u,m),!1}u=u.return}while(u!==null);return!1}var uI=Error(r(461)),Kn=!1;function or(a,c,u,f){c.child=a===null?eI(c,null,u,f):cd(c,a.child,u,f)}function hI(a,c,u,f,m){u=u.render;var w=c.ref;if("ref"in f){var C={};for(var U in f)U!=="ref"&&(C[U]=f[U])}else C=f;return ql(c),f=z1(a,c,u,C,w,m),U=H1(),a!==null&&!Kn?(j1(a,c,m),no(a,c,m)):(Mt&&U&&_1(c),c.flags|=1,or(a,c,f,m),c.child)}function dI(a,c,u,f,m){if(a===null){var w=u.type;return typeof w=="function"&&!v1(w)&&w.defaultProps===void 0&&u.compare===null?(c.tag=15,c.type=w,fI(a,c,w,f,m)):(a=Xy(u.type,null,f,c,c.mode,m),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,!dA(a,m)){var C=w.memoizedProps;if(u=u.compare,u=u!==null?u:rg,u(C,f)&&a.ref===c.ref)return no(a,c,m)}return c.flags|=1,a=Ya(w,f),a.ref=c.ref,a.return=c,c.child=a}function fI(a,c,u,f,m){if(a!==null){var w=a.memoizedProps;if(rg(w,f)&&a.ref===c.ref)if(Kn=!1,c.pendingProps=f=w,dA(a,m))(a.flags&131072)!==0&&(Kn=!0);else return c.lanes=a.lanes,no(a,c,m)}return iA(a,c,u,f,m)}function pI(a,c,u){var f=c.pendingProps,m=f.children,w=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((c.flags&128)!==0){if(f=w!==null?w.baseLanes|u:u,a!==null){for(m=c.child=a.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;c.childLanes=w&~f}else c.childLanes=0,c.child=null;return gI(a,c,f,u)}if((u&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&rw(c,w!==null?w.cachePool:null),w!==null?fT(c,w):M1(),tI(c);else return c.lanes=c.childLanes=536870912,gI(a,c,w!==null?w.baseLanes|u:u,u)}else w!==null?(rw(c,w.cachePool),fT(c,w),cc(),c.memoizedState=null):(a!==null&&rw(c,null),M1(),cc());return or(a,c,m,u),c.child}function gI(a,c,u,f){var m=D1();return m=m===null?null:{parent:Ln._currentValue,pool:m},c.memoizedState={baseLanes:u,cachePool:m},a!==null&&rw(c,null),M1(),tI(c),a!==null&&cg(a,c,f,!0),null}function Ew(a,c){var u=c.ref;if(u===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(c.flags|=4194816)}}function iA(a,c,u,f,m){return ql(c),u=z1(a,c,u,f,void 0,m),f=H1(),a!==null&&!Kn?(j1(a,c,m),no(a,c,m)):(Mt&&f&&_1(c),c.flags|=1,or(a,c,u,m),c.child)}function mI(a,c,u,f,m,w){return ql(c),c.updateQueue=null,u=gT(c,f,u,m),pT(a),f=H1(),a!==null&&!Kn?(j1(a,c,w),no(a,c,w)):(Mt&&f&&_1(c),c.flags|=1,or(a,c,u,w),c.child)}function yI(a,c,u,f,m){if(ql(c),c.stateNode===null){var w=Xh,C=u.contextType;typeof C=="object"&&C!==null&&(w=Cr(C)),w=new u(f,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=rA,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=f,w.state=c.memoizedState,w.refs={},U1(c),C=u.contextType,w.context=typeof C=="object"&&C!==null?Cr(C):Xh,w.state=c.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(nA(c,u,C,f),w.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&rA.enqueueReplaceState(w,w.state,null),gg(c,f,w,m),pg(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),f=!0}else if(a===null){w=c.stateNode;var U=c.memoizedProps,G=Kl(u,U);w.props=G;var se=w.context,de=u.contextType;C=Xh,typeof de=="object"&&de!==null&&(C=Cr(de));var ge=u.getDerivedStateFromProps;de=typeof ge=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=c.pendingProps!==U,de||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||se!==C)&&rI(c,w,f,C),rc=!1;var ae=c.memoizedState;w.state=ae,gg(c,f,w,m),pg(),se=c.memoizedState,U||ae!==se||rc?(typeof ge=="function"&&(nA(c,u,ge,f),se=c.memoizedState),(G=rc||nI(c,u,G,f,ae,se,C))?(de||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=f,c.memoizedState=se),w.props=f,w.state=se,w.context=C,f=G):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),f=!1)}else{w=c.stateNode,k1(a,c),C=c.memoizedProps,de=Kl(u,C),w.props=de,ge=c.pendingProps,ae=w.context,se=u.contextType,G=Xh,typeof se=="object"&&se!==null&&(G=Cr(se)),U=u.getDerivedStateFromProps,(se=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ge||ae!==G)&&rI(c,w,f,G),rc=!1,ae=c.memoizedState,w.state=ae,gg(c,f,w,m),pg();var oe=c.memoizedState;C!==ge||ae!==oe||rc||a!==null&&a.dependencies!==null&&tw(a.dependencies)?(typeof U=="function"&&(nA(c,u,U,f),oe=c.memoizedState),(de=rc||nI(c,u,de,f,ae,oe,G)||a!==null&&a.dependencies!==null&&tw(a.dependencies))?(se||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,oe,G),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,oe,G)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=1024),c.memoizedProps=f,c.memoizedState=oe),w.props=f,w.state=oe,w.context=G,f=de):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(c.flags|=1024),f=!1)}return w=f,Ew(a,c),f=(c.flags&128)!==0,w||f?(w=c.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,a!==null&&f?(c.child=cd(c,a.child,null,m),c.child=cd(c,null,u,m)):or(a,c,u,m),c.memoizedState=w.state,a=c.child):a=no(a,c,m),a}function wI(a,c,u,f){return ag(),c.flags|=256,or(a,c,u,f),c.child}var aA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oA(a){return{baseLanes:a,cachePool:iT()}}function cA(a,c,u){return a=a!==null?a.childLanes&~u:0,c&&(a|=si),a}function bI(a,c,u){var f=c.pendingProps,m=!1,w=(c.flags&128)!==0,C;if((C=w)||(C=a!==null&&a.memoizedState===null?!1:(Mn.current&2)!==0),C&&(m=!0,c.flags&=-129),C=(c.flags&32)!==0,c.flags&=-33,a===null){if(Mt){if(m?oc(c):cc(),Mt){var U=An,G;if(G=U){e:{for(G=U,U=ia;G.nodeType!==8;){if(!U){U=null;break e}if(G=Ii(G.nextSibling),G===null){U=null;break e}}U=G}U!==null?(c.memoizedState={dehydrated:U,treeContext:$l!==null?{id:Qa,overflow:Za}:null,retryLane:536870912,hydrationErrors:null},G=Ns(18,null,null,0),G.stateNode=U,G.return=c,c.child=G,Mr=c,An=null,G=!0):G=!1}G||Hl(c)}if(U=c.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return GA(U)?c.lanes=32:c.lanes=536870912,null;to(c)}return U=f.children,f=f.fallback,m?(cc(),m=c.mode,U=vw({mode:"hidden",children:U},m),f=Ml(f,m,u,null),U.return=c,f.return=c,U.sibling=f,c.child=U,m=c.child,m.memoizedState=oA(u),m.childLanes=cA(a,C,u),c.memoizedState=aA,f):(oc(c),lA(c,U))}if(G=a.memoizedState,G!==null&&(U=G.dehydrated,U!==null)){if(w)c.flags&256?(oc(c),c.flags&=-257,c=uA(a,c,u)):c.memoizedState!==null?(cc(),c.child=a.child,c.flags|=128,c=null):(cc(),m=f.fallback,U=c.mode,f=vw({mode:"visible",children:f.children},U),m=Ml(m,U,u,null),m.flags|=2,f.return=c,m.return=c,f.sibling=m,c.child=f,cd(c,a.child,null,u),f=c.child,f.memoizedState=oA(u),f.childLanes=cA(a,C,u),c.memoizedState=aA,c=m);else if(oc(c),GA(U)){if(C=U.nextSibling&&U.nextSibling.dataset,C)var se=C.dgst;C=se,f=Error(r(419)),f.stack="",f.digest=C,og({value:f,source:null,stack:null}),c=uA(a,c,u)}else if(Kn||cg(a,c,u,!1),C=(u&a.childLanes)!==0,Kn||C){if(C=cn,C!==null&&(f=u&-u,f=(f&42)!==0?1:Vv(f),f=(f&(C.suspendedLanes|u))!==0?0:f,f!==0&&f!==G.retryLane))throw G.retryLane=f,Zh(a,f),Ds(C,a,f),uI;U.data==="$?"||TA(),c=uA(a,c,u)}else U.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=G.treeContext,An=Ii(U.nextSibling),Mr=c,Mt=!0,zl=null,ia=!1,a!==null&&(ti[ni++]=Qa,ti[ni++]=Za,ti[ni++]=$l,Qa=a.id,Za=a.overflow,$l=c),c=lA(c,f.children),c.flags|=4096);return c}return m?(cc(),m=f.fallback,U=c.mode,G=a.child,se=G.sibling,f=Ya(G,{mode:"hidden",children:f.children}),f.subtreeFlags=G.subtreeFlags&65011712,se!==null?m=Ya(se,m):(m=Ml(m,U,u,null),m.flags|=2),m.return=c,f.return=c,f.sibling=m,c.child=f,f=m,m=c.child,U=a.child.memoizedState,U===null?U=oA(u):(G=U.cachePool,G!==null?(se=Ln._currentValue,G=G.parent!==se?{parent:se,pool:se}:G):G=iT(),U={baseLanes:U.baseLanes|u,cachePool:G}),m.memoizedState=U,m.childLanes=cA(a,C,u),c.memoizedState=aA,f):(oc(c),u=a.child,a=u.sibling,u=Ya(u,{mode:"visible",children:f.children}),u.return=c,u.sibling=null,a!==null&&(C=c.deletions,C===null?(c.deletions=[a],c.flags|=16):C.push(a)),c.child=u,c.memoizedState=null,u)}function lA(a,c){return c=vw({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function vw(a,c){return a=Ns(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function uA(a,c,u){return cd(c,a.child,null,u),a=lA(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function EI(a,c,u){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c),T1(a.return,c,u)}function hA(a,c,u,f,m){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=m)}function vI(a,c,u){var f=c.pendingProps,m=f.revealOrder,w=f.tail;if(or(a,c,f.children,u),f=Mn.current,(f&2)!==0)f=f&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&EI(a,u,c);else if(a.tag===19)EI(a,u,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(re(Mn,f),m){case"forwards":for(u=c.child,m=null;u!==null;)a=u.alternate,a!==null&&yw(a)===null&&(m=u),u=u.sibling;u=m,u===null?(m=c.child,c.child=null):(m=u.sibling,u.sibling=null),hA(c,!1,m,u,w);break;case"backwards":for(u=null,m=c.child,c.child=null;m!==null;){if(a=m.alternate,a!==null&&yw(a)===null){c.child=m;break}a=m.sibling,m.sibling=u,u=m,m=a}hA(c,!0,u,null,w);break;case"together":hA(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function no(a,c,u){if(a!==null&&(c.dependencies=a.dependencies),fc|=c.lanes,(u&c.childLanes)===0)if(a!==null){if(cg(a,c,u,!1),(u&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,u=Ya(a,a.pendingProps),c.child=u,u.return=c;a.sibling!==null;)a=a.sibling,u=u.sibling=Ya(a,a.pendingProps),u.return=c;u.sibling=null}return c.child}function dA(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&tw(a)))}function EM(a,c,u){switch(c.tag){case 3:Pe(c,c.stateNode.containerInfo),nc(c,Ln,a.memoizedState.cache),ag();break;case 27:case 5:Qe(c);break;case 4:Pe(c,c.stateNode.containerInfo);break;case 10:nc(c,c.type,c.memoizedProps.value);break;case 13:var f=c.memoizedState;if(f!==null)return f.dehydrated!==null?(oc(c),c.flags|=128,null):(u&c.child.childLanes)!==0?bI(a,c,u):(oc(c),a=no(a,c,u),a!==null?a.sibling:null);oc(c);break;case 19:var m=(a.flags&128)!==0;if(f=(u&c.childLanes)!==0,f||(cg(a,c,u,!1),f=(u&c.childLanes)!==0),m){if(f)return vI(a,c,u);c.flags|=128}if(m=c.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),re(Mn,Mn.current),f)break;return null;case 22:case 23:return c.lanes=0,pI(a,c,u);case 24:nc(c,Ln,a.memoizedState.cache)}return no(a,c,u)}function AI(a,c,u){if(a!==null)if(a.memoizedProps!==c.pendingProps)Kn=!0;else{if(!dA(a,u)&&(c.flags&128)===0)return Kn=!1,EM(a,c,u);Kn=(a.flags&131072)!==0}else Kn=!1,Mt&&(c.flags&1048576)!==0&&XN(c,ew,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var f=c.elementType,m=f._init;if(f=m(f._payload),c.type=f,typeof f=="function")v1(f)?(a=Kl(f,a),c.tag=1,c=yI(null,c,f,a,u)):(c.tag=0,c=iA(null,c,f,a,u));else{if(f!=null){if(m=f.$$typeof,m===k){c.tag=11,c=hI(null,c,f,a,u);break e}else if(m===F){c.tag=14,c=dI(null,c,f,a,u);break e}}throw c=J(f)||f,Error(r(306,c,""))}}return c;case 0:return iA(a,c,c.type,c.pendingProps,u);case 1:return f=c.type,m=Kl(f,c.pendingProps),yI(a,c,f,m,u);case 3:e:{if(Pe(c,c.stateNode.containerInfo),a===null)throw Error(r(387));f=c.pendingProps;var w=c.memoizedState;m=w.element,k1(a,c),gg(c,f,null,u);var C=c.memoizedState;if(f=C.cache,nc(c,Ln,f),f!==w.cache&&I1(c,[Ln],u,!0),pg(),f=C.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:C.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=wI(a,c,f,u);break e}else if(f!==m){m=Js(Error(r(424)),c),og(m),c=wI(a,c,f,u);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(An=Ii(a.firstChild),Mr=c,Mt=!0,zl=null,ia=!0,u=eI(c,null,f,u),c.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ag(),f===m){c=no(a,c,u);break e}or(a,c,f,u)}c=c.child}return c;case 26:return Ew(a,c),a===null?(u=x3(c.type,null,c.pendingProps,null))?c.memoizedState=u:Mt||(u=c.type,a=c.pendingProps,f=kw(me.current).createElement(u),f[Ar]=c,f[Jr]=a,lr(f,u,a),Vn(f),c.stateNode=f):c.memoizedState=x3(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Qe(c),a===null&&Mt&&(f=c.stateNode=C3(c.type,c.pendingProps,me.current),Mr=c,ia=!0,m=An,yc(c.type)?(VA=m,An=Ii(f.firstChild)):An=m),or(a,c,c.pendingProps.children,u),Ew(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&Mt&&((m=f=An)&&(f=WM(f,c.type,c.pendingProps,ia),f!==null?(c.stateNode=f,Mr=c,An=Ii(f.firstChild),ia=!1,m=!0):m=!1),m||Hl(c)),Qe(c),m=c.type,w=c.pendingProps,C=a!==null?a.memoizedProps:null,f=w.children,HA(m,w)?f=null:C!==null&&HA(m,C)&&(c.flags|=32),c.memoizedState!==null&&(m=z1(a,c,dM,null,null,u),Lg._currentValue=m),Ew(a,c),or(a,c,f,u),c.child;case 6:return a===null&&Mt&&((a=u=An)&&(u=YM(u,c.pendingProps,ia),u!==null?(c.stateNode=u,Mr=c,An=null,a=!0):a=!1),a||Hl(c)),null;case 13:return bI(a,c,u);case 4:return Pe(c,c.stateNode.containerInfo),f=c.pendingProps,a===null?c.child=cd(c,null,f,u):or(a,c,f,u),c.child;case 11:return hI(a,c,c.type,c.pendingProps,u);case 7:return or(a,c,c.pendingProps,u),c.child;case 8:return or(a,c,c.pendingProps.children,u),c.child;case 12:return or(a,c,c.pendingProps.children,u),c.child;case 10:return f=c.pendingProps,nc(c,c.type,f.value),or(a,c,f.children,u),c.child;case 9:return m=c.type._context,f=c.pendingProps.children,ql(c),m=Cr(m),f=f(m),c.flags|=1,or(a,c,f,u),c.child;case 14:return dI(a,c,c.type,c.pendingProps,u);case 15:return fI(a,c,c.type,c.pendingProps,u);case 19:return vI(a,c,u);case 31:return f=c.pendingProps,u=c.mode,f={mode:f.mode,children:f.children},a===null?(u=vw(f,u),u.ref=c.ref,c.child=u,u.return=c,c=u):(u=Ya(a.child,f),u.ref=c.ref,c.child=u,u.return=c,c=u),c;case 22:return pI(a,c,u);case 24:return ql(c),f=Cr(Ln),a===null?(m=D1(),m===null&&(m=cn,w=O1(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=u),m=w),c.memoizedState={parent:f,cache:m},U1(c),nc(c,Ln,m)):((a.lanes&u)!==0&&(k1(a,c),gg(c,null,null,u),pg()),m=a.memoizedState,w=c.memoizedState,m.parent!==f?(m={parent:f,cache:f},c.memoizedState=m,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=m),nc(c,Ln,f)):(f=w.cache,nc(c,Ln,f),f!==m.cache&&I1(c,[Ln],u,!0))),or(a,c,c.pendingProps.children,u),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ro(a){a.flags|=4}function CI(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!R3(c)){if(c=ri.current,c!==null&&((_t&4194048)===_t?aa!==null:(_t&62914560)!==_t&&(_t&536870912)===0||c!==aa))throw dg=P1,aT;a.flags|=8192}}function Aw(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?tN():536870912,a.lanes|=c,dd|=c)}function Ag(a,c){if(!Mt)switch(a.tailMode){case"hidden":c=a.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function bn(a){var c=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(c)for(var m=a.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&65011712,f|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=f,a.childLanes=u,c}function vM(a,c,u){var f=c.pendingProps;switch(S1(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(c),null;case 1:return bn(c),null;case 3:return u=c.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ja(Ln),Ne(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(ig(c)?ro(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,tT())),bn(c),null;case 26:return u=c.memoizedState,a===null?(ro(c),u!==null?(bn(c),CI(c,u)):(bn(c),c.flags&=-16777217)):u?u!==a.memoizedState?(ro(c),bn(c),CI(c,u)):(bn(c),c.flags&=-16777217):(a.memoizedProps!==f&&ro(c),bn(c),c.flags&=-16777217),null;case 27:Qt(c),u=me.current;var m=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==f&&ro(c);else{if(!f){if(c.stateNode===null)throw Error(r(166));return bn(c),null}a=ee.current,ig(c)?JN(c):(a=C3(m,f,u),c.stateNode=a,ro(c))}return bn(c),null;case 5:if(Qt(c),u=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==f&&ro(c);else{if(!f){if(c.stateNode===null)throw Error(r(166));return bn(c),null}if(a=ee.current,ig(c))JN(c);else{switch(m=kw(me.current),a){case 1:a=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=m.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?m.createElement("select",{is:f.is}):m.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?m.createElement(u,{is:f.is}):m.createElement(u)}}a[Ar]=c,a[Jr]=f;e:for(m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break e;for(;m.sibling===null;){if(m.return===null||m.return===c)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}c.stateNode=a;e:switch(lr(a,u,f),u){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ro(c)}}return bn(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==f&&ro(c);else{if(typeof f!="string"&&c.stateNode===null)throw Error(r(166));if(a=me.current,ig(c)){if(a=c.stateNode,u=c.memoizedProps,f=null,m=Mr,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}a[Ar]=c,a=!!(a.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||m3(a.nodeValue,u)),a||Hl(c)}else a=kw(a).createTextNode(f),a[Ar]=c,c.stateNode=a}return bn(c),null;case 13:if(f=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=ig(c),f!==null&&f.dehydrated!==null){if(a===null){if(!m)throw Error(r(318));if(m=c.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Ar]=c}else ag(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),m=!1}else m=tT(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return c.flags&256?(to(c),c):(to(c),null)}if(to(c),(c.flags&128)!==0)return c.lanes=u,c;if(u=f!==null,a=a!==null&&a.memoizedState!==null,u){f=c.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool);var w=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==m&&(f.flags|=2048)}return u!==a&&u&&(c.child.flags|=8192),Aw(c,c.updateQueue),bn(c),null;case 4:return Ne(),a===null&&LA(c.stateNode.containerInfo),bn(c),null;case 10:return Ja(c.type),bn(c),null;case 19:if(Z(Mn),m=c.memoizedState,m===null)return bn(c),null;if(f=(c.flags&128)!==0,w=m.rendering,w===null)if(f)Ag(m,!1);else{if(Cn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(w=yw(a),w!==null){for(c.flags|=128,Ag(m,!1),a=w.updateQueue,c.updateQueue=a,Aw(c,a),c.subtreeFlags=0,a=u,u=c.child;u!==null;)ZN(u,a),u=u.sibling;return re(Mn,Mn.current&1|2),c.child}a=a.sibling}m.tail!==null&&Qs()>Sw&&(c.flags|=128,f=!0,Ag(m,!1),c.lanes=4194304)}else{if(!f)if(a=yw(w),a!==null){if(c.flags|=128,f=!0,a=a.updateQueue,c.updateQueue=a,Aw(c,a),Ag(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Mt)return bn(c),null}else 2*Qs()-m.renderingStartTime>Sw&&u!==536870912&&(c.flags|=128,f=!0,Ag(m,!1),c.lanes=4194304);m.isBackwards?(w.sibling=c.child,c.child=w):(a=m.last,a!==null?a.sibling=w:c.child=w,m.last=w)}return m.tail!==null?(c=m.tail,m.rendering=c,m.tail=c.sibling,m.renderingStartTime=Qs(),c.sibling=null,a=Mn.current,re(Mn,f?a&1|2:a&1),c):(bn(c),null);case 22:case 23:return to(c),$1(),f=c.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(c.flags|=8192):f&&(c.flags|=8192),f?(u&536870912)!==0&&(c.flags&128)===0&&(bn(c),c.subtreeFlags&6&&(c.flags|=8192)):bn(c),u=c.updateQueue,u!==null&&Aw(c,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),f=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==u&&(c.flags|=2048),a!==null&&Z(Gl),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),c.memoizedState.cache!==u&&(c.flags|=2048),Ja(Ln),bn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function AM(a,c){switch(S1(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Ja(Ln),Ne(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Qt(c),null;case 13:if(to(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ag()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Z(Mn),null;case 4:return Ne(),null;case 10:return Ja(c.type),null;case 22:case 23:return to(c),$1(),a!==null&&Z(Gl),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Ja(Ln),null;case 25:return null;default:return null}}function _I(a,c){switch(S1(c),c.tag){case 3:Ja(Ln),Ne();break;case 26:case 27:case 5:Qt(c);break;case 4:Ne();break;case 13:to(c);break;case 19:Z(Mn);break;case 10:Ja(c.type);break;case 22:case 23:to(c),$1(),a!==null&&Z(Gl);break;case 24:Ja(Ln)}}function Cg(a,c){try{var u=c.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&a)===a){f=void 0;var w=u.create,C=u.inst;f=w(),C.destroy=f}u=u.next}while(u!==m)}}catch(U){rn(c,c.return,U)}}function lc(a,c,u){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var w=m.next;f=w;do{if((f.tag&a)===a){var C=f.inst,U=C.destroy;if(U!==void 0){C.destroy=void 0,m=c;var G=u,se=U;try{se()}catch(de){rn(m,G,de)}}}f=f.next}while(f!==w)}}catch(de){rn(c,c.return,de)}}function SI(a){var c=a.updateQueue;if(c!==null){var u=a.stateNode;try{dT(c,u)}catch(f){rn(a,a.return,f)}}}function xI(a,c,u){u.props=Kl(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(f){rn(a,c,f)}}function _g(a,c){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof u=="function"?a.refCleanup=u(f):u.current=f}}catch(m){rn(a,c,m)}}function oa(a,c){var u=a.ref,f=a.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(m){rn(a,c,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){rn(a,c,m)}else u.current=null}function NI(a){var c=a.type,u=a.memoizedProps,f=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(m){rn(a,a.return,m)}}function fA(a,c,u){try{var f=a.stateNode;jM(f,a.type,u,c),f[Jr]=c}catch(m){rn(a,a.return,m)}}function TI(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&yc(a.type)||a.tag===4}function pA(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||TI(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&yc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function gA(a,c,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,c?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,c):(c=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,c.appendChild(a),u=u._reactRootContainer,u!=null||c.onclick!==null||(c.onclick=Uw));else if(f!==4&&(f===27&&yc(a.type)&&(u=a.stateNode,c=null),a=a.child,a!==null))for(gA(a,c,u),a=a.sibling;a!==null;)gA(a,c,u),a=a.sibling}function Cw(a,c,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,c?u.insertBefore(a,c):u.appendChild(a);else if(f!==4&&(f===27&&yc(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Cw(a,c,u),a=a.sibling;a!==null;)Cw(a,c,u),a=a.sibling}function II(a){var c=a.stateNode,u=a.memoizedProps;try{for(var f=a.type,m=c.attributes;m.length;)c.removeAttributeNode(m[0]);lr(c,f,u),c[Ar]=a,c[Jr]=u}catch(w){rn(a,a.return,w)}}var so=!1,Tn=!1,mA=!1,OI=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function CM(a,c){if(a=a.containerInfo,FA=zw,a=zN(a),p1(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var C=0,U=-1,G=-1,se=0,de=0,ge=a,ae=null;t:for(;;){for(var oe;ge!==u||m!==0&&ge.nodeType!==3||(U=C+m),ge!==w||f!==0&&ge.nodeType!==3||(G=C+f),ge.nodeType===3&&(C+=ge.nodeValue.length),(oe=ge.firstChild)!==null;)ae=ge,ge=oe;for(;;){if(ge===a)break t;if(ae===u&&++se===m&&(U=C),ae===w&&++de===f&&(G=C),(oe=ge.nextSibling)!==null)break;ge=ae,ae=ge.parentNode}ge=oe}u=U===-1||G===-1?null:{start:U,end:G}}else u=null}u=u||{start:0,end:0}}else u=null;for(zA={focusedElem:a,selectionRange:u},zw=!1,Wn=c;Wn!==null;)if(c=Wn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Wn=a;else for(;Wn!==null;){switch(c=Wn,w=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,u=c,m=w.memoizedProps,w=w.memoizedState,f=u.stateNode;try{var rt=Kl(u.type,m,u.elementType===u.type);a=f.getSnapshotBeforeUpdate(rt,w),f.__reactInternalSnapshotBeforeUpdate=a}catch(Ze){rn(u,u.return,Ze)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,u=a.nodeType,u===9)qA(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":qA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Wn=a;break}Wn=c.return}}function RI(a,c,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:uc(a,u),f&4&&Cg(5,u);break;case 1:if(uc(a,u),f&4)if(a=u.stateNode,c===null)try{a.componentDidMount()}catch(C){rn(u,u.return,C)}else{var m=Kl(u.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(m,c,a.__reactInternalSnapshotBeforeUpdate)}catch(C){rn(u,u.return,C)}}f&64&&SI(u),f&512&&_g(u,u.return);break;case 3:if(uc(a,u),f&64&&(a=u.updateQueue,a!==null)){if(c=null,u.child!==null)switch(u.child.tag){case 27:case 5:c=u.child.stateNode;break;case 1:c=u.child.stateNode}try{dT(a,c)}catch(C){rn(u,u.return,C)}}break;case 27:c===null&&f&4&&II(u);case 26:case 5:uc(a,u),c===null&&f&4&&NI(u),f&512&&_g(u,u.return);break;case 12:uc(a,u);break;case 13:uc(a,u),f&4&&UI(a,u),f&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=DM.bind(null,u),QM(a,u))));break;case 22:if(f=u.memoizedState!==null||so,!f){c=c!==null&&c.memoizedState!==null||Tn,m=so;var w=Tn;so=f,(Tn=c)&&!w?hc(a,u,(u.subtreeFlags&8772)!==0):uc(a,u),so=m,Tn=w}break;case 30:break;default:uc(a,u)}}function DI(a){var c=a.alternate;c!==null&&(a.alternate=null,DI(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Yv(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var pn=null,ns=!1;function io(a,c,u){for(u=u.child;u!==null;)PI(a,c,u),u=u.sibling}function PI(a,c,u){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(Jo,u)}catch{}switch(u.tag){case 26:Tn||oa(u,c),io(a,c,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Tn||oa(u,c);var f=pn,m=ns;yc(u.type)&&(pn=u.stateNode,ns=!1),io(a,c,u),Pg(u.stateNode),pn=f,ns=m;break;case 5:Tn||oa(u,c);case 6:if(f=pn,m=ns,pn=null,io(a,c,u),pn=f,ns=m,pn!==null)if(ns)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(u.stateNode)}catch(w){rn(u,c,w)}else try{pn.removeChild(u.stateNode)}catch(w){rn(u,c,w)}break;case 18:pn!==null&&(ns?(a=pn,v3(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),zg(a)):v3(pn,u.stateNode));break;case 4:f=pn,m=ns,pn=u.stateNode.containerInfo,ns=!0,io(a,c,u),pn=f,ns=m;break;case 0:case 11:case 14:case 15:Tn||lc(2,u,c),Tn||lc(4,u,c),io(a,c,u);break;case 1:Tn||(oa(u,c),f=u.stateNode,typeof f.componentWillUnmount=="function"&&xI(u,c,f)),io(a,c,u);break;case 21:io(a,c,u);break;case 22:Tn=(f=Tn)||u.memoizedState!==null,io(a,c,u),Tn=f;break;default:io(a,c,u)}}function UI(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{zg(a)}catch(u){rn(c,c.return,u)}}function _M(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new OI),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new OI),c;default:throw Error(r(435,a.tag))}}function yA(a,c){var u=_M(a);c.forEach(function(f){var m=PM.bind(null,a,f);u.has(f)||(u.add(f),f.then(m,m))})}function Ts(a,c){var u=c.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f],w=a,C=c,U=C;e:for(;U!==null;){switch(U.tag){case 27:if(yc(U.type)){pn=U.stateNode,ns=!1;break e}break;case 5:pn=U.stateNode,ns=!1;break e;case 3:case 4:pn=U.stateNode.containerInfo,ns=!0;break e}U=U.return}if(pn===null)throw Error(r(160));PI(w,C,m),pn=null,ns=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)kI(c,a),c=c.sibling}var Ti=null;function kI(a,c){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ts(c,a),Is(a),f&4&&(lc(3,a,a.return),Cg(3,a),lc(5,a,a.return));break;case 1:Ts(c,a),Is(a),f&512&&(Tn||u===null||oa(u,u.return)),f&64&&so&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var m=Ti;if(Ts(c,a),Is(a),f&512&&(Tn||u===null||oa(u,u.return)),f&4){var w=u!==null?u.memoizedState:null;if(f=a.memoizedState,u===null)if(f===null)if(a.stateNode===null){e:{f=a.type,u=a.memoizedProps,m=m.ownerDocument||m;t:switch(f){case"title":w=m.getElementsByTagName("title")[0],(!w||w[Wp]||w[Ar]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(f),m.head.insertBefore(w,m.querySelector("head > title"))),lr(w,f,u),w[Ar]=a,Vn(w),f=w;break e;case"link":var C=I3("link","href",m).get(f+(u.href||""));if(C){for(var U=0;U<C.length;U++)if(w=C[U],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(U,1);break t}}w=m.createElement(f),lr(w,f,u),m.head.appendChild(w);break;case"meta":if(C=I3("meta","content",m).get(f+(u.content||""))){for(U=0;U<C.length;U++)if(w=C[U],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(U,1);break t}}w=m.createElement(f),lr(w,f,u),m.head.appendChild(w);break;default:throw Error(r(468,f))}w[Ar]=a,Vn(w),f=w}a.stateNode=f}else O3(m,a.type,a.stateNode);else a.stateNode=T3(m,f,a.memoizedProps);else w!==f?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,f===null?O3(m,a.type,a.stateNode):T3(m,f,a.memoizedProps)):f===null&&a.stateNode!==null&&fA(a,a.memoizedProps,u.memoizedProps)}break;case 27:Ts(c,a),Is(a),f&512&&(Tn||u===null||oa(u,u.return)),u!==null&&f&4&&fA(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Ts(c,a),Is(a),f&512&&(Tn||u===null||oa(u,u.return)),a.flags&32){m=a.stateNode;try{qh(m,"")}catch(oe){rn(a,a.return,oe)}}f&4&&a.stateNode!=null&&(m=a.memoizedProps,fA(a,m,u!==null?u.memoizedProps:m)),f&1024&&(mA=!0);break;case 6:if(Ts(c,a),Is(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,u=a.stateNode;try{u.nodeValue=f}catch(oe){rn(a,a.return,oe)}}break;case 3:if(Mw=null,m=Ti,Ti=Bw(c.containerInfo),Ts(c,a),Ti=m,Is(a),f&4&&u!==null&&u.memoizedState.isDehydrated)try{zg(c.containerInfo)}catch(oe){rn(a,a.return,oe)}mA&&(mA=!1,BI(a));break;case 4:f=Ti,Ti=Bw(a.stateNode.containerInfo),Ts(c,a),Is(a),Ti=f;break;case 12:Ts(c,a),Is(a);break;case 13:Ts(c,a),Is(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(CA=Qs()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,yA(a,f)));break;case 22:m=a.memoizedState!==null;var G=u!==null&&u.memoizedState!==null,se=so,de=Tn;if(so=se||m,Tn=de||G,Ts(c,a),Tn=de,so=se,Is(a),f&8192)e:for(c=a.stateNode,c._visibility=m?c._visibility&-2:c._visibility|1,m&&(u===null||G||so||Tn||Wl(a)),u=null,c=a;;){if(c.tag===5||c.tag===26){if(u===null){G=u=c;try{if(w=G.stateNode,m)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{U=G.stateNode;var ge=G.memoizedProps.style,ae=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;U.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(oe){rn(G,G.return,oe)}}}else if(c.tag===6){if(u===null){G=c;try{G.stateNode.nodeValue=m?"":G.memoizedProps}catch(oe){rn(G,G.return,oe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}f&4&&(f=a.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,yA(a,u))));break;case 19:Ts(c,a),Is(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,yA(a,f)));break;case 30:break;case 21:break;default:Ts(c,a),Is(a)}}function Is(a){var c=a.flags;if(c&2){try{for(var u,f=a.return;f!==null;){if(TI(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,w=pA(a);Cw(a,w,m);break;case 5:var C=u.stateNode;u.flags&32&&(qh(C,""),u.flags&=-33);var U=pA(a);Cw(a,U,C);break;case 3:case 4:var G=u.stateNode.containerInfo,se=pA(a);gA(a,se,G);break;default:throw Error(r(161))}}catch(de){rn(a,a.return,de)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function BI(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;BI(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function uc(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)RI(a,c.alternate,c),c=c.sibling}function Wl(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:lc(4,c,c.return),Wl(c);break;case 1:oa(c,c.return);var u=c.stateNode;typeof u.componentWillUnmount=="function"&&xI(c,c.return,u),Wl(c);break;case 27:Pg(c.stateNode);case 26:case 5:oa(c,c.return),Wl(c);break;case 22:c.memoizedState===null&&Wl(c);break;case 30:Wl(c);break;default:Wl(c)}a=a.sibling}}function hc(a,c,u){for(u=u&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var f=c.alternate,m=a,w=c,C=w.flags;switch(w.tag){case 0:case 11:case 15:hc(m,w,u),Cg(4,w);break;case 1:if(hc(m,w,u),f=w,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(se){rn(f,f.return,se)}if(f=w,m=f.updateQueue,m!==null){var U=f.stateNode;try{var G=m.shared.hiddenCallbacks;if(G!==null)for(m.shared.hiddenCallbacks=null,m=0;m<G.length;m++)hT(G[m],U)}catch(se){rn(f,f.return,se)}}u&&C&64&&SI(w),_g(w,w.return);break;case 27:II(w);case 26:case 5:hc(m,w,u),u&&f===null&&C&4&&NI(w),_g(w,w.return);break;case 12:hc(m,w,u);break;case 13:hc(m,w,u),u&&C&4&&UI(m,w);break;case 22:w.memoizedState===null&&hc(m,w,u),_g(w,w.return);break;case 30:break;default:hc(m,w,u)}c=c.sibling}}function wA(a,c){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&lg(u))}function bA(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&lg(a))}function ca(a,c,u,f){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)LI(a,c,u,f),c=c.sibling}function LI(a,c,u,f){var m=c.flags;switch(c.tag){case 0:case 11:case 15:ca(a,c,u,f),m&2048&&Cg(9,c);break;case 1:ca(a,c,u,f);break;case 3:ca(a,c,u,f),m&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&lg(a)));break;case 12:if(m&2048){ca(a,c,u,f),a=c.stateNode;try{var w=c.memoizedProps,C=w.id,U=w.onPostCommit;typeof U=="function"&&U(C,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(G){rn(c,c.return,G)}}else ca(a,c,u,f);break;case 13:ca(a,c,u,f);break;case 23:break;case 22:w=c.stateNode,C=c.alternate,c.memoizedState!==null?w._visibility&2?ca(a,c,u,f):Sg(a,c):w._visibility&2?ca(a,c,u,f):(w._visibility|=2,ld(a,c,u,f,(c.subtreeFlags&10256)!==0)),m&2048&&wA(C,c);break;case 24:ca(a,c,u,f),m&2048&&bA(c.alternate,c);break;default:ca(a,c,u,f)}}function ld(a,c,u,f,m){for(m=m&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=a,C=c,U=u,G=f,se=C.flags;switch(C.tag){case 0:case 11:case 15:ld(w,C,U,G,m),Cg(8,C);break;case 23:break;case 22:var de=C.stateNode;C.memoizedState!==null?de._visibility&2?ld(w,C,U,G,m):Sg(w,C):(de._visibility|=2,ld(w,C,U,G,m)),m&&se&2048&&wA(C.alternate,C);break;case 24:ld(w,C,U,G,m),m&&se&2048&&bA(C.alternate,C);break;default:ld(w,C,U,G,m)}c=c.sibling}}function Sg(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var u=a,f=c,m=f.flags;switch(f.tag){case 22:Sg(u,f),m&2048&&wA(f.alternate,f);break;case 24:Sg(u,f),m&2048&&bA(f.alternate,f);break;default:Sg(u,f)}c=c.sibling}}var xg=8192;function ud(a){if(a.subtreeFlags&xg)for(a=a.child;a!==null;)MI(a),a=a.sibling}function MI(a){switch(a.tag){case 26:ud(a),a.flags&xg&&a.memoizedState!==null&&l9(Ti,a.memoizedState,a.memoizedProps);break;case 5:ud(a);break;case 3:case 4:var c=Ti;Ti=Bw(a.stateNode.containerInfo),ud(a),Ti=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=xg,xg=16777216,ud(a),xg=c):ud(a));break;default:ud(a)}}function $I(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Ng(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var u=0;u<c.length;u++){var f=c[u];Wn=f,zI(f,a)}$I(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)FI(a),a=a.sibling}function FI(a){switch(a.tag){case 0:case 11:case 15:Ng(a),a.flags&2048&&lc(9,a,a.return);break;case 3:Ng(a);break;case 12:Ng(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,_w(a)):Ng(a);break;default:Ng(a)}}function _w(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var u=0;u<c.length;u++){var f=c[u];Wn=f,zI(f,a)}$I(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:lc(8,c,c.return),_w(c);break;case 22:u=c.stateNode,u._visibility&2&&(u._visibility&=-3,_w(c));break;default:_w(c)}a=a.sibling}}function zI(a,c){for(;Wn!==null;){var u=Wn;switch(u.tag){case 0:case 11:case 15:lc(8,u,c);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:lg(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Wn=f;else e:for(u=a;Wn!==null;){f=Wn;var m=f.sibling,w=f.return;if(DI(f),f===u){Wn=null;break e}if(m!==null){m.return=w,Wn=m;break e}Wn=w}}}var SM={getCacheForType:function(a){var c=Cr(Ln),u=c.data.get(a);return u===void 0&&(u=a(),c.data.set(a,u)),u}},xM=typeof WeakMap=="function"?WeakMap:Map,qt=0,cn=null,yt=null,_t=0,Gt=0,Os=null,dc=!1,hd=!1,EA=!1,ao=0,Cn=0,fc=0,Yl=0,vA=0,si=0,dd=0,Tg=null,rs=null,AA=!1,CA=0,Sw=1/0,xw=null,pc=null,cr=0,gc=null,fd=null,pd=0,_A=0,SA=null,HI=null,Ig=0,xA=null;function Rs(){if((qt&2)!==0&&_t!==0)return _t&-_t;if(_.T!==null){var a=td;return a!==0?a:PA()}return sN()}function jI(){si===0&&(si=(_t&536870912)===0||Mt?eN():536870912);var a=ri.current;return a!==null&&(a.flags|=32),si}function Ds(a,c,u){(a===cn&&(Gt===2||Gt===9)||a.cancelPendingCommit!==null)&&(gd(a,0),mc(a,_t,si,!1)),Kp(a,u),((qt&2)===0||a!==cn)&&(a===cn&&((qt&2)===0&&(Yl|=u),Cn===4&&mc(a,_t,si,!1)),la(a))}function qI(a,c,u){if((qt&6)!==0)throw Error(r(327));var f=!u&&(c&124)===0&&(c&a.expiredLanes)===0||Vp(a,c),m=f?IM(a,c):IA(a,c,!0),w=f;do{if(m===0){hd&&!f&&mc(a,c,0,!1);break}else{if(u=a.current.alternate,w&&!NM(u)){m=IA(a,c,!1),w=!1;continue}if(m===2){if(w=c,a.errorRecoveryDisabledLanes&w)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){c=C;e:{var U=a;m=Tg;var G=U.current.memoizedState.isDehydrated;if(G&&(gd(U,C).flags|=256),C=IA(U,C,!1),C!==2){if(EA&&!G){U.errorRecoveryDisabledLanes|=w,Yl|=w,m=4;break e}w=rs,rs=m,w!==null&&(rs===null?rs=w:rs.push.apply(rs,w))}m=C}if(w=!1,m!==2)continue}}if(m===1){gd(a,0),mc(a,c,0,!0);break}e:{switch(f=a,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:mc(f,c,si,!dc);break e;case 2:rs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(m=CA+300-Qs(),10<m)){if(mc(f,c,si,!dc),Ly(f,0,!0)!==0)break e;f.timeoutHandle=b3(GI.bind(null,f,u,rs,xw,AA,c,si,Yl,dd,dc,w,2,-0,0),m);break e}GI(f,u,rs,xw,AA,c,si,Yl,dd,dc,w,0,-0,0)}}break}while(!0);la(a)}function GI(a,c,u,f,m,w,C,U,G,se,de,ge,ae,oe){if(a.timeoutHandle=-1,ge=c.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(Bg={stylesheets:null,count:0,unsuspend:c9},MI(c),ge=u9(),ge!==null)){a.cancelPendingCommit=ge(XI.bind(null,a,c,w,u,f,m,C,U,G,de,1,ae,oe)),mc(a,w,C,!se);return}XI(a,c,w,u,f,m,C,U,G)}function NM(a){for(var c=a;;){var u=c.tag;if((u===0||u===11||u===15)&&c.flags&16384&&(u=c.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var m=u[f],w=m.getSnapshot;m=m.value;try{if(!xs(w(),m))return!1}catch{return!1}}if(u=c.child,c.subtreeFlags&16384&&u!==null)u.return=c,c=u;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function mc(a,c,u,f){c&=~vA,c&=~Yl,a.suspendedLanes|=c,a.pingedLanes&=~c,f&&(a.warmLanes|=c),f=a.expirationTimes;for(var m=c;0<m;){var w=31-Lr(m),C=1<<w;f[w]=-1,m&=~C}u!==0&&nN(a,u,c)}function Nw(){return(qt&6)===0?(Og(0),!1):!0}function NA(){if(yt!==null){if(Gt===0)var a=yt.return;else a=yt,Xa=jl=null,q1(a),od=null,Eg=0,a=yt;for(;a!==null;)_I(a.alternate,a),a=a.return;yt=null}}function gd(a,c){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,GM(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),NA(),cn=a,yt=u=Ya(a.current,null),_t=c,Gt=0,Os=null,dc=!1,hd=Vp(a,c),EA=!1,dd=si=vA=Yl=fc=Cn=0,rs=Tg=null,AA=!1,(c&8)!==0&&(c|=c&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=c;0<f;){var m=31-Lr(f),w=1<<m;c|=a[m],f&=~w}return ao=c,Yy(),u}function VI(a,c){ft=null,_.H=pw,c===hg||c===sw?(c=lT(),Gt=3):c===aT?(c=lT(),Gt=4):Gt=c===uI?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Os=c,yt===null&&(Cn=1,bw(a,Js(c,a.current)))}function KI(){var a=_.H;return _.H=pw,a===null?pw:a}function WI(){var a=_.A;return _.A=SM,a}function TA(){Cn=4,dc||(_t&4194048)!==_t&&ri.current!==null||(hd=!0),(fc&134217727)===0&&(Yl&134217727)===0||cn===null||mc(cn,_t,si,!1)}function IA(a,c,u){var f=qt;qt|=2;var m=KI(),w=WI();(cn!==a||_t!==c)&&(xw=null,gd(a,c)),c=!1;var C=Cn;e:do try{if(Gt!==0&&yt!==null){var U=yt,G=Os;switch(Gt){case 8:NA(),C=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(c=!0);var se=Gt;if(Gt=0,Os=null,md(a,U,G,se),u&&hd){C=0;break e}break;default:se=Gt,Gt=0,Os=null,md(a,U,G,se)}}TM(),C=Cn;break}catch(de){VI(a,de)}while(!0);return c&&a.shellSuspendCounter++,Xa=jl=null,qt=f,_.H=m,_.A=w,yt===null&&(cn=null,_t=0,Yy()),C}function TM(){for(;yt!==null;)YI(yt)}function IM(a,c){var u=qt;qt|=2;var f=KI(),m=WI();cn!==a||_t!==c?(xw=null,Sw=Qs()+500,gd(a,c)):hd=Vp(a,c);e:do try{if(Gt!==0&&yt!==null){c=yt;var w=Os;t:switch(Gt){case 1:Gt=0,Os=null,md(a,c,w,1);break;case 2:case 9:if(oT(w)){Gt=0,Os=null,QI(c);break}c=function(){Gt!==2&&Gt!==9||cn!==a||(Gt=7),la(a)},w.then(c,c);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:oT(w)?(Gt=0,Os=null,QI(c)):(Gt=0,Os=null,md(a,c,w,7));break;case 5:var C=null;switch(yt.tag){case 26:C=yt.memoizedState;case 5:case 27:var U=yt;if(!C||R3(C)){Gt=0,Os=null;var G=U.sibling;if(G!==null)yt=G;else{var se=U.return;se!==null?(yt=se,Tw(se)):yt=null}break t}}Gt=0,Os=null,md(a,c,w,5);break;case 6:Gt=0,Os=null,md(a,c,w,6);break;case 8:NA(),Cn=6;break e;default:throw Error(r(462))}}OM();break}catch(de){VI(a,de)}while(!0);return Xa=jl=null,_.H=f,_.A=m,qt=u,yt!==null?0:(cn=null,_t=0,Yy(),Cn)}function OM(){for(;yt!==null&&!ra();)YI(yt)}function YI(a){var c=AI(a.alternate,a,ao);a.memoizedProps=a.pendingProps,c===null?Tw(a):yt=c}function QI(a){var c=a,u=c.alternate;switch(c.tag){case 15:case 0:c=mI(u,c,c.pendingProps,c.type,void 0,_t);break;case 11:c=mI(u,c,c.pendingProps,c.type.render,c.ref,_t);break;case 5:q1(c);default:_I(u,c),c=yt=ZN(c,ao),c=AI(u,c,ao)}a.memoizedProps=a.pendingProps,c===null?Tw(a):yt=c}function md(a,c,u,f){Xa=jl=null,q1(c),od=null,Eg=0;var m=c.return;try{if(bM(a,m,c,u,_t)){Cn=1,bw(a,Js(u,a.current)),yt=null;return}}catch(w){if(m!==null)throw yt=m,w;Cn=1,bw(a,Js(u,a.current)),yt=null;return}c.flags&32768?(Mt||f===1?a=!0:hd||(_t&536870912)!==0?a=!1:(dc=a=!0,(f===2||f===9||f===3||f===6)&&(f=ri.current,f!==null&&f.tag===13&&(f.flags|=16384))),ZI(c,a)):Tw(c)}function Tw(a){var c=a;do{if((c.flags&32768)!==0){ZI(c,dc);return}a=c.return;var u=vM(c.alternate,c,ao);if(u!==null){yt=u;return}if(c=c.sibling,c!==null){yt=c;return}yt=c=a}while(c!==null);Cn===0&&(Cn=5)}function ZI(a,c){do{var u=AM(a.alternate,a);if(u!==null){u.flags&=32767,yt=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!c&&(a=a.sibling,a!==null)){yt=a;return}yt=a=u}while(a!==null);Cn=6,yt=null}function XI(a,c,u,f,m,w,C,U,G){a.cancelPendingCommit=null;do Iw();while(cr!==0);if((qt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(w=c.lanes|c.childLanes,w|=b1,cL(a,u,w,C,U,G),a===cn&&(yt=cn=null,_t=0),fd=c,gc=a,pd=u,_A=w,SA=m,HI=f,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,UM(Xo,function(){return r3(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||f){f=_.T,_.T=null,m=L.p,L.p=2,C=qt,qt|=4;try{CM(a,c,u)}finally{qt=C,L.p=m,_.T=f}}cr=1,JI(),e3(),t3()}}function JI(){if(cr===1){cr=0;var a=gc,c=fd,u=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||u){u=_.T,_.T=null;var f=L.p;L.p=2;var m=qt;qt|=4;try{kI(c,a);var w=zA,C=zN(a.containerInfo),U=w.focusedElem,G=w.selectionRange;if(C!==U&&U&&U.ownerDocument&&FN(U.ownerDocument.documentElement,U)){if(G!==null&&p1(U)){var se=G.start,de=G.end;if(de===void 0&&(de=se),"selectionStart"in U)U.selectionStart=se,U.selectionEnd=Math.min(de,U.value.length);else{var ge=U.ownerDocument||document,ae=ge&&ge.defaultView||window;if(ae.getSelection){var oe=ae.getSelection(),rt=U.textContent.length,Ze=Math.min(G.start,rt),Jt=G.end===void 0?Ze:Math.min(G.end,rt);!oe.extend&&Ze>Jt&&(C=Jt,Jt=Ze,Ze=C);var X=$N(U,Ze),Y=$N(U,Jt);if(X&&Y&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==Y.node||oe.focusOffset!==Y.offset)){var te=ge.createRange();te.setStart(X.node,X.offset),oe.removeAllRanges(),Ze>Jt?(oe.addRange(te),oe.extend(Y.node,Y.offset)):(te.setEnd(Y.node,Y.offset),oe.addRange(te))}}}}for(ge=[],oe=U;oe=oe.parentNode;)oe.nodeType===1&&ge.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ge.length;U++){var pe=ge[U];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}zw=!!FA,zA=FA=null}finally{qt=m,L.p=f,_.T=u}}a.current=c,cr=2}}function e3(){if(cr===2){cr=0;var a=gc,c=fd,u=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||u){u=_.T,_.T=null;var f=L.p;L.p=2;var m=qt;qt|=4;try{RI(a,c.alternate,c)}finally{qt=m,L.p=f,_.T=u}}cr=3}}function t3(){if(cr===4||cr===3){cr=0,Bh();var a=gc,c=fd,u=pd,f=HI;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?cr=5:(cr=0,fd=gc=null,n3(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(pc=null),Kv(u),c=c.stateNode,Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(Jo,c,void 0,(c.current.flags&128)===128)}catch{}if(f!==null){c=_.T,m=L.p,L.p=2,_.T=null;try{for(var w=a.onRecoverableError,C=0;C<f.length;C++){var U=f[C];w(U.value,{componentStack:U.stack})}}finally{_.T=c,L.p=m}}(pd&3)!==0&&Iw(),la(a),m=a.pendingLanes,(u&4194090)!==0&&(m&42)!==0?a===xA?Ig++:(Ig=0,xA=a):Ig=0,Og(0)}}function n3(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,lg(c)))}function Iw(a){return JI(),e3(),t3(),r3()}function r3(){if(cr!==5)return!1;var a=gc,c=_A;_A=0;var u=Kv(pd),f=_.T,m=L.p;try{L.p=32>u?32:u,_.T=null,u=SA,SA=null;var w=gc,C=pd;if(cr=0,fd=gc=null,pd=0,(qt&6)!==0)throw Error(r(331));var U=qt;if(qt|=4,FI(w.current),LI(w,w.current,C,u),qt=U,Og(0,!1),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(Jo,w)}catch{}return!0}finally{L.p=m,_.T=f,n3(a,c)}}function s3(a,c,u){c=Js(u,c),c=sA(a.stateNode,c,2),a=ic(a,c,2),a!==null&&(Kp(a,2),la(a))}function rn(a,c,u){if(a.tag===3)s3(a,a,u);else for(;c!==null;){if(c.tag===3){s3(c,a,u);break}else if(c.tag===1){var f=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(pc===null||!pc.has(f))){a=Js(u,a),u=cI(2),f=ic(c,u,2),f!==null&&(lI(u,f,c,a),Kp(f,2),la(f));break}}c=c.return}}function OA(a,c,u){var f=a.pingCache;if(f===null){f=a.pingCache=new xM;var m=new Set;f.set(c,m)}else m=f.get(c),m===void 0&&(m=new Set,f.set(c,m));m.has(u)||(EA=!0,m.add(u),a=RM.bind(null,a,c,u),c.then(a,a))}function RM(a,c,u){var f=a.pingCache;f!==null&&f.delete(c),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,cn===a&&(_t&u)===u&&(Cn===4||Cn===3&&(_t&62914560)===_t&&300>Qs()-CA?(qt&2)===0&&gd(a,0):vA|=u,dd===_t&&(dd=0)),la(a)}function i3(a,c){c===0&&(c=tN()),a=Zh(a,c),a!==null&&(Kp(a,c),la(a))}function DM(a){var c=a.memoizedState,u=0;c!==null&&(u=c.retryLane),i3(a,u)}function PM(a,c){var u=0;switch(a.tag){case 13:var f=a.stateNode,m=a.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(c),i3(a,u)}function UM(a,c){return wn(a,c)}var Ow=null,yd=null,RA=!1,Rw=!1,DA=!1,Ql=0;function la(a){a!==yd&&a.next===null&&(yd===null?Ow=yd=a:yd=yd.next=a),Rw=!0,RA||(RA=!0,BM())}function Og(a,c){if(!DA&&Rw){DA=!0;do for(var u=!1,f=Ow;f!==null;){if(a!==0){var m=f.pendingLanes;if(m===0)var w=0;else{var C=f.suspendedLanes,U=f.pingedLanes;w=(1<<31-Lr(42|a)+1)-1,w&=m&~(C&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,l3(f,w))}else w=_t,w=Ly(f,f===cn?w:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(w&3)===0||Vp(f,w)||(u=!0,l3(f,w));f=f.next}while(u);DA=!1}}function kM(){a3()}function a3(){Rw=RA=!1;var a=0;Ql!==0&&(qM()&&(a=Ql),Ql=0);for(var c=Qs(),u=null,f=Ow;f!==null;){var m=f.next,w=o3(f,c);w===0?(f.next=null,u===null?Ow=m:u.next=m,m===null&&(yd=u)):(u=f,(a!==0||(w&3)!==0)&&(Rw=!0)),f=m}Og(a)}function o3(a,c){for(var u=a.suspendedLanes,f=a.pingedLanes,m=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var C=31-Lr(w),U=1<<C,G=m[C];G===-1?((U&u)===0||(U&f)!==0)&&(m[C]=oL(U,c)):G<=c&&(a.expiredLanes|=U),w&=~U}if(c=cn,u=_t,u=Ly(a,a===c?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,u===0||a===c&&(Gt===2||Gt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&fn(f),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Vp(a,u)){if(c=u&-u,c===a.callbackPriority)return c;switch(f!==null&&fn(f),Kv(u)){case 2:case 8:u=qp;break;case 32:u=Xo;break;case 268435456:u=Gp;break;default:u=Xo}return f=c3.bind(null,a),u=wn(u,f),a.callbackPriority=c,a.callbackNode=u,c}return f!==null&&f!==null&&fn(f),a.callbackPriority=2,a.callbackNode=null,2}function c3(a,c){if(cr!==0&&cr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Iw()&&a.callbackNode!==u)return null;var f=_t;return f=Ly(a,a===cn?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(qI(a,f,c),o3(a,Qs()),a.callbackNode!=null&&a.callbackNode===u?c3.bind(null,a):null)}function l3(a,c){if(Iw())return null;qI(a,c,!0)}function BM(){VM(function(){(qt&6)!==0?wn(jp,kM):a3()})}function PA(){return Ql===0&&(Ql=eN()),Ql}function u3(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Hy(""+a)}function h3(a,c){var u=c.ownerDocument.createElement("input");return u.name=c.name,u.value=c.value,a.id&&u.setAttribute("form",a.id),c.parentNode.insertBefore(u,c),a=new FormData(a),u.parentNode.removeChild(u),a}function LM(a,c,u,f,m){if(c==="submit"&&u&&u.stateNode===m){var w=u3((m[Jr]||null).action),C=f.submitter;C&&(c=(c=C[Jr]||null)?u3(c.formAction):C.getAttribute("formAction"),c!==null&&(w=c,C=null));var U=new Vy("action","action",null,f,m);a.push({event:U,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ql!==0){var G=C?h3(m,C):new FormData(m);J1(u,{pending:!0,data:G,method:m.method,action:w},null,G)}}else typeof w=="function"&&(U.preventDefault(),G=C?h3(m,C):new FormData(m),J1(u,{pending:!0,data:G,method:m.method,action:w},w,G))},currentTarget:m}]})}}for(var UA=0;UA<w1.length;UA++){var kA=w1[UA],MM=kA.toLowerCase(),$M=kA[0].toUpperCase()+kA.slice(1);Ni(MM,"on"+$M)}Ni(qN,"onAnimationEnd"),Ni(GN,"onAnimationIteration"),Ni(VN,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(nM,"onTransitionRun"),Ni(rM,"onTransitionStart"),Ni(sM,"onTransitionCancel"),Ni(KN,"onTransitionEnd"),zh("onMouseEnter",["mouseout","mouseover"]),zh("onMouseLeave",["mouseout","mouseover"]),zh("onPointerEnter",["pointerout","pointerover"]),zh("onPointerLeave",["pointerout","pointerover"]),Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rg));function d3(a,c){c=(c&4)!==0;for(var u=0;u<a.length;u++){var f=a[u],m=f.event;f=f.listeners;e:{var w=void 0;if(c)for(var C=f.length-1;0<=C;C--){var U=f[C],G=U.instance,se=U.currentTarget;if(U=U.listener,G!==w&&m.isPropagationStopped())break e;w=U,m.currentTarget=se;try{w(m)}catch(de){ww(de)}m.currentTarget=null,w=G}else for(C=0;C<f.length;C++){if(U=f[C],G=U.instance,se=U.currentTarget,U=U.listener,G!==w&&m.isPropagationStopped())break e;w=U,m.currentTarget=se;try{w(m)}catch(de){ww(de)}m.currentTarget=null,w=G}}}}function wt(a,c){var u=c[Wv];u===void 0&&(u=c[Wv]=new Set);var f=a+"__bubble";u.has(f)||(f3(c,a,2,!1),u.add(f))}function BA(a,c,u){var f=0;c&&(f|=4),f3(u,a,f,c)}var Dw="_reactListening"+Math.random().toString(36).slice(2);function LA(a){if(!a[Dw]){a[Dw]=!0,aN.forEach(function(u){u!=="selectionchange"&&(FM.has(u)||BA(u,!1,a),BA(u,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Dw]||(c[Dw]=!0,BA("selectionchange",!1,c))}}function f3(a,c,u,f){switch(L3(c)){case 2:var m=f9;break;case 8:m=p9;break;default:m=ZA}u=m.bind(null,c,u,a),m=void 0,!i1||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(m=!0),f?m!==void 0?a.addEventListener(c,u,{capture:!0,passive:m}):a.addEventListener(c,u,!0):m!==void 0?a.addEventListener(c,u,{passive:m}):a.addEventListener(c,u,!1)}function MA(a,c,u,f,m){var w=f;if((c&1)===0&&(c&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var U=f.stateNode.containerInfo;if(U===m)break;if(C===4)for(C=f.return;C!==null;){var G=C.tag;if((G===3||G===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;U!==null;){if(C=Mh(U),C===null)return;if(G=C.tag,G===5||G===6||G===26||G===27){f=w=C;continue e}U=U.parentNode}}f=f.return}EN(function(){var se=w,de=r1(u),ge=[];e:{var ae=WN.get(a);if(ae!==void 0){var oe=Vy,rt=a;switch(a){case"keypress":if(qy(u)===0)break e;case"keydown":case"keyup":oe=UL;break;case"focusin":rt="focus",oe=l1;break;case"focusout":rt="blur",oe=l1;break;case"beforeblur":case"afterblur":oe=l1;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=CN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=AL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=LL;break;case qN:case GN:case VN:oe=SL;break;case KN:oe=$L;break;case"scroll":case"scrollend":oe=EL;break;case"wheel":oe=zL;break;case"copy":case"cut":case"paste":oe=NL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=SN;break;case"toggle":case"beforetoggle":oe=jL}var Ze=(c&4)!==0,Jt=!Ze&&(a==="scroll"||a==="scrollend"),X=Ze?ae!==null?ae+"Capture":null:ae;Ze=[];for(var Y=se,te;Y!==null;){var pe=Y;if(te=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||te===null||X===null||(pe=Qp(Y,X),pe!=null&&Ze.push(Dg(Y,pe,te))),Jt)break;Y=Y.return}0<Ze.length&&(ae=new oe(ae,rt,null,u,de),ge.push({event:ae,listeners:Ze}))}}if((c&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",oe=a==="mouseout"||a==="pointerout",ae&&u!==n1&&(rt=u.relatedTarget||u.fromElement)&&(Mh(rt)||rt[Lh]))break e;if((oe||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,oe?(rt=u.relatedTarget||u.toElement,oe=se,rt=rt?Mh(rt):null,rt!==null&&(Jt=i(rt),Ze=rt.tag,rt!==Jt||Ze!==5&&Ze!==27&&Ze!==6)&&(rt=null)):(oe=null,rt=se),oe!==rt)){if(Ze=CN,pe="onMouseLeave",X="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Ze=SN,pe="onPointerLeave",X="onPointerEnter",Y="pointer"),Jt=oe==null?ae:Yp(oe),te=rt==null?ae:Yp(rt),ae=new Ze(pe,Y+"leave",oe,u,de),ae.target=Jt,ae.relatedTarget=te,pe=null,Mh(de)===se&&(Ze=new Ze(X,Y+"enter",rt,u,de),Ze.target=te,Ze.relatedTarget=Jt,pe=Ze),Jt=pe,oe&&rt)t:{for(Ze=oe,X=rt,Y=0,te=Ze;te;te=wd(te))Y++;for(te=0,pe=X;pe;pe=wd(pe))te++;for(;0<Y-te;)Ze=wd(Ze),Y--;for(;0<te-Y;)X=wd(X),te--;for(;Y--;){if(Ze===X||X!==null&&Ze===X.alternate)break t;Ze=wd(Ze),X=wd(X)}Ze=null}else Ze=null;oe!==null&&p3(ge,ae,oe,Ze,!1),rt!==null&&Jt!==null&&p3(ge,Jt,rt,Ze,!0)}}e:{if(ae=se?Yp(se):window,oe=ae.nodeName&&ae.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ae.type==="file")var je=PN;else if(RN(ae))if(UN)je=JL;else{je=ZL;var gt=QL}else oe=ae.nodeName,!oe||oe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&t1(se.elementType)&&(je=PN):je=XL;if(je&&(je=je(a,se))){DN(ge,je,u,de);break e}gt&&gt(a,ae,se),a==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&e1(ae,"number",ae.value)}switch(gt=se?Yp(se):window,a){case"focusin":(RN(gt)||gt.contentEditable==="true")&&(Wh=gt,g1=se,sg=null);break;case"focusout":sg=g1=Wh=null;break;case"mousedown":m1=!0;break;case"contextmenu":case"mouseup":case"dragend":m1=!1,HN(ge,u,de);break;case"selectionchange":if(tM)break;case"keydown":case"keyup":HN(ge,u,de)}var Ge;if(h1)e:{switch(a){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Kh?IN(a,u)&&(Je="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(xN&&u.locale!=="ko"&&(Kh||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Kh&&(Ge=vN()):(tc=de,a1="value"in tc?tc.value:tc.textContent,Kh=!0)),gt=Pw(se,Je),0<gt.length&&(Je=new _N(Je,a,null,u,de),ge.push({event:Je,listeners:gt}),Ge?Je.data=Ge:(Ge=ON(u),Ge!==null&&(Je.data=Ge)))),(Ge=GL?VL(a,u):KL(a,u))&&(Je=Pw(se,"onBeforeInput"),0<Je.length&&(gt=new _N("onBeforeInput","beforeinput",null,u,de),ge.push({event:gt,listeners:Je}),gt.data=Ge)),LM(ge,a,se,u,de)}d3(ge,c)})}function Dg(a,c,u){return{instance:a,listener:c,currentTarget:u}}function Pw(a,c){for(var u=c+"Capture",f=[];a!==null;){var m=a,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=Qp(a,u),m!=null&&f.unshift(Dg(a,m,w)),m=Qp(a,c),m!=null&&f.push(Dg(a,m,w))),a.tag===3)return f;a=a.return}return[]}function wd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function p3(a,c,u,f,m){for(var w=c._reactName,C=[];u!==null&&u!==f;){var U=u,G=U.alternate,se=U.stateNode;if(U=U.tag,G!==null&&G===f)break;U!==5&&U!==26&&U!==27||se===null||(G=se,m?(se=Qp(u,w),se!=null&&C.unshift(Dg(u,se,G))):m||(se=Qp(u,w),se!=null&&C.push(Dg(u,se,G)))),u=u.return}C.length!==0&&a.push({event:c,listeners:C})}var zM=/\r\n?/g,HM=/\u0000|\uFFFD/g;function g3(a){return(typeof a=="string"?a:""+a).replace(zM,`
`).replace(HM,"")}function m3(a,c){return c=g3(c),g3(a)===c}function Uw(){}function Xt(a,c,u,f,m,w){switch(u){case"children":typeof f=="string"?c==="body"||c==="textarea"&&f===""||qh(a,f):(typeof f=="number"||typeof f=="bigint")&&c!=="body"&&qh(a,""+f);break;case"className":$y(a,"class",f);break;case"tabIndex":$y(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":$y(a,u,f);break;case"style":wN(a,f,w);break;case"data":if(c!=="object"){$y(a,"data",f);break}case"src":case"href":if(f===""&&(c!=="a"||u!=="href")){a.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Hy(""+f),a.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(c!=="input"&&Xt(a,c,"name",m.name,m,null),Xt(a,c,"formEncType",m.formEncType,m,null),Xt(a,c,"formMethod",m.formMethod,m,null),Xt(a,c,"formTarget",m.formTarget,m,null)):(Xt(a,c,"encType",m.encType,m,null),Xt(a,c,"method",m.method,m,null),Xt(a,c,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Hy(""+f),a.setAttribute(u,f);break;case"onClick":f!=null&&(a.onclick=Uw);break;case"onScroll":f!=null&&wt("scroll",a);break;case"onScrollEnd":f!=null&&wt("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}u=Hy(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""+f):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":f===!0?a.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,f):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(u,f):a.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(u):a.setAttribute(u,f);break;case"popover":wt("beforetoggle",a),wt("toggle",a),My(a,"popover",f);break;case"xlinkActuate":Ka(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ka(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ka(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ka(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ka(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ka(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ka(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ka(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ka(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":My(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=wL.get(u)||u,My(a,u,f))}}function $A(a,c,u,f,m,w){switch(u){case"style":wN(a,f,w);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof f=="string"?qh(a,f):(typeof f=="number"||typeof f=="bigint")&&qh(a,""+f);break;case"onScroll":f!=null&&wt("scroll",a);break;case"onScrollEnd":f!=null&&wt("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Uw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oN.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),c=u.slice(2,m?u.length-7:void 0),w=a[Jr]||null,w=w!=null?w[u]:null,typeof w=="function"&&a.removeEventListener(c,w,m),typeof f=="function")){typeof w!="function"&&w!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(c,f,m);break e}u in a?a[u]=f:f===!0?a.setAttribute(u,""):My(a,u,f)}}}function lr(a,c,u){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",a),wt("load",a);var f=!1,m=!1,w;for(w in u)if(u.hasOwnProperty(w)){var C=u[w];if(C!=null)switch(w){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Xt(a,c,w,C,u,null)}}m&&Xt(a,c,"srcSet",u.srcSet,u,null),f&&Xt(a,c,"src",u.src,u,null);return;case"input":wt("invalid",a);var U=w=C=m=null,G=null,se=null;for(f in u)if(u.hasOwnProperty(f)){var de=u[f];if(de!=null)switch(f){case"name":m=de;break;case"type":C=de;break;case"checked":G=de;break;case"defaultChecked":se=de;break;case"value":w=de;break;case"defaultValue":U=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:Xt(a,c,f,de,u,null)}}pN(a,w,U,G,se,C,m,!1),Fy(a);return;case"select":wt("invalid",a),f=C=w=null;for(m in u)if(u.hasOwnProperty(m)&&(U=u[m],U!=null))switch(m){case"value":w=U;break;case"defaultValue":C=U;break;case"multiple":f=U;default:Xt(a,c,m,U,u,null)}c=w,u=C,a.multiple=!!f,c!=null?jh(a,!!f,c,!1):u!=null&&jh(a,!!f,u,!0);return;case"textarea":wt("invalid",a),w=m=f=null;for(C in u)if(u.hasOwnProperty(C)&&(U=u[C],U!=null))switch(C){case"value":f=U;break;case"defaultValue":m=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Xt(a,c,C,U,u,null)}mN(a,f,m,w),Fy(a);return;case"option":for(G in u)if(u.hasOwnProperty(G)&&(f=u[G],f!=null))switch(G){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Xt(a,c,G,f,u,null)}return;case"dialog":wt("beforetoggle",a),wt("toggle",a),wt("cancel",a),wt("close",a);break;case"iframe":case"object":wt("load",a);break;case"video":case"audio":for(f=0;f<Rg.length;f++)wt(Rg[f],a);break;case"image":wt("error",a),wt("load",a);break;case"details":wt("toggle",a);break;case"embed":case"source":case"link":wt("error",a),wt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in u)if(u.hasOwnProperty(se)&&(f=u[se],f!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Xt(a,c,se,f,u,null)}return;default:if(t1(c)){for(de in u)u.hasOwnProperty(de)&&(f=u[de],f!==void 0&&$A(a,c,de,f,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(f=u[U],f!=null&&Xt(a,c,U,f,u,null))}function jM(a,c,u,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,C=null,U=null,G=null,se=null,de=null;for(oe in u){var ge=u[oe];if(u.hasOwnProperty(oe)&&ge!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":G=ge;default:f.hasOwnProperty(oe)||Xt(a,c,oe,null,f,ge)}}for(var ae in f){var oe=f[ae];if(ge=u[ae],f.hasOwnProperty(ae)&&(oe!=null||ge!=null))switch(ae){case"type":w=oe;break;case"name":m=oe;break;case"checked":se=oe;break;case"defaultChecked":de=oe;break;case"value":C=oe;break;case"defaultValue":U=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,c));break;default:oe!==ge&&Xt(a,c,ae,oe,f,ge)}}Jv(a,C,U,G,se,de,w,m);return;case"select":oe=C=U=ae=null;for(w in u)if(G=u[w],u.hasOwnProperty(w)&&G!=null)switch(w){case"value":break;case"multiple":oe=G;default:f.hasOwnProperty(w)||Xt(a,c,w,null,f,G)}for(m in f)if(w=f[m],G=u[m],f.hasOwnProperty(m)&&(w!=null||G!=null))switch(m){case"value":ae=w;break;case"defaultValue":U=w;break;case"multiple":C=w;default:w!==G&&Xt(a,c,m,w,f,G)}c=U,u=C,f=oe,ae!=null?jh(a,!!u,ae,!1):!!f!=!!u&&(c!=null?jh(a,!!u,c,!0):jh(a,!!u,u?[]:"",!1));return;case"textarea":oe=ae=null;for(U in u)if(m=u[U],u.hasOwnProperty(U)&&m!=null&&!f.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Xt(a,c,U,null,f,m)}for(C in f)if(m=f[C],w=u[C],f.hasOwnProperty(C)&&(m!=null||w!=null))switch(C){case"value":ae=m;break;case"defaultValue":oe=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&Xt(a,c,C,m,f,w)}gN(a,ae,oe);return;case"option":for(var rt in u)if(ae=u[rt],u.hasOwnProperty(rt)&&ae!=null&&!f.hasOwnProperty(rt))switch(rt){case"selected":a.selected=!1;break;default:Xt(a,c,rt,null,f,ae)}for(G in f)if(ae=f[G],oe=u[G],f.hasOwnProperty(G)&&ae!==oe&&(ae!=null||oe!=null))switch(G){case"selected":a.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Xt(a,c,G,ae,f,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in u)ae=u[Ze],u.hasOwnProperty(Ze)&&ae!=null&&!f.hasOwnProperty(Ze)&&Xt(a,c,Ze,null,f,ae);for(se in f)if(ae=f[se],oe=u[se],f.hasOwnProperty(se)&&ae!==oe&&(ae!=null||oe!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,c));break;default:Xt(a,c,se,ae,f,oe)}return;default:if(t1(c)){for(var Jt in u)ae=u[Jt],u.hasOwnProperty(Jt)&&ae!==void 0&&!f.hasOwnProperty(Jt)&&$A(a,c,Jt,void 0,f,ae);for(de in f)ae=f[de],oe=u[de],!f.hasOwnProperty(de)||ae===oe||ae===void 0&&oe===void 0||$A(a,c,de,ae,f,oe);return}}for(var X in u)ae=u[X],u.hasOwnProperty(X)&&ae!=null&&!f.hasOwnProperty(X)&&Xt(a,c,X,null,f,ae);for(ge in f)ae=f[ge],oe=u[ge],!f.hasOwnProperty(ge)||ae===oe||ae==null&&oe==null||Xt(a,c,ge,ae,f,oe)}var FA=null,zA=null;function kw(a){return a.nodeType===9?a:a.ownerDocument}function y3(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w3(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function HA(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var jA=null;function qM(){var a=window.event;return a&&a.type==="popstate"?a===jA?!1:(jA=a,!0):(jA=null,!1)}var b3=typeof setTimeout=="function"?setTimeout:void 0,GM=typeof clearTimeout=="function"?clearTimeout:void 0,E3=typeof Promise=="function"?Promise:void 0,VM=typeof queueMicrotask=="function"?queueMicrotask:typeof E3<"u"?function(a){return E3.resolve(null).then(a).catch(KM)}:b3;function KM(a){setTimeout(function(){throw a})}function yc(a){return a==="head"}function v3(a,c){var u=c,f=0,m=0;do{var w=u.nextSibling;if(a.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<f&&8>f){u=f;var C=a.ownerDocument;if(u&1&&Pg(C.documentElement),u&2&&Pg(C.body),u&4)for(u=C.head,Pg(u),C=u.firstChild;C;){var U=C.nextSibling,G=C.nodeName;C[Wp]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=U}}if(m===0){a.removeChild(w),zg(c);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:f=u.charCodeAt(0)-48;else f=0;u=w}while(u);zg(c)}function qA(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var u=c;switch(c=c.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":qA(u),Yv(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function WM(a,c,u,f){for(;a.nodeType===1;){var m=u;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Wp])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=Ii(a.nextSibling),a===null)break}return null}function YM(a,c,u){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Ii(a.nextSibling),a===null))return null;return a}function GA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function QM(a,c){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")c();else{var f=function(){c(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Ii(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var VA=null;function A3(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(c===0)return a;c--}else u==="/$"&&c++}a=a.previousSibling}return null}function C3(a,c,u){switch(c=kw(u),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Pg(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Yv(a)}var ii=new Map,_3=new Set;function Bw(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var oo=L.d;L.d={f:ZM,r:XM,D:JM,C:e9,L:t9,m:n9,X:s9,S:r9,M:i9};function ZM(){var a=oo.f(),c=Nw();return a||c}function XM(a){var c=$h(a);c!==null&&c.tag===5&&c.type==="form"?qT(c):oo.r(a)}var bd=typeof document>"u"?null:document;function S3(a,c,u){var f=bd;if(f&&typeof c=="string"&&c){var m=Xs(c);m='link[rel="'+a+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),_3.has(m)||(_3.add(m),a={rel:a,crossOrigin:u,href:c},f.querySelector(m)===null&&(c=f.createElement("link"),lr(c,"link",a),Vn(c),f.head.appendChild(c)))}}function JM(a){oo.D(a),S3("dns-prefetch",a,null)}function e9(a,c){oo.C(a,c),S3("preconnect",a,c)}function t9(a,c,u){oo.L(a,c,u);var f=bd;if(f&&a&&c){var m='link[rel="preload"][as="'+Xs(c)+'"]';c==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Xs(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Xs(u.imageSizes)+'"]')):m+='[href="'+Xs(a)+'"]';var w=m;switch(c){case"style":w=Ed(a);break;case"script":w=vd(a)}ii.has(w)||(a=p({rel:"preload",href:c==="image"&&u&&u.imageSrcSet?void 0:a,as:c},u),ii.set(w,a),f.querySelector(m)!==null||c==="style"&&f.querySelector(Ug(w))||c==="script"&&f.querySelector(kg(w))||(c=f.createElement("link"),lr(c,"link",a),Vn(c),f.head.appendChild(c)))}}function n9(a,c){oo.m(a,c);var u=bd;if(u&&a){var f=c&&typeof c.as=="string"?c.as:"script",m='link[rel="modulepreload"][as="'+Xs(f)+'"][href="'+Xs(a)+'"]',w=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=vd(a)}if(!ii.has(w)&&(a=p({rel:"modulepreload",href:a},c),ii.set(w,a),u.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(kg(w)))return}f=u.createElement("link"),lr(f,"link",a),Vn(f),u.head.appendChild(f)}}}function r9(a,c,u){oo.S(a,c,u);var f=bd;if(f&&a){var m=Fh(f).hoistableStyles,w=Ed(a);c=c||"default";var C=m.get(w);if(!C){var U={loading:0,preload:null};if(C=f.querySelector(Ug(w)))U.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":c},u),(u=ii.get(w))&&KA(a,u);var G=C=f.createElement("link");Vn(G),lr(G,"link",a),G._p=new Promise(function(se,de){G.onload=se,G.onerror=de}),G.addEventListener("load",function(){U.loading|=1}),G.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Lw(C,c,f)}C={type:"stylesheet",instance:C,count:1,state:U},m.set(w,C)}}}function s9(a,c){oo.X(a,c);var u=bd;if(u&&a){var f=Fh(u).hoistableScripts,m=vd(a),w=f.get(m);w||(w=u.querySelector(kg(m)),w||(a=p({src:a,async:!0},c),(c=ii.get(m))&&WA(a,c),w=u.createElement("script"),Vn(w),lr(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},f.set(m,w))}}function i9(a,c){oo.M(a,c);var u=bd;if(u&&a){var f=Fh(u).hoistableScripts,m=vd(a),w=f.get(m);w||(w=u.querySelector(kg(m)),w||(a=p({src:a,async:!0,type:"module"},c),(c=ii.get(m))&&WA(a,c),w=u.createElement("script"),Vn(w),lr(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},f.set(m,w))}}function x3(a,c,u,f){var m=(m=me.current)?Bw(m):null;if(!m)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(c=Ed(u.href),u=Fh(m).hoistableStyles,f=u.get(c),f||(f={type:"style",instance:null,count:0,state:null},u.set(c,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=Ed(u.href);var w=Fh(m).hoistableStyles,C=w.get(a);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,C),(w=m.querySelector(Ug(a)))&&!w._p&&(C.instance=w,C.state.loading=5),ii.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ii.set(a,u),w||a9(m,a,u,C.state))),c&&f===null)throw Error(r(528,""));return C}if(c&&f!==null)throw Error(r(529,""));return null;case"script":return c=u.async,u=u.src,typeof u=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=vd(u),u=Fh(m).hoistableScripts,f=u.get(c),f||(f={type:"script",instance:null,count:0,state:null},u.set(c,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Ed(a){return'href="'+Xs(a)+'"'}function Ug(a){return'link[rel="stylesheet"]['+a+"]"}function N3(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function a9(a,c,u,f){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?f.loading=1:(c=a.createElement("link"),f.preload=c,c.addEventListener("load",function(){return f.loading|=1}),c.addEventListener("error",function(){return f.loading|=2}),lr(c,"link",u),Vn(c),a.head.appendChild(c))}function vd(a){return'[src="'+Xs(a)+'"]'}function kg(a){return"script[async]"+a}function T3(a,c,u){if(c.count++,c.instance===null)switch(c.type){case"style":var f=a.querySelector('style[data-href~="'+Xs(u.href)+'"]');if(f)return c.instance=f,Vn(f),f;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Vn(f),lr(f,"style",m),Lw(f,u.precedence,a),c.instance=f;case"stylesheet":m=Ed(u.href);var w=a.querySelector(Ug(m));if(w)return c.state.loading|=4,c.instance=w,Vn(w),w;f=N3(u),(m=ii.get(m))&&KA(f,m),w=(a.ownerDocument||a).createElement("link"),Vn(w);var C=w;return C._p=new Promise(function(U,G){C.onload=U,C.onerror=G}),lr(w,"link",f),c.state.loading|=4,Lw(w,u.precedence,a),c.instance=w;case"script":return w=vd(u.src),(m=a.querySelector(kg(w)))?(c.instance=m,Vn(m),m):(f=u,(m=ii.get(w))&&(f=p({},u),WA(f,m)),a=a.ownerDocument||a,m=a.createElement("script"),Vn(m),lr(m,"link",f),a.head.appendChild(m),c.instance=m);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(f=c.instance,c.state.loading|=4,Lw(f,u.precedence,a));return c.instance}function Lw(a,c,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,w=m,C=0;C<f.length;C++){var U=f[C];if(U.dataset.precedence===c)w=U;else if(w!==m)break}w?w.parentNode.insertBefore(a,w.nextSibling):(c=u.nodeType===9?u.head:u,c.insertBefore(a,c.firstChild))}function KA(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function WA(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Mw=null;function I3(a,c,u){if(Mw===null){var f=new Map,m=Mw=new Map;m.set(u,f)}else m=Mw,f=m.get(u),f||(f=new Map,m.set(u,f));if(f.has(a))return f;for(f.set(a,null),u=u.getElementsByTagName(a),m=0;m<u.length;m++){var w=u[m];if(!(w[Wp]||w[Ar]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(c)||"";C=a+C;var U=f.get(C);U?U.push(w):f.set(C,[w])}}return f}function O3(a,c,u){a=a.ownerDocument||a,a.head.insertBefore(u,c==="title"?a.querySelector("head > title"):null)}function o9(a,c,u){if(u===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function R3(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Bg=null;function c9(){}function l9(a,c,u){if(Bg===null)throw Error(r(475));var f=Bg;if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=Ed(u.href),w=a.querySelector(Ug(m));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=$w.bind(f),a.then(f,f)),c.state.loading|=4,c.instance=w,Vn(w);return}w=a.ownerDocument||a,u=N3(u),(m=ii.get(m))&&KA(u,m),w=w.createElement("link"),Vn(w);var C=w;C._p=new Promise(function(U,G){C.onload=U,C.onerror=G}),lr(w,"link",u),c.instance=w}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(f.count++,c=$w.bind(f),a.addEventListener("load",c),a.addEventListener("error",c))}}function u9(){if(Bg===null)throw Error(r(475));var a=Bg;return a.stylesheets&&a.count===0&&YA(a,a.stylesheets),0<a.count?function(c){var u=setTimeout(function(){if(a.stylesheets&&YA(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(u)}}:null}function $w(){if(this.count--,this.count===0){if(this.stylesheets)YA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Fw=null;function YA(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Fw=new Map,c.forEach(h9,a),Fw=null,$w.call(a))}function h9(a,c){if(!(c.state.loading&4)){var u=Fw.get(a);if(u)var f=u.get(null);else{u=new Map,Fw.set(a,u);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var C=m[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),f=C)}f&&u.set(null,f)}m=c.instance,C=m.getAttribute("data-precedence"),w=u.get(C)||f,w===f&&u.set(null,m),u.set(C,m),this.count++,f=$w.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),w?w.parentNode.insertBefore(m,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),c.state.loading|=4}}var Lg={$$typeof:N,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function d9(a,c,u,f,m,w,C,U){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gv(0),this.hiddenUpdates=Gv(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function D3(a,c,u,f,m,w,C,U,G,se,de,ge){return a=new d9(a,c,u,C,U,G,se,ge),c=1,w===!0&&(c|=24),w=Ns(3,null,null,c),a.current=w,w.stateNode=a,c=O1(),c.refCount++,a.pooledCache=c,c.refCount++,w.memoizedState={element:f,isDehydrated:u,cache:c},U1(w),a}function P3(a){return a?(a=Xh,a):Xh}function U3(a,c,u,f,m,w){m=P3(m),f.context===null?f.context=m:f.pendingContext=m,f=sc(c),f.payload={element:u},w=w===void 0?null:w,w!==null&&(f.callback=w),u=ic(a,f,c),u!==null&&(Ds(u,a,c),fg(u,a,c))}function k3(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<c?u:c}}function QA(a,c){k3(a,c),(a=a.alternate)&&k3(a,c)}function B3(a){if(a.tag===13){var c=Zh(a,67108864);c!==null&&Ds(c,a,67108864),QA(a,67108864)}}var zw=!0;function f9(a,c,u,f){var m=_.T;_.T=null;var w=L.p;try{L.p=2,ZA(a,c,u,f)}finally{L.p=w,_.T=m}}function p9(a,c,u,f){var m=_.T;_.T=null;var w=L.p;try{L.p=8,ZA(a,c,u,f)}finally{L.p=w,_.T=m}}function ZA(a,c,u,f){if(zw){var m=XA(f);if(m===null)MA(a,c,f,Hw,u),M3(a,f);else if(m9(m,a,c,u,f))f.stopPropagation();else if(M3(a,f),c&4&&-1<g9.indexOf(a)){for(;m!==null;){var w=$h(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Pl(w.pendingLanes);if(C!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;C;){var G=1<<31-Lr(C);U.entanglements[1]|=G,C&=~G}la(w),(qt&6)===0&&(Sw=Qs()+500,Og(0))}}break;case 13:U=Zh(w,2),U!==null&&Ds(U,w,2),Nw(),QA(w,2)}if(w=XA(f),w===null&&MA(a,c,f,Hw,u),w===m)break;m=w}m!==null&&f.stopPropagation()}else MA(a,c,f,null,u)}}function XA(a){return a=r1(a),JA(a)}var Hw=null;function JA(a){if(Hw=null,a=Mh(a),a!==null){var c=i(a);if(c===null)a=null;else{var u=c.tag;if(u===13){if(a=o(c),a!==null)return a;a=null}else if(u===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Hw=a,null}function L3(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jv()){case jp:return 2;case qp:return 8;case Xo:case Dy:return 32;case Gp:return 268435456;default:return 32}default:return 32}}var eC=!1,wc=null,bc=null,Ec=null,Mg=new Map,$g=new Map,vc=[],g9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M3(a,c){switch(a){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":Ec=null;break;case"pointerover":case"pointerout":Mg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":$g.delete(c.pointerId)}}function Fg(a,c,u,f,m,w){return a===null||a.nativeEvent!==w?(a={blockedOn:c,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},c!==null&&(c=$h(c),c!==null&&B3(c)),a):(a.eventSystemFlags|=f,c=a.targetContainers,m!==null&&c.indexOf(m)===-1&&c.push(m),a)}function m9(a,c,u,f,m){switch(c){case"focusin":return wc=Fg(wc,a,c,u,f,m),!0;case"dragenter":return bc=Fg(bc,a,c,u,f,m),!0;case"mouseover":return Ec=Fg(Ec,a,c,u,f,m),!0;case"pointerover":var w=m.pointerId;return Mg.set(w,Fg(Mg.get(w)||null,a,c,u,f,m)),!0;case"gotpointercapture":return w=m.pointerId,$g.set(w,Fg($g.get(w)||null,a,c,u,f,m)),!0}return!1}function $3(a){var c=Mh(a.target);if(c!==null){var u=i(c);if(u!==null){if(c=u.tag,c===13){if(c=o(u),c!==null){a.blockedOn=c,lL(a.priority,function(){if(u.tag===13){var f=Rs();f=Vv(f);var m=Zh(u,f);m!==null&&Ds(m,u,f),QA(u,f)}});return}}else if(c===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function jw(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var u=XA(a.nativeEvent);if(u===null){u=a.nativeEvent;var f=new u.constructor(u.type,u);n1=f,u.target.dispatchEvent(f),n1=null}else return c=$h(u),c!==null&&B3(c),a.blockedOn=u,!1;c.shift()}return!0}function F3(a,c,u){jw(a)&&u.delete(c)}function y9(){eC=!1,wc!==null&&jw(wc)&&(wc=null),bc!==null&&jw(bc)&&(bc=null),Ec!==null&&jw(Ec)&&(Ec=null),Mg.forEach(F3),$g.forEach(F3)}function qw(a,c){a.blockedOn===c&&(a.blockedOn=null,eC||(eC=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,y9)))}var Gw=null;function z3(a){Gw!==a&&(Gw=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gw===a&&(Gw=null);for(var c=0;c<a.length;c+=3){var u=a[c],f=a[c+1],m=a[c+2];if(typeof f!="function"){if(JA(f||u)===null)continue;break}var w=$h(u);w!==null&&(a.splice(c,3),c-=3,J1(w,{pending:!0,data:m,method:u.method,action:f},f,m))}}))}function zg(a){function c(G){return qw(G,a)}wc!==null&&qw(wc,a),bc!==null&&qw(bc,a),Ec!==null&&qw(Ec,a),Mg.forEach(c),$g.forEach(c);for(var u=0;u<vc.length;u++){var f=vc[u];f.blockedOn===a&&(f.blockedOn=null)}for(;0<vc.length&&(u=vc[0],u.blockedOn===null);)$3(u),u.blockedOn===null&&vc.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var m=u[f],w=u[f+1],C=m[Jr]||null;if(typeof w=="function")C||z3(u);else if(C){var U=null;if(w&&w.hasAttribute("formAction")){if(m=w,C=w[Jr]||null)U=C.formAction;else if(JA(m)!==null)continue}else U=C.action;typeof U=="function"?u[f+1]=U:(u.splice(f,3),f-=3),z3(u)}}}function tC(a){this._internalRoot=a}Vw.prototype.render=tC.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var u=c.current,f=Rs();U3(u,f,a,c,null,null)},Vw.prototype.unmount=tC.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;U3(a.current,2,null,a,null,null),Nw(),c[Lh]=null}};function Vw(a){this._internalRoot=a}Vw.prototype.unstable_scheduleHydration=function(a){if(a){var c=sN();a={blockedOn:null,target:a,priority:c};for(var u=0;u<vc.length&&c!==0&&c<vc[u].priority;u++);vc.splice(u,0,a),u===0&&$3(a)}};var H3=e.version;if(H3!=="19.1.0")throw Error(r(527,H3,"19.1.0"));L.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var w9={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kw.isDisabled&&Kw.supportsFiber)try{Jo=Kw.inject(w9),Br=Kw}catch{}}return qg.createRoot=function(a,c){if(!s(a))throw Error(r(299));var u=!1,f="",m=sI,w=iI,C=aI,U=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(f=c.identifierPrefix),c.onUncaughtError!==void 0&&(m=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks)),c=D3(a,1,!1,null,null,u,f,m,w,C,U,null),a[Lh]=c.current,LA(a),new tC(c)},qg.hydrateRoot=function(a,c,u){if(!s(a))throw Error(r(299));var f=!1,m="",w=sI,C=iI,U=aI,G=null,se=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(G=u.unstable_transitionCallbacks),u.formState!==void 0&&(se=u.formState)),c=D3(a,1,!0,c,u??null,f,m,w,C,U,G,se),c.context=P3(null),u=c.current,f=Rs(),f=Vv(f),m=sc(f),m.callback=null,ic(u,m,f),u=f,c.current.lanes=u,Kp(c,u),la(c),a[Lh]=c.current,LA(a),new Vw(c)},qg.version="19.1.0",qg}var J3;function R9(){if(J3)return iC.exports;J3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iC.exports=O9(),iC.exports}var D9=R9();const u5="/captcha-frontend-test/logo.svg",h5="/captcha-frontend-test/secret_logo.svg",d5="/captcha-frontend-test/quex_logo.svg",ev="https://tdx-pool.kaeru.gg";async function eO(n,e,t){const r=await fetch(`${ev}/api/challenges`,{method:"POST",body:JSON.stringify({address:n,chainId:e.toString()}),signal:t});if(!r.ok)throw new Error(`Error creating challenge: ${r.statusText}`);return r.json()}async function P9(n){const e=await fetch(`${ev}/api/challenges/${n.id}`,{method:"DELETE",body:JSON.stringify({address:"example"})});if(!e.ok)throw new Error(`Error deleting challenge: ${e.statusText}`)}async function U9(n,e,t){return(await fetch(`${ev}/api/challenges/${n}/${e}/validate`,{method:"POST",body:JSON.stringify({solution:t})})).ok}async function k9(n,e,t){const r=await fetch(`${ev}/api/challenges/${n}/submit`,{method:"POST",body:JSON.stringify({solutions:e,userData:B9(t)})});if(!r.ok)return null;const s=await r.json(),i=r.headers.get("Quex-TD-Id");return i&&(s.tdId=BigInt(i)),s}function B9(n){if("toBase64"in n&&typeof n.toBase64=="function")return n.toBase64();let e="";for(const t of n)e+=String.fromCharCode(t);return btoa(e)}var lC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var tO;function L9(){return tO||(tO=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=s(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return t.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)e.call(i,l)&&i[l]&&(o=s(o,l));return o}function s(i,o){return o?i?i+" "+o:i+o:i}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(lC)),lC.exports}var M9=L9();const Es=iy(M9);function Np(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var $9=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_iconBlock__Y1IUb {
  flex: 1;
}
.index-module_dots__2OJFw {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
}
.index-module_dots__2OJFw .dot {
  position: absolute;
  z-index: 2;
  width: 22px;
  height: 22px;
  color: var(--go-captcha-theme-dot-color);
  background: var(--go-captcha-theme-dot-bg-color);
  border: 3px solid #f7f9fb;
  border-color: var(--go-captcha-theme-dot-border-color);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 22px;
  cursor: default;
}
`,nO={iconBlock:"index-module_iconBlock__Y1IUb",dots:"index-module_dots__2OJFw"};Np($9);var F9=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
:root {
  --go-captcha-theme-text-color: #333333;
  --go-captcha-theme-bg-color: #ffffff;
  --go-captcha-theme-btn-color: #ffffff;
  --go-captcha-theme-btn-disabled-color: #749ff9;
  --go-captcha-theme-btn-bg-color: #4e87ff;
  --go-captcha-theme-btn-border-color: #4e87ff;
  --go-captcha-theme-active-color: #3e7cff;
  --go-captcha-theme-border-color: rgba(206, 223, 254, 0.5);
  --go-captcha-theme-icon-color: #3C3C3C;
  --go-captcha-theme-drag-bar-color: #e0e0e0;
  --go-captcha-theme-drag-bg-color: #3e7cff;
  --go-captcha-theme-drag-icon-color: #ffffff;
  --go-captcha-theme-round-color: #e0e0e0;
  --go-captcha-theme-loading-icon-color: #3e7cff;
  --go-captcha-theme-body-bg-color: #34383e;
  --go-captcha-theme-dot-color: #cedffe;
  --go-captcha-theme-dot-bg-color: #3e7cff;
  --go-captcha-theme-dot-border-color: #f7f9fb;
  --go-captcha-theme-default-color: #3e7cff;
  --go-captcha-theme-default-bg-color: #ecf5ff;
  --go-captcha-theme-default-border-color: #3e7cff;
  --go-captcha-theme-default-hover-color: #e0efff;
  --go-captcha-theme-error-color: #ed4630;
  --go-captcha-theme-error-bg-color: #fef0f0;
  --go-captcha-theme-error-border-color: #ff5a34;
  --go-captcha-theme-warn-color: #ffa000;
  --go-captcha-theme-warn-bg-color: #fdf6ec;
  --go-captcha-theme-warn-border-color: #ffbe09;
  --go-captcha-theme-success-color: #5eaa2f;
  --go-captcha-theme-success-bg-color: #f0f9eb;
  --go-captcha-theme-success-border-color: #8bc640;
}
.gocaptcha-module_wrapper__Kpdey {
  padding: 12px 16px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  box-sizing: border-box;
}
.gocaptcha-module_theme__h-Ytl {
  border: 1px solid rgba(206, 223, 254, 0.5);
  border-color: var(--go-captcha-theme-border-color);
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(100, 100, 100, 0.1);
  -webkit-box-shadow: 0 0 20px rgba(100, 100, 100, 0.1);
  -moz-box-shadow: 0 0 20px rgba(100, 100, 100, 0.1);
  background-color: var(--go-captcha-theme-bg-color);
}
.gocaptcha-module_header__LjDUC {
  height: 36px;
  width: 100%;
  font-size: 15px;
  color: var(--go-captcha-theme-text-color);
  display: flex;
  align-items: center;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.gocaptcha-module_header__LjDUC span {
  flex: 1;
  padding-right: 5px;
}
.gocaptcha-module_header__LjDUC em {
  padding: 0 3px;
  font-weight: bold;
  color: var(--go-captcha-theme-active-color);
  font-style: normal;
}
.gocaptcha-module_body__KJKNu {
  position: relative;
  width: 100%;
  margin-top: 10px;
  display: flex;
  background: var(--go-captcha-theme-body-bg-color);
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  overflow: hidden;
}
.gocaptcha-module_bodyInner__jahqH {
  position: relative;
  background: var(--go-captcha-theme-body-bg-color);
}
.gocaptcha-module_picture__LRwbY {
  position: relative;
  z-index: 2;
  width: 100%;
}
.gocaptcha-module_hide__TUOZE {
  visibility: hidden;
}
.gocaptcha-module_loading__Y-PYK {
  position: absolute;
  z-index: 1;
  top: 50%;
  left: 50%;
  width: 68px;
  height: 68px;
  margin-left: -34px;
  margin-top: -34px;
  line-height: 68px;
  text-align: center;
  display: flex;
  align-content: center;
  justify-content: center;
}
.gocaptcha-module_loading__Y-PYK svg,
.gocaptcha-module_loading__Y-PYK circle {
  color: var(--go-captcha-theme-loading-icon-color);
  fill: var(--go-captcha-theme-loading-icon-color);
}
.gocaptcha-module_footer__Ywdpy {
  width: 100%;
  height: 50px;
  color: #34383e;
  display: flex;
  align-items: center;
  padding-top: 10px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.gocaptcha-module_iconBlock__mVB8B {
  display: flex;
  align-items: center;
}
.gocaptcha-module_iconBlock__mVB8B svg {
  color: var(--go-captcha-theme-icon-color);
  fill: var(--go-captcha-theme-icon-color);
  margin: 0 5px;
  cursor: pointer;
}
.gocaptcha-module_buttonBlock__EZ4vg {
  width: 120px;
  height: 40px;
}
.gocaptcha-module_buttonBlock__EZ4vg button {
  width: 100%;
  height: 40px;
  text-align: center;
  padding: 9px 15px;
  font-size: 15px;
  border-radius: 5px;
  display: inline-block;
  line-height: 1;
  white-space: nowrap;
  cursor: pointer;
  color: var(--go-captcha-theme-btn-color);
  background-color: var(--go-captcha-theme-btn-bg-color);
  border: 1px solid transparent;
  border-color: var(--go-captcha-theme-btn-bg-color);
  -webkit-appearance: none;
  box-sizing: border-box;
  outline: none;
  margin: 0;
  transition: 0.1s;
  font-weight: 500;
  -moz-user-select: none;
  -webkit-user-select: none;
}
.gocaptcha-module_buttonBlock__EZ4vg button.disabled {
  pointer-events: none;
  background-color: var(--go-captcha-theme-btn-disabled-color);
  border-color: var(--go-captcha-theme-btn-disabled-color);
}
.gocaptcha-module_dragSlideBar__noauW {
  width: 100%;
  height: 100%;
  position: relative;
  touch-action: none;
}
.gocaptcha-module_dragLine__3B9KR {
  position: absolute;
  height: 14px;
  background-color: var(--go-captcha-theme-drag-bar-color);
  left: 0;
  right: 0;
  top: 50%;
  margin-top: -7px;
  border-radius: 7px;
}
.gocaptcha-module_dragBlock__bFlwx {
  position: absolute;
  left: 0;
  top: 50%;
  margin-top: -20px;
  width: 82px;
  height: 40px;
  z-index: 2;
  background-color: var(--go-captcha-theme-drag-bg-color);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  border-radius: 24px;
  box-shadow: 0 0 20px rgba(100, 100, 100, 0.35);
  -webkit-box-shadow: 0 0 20px rgba(100, 100, 100, 0.35);
  -moz-box-shadow: 0 0 20px rgba(100, 100, 100, 0.35);
}
.gocaptcha-module_dragBlock__bFlwx svg {
  color: var(--go-captcha-theme-drag-icon-color);
  fill: var(--go-captcha-theme-drag-icon-color);
}
.gocaptcha-module_disabled__4kN6w {
  pointer-events: none;
  background-color: var(--go-captcha-theme-btn-disabled-color);
  border-color: var(--go-captcha-theme-btn-disabled-color);
}
.gocaptcha-module_dragBlockInline__PpF3f {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
`,Ye={wrapper:"gocaptcha-module_wrapper__Kpdey",theme:"gocaptcha-module_theme__h-Ytl",header:"gocaptcha-module_header__LjDUC",body:"gocaptcha-module_body__KJKNu",bodyInner:"gocaptcha-module_bodyInner__jahqH",picture:"gocaptcha-module_picture__LRwbY",hide:"gocaptcha-module_hide__TUOZE",loading:"gocaptcha-module_loading__Y-PYK",footer:"gocaptcha-module_footer__Ywdpy",iconBlock:"gocaptcha-module_iconBlock__mVB8B",buttonBlock:"gocaptcha-module_buttonBlock__EZ4vg",dragSlideBar:"gocaptcha-module_dragSlideBar__noauW",dragLine:"gocaptcha-module_dragLine__3B9KR",dragBlock:"gocaptcha-module_dragBlock__bFlwx",disabled:"gocaptcha-module_disabled__4kN6w",dragBlockInline:"gocaptcha-module_dragBlockInline__PpF3f"};Np(F9);const z9=()=>({width:300,height:220,thumbWidth:150,thumbHeight:40,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请在下图依次点击",buttonText:"确认",iconSize:22,dotSize:24}),tv=n=>fe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:26,height:26},n),fe.createElement("path",{d:`M100.1,189.9C100.1,189.9,100,189.9,100.1,189.9c-49.7,0-90-40.4-90-89.9c0-49.6,40.4-89.9,89.9-89.9
		c49.6,0,89.9,40.4,89.9,89.9c0,18.2-5.4,35.7-15.6,50.7c-1.5,2.1-3.6,3.4-6.1,3.9c-2.5,0.4-5-0.1-7-1.6c-4.2-3-5.3-8.6-2.4-12.9
		c8.1-11.9,12.4-25.7,12.4-40.1c0-39.2-31.9-71.1-71.1-71.1c-39.2,0-71.1,31.9-71.1,71.1c0,39.2,31.9,71.1,71.1,71.1
		c7.7,0,15.3-1.2,22.6-3.6c2.4-0.8,4.9-0.6,7.2,0.5c2.2,1.1,3.9,3.1,4.7,5.5c1.6,4.9-1,10.2-5.9,11.9
		C119.3,188.4,109.8,189.9,100.1,189.9z M73,136.4C73,136.4,73,136.4,73,136.4c-2.5,0-4.9-1-6.7-2.8c-3.7-3.7-3.7-9.6,0-13.3
		L86.7,100L66.4,79.7c-3.7-3.7-3.7-9.6,0-13.3c3.7-3.7,9.6-3.7,13.3,0L100,86.7l20.3-20.3c1.8-1.8,4.1-2.8,6.7-2.8c0,0,0,0,0,0
		c2.5,0,4.9,1,6.7,2.8c1.8,1.8,2.8,4.1,2.8,6.7c0,2.5-1,4.9-2.8,6.7L113.3,100l20.3,20.3c3.7,3.7,3.7,9.6,0,13.3
		c-3.7,3.7-9.6,3.7-13.3,0L100,113.3l-20.3,20.3C77.9,135.4,75.5,136.4,73,136.4z`})),nv=n=>fe.createElement("svg",Object.assign({width:26,height:26},n,{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"}),fe.createElement("path",{d:`M135,149.9c-10.7,7.6-23.2,11.4-36,11.2c-1.7,0-3.4-0.1-5-0.3c-0.7-0.1-1.4-0.2-2-0.3c-1.3-0.2-2.6-0.4-3.9-0.6
	c-0.8-0.2-1.6-0.4-2.3-0.5c-1.2-0.3-2.5-0.6-3.7-1c-0.6-0.2-1.2-0.4-1.7-0.6c-1.4-0.5-2.8-1-4.2-1.5c-0.3-0.1-0.6-0.3-0.9-0.4
	c-1.6-0.7-3.2-1.4-4.7-2.3c-0.1,0-0.1-0.1-0.2-0.1c-5.1-2.9-9.8-6.4-14-10.6c-0.1-0.1-0.1-0.1-0.2-0.2c-1.3-1.3-2.5-2.7-3.7-4.1
	c-0.2-0.3-0.5-0.6-0.7-0.9c-8.4-10.6-13.5-24.1-13.5-38.8h14.3c0.4,0,0.7-0.2,0.9-0.5c0.2-0.3,0.2-0.8,0-1.1L29.5,60.9
	c-0.2-0.3-0.5-0.5-0.9-0.5c-0.4,0-0.7,0.2-0.9,0.5L3.8,97.3c-0.2,0.3-0.2,0.7,0,1.1c0.2,0.3,0.5,0.5,0.9,0.5h14.3
	c0,17.2,5.3,33.2,14.3,46.4c0.1,0.2,0.2,0.4,0.3,0.6c0.9,1.4,2,2.6,3,3.9c0.4,0.5,0.7,1,1.1,1.5c1.5,1.8,3,3.5,4.6,5.2
	c0.2,0.2,0.3,0.3,0.5,0.5c5.4,5.5,11.5,10.1,18.2,13.8c0.2,0.1,0.3,0.2,0.5,0.3c1.9,1,3.9,2,5.9,2.9c0.5,0.2,1,0.5,1.5,0.7
	c1.7,0.7,3.5,1.3,5.2,1.9c0.8,0.3,1.7,0.6,2.5,0.8c1.5,0.5,3.1,0.8,4.7,1.2c1.1,0.2,2.1,0.5,3.2,0.7c0.4,0.1,0.9,0.2,1.3,0.3
	c1.5,0.3,3,0.4,4.5,0.6c0.5,0.1,1.1,0.2,1.6,0.2c2.7,0.3,5.4,0.4,8.1,0.4c16.4,0,32.5-5.1,46.2-14.8c4.4-3.1,5.5-9.2,2.4-13.7
	C145.5,147.8,139.4,146.7,135,149.9 M180.6,98.9c0-17.2-5.3-33.1-14.2-46.3c-0.1-0.2-0.2-0.5-0.4-0.7c-1.1-1.6-2.3-3.1-3.5-4.6
	c-0.1-0.2-0.3-0.4-0.4-0.6c-8.2-10.1-18.5-17.9-30.2-23c-0.3-0.1-0.6-0.3-1-0.4c-1.9-0.8-3.8-1.5-5.7-2.1c-0.7-0.2-1.4-0.5-2.1-0.7
	c-1.7-0.5-3.4-0.9-5.1-1.3c-0.9-0.2-1.9-0.5-2.8-0.7c-0.5-0.1-0.9-0.2-1.4-0.3c-1.3-0.2-2.6-0.3-3.8-0.5c-0.9-0.1-1.8-0.3-2.6-0.3
	c-2.1-0.2-4.3-0.3-6.4-0.3c-0.4,0-0.8-0.1-1.2-0.1c-0.1,0-0.1,0-0.2,0c-16.4,0-32.4,5-46.2,14.8C49,35,48,41.1,51,45.6
	c3.1,4.4,9.1,5.5,13.5,2.4c10.6-7.5,23-11.3,35.7-11.2c1.8,0,3.6,0.1,5.4,0.3c0.6,0.1,1.1,0.1,1.6,0.2c1.5,0.2,2.9,0.4,4.3,0.7
	c0.6,0.1,1.3,0.3,1.9,0.4c1.4,0.3,2.8,0.7,4.2,1.1c0.4,0.1,0.9,0.3,1.3,0.4c1.6,0.5,3.1,1.1,4.6,1.7c0.2,0.1,0.3,0.1,0.5,0.2
	c9,3.9,17,10,23.2,17.6c0,0,0.1,0.1,0.1,0.2c8.7,10.7,14,24.5,14,39.4H147c-0.4,0-0.7,0.2-0.9,0.5c-0.2,0.3-0.2,0.8,0,1.1l24,36.4
	c0.2,0.3,0.5,0.5,0.9,0.5c0.4,0,0.7-0.2,0.9-0.5l23.9-36.4c0.2-0.3,0.2-0.7,0-1.1c-0.2-0.3-0.5-0.5-0.9-0.5L180.6,98.9L180.6,98.9
	L180.6,98.9z`})),rv=n=>fe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",width:84,height:84},n),fe.createElement("circle",{cx:"50",cy:"36.8101",r:"10",fill:"#3e7cff"},fe.createElement("animate",{attributeName:"cy",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keySplines:"0.45 0 0.9 0.55;0 0.45 0.55 0.9",keyTimes:"0;0.5;1",values:"23;77;23"})));function H9(n){let e=0,t=0;if(n.getBoundingClientRect){const r=n.getBoundingClientRect(),s=document.documentElement;e=r.left+Math.max(s.scrollLeft,document.body.scrollLeft)-s.clientLeft,t=r.top+Math.max(s.scrollTop,document.body.scrollTop)-s.clientTop}else for(;n!==document.body;)e+=n.offsetLeft,t+=n.offsetTop,n=n.offsetParent;return{domX:e,domY:t}}function op(n,e){let t=e.relatedTarget;try{for(;t&&t!==n;)t=t.parentNode}catch(r){console.warn(r)}return t!==n}const j9=(n,e,t)=>{const[r,s]=fe.useState([]),i=fe.useCallback(()=>{s([])},[s]),o=fe.useCallback(E=>{const v=E.currentTarget,A=H9(v),S=E.pageX||E.clientX,T=E.pageY||E.clientY,N=A.domX,k=A.domY,R=S-N,P=T-k,F=parseInt(R.toString()),$=parseInt(P.toString()),B=new Date,H=r.length;return s([...r,{key:B.getTime(),index:H+1,x:F,y:$}]),e.click&&e.click(F,$),E.cancelBubble=!0,E.preventDefault(),!1},[r,e]),l=fe.useCallback(E=>(e.confirm&&e.confirm(r,()=>{i()}),E.cancelBubble=!0,E.preventDefault(),!1),[r,e,i]),h=fe.useCallback(()=>r,[r]),d=fe.useCallback(()=>{i(),t&&t()},[i,t]),p=fe.useCallback(()=>{e.close&&e.close(),i()},[e,i]),g=fe.useCallback(()=>{e.refresh&&e.refresh(),i()},[i]),y=fe.useCallback(E=>(p(),E.cancelBubble=!0,E.preventDefault(),!1),[p]),b=fe.useCallback(E=>(g(),E.cancelBubble=!0,E.preventDefault(),!1),[e,g]);return{setDots:s,getDots:h,clickEvent:o,confirmEvent:l,closeEvent:y,refreshEvent:b,resetData:i,clearData:d,close:p,refresh:g}},q9=fe.forwardRef((n,e)=>{const[t,r]=fe.useState({...z9(),...n.config||{}}),[s,i]=fe.useState({...n.data||{}}),[o,l]=fe.useState({...n.events||{}});fe.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),fe.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),fe.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=j9(s,o,()=>{i({...s,thumb:"",image:""})}),d=t.horizontalPadding||0,p=t.verticalPadding||0,g=(t.width||0)+d*2+(t.showTheme?2:0),y=(t.width||0)>0||(t.height||0)>0,b=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return fe.useImperativeHandle(e,()=>({reset:h.resetData,clear:h.clearData,refresh:h.refresh,close:h.close})),De.createElement("div",{className:Es(Ye.wrapper,t.showTheme?Ye.theme:""),style:{width:g+"px",paddingLeft:d+"px",paddingRight:d+"px",paddingTop:p+"px",paddingBottom:p+"px",display:y?"block":"none"}},De.createElement("div",{className:Ye.header},De.createElement("span",null,t.title),De.createElement("img",{className:s.thumb==""?Ye.hide:"",style:{width:t.thumbWidth+"px",height:t.thumbHeight+"px",display:b?"block":"none"},src:s.thumb,alt:""})),De.createElement("div",{className:Ye.body,style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(rv,null)),De.createElement("img",{className:Es(Ye.picture,s.image==""?Ye.hide:""),style:{width:t.width+"px",height:t.height+"px",display:b?"block":"none"},src:s.image,alt:"",onClick:h.clickEvent}),De.createElement("div",{className:nO.dots},h.getDots().map(E=>De.createElement("div",{className:"dot",style:{width:t.dotSize+"px",height:t.dotSize+"px",borderRadius:t.dotSize+"px",top:E.y-(t.dotSize||1)/2-1+"px",left:E.x-(t.dotSize||1)/2-1+"px"},key:E.key+"-"+E.index},E.index)))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Es(Ye.iconBlock,nO.iconBlock)},De.createElement(tv,{width:t.iconSize,height:t.iconSize,onClick:h.closeEvent}),De.createElement(nv,{width:t.iconSize,height:t.iconSize,onClick:h.refreshEvent})),De.createElement("div",{className:Ye.buttonBlock},De.createElement("button",{className:Es(!b&&Ye.disabled),onClick:h.confirmEvent},t.buttonText))))});var G9=De.memo(q9),V9=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_tile__8pkQD {
  position: absolute;
  z-index: 2;
  cursor: pointer;
}
.index-module_tile__8pkQD img {
  display: block;
  cursor: pointer;
  width: 100%;
  height: 100%;
}
`,K9={tile:"index-module_tile__8pkQD"};Np(V9);const f5=n=>fe.createElement("svg",Object.assign({viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",width:20,height:20},n),fe.createElement("path",{d:`M131.6,116.3c0,0-75.6,0-109.7,0c-9.1,0-16.2-7.4-16.2-16.2c0-9.1,7.4-16.2,16.2-16.2c28.7,0,109.7,0,109.7,0
	s-5.4-5.4-30.4-30.7c-6.4-6.4-6.4-16.7,0-23.1s16.7-6.4,23.1,0l58.4,58.4c6.4,6.4,6.4,16.7,0,23.1c0,0-32.9,32.9-57.9,57.9
	c-6.4,6.4-16.7,6.4-23.1,0c-6.4-6.4-6.4-16.7,0-23.1C121.8,126.2,131.6,116.3,131.6,116.3z`})),rO=()=>({thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:"",thumb:""}),W9=()=>({width:300,height:220,thumbWidth:150,thumbHeight:40,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),Y9=(n,e,t,r,s,i,o,l,h)=>{const[d,p]=fe.useState(0),[g,y]=fe.useState(n.thumbX||0),[b,E]=fe.useState(!1);fe.useEffect(()=>{b||y(n.thumbX||0)},[n,y]);const v=fe.useCallback(()=>{p(0),y(n.thumbX||0)},[p,y,n.thumbX]),A=fe.useCallback($=>{if(!op(l.current,$))return;const B=$.touches&&$.touches[0],H=o.current.offsetLeft,j=s.current.offsetWidth,W=o.current.offsetWidth,ne=j-W,J=i.current.offsetWidth,I=i.current.offsetLeft,_=j-J,q=(j-(J+I))/ne;let K=!1,O=null,V=0,Z=0;B?V=B.pageX-H:V=$.clientX-H;const re=Lt=>{K=!0;const wn=Lt.touches&&Lt.touches[0];let fn=0;wn?fn=wn.pageX-V:fn=Lt.clientX-V;const ra=I+fn*q;if(fn>=ne){p(ne),Z=_,y(Z);return}if(fn<=0){p(0),Z=I,y(Z);return}p(fn),Z=Z=ra,y(Z),e.move&&e.move(Z,n.thumbY||0),Lt.cancelBubble=!0,Lt.preventDefault()},ee=Lt=>{op(l.current,Lt)&&(Qt(),K&&(K=!1,!(Z<0)&&(e.confirm&&e.confirm({x:parseInt(Z.toString()),y:n.thumbY||0},()=>{v()}),Lt.cancelBubble=!0,Lt.preventDefault())))},he=Lt=>{O=Lt},me=()=>{O=null},Ce=Lt=>{O&&(ee(O),Qt())},Pe=t.scope,Ne=Pe?r.current:l.current,Qe=Pe?r.current:document.body,Qt=()=>{Qe.removeEventListener("mousemove",re,!1),Qe.removeEventListener("touchmove",re,{passive:!1}),Ne.removeEventListener("mouseup",ee,!1),Ne.removeEventListener("mouseenter",me,!1),Ne.removeEventListener("mouseleave",he,!1),Ne.removeEventListener("touchend",ee,!1),Qe.removeEventListener("mouseleave",ee,!1),Qe.removeEventListener("mouseup",Ce,!1),E(!1)};E(!0),Qe.addEventListener("mousemove",re,!1),Qe.addEventListener("touchmove",re,{passive:!1}),Ne.addEventListener("mouseup",ee,!1),Ne.addEventListener("mouseenter",me,!1),Ne.addEventListener("mouseleave",he,!1),Ne.addEventListener("touchend",ee,!1),Qe.addEventListener("mouseleave",ee,!1),Qe.addEventListener("mouseup",Ce,!1)},[r,o,s,t,n,i,l,e,v]),S=fe.useCallback(()=>{v(),h&&h()},[v,h]),T=fe.useCallback(()=>{e.close&&e.close(),v()},[e,v]),N=fe.useCallback(()=>{e.refresh&&e.refresh(),v()},[e,v]),k=fe.useCallback($=>(T(),$.cancelBubble=!0,$.preventDefault(),!1),[T]),R=fe.useCallback($=>(N(),$.cancelBubble=!0,$.preventDefault(),!1),[N]),P=fe.useCallback(()=>({x:g,y:n.thumbY||0}),[n,g]);return{getState:fe.useCallback(()=>({dragLeft:d,thumbLeft:g}),[g,d]),getPoint:P,dragEvent:A,closeEvent:k,refreshEvent:R,resetData:v,clearData:S,close:T,refresh:N}},Q9=fe.forwardRef((n,e)=>{const[t,r]=fe.useState({...W9(),...n.config||{}}),[s,i]=fe.useState({...rO(),...n.data||{}}),[o,l]=fe.useState({...n.events||{}});fe.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),fe.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),fe.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=fe.useRef(null),d=fe.useRef(null),p=fe.useRef(null),g=fe.useRef(null),y=fe.useRef(null),b=Y9(s,o,t,h,p,y,g,d,()=>{i({...s,...rO()})}),E=t.horizontalPadding||0,v=t.verticalPadding||0,A=(t.width||0)+E*2+(t.showTheme?2:0),S=(t.width||0)>0||(t.height||0)>0,T=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return fe.useImperativeHandle(e,()=>({reset:b.resetData,clear:b.clearData,refresh:b.refresh,close:b.close})),fe.useEffect(()=>{const N=k=>k.preventDefault();return g.current&&g.current.addEventListener("dragstart",N),()=>{g.current&&g.current.removeEventListener("dragstart",N)}},[g]),De.createElement("div",{className:Es(Ye.wrapper,t.showTheme?Ye.theme:""),style:{width:A+"px",paddingLeft:E+"px",paddingRight:E+"px",paddingTop:v+"px",paddingBottom:v+"px",display:S?"block":"none"},ref:h},De.createElement("div",{className:Ye.header},De.createElement("span",null,t.title),De.createElement("div",{className:Ye.iconBlock},De.createElement(tv,{width:t.iconSize,height:t.iconSize,onClick:b.closeEvent}),De.createElement(nv,{width:t.iconSize,height:t.iconSize,onClick:b.refreshEvent}))),De.createElement("div",{className:Ye.body,ref:p,style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(rv,null)),De.createElement("img",{className:Es(Ye.picture,s.image==""?Ye.hide:""),style:{width:t.width+"px",height:t.height+"px",display:T?"block":"none"},src:s.image,alt:""}),De.createElement("div",{className:K9.tile,ref:y,style:{width:(s.thumbWidth||0)+"px",height:(s.thumbHeight||0)+"px",top:(s.thumbY||0)+"px",left:b.getState().thumbLeft+"px"}},De.createElement("img",{className:s.thumb==""?Ye.hide:"",style:{display:T?"block":"none"},src:s.thumb,alt:""}))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Ye.dragSlideBar,ref:d},De.createElement("div",{className:Ye.dragLine}),De.createElement("div",{className:Es(Ye.dragBlock,!T&&Ye.disabled),ref:g,onMouseDown:b.dragEvent,style:{left:b.getState().dragLeft+"px"}},De.createElement("div",{className:Ye.dragBlockInline,onTouchStart:b.dragEvent},De.createElement(f5,null))))))});var Z9=De.memo(Q9),X9=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_header__jVeEs {
  text-align: center;
}
.index-module_tile__VR9Ut {
  position: absolute;
  z-index: 2;
  cursor: pointer;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.index-module_tile__VR9Ut img {
  display: block;
  cursor: pointer;
  width: 100%;
  height: 100%;
}
`,uC={header:"index-module_header__jVeEs",tile:"index-module_tile__VR9Ut"};Np(X9);const J9=()=>({width:300,height:220,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),e7=(n,e,t,r,s,i,o)=>{const[l,h]=fe.useState({x:n.thumbX||0,y:n.thumbY||0}),[d,p]=fe.useState(!1);fe.useEffect(()=>{d||h({x:n.thumbX||0,y:n.thumbY||0})},[n,h]);const g=fe.useCallback(()=>{h({x:n.thumbX||0,y:n.thumbY||0})},[n.thumbX,n.thumbY,h]),y=fe.useCallback(T=>{if(!op(s.current,T))return;const N=T.touches&&T.touches[0],k=i.current.offsetLeft,R=i.current.offsetTop,P=s.current.offsetWidth,F=s.current.offsetHeight,$=i.current.offsetWidth,B=i.current.offsetHeight,H=P-$,j=F-B;let W=!1,ne=null,J=0,I=0,_=0,L=0;N?(J=N.pageX-k,I=N.pageY-R):(J=T.clientX-k,I=T.clientY-R);const q=Ce=>{W=!0;const Pe=Ce.touches&&Ce.touches[0];let Ne=0,Qe=0;Pe?(Ne=Pe.pageX-J,Qe=Pe.pageY-I):(Ne=Ce.clientX-J,Qe=Ce.clientY-I),Ne<=0&&(Ne=0),Qe<=0&&(Qe=0),Ne>=H&&(Ne=H),Qe>=j&&(Qe=j),h({x:Ne,y:Qe}),_=Ne,L=Qe,e.move&&e.move(Ne,Qe),Ce.cancelBubble=!0,Ce.preventDefault()},K=Ce=>{op(s.current,Ce)&&(me(),W&&(W=!1,!(_<0||L<0)&&(e.confirm&&e.confirm({x:_,y:L},()=>{g()}),Ce.cancelBubble=!0,Ce.preventDefault())))},O=Ce=>{ne=Ce},V=()=>{ne=null},Z=Ce=>{ne&&(K(ne),me())},re=t.scope,ee=re?r.current:s.current,he=re?r.current:document.body,me=()=>{he.removeEventListener("mousemove",q,!1),he.removeEventListener("touchmove",q,{passive:!1}),ee.removeEventListener("mouseup",K,!1),ee.removeEventListener("mouseenter",V,!1),ee.removeEventListener("mouseleave",O,!1),ee.removeEventListener("touchend",K,!1),he.removeEventListener("mouseleave",K,!1),he.removeEventListener("mouseup",Z,!1),p(!1)};p(!0),he.addEventListener("mousemove",q,!1),he.addEventListener("touchmove",q,{passive:!1}),ee.addEventListener("mouseup",K,!1),ee.addEventListener("mouseenter",V,!1),ee.addEventListener("mouseleave",O,!1),ee.addEventListener("touchend",K,!1),he.addEventListener("mouseleave",K,!1),he.addEventListener("mouseup",Z,!1)},[r,s,i,t,e,p,g]),b=fe.useCallback(()=>{g(),o&&o()},[g,o]),E=fe.useCallback(()=>{e.close&&e.close(),g()},[e,g]),v=fe.useCallback(()=>{e.refresh&&e.refresh(),g()},[e,g]),A=fe.useCallback(T=>(E(),T.cancelBubble=!0,T.preventDefault(),!1),[E]),S=fe.useCallback(T=>(v(),T.cancelBubble=!0,T.preventDefault(),!1),[v]);return{thumbPoint:l,dragEvent:y,closeEvent:A,refreshEvent:S,resetData:g,clearData:b,close:E,refresh:v}},sO=()=>({thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:"",thumb:""}),t7=fe.forwardRef((n,e)=>{const[t,r]=fe.useState({...J9(),...n.config||{}}),[s,i]=fe.useState({...sO(),...n.data||{}}),[o,l]=fe.useState({...n.events||{}});fe.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),fe.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),fe.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=fe.useRef(null),d=fe.useRef(null),p=fe.useRef(null),g=e7(s,o,t,h,d,p,()=>{i({...s,...sO()})}),y=t.horizontalPadding||0,b=t.verticalPadding||0,E=(t.width||0)+y*2+(t.showTheme?2:0),v=(t.width||0)>0||(t.height||0)>0,A=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return fe.useImperativeHandle(e,()=>({reset:g.resetData,clear:g.clearData,refresh:g.refresh,close:g.close})),fe.useEffect(()=>{const S=T=>T.preventDefault();return p.current&&p.current.addEventListener("dragstart",S),()=>{p.current&&p.current.removeEventListener("dragstart",S)}},[p]),De.createElement("div",{className:Es(Ye.wrapper,uC.wrapper,t.showTheme?Ye.theme:""),style:{width:E+"px",paddingLeft:y+"px",paddingRight:y+"px",paddingTop:b+"px",paddingBottom:b+"px",display:v?"block":"none"},ref:h},De.createElement("div",{className:Es(Ye.header,uC.header)},De.createElement("span",null,t.title)),De.createElement("div",{className:Ye.body,ref:d,style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(rv,null)),De.createElement("img",{className:Es(Ye.picture,s.image==""?Ye.hide:""),src:s.image,style:{width:t.width+"px",height:t.height+"px",display:A?"block":"none"},alt:""}),De.createElement("div",{className:uC.tile,ref:p,style:{width:(s.thumbWidth||0)+"px",height:(s.thumbHeight||0)+"px",top:g.thumbPoint.y+"px",left:g.thumbPoint.x+"px"},onMouseDown:g.dragEvent,onTouchStart:g.dragEvent},De.createElement("img",{className:s.thumb==""?Ye.hide:"",style:{display:A?"block":"none"},src:s.thumb,alt:""}))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Ye.iconBlock},De.createElement(tv,{width:t.iconSize,height:t.iconSize,onClick:g.closeEvent}),De.createElement(nv,{width:t.iconSize,height:t.iconSize,onClick:g.refreshEvent}))))});var n7=De.memo(t7),r7=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_body__5eTaZ {
  background: transparent !important;
  display: flex;
  display: -webkit-flex;
  justify-content: center;
  align-items: center;
  margin: 10px auto 0;
}
.index-module_bodyInner__Lb3mp {
  border-radius: 100%;
}
.index-module_picture__M-qbX {
  position: relative;
  max-width: 100%;
  max-height: 100%;
  z-index: 2;
  border-radius: 100%;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}
.index-module_picture__M-qbX img {
  max-width: 100%;
  max-height: 100%;
}
.index-module_round__zaOPS {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 100%;
  z-index: 2;
  border: 6px solid #e0e0e0;
  border-color: var(--go-captcha-theme-round-color);
}
.index-module_thumb__jChIh {
  position: absolute;
  z-index: 2;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}
.index-module_thumb__jChIh img {
  max-width: 100%;
  max-height: 100%;
}
.index-module_thumbBlock__u3U1X {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
`,Zl={body:"index-module_body__5eTaZ",bodyInner:"index-module_bodyInner__Lb3mp",picture:"index-module_picture__M-qbX",round:"index-module_round__zaOPS",thumb:"index-module_thumb__jChIh",thumbBlock:"index-module_thumbBlock__u3U1X"};Np(r7);const iO=()=>({width:300,height:220,size:220,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),s7=(n,e,t,r,s,i,o)=>{const[l,h]=fe.useState(0),[d,p]=fe.useState(n.angle||0),[g,y]=fe.useState(!1);fe.useEffect(()=>{g||p(n.angle||0)},[n,p]);const b=fe.useCallback(()=>{h(0),p(n.angle||0)},[n.angle,h,p]),E=fe.useCallback(R=>{if(!op(i.current,R))return;const P=R.touches&&R.touches[0],F=s.current.offsetLeft,$=i.current.offsetWidth,B=s.current.offsetWidth,H=$-B,j=360,W=(j-n.angle)/H;let ne=0,J=!1,I=null,_=0,L=0;P?_=P.pageX-F:_=R.clientX-F;const q=Ce=>{J=!0;const Pe=Ce.touches&&Ce.touches[0];let Ne=0;if(Pe?Ne=Pe.pageX-_:Ne=Ce.clientX-_,ne=n.angle+Ne*W,Ne>=H){h(H),L=j,p(L);return}if(Ne<=0){h(0),L=n.angle,p(L);return}h(Ne),L=ne,p(ne),e.rotate&&e.rotate(ne),Ce.cancelBubble=!0,Ce.preventDefault()},K=Ce=>{op(i.current,Ce)&&(me(),J&&(J=!1,!(L<0)&&(e.confirm&&e.confirm(parseInt(L.toString()),()=>{b()}),Ce.cancelBubble=!0,Ce.preventDefault())))},O=Ce=>{I=Ce},V=()=>{I=null},Z=Ce=>{I&&(K(I),me())},re=t.scope,ee=re?r.current:i.current,he=re?r.current:document.body,me=()=>{he.removeEventListener("mousemove",q,!1),he.removeEventListener("touchmove",q,{passive:!1}),ee.removeEventListener("mouseup",K,!1),ee.removeEventListener("mouseenter",V,!1),ee.removeEventListener("mouseleave",O,!1),ee.removeEventListener("touchend",K,!1),he.removeEventListener("mouseleave",K,!1),he.removeEventListener("mouseup",Z,!1),y(!1)};y(!0),he.addEventListener("mousemove",q,!1),he.addEventListener("touchmove",q,{passive:!1}),ee.addEventListener("mouseup",K,!1),ee.addEventListener("mouseenter",V,!1),ee.addEventListener("mouseleave",O,!1),ee.addEventListener("touchend",K,!1),he.addEventListener("mouseleave",K,!1),he.addEventListener("mouseup",Z,!1)},[r,s,i,t,n,e,b]),v=fe.useCallback(()=>{b(),o&&o()},[b,o]),A=fe.useCallback(()=>{e.close&&e.close(),b()},[e,b]),S=fe.useCallback(()=>{e.refresh&&e.refresh(),b()},[e,b]),T=fe.useCallback(R=>(A(),R.cancelBubble=!0,R.preventDefault(),!1),[A]),N=fe.useCallback(R=>(S(),R.cancelBubble=!0,R.preventDefault(),!1),[S]);return{getState:fe.useCallback(()=>({dragLeft:l,thumbAngle:d}),[d,l]),thumbAngle:d,dragEvent:E,closeEvent:T,refreshEvent:N,resetData:b,clearData:v,close:A,refresh:S}},aO=()=>({angle:0,image:"",thumb:"",thumbSize:0}),i7=fe.forwardRef((n,e)=>{const[t,r]=fe.useState({...iO(),...n.config||{}}),[s,i]=fe.useState({...aO(),...n.data||{}}),[o,l]=fe.useState({...n.events||{}});fe.useEffect(()=>{r({...t,...n.config||{}})},[n.config,r]),fe.useEffect(()=>{i({...s,...n.data||{}})},[n.data,i]),fe.useEffect(()=>{l({...o,...n.events||{}})},[n.events,l]);const h=fe.useRef(null),d=fe.useRef(null),p=fe.useRef(null),g=s7(s,o,t,h,p,d,()=>{i({...s,...aO()})}),y=t.horizontalPadding||0,b=t.verticalPadding||0,E=(t.width||0)+y*2+(t.showTheme?2:0),v=(t.size||0)>0?t.size:iO().size,A=(t.width||0)>0||(t.height||0)>0,S=s.image&&s.image.length>0&&s.thumb&&s.thumb.length>0;return fe.useImperativeHandle(e,()=>({reset:g.resetData,clear:g.clearData,refresh:g.refresh,close:g.close})),fe.useEffect(()=>{const T=N=>N.preventDefault();return p.current&&p.current.addEventListener("dragstart",T),()=>{p.current&&p.current.removeEventListener("dragstart",T)}},[p]),De.createElement("div",{className:Es(Ye.wrapper,Zl.wrapper,t.showTheme?Ye.theme:""),style:{width:E+"px",paddingLeft:y+"px",paddingRight:y+"px",paddingTop:b+"px",paddingBottom:b+"px",display:A?"block":"none"},ref:h},De.createElement("div",{className:Ye.header},De.createElement("span",null,t.title),De.createElement("div",{className:Ye.iconBlock},De.createElement(tv,{width:t.iconSize,height:t.iconSize,onClick:g.closeEvent}),De.createElement(nv,{width:t.iconSize,height:t.iconSize,onClick:g.refreshEvent}))),De.createElement("div",{className:Es(Ye.body,Zl.body),style:{width:t.width+"px",height:t.height+"px"}},De.createElement("div",{className:Es(Zl.bodyInner,Ye.bodyInner),style:{width:v+"px",height:v+"px"}},De.createElement("div",{className:Ye.loading},De.createElement(rv,null)),De.createElement("div",{className:Zl.picture,style:{width:t.size+"px",height:t.size+"px"}},De.createElement("img",{className:s.image==""?Ye.hide:"",src:s.image,style:{display:S?"block":"none"},alt:""}),De.createElement("div",{className:Zl.round})),De.createElement("div",{className:Zl.thumb},De.createElement("div",{className:Zl.thumbBlock,style:{transform:"rotate("+g.getState().thumbAngle+"deg)",...s.thumbSize>0?{width:s.thumbSize+"px",height:s.thumbSize+"px"}:{}}},De.createElement("img",{className:s.thumb==""?Ye.hide:"",src:s.thumb,style:{visibility:S?"visible":"hidden"},alt:""}))))),De.createElement("div",{className:Ye.footer},De.createElement("div",{className:Ye.dragSlideBar,ref:d},De.createElement("div",{className:Ye.dragLine}),De.createElement("div",{className:Es(Ye.dragBlock,!S&&Ye.disabled),ref:p,onMouseDown:g.dragEvent,style:{left:g.getState().dragLeft+"px"}},De.createElement("div",{className:Ye.dragBlockInline,onTouchStart:g.dragEvent},De.createElement(f5,null))))))});var a7=De.memo(i7),o7=`/**
 * @Author Awen
 * @Date 2024/06/01
 * @Email wengaolng@gmail.com
 **/
.index-module_btnBlock__L96Vx {
  position: relative;
  box-sizing: border-box;
  display: block;
  font-size: 13px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  letter-spacing: 1px;
  border-radius: 5px;
  line-height: 1;
  white-space: nowrap;
  -webkit-appearance: none;
  outline: none;
  margin: 0;
  transition: 0.1s;
  font-weight: 500;
  -moz-user-select: none;
  -webkit-user-select: none;
  display: flex;
  align-items: center;
  justify-content: center;
  justify-items: center;
  box-shadow: 0 0 20px rgba(62, 124, 255, 0.1);
  -webkit-box-shadow: 0 0 20px rgba(62, 124, 255, 0.1);
  -moz-box-shadow: 0 0 20px rgba(62, 124, 255, 0.1);
}
.index-module_btnBlock__L96Vx span {
  padding-left: 8px;
}
.index-module_disabled__U5sNo {
  pointer-events: none;
}
.index-module_default__r2sQq {
  color: var(--go-captcha-theme-default-color);
  border: 1px solid #50a1ff;
  border-color: var(--go-captcha-theme-default-border-color);
  background-color: var(--go-captcha-theme-default-bg-color);
  cursor: pointer;
}
.index-module_default__r2sQq:hover {
  background-color: var(--go-captcha-theme-default-hover-color) !important;
}
.index-module_error__mCm6a {
  cursor: pointer;
  color: var(--go-captcha-theme-error-color);
  background-color: var(--go-captcha-theme-error-bg-color);
  border: 1px solid #ff5a34;
  border-color: var(--go-captcha-theme-error-border-color);
}
.index-module_warn__CT1sW {
  cursor: pointer;
  color: var(--go-captcha-theme-warn-color);
  background-color: var(--go-captcha-theme-warn-bg-color);
  border: 1px solid #ffbe09;
  border-color: var(--go-captcha-theme-warn-border-color);
}
.index-module_success__61kOU {
  color: var(--go-captcha-theme-success-color);
  background-color: var(--go-captcha-theme-success-bg-color);
  border: 1px solid #8bc640;
  border-color: var(--go-captcha-theme-success-border-color);
  pointer-events: none;
}
.index-module_ripple__KF4IK {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  justify-items: center;
}
.index-module_ripple__KF4IK svg {
  position: relative;
  z-index: 2;
}
.index-module_ripple__KF4IK > * {
  z-index: 2;
}
.index-module_ripple__KF4IK::after {
  background-color: var(--go-captcha-theme-default-border-color);
  border-radius: 50px;
  content: "";
  display: block;
  width: 21px;
  height: 21px;
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -11px;
  margin-left: -11px;
  z-index: 1;
  animation: index-module_ripple__KF4IK 1.3s infinite;
  -moz-animation: index-module_ripple__KF4IK 1.3s infinite;
  -webkit-animation: index-module_ripple__KF4IK 1.3s infinite;
  animation-delay: 2s;
  -moz-animation-delay: 2s;
  -webkit-animation-delay: 2s;
}
@keyframes index-module_ripple__KF4IK {
  0% {
    opacity: 0;
  }
  5% {
    opacity: 0.05;
  }
  20% {
    opacity: 0.35;
  }
  65% {
    opacity: 0.01;
  }
  100% {
    transform: scaleX(2) scaleY(2);
    opacity: 0;
  }
}
`;Np(o7);var ay={Click:G9,Slide:Z9,SlideRegion:n7,Rotate:a7};function c7({captcha:n,onRefresh:e,onConfirm:t}){if(!n)return ue.jsx(L_,{});const s=[oO,oO,l7,u7,h7][n.kind];return s?ue.jsx(s,{captcha:n,onRefresh:e,onConfirm:t}):ue.jsx(L_,{})}function oO({captcha:n,onRefresh:e,onConfirm:t}){return ue.jsx(ay.Click,{config:{title:"Click in order",buttonText:"submit",width:n.images[0].size.x,height:n.images[0].size.y,thumbWidth:n.images[1].size.x,thumbHeight:n.images[1].size.y},data:{image:n.images[0].base64,thumb:n.images[1].base64},events:{refresh:e,confirm:async(r,s)=>{t(r.map(i=>`${Math.round(i.x)},${Math.round(i.y)}`).join(","),s)}}})}function l7({captcha:n,onRefresh:e,onConfirm:t}){return ue.jsx(ay.Slide,{config:{title:"Drag the slider to complete the puzzle",width:n.images[0].size.x,height:n.images[0].size.y,scope:!0},data:{image:n.images[0].base64,thumb:n.images[1].base64,thumbX:n.vectors[0].x,thumbY:n.vectors[0].y,thumbWidth:n.images[1].size.x,thumbHeight:n.images[1].size.y},events:{refresh:e,confirm:async(r,s)=>{t(`${Math.round(r.x)},${Math.round(r.y)}`,s)}}})}function u7({captcha:n,onRefresh:e,onConfirm:t}){return ue.jsx("div",{className:"fix-drag",children:ue.jsx(ay.SlideRegion,{config:{title:"Drag the tile to complete the puzzle",width:n.images[0].size.x,height:n.images[0].size.y,scope:!0},data:{image:n.images[0].base64,thumb:n.images[1].base64,thumbX:n.vectors[0].x,thumbY:n.vectors[0].y,thumbWidth:n.images[1].size.x,thumbHeight:n.images[1].size.y},events:{refresh:e,confirm:async(r,s)=>{t(`${Math.round(r.x)},${Math.round(r.y)}`,s)}}})})}function h7({captcha:n,onRefresh:e,onConfirm:t}){return ue.jsx(ay.Rotate,{config:{title:"Drag the slider to complete the puzzle",width:n.images[0].size.x,height:n.images[0].size.y,size:n.images[0].size.y,scope:!0},data:{image:n.images[0].base64,thumb:n.images[1].base64,thumbSize:n.images[1].size.x,angle:0},events:{refresh:e,confirm:async(r,s)=>{t(`${Math.round(r)}`,s)}}})}function L_(){return ue.jsx(ay.SlideRegion,{config:{title:"Loading...",width:300,height:300},data:{thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:null,thumb:null}})}function p5({address:n,chainId:e,onSuccess:t}){const[r,s]=fe.useState(!0),[i,o]=fe.useState(null),[l,h]=fe.useState([]);if(fe.useEffect(()=>{const g=new AbortController,y=g.signal;let b=!1;return s(!0),(async()=>{try{const E=await eO(n,e,y);b||(o(E),h([]))}catch(E){if(!d7(E))throw E}finally{b||s(!1)}})(),()=>{b=!0,g.abort()}},[n,e]),r||!i)return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"counter text-small",children:[l.length+1," / ",(i==null?void 0:i.captchas.length)??5]}),ue.jsx(L_,{})]});const d=async()=>{o(null),h([]),await P9(i),o(await eO(n,e))},p=async(g,y)=>{y(),s(!0);try{if(l.length==i.captchas.length-1){const E=await k9(i.id,[...l,g],new Uint8Array);if(!E)return d();t(E);return}if(!await U9(i.id,l.length,g))return d();h([...l,g])}finally{s(!1)}};return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"counter text-small",children:[l.length+1," / ",i.captchas.length]}),ue.jsx(c7,{captcha:i.captchas[l.length],onRefresh:d,onConfirm:p})]})}function d7(n){return n!==null&&typeof n=="object"&&"name"in n&&n.name==="AbortError"}const f7="6.15.0";function p7(n,e,t){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=n,s}async function jr(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Xe(n,e,t){for(let r in e){let s=e[r];const i=t?t[r]:null;i&&p7(s,i,r),Object.defineProperty(n,r,{enumerable:!0,value:s,writable:!1})}}function ef(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>ef(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let s=0;s<n.length;s++)r+=t[n[s]>>4],r+=t[n[s]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return ef(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${ef(r,e)}: ${ef(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function yr(n,e){return n&&n.code===e}function PS(n){return yr(n,"CALL_EXCEPTION")}function mn(n,e,t){let r=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${ef(t)}`);for(const o in t){if(o==="shortMessage")continue;const l=t[o];i.push(o+"="+ef(l))}}i.push(`code=${e}`),i.push(`version=${f7}`),i.length&&(n+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return Xe(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&Xe(s,{shortMessage:r}),s}function ye(n,e,t,r){if(!n)throw mn(e,t,r)}function Q(n,e,t,r){ye(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function g5(n,e,t){t==null&&(t=""),t&&(t=": "+t),ye(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),ye(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(e)}catch{}return n},[]);function oy(n,e,t){if(t==null&&(t=""),n!==e){let r=t,s="new";t&&(r+=".",s+=" "+t),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function m5(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(n.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",n)}function pt(n,e){return m5(n,e,!1)}function Gr(n,e){return m5(n,e,!0)}function on(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function US(n){return on(n,!0)||n instanceof Uint8Array}const cO="0123456789abcdef";function Oe(n){const e=pt(n);let t="0x";for(let r=0;r<e.length;r++){const s=e[r];t+=cO[(s&240)>>4]+cO[s&15]}return t}function xn(n){return"0x"+n.map(e=>Oe(e).substring(2)).join("")}function lf(n){return on(n,!0)?(n.length-2)/2:pt(n).length}function Sn(n,e,t){const r=pt(n);return t!=null&&t>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Oe(r.slice(e??0,t??r.length))}function y5(n,e,t){const r=pt(n);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),t?s.set(r,e-r.length):s.set(r,0),Oe(s)}function qo(n,e){return y5(n,e,!0)}function g7(n,e){return y5(n,e,!1)}const sv=BigInt(0),Ki=BigInt(1),tf=9007199254740991;function Jb(n,e){const t=iv(n,"value"),r=BigInt(lt(e,"width"));if(ye(t>>r===sv,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Ki){const s=(Ki<<r)-Ki;return-((~t&s)+Ki)}return t}function w5(n,e){let t=ze(n,"value");const r=BigInt(lt(e,"width")),s=Ki<<r-Ki;if(t<sv){t=-t,ye(t<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(Ki<<r)-Ki;return(~t&i)+Ki}else ye(t<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function Eu(n,e){const t=iv(n,"value"),r=BigInt(lt(e,"bits"));return t&(Ki<<r)-Ki}function ze(n,e){switch(typeof n){case"bigint":return n;case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-tf&&n<=tf,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){Q(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}Q(!1,"invalid BigNumberish value",e||"value",n)}function iv(n,e){const t=ze(n,e);return ye(t>=sv,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const lO="0123456789abcdef";function av(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=lO[t>>4],e+=lO[t&15];return BigInt(e)}return ze(n)}function lt(n,e){switch(typeof n){case"bigint":return Q(n>=-tf&&n<=tf,"overflow",e||"value",n),Number(n);case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-tf&&n<=tf,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return lt(BigInt(n),e)}catch(t){Q(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}Q(!1,"invalid numeric value",e||"value",n)}function m7(n){return lt(av(n))}function vl(n,e){let r=iv(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=lt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<s*2;)r="0"+r}return"0x"+r}function qn(n){const e=iv(n,"value");if(e===sv)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(t.substring(i,i+2),16)}return r}function Gi(n){let e=Oe(US(n)?n:qn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const uO="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const hO=BigInt(58);function y7(n){const e=pt(n);let t=av(e),r="";for(;t;)r=uO[Number(t%hO)]+r,t/=hO;for(let s=0;s<e.length&&!e[s];s++)r=uO[0]+r;return r}function w7(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return pt(e)}function b7(n){const e=pt(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var Ef;class b5{constructor(e,t,r){ie(this,"filter");ie(this,"emitter");le(this,Ef);z(this,Ef,t),Xe(this,{emitter:e,filter:r})}async removeListener(){x(this,Ef)!=null&&await this.emitter.off(this.filter,x(this,Ef))}}Ef=new WeakMap;function E7(n,e,t,r,s){Q(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function E5(n,e,t,r,s){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function v7(n,e,t,r,s){return n==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),E5(n,e,t))}const A7=Object.freeze({error:E7,ignore:E5,replace:v7});function C7(n,e){e==null&&(e=A7.error);const t=pt(n,"bytes"),r=[];let s=0;for(;s<t.length;){const i=t[s++];if(i>>7===0){r.push(i);continue}let o=null,l=null;if((i&224)===192)o=1,l=127;else if((i&240)===224)o=2,l=2047;else if((i&248)===240)o=3,l=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,t,r):s+=e("BAD_PREFIX",s-1,t,r);continue}if(s-1+o>=t.length){s+=e("OVERRUN",s-1,t,r);continue}let h=i&(1<<8-o-1)-1;for(let d=0;d<o;d++){let p=t[s];if((p&192)!=128){s+=e("MISSING_CONTINUE",s,t,r),h=null;break}h=h<<6|p&63,s++}if(h!==null){if(h>1114111){s+=e("OUT_OF_RANGE",s-1-o,t,r,h);continue}if(h>=55296&&h<=57343){s+=e("UTF16_SURROGATE",s-1-o,t,r,h);continue}if(h<=l){s+=e("OVERLONG",s-1-o,t,r,h);continue}r.push(h)}}return r}function Ma(n,e){Q(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){r++;const i=n.charCodeAt(r);Q(r<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((s&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function _7(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function eE(n,e){return _7(C7(n,e))}function v5(n){async function e(t,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=t.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,l=setTimeout(()=>{i=mn("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{i=mn("request cancelled","CANCELLED"),o.abort()});const h=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let d;try{d=await fetch(t.url,h)}catch(b){throw clearTimeout(l),i||b}clearTimeout(l);const p={};d.headers.forEach((b,E)=>{p[E.toLowerCase()]=b});const g=await d.arrayBuffer(),y=g==null?null:new Uint8Array(g);return{statusCode:d.status,statusMessage:d.statusText,headers:p,body:y}}return e}const S7=12,x7=250;let dO=v5();const N7=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),T7=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let hC=!1;async function A5(n,e){try{const t=n.match(N7);if(!t)throw new Error("invalid data");return new pl(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?w7(t[3]):O7(t[3]))}catch{return new pl(599,"BAD REQUEST (invalid data: URI)",{},null,new Go(n))}}function C5(n){async function e(t,r){try{const s=t.match(T7);if(!s)throw new Error("invalid link");return new Go(`${n}${s[2]}`)}catch{return new pl(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Go(t))}}return e}const Ww={data:A5,ipfs:C5("https://gateway.ipfs.io/ipfs/")},_5=new WeakMap;var Du,Yc;class I7{constructor(e){le(this,Du);le(this,Yc);z(this,Du,[]),z(this,Yc,!1),_5.set(e,()=>{if(!x(this,Yc)){z(this,Yc,!0);for(const t of x(this,Du))setTimeout(()=>{t()},0);z(this,Du,[])}})}addListener(e){ye(!x(this,Yc),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),x(this,Du).push(e)}get cancelled(){return x(this,Yc)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Du=new WeakMap,Yc=new WeakMap;function Yw(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var vf,Af,$i,So,Cf,_f,Jn,Ms,xo,Pu,Uu,ku,va,Fi,Qc,Bu,mm;const KE=class KE{constructor(e){le(this,Bu);le(this,vf);le(this,Af);le(this,$i);le(this,So);le(this,Cf);le(this,_f);le(this,Jn);le(this,Ms);le(this,xo);le(this,Pu);le(this,Uu);le(this,ku);le(this,va);le(this,Fi);le(this,Qc);z(this,_f,String(e)),z(this,vf,!1),z(this,Af,!0),z(this,$i,{}),z(this,So,""),z(this,Cf,3e5),z(this,Fi,{slotInterval:x7,maxAttempts:S7}),z(this,Qc,null)}get url(){return x(this,_f)}set url(e){z(this,_f,String(e))}get body(){return x(this,Jn)==null?null:new Uint8Array(x(this,Jn))}set body(e){if(e==null)z(this,Jn,void 0),z(this,Ms,void 0);else if(typeof e=="string")z(this,Jn,Ma(e)),z(this,Ms,"text/plain");else if(e instanceof Uint8Array)z(this,Jn,e),z(this,Ms,"application/octet-stream");else if(typeof e=="object")z(this,Jn,Ma(JSON.stringify(e))),z(this,Ms,"application/json");else throw new Error("invalid body")}hasBody(){return x(this,Jn)!=null}get method(){return x(this,So)?x(this,So):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),z(this,So,String(e).toUpperCase())}get headers(){const e=Object.assign({},x(this,$i));return x(this,xo)&&(e.authorization=`Basic ${b7(Ma(x(this,xo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&x(this,Ms)&&(e["content-type"]=x(this,Ms)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){x(this,$i)[String(e).toLowerCase()]=String(t)}clearHeaders(){z(this,$i,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return x(this,xo)||null}setCredentials(e,t){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),z(this,xo,`${e}:${t}`)}get allowGzip(){return x(this,Af)}set allowGzip(e){z(this,Af,!!e)}get allowInsecureAuthentication(){return!!x(this,vf)}set allowInsecureAuthentication(e){z(this,vf,!!e)}get timeout(){return x(this,Cf)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),z(this,Cf,e)}get preflightFunc(){return x(this,Pu)||null}set preflightFunc(e){z(this,Pu,e)}get processFunc(){return x(this,Uu)||null}set processFunc(e){z(this,Uu,e)}get retryFunc(){return x(this,ku)||null}set retryFunc(e){z(this,ku,e)}get getUrlFunc(){return x(this,Qc)||dO}set getUrlFunc(e){z(this,Qc,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${x(this,Jn)?Oe(x(this,Jn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(x(this,Fi).slotInterval=e.slotInterval),e.maxAttempts!=null&&(x(this,Fi).maxAttempts=e.maxAttempts)}send(){return ye(x(this,va)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),z(this,va,new I7(this)),be(this,Bu,mm).call(this,0,fO()+this.timeout,0,this,new pl(0,"",{},null,this))}cancel(){ye(x(this,va)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=_5.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new KE(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,z(s,$i,Object.assign({},x(this,$i))),x(this,Jn)&&z(s,Jn,new Uint8Array(x(this,Jn))),z(s,Ms,x(this,Ms)),s}clone(){const e=new KE(this.url);return z(e,So,x(this,So)),x(this,Jn)&&z(e,Jn,x(this,Jn)),z(e,Ms,x(this,Ms)),z(e,$i,Object.assign({},x(this,$i))),z(e,xo,x(this,xo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),z(e,Pu,x(this,Pu)),z(e,Uu,x(this,Uu)),z(e,ku,x(this,ku)),z(e,Fi,Object.assign({},x(this,Fi))),z(e,Qc,x(this,Qc)),e}static lockConfig(){hC=!0}static getGateway(e){return Ww[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(hC)throw new Error("gateways locked");Ww[e]=t}static registerGetUrl(e){if(hC)throw new Error("gateways locked");dO=e}static createGetUrlFunc(e){return v5(e)}static createDataGateway(){return A5}static createIpfsGatewayFunc(e){return C5(e)}};vf=new WeakMap,Af=new WeakMap,$i=new WeakMap,So=new WeakMap,Cf=new WeakMap,_f=new WeakMap,Jn=new WeakMap,Ms=new WeakMap,xo=new WeakMap,Pu=new WeakMap,Uu=new WeakMap,ku=new WeakMap,va=new WeakMap,Fi=new WeakMap,Qc=new WeakMap,Bu=new WeakSet,mm=async function(e,t,r,s,i){var p,g,y;if(e>=x(this,Fi).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(fO()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await R7(r);let o=this.clone();const l=(o.url.split(":")[0]||"").toLowerCase();if(l in Ww){const b=await Ww[l](o.url,Yw(x(s,va)));if(b instanceof pl){let E=b;if(this.processFunc){Yw(x(s,va));try{E=await this.processFunc(o,E)}catch(v){(v.throttle==null||typeof v.stall!="number")&&E.makeServerError("error in post-processing function",v).assertOk()}}return E}o=b}this.preflightFunc&&(o=await this.preflightFunc(o));const h=await this.getUrlFunc(o,Yw(x(s,va)));let d=new pl(h.statusCode,h.statusMessage,h.headers,h.body,s);if(d.statusCode===301||d.statusCode===302){try{const b=d.headers.location||"";return be(p=o.redirect(b),Bu,mm).call(p,e+1,t,0,s,d)}catch{}return d}else if(d.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,d,e))){const b=d.headers["retry-after"];let E=x(this,Fi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof b=="string"&&b.match(/^[1-9][0-9]*$/)&&(E=parseInt(b)),be(g=o.clone(),Bu,mm).call(g,e+1,t,E,s,d)}if(this.processFunc){Yw(x(s,va));try{d=await this.processFunc(o,d)}catch(b){(b.throttle==null||typeof b.stall!="number")&&d.makeServerError("error in post-processing function",b).assertOk();let E=x(this,Fi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return b.stall>=0&&(E=b.stall),be(y=o.clone(),Bu,mm).call(y,e+1,t,E,s,d)}}return d};let Go=KE;var K0,W0,Y0,$s,Sf,Lu;const Zx=class Zx{constructor(e,t,r,s,i){le(this,K0);le(this,W0);le(this,Y0);le(this,$s);le(this,Sf);le(this,Lu);z(this,K0,e),z(this,W0,t),z(this,Y0,Object.keys(r).reduce((o,l)=>(o[l.toLowerCase()]=String(r[l]),o),{})),z(this,$s,s==null?null:new Uint8Array(s)),z(this,Sf,i||null),z(this,Lu,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${x(this,$s)?Oe(x(this,$s)):"null"}>`}get statusCode(){return x(this,K0)}get statusMessage(){return x(this,W0)}get headers(){return Object.assign({},x(this,Y0))}get body(){return x(this,$s)==null?null:new Uint8Array(x(this,$s))}get bodyText(){try{return x(this,$s)==null?"":eE(x(this,$s))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new Zx(599,r,this.headers,this.body,x(this,Sf)||void 0);return z(s,Lu,{message:e,error:t}),s}throwThrottleError(e,t){t==null?t=-1:Q(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw Xe(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return x(this,$s)!=null}get request(){return x(this,Sf)}ok(){return x(this,Lu).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=x(this,Lu);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{x(this,$s)&&(s=eE(x(this,$s)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};K0=new WeakMap,W0=new WeakMap,Y0=new WeakMap,$s=new WeakMap,Sf=new WeakMap,Lu=new WeakMap;let pl=Zx;function fO(){return new Date().getTime()}function O7(n){return Ma(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function R7(n){return new Promise(e=>setTimeout(e,n))}const D7=BigInt(-1),ki=BigInt(0),nf=BigInt(1),P7=BigInt(5),Ad={};let uf="0000";for(;uf.length<80;)uf+=uf;function Xl(n){let e=uf;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function Gg(n,e,t){const r=BigInt(e.width);if(e.signed){const s=nf<<r-nf;ye(t==null||n>=-s&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>ki?n=Jb(Eu(n,r),r):n=-Jb(Eu(-n,r),r)}else{const s=nf<<r;ye(t==null||n>=0&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%s+s)%s&s-nf}return n}function dC(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Q(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),r=parseInt(i[3])}}else if(n){const i=n,o=(l,h,d)=>i[l]==null?d:(Q(typeof i[l]===h,"invalid fixed format ("+l+" not "+h+")","format."+l,i[l]),i[l]);e=o("signed","boolean",e),t=o("width","number",t),r=o("decimals","number",r)}Q(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),Q(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:s}}function U7(n,e){let t="";n<ki&&(t="-",n*=D7);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=uf+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var zi,tn,$r,jt,cu,wo,M_,$_,F_,z_;const Gc=class Gc{constructor(e,t,r){le(this,jt);ie(this,"format");le(this,zi);le(this,tn);le(this,$r);ie(this,"_value");oy(e,Ad,"FixedNumber"),z(this,tn,t),z(this,zi,r);const s=U7(t,r.decimals);Xe(this,{format:r.name,_value:s}),z(this,$r,Xl(r.decimals))}get signed(){return x(this,zi).signed}get width(){return x(this,zi).width}get decimals(){return x(this,zi).decimals}get value(){return x(this,tn)}addUnsafe(e){return be(this,jt,M_).call(this,e)}add(e){return be(this,jt,M_).call(this,e,"add")}subUnsafe(e){return be(this,jt,$_).call(this,e)}sub(e){return be(this,jt,$_).call(this,e,"sub")}mulUnsafe(e){return be(this,jt,F_).call(this,e)}mul(e){return be(this,jt,F_).call(this,e,"mul")}mulSignal(e){be(this,jt,cu).call(this,e);const t=x(this,tn)*x(e,tn);return ye(t%x(this,$r)===ki,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),be(this,jt,wo).call(this,t/x(this,$r),"mulSignal")}divUnsafe(e){return be(this,jt,z_).call(this,e)}div(e){return be(this,jt,z_).call(this,e,"div")}divSignal(e){ye(x(e,tn)!==ki,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),be(this,jt,cu).call(this,e);const t=x(this,tn)*x(this,$r);return ye(t%x(e,tn)===ki,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),be(this,jt,wo).call(this,t/x(e,tn),"divSignal")}cmp(e){let t=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=Xl(s):s<0&&(t*=Xl(-s)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=x(this,tn);return x(this,tn)<ki&&(e-=x(this,$r)-nf),e=x(this,tn)/x(this,$r)*x(this,$r),be(this,jt,wo).call(this,e,"floor")}ceiling(){let e=x(this,tn);return x(this,tn)>ki&&(e+=x(this,$r)-nf),e=x(this,tn)/x(this,$r)*x(this,$r),be(this,jt,wo).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=P7*Xl(t-1);let s=this.value+r;const i=Xl(t);return s=s/i*i,Gg(s,x(this,zi),"round"),new Gc(Ad,s,x(this,zi))}isZero(){return x(this,tn)===ki}isNegative(){return x(this,tn)<ki}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Gc.fromString(this.toString(),e)}static fromValue(e,t,r){const s=t==null?0:lt(t),i=dC(r);let o=ze(e,"value");const l=s-i.decimals;if(l>0){const h=Xl(l);ye(o%h===ki,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=h}else l<0&&(o*=Xl(-l));return Gg(o,i,"fromValue"),new Gc(Ad,o,i)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Q(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=dC(t);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=uf;ye(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const l=BigInt(r[1]+i+o);return Gg(l,s,"fromString"),new Gc(Ad,l,s)}static fromBytes(e,t){let r=av(pt(e,"value"));const s=dC(t);return s.signed&&(r=Jb(r,s.width)),Gg(r,s,"fromBytes"),new Gc(Ad,r,s)}};zi=new WeakMap,tn=new WeakMap,$r=new WeakMap,jt=new WeakSet,cu=function(e){Q(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},wo=function(e,t){return e=Gg(e,x(this,zi),t),new Gc(Ad,e,x(this,zi))},M_=function(e,t){return be(this,jt,cu).call(this,e),be(this,jt,wo).call(this,x(this,tn)+x(e,tn),t)},$_=function(e,t){return be(this,jt,cu).call(this,e),be(this,jt,wo).call(this,x(this,tn)-x(e,tn),t)},F_=function(e,t){return be(this,jt,cu).call(this,e),be(this,jt,wo).call(this,x(this,tn)*x(e,tn)/x(this,$r),t)},z_=function(e,t){return ye(x(e,tn)!==ki,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),be(this,jt,cu).call(this,e),be(this,jt,wo).call(this,x(this,tn)*x(this,$r)/x(e,tn),t)};let tE=Gc;function k7(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function pO(n,e,t){let r=0;for(let s=0;s<t;s++)r=r*256+n[e+s];return r}function gO(n,e,t,r){const s=[];for(;t<e+1+r;){const i=S5(n,t);s.push(i.result),t+=i.consumed,ye(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:s}}function S5(n,e){ye(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{ye(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const s=pO(n,e+1,r);return t(e+1+r+s),gO(n,e,e+1+r,r+s)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),gO(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const s=pO(n,e+1,r);t(e+1+r+s);const i=Oe(n.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const s=Oe(n.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:k7(n[e])}}function cy(n){const e=pt(n,"data"),t=S5(e,0);return Q(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function mO(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function x5(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(i){r=r.concat(x5(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=mO(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(pt(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=mO(e.length);return t.unshift(183+t.length),t.concat(e)}const yO="0123456789abcdef";function Al(n){let e="0x";for(const t of x5(n))e+=yO[t>>4],e+=yO[t&15];return e}const N5=["wei","kwei","mwei","gwei","szabo","finney","ether"];function T5(n,e){let t=18;if(typeof e=="string"){const r=N5.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=lt(e,"unit"));return tE.fromValue(n,t,{decimals:t,width:512}).toString()}function B7(n,e){Q(typeof n=="string","value must be a string","value",n);let t=18;if(typeof e=="string"){const r=N5.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=lt(e,"unit"));return tE.fromString(n,{decimals:t,width:512}).value}function L7(n){return T5(n,18)}const Vr=32,H_=new Uint8Array(Vr),M7=["then"],Qw={},I5=new WeakMap;function du(n){return I5.get(n)}function wO(n,e){I5.set(n,e)}function Vg(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function j_(n,e,t){return n.indexOf(null)>=0?e.map((r,s)=>r instanceof cp?j_(du(r),r,t):r):n.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(t&&o instanceof cp&&(o=j_(du(o),o,t)),r[s]=o),r},{})}var xf;const af=class af extends Array{constructor(...t){const r=t[0];let s=t[1],i=(t[2]||[]).slice(),o=!0;r!==Qw&&(s=t,i=[],o=!1);super(s.length);le(this,xf);s.forEach((d,p)=>{this[p]=d});const l=i.reduce((d,p)=>(typeof p=="string"&&d.set(p,(d.get(p)||0)+1),d),new Map);if(wO(this,Object.freeze(s.map((d,p)=>{const g=i[p];return g!=null&&l.get(g)===1?g:null}))),z(this,xf,[]),x(this,xf)==null&&x(this,xf),!o)return;Object.freeze(this);const h=new Proxy(this,{get:(d,p,g)=>{if(typeof p=="string"){if(p.match(/^[0-9]+$/)){const b=lt(p,"%index");if(b<0||b>=this.length)throw new RangeError("out of result range");const E=d[b];return E instanceof Error&&Vg(`index ${b}`,E),E}if(M7.indexOf(p)>=0)return Reflect.get(d,p,g);const y=d[p];if(y instanceof Function)return function(...b){return y.apply(this===g?d:this,b)};if(!(p in d))return d.getValue.apply(this===g?d:this,[p])}return Reflect.get(d,p,g)}});return wO(h,du(this)),h}toArray(t){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Vg(`index ${i}`,s),t&&s instanceof af&&(s=s.toArray(t)),r.push(s)}),r}toObject(t){const r=du(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),j_(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=du(this),i=[],o=[];for(let l=t;l<r;l++)i.push(this[l]),o.push(s[l]);return new af(Qw,i,o)}filter(t,r){const s=du(this),i=[],o=[];for(let l=0;l<this.length;l++){const h=this[l];h instanceof Error&&Vg(`index ${l}`,h),t.call(r,h,l,this)&&(i.push(h),o.push(s[l]))}return new af(Qw,i,o)}map(t,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Vg(`index ${i}`,o),s.push(t.call(r,o,i,this))}return s}getValue(t){const r=du(this).indexOf(t);if(r===-1)return;const s=this[r];return s instanceof Error&&Vg(`property ${JSON.stringify(t)}`,s.error),s}static fromItems(t,r){return new af(Qw,t,r)}};xf=new WeakMap;let cp=af;function bO(n){let e=qn(n);return ye(e.length<=Vr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Vr,offset:e.length}),e.length!==Vr&&(e=Gr(xn([H_.slice(e.length%Vr),e]))),e}class Zo{constructor(e,t,r,s){ie(this,"name");ie(this,"type");ie(this,"localName");ie(this,"dynamic");Xe(this,{name:e,type:t,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Q(!1,e,this.localName,t)}}var No,Mu,Nf,Rb;class q_{constructor(){le(this,Nf);le(this,No);le(this,Mu);z(this,No,[]),z(this,Mu,0)}get data(){return xn(x(this,No))}get length(){return x(this,Mu)}appendWriter(e){return be(this,Nf,Rb).call(this,Gr(e.data))}writeBytes(e){let t=Gr(e);const r=t.length%Vr;return r&&(t=Gr(xn([t,H_.slice(r)]))),be(this,Nf,Rb).call(this,t)}writeValue(e){return be(this,Nf,Rb).call(this,bO(e))}writeUpdatableValue(){const e=x(this,No).length;return x(this,No).push(H_),z(this,Mu,x(this,Mu)+Vr),t=>{x(this,No)[e]=bO(t)}}}No=new WeakMap,Mu=new WeakMap,Nf=new WeakSet,Rb=function(e){return x(this,No).push(e),z(this,Mu,x(this,Mu)+e.length),e.length};var fs,Fs,$u,Fu,Zc,Sh,V_,O5;const Xx=class Xx{constructor(e,t,r){le(this,Sh);ie(this,"allowLoose");le(this,fs);le(this,Fs);le(this,$u);le(this,Fu);le(this,Zc);Xe(this,{allowLoose:!!t}),z(this,fs,Gr(e)),z(this,$u,0),z(this,Fu,null),z(this,Zc,r??1024),z(this,Fs,0)}get data(){return Oe(x(this,fs))}get dataLength(){return x(this,fs).length}get consumed(){return x(this,Fs)}get bytes(){return new Uint8Array(x(this,fs))}subReader(e){const t=new Xx(x(this,fs).slice(x(this,Fs)+e),this.allowLoose,x(this,Zc));return z(t,Fu,this),t}readBytes(e,t){let r=be(this,Sh,O5).call(this,0,e,!!t);return be(this,Sh,V_).call(this,e),z(this,Fs,x(this,Fs)+r.length),r.slice(0,e)}readValue(){return av(this.readBytes(Vr))}readIndex(){return m7(this.readBytes(Vr))}};fs=new WeakMap,Fs=new WeakMap,$u=new WeakMap,Fu=new WeakMap,Zc=new WeakMap,Sh=new WeakSet,V_=function(e){var t;if(x(this,Fu))return be(t=x(this,Fu),Sh,V_).call(t,e);z(this,$u,x(this,$u)+e),ye(x(this,Zc)<1||x(this,$u)<=x(this,Zc)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${x(this,Zc)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Gr(x(this,fs)),offset:x(this,Fs),length:e,info:{bytesRead:x(this,$u),dataLength:this.dataLength}})},O5=function(e,t,r){let s=Math.ceil(t/Vr)*Vr;return x(this,Fs)+s>x(this,fs).length&&(this.allowLoose&&r&&x(this,Fs)+t<=x(this,fs).length?s=t:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Gr(x(this,fs)),length:x(this,fs).length,offset:x(this,Fs)+s})),x(this,fs).slice(x(this,Fs),x(this,Fs)+s)};let G_=Xx;function nE(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function kS(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function $7(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nE(n.outputLen),nE(n.blockLen)}function lp(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function R5(n,e){kS(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const fC=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const D5=n=>n instanceof Uint8Array,F7=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),pC=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ua=(n,e)=>n<<32-e|n>>>e,z7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!z7)throw new Error("Non little-endian hardware is not supported");function H7(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ov(n){if(typeof n=="string"&&(n=H7(n)),!D5(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function j7(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!D5(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}let BS=class{clone(){return this._cloneInto()}};function LS(n){const e=r=>n().update(ov(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function q7(n=32){if(fC&&typeof fC.getRandomValues=="function")return fC.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class P5 extends BS{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,$7(e);const r=ov(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return lp(this),this.iHash.update(e),this}digestInto(e){lp(this),kS(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const U5=(n,e,t)=>new P5(n,e).update(t).digest();U5.create=(n,e)=>new P5(n,e);function G7(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}class k5 extends BS{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pC(this.buffer)}update(e){lp(this);const{view:t,buffer:r,blockLen:s}=this;e=ov(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=pC(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lp(this),R5(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;G7(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=pC(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}}const V7=(n,e,t)=>n&e^~n&t,K7=(n,e,t)=>n&e^n&t^e&t,W7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_c=new Uint32Array(64);let Y7=class extends k5{constructor(){super(64,32,8,!1),this.A=Cc[0]|0,this.B=Cc[1]|0,this.C=Cc[2]|0,this.D=Cc[3]|0,this.E=Cc[4]|0,this.F=Cc[5]|0,this.G=Cc[6]|0,this.H=Cc[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:h}=this;return[e,t,r,s,i,o,l,h]}set(e,t,r,s,i,o,l,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=h|0}process(e,t){for(let g=0;g<16;g++,t+=4)_c[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=_c[g-15],b=_c[g-2],E=ua(y,7)^ua(y,18)^y>>>3,v=ua(b,17)^ua(b,19)^b>>>10;_c[g]=v+_c[g-7]+E+_c[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:h,G:d,H:p}=this;for(let g=0;g<64;g++){const y=ua(l,6)^ua(l,11)^ua(l,25),b=p+y+V7(l,h,d)+W7[g]+_c[g]|0,v=(ua(r,2)^ua(r,13)^ua(r,22))+K7(r,s,i)|0;p=d,d=h,h=l,l=o+b|0,o=i,i=s,s=r,r=b+v|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,h,d,p)}roundClean(){_c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const B5=LS(()=>new Y7),Zw=BigInt(2**32-1),K_=BigInt(32);function L5(n,e=!1){return e?{h:Number(n&Zw),l:Number(n>>K_&Zw)}:{h:Number(n>>K_&Zw)|0,l:Number(n&Zw)|0}}function M5(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=L5(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const Q7=(n,e)=>BigInt(n>>>0)<<K_|BigInt(e>>>0),Z7=(n,e,t)=>n>>>t,X7=(n,e,t)=>n<<32-t|e>>>t,J7=(n,e,t)=>n>>>t|e<<32-t,e$=(n,e,t)=>n<<32-t|e>>>t,t$=(n,e,t)=>n<<64-t|e>>>t-32,n$=(n,e,t)=>n>>>t-32|e<<64-t,r$=(n,e)=>e,s$=(n,e)=>n,$5=(n,e,t)=>n<<t|e>>>32-t,F5=(n,e,t)=>e<<t|n>>>32-t,z5=(n,e,t)=>e<<t-32|n>>>64-t,H5=(n,e,t)=>n<<t-32|e>>>64-t;function i$(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const a$=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),o$=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,c$=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),l$=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,u$=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),h$=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,ut={fromBig:L5,split:M5,toBig:Q7,shrSH:Z7,shrSL:X7,rotrSH:J7,rotrSL:e$,rotrBH:t$,rotrBL:n$,rotr32H:r$,rotr32L:s$,rotlSH:$5,rotlSL:F5,rotlBH:z5,rotlBL:H5,add:i$,add3L:a$,add3H:o$,add4L:c$,add4H:l$,add5H:h$,add5L:u$},[d$,f$]=ut.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Sc=new Uint32Array(80),xc=new Uint32Array(80);class p$ extends k5{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:E,Hh:v,Hl:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=E|0,this.Hh=v|0,this.Hl=A|0}process(e,t){for(let N=0;N<16;N++,t+=4)Sc[N]=e.getUint32(t),xc[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){const k=Sc[N-15]|0,R=xc[N-15]|0,P=ut.rotrSH(k,R,1)^ut.rotrSH(k,R,8)^ut.shrSH(k,R,7),F=ut.rotrSL(k,R,1)^ut.rotrSL(k,R,8)^ut.shrSL(k,R,7),$=Sc[N-2]|0,B=xc[N-2]|0,H=ut.rotrSH($,B,19)^ut.rotrBH($,B,61)^ut.shrSH($,B,6),j=ut.rotrSL($,B,19)^ut.rotrBL($,B,61)^ut.shrSL($,B,6),W=ut.add4L(F,j,xc[N-7],xc[N-16]),ne=ut.add4H(W,P,H,Sc[N-7],Sc[N-16]);Sc[N]=ne|0,xc[N]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:E,Gh:v,Gl:A,Hh:S,Hl:T}=this;for(let N=0;N<80;N++){const k=ut.rotrSH(g,y,14)^ut.rotrSH(g,y,18)^ut.rotrBH(g,y,41),R=ut.rotrSL(g,y,14)^ut.rotrSL(g,y,18)^ut.rotrBL(g,y,41),P=g&b^~g&v,F=y&E^~y&A,$=ut.add5L(T,R,F,f$[N],xc[N]),B=ut.add5H($,S,k,P,d$[N],Sc[N]),H=$|0,j=ut.rotrSH(r,s,28)^ut.rotrBH(r,s,34)^ut.rotrBH(r,s,39),W=ut.rotrSL(r,s,28)^ut.rotrBL(r,s,34)^ut.rotrBL(r,s,39),ne=r&i^r&l^i&l,J=s&o^s&h^o&h;S=v|0,T=A|0,v=b|0,A=E|0,b=g|0,E=y|0,{h:g,l:y}=ut.add(d|0,p|0,B|0,H|0),d=l|0,p=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const I=ut.add3L(H,W,J);r=ut.add3H(I,B,j,ne),s=I|0}({h:r,l:s}=ut.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ut.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=ut.add(this.Ch|0,this.Cl|0,l|0,h|0),{h:d,l:p}=ut.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=ut.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:E}=ut.add(this.Fh|0,this.Fl|0,b|0,E|0),{h:v,l:A}=ut.add(this.Gh|0,this.Gl|0,v|0,A|0),{h:S,l:T}=ut.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(r,s,i,o,l,h,d,p,g,y,b,E,v,A,S,T)}roundClean(){Sc.fill(0),xc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const g$=LS(()=>new p$);function m$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const EO=m$();EO.crypto||EO.msCrypto;function y$(n){switch(n){case"sha256":return B5.create();case"sha512":return g$.create()}Q(!1,"invalid hashing algorithm name","algorithm",n)}const[j5,q5,G5]=[[],[],[]],w$=BigInt(0),Kg=BigInt(1),b$=BigInt(2),E$=BigInt(7),v$=BigInt(256),A$=BigInt(113);for(let n=0,e=Kg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],j5.push(2*(5*r+t)),q5.push((n+1)*(n+2)/2%64);let s=w$;for(let i=0;i<7;i++)e=(e<<Kg^(e>>E$)*A$)%v$,e&b$&&(s^=Kg<<(Kg<<BigInt(i))-Kg);G5.push(s)}const[C$,_$]=M5(G5,!0),vO=(n,e,t)=>t>32?z5(n,e,t):$5(n,e,t),AO=(n,e,t)=>t>32?H5(n,e,t):F5(n,e,t);function S$(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,d=t[h],p=t[h+1],g=vO(d,p,1)^t[l],y=AO(d,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=q5[o],h=vO(s,i,l),d=AO(s,i,l),p=j5[o];s=n[p],i=n[p+1],n[p]=h,n[p+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=C$[r],n[1]^=_$[r]}t.fill(0)}let x$=class V5 extends BS{constructor(e,t,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,nE(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=F7(this.state)}keccak(){S$(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){lp(this);const{blockLen:t,state:r}=this;e=ov(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){lp(this,!1),kS(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(R5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new V5(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const N$=(n,e,t)=>LS(()=>new x$(e,n,t)),T$=N$(1,136,256/8);let K5=!1;const W5=function(n){return T$(n)};let Y5=W5;function Bn(n){const e=pt(n,"data");return Oe(Y5(e))}Bn._=W5;Bn.lock=function(){K5=!0};Bn.register=function(n){if(K5)throw new TypeError("keccak256 is locked");Y5=n};Object.freeze(Bn);const Q5=function(n){return y$("sha256").update(n).digest()};let Z5=Q5,X5=!1;function Tp(n){const e=pt(n,"data");return Oe(Z5(e))}Tp._=Q5;Tp.lock=function(){X5=!0};Tp.register=function(n){if(X5)throw new Error("sha256 is locked");Z5=n};Object.freeze(Tp);Object.freeze(Tp);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const J5=BigInt(0),cv=BigInt(1),I$=BigInt(2),lv=n=>n instanceof Uint8Array,O$=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function up(n){if(!lv(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=O$[n[t]];return e}function e4(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function MS(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function hp(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const s=r*2,i=n.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Xu(n){return MS(up(n))}function $S(n){if(!lv(n))throw new Error("Uint8Array expected");return MS(up(Uint8Array.from(n).reverse()))}function dp(n,e){return hp(n.toString(16).padStart(e*2,"0"))}function FS(n,e){return dp(n,e).reverse()}function R$(n){return hp(e4(n))}function Mi(n,e,t){let r;if(typeof e=="string")try{r=hp(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(lv(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function Km(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!lv(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function D$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function P$(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function U$(n){let e;for(e=0;n>J5;n>>=cv,e+=1);return e}function k$(n,e){return n>>BigInt(e)&cv}const B$=(n,e,t)=>n|(t?cv:J5)<<BigInt(e),zS=n=>(I$<<BigInt(n-1))-cv,gC=n=>new Uint8Array(n),CO=n=>Uint8Array.from(n);function t4(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=gC(n),s=gC(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},l=(...g)=>t(s,r,...g),h=(g=gC())=>{s=l(CO([0]),g),r=l(),g.length!==0&&(s=l(CO([1]),g),r=l())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const y=[];for(;g<e;){r=l();const b=r.slice();y.push(b),g+=r.length}return Km(...y)};return(g,y)=>{o(),h(g);let b;for(;!(b=y(d()));)h();return o(),b}}const L$={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function ly(n,e,t={}){const r=(s,i,o)=>{const l=L$[i];if(typeof l!="function")throw new Error(`Invalid validator "${i}", expected function`);const h=n[s];if(!(o&&h===void 0)&&!l(h,n))throw new Error(`Invalid param ${String(s)}=${h} (${typeof h}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}const M$=Object.freeze(Object.defineProperty({__proto__:null,bitGet:k$,bitLen:U$,bitMask:zS,bitSet:B$,bytesToHex:up,bytesToNumberBE:Xu,bytesToNumberLE:$S,concatBytes:Km,createHmacDrbg:t4,ensureBytes:Mi,equalBytes:D$,hexToBytes:hp,hexToNumber:MS,numberToBytesBE:dp,numberToBytesLE:FS,numberToHexUnpadded:e4,numberToVarBytesBE:R$,utf8ToBytes:P$,validateObject:ly},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sr=BigInt(0),On=BigInt(1),fu=BigInt(2),$$=BigInt(3),W_=BigInt(4),_O=BigInt(5),SO=BigInt(8);BigInt(9);BigInt(16);function ys(n,e){const t=n%e;return t>=sr?t:e+t}function F$(n,e,t){if(t<=sr||e<sr)throw new Error("Expected power/modulo > 0");if(t===On)return sr;let r=On;for(;e>sr;)e&On&&(r=r*n%t),n=n*n%t,e>>=On;return r}function ai(n,e,t){let r=n;for(;e-- >sr;)r*=r,r%=t;return r}function Y_(n,e){if(n===sr||e<=sr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=ys(n,e),r=e,s=sr,i=On;for(;t!==sr;){const l=r/t,h=r%t,d=s-i*l;r=t,t=h,s=i,i=d}if(r!==On)throw new Error("invert: does not exist");return ys(s,e)}function z$(n){const e=(n-On)/fu;let t,r,s;for(t=n-On,r=0;t%fu===sr;t/=fu,r++);for(s=fu;s<n&&F$(s,e,n)!==n-On;s++);if(r===1){const o=(n+On)/W_;return function(h,d){const p=h.pow(d,o);if(!h.eql(h.sqr(p),d))throw new Error("Cannot find square root");return p}}const i=(t+On)/fu;return function(l,h){if(l.pow(h,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let d=r,p=l.pow(l.mul(l.ONE,s),t),g=l.pow(h,i),y=l.pow(h,t);for(;!l.eql(y,l.ONE);){if(l.eql(y,l.ZERO))return l.ZERO;let b=1;for(let v=l.sqr(y);b<d&&!l.eql(v,l.ONE);b++)v=l.sqr(v);const E=l.pow(p,On<<BigInt(d-b-1));p=l.sqr(E),g=l.mul(g,E),y=l.mul(y,p),d=b}return g}}function H$(n){if(n%W_===$$){const e=(n+On)/W_;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%SO===_O){const e=(n-_O)/SO;return function(r,s){const i=r.mul(s,fu),o=r.pow(i,e),l=r.mul(s,o),h=r.mul(r.mul(l,fu),o),d=r.mul(l,r.sub(h,r.ONE));if(!r.eql(r.sqr(d),s))throw new Error("Cannot find square root");return d}}return z$(n)}const j$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function q$(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=j$.reduce((r,s)=>(r[s]="function",r),e);return ly(n,t)}function G$(n,e,t){if(t<sr)throw new Error("Expected power > 0");if(t===sr)return n.ONE;if(t===On)return e;let r=n.ONE,s=e;for(;t>sr;)t&On&&(r=n.mul(r,s)),s=n.sqr(s),t>>=On;return r}function V$(n,e){const t=new Array(e.length),r=e.reduce((i,o,l)=>n.is0(o)?i:(t[l]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,l)=>n.is0(o)?i:(t[l]=n.mul(i,t[l]),n.mul(i,o)),s),t}function n4(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function K$(n,e,t=!1,r={}){if(n<=sr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=n4(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=H$(n),l=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:zS(s),ZERO:sr,ONE:On,create:h=>ys(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return sr<=h&&h<n},is0:h=>h===sr,isOdd:h=>(h&On)===On,neg:h=>ys(-h,n),eql:(h,d)=>h===d,sqr:h=>ys(h*h,n),add:(h,d)=>ys(h+d,n),sub:(h,d)=>ys(h-d,n),mul:(h,d)=>ys(h*d,n),pow:(h,d)=>G$(l,h,d),div:(h,d)=>ys(h*Y_(d,n),n),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>Y_(h,n),sqrt:r.sqrt||(h=>o(l,h)),invertBatch:h=>V$(l,h),cmov:(h,d,p)=>p?d:h,toBytes:h=>t?FS(h,i):dp(h,i),fromBytes:h=>{if(h.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${h.length}`);return t?$S(h):Xu(h)}});return Object.freeze(l)}function r4(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function s4(n){const e=r4(n);return e+Math.ceil(e/2)}function W$(n,e,t=!1){const r=n.length,s=r4(e),i=s4(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=t?Xu(n):$S(n),l=ys(o,e-On)+On;return t?FS(l,s):dp(l,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Y$=BigInt(0),mC=BigInt(1);function Q$(n,e){const t=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=n.ZERO,l=s;for(;i>Y$;)i&mC&&(o=o.add(l)),l=l.double(),i>>=mC;return o},precomputeWindow(s,i){const{windows:o,windowSize:l}=r(i),h=[];let d=s,p=d;for(let g=0;g<o;g++){p=d,h.push(p);for(let y=1;y<l;y++)p=p.add(d),h.push(p);d=p.double()}return h},wNAF(s,i,o){const{windows:l,windowSize:h}=r(s);let d=n.ZERO,p=n.BASE;const g=BigInt(2**s-1),y=2**s,b=BigInt(s);for(let E=0;E<l;E++){const v=E*h;let A=Number(o&g);o>>=b,A>h&&(A-=y,o+=mC);const S=v,T=v+Math.abs(A)-1,N=E%2!==0,k=A<0;A===0?p=p.add(t(N,i[S])):d=d.add(t(k,i[T]))}return{p:d,f:p}},wNAFCached(s,i,o,l){const h=s._WINDOW_SIZE||1;let d=i.get(s);return d||(d=this.precomputeWindow(s,h),h!==1&&i.set(s,l(d))),this.wNAF(h,d,o)}}}function i4(n){return q$(n.Fp),ly(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...n4(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Z$(n){const e=i4(n);ly(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:X$,hexToBytes:J$}=M$,vu={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=vu;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:X$(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=vu,t=typeof n=="string"?J$(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=vu._parseInt(t.subarray(2)),{d:o,l}=vu._parseInt(i);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const e=d=>Number.parseInt(d[0],16)&8?"00"+d:d,t=d=>{const p=d.toString(16);return p.length&1?`0${p}`:p},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,l=t(i),h=t(o);return`30${t(o+i+4)}02${h}${s}02${l}${r}`}},Bo=BigInt(0),wi=BigInt(1);BigInt(2);const xO=BigInt(3);BigInt(4);function eF(n){const e=Z$(n),{Fp:t}=e,r=e.toBytes||((E,v,A)=>{const S=v.toAffine();return Km(Uint8Array.from([4]),t.toBytes(S.x),t.toBytes(S.y))}),s=e.fromBytes||(E=>{const v=E.subarray(1),A=t.fromBytes(v.subarray(0,t.BYTES)),S=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:A,y:S}});function i(E){const{a:v,b:A}=e,S=t.sqr(E),T=t.mul(S,E);return t.add(t.add(T,t.mul(E,v)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(E){return typeof E=="bigint"&&Bo<E&&E<e.n}function l(E){if(!o(E))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(E){const{allowedPrivateKeyLengths:v,nByteLength:A,wrapPrivateKey:S,n:T}=e;if(v&&typeof E!="bigint"){if(E instanceof Uint8Array&&(E=up(E)),typeof E!="string"||!v.includes(E.length))throw new Error("Invalid key");E=E.padStart(A*2,"0")}let N;try{N=typeof E=="bigint"?E:Xu(Mi("private key",E,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof E}`)}return S&&(N=ys(N,T)),l(N),N}const d=new Map;function p(E){if(!(E instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(v,A,S){if(this.px=v,this.py=A,this.pz=S,v==null||!t.isValid(v))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(S==null||!t.isValid(S))throw new Error("z required")}static fromAffine(v){const{x:A,y:S}=v||{};if(!v||!t.isValid(A)||!t.isValid(S))throw new Error("invalid affine point");if(v instanceof g)throw new Error("projective point not allowed");const T=N=>t.eql(N,t.ZERO);return T(A)&&T(S)?g.ZERO:new g(A,S,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const A=t.invertBatch(v.map(S=>S.pz));return v.map((S,T)=>S.toAffine(A[T])).map(g.fromAffine)}static fromHex(v){const A=g.fromAffine(s(Mi("pointHex",v)));return A.assertValidity(),A}static fromPrivateKey(v){return g.BASE.multiply(h(v))}_setWindowSize(v){this._WINDOW_SIZE=v,d.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:A}=this.toAffine();if(!t.isValid(v)||!t.isValid(A))throw new Error("bad point: x or y not FE");const S=t.sqr(A),T=i(v);if(!t.eql(S,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){p(v);const{px:A,py:S,pz:T}=this,{px:N,py:k,pz:R}=v,P=t.eql(t.mul(A,R),t.mul(N,T)),F=t.eql(t.mul(S,R),t.mul(k,T));return P&&F}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:A}=e,S=t.mul(A,xO),{px:T,py:N,pz:k}=this;let R=t.ZERO,P=t.ZERO,F=t.ZERO,$=t.mul(T,T),B=t.mul(N,N),H=t.mul(k,k),j=t.mul(T,N);return j=t.add(j,j),F=t.mul(T,k),F=t.add(F,F),R=t.mul(v,F),P=t.mul(S,H),P=t.add(R,P),R=t.sub(B,P),P=t.add(B,P),P=t.mul(R,P),R=t.mul(j,R),F=t.mul(S,F),H=t.mul(v,H),j=t.sub($,H),j=t.mul(v,j),j=t.add(j,F),F=t.add($,$),$=t.add(F,$),$=t.add($,H),$=t.mul($,j),P=t.add(P,$),H=t.mul(N,k),H=t.add(H,H),$=t.mul(H,j),R=t.sub(R,$),F=t.mul(H,B),F=t.add(F,F),F=t.add(F,F),new g(R,P,F)}add(v){p(v);const{px:A,py:S,pz:T}=this,{px:N,py:k,pz:R}=v;let P=t.ZERO,F=t.ZERO,$=t.ZERO;const B=e.a,H=t.mul(e.b,xO);let j=t.mul(A,N),W=t.mul(S,k),ne=t.mul(T,R),J=t.add(A,S),I=t.add(N,k);J=t.mul(J,I),I=t.add(j,W),J=t.sub(J,I),I=t.add(A,T);let _=t.add(N,R);return I=t.mul(I,_),_=t.add(j,ne),I=t.sub(I,_),_=t.add(S,T),P=t.add(k,R),_=t.mul(_,P),P=t.add(W,ne),_=t.sub(_,P),$=t.mul(B,I),P=t.mul(H,ne),$=t.add(P,$),P=t.sub(W,$),$=t.add(W,$),F=t.mul(P,$),W=t.add(j,j),W=t.add(W,j),ne=t.mul(B,ne),I=t.mul(H,I),W=t.add(W,ne),ne=t.sub(j,ne),ne=t.mul(B,ne),I=t.add(I,ne),j=t.mul(W,I),F=t.add(F,j),j=t.mul(_,I),P=t.mul(J,P),P=t.sub(P,j),j=t.mul(J,W),$=t.mul(_,$),$=t.add($,j),new g(P,F,$)}subtract(v){return this.add(v.negate())}is0(){return this.equals(g.ZERO)}wNAF(v){return b.wNAFCached(this,d,v,A=>{const S=t.invertBatch(A.map(T=>T.pz));return A.map((T,N)=>T.toAffine(S[N])).map(g.fromAffine)})}multiplyUnsafe(v){const A=g.ZERO;if(v===Bo)return A;if(l(v),v===wi)return this;const{endo:S}=e;if(!S)return b.unsafeLadder(this,v);let{k1neg:T,k1:N,k2neg:k,k2:R}=S.splitScalar(v),P=A,F=A,$=this;for(;N>Bo||R>Bo;)N&wi&&(P=P.add($)),R&wi&&(F=F.add($)),$=$.double(),N>>=wi,R>>=wi;return T&&(P=P.negate()),k&&(F=F.negate()),F=new g(t.mul(F.px,S.beta),F.py,F.pz),P.add(F)}multiply(v){l(v);let A=v,S,T;const{endo:N}=e;if(N){const{k1neg:k,k1:R,k2neg:P,k2:F}=N.splitScalar(A);let{p:$,f:B}=this.wNAF(R),{p:H,f:j}=this.wNAF(F);$=b.constTimeNegate(k,$),H=b.constTimeNegate(P,H),H=new g(t.mul(H.px,N.beta),H.py,H.pz),S=$.add(H),T=B.add(j)}else{const{p:k,f:R}=this.wNAF(A);S=k,T=R}return g.normalizeZ([S,T])[0]}multiplyAndAddUnsafe(v,A,S){const T=g.BASE,N=(R,P)=>P===Bo||P===wi||!R.equals(T)?R.multiplyUnsafe(P):R.multiply(P),k=N(this,A).add(N(v,S));return k.is0()?void 0:k}toAffine(v){const{px:A,py:S,pz:T}=this,N=this.is0();v==null&&(v=N?t.ONE:t.inv(T));const k=t.mul(A,v),R=t.mul(S,v),P=t.mul(T,v);if(N)return{x:t.ZERO,y:t.ZERO};if(!t.eql(P,t.ONE))throw new Error("invZ was invalid");return{x:k,y:R}}isTorsionFree(){const{h:v,isTorsionFree:A}=e;if(v===wi)return!0;if(A)return A(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:A}=e;return v===wi?this:A?A(g,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(g,this,v)}toHex(v=!0){return up(this.toRawBytes(v))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,b=Q$(g,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:h,weierstrassEquation:i,isWithinCurveOrder:o}}function tF(n){const e=i4(n);return ly(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function nF(n){const e=tF(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(I){return Bo<I&&I<t.ORDER}function l(I){return ys(I,r)}function h(I){return Y_(I,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:g,isWithinCurveOrder:y}=eF({...e,toBytes(I,_,L){const q=_.toAffine(),K=t.toBytes(q.x),O=Km;return L?O(Uint8Array.from([_.hasEvenY()?2:3]),K):O(Uint8Array.from([4]),K,t.toBytes(q.y))},fromBytes(I){const _=I.length,L=I[0],q=I.subarray(1);if(_===s&&(L===2||L===3)){const K=Xu(q);if(!o(K))throw new Error("Point is not on curve");const O=g(K);let V=t.sqrt(O);const Z=(V&wi)===wi;return(L&1)===1!==Z&&(V=t.neg(V)),{x:K,y:V}}else if(_===i&&L===4){const K=t.fromBytes(q.subarray(0,t.BYTES)),O=t.fromBytes(q.subarray(t.BYTES,2*t.BYTES));return{x:K,y:O}}else throw new Error(`Point of length ${_} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),b=I=>up(dp(I,e.nByteLength));function E(I){const _=r>>wi;return I>_}function v(I){return E(I)?l(-I):I}const A=(I,_,L)=>Xu(I.slice(_,L));class S{constructor(_,L,q){this.r=_,this.s=L,this.recovery=q,this.assertValidity()}static fromCompact(_){const L=e.nByteLength;return _=Mi("compactSignature",_,L*2),new S(A(_,0,L),A(_,L,2*L))}static fromDER(_){const{r:L,s:q}=vu.toSig(Mi("DER",_));return new S(L,q)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new S(this.r,this.s,_)}recoverPublicKey(_){const{r:L,s:q,recovery:K}=this,O=F(Mi("msgHash",_));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const V=K===2||K===3?L+e.n:L;if(V>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=(K&1)===0?"02":"03",re=d.fromHex(Z+b(V)),ee=h(V),he=l(-O*ee),me=l(q*ee),Ce=d.BASE.multiplyAndAddUnsafe(re,he,me);if(!Ce)throw new Error("point at infinify");return Ce.assertValidity(),Ce}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return hp(this.toDERHex())}toDERHex(){return vu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hp(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const T={isValidPrivateKey(I){try{return p(I),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const I=s4(e.n);return W$(e.randomBytes(I),e.n)},precompute(I=8,_=d.BASE){return _._setWindowSize(I),_.multiply(BigInt(3)),_}};function N(I,_=!0){return d.fromPrivateKey(I).toRawBytes(_)}function k(I){const _=I instanceof Uint8Array,L=typeof I=="string",q=(_||L)&&I.length;return _?q===s||q===i:L?q===2*s||q===2*i:I instanceof d}function R(I,_,L=!0){if(k(I))throw new Error("first arg must be private key");if(!k(_))throw new Error("second arg must be public key");return d.fromHex(_).multiply(p(I)).toRawBytes(L)}const P=e.bits2int||function(I){const _=Xu(I),L=I.length*8-e.nBitLength;return L>0?_>>BigInt(L):_},F=e.bits2int_modN||function(I){return l(P(I))},$=zS(e.nBitLength);function B(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Bo<=I&&I<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return dp(I,e.nByteLength)}function H(I,_,L=j){if(["recovered","canonical"].some(Ne=>Ne in L))throw new Error("sign() legacy options not supported");const{hash:q,randomBytes:K}=e;let{lowS:O,prehash:V,extraEntropy:Z}=L;O==null&&(O=!0),I=Mi("msgHash",I),V&&(I=Mi("prehashed msgHash",q(I)));const re=F(I),ee=p(_),he=[B(ee),B(re)];if(Z!=null){const Ne=Z===!0?K(t.BYTES):Z;he.push(Mi("extraEntropy",Ne))}const me=Km(...he),Ce=re;function Pe(Ne){const Qe=P(Ne);if(!y(Qe))return;const Qt=h(Qe),Lt=d.BASE.multiply(Qe).toAffine(),wn=l(Lt.x);if(wn===Bo)return;const fn=l(Qt*l(Ce+wn*ee));if(fn===Bo)return;let ra=(Lt.x===wn?0:2)|Number(Lt.y&wi),Bh=fn;return O&&E(fn)&&(Bh=v(fn),ra^=1),new S(wn,Bh,ra)}return{seed:me,k2sig:Pe}}const j={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function ne(I,_,L=j){const{seed:q,k2sig:K}=H(I,_,L),O=e;return t4(O.hash.outputLen,O.nByteLength,O.hmac)(q,K)}d.BASE._setWindowSize(8);function J(I,_,L,q=W){var Lt;const K=I;if(_=Mi("msgHash",_),L=Mi("publicKey",L),"strict"in q)throw new Error("options.strict was renamed to lowS");const{lowS:O,prehash:V}=q;let Z,re;try{if(typeof K=="string"||K instanceof Uint8Array)try{Z=S.fromDER(K)}catch(wn){if(!(wn instanceof vu.Err))throw wn;Z=S.fromCompact(K)}else if(typeof K=="object"&&typeof K.r=="bigint"&&typeof K.s=="bigint"){const{r:wn,s:fn}=K;Z=new S(wn,fn)}else throw new Error("PARSE");re=d.fromHex(L)}catch(wn){if(wn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(O&&Z.hasHighS())return!1;V&&(_=e.hash(_));const{r:ee,s:he}=Z,me=F(_),Ce=h(he),Pe=l(me*Ce),Ne=l(ee*Ce),Qe=(Lt=d.BASE.multiplyAndAddUnsafe(re,Pe,Ne))==null?void 0:Lt.toAffine();return Qe?l(Qe.x)===ee:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:R,sign:ne,verify:J,ProjectivePoint:d,Signature:S,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rF(n){return{hash:n,hmac:(e,...t)=>U5(n,e,j7(...t)),randomBytes:q7}}function sF(n,e){const t=r=>nF({...n,...rF(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a4=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),NO=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),iF=BigInt(1),Q_=BigInt(2),TO=(n,e)=>(n+e/Q_)/e;function aF(n){const e=a4,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),l=BigInt(44),h=BigInt(88),d=n*n*n%e,p=d*d*n%e,g=ai(p,t,e)*p%e,y=ai(g,t,e)*p%e,b=ai(y,Q_,e)*d%e,E=ai(b,s,e)*b%e,v=ai(E,i,e)*E%e,A=ai(v,l,e)*v%e,S=ai(A,h,e)*A%e,T=ai(S,l,e)*v%e,N=ai(T,t,e)*p%e,k=ai(N,o,e)*E%e,R=ai(k,r,e)*d%e,P=ai(R,Q_,e);if(!Z_.eql(Z_.sqr(P),n))throw new Error("Cannot find square root");return P}const Z_=K$(a4,void 0,void 0,{sqrt:aF}),$c=sF({a:BigInt(0),b:BigInt(7),Fp:Z_,n:NO,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=NO,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-iF*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),l=TO(i*n,e),h=TO(-r*n,e);let d=ys(n-l*t-h*s,e),p=ys(-l*r-h*i,e);const g=d>o,y=p>o;if(g&&(d=e-d),y&&(p=e-p),d>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:g,k1:d,k2neg:y,k2:p}}}},B5);BigInt(0);$c.ProjectivePoint;const Wm="0x0000000000000000000000000000000000000000",IO="0x0000000000000000000000000000000000000000000000000000000000000000",OO=BigInt(0),RO=BigInt(1),DO=BigInt(2),PO=BigInt(27),UO=BigInt(28),Xw=BigInt(35),Cd={};function kO(n){return qo(qn(n),32)}var Tf,Aa,If,zu;const Li=class Li{constructor(e,t,r,s){le(this,Tf);le(this,Aa);le(this,If);le(this,zu);oy(e,Cd,"Signature"),z(this,Tf,t),z(this,Aa,r),z(this,If,s),z(this,zu,null)}get r(){return x(this,Tf)}set r(e){Q(lf(e)===32,"invalid r","value",e),z(this,Tf,Oe(e))}get s(){return Q(parseInt(x(this,Aa).substring(0,3))<8,"non-canonical s; use ._s","s",x(this,Aa)),x(this,Aa)}set s(e){Q(lf(e)===32,"invalid s","value",e),z(this,Aa,Oe(e))}get _s(){return x(this,Aa)}isValid(){return parseInt(x(this,Aa).substring(0,3))<8}get v(){return x(this,If)}set v(e){const t=lt(e,"value");Q(t===27||t===28,"invalid v","v",e),z(this,If,t)}get networkV(){return x(this,zu)}get legacyChainId(){const e=this.networkV;return e==null?null:Li.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=pt(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return xn([this.r,this.yParityAndS])}get serialized(){return xn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Li(Cd,this.r,this._s,this.v);return this.networkV&&z(e,zu,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=ze(e,"v");return t==PO||t==UO?OO:(Q(t>=Xw,"invalid EIP-155 v","v",e),(t-Xw)/DO)}static getChainIdV(e,t){return ze(e)*DO+BigInt(35+t-27)}static getNormalizedV(e){const t=ze(e);return t===OO||t===PO?27:t===RO||t===UO?28:(Q(t>=Xw,"invalid v","v",e),t&RO?27:28)}static from(e){function t(d,p){Q(d,p,"signature",e)}if(e==null)return new Li(Cd,IO,IO,27);if(typeof e=="string"){const d=pt(e,"signature");if(d.length===64){const p=Oe(d.slice(0,32)),g=d.slice(32,64),y=g[0]&128?28:27;return g[0]&=127,new Li(Cd,p,Oe(g),y)}if(d.length===65){const p=Oe(d.slice(0,32)),g=Oe(d.slice(32,64)),y=Li.getNormalizedV(d[64]);return new Li(Cd,p,g,y)}t(!1,"invalid raw signature length")}if(e instanceof Li)return e.clone();const r=e.r;t(r!=null,"missing r");const s=kO(r),i=function(d,p){if(d!=null)return kO(d);if(p!=null){t(on(p,32),"invalid yParityAndS");const g=pt(p);return g[0]&=127,Oe(g)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:l}=function(d,p,g){if(d!=null){const y=ze(d);return{networkV:y>=Xw?y:void 0,v:Li.getNormalizedV(y)}}if(p!=null)return t(on(p,32),"invalid yParityAndS"),{v:pt(p)[0]&128?28:27};if(g!=null){switch(lt(g,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),h=new Li(Cd,s,i,l);return o&&z(h,zu,o),t(e.yParity==null||lt(e.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}};Tf=new WeakMap,Aa=new WeakMap,If=new WeakMap,zu=new WeakMap;let Yr=Li;var To;const yu=class yu{constructor(e){le(this,To);Q(lf(e)===32,"invalid private key","privateKey","[REDACTED]"),z(this,To,Oe(e))}get privateKey(){return x(this,To)}get publicKey(){return yu.computePublicKey(x(this,To))}get compressedPublicKey(){return yu.computePublicKey(x(this,To),!0)}sign(e){Q(lf(e)===32,"invalid digest length","digest",e);const t=$c.sign(Gr(e),Gr(x(this,To)),{lowS:!0});return Yr.from({r:vl(t.r,32),s:vl(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=yu.computePublicKey(e);return Oe($c.getSharedSecret(Gr(x(this,To)),pt(t),!1))}static computePublicKey(e,t){let r=pt(e,"key");if(r.length===32){const i=$c.getPublicKey(r,!!t);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=$c.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(t))}static recoverPublicKey(e,t){Q(lf(e)===32,"invalid digest length","digest",e);const r=Yr.from(t);let s=$c.Signature.fromCompact(Gr(xn([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Gr(e));return Q(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,r){const s=$c.ProjectivePoint.fromHex(yu.computePublicKey(e).substring(2)),i=$c.ProjectivePoint.fromHex(yu.computePublicKey(t).substring(2));return"0x"+s.add(i).toHex(!!r)}};To=new WeakMap;let Ym=yu;const oF=BigInt(0),cF=BigInt(36);function BO(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const r=pt(Bn(t));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const HS={};for(let n=0;n<10;n++)HS[String(n)]=String(n);for(let n=0;n<26;n++)HS[String.fromCharCode(65+n)]=String(10+n);const LO=15;function lF(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>HS[r]).join("");for(;e.length>=LO;){let r=e.substring(0,LO);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const uF=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function hF(n){n=n.toLowerCase();let e=oF;for(let t=0;t<n.length;t++)e=e*cF+uF[n[t]];return e}function zt(n){if(Q(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=BO(n);return Q(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(n.substring(2,4)===lF(n),"bad icap checksum","address",n);let e=hF(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return BO("0x"+e)}Q(!1,"invalid address","address",n)}function dF(n){const e=zt(n.from);let r=ze(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,zt(Sn(Bn(Al([e,r])),12))}function o4(n){return n&&typeof n.getAddress=="function"}async function yC(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ye(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),zt(t)}function Kr(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?zt(n):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),yC(n,e.resolveName(n)));if(o4(n))return yC(n,n.getAddress());if(n&&typeof n.then=="function")return yC(n,n);Q(!1,"unsupported addressable value","target",n)}const vo={};function $e(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new Dr(vo,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function Tt(n,e){return new Dr(vo,`bytes${e||""}`,n,{size:e})}const MO=Symbol.for("_ethers_typed");var Hu;const Ao=class Ao{constructor(e,t,r,s){ie(this,"type");ie(this,"value");le(this,Hu);ie(this,"_typedSymbol");s==null&&(s=null),oy(vo,e,"Typed"),Xe(this,{_typedSymbol:MO,type:t,value:r}),z(this,Hu,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return x(this,Hu)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return x(this,Hu)===!0?-1:x(this,Hu)===!1?this.value.length:null}static from(e,t){return new Ao(vo,e,t)}static uint8(e){return $e(e,8)}static uint16(e){return $e(e,16)}static uint24(e){return $e(e,24)}static uint32(e){return $e(e,32)}static uint40(e){return $e(e,40)}static uint48(e){return $e(e,48)}static uint56(e){return $e(e,56)}static uint64(e){return $e(e,64)}static uint72(e){return $e(e,72)}static uint80(e){return $e(e,80)}static uint88(e){return $e(e,88)}static uint96(e){return $e(e,96)}static uint104(e){return $e(e,104)}static uint112(e){return $e(e,112)}static uint120(e){return $e(e,120)}static uint128(e){return $e(e,128)}static uint136(e){return $e(e,136)}static uint144(e){return $e(e,144)}static uint152(e){return $e(e,152)}static uint160(e){return $e(e,160)}static uint168(e){return $e(e,168)}static uint176(e){return $e(e,176)}static uint184(e){return $e(e,184)}static uint192(e){return $e(e,192)}static uint200(e){return $e(e,200)}static uint208(e){return $e(e,208)}static uint216(e){return $e(e,216)}static uint224(e){return $e(e,224)}static uint232(e){return $e(e,232)}static uint240(e){return $e(e,240)}static uint248(e){return $e(e,248)}static uint256(e){return $e(e,256)}static uint(e){return $e(e,256)}static int8(e){return $e(e,-8)}static int16(e){return $e(e,-16)}static int24(e){return $e(e,-24)}static int32(e){return $e(e,-32)}static int40(e){return $e(e,-40)}static int48(e){return $e(e,-48)}static int56(e){return $e(e,-56)}static int64(e){return $e(e,-64)}static int72(e){return $e(e,-72)}static int80(e){return $e(e,-80)}static int88(e){return $e(e,-88)}static int96(e){return $e(e,-96)}static int104(e){return $e(e,-104)}static int112(e){return $e(e,-112)}static int120(e){return $e(e,-120)}static int128(e){return $e(e,-128)}static int136(e){return $e(e,-136)}static int144(e){return $e(e,-144)}static int152(e){return $e(e,-152)}static int160(e){return $e(e,-160)}static int168(e){return $e(e,-168)}static int176(e){return $e(e,-176)}static int184(e){return $e(e,-184)}static int192(e){return $e(e,-192)}static int200(e){return $e(e,-200)}static int208(e){return $e(e,-208)}static int216(e){return $e(e,-216)}static int224(e){return $e(e,-224)}static int232(e){return $e(e,-232)}static int240(e){return $e(e,-240)}static int248(e){return $e(e,-248)}static int256(e){return $e(e,-256)}static int(e){return $e(e,-256)}static bytes1(e){return Tt(e,1)}static bytes2(e){return Tt(e,2)}static bytes3(e){return Tt(e,3)}static bytes4(e){return Tt(e,4)}static bytes5(e){return Tt(e,5)}static bytes6(e){return Tt(e,6)}static bytes7(e){return Tt(e,7)}static bytes8(e){return Tt(e,8)}static bytes9(e){return Tt(e,9)}static bytes10(e){return Tt(e,10)}static bytes11(e){return Tt(e,11)}static bytes12(e){return Tt(e,12)}static bytes13(e){return Tt(e,13)}static bytes14(e){return Tt(e,14)}static bytes15(e){return Tt(e,15)}static bytes16(e){return Tt(e,16)}static bytes17(e){return Tt(e,17)}static bytes18(e){return Tt(e,18)}static bytes19(e){return Tt(e,19)}static bytes20(e){return Tt(e,20)}static bytes21(e){return Tt(e,21)}static bytes22(e){return Tt(e,22)}static bytes23(e){return Tt(e,23)}static bytes24(e){return Tt(e,24)}static bytes25(e){return Tt(e,25)}static bytes26(e){return Tt(e,26)}static bytes27(e){return Tt(e,27)}static bytes28(e){return Tt(e,28)}static bytes29(e){return Tt(e,29)}static bytes30(e){return Tt(e,30)}static bytes31(e){return Tt(e,31)}static bytes32(e){return Tt(e,32)}static address(e){return new Ao(vo,"address",e)}static bool(e){return new Ao(vo,"bool",!!e)}static bytes(e){return new Ao(vo,"bytes",e)}static string(e){return new Ao(vo,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Ao(vo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===MO}static dereference(e,t){if(Ao.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Hu=new WeakMap;let Dr=Ao;class fF extends Zo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Dr.dereference(t,"string");try{r=zt(r)}catch(s){return this._throwError(s.message,t)}return e.writeValue(r)}decode(e){return zt(vl(e.readValue(),20))}}class pF extends Zo{constructor(t){super(t.name,t.type,"_",t.dynamic);ie(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function c4(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let h={};r=e.map(d=>{const p=d.localName;return ye(p,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:d},value:t}),ye(!h[p],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:d},value:t}),h[p]=!0,t[p]})}else Q(!1,"invalid tuple value","tuple",t);Q(e.length===r.length,"types/value length mismatch","tuple",t);let s=new q_,i=new q_,o=[];e.forEach((h,d)=>{let p=r[d];if(h.dynamic){let g=i.length;h.encode(i,p);let y=s.writeUpdatableValue();o.push(b=>{y(b+g)})}else h.encode(s,p)}),o.forEach(h=>{h(s.length)});let l=n.appendWriter(s);return l+=n.appendWriter(i),l}function l4(n,e){let t=[],r=[],s=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let l=n.readIndex(),h=s.subReader(l);try{o=i.decode(h)}catch(d){if(yr(d,"BUFFER_OVERRUN"))throw d;o=d,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(l){if(yr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),r.push(i.localName||null)}),cp.fromItems(t,r)}class gF extends Zo{constructor(t,r,s){const i=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",i,s,o);ie(this,"coder");ie(this,"length");Xe(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(t);return r}encode(t,r){const s=Dr.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,t.writeValue(s.length)),g5(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let l=0;l<s.length;l++)o.push(this.coder);return c4(t,o,s)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),ye(r*Vr<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*Vr,length:t.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new pF(this.coder));return l4(t,s)}}class mF extends Zo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=Dr.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class u4 extends Zo{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Gr(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class yF extends u4{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class wF extends Zo{constructor(t,r){let s="bytes"+String(t);super(s,s,r,!1);ie(this,"size");Xe(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let s=Gr(Dr.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(s)}decode(t){return Oe(t.readBytes(this.size))}}const bF=new Uint8Array([]);class EF extends Zo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(bF)}decode(e){return e.readBytes(0),null}}const vF=BigInt(0),AF=BigInt(1),CF=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class _F extends Zo{constructor(t,r,s){const i=(r?"int":"uint")+t*8;super(i,i,s,!1);ie(this,"size");ie(this,"signed");Xe(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let s=ze(Dr.dereference(r,this.type)),i=Eu(CF,Vr*8);if(this.signed){let o=Eu(i,this.size*8-1);(s>o||s<-(o+AF))&&this._throwError("value out-of-bounds",r),s=w5(s,8*Vr)}else(s<vF||s>Eu(i,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(s)}decode(t){let r=Eu(t.readValue(),this.size*8);return this.signed&&(r=Jb(r,this.size*8)),r}}class SF extends u4{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Ma(Dr.dereference(t,"string")))}decode(e){return eE(super.decode(e))}}class Jw extends Zo{constructor(t,r){let s=!1;const i=[];t.forEach(l=>{l.dynamic&&(s=!0),i.push(l.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ie(this,"coders");Xe(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(s=>{t.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[i]))}),Object.freeze(t)}encode(t,r){const s=Dr.dereference(r,"tuple");return c4(t,this.coders,s)}decode(t){return l4(t,this.coders)}}function wC(n,e){return{address:zt(n),storageKeys:e.map((t,r)=>(Q(on(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function xh(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(Q(t.length===2,"invalid slot set",`value[${r}]`,t),wC(t[0],t[1])):(Q(t!=null&&typeof t=="object","invalid address-slot set","value",n),wC(t.address,t.storageKeys)));Q(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((s,i)=>(s[i]=!0,s),{});return wC(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function h4(n){return{address:zt(n.address),nonce:ze(n.nonce!=null?n.nonce:0),chainId:ze(n.chainId!=null?n.chainId:0),signature:Yr.from(n.signature)}}function xF(n){let e;return typeof n=="string"?e=Ym.computePublicKey(n,!1):e=n.publicKey,zt(Bn("0x"+e.substring(4)).substring(26))}function NF(n,e){return xF(Ym.recoverPublicKey(n,e))}const er=BigInt(0),TF=BigInt(2),IF=BigInt(27),OF=BigInt(28),RF=BigInt(35),DF=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),bC=4096*32;function PF(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return pt(n.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return pt(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return pt(n.blobToKZGCommitment(Oe(r)));Q(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return pt(n.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return pt(n.computeBlobKZGProof(Oe(r),Oe(s)));Q(!1,"unsupported KZG library","kzg",n)}}}function $O(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Tp(e).substring(4),"0x"+t}function Ip(n){return n==="0x"?null:zt(n)}function uv(n,e){try{return xh(n)}catch(t){Q(!1,t.message,e,n)}}function UF(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const s=n[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);t.push({address:Ip(s[1]),nonce:nn(s[2],"nonce"),chainId:nn(s[0],"chainId"),signature:Yr.from({yParity:Nh(s[3],"yParity"),r:qo(s[4],32),s:qo(s[5],32)})})}return t}catch(t){Q(!1,t.message,e,n)}}function Nh(n,e){return n==="0x"?0:lt(n,e)}function nn(n,e){if(n==="0x")return er;const t=ze(n,e);return Q(t<=DF,"value exceeds uint size",e,t),t}function At(n,e){const t=ze(n,"value"),r=qn(t);return Q(r.length<=32,"value too large",`tx.${e}`,t),r}function hv(n){return xh(n).map(e=>[e.address,e.storageKeys])}function kF(n){return n.map(e=>[At(e.chainId,"chainId"),e.address,At(e.nonce,"nonce"),At(e.signature.yParity,"yParity"),qn(e.signature.r),qn(e.signature.s)])}function BF(n,e){Q(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)Q(on(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function LF(n){const e=cy(n);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:Nh(e[0],"nonce"),gasPrice:nn(e[1],"gasPrice"),gasLimit:nn(e[2],"gasLimit"),to:Ip(e[3]),value:nn(e[4],"value"),data:Oe(e[5]),chainId:er};if(e.length===6)return t;const r=nn(e[6],"v"),s=nn(e[7],"r"),i=nn(e[8],"s");if(s===er&&i===er)t.chainId=r;else{let o=(r-RF)/TF;o<er&&(o=er),t.chainId=o,Q(o!==er||r===IF||r===OF,"non-canonical legacy v","v",e[6]),t.signature=Yr.from({r:qo(e[7],32),s:qo(e[8],32),v:r})}return t}function MF(n,e){const t=[At(n.nonce,"nonce"),At(n.gasPrice||0,"gasPrice"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data];let r=er;if(n.chainId!=er)r=ze(n.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==er&&(t.push(qn(r)),t.push("0x"),t.push("0x")),Al(t);let s=BigInt(27+e.yParity);return r!==er?s=Yr.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(qn(s)),t.push(qn(e.r)),t.push(qn(e.s)),Al(t)}function dv(n,e){let t;try{if(t=Nh(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=qo(e[1],32),s=qo(e[2],32),i=Yr.from({r,s,yParity:t});n.signature=i}function $F(n){const e=cy(pt(n).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(n));const t={type:2,chainId:nn(e[0],"chainId"),nonce:Nh(e[1],"nonce"),maxPriorityFeePerGas:nn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:nn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:nn(e[4],"gasLimit"),to:Ip(e[5]),value:nn(e[6],"value"),data:Oe(e[7]),accessList:uv(e[8],"accessList")};return e.length===9||dv(t,e.slice(9)),t}function FF(n,e){const t=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,hv(n.accessList||[])];return e&&(t.push(At(e.yParity,"yParity")),t.push(qn(e.r)),t.push(qn(e.s))),xn(["0x02",Al(t)])}function zF(n){const e=cy(pt(n).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(n));const t={type:1,chainId:nn(e[0],"chainId"),nonce:Nh(e[1],"nonce"),gasPrice:nn(e[2],"gasPrice"),gasLimit:nn(e[3],"gasLimit"),to:Ip(e[4]),value:nn(e[5],"value"),data:Oe(e[6]),accessList:uv(e[7],"accessList")};return e.length===8||dv(t,e.slice(8)),t}function HF(n,e){const t=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.gasPrice||0,"gasPrice"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,hv(n.accessList||[])];return e&&(t.push(At(e.yParity,"recoveryParam")),t.push(qn(e.r)),t.push(qn(e.s))),xn(["0x01",Al(t)])}function jF(n){let e=cy(pt(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],l=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let h=0;h<e[1].length;h++)r.push({data:i[h],commitment:o[h],proof:l[h]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Oe(n));const s={type:3,chainId:nn(e[0],"chainId"),nonce:Nh(e[1],"nonce"),maxPriorityFeePerGas:nn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:nn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:nn(e[4],"gasLimit"),to:Ip(e[5]),value:nn(e[6],"value"),data:Oe(e[7]),accessList:uv(e[8],"accessList"),maxFeePerBlobGas:nn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${t}`,"data",n),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(on(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||dv(s,e.slice(11)),s}function qF(n,e,t){const r=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||Wm,At(n.value,"value"),n.data,hv(n.accessList||[]),At(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),BF(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(At(e.yParity,"yParity")),r.push(qn(e.r)),r.push(qn(e.s)),t)?xn(["0x03",Al([r,t.map(s=>s.data),t.map(s=>s.commitment),t.map(s=>s.proof)])]):xn(["0x03",Al(r)])}function GF(n){const e=cy(pt(n).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(n));const t={type:4,chainId:nn(e[0],"chainId"),nonce:Nh(e[1],"nonce"),maxPriorityFeePerGas:nn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:nn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:nn(e[4],"gasLimit"),to:Ip(e[5]),value:nn(e[6],"value"),data:Oe(e[7]),accessList:uv(e[8],"accessList"),authorizationList:UF(e[9],"authorizationList")};return e.length===10||dv(t,e.slice(10)),t}function VF(n,e){const t=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,hv(n.accessList||[]),kF(n.authorizationList||[])];return e&&(t.push(At(e.yParity,"yParity")),t.push(qn(e.r)),t.push(qn(e.s))),xn(["0x04",Al(t)])}var Hi,Of,Rf,Df,Pf,Uf,kf,Bf,Lf,Mf,$f,Ff,ju,Xc,Ca,Jc,zf,Hf,Db;const Ea=class Ea{constructor(){le(this,Hf);le(this,Hi);le(this,Of);le(this,Rf);le(this,Df);le(this,Pf);le(this,Uf);le(this,kf);le(this,Bf);le(this,Lf);le(this,Mf);le(this,$f);le(this,Ff);le(this,ju);le(this,Xc);le(this,Ca);le(this,Jc);le(this,zf);z(this,Hi,null),z(this,Of,null),z(this,Df,0),z(this,Pf,er),z(this,Uf,null),z(this,kf,null),z(this,Bf,null),z(this,Rf,"0x"),z(this,Lf,er),z(this,Mf,er),z(this,$f,null),z(this,Ff,null),z(this,ju,null),z(this,Xc,null),z(this,Ca,null),z(this,Jc,null),z(this,zf,null)}get type(){return x(this,Hi)}set type(e){switch(e){case null:z(this,Hi,null);break;case 0:case"legacy":z(this,Hi,0);break;case 1:case"berlin":case"eip-2930":z(this,Hi,1);break;case 2:case"london":case"eip-1559":z(this,Hi,2);break;case 3:case"cancun":case"eip-4844":z(this,Hi,3);break;case 4:case"pectra":case"eip-7702":z(this,Hi,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=x(this,Of);return e==null&&this.type===3?Wm:e}set to(e){z(this,Of,e==null?null:zt(e))}get nonce(){return x(this,Df)}set nonce(e){z(this,Df,lt(e,"value"))}get gasLimit(){return x(this,Pf)}set gasLimit(e){z(this,Pf,ze(e))}get gasPrice(){const e=x(this,Uf);return e==null&&(this.type===0||this.type===1)?er:e}set gasPrice(e){z(this,Uf,e==null?null:ze(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=x(this,kf);return e??(this.type===2||this.type===3?er:null)}set maxPriorityFeePerGas(e){z(this,kf,e==null?null:ze(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=x(this,Bf);return e??(this.type===2||this.type===3?er:null)}set maxFeePerGas(e){z(this,Bf,e==null?null:ze(e,"maxFeePerGas"))}get data(){return x(this,Rf)}set data(e){z(this,Rf,Oe(e))}get value(){return x(this,Lf)}set value(e){z(this,Lf,ze(e,"value"))}get chainId(){return x(this,Mf)}set chainId(e){z(this,Mf,ze(e))}get signature(){return x(this,$f)||null}set signature(e){z(this,$f,e==null?null:Yr.from(e))}get accessList(){const e=x(this,Ff)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){z(this,Ff,e==null?null:xh(e))}get authorizationList(){const e=x(this,zf)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){z(this,zf,e==null?null:e.map(t=>h4(t)))}get maxFeePerBlobGas(){const e=x(this,ju);return e==null&&this.type===3?er:e}set maxFeePerBlobGas(e){z(this,ju,e==null?null:ze(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=x(this,Xc);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Q(on(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}z(this,Xc,e)}get blobs(){return x(this,Jc)==null?null:x(this,Jc).map(e=>Object.assign({},e))}set blobs(e){if(e==null){z(this,Jc,null);return}const t=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(US(i)){ye(x(this,Ca),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=pt(i);if(Q(o.length<=bC,"blob is too large",`blobs[${s}]`,i),o.length!==bC){const d=new Uint8Array(bC);d.set(o),o=d}const l=x(this,Ca).blobToKzgCommitment(o),h=Oe(x(this,Ca).computeBlobKzgProof(o,l));t.push({data:Oe(o),commitment:Oe(l),proof:h}),r.push($O(1,l))}else{const o=Oe(i.commitment);t.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push($O(1,o))}}z(this,Jc,t),z(this,Xc,r)}get kzg(){return x(this,Ca)}set kzg(e){e==null?z(this,Ca,null):z(this,Ca,PF(e))}get hash(){return this.signature==null?null:Bn(be(this,Hf,Db).call(this,!0,!1))}get unsignedHash(){return Bn(this.unsignedSerialized)}get from(){return this.signature==null?null:NF(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Ym.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return be(this,Hf,Db).call(this,!0,!0)}get unsignedSerialized(){return be(this,Hf,Db).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=x(this,ju)!=null||x(this,Xc);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ea.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ea;if(typeof e=="string"){const r=pt(e);if(r[0]>=127)return Ea.from(LF(r));switch(r[0]){case 1:return Ea.from(zF(r));case 2:return Ea.from($F(r));case 3:return Ea.from(jF(r));case 4:return Ea.from(GF(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ea;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Yr.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Hi=new WeakMap,Of=new WeakMap,Rf=new WeakMap,Df=new WeakMap,Pf=new WeakMap,Uf=new WeakMap,kf=new WeakMap,Bf=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,$f=new WeakMap,Ff=new WeakMap,ju=new WeakMap,Xc=new WeakMap,Ca=new WeakMap,Jc=new WeakMap,zf=new WeakMap,Hf=new WeakSet,Db=function(e,t){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return MF(this,r);case 1:return HF(this,r);case 2:return FF(this,r);case 3:return qF(this,r,t?this.blobs:null);case 4:return VF(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let rE=Ea;function ih(n){return Bn(Ma(n))}var KF="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const FO=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),zO=4;function WF(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),s=1,i=[0,1];for(let R=1;R<r;R++)i.push(s+=t());let o=t(),l=e;e+=o;let h=0,d=0;function p(){return h==0&&(d=d<<8|n[e++],h=8),d>>--h&1}const g=31,y=2**g,b=y>>>1,E=b>>1,v=y-1;let A=0;for(let R=0;R<g;R++)A=A<<1|p();let S=[],T=0,N=y;for(;;){let R=Math.floor(((A-T+1)*s-1)/N),P=0,F=r;for(;F-P>1;){let H=P+F>>>1;R<i[H]?F=H:P=H}if(P==0)break;S.push(P);let $=T+Math.floor(N*i[P]/s),B=T+Math.floor(N*i[P+1]/s)-1;for(;(($^B)&b)==0;)A=A<<1&v|p(),$=$<<1&v,B=B<<1&v|1;for(;$&~B&E;)A=A&b|A<<1&v>>>1|p(),$=$<<1^b,B=(B^b)<<1|b|1;T=$,N=1+B-$}let k=r-4;return S.map(R=>{switch(R-k){case 3:return k+65792+(n[l++]<<16|n[l++]<<8|n[l++]);case 2:return k+256+(n[l++]<<8|n[l++]);case 1:return k+n[l++];default:return R-1}})}function YF(n){let e=0;return()=>n[e++]}function d4(n){return YF(WF(QF(n)))}function QF(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let t=n.length,r=new Uint8Array(6*t>>3);for(let s=0,i=0,o=0,l=0;s<t;s++)l=l<<6|e[n.charCodeAt(s)],o+=6,o>=8&&(r[i++]=l>>(o-=8));return r}function ZF(n){return n&1?~n>>1:n>>1}function XF(n,e){let t=Array(n);for(let r=0,s=0;r<n;r++)t[r]=s+=ZF(e());return t}function Qm(n,e=0){let t=[];for(;;){let r=n(),s=n();if(!s)break;e+=r;for(let i=0;i<s;i++)t.push(e+i);e+=s+1}return t}function f4(n){return Zm(()=>{let e=Qm(n);if(e.length)return e})}function p4(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(JF(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(ez(t,n))}return e.flat()}function Zm(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function g4(n,e,t){let r=Array(n).fill().map(()=>[]);for(let s=0;s<e;s++)XF(n,t).forEach((i,o)=>r[o].push(i));return r}function JF(n,e){let t=1+e(),r=e(),s=Zm(e);return g4(s.length,1+n,e).flatMap((o,l)=>{let[h,...d]=o;return Array(s[l]).fill().map((p,g)=>{let y=g*r;return[h+g*t,d.map(b=>b+y)]})})}function ez(n,e){let t=1+e();return g4(t,1+n,e).map(s=>[s[0],s.slice(1)])}function tz(n){let e=[],t=Qm(n);return s(r([]),[]),e;function r(i){let o=n(),l=Zm(()=>{let h=Qm(n).map(d=>t[d]);if(h.length)return r(h)});return{S:o,B:l,Q:i}}function s({S:i,B:o},l,h){if(!(i&4&&h===l[l.length-1])){i&2&&(h=l[l.length-1]),i&1&&e.push(l);for(let d of o)for(let p of d.Q)s(d,[...l,p],h)}}}function nz(n){return n.toString(16).toUpperCase().padStart(2,"0")}function m4(n){return`{${nz(n)}}`}function rz(n){let e=[];for(let t=0,r=n.length;t<r;){let s=n.codePointAt(t);t+=s<65536?1:2,e.push(s)}return e}function fp(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let s=0;s<t;)r.push(String.fromCodePoint(...n.slice(s,s+=4096)));return r.join("")}function sz(n,e){let t=n.length,r=t-e.length;for(let s=0;r==0&&s<t;s++)r=n[s]-e[s];return r}var iz="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Xm=44032,sE=4352,iE=4449,aE=4519,y4=19,w4=21,pp=28,oE=w4*pp,az=y4*oE,oz=Xm+az,cz=sE+y4,lz=iE+w4,uz=aE+pp;function ym(n){return n>>24&255}function b4(n){return n&16777215}let X_,HO,J_,Pb;function hz(){let n=d4(iz);X_=new Map(f4(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),HO=new Set(Qm(n)),J_=new Map,Pb=new Map;for(let[e,t]of p4(n)){if(!HO.has(e)&&t.length==2){let[r,s]=t,i=Pb.get(r);i||(i=new Map,Pb.set(r,i)),i.set(s,e)}J_.set(e,t.reverse())}}function E4(n){return n>=Xm&&n<oz}function dz(n,e){if(n>=sE&&n<cz&&e>=iE&&e<lz)return Xm+(n-sE)*oE+(e-iE)*pp;if(E4(n)&&e>aE&&e<uz&&(n-Xm)%pp==0)return n+(e-aE);{let t=Pb.get(n);return t&&(t=t.get(e),t)?t:-1}}function v4(n){X_||hz();let e=[],t=[],r=!1;function s(i){let o=X_.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(E4(i)){let o=i-Xm,l=o/oE|0,h=o%oE/pp|0,d=o%pp;s(sE+l),s(iE+h),d>0&&s(aE+d)}else{let o=J_.get(i);o?t.push(...o):s(i)}if(!t.length)break;i=t.pop()}if(r&&e.length>1){let i=ym(e[0]);for(let o=1;o<e.length;o++){let l=ym(e[o]);if(l==0||i<=l){i=l;continue}let h=o-1;for(;;){let d=e[h+1];if(e[h+1]=e[h],e[h]=d,!h||(i=ym(e[--h]),i<=l))break}i=ym(e[o])}}return e}function fz(n){let e=[],t=[],r=-1,s=0;for(let i of n){let o=ym(i),l=b4(i);if(r==-1)o==0?r=l:e.push(l);else if(s>0&&s>=o)o==0?(e.push(r,...t),t.length=0,r=l):t.push(l),s=o;else{let h=dz(r,l);h>=0?r=h:s==0&&o==0?(e.push(r),r=l):(t.push(l),s=o)}}return r>=0&&e.push(r,...t),e}function A4(n){return v4(n).map(b4)}function pz(n){return fz(v4(n))}const jO=45,C4=".",_4=65039,S4=1,cE=n=>Array.from(n);function Jm(n,e){return n.P.has(e)||n.Q.has(e)}class gz extends Array{get is_emoji(){return!0}}let e2,x4,Au,t2,N4,hf,EC,Gd,lu,qO,n2;function jS(){if(e2)return;let n=d4(KF);const e=()=>Qm(n),t=()=>new Set(e()),r=(p,g)=>g.forEach(y=>p.add(y));e2=new Map(p4(n)),x4=t(),Au=e(),t2=new Set(e().map(p=>Au[p])),Au=new Set(Au),N4=t(),t();let s=f4(n),i=n();const o=()=>{let p=new Set;return e().forEach(g=>r(p,s[g])),r(p,e()),p};hf=Zm(p=>{let g=Zm(n).map(y=>y+96);if(g.length){let y=p>=i;g[0]-=32,g=fp(g),y&&(g=`Restricted[${g}]`);let b=o(),E=o(),v=!n();return{N:g,P:b,Q:E,M:v,R:y}}}),EC=t(),Gd=new Map;let l=e().concat(cE(EC)).sort((p,g)=>p-g);l.forEach((p,g)=>{let y=n(),b=l[g]=y?l[g-y]:{V:[],M:new Map};b.V.push(p),EC.has(p)||Gd.set(p,b)});for(let{V:p,M:g}of new Set(Gd.values())){let y=[];for(let E of p){let v=hf.filter(S=>Jm(S,E)),A=y.find(({G:S})=>v.some(T=>S.has(T)));A||(A={G:new Set,V:[]},y.push(A)),A.V.push(E),r(A.G,v)}let b=y.flatMap(E=>cE(E.G));for(let{G:E,V:v}of y){let A=new Set(b.filter(S=>!E.has(S)));for(let S of v)g.set(S,A)}}lu=new Set;let h=new Set;const d=p=>lu.has(p)?h.add(p):lu.add(p);for(let p of hf){for(let g of p.P)d(g);for(let g of p.Q)d(g)}for(let p of lu)!Gd.has(p)&&!h.has(p)&&Gd.set(p,S4);r(lu,A4(lu)),qO=tz(n).map(p=>gz.from(p)).sort(sz),n2=new Map;for(let p of qO){let g=[n2];for(let y of p){let b=g.map(E=>{let v=E.get(y);return v||(v=new Map,E.set(y,v)),v});y===_4?g.push(...b):g=b}for(let y of g)y.V=p}}function qS(n){return(T4(n)?"":`${GS(fv([n]))} `)+m4(n)}function GS(n){return`"${n}"‎`}function mz(n){if(n.length>=4&&n[2]==jO&&n[3]==jO)throw new Error(`invalid label extension: "${fp(n.slice(0,4))}"`)}function yz(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function wz(n){let e=n[0],t=FO.get(e);if(t)throw Tm(`leading ${t}`);let r=n.length,s=-1;for(let i=1;i<r;i++){e=n[i];let o=FO.get(e);if(o){if(s==i)throw Tm(`${t} + ${o}`);s=i+1,t=o}}if(s==r)throw Tm(`trailing ${t}`)}function fv(n,e=1/0,t=m4){let r=[];bz(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let s=0,i=n.length;for(let o=0;o<i;o++){let l=n[o];T4(l)&&(r.push(fp(n.slice(s,o))),r.push(t(l)),s=o+1)}return r.push(fp(n.slice(s,i))),r.join("")}function bz(n){return jS(),Au.has(n)}function T4(n){return jS(),N4.has(n)}function Ez(n){return _z(vz(n,pz,Nz))}function vz(n,e,t){if(!n)return[];jS();let r=0;return n.split(C4).map(s=>{let i=rz(s),o={input:i,offset:r};r+=i.length+1;try{let l=o.tokens=xz(i,e,t),h=l.length,d;if(!h)throw new Error("empty label");let p=o.output=l.flat();if(yz(p),!(o.emoji=h>1||l[0].is_emoji)&&p.every(y=>y<128))mz(p),d="ASCII";else{let y=l.flatMap(b=>b.is_emoji?[]:b);if(!y.length)d="Emoji";else{if(Au.has(p[0]))throw Tm("leading combining mark");for(let v=1;v<h;v++){let A=l[v];if(!A.is_emoji&&Au.has(A[0]))throw Tm(`emoji + combining mark: "${fp(l[v-1])} + ${fv([A[0]])}"`)}wz(p);let b=cE(new Set(y)),[E]=Cz(b);Sz(E,y),Az(E,b),d=E.N}}o.type=d}catch(l){o.error=l}return o})}function Az(n,e){let t,r=[];for(let s of e){let i=Gd.get(s);if(i===S4)return;if(i){let o=i.M.get(s);if(t=t?t.filter(l=>o.has(l)):cE(o),!t.length)return}else r.push(s)}if(t){for(let s of t)if(r.every(i=>Jm(s,i)))throw new Error(`whole-script confusable: ${n.N}/${s.N}`)}}function Cz(n){let e=hf;for(let t of n){let r=e.filter(s=>Jm(s,t));if(!r.length)throw hf.some(s=>Jm(s,t))?O4(e[0],t):I4(t);if(e=r,r.length==1)break}return e}function _z(n){return n.map(({input:e,error:t,output:r})=>{if(t){let s=t.message;throw new Error(n.length==1?s:`Invalid label ${GS(fv(e,63))}: ${s}`)}return fp(r)}).join(C4)}function I4(n){return new Error(`disallowed character: ${qS(n)}`)}function O4(n,e){let t=qS(e),r=hf.find(s=>s.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Tm(n){return new Error(`illegal placement: ${n}`)}function Sz(n,e){for(let t of e)if(!Jm(n,t))throw O4(n,t);if(n.M){let t=A4(e);for(let r=1,s=t.length;r<s;r++)if(t2.has(t[r])){let i=r+1;for(let o;i<s&&t2.has(o=t[i]);i++)for(let l=r;l<i;l++)if(t[l]==o)throw new Error(`duplicate non-spacing marks: ${qS(o)}`);if(i-r>zO)throw new Error(`excessive non-spacing marks: ${GS(fv(t.slice(r-1,i)))} (${i-r}/${zO})`);r=i}}}function xz(n,e,t){let r=[],s=[];for(n=n.slice().reverse();n.length;){let i=Tz(n);if(i)s.length&&(r.push(e(s)),s=[]),r.push(t(i));else{let o=n.pop();if(lu.has(o))s.push(o);else{let l=e2.get(o);if(l)s.push(...l);else if(!x4.has(o))throw I4(o)}}}return s.length&&r.push(e(s)),r}function Nz(n){return n.filter(e=>e!=_4)}function Tz(n,e){let t=n2,r,s=n.length;for(;s&&(t=t.get(n[--s]),!!t);){let{V:i}=t;i&&(r=i,n.length=s)}return r}const R4=new Uint8Array(32);R4.fill(0);function GO(n){return Q(n.length!==0,"invalid ENS name; empty component","comp",n),n}function D4(n){const e=Ma(Iz(n)),t=[];if(n.length===0)return t;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(t.push(GO(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",n),t.push(GO(e.slice(r))),t}function Iz(n){try{if(n.length===0)throw new Error("empty label");return Ez(n)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",n)}}function r2(n){Q(typeof n=="string","invalid ENS name; not a string","name",n),Q(n.length,"invalid ENS name (empty label)","name",n);let e=R4;const t=D4(n);for(;t.length;)e=Bn(xn([e,Bn(t.pop())]));return Oe(e)}function Oz(n,e){const t=e;return Q(t<=255,"DNS encoded label cannot exceed 255","length",t),Oe(xn(D4(n).map(r=>{Q(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const P4=new Uint8Array(32);P4.fill(0);const Rz=BigInt(-1),U4=BigInt(0),k4=BigInt(1),Dz=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Pz(n){const e=pt(n),t=e.length%32;return t?xn([e,P4.slice(t)]):Oe(e)}const Uz=vl(k4,32),kz=vl(U4,32),VO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},vC=["name","version","chainId","verifyingContract","salt"];function KO(n){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Bz={name:KO("name"),version:KO("version"),chainId:function(n){const e=ze(n,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Gi(e)},verifyingContract:function(n){try{return zt(n).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=pt(n,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",n),Oe(e)}};function AC(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const s=Eu(Dz,t?r-1:r),i=t?(s+k4)*Rz:U4;return function(o){const l=ze(o,"value");return Q(l>=i&&l<=s,`value out-of-bounds for ${n}`,"value",l),vl(t?w5(l,256):l,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Q(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const s=pt(r);return Q(s.length===t,`invalid length for ${n}`,"value",r),Pz(r)}}}switch(n){case"address":return function(e){return qo(zt(e),32)};case"bool":return function(e){return e?Uz:kz};case"bytes":return function(e){return Bn(e)};case"string":return function(e){return ih(e)}}return null}function WO(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function eb(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var Q0,Io,jf,WE,B4;const di=class di{constructor(e){le(this,WE);ie(this,"primaryType");le(this,Q0);le(this,Io);le(this,jf);z(this,Io,new Map),z(this,jf,new Map);const t=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(h=>{i[h]=e[h].map(({name:d,type:p})=>{let{base:g,index:y}=eb(p);return g==="int"&&!e.int&&(g="int256"),g==="uint"&&!e.uint&&(g="uint256"),{name:d,type:g+(y||"")}}),t.set(h,new Set),r.set(h,[]),s.set(h,new Set)}),z(this,Q0,JSON.stringify(i));for(const h in i){const d=new Set;for(const p of i[h]){Q(!d.has(p.name),`duplicate variable name ${JSON.stringify(p.name)} in ${JSON.stringify(h)}`,"types",e),d.add(p.name);const g=eb(p.type).base;Q(g!==h,`circular type reference to ${JSON.stringify(g)}`,"types",e),!AC(g)&&(Q(r.has(g),`unknown type ${JSON.stringify(g)}`,"types",e),r.get(g).push(h),t.get(h).add(g))}}const o=Array.from(r.keys()).filter(h=>r.get(h).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(h=>JSON.stringify(h)).join(", ")}`,"types",e),Xe(this,{primaryType:o[0]});function l(h,d){Q(!d.has(h),`circular type reference to ${JSON.stringify(h)}`,"types",e),d.add(h);for(const p of t.get(h))if(r.has(p)){l(p,d);for(const g of d)s.get(g).add(p)}d.delete(h)}l(this.primaryType,new Set);for(const[h,d]of s){const p=Array.from(d);p.sort(),x(this,Io).set(h,WO(h,i[h])+p.map(g=>WO(g,i[g])).join(""))}}get types(){return JSON.parse(x(this,Q0))}getEncoder(e){let t=x(this,jf).get(e);return t||(t=be(this,WE,B4).call(this,e),x(this,jf).set(e,t)),t}encodeType(e){const t=x(this,Io).get(e);return Q(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Bn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(AC(e))return r(e,t);const s=eb(e).array;if(s)return Q(s.count===-1||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:l,type:h})=>(o[l]=this._visit(h,t[l],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new di(e)}static getPrimaryType(e){return di.from(e).primaryType}static hashStruct(e,t,r){return di.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const s=VO[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:s})}return t.sort((r,s)=>vC.indexOf(r.name)-vC.indexOf(s.name)),di.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return xn(["0x1901",di.hashDomain(e),di.from(t).hash(r)])}static hash(e,t,r){return Bn(di.encode(e,t,r))}static async resolveNames(e,t,r,s){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const i={};e.verifyingContract&&!on(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=di.from(t);o.visit(r,(l,h)=>(l==="address"&&!on(h,20)&&(i[h]="0x"),h));for(const l in i)i[l]=await s(l);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(l,h)=>l==="address"&&i[h]?i[h]:h),{domain:e,value:r}}static getPayload(e,t,r){di.hashDomain(e);const s={},i=[];vC.forEach(h=>{const d=e[h];d!=null&&(s[h]=Bz[h](d),i.push({name:h,type:VO[h]}))});const o=di.from(t);t=o.types;const l=Object.assign({},t);return Q(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=i,o.encode(r),{types:l,domain:s,primaryType:o.primaryType,message:o.visit(r,(h,d)=>{if(h.match(/^bytes(\d*)/))return Oe(pt(d));if(h.match(/^u?int/))return ze(d).toString();switch(h){case"address":return d.toLowerCase();case"bool":return!!d;case"string":return Q(typeof d=="string","invalid string","value",d),d}Q(!1,"unsupported type","type",h)})}}};Q0=new WeakMap,Io=new WeakMap,jf=new WeakMap,WE=new WeakSet,B4=function(e){{const s=AC(e);if(s)return s}const t=eb(e).array;if(t){const s=t.prefix,i=this.getEncoder(s);return o=>{Q(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let l=o.map(i);return x(this,Io).has(s)&&(l=l.map(Bn)),Bn(xn(l))}}const r=this.types[e];if(r){const s=ih(x(this,Io).get(e));return i=>{const o=r.map(({name:l,type:h})=>{const d=this.getEncoder(h)(i[l]);return x(this,Io).has(h)?Bn(d):d});return o.unshift(s),xn(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let lE=di;function Wr(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const Lz="external public payable override",Mz=Wr(Lz.split(" ")),L4="constant external internal payable private public pure view override",$z=Wr(L4.split(" ")),M4="constructor error event fallback function receive struct",$4=Wr(M4.split(" ")),F4="calldata memory storage payable indexed",Fz=Wr(F4.split(" ")),zz="tuple returns",Hz=[M4,F4,zz,L4].join(" "),jz=Wr(Hz.split(" ")),qz={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Gz=new RegExp("^(\\s*)"),Vz=new RegExp("^([0-9]+)"),Kz=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),z4=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),H4=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var pr,ji,Z0,s2;const YE=class YE{constructor(e){le(this,Z0);le(this,pr);le(this,ji);z(this,pr,0),z(this,ji,e.slice())}get offset(){return x(this,pr)}get length(){return x(this,ji).length-x(this,pr)}clone(){return new YE(x(this,ji))}reset(){z(this,pr,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=be(this,Z0,s2).call(this,x(this,pr)+1,e.match+1);return z(this,pr,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;x(this,pr)<e.match-1;){const r=this.peek().linkNext;t.push(be(this,Z0,s2).call(this,x(this,pr)+1,r)),z(this,pr,r)}return z(this,pr,e.match+1),t}peek(){if(x(this,pr)>=x(this,ji).length)throw new Error("out-of-bounds");return x(this,ji)[x(this,pr)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Hg(this,pr)._++,e}toString(){const e=[];for(let t=x(this,pr);t<x(this,ji).length;t++){const r=x(this,ji)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};pr=new WeakMap,ji=new WeakMap,Z0=new WeakSet,s2=function(e=0,t=0){return new YE(x(this,ji).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Ji=YE;function Ol(n){const e=[],t=o=>{const l=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${l} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<n.length;){let o=n.substring(i),l=o.match(Gz);l&&(i+=l[1].length,o=n.substring(i));const h={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(h);let d=qz[o[0]]||"";if(d){if(h.type=d,h.text=o[0],i++,d==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(d=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),h.match=r.pop(),e[h.match].match=e.length-1,h.depth--,h.linkBack=s.pop(),e[h.linkBack].linkNext=e.length-1;else if(d==="COMMA")h.linkBack=s.pop(),e[h.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(d==="OPEN_BRACKET")h.type="BRACKET";else if(d==="CLOSE_BRACKET"){let p=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const g=e.pop().text;p=g+p,e[e.length-1].value=lt(g)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=p}continue}if(l=o.match(Kz),l){if(h.text=l[1],i+=h.text.length,jz.has(h.text)){h.type="KEYWORD";continue}if(h.text.match(H4)){h.type="TYPE";continue}h.type="ID";continue}if(l=o.match(Vz),l){h.text=l[1],h.type="NUMBER",i+=h.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Ji(e.map(o=>Object.freeze(o)))}function YO(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function pv(n,e){if(e.peekKeyword($4)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function Vo(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function j4(n){let e=Vo(n,$z);return YO(e,Wr("constant payable nonpayable".split(" "))),YO(e,Wr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Fo(n,e){return n.popParams().map(t=>wr.from(t,e))}function q4(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return ze(n.pop().text);throw new Error("invalid gas")}return null}function ah(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const Wz=new RegExp(/^(.*)\[([0-9]*)\]$/);function QO(n){const e=n.match(H4);if(Q(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);Q(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);Q(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const vn={},Cs=Symbol.for("_ethers_internal"),ZO="_ParamTypeInternal",XO="_ErrorInternal",JO="_EventInternal",eR="_ConstructorInternal",tR="_FallbackInternal",nR="_FunctionInternal",rR="_StructInternal";var qf,Ub;const fi=class fi{constructor(e,t,r,s,i,o,l,h){le(this,qf);ie(this,"name");ie(this,"type");ie(this,"baseType");ie(this,"indexed");ie(this,"components");ie(this,"arrayLength");ie(this,"arrayChildren");if(oy(e,vn,"ParamType"),Object.defineProperty(this,Cs,{value:ZO}),o&&(o=Object.freeze(o.slice())),s==="array"){if(l==null||h==null)throw new Error("")}else if(l!=null||h!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Xe(this,{name:t,type:r,baseType:s,indexed:i,components:o,arrayLength:l,arrayChildren:h})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],s=[e];return be(this,qf,Ub).call(this,r,e,t,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,t){if(fi.isParamType(e))return e;if(typeof e=="string")try{return fi.from(Ol(e),t)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Ji){let l="",h="",d=null;Vo(e,Wr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(h="tuple",d=e.popParams().map(v=>fi.from(v)),l=`tuple(${d.map(v=>v.format()).join(",")})`):(l=QO(e.popType("TYPE")),h=l);let p=null,g=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();p=new fi(vn,"",l,h,null,d,g,p),g=v.value,l+=v.text,h="array",d=null}let y=null;if(Vo(e,Fz).has("indexed")){if(!t)throw new Error("");y=!0}const E=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fi(vn,E,l,h,y,d,g,p)}const r=e.name;Q(!r||typeof r=="string"&&r.match(z4),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(Wz);if(o){const l=parseInt(o[2]||"-1"),h=fi.from({type:o[1],components:e.components});return new fi(vn,r||"",i,"array",s,null,l,h)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const l=e.components!=null?e.components.map(d=>fi.from(d)):null;return new fi(vn,r||"",i,"tuple",s,l,null,null)}return i=QO(e.type),new fi(vn,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Cs]===ZO}};qf=new WeakSet,Ub=function(e,t,r,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,l=t.slice();l.forEach((h,d)=>{var p;be(p=o,qf,Ub).call(p,e,h,r,g=>{l[d]=g})}),s(l);return}if(this.isTuple()){const o=this.components;let l;if(Array.isArray(t))l=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");l=o.map(h=>{if(!h.name)throw new Error("cannot use object value with unnamed components");if(!(h.name in t))throw new Error(`missing value for component ${h.name}`);return t[h.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((h,d)=>{var p;be(p=o[d],qf,Ub).call(p,e,h,r,g=>{l[d]=g})}),s(l);return}const i=r(this.type,t);i.then?e.push(async function(){s(await i)}()):s(i)};let wr=fi;class oh{constructor(e,t,r){ie(this,"type");ie(this,"inputs");oy(e,vn,"Fragment"),r=Object.freeze(r.slice()),Xe(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{oh.from(JSON.parse(e))}catch{}return oh.from(Ol(e))}if(e instanceof Ji)switch(e.peekKeyword($4)){case"constructor":return Lo.from(e);case"error":return bs.from(e);case"event":return Pa.from(e);case"fallback":case"receive":return Co.from(e);case"function":return Ua.from(e);case"struct":return Ju.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Lo.from(e);case"error":return bs.from(e);case"event":return Pa.from(e);case"fallback":case"receive":return Co.from(e);case"function":return Ua.from(e);case"struct":return Ju.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Lo.isFragment(e)}static isError(e){return bs.isFragment(e)}static isEvent(e){return Pa.isFragment(e)}static isFunction(e){return Ua.isFragment(e)}static isStruct(e){return Ju.isFragment(e)}}class gv extends oh{constructor(t,r,s,i){super(t,r,i);ie(this,"name");Q(typeof s=="string"&&s.match(z4),"invalid identifier","name",s),i=Object.freeze(i.slice()),Xe(this,{name:s})}}function e0(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class bs extends gv{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,Cs,{value:XO})}get selector(){return ih(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+e0(e,this.inputs)),t.join(" ")}static from(e){if(bs.isFragment(e))return e;if(typeof e=="string")return bs.from(Ol(e));if(e instanceof Ji){const t=pv("error",e),r=Fo(e);return ah(e),new bs(vn,t,r)}return new bs(vn,e.name,e.inputs?e.inputs.map(wr.from):[])}static isFragment(e){return e&&e[Cs]===XO}}class Pa extends gv{constructor(t,r,s,i){super(t,"event",r,s);ie(this,"anonymous");Object.defineProperty(this,Cs,{value:JO}),Xe(this,{anonymous:i})}get topicHash(){return ih(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+e0(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(i=>wr.from(i)),new Pa(vn,t,r,!1).topicHash}static from(t){if(Pa.isFragment(t))return t;if(typeof t=="string")try{return Pa.from(Ol(t))}catch{Q(!1,"invalid event fragment","obj",t)}else if(t instanceof Ji){const r=pv("event",t),s=Fo(t,!0),i=!!Vo(t,Wr(["anonymous"])).has("anonymous");return ah(t),new Pa(vn,r,s,i)}return new Pa(vn,t.name,t.inputs?t.inputs.map(r=>wr.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Cs]===JO}}class Lo extends oh{constructor(t,r,s,i,o){super(t,r,s);ie(this,"payable");ie(this,"gas");Object.defineProperty(this,Cs,{value:eR}),Xe(this,{payable:i,gas:o})}format(t){if(ye(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const r=[`constructor${e0(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Lo.isFragment(t))return t;if(typeof t=="string")try{return Lo.from(Ol(t))}catch{Q(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Ji){Vo(t,Wr(["constructor"]));const r=Fo(t),s=!!Vo(t,Mz).has("payable"),i=q4(t);return ah(t),new Lo(vn,"constructor",r,s,i)}return new Lo(vn,"constructor",t.inputs?t.inputs.map(wr.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Cs]===eR}}class Co extends oh{constructor(t,r,s){super(t,"fallback",r);ie(this,"payable");Object.defineProperty(this,Cs,{value:tR}),Xe(this,{payable:s})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(t){if(Co.isFragment(t))return t;if(typeof t=="string")try{return Co.from(Ol(t))}catch{Q(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Ji){const r=t.toString(),s=t.peekKeyword(Wr(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),t.popKeyword(Wr(["fallback","receive"]))==="receive"){const h=Fo(t);return Q(h.length===0,"receive cannot have arguments","obj.inputs",h),Vo(t,Wr(["payable"])),ah(t),new Co(vn,[],!0)}let o=Fo(t);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(h=>h.format("minimal")).join(", ")):o=[wr.from("bytes")];const l=j4(t);if(Q(l==="nonpayable"||l==="payable","fallback cannot be constants","obj.stateMutability",l),Vo(t,Wr(["returns"])).has("returns")){const h=Fo(t);Q(h.length===1&&h[0].type==="bytes","invalid fallback outputs","obj.outputs",h.map(d=>d.format("minimal")).join(", "))}return ah(t),new Co(vn,o,l==="payable")}if(t.type==="receive")return new Co(vn,[],!0);if(t.type==="fallback"){const r=[wr.from("bytes")],s=t.stateMutability==="payable";return new Co(vn,r,s)}Q(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Cs]===tR}}class Ua extends gv{constructor(t,r,s,i,o,l){super(t,"function",r,i);ie(this,"constant");ie(this,"outputs");ie(this,"stateMutability");ie(this,"payable");ie(this,"gas");Object.defineProperty(this,Cs,{value:nR}),o=Object.freeze(o.slice()),Xe(this,{constant:s==="view"||s==="pure",gas:l,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return ih(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t))),outputs:this.outputs.map(s=>JSON.parse(s.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+e0(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(e0(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(i=>wr.from(i)),new Ua(vn,t,"view",r,[],null).selector}static from(t){if(Ua.isFragment(t))return t;if(typeof t=="string")try{return Ua.from(Ol(t))}catch{Q(!1,"invalid function fragment","obj",t)}else if(t instanceof Ji){const s=pv("function",t),i=Fo(t),o=j4(t);let l=[];Vo(t,Wr(["returns"])).has("returns")&&(l=Fo(t));const h=q4(t);return ah(t),new Ua(vn,s,o,i,l,h)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new Ua(vn,t.name,r,t.inputs?t.inputs.map(wr.from):[],t.outputs?t.outputs.map(wr.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Cs]===nR}}class Ju extends gv{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,Cs,{value:rR})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Ju.from(Ol(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Ji){const t=pv("struct",e),r=Fo(e);return ah(e),new Ju(vn,t,r)}return new Ju(vn,e.name,e.inputs?e.inputs.map(wr.from):[])}static isFragment(e){return e&&e[Cs]===rR}}const ta=new Map;ta.set(0,"GENERIC_PANIC");ta.set(1,"ASSERT_FALSE");ta.set(17,"OVERFLOW");ta.set(18,"DIVIDE_BY_ZERO");ta.set(33,"ENUM_RANGE_ERROR");ta.set(34,"BAD_STORAGE_DATA");ta.set(49,"STACK_UNDERFLOW");ta.set(50,"ARRAY_RANGE_ERROR");ta.set(65,"OUT_OF_MEMORY");ta.set(81,"UNINITIALIZED_FUNCTION_CALL");const Yz=new RegExp(/^bytes([0-9]*)$/),Qz=new RegExp(/^(u?int)([0-9]*)$/);let CC=null,sR=1024;function Zz(n,e,t,r){let s="missing revert data",i=null;const o=null;let l=null;if(t){s="execution reverted";const d=pt(t);if(t=Oe(t),d.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(d.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(d.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],d.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(d.slice(0,4))==="0x4e487b71")try{const p=Number(r.decode(["uint256"],d.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[p]},i=`Panic due to ${ta.get(p)||"UNKNOWN"}(${p})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const h={to:e.to?zt(e.to):null,data:e.data||"0x"};return e.from&&(h.from=zt(e.from)),mn(s,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:h,invocation:o,revert:l})}var el,Vd;const QE=class QE{constructor(){le(this,el)}getDefaultValue(e){const t=e.map(s=>be(this,el,Vd).call(this,wr.from(s)));return new Jw(t,"_").defaultValue()}encode(e,t){g5(t.length,e.length,"types/values length mismatch");const r=e.map(o=>be(this,el,Vd).call(this,wr.from(o))),s=new Jw(r,"_"),i=new q_;return s.encode(i,t),i.data}decode(e,t,r){const s=e.map(o=>be(this,el,Vd).call(this,wr.from(o)));return new Jw(s,"_").decode(new G_(t,r,sR))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),sR=e}static defaultAbiCoder(){return CC==null&&(CC=new QE),CC}static getBuiltinCallException(e,t,r){return Zz(e,t,r,QE.defaultAbiCoder())}};el=new WeakSet,Vd=function(e){if(e.isArray())return new gF(be(this,el,Vd).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Jw(e.components.map(r=>be(this,el,Vd).call(this,r)),e.name);switch(e.baseType){case"address":return new fF(e.name);case"bool":return new mF(e.name);case"string":return new SF(e.name);case"bytes":return new yF(e.name);case"":return new EF(e.name)}let t=e.type.match(Qz);if(t){let r=parseInt(t[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new _F(r/8,t[1]==="int",e.name)}if(t=e.type.match(Yz),t){let r=parseInt(t[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new wF(r,e.name)}Q(!1,"invalid type","type",e.type)};let t0=QE;class Xz{constructor(e,t,r){ie(this,"fragment");ie(this,"name");ie(this,"signature");ie(this,"topic");ie(this,"args");const s=e.name,i=e.format();Xe(this,{fragment:e,name:s,signature:i,topic:t,args:r})}}class Jz{constructor(e,t,r,s){ie(this,"fragment");ie(this,"name");ie(this,"args");ie(this,"signature");ie(this,"selector");ie(this,"value");const i=e.name,o=e.format();Xe(this,{fragment:e,name:i,args:r,signature:o,selector:t,value:s})}}class eH{constructor(e,t,r){ie(this,"fragment");ie(this,"name");ie(this,"args");ie(this,"signature");ie(this,"selector");const s=e.name,i=e.format();Xe(this,{fragment:e,name:s,args:r,signature:i,selector:t})}}class iR{constructor(e){ie(this,"hash");ie(this,"_isIndexed");Xe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const aR={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},oR={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&aR[n.toString()]&&(e=aR[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var _a,Sa,xa,Ir,ja,kb,Bb;const wu=class wu{constructor(e){le(this,ja);ie(this,"fragments");ie(this,"deploy");ie(this,"fallback");ie(this,"receive");le(this,_a);le(this,Sa);le(this,xa);le(this,Ir);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,z(this,xa,new Map),z(this,_a,new Map),z(this,Sa,new Map);const r=[];for(const o of t)try{r.push(oh.from(o))}catch(l){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,l.message)}Xe(this,{fragments:Object.freeze(r)});let s=null,i=!1;z(this,Ir,this.getAbiCoder()),this.fragments.forEach((o,l)=>{let h;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Xe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${l}]`,o),s=o,i=s.payable);return;case"function":h=x(this,xa);break;case"event":h=x(this,Sa);break;case"error":h=x(this,_a);break;default:return}const d=o.format();h.has(d)||h.set(d,o)}),this.deploy||Xe(this,{deploy:Lo.from("constructor()")}),Xe(this,{fallback:s,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(s=>s.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return t0.defaultAbiCoder()}getFunctionName(e){const t=be(this,ja,kb).call(this,e,null,!1);return Q(t,"no matching function","key",e),t.name}hasFunction(e){return!!be(this,ja,kb).call(this,e,null,!1)}getFunction(e,t){return be(this,ja,kb).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(x(this,xa).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(x(this,xa).get(s),r)}}getEventName(e){const t=be(this,ja,Bb).call(this,e,null,!1);return Q(t,"no matching event","key",e),t.name}hasEvent(e){return!!be(this,ja,Bb).call(this,e,null,!1)}getEvent(e,t){return be(this,ja,Bb).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(x(this,Sa).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(x(this,Sa).get(s),r)}}getError(e,t){if(on(e)){const s=e.toLowerCase();if(oR[s])return bs.from(oR[s].signature);for(const i of x(this,_a).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of x(this,_a))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?bs.from("error Error(string)"):e==="Panic"?bs.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=bs.from(e).format(),e==="Error(string)")return bs.from("error Error(string)");if(e==="Panic(uint256)")return bs.from("error Panic(uint256)");const r=x(this,_a).get(e);return r||null}forEachError(e){const t=Array.from(x(this,_a).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(x(this,_a).get(s),r)}}_decodeParams(e,t){return x(this,Ir).decode(e,t)}_encodeParams(e,t){return x(this,Ir).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(Sn(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Sn(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return xn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(Sn(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Sn(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return xn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Gr(t);if(s.length%32===0)try{return x(this,Ir).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=pt(e,"data"),s=t0.getBuiltinCallException("call",t,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const l=Oe(r.slice(0,4)),h=this.getError(l);if(h)try{const d=x(this,Ir).decode(h.inputs,r.slice(4));s.revert={name:h.name,signature:h.format(),args:d},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Oe(x(this,Ir).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}ye(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?ih(o):i.type==="bytes"?Bn(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=vl(o):i.type.match(/^bytes/)?o=g7(o,32):i.type==="address"&&x(this,Ir).encode(["address"],[o]),qo(Oe(o),32));for(t.forEach((i,o)=>{const l=e.inputs[o];if(!l.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,i);return}i==null?r.push(null):l.baseType==="array"||l.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+l.name,i):Array.isArray(i)?r.push(i.map(h=>s(l,h))):r.push(s(l,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,l)=>{const h=t[l];if(o.indexed)if(o.type==="string")r.push(ih(h));else if(o.type==="bytes")r.push(Bn(h));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(x(this,Ir).encode([o.type],[h]))}else s.push(o),i.push(h)}),{data:x(this,Ir).encode(s,i),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const b=this.getEvent(e);Q(b,"unknown event","eventFragment",e),e=b}if(r!=null&&!e.anonymous){const b=e.topicHash;Q(on(r[0],32)&&r[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((b,E)=>{b.indexed?b.type==="string"||b.type==="bytes"||b.baseType==="tuple"||b.baseType==="array"?(s.push(wr.from({type:"bytes32",name:b.name})),o.push(!0)):(s.push(b),o.push(!1)):(i.push(b),o.push(!1))});const l=r!=null?x(this,Ir).decode(s,xn(r)):null,h=x(this,Ir).decode(i,t,!0),d=[],p=[];let g=0,y=0;return e.inputs.forEach((b,E)=>{let v=null;if(b.indexed)if(l==null)v=new iR(null);else if(o[E])v=new iR(l[y++]);else try{v=l[y++]}catch(A){v=A}else try{v=h[g++]}catch(A){v=A}d.push(v),p.push(b.name||null)}),cp.fromItems(d,p)}parseTransaction(e){const t=pt(e.data,"tx.data"),r=ze(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(t.slice(0,4)));if(!s)return null;const i=x(this,Ir).decode(s.inputs,t.slice(4));return new Jz(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Xz(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Oe(e),r=this.getError(Sn(t,0,4));if(!r)return null;const s=x(this,Ir).decode(r.inputs,Sn(t,4));return new eH(r,r.selector,s)}static from(e){return e instanceof wu?e:typeof e=="string"?new wu(JSON.parse(e)):typeof e.formatJson=="function"?new wu(e.formatJson()):typeof e.format=="function"?new wu(e.format("json")):new wu(e)}};_a=new WeakMap,Sa=new WeakMap,xa=new WeakMap,Ir=new WeakMap,ja=new WeakSet,kb=function(e,t,r){if(on(e)){const i=e.toLowerCase();for(const o of x(this,xa).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of x(this,xa))o.split("(")[0]===e&&i.push(l);if(t){const o=t.length>0?t[t.length-1]:null;let l=t.length,h=!0;Dr.isTyped(o)&&o.type==="overrides"&&(h=!1,l--);for(let d=i.length-1;d>=0;d--){const p=i[d].inputs.length;p!==l&&(!h||p!==l-1)&&i.splice(d,1)}for(let d=i.length-1;d>=0;d--){const p=i[d].inputs;for(let g=0;g<t.length;g++)if(Dr.isTyped(t[g])){if(g>=p.length){if(t[g].type==="overrides")continue;i.splice(d,1);break}if(t[g].type!==p[g].baseType){i.splice(d,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(l=>JSON.stringify(l.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=x(this,xa).get(Ua.from(e).format());return s||null},Bb=function(e,t,r){if(on(e)){const i=e.toLowerCase();for(const o of x(this,Sa).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of x(this,Sa))o.split("(")[0]===e&&i.push(l);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const l=i[o].inputs;for(let h=0;h<t.length;h++)if(Dr.isTyped(t[h])&&t[h].type!==l[h].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(l=>JSON.stringify(l.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=x(this,Sa).get(Pa.from(e).format());return s||null};let uE=wu;const G4=BigInt(0);function df(n){return n??null}function In(n){return n==null?null:n.toString()}class cR{constructor(e,t,r){ie(this,"gasPrice");ie(this,"maxFeePerGas");ie(this,"maxPriorityFeePerGas");Xe(this,{gasPrice:df(e),maxFeePerGas:df(t),maxPriorityFeePerGas:df(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:In(e),maxFeePerGas:In(t),maxPriorityFeePerGas:In(r)}}}function hE(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Oe(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of t)!(s in n)||n[s]==null||(e[s]=ze(n[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in n)||n[s]==null||(e[s]=lt(n[s],`request.${s}`));return n.accessList&&(e.accessList=xh(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>US(s)?Oe(s):Object.assign({},s))),e}var Oo;class tH{constructor(e,t){ie(this,"provider");ie(this,"number");ie(this,"hash");ie(this,"timestamp");ie(this,"parentHash");ie(this,"parentBeaconBlockRoot");ie(this,"nonce");ie(this,"difficulty");ie(this,"gasLimit");ie(this,"gasUsed");ie(this,"stateRoot");ie(this,"receiptsRoot");ie(this,"blobGasUsed");ie(this,"excessBlobGas");ie(this,"miner");ie(this,"prevRandao");ie(this,"extraData");ie(this,"baseFeePerGas");le(this,Oo);z(this,Oo,e.transactions.map(r=>typeof r!="string"?new n0(r,t):r)),Xe(this,{provider:t,hash:df(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:df(e.prevRandao),extraData:e.extraData,baseFeePerGas:df(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return x(this,Oo).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=x(this,Oo).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:l,prevRandao:h,nonce:d,number:p,parentHash:g,parentBeaconBlockRoot:y,stateRoot:b,receiptsRoot:E,timestamp:v,transactions:A}=this;return{_type:"Block",baseFeePerGas:In(e),difficulty:In(t),extraData:r,gasLimit:In(s),gasUsed:In(i),blobGasUsed:In(this.blobGasUsed),excessBlobGas:In(this.excessBlobGas),hash:o,miner:l,prevRandao:h,nonce:d,number:p,parentHash:g,timestamp:v,parentBeaconBlockRoot:y,stateRoot:b,receiptsRoot:E,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return x(this,Oo).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=x(this,Oo)[e];else{const r=e.toLowerCase();for(const s of x(this,Oo))if(typeof s=="string"){if(s!==r)continue;t=s;break}else{if(s.hash!==r)continue;t=s;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return nH(this)}}Oo=new WeakMap;class uy{constructor(e,t){ie(this,"provider");ie(this,"transactionHash");ie(this,"blockHash");ie(this,"blockNumber");ie(this,"removed");ie(this,"address");ie(this,"data");ie(this,"topics");ie(this,"index");ie(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());Xe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:s,index:i,removed:o,topics:l,transactionHash:h,transactionIndex:d}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:s,index:i,removed:o,topics:l,transactionHash:h,transactionIndex:d}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return rH(this)}}var X0;class V4{constructor(e,t){ie(this,"provider");ie(this,"to");ie(this,"from");ie(this,"contractAddress");ie(this,"hash");ie(this,"index");ie(this,"blockHash");ie(this,"blockNumber");ie(this,"logsBloom");ie(this,"gasUsed");ie(this,"blobGasUsed");ie(this,"cumulativeGasUsed");ie(this,"gasPrice");ie(this,"blobGasPrice");ie(this,"type");ie(this,"status");ie(this,"root");le(this,X0);z(this,X0,Object.freeze(e.logs.map(s=>new uy(s,t))));let r=G4;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Xe(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return x(this,X0)}toJSON(){const{to:e,from:t,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:l,logsBloom:h,logs:d,status:p,root:g}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:l,contractAddress:r,cumulativeGasUsed:In(this.cumulativeGasUsed),from:t,gasPrice:In(this.gasPrice),blobGasUsed:In(this.blobGasUsed),blobGasPrice:In(this.blobGasPrice),gasUsed:In(this.gasUsed),hash:s,index:i,logs:d,logsBloom:h,root:g,status:p,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return W4(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),K4(this,e)}}X0=new WeakMap;var tl;const Jx=class Jx{constructor(e,t){ie(this,"provider");ie(this,"blockNumber");ie(this,"blockHash");ie(this,"index");ie(this,"hash");ie(this,"type");ie(this,"to");ie(this,"from");ie(this,"nonce");ie(this,"gasLimit");ie(this,"gasPrice");ie(this,"maxPriorityFeePerGas");ie(this,"maxFeePerGas");ie(this,"maxFeePerBlobGas");ie(this,"data");ie(this,"value");ie(this,"chainId");ie(this,"signature");ie(this,"accessList");ie(this,"blobVersionedHashes");ie(this,"authorizationList");le(this,tl);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,z(this,tl,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:s,type:i,to:o,from:l,nonce:h,data:d,signature:p,accessList:g,blobVersionedHashes:y}=this;return{_type:"TransactionResponse",accessList:g,blockNumber:e,blockHash:t,blobVersionedHashes:y,chainId:In(this.chainId),data:d,from:l,gasLimit:In(this.gasLimit),gasPrice:In(this.gasPrice),hash:s,maxFeePerGas:In(this.maxFeePerGas),maxPriorityFeePerGas:In(this.maxPriorityFeePerGas),maxFeePerBlobGas:In(this.maxFeePerBlobGas),nonce:h,signature:p,to:o,index:r,type:i,value:In(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await jr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,s=t??0;let i=x(this,tl),o=-1,l=i===-1;const h=async()=>{if(l)return null;const{blockNumber:y,nonce:b}=await jr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){i=y;return}if(l)return null;const E=await this.getTransaction();if(!(E&&E.blockNumber!=null))for(o===-1&&(o=i-3,o<x(this,tl)&&(o=x(this,tl)));o<=y;){if(l)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const A of v)if(A===this.hash)return;for(let A=0;A<v.length;A++){const S=await v.getTransaction(A);if(S.from===this.from&&S.nonce===this.nonce){if(l)return null;const T=await this.provider.getTransactionReceipt(S.hash);if(T==null||y-T.blockNumber+1<r)return;let N="replaced";S.data===this.data&&S.to===this.to&&S.value===this.value?N="repriced":S.data==="0x"&&S.from===S.to&&S.value===G4&&(N="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:S.replaceableTransaction(i),hash:S.hash,receipt:T})}}o++}},d=y=>{if(y==null||y.status!==0)return y;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:y.to,from:y.from,data:""},receipt:y})},p=await this.provider.getTransactionReceipt(this.hash);if(r===0)return d(p);if(p){if(r===1||await p.confirmations()>=r)return d(p)}else if(await h(),r===0)return null;return await new Promise((y,b)=>{const E=[],v=()=>{E.forEach(S=>S())};if(E.push(()=>{l=!0}),s>0){const S=setTimeout(()=>{v(),b(mn("wait for transaction timeout","TIMEOUT"))},s);E.push(()=>{clearTimeout(S)})}const A=async S=>{if(await S.confirmations()>=r){v();try{y(d(S))}catch(T){b(T)}}};if(E.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const S=async()=>{try{await h()}catch(T){if(yr(T,"TRANSACTION_REPLACED")){v(),b(T);return}}l||this.provider.once("block",S)};E.push(()=>{this.provider.off("block",S)}),this.provider.once("block",S)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),W4(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),K4(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Jx(this,this.provider);return z(t,tl,e),t}};tl=new WeakMap;let n0=Jx;function nH(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function K4(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function W4(n){return{orphan:"drop-transaction",tx:n}}function rH(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class VS extends uy{constructor(t,r,s){super(t,t.provider);ie(this,"interface");ie(this,"fragment");ie(this,"args");const i=r.decodeEventLog(s,t.data,t.topics);Xe(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Y4 extends uy{constructor(t,r){super(t,t.provider);ie(this,"error");Xe(this,{error:r})}}var Gf;class sH extends V4{constructor(t,r,s){super(s,r);le(this,Gf);z(this,Gf,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?x(this,Gf).getEvent(t.topics[0]):null;if(r)try{return new VS(t,x(this,Gf),r)}catch(s){return new Y4(t,s)}return t})}}Gf=new WeakMap;var J0;class KS extends n0{constructor(t,r,s){super(s,r);le(this,J0);z(this,J0,t)}async wait(t,r){const s=await super.wait(t,r);return s==null?null:new sH(x(this,J0),this.provider,s)}}J0=new WeakMap;class Q4 extends b5{constructor(t,r,s,i){super(t,r,s);ie(this,"log");Xe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class iH extends Q4{constructor(e,t,r,s,i){super(e,t,r,new VS(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Xe(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const lR=BigInt(0);function Z4(n){return n&&typeof n.call=="function"}function X4(n){return n&&typeof n.estimateGas=="function"}function mv(n){return n&&typeof n.resolveName=="function"}function J4(n){return n&&typeof n.sendTransaction=="function"}function eU(n){if(n!=null){if(mv(n))return n;if(n.provider)return n.provider}}var ey;class aH{constructor(e,t,r){le(this,ey);ie(this,"fragment");if(Xe(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const s=ch(e.runner,"resolveName"),i=mv(s)?s:null;z(this,ey,async function(){const o=await Promise.all(t.inputs.map((l,h)=>r[h]==null?null:l.walkAsync(r[h],(p,g)=>p==="address"?Array.isArray(g)?Promise.all(g.map(y=>Kr(y,i))):Kr(g,i):g)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return x(this,ey)}}ey=new WeakMap;function ch(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Cu(n){return n==null?null:n.provider||null}async function tU(n,e){const t=Dr.dereference(n,"overrides");Q(typeof t=="object","invalid overrides parameter","overrides",n);const r=hE(t);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function oH(n,e,t){const r=ch(n,"resolveName"),s=mv(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(l,h)=>(h=Dr.dereference(h,l),l==="address"?Kr(h,s):h))))}function cH(n){const e=async function(o){const l=await tU(o,["data"]);l.to=await n.getAddress(),l.from&&(l.from=await Kr(l.from,eU(n.runner)));const h=n.interface,d=ze(l.value||lR,"overrides.value")===lR,p=(l.data||"0x")==="0x";h.fallback&&!h.fallback.payable&&h.receive&&!p&&!d&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(h.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data);const g=h.receive||h.fallback&&h.fallback.payable;return Q(g||d,"cannot send value to non-payable fallback","overrides.value",l.value),Q(h.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data),l},t=async function(o){const l=ch(n.runner,"call");ye(Z4(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await e(o);try{return await l.call(h)}catch(d){throw PS(d)&&d.data?n.interface.makeError(d.data,h):d}},r=async function(o){const l=n.runner;ye(J4(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await l.sendTransaction(await e(o)),d=Cu(n.runner);return new KS(n.interface,d,h)},s=async function(o){const l=ch(n.runner,"estimateGas");return ye(X4(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(o))},i=async o=>await r(o);return Xe(i,{_contract:n,estimateGas:s,populateTransaction:e,send:r,staticCall:t}),i}function lH(n,e){const t=function(...d){const p=n.interface.getFunction(e,d);return ye(p,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:d}}),p},r=async function(...d){const p=t(...d);let g={};if(p.inputs.length+1===d.length&&(g=await tU(d.pop()),g.from&&(g.from=await Kr(g.from,eU(n.runner)))),p.inputs.length!==d.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const y=await oH(n.runner,p.inputs,d);return Object.assign({},g,await jr({to:n.getAddress(),data:n.interface.encodeFunctionData(p,y)}))},s=async function(...d){const p=await l(...d);return p.length===1?p[0]:p},i=async function(...d){const p=n.runner;ye(J4(p),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const g=await p.sendTransaction(await r(...d)),y=Cu(n.runner);return new KS(n.interface,y,g)},o=async function(...d){const p=ch(n.runner,"estimateGas");return ye(X4(p),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await p.estimateGas(await r(...d))},l=async function(...d){const p=ch(n.runner,"call");ye(Z4(p),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const g=await r(...d);let y="0x";try{y=await p.call(g)}catch(E){throw PS(E)&&E.data?n.interface.makeError(E.data,g):E}const b=t(...d);return n.interface.decodeFunctionResult(b,y)},h=async(...d)=>t(...d).constant?await s(...d):await i(...d);return Xe(h,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:l}),Object.defineProperty(h,"fragment",{configurable:!1,enumerable:!0,get:()=>{const d=n.interface.getFunction(e);return ye(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),d}}),h}function uH(n,e){const t=function(...s){const i=n.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new aH(n,t(...s),s)};return Xe(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=n.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const dE=Symbol.for("_ethersInternal_contract"),nU=new WeakMap;function hH(n,e){nU.set(n[dE],e)}function Ls(n){return nU.get(n[dE])}function dH(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function WS(n,e){let t,r=null;if(Array.isArray(e)){const i=function(o){if(on(o,32))return o;const l=n.interface.getEvent(o);return Q(l,"unknown fragment","name",o),l.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?on(e,32)?t=[e]:(r=n.interface.getEvent(e),Q(r,"unknown fragment","event",e),t=[r.topicHash]):dH(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):Q(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(l=>l.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:t}}async function wm(n,e){const{subs:t}=Ls(n);return t.get((await WS(n,e)).tag)||null}async function uR(n,e,t){const r=Cu(n.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await WS(n,t),{addr:l,subs:h}=Ls(n);let d=h.get(i);if(!d){const g={address:l||n,topics:o},y=A=>{let S=s;if(S==null)try{S=n.interface.getEvent(A.topics[0])}catch{}if(S){const T=S,N=s?n.interface.decodeEventLog(s,A.data,A.topics):[];a2(n,t,N,k=>new iH(n,k,t,T,A))}else a2(n,t,[],T=>new Q4(n,T,t,A))};let b=[];d={tag:i,listeners:[],start:()=>{b.length||b.push(r.on(g,y))},stop:async()=>{if(b.length==0)return;let A=b;b=[],await Promise.all(A),r.off(g,y)}},h.set(i,d)}return d}let i2=Promise.resolve();async function fH(n,e,t,r){await i2;const s=await wm(n,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:l})=>{const h=Array.from(t);r&&h.push(r(l?null:o));try{o.call(n,...h)}catch{}return!l}),s.listeners.length===0&&(s.stop(),Ls(n).subs.delete(s.tag)),i>0}async function a2(n,e,t,r){try{await i2}catch{}const s=fH(n,e,t,r);return i2=s,await s}const tb=["then"];var c5;c5=dE;const Vm=class Vm{constructor(e,t,r,s){ie(this,"target");ie(this,"interface");ie(this,"runner");ie(this,"filters");ie(this,c5);ie(this,"fallback");Q(typeof e=="string"||o4(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=uE.from(t);Xe(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,dE,{value:{}});let o,l=null,h=null;if(s){const g=Cu(r);h=new KS(this.interface,g,s)}let d=new Map;if(typeof e=="string")if(on(e))l=e,o=Promise.resolve(e);else{const g=ch(r,"resolveName");if(!mv(g))throw mn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=g.resolveName(e).then(y=>{if(y==null)throw mn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ls(this).addr=y,y})}else o=e.getAddress().then(g=>{if(g==null)throw new Error("TODO");return Ls(this).addr=g,g});hH(this,{addrPromise:o,addr:l,deployTx:h,subs:d});const p=new Proxy({},{get:(g,y,b)=>{if(typeof y=="symbol"||tb.indexOf(y)>=0)return Reflect.get(g,y,b);try{return this.getEvent(y)}catch(E){if(!yr(E,"INVALID_ARGUMENT")||E.argument!=="key")throw E}},has:(g,y)=>tb.indexOf(y)>=0?Reflect.has(g,y):Reflect.has(g,y)||this.interface.hasEvent(String(y))});return Xe(this,{filters:p}),Xe(this,{fallback:i.receive||i.fallback?cH(this):null}),new Proxy(this,{get:(g,y,b)=>{if(typeof y=="symbol"||y in g||tb.indexOf(y)>=0)return Reflect.get(g,y,b);try{return g.getFunction(y)}catch(E){if(!yr(E,"INVALID_ARGUMENT")||E.argument!=="key")throw E}},has:(g,y)=>typeof y=="symbol"||y in g||tb.indexOf(y)>=0?Reflect.has(g,y):g.interface.hasFunction(y)})}connect(e){return new Vm(this.target,this.interface,e)}attach(e){return new Vm(e,this.interface,this.runner)}async getAddress(){return await Ls(this).addrPromise}async getDeployedCode(){const e=Cu(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Cu(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(l){i(l)}};o()})}deploymentTransaction(){return Ls(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),lH(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),uH(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Ls(this),o=s||await i,{fragment:l,topics:h}=await WS(this,e),d={address:o,topics:h,fromBlock:t,toBlock:r},p=Cu(this.runner);return ye(p,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await p.getLogs(d)).map(g=>{let y=l;if(y==null)try{y=this.interface.getEvent(g.topics[0])}catch{}if(y)try{return new VS(g,this.interface,y)}catch(b){return new Y4(g,b)}return new uy(g,p)})}async on(e,t){const r=await uR(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await uR(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await a2(this,e,t,null)}async listenerCount(e){if(e){const s=await wm(this,e);return s?s.listeners.length:0}const{subs:t}=Ls(this);let r=0;for(const{listeners:s}of t.values())r+=s.length;return r}async listeners(e){if(e){const s=await wm(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:t}=Ls(this);let r=[];for(const{listeners:s}of t.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,t){const r=await wm(this,e);if(!r)return this;if(t){const s=r.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(t==null||r.listeners.length===0)&&(r.stop(),Ls(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await wm(this,e);if(!t)return this;t.stop(),Ls(this).subs.delete(t.tag)}else{const{subs:t}=Ls(this);for(const{tag:r,stop:s}of t.values())s(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Vm{constructor(s,i=null){super(s,e,i)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let o2=Vm;function pH(){return o2}class eh extends pH(){}function _C(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Q(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class gH{constructor(e){ie(this,"name");Xe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const rU=new RegExp("^(ipfs)://(.*)$","i"),hR=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),rU,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var nl,qu,rl,Kd,ZE,sU;const of=class of{constructor(e,t,r){le(this,rl);ie(this,"provider");ie(this,"address");ie(this,"name");le(this,nl);le(this,qu);Xe(this,{provider:e,address:t,name:r}),z(this,nl,null),z(this,qu,new eh(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return x(this,nl)==null&&z(this,nl,(async()=>{try{return await x(this,qu).supportsInterface("0x9061b923")}catch(e){if(yr(e,"CALL_EXCEPTION"))return!1;throw z(this,nl,null),e}})()),await x(this,nl)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await be(this,rl,Kd).call(this,"addr(bytes32)");return i==null||i===Wm?null:i}catch(i){if(yr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await be(this,rl,Kd).call(this,"addr(bytes32,uint)",[i]);if(on(o,20))return zt(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof gH&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const r=await be(this,rl,Kd).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await t.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await be(this,rl,Kd).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await be(this,rl,Kd).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const s=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${s}://${y7("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<hR.length;r++){const s=t.match(hR[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=_C(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const h=(s[2]||"").split("/");if(h.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const d=h[1],p=new eh(h[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const v=await p.ownerOf(d);if(l!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(i==="erc1155"){const v=await p.balanceOf(l,d);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let g=await p[o](d);if(g==null||g==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:g}),i==="erc1155"&&(g=g.replace("{id}",vl(d,32).substring(2)),e.push({type:"metadata-url-expanded",value:g})),g.match(/^ipfs:/i)&&(g=_C(g)),e.push({type:"metadata-url",value:g});let y={};const b=await new Go(g).send();b.assertOk();try{y=b.bodyJson}catch{try{e.push({type:"!metadata",value:b.bodyText})}catch{const S=b.body;return S&&e.push({type:"!metadata",value:Oe(S)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!y)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(y)});let E=y.image;if(typeof E!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!E.match(/^(https:\/\/|data:)/i)){if(E.match(rU)==null)return e.push({type:"!imageUrl-ipfs",value:E}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:E}),E=_C(E)}return e.push({type:"url",value:E}),{linkage:e,url:E}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var s;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const i=await be(s=of,ZE,sU).call(s,e,r);if(i!=null){const o=new of(e,i,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};nl=new WeakMap,qu=new WeakMap,rl=new WeakSet,Kd=async function(e,t){t=(t||[]).slice();const r=x(this,qu).interface;t.unshift(r2(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Oz(this.name,255),r.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await x(this,qu)[e](...t);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!yr(i,"CALL_EXCEPTION"))throw i}return null},ZE=new WeakSet,sU=async function(e,t){const r=await of.getEnsAddress(e);try{const i=await new eh(r,["function resolver(bytes32) view returns (address)"],e).resolver(r2(t),{enableCcipRead:!0});return i===Wm?null:i}catch(s){throw s}return null},le(of,ZE);let fE=of;const dR=BigInt(0);function vt(n,e){return function(t){return t==null?e:n(t)}}function r0(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function hy(n,e){return t=>{const r={};for(const s in n){let i=s;if(e&&s in e&&!(i in t)){for(const o of e[s])if(o in t){i=o;break}}try{const o=n[s](t[i]);o!==void 0&&(r[s]=o)}catch(o){const l=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${l})`,"BAD_DATA",{value:t})}}return r}}function mH(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function gp(n){return n&&!n.startsWith("0x")&&(n=`0x${n}`),Q(on(n,!0),"invalid data","value",n),n}function mr(n){return Q(on(n,32),"invalid hash","value",n),n}const yH=hy({address:zt,blockHash:mr,blockNumber:lt,data:gp,index:lt,removed:vt(mH,!1),topics:r0(mr),transactionHash:mr,transactionIndex:lt},{index:["logIndex"]});function wH(n){return yH(n)}const bH=hy({hash:vt(mr),parentHash:mr,parentBeaconBlockRoot:vt(mr,null),number:lt,timestamp:lt,nonce:vt(gp),difficulty:ze,gasLimit:ze,gasUsed:ze,stateRoot:vt(mr,null),receiptsRoot:vt(mr,null),blobGasUsed:vt(ze,null),excessBlobGas:vt(ze,null),miner:vt(zt),prevRandao:vt(mr,null),extraData:gp,baseFeePerGas:vt(ze)},{prevRandao:["mixHash"]});function EH(n){const e=bH(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:iU(t)),e}const vH=hy({transactionIndex:lt,blockNumber:lt,transactionHash:mr,address:zt,topics:r0(mr),data:gp,index:lt,blockHash:mr},{index:["logIndex"]});function AH(n){return vH(n)}const CH=hy({to:vt(zt,null),from:vt(zt,null),contractAddress:vt(zt,null),index:lt,root:vt(Oe),gasUsed:ze,blobGasUsed:vt(ze,null),logsBloom:vt(gp),blockHash:mr,hash:mr,logs:r0(AH),blockNumber:lt,cumulativeGasUsed:ze,effectiveGasPrice:vt(ze),blobGasPrice:vt(ze,null),status:vt(lt),type:vt(lt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function _H(n){return CH(n)}function iU(n){n.to&&ze(n.to)===dR&&(n.to="0x0000000000000000000000000000000000000000");const e=hy({hash:mr,index:vt(lt,void 0),type:t=>t==="0x"||t==null?0:lt(t),accessList:vt(xh,null),blobVersionedHashes:vt(r0(mr,!0),null),authorizationList:vt(r0(t=>{let r;if(t.signature)r=t.signature;else{let s=t.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},t,{yParity:s})}return{address:zt(t.address),chainId:ze(t.chainId),nonce:ze(t.nonce),signature:Yr.from(r)}},!1),null),blockHash:vt(mr,null),blockNumber:vt(lt,null),transactionIndex:vt(lt,null),from:zt,gasPrice:vt(ze),maxPriorityFeePerGas:vt(ze),maxFeePerGas:vt(ze),maxFeePerBlobGas:vt(ze,null),gasLimit:ze,to:vt(zt,null),value:ze,nonce:lt,data:gp,creates:vt(zt,null),chainId:vt(ze,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=dF(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Yr.from(n.signature):e.signature=Yr.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&ze(e.blockHash)===dR&&(e.blockHash=null),e}const SH="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class dy{constructor(e){ie(this,"name");Xe(this,{name:e})}clone(){return new dy(this.name)}}class yv extends dy{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);ie(this,"effectiveBlock");ie(this,"txBase");ie(this,"txCreate");ie(this,"txDataZero");ie(this,"txDataNonzero");ie(this,"txAccessListStorageKey");ie(this,"txAccessListAddress");const s={effectiveBlock:t};function i(o,l){let h=(r||{})[o];h==null&&(h=l),Q(typeof h=="number",`invalud value for ${o}`,"costs",r),s[o]=h}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Xe(this,s)}clone(){return new yv(this.effectiveBlock,this)}}class wv extends dy{constructor(t,r){super("org.ethers.plugins.network.Ens");ie(this,"address");ie(this,"targetNetwork");Xe(this,{address:t||SH,targetNetwork:r??1})}clone(){return new wv(this.address,this.targetNetwork)}}var ty,ny;class xH extends dy{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");le(this,ty);le(this,ny);z(this,ty,t),z(this,ny,r)}get url(){return x(this,ty)}get processFunc(){return x(this,ny)}clone(){return this}}ty=new WeakMap,ny=new WeakMap;const SC=new Map;var Vf,Kf,sl;const cf=class cf{constructor(e,t){le(this,Vf);le(this,Kf);le(this,sl);z(this,Vf,e),z(this,Kf,ze(t)),z(this,sl,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return x(this,Vf)}set name(e){z(this,Vf,e)}get chainId(){return x(this,Kf)}set chainId(e){z(this,Kf,ze(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===ze(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===ze(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===ze(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(x(this,sl).values())}attachPlugin(e){if(x(this,sl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return x(this,sl).set(e.name,e.clone()),this}getPlugin(e){return x(this,sl).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new cf(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new yv;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const s=xh(e.accessList);for(const i in s)r+=t.txAccessListAddress+t.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(NH(),e==null)return cf.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=SC.get(e);if(t)return t();if(typeof e=="bigint")return new cf("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new cf(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new wv(e.ensAddress,e.ensNetwork)),t}Q(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=SC.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),SC.set(e,t)}};Vf=new WeakMap,Kf=new WeakMap,sl=new WeakMap;let Ba=cf;function fR(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function pR(n){return new xH(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const l=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:fR(l.maxFee,9),maxPriorityFeePerGas:fR(l.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let gR=!1;function NH(){if(gR)return;gR=!0;function n(e,t,r){const s=function(){const i=new Ba(e,t);return r.ensNetwork!=null&&i.attachPlugin(new wv(null,r.ensNetwork)),i.attachPlugin(new yv),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ba.register(e,s),Ba.register(t,s),r.altNames&&r.altNames.forEach(i=>{Ba.register(i,s)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[pR("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[pR("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function c2(n){return JSON.parse(JSON.stringify(n))}var Ro,pi,il,Na,Wf,Lb;class TH{constructor(e){le(this,Wf);le(this,Ro);le(this,pi);le(this,il);le(this,Na);z(this,Ro,e),z(this,pi,null),z(this,il,4e3),z(this,Na,-2)}get pollingInterval(){return x(this,il)}set pollingInterval(e){z(this,il,e)}start(){x(this,pi)||(z(this,pi,x(this,Ro)._setTimeout(be(this,Wf,Lb).bind(this),x(this,il))),be(this,Wf,Lb).call(this))}stop(){x(this,pi)&&(x(this,Ro)._clearTimeout(x(this,pi)),z(this,pi,null))}pause(e){this.stop(),e&&z(this,Na,-2)}resume(){this.start()}}Ro=new WeakMap,pi=new WeakMap,il=new WeakMap,Na=new WeakMap,Wf=new WeakSet,Lb=async function(){try{const e=await x(this,Ro).getBlockNumber();if(x(this,Na)===-2){z(this,Na,e);return}if(e!==x(this,Na)){for(let t=x(this,Na)+1;t<=e;t++){if(x(this,pi)==null)return;await x(this,Ro).emit("block",t)}z(this,Na,e)}}catch{}x(this,pi)!=null&&z(this,pi,x(this,Ro)._setTimeout(be(this,Wf,Lb).bind(this),x(this,il)))};var Gu,Vu,al;class YS{constructor(e){le(this,Gu);le(this,Vu);le(this,al);z(this,Gu,e),z(this,al,!1),z(this,Vu,t=>{this._poll(t,x(this,Gu))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){x(this,al)||(z(this,al,!0),x(this,Vu).call(this,-2),x(this,Gu).on("block",x(this,Vu)))}stop(){x(this,al)&&(z(this,al,!1),x(this,Gu).off("block",x(this,Vu)))}pause(e){this.stop()}resume(){this.start()}}Gu=new WeakMap,Vu=new WeakMap,al=new WeakMap;var Yf,Do;class IH extends YS{constructor(t,r){super(t);le(this,Yf);le(this,Do);z(this,Yf,r),z(this,Do,-2)}pause(t){t&&z(this,Do,-2),super.pause(t)}async _poll(t,r){const s=await r.getBlock(x(this,Yf));s!=null&&(x(this,Do)===-2?z(this,Do,s.number):s.number>x(this,Do)&&(r.emit(x(this,Yf),s.number),z(this,Do,s.number)))}}Yf=new WeakMap,Do=new WeakMap;var XE;class OH extends YS{constructor(t,r){super(t);le(this,XE);z(this,XE,c2(r))}async _poll(t,r){throw new Error("@TODO")}}XE=new WeakMap;var Qf;class RH extends YS{constructor(t,r){super(t);le(this,Qf);z(this,Qf,r)}async _poll(t,r){const s=await r.getTransactionReceipt(x(this,Qf));s&&r.emit(x(this,Qf),s)}}Qf=new WeakMap;var Po,Zf,Xf,ol,gi,JE,aU;class QS{constructor(e,t){le(this,JE);le(this,Po);le(this,Zf);le(this,Xf);le(this,ol);le(this,gi);z(this,Po,e),z(this,Zf,c2(t)),z(this,Xf,be(this,JE,aU).bind(this)),z(this,ol,!1),z(this,gi,-2)}start(){x(this,ol)||(z(this,ol,!0),x(this,gi)===-2&&x(this,Po).getBlockNumber().then(e=>{z(this,gi,e)}),x(this,Po).on("block",x(this,Xf)))}stop(){x(this,ol)&&(z(this,ol,!1),x(this,Po).off("block",x(this,Xf)))}pause(e){this.stop(),e&&z(this,gi,-2)}resume(){this.start()}}Po=new WeakMap,Zf=new WeakMap,Xf=new WeakMap,ol=new WeakMap,gi=new WeakMap,JE=new WeakSet,aU=async function(e){if(x(this,gi)===-2)return;const t=c2(x(this,Zf));t.fromBlock=x(this,gi)+1,t.toBlock=e;const r=await x(this,Po).getLogs(t);if(r.length===0){x(this,gi)<e-60&&z(this,gi,e-60);return}for(const s of r)x(this,Po).emit(x(this,Zf),s),z(this,gi,s.blockNumber)};const DH=BigInt(2),PH=10;function nb(n){return n&&typeof n.then=="function"}function Mb(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class oU{constructor(e){ie(this,"name");Xe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function UH(n){return JSON.parse(JSON.stringify(n))}function l2(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function xC(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(on(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Mb("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Mb("orphan",t),filter:UH(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(s=>s==null?null:Array.isArray(s)?l2(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(t.address){const s=[],i=[],o=l=>{on(l)?s.push(l):i.push((async()=>{s.push(await Kr(l,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),r.address=l2(s.map(l=>l.toLowerCase()))}return{filter:r,tag:Mb("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",n)}function NC(){return new Date().getTime()}const kH={cacheTimeout:250,pollingInterval:4e3};var Or,cl,Rr,Jf,zs,Ku,ll,Uo,ry,mi,ep,tp,mt,ks,u2,h2,bm,d2,Em,$b;class BH{constructor(e,t){le(this,mt);le(this,Or);le(this,cl);le(this,Rr);le(this,Jf);le(this,zs);le(this,Ku);le(this,ll);le(this,Uo);le(this,ry);le(this,mi);le(this,ep);le(this,tp);if(z(this,tp,Object.assign({},kH,t||{})),e==="any")z(this,Ku,!0),z(this,zs,null);else if(e){const r=Ba.from(e);z(this,Ku,!1),z(this,zs,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else z(this,Ku,!1),z(this,zs,null);z(this,Uo,-1),z(this,ll,new Map),z(this,Or,new Map),z(this,cl,new Map),z(this,Rr,null),z(this,Jf,!1),z(this,ry,1),z(this,mi,new Map),z(this,ep,!1)}get pollingInterval(){return x(this,tp).pollingInterval}get provider(){return this}get plugins(){return Array.from(x(this,cl).values())}attachPlugin(e){if(x(this,cl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return x(this,cl).set(e.name,e.connect(this)),this}getPlugin(e){return x(this,cl).get(e)||null}get disableCcipRead(){return x(this,ep)}set disableCcipRead(e){z(this,ep,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let l=0;l<r.length;l++){const h=r[l],d=h.replace("{sender}",s).replace("{data}",i),p=new Go(d);h.indexOf("{data}")===-1&&(p.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:p,index:l,urls:r});let g="unknown error",y;try{y=await p.send()}catch(b){o.push(b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:{error:b}});continue}try{const b=y.bodyJson;if(b.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:p,result:b}),b.data;b.message&&(g=b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:b})}catch{}ye(y.statusCode<400||y.statusCode>=500,`response not found during CCIP fetch: ${g}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:h,errorMessage:g}}),o.push(g)}ye(!1,`error encountered during CCIP fetch: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new tH(EH(e),this)}_wrapLog(e,t){return new uy(wH(e),this)}_wrapTransactionReceipt(e,t){return new V4(_H(e),this)}_wrapTransactionResponse(e,t){return new n0(iU(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=lt(await be(this,mt,ks).call(this,{method:"getBlockNumber"}),"%response");return x(this,Uo)>=0&&z(this,Uo,e),e}_getAddress(e){return Kr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(on(e))return on(e,32)?e:Gi(e);if(typeof e=="bigint"&&(e=lt(e,"blockTag")),typeof e=="number")return e>=0?Gi(e):x(this,Uo)>=0?Gi(x(this,Uo)+e):this.getBlockNumber().then(t=>Gi(t+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(h=>h==null?null:Array.isArray(h)?l2(h.map(d=>d.toLowerCase())):h.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(h,d,p)=>{let g;switch(h.length){case 0:break;case 1:g=h[0];break;default:h.sort(),g=h}if(r&&(d!=null||p!=null))throw new Error("invalid filter");const y={};return g&&(y.address=g),t.length&&(y.topics=t),d&&(y.fromBlock=d),p&&(y.toBlock=p),r&&(y.blockHash=r),y};let i=[];if(e.address)if(Array.isArray(e.address))for(const h of e.address)i.push(this._getAddress(h));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),i.filter(h=>typeof h!="string").length||o!=null&&typeof o!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(i),o,l]).then(h=>s(h[0],h[1],h[2])):s(i,o,l)}_getTransactionRequest(e){const t=hE(e),r=[];if(["to","from"].forEach(s=>{if(t[s]==null)return;const i=Kr(t[s],this);nb(i)?r.push(async function(){t[s]=await i}()):t[s]=i}),t.blockTag!=null){const s=this._getBlockTag(t.blockTag);nb(s)?r.push(async function(){t.blockTag=await s}()):t.blockTag=s}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(x(this,zs)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw x(this,zs)===s&&z(this,zs,null),i}})();return z(this,zs,s),(await s).clone()}const e=x(this,zs),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(x(this,Ku)?(this.emit("network",r,t),x(this,zs)===e&&z(this,zs,Promise.resolve(r))):ye(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await jr({_block:be(this,mt,d2).call(this,"latest",!1),gasPrice:(async()=>{try{const p=await be(this,mt,ks).call(this,{method:"getGasPrice"});return ze(p,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const p=await be(this,mt,ks).call(this,{method:"getPriorityFee"});return ze(p,"%response")}catch{}return null})()});let l=null,h=null;const d=this._wrapBlock(s,e);return d&&d.baseFeePerGas&&(h=o??BigInt("1000000000"),l=d.baseFeePerGas*DH+h),new cR(i,l,h)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Go(r.url),i=await r.processFunc(t,this,s);return new cR(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return nb(t)&&(t=await t),ze(await be(this,mt,ks).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await jr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await be(this,mt,h2).call(this,be(this,mt,u2).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return ze(await be(this,mt,bm).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return lt(await be(this,mt,bm).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Oe(await be(this,mt,bm).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const s=ze(t,"position");return Oe(await be(this,mt,bm).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:s}=await jr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=rE.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:s}=await jr({network:this.getNetwork(),params:be(this,mt,d2).call(this,e,!!t)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:t,params:r}=await jr({network:this.getNetwork(),params:be(this,mt,ks).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await jr({network:this.getNetwork(),params:be(this,mt,ks).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await be(this,mt,ks).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await jr({network:this.getNetwork(),result:be(this,mt,ks).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Oe(t)}async getLogs(e){let t=this._getFilter(e);nb(t)&&(t=await t);const{network:r,params:s}=await jr({network:this.getNetwork(),params:be(this,mt,ks).call(this,{method:"getLogs",filter:t})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await fE.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=zt(e);const t=r2(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await fE.getEnsAddress(this),i=await new eh(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===Wm)return null;const l=await new eh(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(l)!==e?null:l}catch(r){if(yr(r,"BAD_DATA")&&r.value==="0x"||yr(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const s=t??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let l=null;const h=async d=>{try{const p=await this.getTransactionReceipt(e);if(p!=null&&d-p.blockNumber+1>=s){i(p),l&&(clearTimeout(l),l=null);return}}catch(p){console.log("EEE",p)}this.once("block",h)};r!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",h),o(mn("timeout","TIMEOUT",{reason:"timeout"})))},r)),h(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=x(this,mi).get(e);t&&(t.timer&&clearTimeout(t.timer),x(this,mi).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=Hg(this,ry)._++,s=()=>{x(this,mi).delete(r),e()};if(this.paused)x(this,mi).set(r,{timer:null,func:s,time:t});else{const i=setTimeout(s,t);x(this,mi).set(r,{timer:i,func:s,time:NC()})}return r}_forEachSubscriber(e){for(const t of x(this,Or).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new oU(e.type);case"block":{const t=new TH(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new IH(this,e.type);case"event":return new QS(this,e.filter);case"transaction":return new RH(this,e.hash);case"orphan":return new OH(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of x(this,Or).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),x(this,Rr)!=null&&t.pause(x(this,Rr));break}}async on(e,t){const r=await be(this,mt,$b).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,x(this,Rr)!=null&&r.subscriber.pause(x(this,Rr))),this}async once(e,t){const r=await be(this,mt,$b).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,x(this,Rr)!=null&&r.subscriber.pause(x(this,Rr))),this}async emit(e,...t){const r=await be(this,mt,Em).call(this,e,t);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const l=new b5(this,o?null:i,e);try{i.call(this,...t,l)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),x(this,Or).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await be(this,mt,Em).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of x(this,Or).values())t+=r.length;return t}async listeners(e){if(e){const r=await be(this,mt,Em).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let t=[];for(const{listeners:r}of x(this,Or).values())t=t.concat(r.map(({listener:s})=>s));return t}async off(e,t){const r=await be(this,mt,Em).call(this,e);if(!r)return this;if(t){const s=r.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),x(this,Or).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:s}=await be(this,mt,$b).call(this,e);r&&s.stop(),x(this,Or).delete(t)}else for(const[t,{started:r,subscriber:s}]of x(this,Or))r&&s.stop(),x(this,Or).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return x(this,Jf)}destroy(){this.removeAllListeners();for(const e of x(this,mi).keys())this._clearTimeout(e);z(this,Jf,!0)}get paused(){return x(this,Rr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(z(this,Uo,-1),x(this,Rr)!=null){if(x(this,Rr)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),z(this,Rr,!!e);for(const t of x(this,mi).values())t.timer&&clearTimeout(t.timer),t.time=NC()-t.time}resume(){if(x(this,Rr)!=null){this._forEachSubscriber(e=>e.resume()),z(this,Rr,null);for(const e of x(this,mi).values()){let t=e.time;t<0&&(t=0),e.time=NC(),setTimeout(e.func,t)}}}}Or=new WeakMap,cl=new WeakMap,Rr=new WeakMap,Jf=new WeakMap,zs=new WeakMap,Ku=new WeakMap,ll=new WeakMap,Uo=new WeakMap,ry=new WeakMap,mi=new WeakMap,ep=new WeakMap,tp=new WeakMap,mt=new WeakSet,ks=async function(e){const t=x(this,tp).cacheTimeout;if(t<0)return await this._perform(e);const r=Mb(e.method,e);let s=x(this,ll).get(r);return s||(s=this._perform(e),x(this,ll).set(r,s),setTimeout(()=>{x(this,ll).get(r)===s&&x(this,ll).delete(r)},t)),await s},u2=async function(e,t,r){ye(r<PH,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=hE(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(i){if(!this.disableCcipRead&&PS(i)&&i.data&&r>=0&&t==="latest"&&s.to!=null&&Sn(i.data,0,4)==="0x556f1830"){const o=i.data,l=await Kr(s.to,this);let h;try{h=zH(Sn(i.data,4))}catch(g){ye(!1,g.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(h.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:h.errorArgs}});const d=await this.ccipReadFetch(s,h.calldata,h.urls);ye(d!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:h.errorArgs}});const p={to:l,data:xn([h.selector,FH([d,h.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:p});try{const g=await be(this,mt,u2).call(this,p,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},p),result:g}),g}catch(g){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},p),error:g}),g}}throw i}},h2=async function(e){const{value:t}=await jr({network:this.getNetwork(),value:e});return t},bm=async function(e,t,r){let s=this._getAddress(t),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await be(this,mt,h2).call(this,be(this,mt,ks).call(this,Object.assign(e,{address:s,blockTag:i})))},d2=async function(e,t){if(on(e,32))return await be(this,mt,ks).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await be(this,mt,ks).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},Em=async function(e,t){let r=await xC(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await xC({orphan:"drop-log",log:t[0]},this)),x(this,Or).get(r.tag)||null},$b=async function(e){const t=await xC(e,this),r=t.tag;let s=x(this,Or).get(r);return s||(s={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},x(this,Or).set(r,s)),s};function LH(n,e){try{const t=f2(n,e);if(t)return eE(t)}catch{}return null}function f2(n,e){if(n==="0x")return null;try{const t=lt(Sn(n,e,e+32)),r=lt(Sn(n,t,t+32));return Sn(n,t+32,t+32+r)}catch{}return null}function mR(n){const e=qn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function MH(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const $H=new Uint8Array([]);function FH(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push($H),t+=32;for(let r=0;r<n.length;r++){const s=pt(n[r]);e[r]=mR(t),e.push(mR(s.length)),e.push(MH(s)),t+=32+Math.ceil(s.length/32)*32}return xn(e)}const yR="0x0000000000000000000000000000000000000000000000000000000000000000";function zH(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(lf(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Sn(n,0,32);ye(Sn(t,0,12)===Sn(yR,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Sn(t,12);try{const r=[],s=lt(Sn(n,32,64)),i=lt(Sn(n,s,s+32)),o=Sn(n,s+32);for(let l=0;l<i;l++){const h=LH(o,l*32);if(h==null)throw new Error("abort");r.push(h)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=f2(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Sn(n,100,128)===Sn(yR,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Sn(n,96,100);try{const r=f2(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Jl(n,e){if(n.provider)return n.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function wR(n,e){let t=hE(e);if(t.to!=null&&(t.to=Kr(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),Kr(r,n)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else t.from=n.getAddress();return await jr(t)}class HH{constructor(e){ie(this,"provider");Xe(this,{provider:e||null})}async getNonce(e){return Jl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await wR(this,e)}async populateTransaction(e){const t=Jl(this,"populateTransaction"),r=await wR(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=ze(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const l=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=l,r.maxPriorityFeePerGas=l}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await jr(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Jl(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Jl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Jl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Jl(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Jl(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=rE.from(r);return await t.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function jH(n){return JSON.parse(JSON.stringify(n))}var Fr,Ta,Wu,ul,Yu,np,Il,p2,g2;class cU{constructor(e){le(this,Il);le(this,Fr);le(this,Ta);le(this,Wu);le(this,ul);le(this,Yu);le(this,np);z(this,Fr,e),z(this,Ta,null),z(this,Wu,be(this,Il,p2).bind(this)),z(this,ul,!1),z(this,Yu,null),z(this,np,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){x(this,ul)||(z(this,ul,!0),be(this,Il,p2).call(this,-2))}stop(){x(this,ul)&&(z(this,ul,!1),z(this,np,!0),be(this,Il,g2).call(this),x(this,Fr).off("block",x(this,Wu)))}pause(e){e&&be(this,Il,g2).call(this),x(this,Fr).off("block",x(this,Wu))}resume(){this.start()}}Fr=new WeakMap,Ta=new WeakMap,Wu=new WeakMap,ul=new WeakMap,Yu=new WeakMap,np=new WeakMap,Il=new WeakSet,p2=async function(e){try{x(this,Ta)==null&&z(this,Ta,this._subscribe(x(this,Fr)));let t=null;try{t=await x(this,Ta)}catch(i){if(!yr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){z(this,Ta,null),x(this,Fr)._recoverSubscriber(this,this._recover(x(this,Fr)));return}const r=await x(this,Fr).getNetwork();if(x(this,Yu)||z(this,Yu,r),x(this,Yu).chainId!==r.chainId)throw new Error("chaid changed");if(x(this,np))return;const s=await x(this,Fr).send("eth_getFilterChanges",[t]);await this._emitResults(x(this,Fr),s)}catch(t){console.log("@TODO",t)}x(this,Fr).once("block",x(this,Wu))},g2=function(){const e=x(this,Ta);e&&(z(this,Ta,null),e.then(t=>{x(this,Fr).destroyed||x(this,Fr).send("eth_uninstallFilter",[t])}))};var Qu;class qH extends cU{constructor(t,r){super(t);le(this,Qu);z(this,Qu,jH(r))}_recover(t){return new QS(t,x(this,Qu))}async _subscribe(t){return await t.send("eth_newFilter",[x(this,Qu)])}async _emitResults(t,r){for(const s of r)t.emit(x(this,Qu),t._wrapLog(s,t._network))}}Qu=new WeakMap;class GH extends cU{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const VH="bigint,boolean,function,number,string,symbol".split(/,/g);function Fb(n){if(n==null||VH.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Fb);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function KH(n){return new Promise(e=>{setTimeout(e,n)})}function _d(n){return n&&n.toLowerCase()}function bR(n){return n&&typeof n.pollingInterval=="number"}const lU={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class ff extends HH{constructor(t,r){super(t);ie(this,"address");r=zt(r),Xe(this,{address:r})}connect(t){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=Fb(t),s=[];if(r.from){const o=r.from;s.push((async()=>{const l=await Kr(o,this.provider);Q(l!=null&&l.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=l})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Kr(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(t);return await new Promise((i,o)=>{const l=[1e3,100];let h=0;const d=async()=>{try{const p=await this.provider.getTransaction(s);if(p!=null){i(p.replaceableTransaction(r));return}}catch(p){if(yr(p,"CANCELLED")||yr(p,"BAD_DATA")||yr(p,"NETWORK_ERROR")||yr(p,"UNSUPPORTED_OPERATION")){p.info==null&&(p.info={}),p.info.sendTransactionHash=s,o(p);return}if(yr(p,"INVALID_ARGUMENT")&&(h++,p.info==null&&(p.info={}),p.info.sendTransactionHash=s,h>10)){o(p);return}this.provider.emit("error",mn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:p}))}this.provider._setTimeout(()=>{d()},l.pop()||4e3)};d()})}async signTransaction(t){const r=Fb(t);if(r.from){const i=await Kr(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(t){const r=typeof t=="string"?Ma(t):t;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(t,r,s){const i=Fb(s),o=await lE.resolveNames(t,r,i,async l=>{const h=await Kr(l);return Q(h!=null,"TypedData does not support null address","value",l),h});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(lE.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Ma(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var Zu,rp,ko,Ia,qi,yi,ps,sy,m2;class WH extends BH{constructor(t,r){super(t,r);le(this,sy);le(this,Zu);le(this,rp);le(this,ko);le(this,Ia);le(this,qi);le(this,yi);le(this,ps);z(this,rp,1),z(this,Zu,Object.assign({},lU,r||{})),z(this,ko,[]),z(this,Ia,null),z(this,yi,null),z(this,ps,null);{let i=null;const o=new Promise(l=>{i=l});z(this,qi,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&t!=null&&z(this,yi,Ba.from(t))):s&&(Q(t==null||s.matches(t),"staticNetwork MUST match network object","options",r),z(this,yi,s))}_getOption(t){return x(this,Zu)[t]}get _network(){return ye(x(this,yi),"network is not available yet","NETWORK_ERROR"),x(this,yi)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let s=t.transaction;if(s&&s.type!=null&&ze(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(x(this,yi))return x(this,yi)}else return t;return x(this,ps)?await x(this,ps):this.ready?(z(this,ps,(async()=>{try{const r=Ba.from(ze(await this.send("eth_chainId",[])));return z(this,ps,null),r}catch(r){throw z(this,ps,null),r}})()),await x(this,ps)):(z(this,ps,(async()=>{const r={id:Hg(this,rp)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],z(this,ps,null)}catch(i){throw z(this,ps,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ba.from(ze(s.result));throw this.getRpcError(r,s)})()),await x(this,ps))}_start(){x(this,qi)==null||x(this,qi).resolve==null||(x(this,qi).resolve(),z(this,qi,null),(async()=>{for(;x(this,yi)==null&&!this.destroyed;)try{z(this,yi,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",mn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await KH(1e3)}be(this,sy,m2).call(this)})())}async _waitUntilReady(){if(x(this,qi)!=null)return await x(this,qi).promise}_getSubscriber(t){return t.type==="pending"?new GH(this):t.type==="event"?this._getOption("polling")?new QS(this,t.filter):new qH(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new oU("orphan"):super._getSubscriber(t)}get ready(){return x(this,qi)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(t[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Gi(ze(t[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{t[s]!=null&&(r[s]=Oe(t[s]))}),t.accessList&&(r.accessList=xh(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(s=>s.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(s=>{const i=h4(s);return{address:i.address,nonce:Gi(i.nonce),chainId:Gi(i.chainId),yParity:Gi(i.signature.yParity),r:Gi(i.signature.r),s:Gi(i.signature.s)}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[_d(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[_d(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[_d(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[_d(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(_d):t.filter.address=_d(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:s}=t,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const h=i.message;if(!h.match(/revert/i)&&h.match(/insufficient funds/i))return mn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:i}});if(h.match(/nonce/i)&&h.match(/too low/i))return mn("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const h=y2(i),d=t0.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",t.params[0],h?h.data:null);return d.info={error:i,payload:t},d}const o=JSON.stringify(QH(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return mn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:t,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const h=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return mn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:h,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return mn("nonce has already been used","NONCE_EXPIRED",{transaction:h,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return mn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:h,info:{error:i}});if(o.match(/only replay-protected/i))return mn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:h,info:{error:i}}})}let l=!!o.match(/the method .* does not exist/i);return l||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(l=!0),l?mn("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:i,payload:t}}):mn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(mn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const s=Hg(this,rp)._++,i=new Promise((o,l)=>{x(this,ko).push({resolve:o,reject:l,payload:{method:t,params:r,id:s,jsonrpc:"2.0"}})});return be(this,sy,m2).call(this),i}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const i=await r;if(t>=i.length)throw new Error("no such account");return new ff(this,i[t])}const{accounts:s}=await jr({network:this.getNetwork(),accounts:r});t=zt(t);for(const i of s)if(zt(i)===t)return new ff(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new ff(this,r))}destroy(){x(this,Ia)&&(clearTimeout(x(this,Ia)),z(this,Ia,null));for(const{payload:t,reject:r}of x(this,ko))r(mn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));z(this,ko,[]),super.destroy()}}Zu=new WeakMap,rp=new WeakMap,ko=new WeakMap,Ia=new WeakMap,qi=new WeakMap,yi=new WeakMap,ps=new WeakMap,sy=new WeakSet,m2=function(){if(x(this,Ia))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");z(this,Ia,setTimeout(()=>{z(this,Ia,null);const r=x(this,ko);for(z(this,ko,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==x(this,Zu).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>x(this,Zu).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:l,reject:h,payload:d}of s){if(this.destroyed){h(mn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:d.method}));continue}const p=o.filter(g=>g.id===d.id)[0];if(p==null){const g=mn("missing response for request","BAD_DATA",{value:o,info:{payload:d}});this.emit("error",g),h(g);continue}if("error"in p){h(this.getRpcError(d,p));continue}l(p.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:l}of s)l(o)}})()}},t))};var hl;class uU extends WH{constructor(t,r){super(t,r);le(this,hl);let s=this._getOption("pollingInterval");s==null&&(s=lU.pollingInterval),z(this,hl,s)}_getSubscriber(t){const r=super._getSubscriber(t);return bR(r)&&(r.pollingInterval=x(this,hl)),r}get pollingInterval(){return x(this,hl)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");z(this,hl,t),this._forEachSubscriber(r=>{bR(r)&&(r.pollingInterval=x(this,hl))})}}hl=new WeakMap;var sp;class YH extends uU{constructor(t,r,s){t==null&&(t="http://localhost:8545");super(r,s);le(this,sp);typeof t=="string"?z(this,sp,new Go(t)):z(this,sp,t.clone())}_getConnection(){return x(this,sp).clone()}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){const r=this._getConnection();r.body=JSON.stringify(t),r.setHeader("content-type","application/json");const s=await r.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}sp=new WeakMap;function y2(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&on(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=y2(n[e]);if(t)return t}return null}if(typeof n=="string")try{return y2(JSON.parse(n))}catch{}return null}function w2(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)w2(n[t],e);if(typeof n=="string")try{return w2(JSON.parse(n),e)}catch{}}}function QH(n){const e=[];return w2(n,e),e}var ip,ap;const bu=class bu extends uU{constructor(t,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,i);le(this,ip);le(this,ap);z(this,ap,null),s&&s.providerInfo&&z(this,ap,s.providerInfo),z(this,ip,async(o,l)=>{const h={method:o,params:l};this.emit("debug",{action:"sendEip1193Request",payload:h});try{const d=await t.request(h);return this.emit("debug",{action:"receiveEip1193Result",result:d}),d}catch(d){const p=new Error(d.message);throw p.code=d.code,p.data=d.data,p.payload=h,this.emit("debug",{action:"receiveEip1193Error",error:p}),p}})}get providerInfo(){return x(this,ap)}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){Q(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await x(this,ip).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(s=>s.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await x(this,ip).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new bu(t.provider);const r=t.window?t.window:typeof window<"u"?window:null;if(r==null)return null;const s=t.anyProvider;if(s&&r.ethereum)return new bu(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=t.timeout?t.timeout:300;return i===0?null:await new Promise((o,l)=>{let h=[];const d=y=>{h.push(y.detail),s&&p()},p=()=>{if(clearTimeout(g),h.length)if(t&&t.filter){const y=t.filter(h.map(b=>Object.assign({},b.info)));if(y==null)o(null);else if(y instanceof bu)o(y);else{let b=null;if(y.uuid&&(b=h.filter(v=>y.uuid===v.info.uuid)[0]),b){const{provider:E,info:v}=b;o(new bu(E,void 0,{providerInfo:v}))}else l(mn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:y}))}}else{const{provider:y,info:b}=h[0];o(new bu(y,void 0,{providerInfo:b}))}else o(null);r.removeEventListener("eip6963:announceProvider",d)},g=setTimeout(()=>{p()},i);r.addEventListener("eip6963:announceProvider",d),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};ip=new WeakMap,ap=new WeakMap;let pf=bu;const ZH=["event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"],XH=new uE(ZH);function JH(n,e){if(!e||!n)return null;const t=ej(e);return t?n.getNtfUrl(t):null}function ej(n){console.log("Transaction logs:",n.logs);for(const e of n.logs){const t=XH.parseLog(e);if(t!=null&&t.name==="Transfer")return t.args.tokenId}return null}function tj(n){return`🔐 I'm human -- now it's verified on-chain.

Got my NFT proof: ${n}

Mint yours → @kaeru_proofs`}function nj({oracleNetwork:n,txResponse:e,txReceipt:t}){const r=JH(n,t);return ue.jsxs(ue.Fragment,{children:[ue.jsx("h2",{children:"Humanhood proven"}),!e&&ue.jsx("p",{children:"Sending transaction..."}),e&&ue.jsx("p",{children:"Transaction sent."}),t&&t.status===1&&ue.jsxs(ue.Fragment,{children:[ue.jsx("p",{children:"Proof is minted successfully."}),n&&r&&ue.jsxs(ue.Fragment,{children:[ue.jsx("p",{children:ue.jsx("a",{href:r,target:"_blank",rel:"noopener",children:"View Your Token"})}),ue.jsx("p",{children:ue.jsx("a",{className:"btn btn-secondary btn-large",target:"_blank",rel:"noopener",href:`https://x.com/intent/post?text=${encodeURIComponent(tj(r))}`,children:ue.jsxs("span",{children:["share on"," ",ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 31 29",fill:"none",children:ue.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.9375 0.628418H28.625L18.625 12.5365L30.5 28.6284H21.125L13.9375 18.9732L5.5 28.6284H0.8125L11.75 16.0767L0.5 0.628418H10.1875L16.75 9.63991L24.25 0.628418L23.9375 0.628418ZM22.375 25.7319H24.875L8.3125 3.20313H5.5L22.0625 25.7319H22.375Z",fill:"#fefefe"})})]})})})]}),n&&!r&&ue.jsx("p",{children:ue.jsx("a",{href:n.nftCollectionUrl,target:"_blank",rel:"noopener",children:"Find Your Token"})})]})]})}function Op(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const hU="2.31.7";let Wg={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${hU}`},Yt=class b2 extends Error{constructor(e,t={}){var l;const r=(()=>{var h;return t.cause instanceof b2?t.cause.details:(h=t.cause)!=null&&h.message?t.cause.message:t.details})(),s=t.cause instanceof b2&&t.cause.docsPath||t.docsPath,i=(l=Wg.getDocsUrl)==null?void 0:l.call(Wg,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Wg.version?[`Version: ${Wg.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=hU}walk(e){return dU(this,e)}};function dU(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?dU(n.cause,e):e?null:n}let rj=class extends Yt{constructor({max:e,min:t,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},sj=class extends Yt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function fy(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function Cl(n){return fy(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}function pE(n,{dir:e="left"}={}){let t=typeof n=="string"?n.replace("0x",""):n,r=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)r++;return t=e==="left"?t.slice(r):t.slice(0,t.length-r),typeof n=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}class fU extends Yt{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let pU=class extends Yt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function Rp(n,{dir:e,size:t=32}={}){return typeof n=="string"?ij(n,{dir:e,size:t}):aj(n,{dir:e,size:t})}function ij(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new pU({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function aj(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new pU({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}const oj=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function gl(n,e={}){return typeof n=="number"||typeof n=="bigint"?Ct(n,e):typeof n=="string"?gU(n,e):typeof n=="boolean"?cj(n,e):Rl(n,e)}function cj(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(Dp(t,{size:e.size}),Rp(t,{size:e.size})):t}function Rl(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=oj[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(Dp(r,{size:e.size}),Rp(r,{dir:"right",size:e.size})):r}function Ct(n,e={}){const{signed:t,size:r}=e,s=BigInt(n);let i;r?t?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const h=typeof n=="bigint"?"n":"";throw new rj({max:i?`${i}${h}`:void 0,min:`${o}${h}`,signed:t,size:r,value:`${n}${h}`})}const l=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Rp(l,{size:r}):l}const lj=new TextEncoder;function gU(n,e={}){const t=lj.encode(n);return Rl(t,e)}const uj=new TextEncoder;function mU(n,e={}){return typeof n=="number"||typeof n=="bigint"?dj(n,e):typeof n=="boolean"?hj(n,e):fy(n)?lh(n,e):yU(n,e)}function hj(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(Dp(t,{size:e.size}),Rp(t,{size:e.size})):t}const co={zero:48,nine:57,A:65,F:70,a:97,f:102};function ER(n){if(n>=co.zero&&n<=co.nine)return n-co.zero;if(n>=co.A&&n<=co.F)return n-(co.A-10);if(n>=co.a&&n<=co.f)return n-(co.a-10)}function lh(n,e={}){let t=n;e.size&&(Dp(t,{size:e.size}),t=Rp(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,l=0;o<s;o++){const h=ER(r.charCodeAt(l++)),d=ER(r.charCodeAt(l++));if(h===void 0||d===void 0)throw new Yt(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);i[o]=h*16+d}return i}function dj(n,e){const t=Ct(n,e);return lh(t)}function yU(n,e={}){const t=uj.encode(n);return typeof e.size=="number"?(Dp(t,{size:e.size}),Rp(t,{dir:"right",size:e.size})):t}function Dp(n,{size:e}){if(Cl(n)>e)throw new sj({givenSize:Cl(n),maxSize:e})}function Wd(n,e={}){const{signed:t}=e;e.size&&Dp(n,{size:e.size});const r=BigInt(n);if(!t)return r;const s=(n.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function gE(n,e={}){return Number(Wd(n,e))}function ZS(n,e){return({exclude:t,format:r})=>({exclude:t,format:s=>{const i=e(s);if(t)for(const o of t)delete i[o];return{...i,...r(s)}},type:n})}const wU={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function XS(n){const e={...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,chainId:n.chainId?gE(n.chainId):void 0,gas:n.gas?BigInt(n.gas):void 0,gasPrice:n.gasPrice?BigInt(n.gasPrice):void 0,maxFeePerBlobGas:n.maxFeePerBlobGas?BigInt(n.maxFeePerBlobGas):void 0,maxFeePerGas:n.maxFeePerGas?BigInt(n.maxFeePerGas):void 0,maxPriorityFeePerGas:n.maxPriorityFeePerGas?BigInt(n.maxPriorityFeePerGas):void 0,nonce:n.nonce?gE(n.nonce):void 0,to:n.to?n.to:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,type:n.type?wU[n.type]:void 0,typeHex:n.type?n.type:void 0,value:n.value?BigInt(n.value):void 0,v:n.v?BigInt(n.v):void 0};return n.authorizationList&&(e.authorizationList=pj(n.authorizationList)),e.yParity=(()=>{if(n.yParity)return Number(n.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const fj=ZS("transaction",XS);function pj(n){return n.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function gj(n){const e=(n.transactions??[]).map(t=>typeof t=="string"?t:XS(t));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:e,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}const mj=ZS("block",gj);function yj(n,{args:e,eventName:t}={}){return{...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,logIndex:n.logIndex?Number(n.logIndex):null,transactionHash:n.transactionHash?n.transactionHash:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,...t?{args:e,eventName:t}:{}}}const wj={"0x0":"reverted","0x1":"success"};function bj(n){const e={...n,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,contractAddress:n.contractAddress?n.contractAddress:null,cumulativeGasUsed:n.cumulativeGasUsed?BigInt(n.cumulativeGasUsed):null,effectiveGasPrice:n.effectiveGasPrice?BigInt(n.effectiveGasPrice):null,gasUsed:n.gasUsed?BigInt(n.gasUsed):null,logs:n.logs?n.logs.map(t=>yj(t)):null,to:n.to?n.to:null,transactionIndex:n.transactionIndex?gE(n.transactionIndex):null,status:n.status?wj[n.status]:null,type:n.type?wU[n.type]||n.type:null};return n.blobGasPrice&&(e.blobGasPrice=BigInt(n.blobGasPrice)),n.blobGasUsed&&(e.blobGasUsed=BigInt(n.blobGasUsed)),e}const Ej=ZS("transactionReceipt",bj),JS=2n**256n-1n;function $fe(n){return typeof n[0]=="string"?Pp(n):vj(n)}function vj(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return t}function Pp(n){return`0x${n.reduce((e,t)=>e+t.replace("0x",""),"")}`}class vR extends Yt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Aj extends Yt{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Cj extends Yt{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const _j={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Cj({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new Aj({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new vR({offset:n});const e=this.position-n;this.assertPosition(e),this.position=e},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new vR({offset:n});const e=this.position+n;this.assertPosition(e),this.position=e},inspectByte(n){const e=n??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(n,e){const t=e??this.position;return this.assertPosition(t+n-1),this.bytes.subarray(t,t+n)},inspectUint8(n){const e=n??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(n){const e=n??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(n){const e=n??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(n){const e=n??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1),this.bytes.set(n,this.position),this.position+=n.length},pushUint8(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushUint16(n){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,n),this.position+=2},pushUint24(n){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,n>>8),this.dataView.setUint8(this.position+2,n&255),this.position+=3},pushUint32(n){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,n),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const n=this.inspectByte();return this.position++,n},readBytes(n,e){this.assertReadLimit(),this._touch();const t=this.inspectBytes(n);return this.position+=e??n,t},readUint8(){this.assertReadLimit(),this._touch();const n=this.inspectUint8();return this.position+=1,n},readUint16(){this.assertReadLimit(),this._touch();const n=this.inspectUint16();return this.position+=2,n},readUint24(){this.assertReadLimit(),this._touch();const n=this.inspectUint24();return this.position+=3,n},readUint32(){this.assertReadLimit(),this._touch();const n=this.inspectUint32();return this.position+=4,n},get remaining(){return this.bytes.length-this.position},setPosition(n){const e=this.position;return this.assertPosition(n),this.position=n,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1),n>0&&this.recursiveReadCount++}};function bU(n,{recursiveReadLimit:e=8192}={}){const t=Object.create(_j);return t.bytes=n,t.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}function uh(n,e="hex"){const t=EU(n),r=bU(new Uint8Array(t.length));return t.encode(r),e==="hex"?Rl(r.bytes):r.bytes}function EU(n){return Array.isArray(n)?Sj(n.map(e=>EU(e))):xj(n)}function Sj(n){const e=n.reduce((s,i)=>s+i.length,0),t=vU(e);return{length:e<=55?1+e:1+t+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+t),t===1?s.pushUint8(e):t===2?s.pushUint16(e):t===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of n)i(s)}}}function xj(n){const e=typeof n=="string"?lh(n):n,t=vU(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+t),t===1?s.pushUint8(e.length):t===2?s.pushUint16(e.length):t===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function vU(n){if(n<2**8)return 1;if(n<2**16)return 2;if(n<2**24)return 3;if(n<2**32)return 4;throw new Yt("Length is too large.")}const Nj={ether:-9,wei:9};function AU(n,e){let t=n.toString();const r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,i]=[t.slice(0,t.length-e),t.slice(t.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function E2(n,e="wei"){return AU(n,Nj[e])}function Tj(n){const e=Object.entries(n).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),t=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(t+1)}  ${s}`).join(`
`)}class Ij extends Yt{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class Oj extends Yt{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Tj(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Rj extends Yt{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}function Dj(n){if(!n||n.length===0)return[];const e=[];for(const t of n){const{chainId:r,nonce:s,...i}=t,o=t.address;e.push([r?gl(r):"0x",o,s?gl(s):"0x",...py({},i)])}return e}function CU(n){const{kzg:e}=n,t=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),r=typeof n.blobs[0]=="string"?n.blobs.map(i=>lh(i)):n.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return t==="bytes"?s:s.map(i=>Rl(i))}function _U(n){const{kzg:e}=n,t=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),r=typeof n.blobs[0]=="string"?n.blobs.map(o=>lh(o)):n.blobs,s=typeof n.commitments[0]=="string"?n.commitments.map(o=>lh(o)):n.commitments,i=[];for(let o=0;o<r.length;o++){const l=r[o],h=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(l,h)))}return t==="bytes"?i:i.map(o=>Rl(o))}const Sd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Pj(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function mE(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function hh(n,...e){if(!Pj(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function Ffe(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");mE(n.outputLen),mE(n.blockLen)}function yE(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function SU(n,e){hh(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Uj(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function s0(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function TC(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ha(n,e){return n<<32-e|n>>>e}const kj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Bj(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Lj(n){for(let e=0;e<n.length;e++)n[e]=Bj(n[e]);return n}const AR=kj?n=>n:Lj,Mj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",$j=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function zfe(n){if(hh(n),Mj)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=$j[n[t]];return e}function Fj(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function ex(n){return typeof n=="string"&&(n=Fj(n)),hh(n),n}function Hfe(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];hh(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}class xU{}function NU(n){const e=r=>n().update(ex(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function jfe(n=32){if(Sd&&typeof Sd.getRandomValues=="function")return Sd.getRandomValues(new Uint8Array(n));if(Sd&&typeof Sd.randomBytes=="function")return Uint8Array.from(Sd.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function zj(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}function Hj(n,e,t){return n&e^~n&t}function jj(n,e,t){return n&e^n&t^e&t}class qj extends xU{constructor(e,t,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=TC(this.buffer)}update(e){yE(this),e=ex(e),hh(e);const{view:t,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=TC(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yE(this),SU(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,s0(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;zj(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=TC(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=l,s%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Nc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rb=BigInt(2**32-1),CR=BigInt(32);function Gj(n,e=!1){return e?{h:Number(n&rb),l:Number(n>>CR&rb)}:{h:Number(n>>CR&rb)|0,l:Number(n&rb)|0}}function Vj(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l}=Gj(n[i],e);[r[i],s[i]]=[o,l]}return[r,s]}const Kj=(n,e,t)=>n<<t|e>>>32-t,Wj=(n,e,t)=>e<<t|n>>>32-t,Yj=(n,e,t)=>e<<t-32|n>>>64-t,Qj=(n,e,t)=>n<<t-32|e>>>64-t,Zj=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tc=new Uint32Array(64);class Xj extends qj{constructor(e=32){super(64,e,8,!1),this.A=Nc[0]|0,this.B=Nc[1]|0,this.C=Nc[2]|0,this.D=Nc[3]|0,this.E=Nc[4]|0,this.F=Nc[5]|0,this.G=Nc[6]|0,this.H=Nc[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:h}=this;return[e,t,r,s,i,o,l,h]}set(e,t,r,s,i,o,l,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=h|0}process(e,t){for(let g=0;g<16;g++,t+=4)Tc[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=Tc[g-15],b=Tc[g-2],E=ha(y,7)^ha(y,18)^y>>>3,v=ha(b,17)^ha(b,19)^b>>>10;Tc[g]=v+Tc[g-7]+E+Tc[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:h,G:d,H:p}=this;for(let g=0;g<64;g++){const y=ha(l,6)^ha(l,11)^ha(l,25),b=p+y+Hj(l,h,d)+Zj[g]+Tc[g]|0,v=(ha(r,2)^ha(r,13)^ha(r,22))+jj(r,s,i)|0;p=d,d=h,h=l,l=o+b|0,o=i,i=s,s=r,r=b+v|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,h,d,p)}roundClean(){s0(Tc)}destroy(){this.set(0,0,0,0,0,0,0,0),s0(this.buffer)}}const Jj=NU(()=>new Xj),eq=Jj;function tq(n,e){return eq(fy(n,{strict:!1})?mU(n):n)}function nq(n){const{commitment:e,version:t=1}=n,r=n.to??(typeof e=="string"?"hex":"bytes"),s=tq(e);return s.set([t],0),r==="bytes"?s:Rl(s)}function rq(n){const{commitments:e,version:t}=n,r=n.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(nq({commitment:i,to:r,version:t}));return s}const _R=6,TU=32,tx=4096,IU=TU*tx,SR=IU*_R-1-1*tx*_R,OU=1;class sq extends Yt{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class RU extends Yt{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class iq extends Yt{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}}class aq extends Yt{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${OU}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}}function oq(n){const e=n.to??(typeof n.data=="string"?"hex":"bytes"),t=typeof n.data=="string"?lh(n.data):n.data,r=Cl(t);if(!r)throw new RU;if(r>SR)throw new sq({maxSize:SR,size:r});const s=[];let i=!0,o=0;for(;i;){const l=bU(new Uint8Array(IU));let h=0;for(;h<tx;){const d=t.slice(o,o+(TU-1));if(l.pushByte(0),l.pushBytes(d),d.length<31){l.pushByte(128),i=!1;break}h++,o+=31}s.push(l)}return e==="bytes"?s.map(l=>l.bytes):s.map(l=>Rl(l.bytes))}function cq(n){const{data:e,kzg:t,to:r}=n,s=n.blobs??oq({data:e,to:r}),i=n.commitments??CU({blobs:s,kzg:t,to:r}),o=n.proofs??_U({blobs:s,commitments:i,kzg:t,to:r}),l=[];for(let h=0;h<s.length;h++)l.push({blob:s[h],commitment:i[h],proof:o[h]});return l}class dh extends Yt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class bv extends Yt{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}class nx extends Yt{constructor({cause:e,message:t}={}){var s;const r=(s=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(nx,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(nx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ev extends Yt{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${E2(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ev,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class DU extends Yt{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${E2(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${E2(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(DU,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});let rx=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const lq=BigInt(0),Yg=BigInt(1),uq=BigInt(2),hq=BigInt(7),dq=BigInt(256),fq=BigInt(113),PU=[],UU=[],kU=[];for(let n=0,e=Yg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],PU.push(2*(5*r+t)),UU.push((n+1)*(n+2)/2%64);let s=lq;for(let i=0;i<7;i++)e=(e<<Yg^(e>>hq)*fq)%dq,e&uq&&(s^=Yg<<(Yg<<BigInt(i))-Yg);kU.push(s)}const BU=Vj(kU,!0),pq=BU[0],gq=BU[1],xR=(n,e,t)=>t>32?Yj(n,e,t):Kj(n,e,t),NR=(n,e,t)=>t>32?Qj(n,e,t):Wj(n,e,t);function mq(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,d=t[h],p=t[h+1],g=xR(d,p,1)^t[l],y=NR(d,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=UU[o],h=xR(s,i,l),d=NR(s,i,l),p=PU[o];s=n[p],i=n[p+1],n[p]=h,n[p+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=pq[r],n[1]^=gq[r]}s0(t)}class sx extends xU{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,mE(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Uj(this.state)}clone(){return this._cloneInto()}keccak(){AR(this.state32),mq(this.state32,this.rounds),AR(this.state32),this.posOut=0,this.pos=0}update(e){yE(this),e=ex(e),hh(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){yE(this,!1),hh(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(SU(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,s0(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new sx(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const yq=(n,e,t)=>NU(()=>new sx(e,n,t)),LU=yq(1,136,256/8);function wq(n,e){const t=e||"hex",r=LU(fy(n,{strict:!1})?mU(n):n);return t==="bytes"?r:gl(r)}const IC=new rx(8192);function bq(n,e){if(IC.has(`${n}.${e}`))return IC.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=wq(yU(t),"bytes"),s=t.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return IC.set(`${n}.${e}`,i),i}const Eq=/^0x[a-fA-F0-9]{40}$/,OC=new rx(8192);function fh(n,e){const{strict:t=!0}=e??{},r=`${n}.${t}`;if(OC.has(r))return OC.get(r);const s=Eq.test(n)?n.toLowerCase()===n?!0:t?bq(n)===n:!0:!1;return OC.set(r,s),s}function vq(n,e,t,{strict:r}={}){return fy(n,{strict:!1})?Cq(n,e,t,{strict:r}):Aq(n,e,t,{strict:r})}function MU(n,e){if(typeof e=="number"&&e>0&&e>Cl(n)-1)throw new fU({offset:e,position:"start",size:Cl(n)})}function $U(n,e,t){if(typeof e=="number"&&typeof t=="number"&&Cl(n)!==t-e)throw new fU({offset:t,position:"end",size:Cl(n)})}function Aq(n,e,t,{strict:r}={}){MU(n,e);const s=n.slice(e,t);return r&&$U(s,e,t),s}function Cq(n,e,t,{strict:r}={}){MU(n,e);const s=`0x${n.replace("0x","").slice((e??0)*2,(t??n.length)*2)}`;return r&&$U(s,e,t),s}function _q(n){const{authorizationList:e}=n;if(e)for(const t of e){const{chainId:r}=t,s=t.address;if(!fh(s))throw new dh({address:s});if(r<0)throw new bv({chainId:r})}ix(n)}function Sq(n){const{blobVersionedHashes:e}=n;if(e){if(e.length===0)throw new RU;for(const t of e){const r=Cl(t),s=gE(vq(t,0,1));if(r!==32)throw new iq({hash:t,size:r});if(s!==OU)throw new aq({hash:t,version:s})}}ix(n)}function ix(n){const{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:r,to:s}=n;if(e<=0)throw new bv({chainId:e});if(s&&!fh(s))throw new dh({address:s});if(r&&r>JS)throw new Ev({maxFeePerGas:r});if(t&&r&&t>r)throw new DU({maxFeePerGas:r,maxPriorityFeePerGas:t})}function xq(n){const{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:s,to:i}=n;if(e<=0)throw new bv({chainId:e});if(i&&!fh(i))throw new dh({address:i});if(t||s)throw new Yt("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>JS)throw new Ev({maxFeePerGas:r})}function Nq(n){const{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:s,to:i}=n;if(i&&!fh(i))throw new dh({address:i});if(typeof e<"u"&&e<=0)throw new bv({chainId:e});if(t||s)throw new Yt("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>JS)throw new Ev({maxFeePerGas:r})}function Tq(n){if(n.type)return n.type;if(typeof n.authorizationList<"u")return"eip7702";if(typeof n.blobs<"u"||typeof n.blobVersionedHashes<"u"||typeof n.maxFeePerBlobGas<"u"||typeof n.sidecars<"u")return"eip4844";if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")return"eip1559";if(typeof n.gasPrice<"u")return typeof n.accessList<"u"?"eip2930":"legacy";throw new Oj({transaction:n})}function vv(n){if(!n||n.length===0)return[];const e=[];for(let t=0;t<n.length;t++){const{address:r,storageKeys:s}=n[t];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new Rj({storageKey:s[i]});if(!fh(r,{strict:!1}))throw new dh({address:r});e.push([r,s])}return e}function Iq(n,e){const t=Tq(n);return t==="eip1559"?Dq(n,e):t==="eip2930"?Pq(n,e):t==="eip4844"?Rq(n,e):t==="eip7702"?Oq(n,e):Uq(n,e)}function Oq(n,e){const{authorizationList:t,chainId:r,gas:s,nonce:i,to:o,value:l,maxFeePerGas:h,maxPriorityFeePerGas:d,accessList:p,data:g}=n;_q(n);const y=vv(p),b=Dj(t);return Pp(["0x04",uh([Ct(r),i?Ct(i):"0x",d?Ct(d):"0x",h?Ct(h):"0x",s?Ct(s):"0x",o??"0x",l?Ct(l):"0x",g??"0x",y,b,...py(n,e)])])}function Rq(n,e){const{chainId:t,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:l,maxFeePerGas:h,maxPriorityFeePerGas:d,accessList:p,data:g}=n;Sq(n);let y=n.blobVersionedHashes,b=n.sidecars;if(n.blobs&&(typeof y>"u"||typeof b>"u")){const N=typeof n.blobs[0]=="string"?n.blobs:n.blobs.map(P=>Rl(P)),k=n.kzg,R=CU({blobs:N,kzg:k});if(typeof y>"u"&&(y=rq({commitments:R})),typeof b>"u"){const P=_U({blobs:N,commitments:R,kzg:k});b=cq({blobs:N,commitments:R,proofs:P})}}const E=vv(p),v=[Ct(t),s?Ct(s):"0x",d?Ct(d):"0x",h?Ct(h):"0x",r?Ct(r):"0x",i??"0x",o?Ct(o):"0x",g??"0x",E,l?Ct(l):"0x",y??[],...py(n,e)],A=[],S=[],T=[];if(b)for(let N=0;N<b.length;N++){const{blob:k,commitment:R,proof:P}=b[N];A.push(k),S.push(R),T.push(P)}return Pp(["0x03",uh(b?[v,A,S,T]:v)])}function Dq(n,e){const{chainId:t,gas:r,nonce:s,to:i,value:o,maxFeePerGas:l,maxPriorityFeePerGas:h,accessList:d,data:p}=n;ix(n);const g=vv(d),y=[Ct(t),s?Ct(s):"0x",h?Ct(h):"0x",l?Ct(l):"0x",r?Ct(r):"0x",i??"0x",o?Ct(o):"0x",p??"0x",g,...py(n,e)];return Pp(["0x02",uh(y)])}function Pq(n,e){const{chainId:t,gas:r,data:s,nonce:i,to:o,value:l,accessList:h,gasPrice:d}=n;xq(n);const p=vv(h),g=[Ct(t),i?Ct(i):"0x",d?Ct(d):"0x",r?Ct(r):"0x",o??"0x",l?Ct(l):"0x",s??"0x",p,...py(n,e)];return Pp(["0x01",uh(g)])}function Uq(n,e){const{chainId:t=0,gas:r,data:s,nonce:i,to:o,value:l,gasPrice:h}=n;Nq(n);let d=[i?Ct(i):"0x",h?Ct(h):"0x",r?Ct(r):"0x",o??"0x",l?Ct(l):"0x",s??"0x"];if(e){const p=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);const b=27n+(e.v===27n?0n:1n);if(e.v!==b)throw new Ij({v:e.v});return b})(),g=pE(e.r),y=pE(e.s);d=[...d,Ct(p),g==="0x00"?"0x":g,y==="0x00"?"0x":y]}else t>0&&(d=[...d,Ct(t),"0x","0x"]);return uh(d)}function py(n,e){const t=e??n,{v:r,yParity:s}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=pE(t.r),o=pE(t.s);return[typeof s=="number"?s?Ct(1):"0x":r===0n?"0x":r===1n?Ct(1):r===27n?"0x":Ct(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}const kq={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},Bq={block:mj({format(n){var t;return{transactions:(t=n.transactions)==null?void 0:t.map(r=>{if(typeof r=="string")return r;const s=XS(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?Wd(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:n.stateRoot}}}),transaction:fj({format(n){const e={};return n.type==="0x7e"&&(e.isSystemTx=n.isSystemTx,e.mint=n.mint?Wd(n.mint):void 0,e.sourceHash=n.sourceHash,e.type="deposit"),e}}),transactionReceipt:Ej({format(n){return{l1GasPrice:n.l1GasPrice?Wd(n.l1GasPrice):null,l1GasUsed:n.l1GasUsed?Wd(n.l1GasUsed):null,l1Fee:n.l1Fee?Wd(n.l1Fee):null,l1FeeScalar:n.l1FeeScalar?Number(n.l1FeeScalar):null}}})};function Lq(n,e){return Fq(n)?$q(n):Iq(n,e)}const Mq={transaction:Lq};function $q(n){zq(n);const{sourceHash:e,data:t,from:r,gas:s,isSystemTx:i,mint:o,to:l,value:h}=n,d=[e,r,l??"0x",o?gl(o):"0x",h?gl(h):"0x",s?gl(s):"0x",i?"0x1":"0x",t??"0x"];return Pp(["0x7e",uh(d)])}function Fq(n){return n.type==="deposit"||typeof n.sourceHash<"u"}function zq(n){const{from:e,to:t}=n;if(e&&!fh(e))throw new dh({address:e});if(t&&!fh(t))throw new dh({address:t})}const wE={blockTime:2e3,contracts:kq,formatters:Bq,serializers:Mq},Qg=1,v2=Op({...wE,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...wE.contracts,disputeGameFactory:{[Qg]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Qg]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Qg]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Qg]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Qg}),Zg=11155111,A2=Op({...wE,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...wE.contracts,disputeGameFactory:{[Zg]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[Zg]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[Zg]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[Zg]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:Zg}),th=(n,e,t)=>JSON.stringify(n,(r,s)=>typeof s=="bigint"?s.toString():s,t),ax=n=>n;class Im extends Yt{constructor({body:e,cause:t,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${ax(o)}`,e&&`Request body: ${th(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class FU extends Yt{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${ax(r)}`,`Request body: ${th(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class TR extends Yt{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${ax(t)}`,`Request body: ${th(e)}`],name:"TimeoutError"})}}const Hq=-1;class _s extends Yt{constructor(e,{code:t,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof FU?e.code:t??Hq}}class Ws extends _s{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class i0 extends _s{constructor(e){super(e,{code:i0.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(i0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class a0 extends _s{constructor(e){super(e,{code:a0.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(a0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class o0 extends _s{constructor(e,{method:t}={}){super(e,{code:o0.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(o0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class c0 extends _s{constructor(e){super(e,{code:c0.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(c0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class mp extends _s{constructor(e){super(e,{code:mp.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(mp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class l0 extends _s{constructor(e){super(e,{code:l0.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(l0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class u0 extends _s{constructor(e){super(e,{code:u0.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(u0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class h0 extends _s{constructor(e){super(e,{code:h0.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(h0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class yp extends _s{constructor(e){super(e,{code:yp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class _u extends _s{constructor(e,{method:t}={}){super(e,{code:_u.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(_u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wp extends _s{constructor(e){super(e,{code:wp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class d0 extends _s{constructor(e){super(e,{code:d0.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(d0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class nh extends Ws{constructor(e){super(e,{code:nh.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class f0 extends Ws{constructor(e){super(e,{code:f0.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(f0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class p0 extends Ws{constructor(e,{method:t}={}){super(e,{code:p0.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(p0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class g0 extends Ws{constructor(e){super(e,{code:g0.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(g0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class m0 extends Ws{constructor(e){super(e,{code:m0.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(m0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class y0 extends Ws{constructor(e){super(e,{code:y0.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(y0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class w0 extends Ws{constructor(e){super(e,{code:w0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(w0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class b0 extends Ws{constructor(e){super(e,{code:b0.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(b0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class E0 extends Ws{constructor(e){super(e,{code:E0.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(E0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class v0 extends Ws{constructor(e){super(e,{code:v0.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(v0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class A0 extends Ws{constructor(e){super(e,{code:A0.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(A0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class C0 extends Ws{constructor(e){super(e,{code:C0.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(C0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class _0 extends Ws{constructor(e){super(e,{code:_0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(_0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class jq extends _s{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const C2=Op({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),_2=Op({id:2818,name:"Morph",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.morphl2.io"],webSocket:["wss://rpc.morphl2.io:8443"]}},blockExplorers:{default:{name:"Morph Explorer",url:"https://explorer.morphl2.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3654913}},testnet:!1}),S2=Op({id:2810,name:"Morph Holesky",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc-quicknode-holesky.morphl2.io"],webSocket:["wss://rpc-quicknode-holesky.morphl2.io"]}},blockExplorers:{default:{name:"Morph Holesky Explorer",url:"https://explorer-holesky.morphl2.io",apiUrl:"https://explorer-api-holesky.morphl2.io/api?"}},testnet:!0}),x2=Op({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function gy(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const IR=gy({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),OR=gy({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});gy({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});gy({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});gy({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const N2=[{chainId:C2.id,name:"Ethereum",flowRegistryAddress:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",flowId:5n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://opensea.io/collection/kaeru-559786994",getNtfUrl:n=>`https://opensea.io/item/ethereum/0xc86B125DA2EDea870a6ef9a135bfeCE4923248bD/${n.toString()}`,appKitNetwork:C2},{chainId:x2.id,name:"Ethereum Sepolia",flowRegistryAddress:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",flowId:15n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://testnets.opensea.io/collection/kaeru-17",getNtfUrl:n=>`https://testnets.opensea.io/assets/sepolia/0x50b473E1c46c98890607Bd4aad9D36742e330717/${n.toString()}`,appKitNetwork:x2},{chainId:v2.id,name:"Base",flowRegistryAddress:"0x2ac30345834200416EC75d95a010D09197Ccb74d",flowId:2n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://opensea.io/collection/kaeru-173704199",getNtfUrl:n=>`https://opensea.io/item/base/0xe6a3e2fee86828f53f207b5c23a655b5f45a51ec/${n.toString()}`,appKitNetwork:v2},{chainId:A2.id,name:"Base Sepolia",flowRegistryAddress:"0x8b63AaA4Eac7bB63c33EAA092f8e690c6e8d8eA2",flowId:2n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://testnets.opensea.io/collection/kaeru-22",getNtfUrl:n=>`https://testnets.opensea.io/item/base_sepolia/0x8e93e840e6cf631d4abf866b660b4c6ad83afc0a/${n.toString()}`,appKitNetwork:A2},{chainId:_2.id,name:"Morph",flowRegistryAddress:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",flowId:2n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://app.mintify.com/nft/eth/0xc86b125da2edea870a6ef9a135bfece4923248bd",getNtfUrl:()=>"https://app.mintify.com/nft/eth/0xc86b125da2edea870a6ef9a135bfece4923248bd/1",appKitNetwork:_2},{chainId:S2.id,name:"Morph Holesky",flowRegistryAddress:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",flowId:2n,tdId:15096746890360604645971173203300599099059582387485305170950792239127327905542n,nftCollectionUrl:"https://testnet.morpha.io/en/collection/0x9615901991235Acc88C19c86C4b1620061bde258",getNtfUrl:()=>"https://testnet.morpha.io/en/collection/0x9615901991235Acc88C19c86C4b1620061bde258/1",appKitNetwork:S2}],qq=N2.reduce((n,e)=>(n[e.chainId.toString()]=e,n),{});function Gq(n){return qq[n.toString()]||null}const Vq=Symbol(),ox=Symbol(),vm="a",zU="f",RR="p",HU="c",jU="t",cx="h",Om="w",lx="o",ux="k";let Kq=(n,e)=>new Proxy(n,e);const T2=Object.getPrototypeOf,I2=new WeakMap,qU=n=>n&&(I2.has(n)?I2.get(n):T2(n)===Object.prototype||T2(n)===Array.prototype),bE=n=>typeof n=="object"&&n!==null,Wq=n=>Object.values(Object.getOwnPropertyDescriptors(n)).some(e=>!e.configurable&&!e.writable),Yq=n=>{if(Array.isArray(n))return Array.from(n);const e=Object.getOwnPropertyDescriptors(n);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(T2(n),e)},Qq=(n,e)=>{const t={[zU]:e};let r=!1;const s=(l,h)=>{if(!r){let d=t[vm].get(n);if(d||(d={},t[vm].set(n,d)),l===Om)d[Om]=!0;else{let p=d[l];p||(p=new Set,d[l]=p),p.add(h)}}},i=()=>{r=!0,t[vm].delete(n)},o={get(l,h){return h===ox?n:(s(ux,h),GU(Reflect.get(l,h),t[vm],t[HU],t[jU]))},has(l,h){return h===Vq?(i(),!0):(s(cx,h),Reflect.has(l,h))},getOwnPropertyDescriptor(l,h){return s(lx,h),Reflect.getOwnPropertyDescriptor(l,h)},ownKeys(l){return s(Om),Reflect.ownKeys(l)}};return e&&(o.set=o.deleteProperty=()=>!1),[o,t]},hx=n=>n[ox]||n,GU=(n,e,t,r)=>{if(!qU(n))return n;let s=r&&r.get(n);if(!s){const h=hx(n);Wq(h)?s=[h,Yq(h)]:s=[h],r==null||r.set(n,s)}const[i,o]=s;let l=t&&t.get(i);return(!l||l[1][zU]!==!!o)&&(l=Qq(i,!!o),l[1][RR]=Kq(o||i,l[0]),t&&t.set(i,l)),l[1][vm]=e,l[1][HU]=t,l[1][jU]=r,l[1][RR]},Zq=(n,e)=>{const t=Reflect.ownKeys(n),r=Reflect.ownKeys(e);return t.length!==r.length||t.some((s,i)=>s!==r[i])},VU=(n,e,t,r,s=Object.is)=>{if(s(n,e))return!1;if(!bE(n)||!bE(e))return!0;const i=t.get(hx(n));if(!i)return!0;if(r){if(r.get(n)===e)return!1;r.set(n,e)}let o=null;for(const l of i[cx]||[])if(o=Reflect.has(n,l)!==Reflect.has(e,l),o)return o;if(i[Om]===!0){if(o=Zq(n,e),o)return o}else for(const l of i[lx]||[]){const h=!!Reflect.getOwnPropertyDescriptor(n,l),d=!!Reflect.getOwnPropertyDescriptor(e,l);if(o=h!==d,o)return o}for(const l of i[ux]||[])if(o=VU(n[l],e[l],t,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},Xq=n=>qU(n)&&n[ox]||null,DR=(n,e=!0)=>{I2.set(n,e)},Jq=(n,e,t)=>{const r=[],s=new WeakSet,i=(o,l)=>{var h,d,p;if(s.has(o))return;bE(o)&&s.add(o);const g=bE(o)&&e.get(hx(o));if(g){if((h=g[cx])===null||h===void 0||h.forEach(y=>{const b=`:has(${String(y)})`;r.push(l?[...l,b]:[b])}),g[Om]===!0){const y=":ownKeys";r.push(l?[...l,y]:[y])}else(d=g[lx])===null||d===void 0||d.forEach(y=>{const b=`:hasOwn(${String(y)})`;r.push(l?[...l,b]:[b])});(p=g[ux])===null||p===void 0||p.forEach(y=>{"value"in(Object.getOwnPropertyDescriptor(o,y)||{})&&i(o[y],l?[...l,y]:[y])})}else l&&r.push(l)};return i(n),r},EE={},dx=n=>typeof n=="object"&&n!==null,eG=n=>dx(n)&&!my.has(n)&&(Array.isArray(n)||!(Symbol.iterator in n))&&!(n instanceof WeakMap)&&!(n instanceof WeakSet)&&!(n instanceof Error)&&!(n instanceof Number)&&!(n instanceof Date)&&!(n instanceof String)&&!(n instanceof RegExp)&&!(n instanceof ArrayBuffer)&&!(n instanceof Promise),KU=(n,e)=>{const t=O2.get(n);if((t==null?void 0:t[0])===e)return t[1];const r=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return DR(r,!0),O2.set(n,[e,r]),Reflect.ownKeys(n).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(n,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(n,s),l={value:i,enumerable:o,configurable:!0};if(my.has(i))DR(i,!1);else if(_l.has(i)){const[h,d]=_l.get(i);l.value=KU(h,d())}Object.defineProperty(r,s,l)}),Object.preventExtensions(r)},tG=(n,e,t,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);t(i);const l=Reflect.deleteProperty(s,i);return l&&r(["delete",[i],o]),l},set(s,i,o,l){const h=!n()&&Reflect.has(s,i),d=Reflect.get(s,i,l);if(h&&(PR(d,o)||S0.has(o)&&PR(d,S0.get(o))))return!0;t(i),dx(o)&&(o=Xq(o)||o);const p=!_l.has(o)&&rG(o)?un(o):o;return e(i,p),Reflect.set(s,i,p,l),r(["set",[i],o,d]),!0}}),_l=new WeakMap,my=new WeakSet,O2=new WeakMap,Am=[1,1],S0=new WeakMap;let PR=Object.is,nG=(n,e)=>new Proxy(n,e),rG=eG,sG=KU,iG=tG;function un(n={}){if(!dx(n))throw new Error("object required");const e=S0.get(n);if(e)return e;let t=Am[0];const r=new Set,s=(A,S=++Am[0])=>{t!==S&&(t=S,r.forEach(T=>T(A,S)))};let i=Am[1];const o=(A=++Am[1])=>(i!==A&&!r.size&&(i=A,h.forEach(([S])=>{const T=S[1](A);T>t&&(t=T)})),t),l=A=>(S,T)=>{const N=[...S];N[1]=[A,...N[1]],s(N,T)},h=new Map,d=(A,S)=>{const T=!my.has(S)&&_l.get(S);if(T){if((EE?"production":void 0)!=="production"&&h.has(A))throw new Error("prop listener already exists");if(r.size){const N=T[2](l(A));h.set(A,[T,N])}else h.set(A,[T])}},p=A=>{var S;const T=h.get(A);T&&(h.delete(A),(S=T[1])==null||S.call(T))},g=A=>(r.add(A),r.size===1&&h.forEach(([T,N],k)=>{if((EE?"production":void 0)!=="production"&&N)throw new Error("remove already exists");const R=T[2](l(k));h.set(k,[T,R])}),()=>{r.delete(A),r.size===0&&h.forEach(([T,N],k)=>{N&&(N(),h.set(k,[T]))})});let y=!0;const b=iG(()=>y,d,p,s),E=nG(n,b);S0.set(n,E);const v=[n,o,g];return _l.set(E,v),Reflect.ownKeys(n).forEach(A=>{const S=Object.getOwnPropertyDescriptor(n,A);"value"in S&&S.writable&&(E[A]=n[A])}),y=!1,E}function ar(n,e,t){const r=_l.get(n);(EE?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let l=!1;const d=o(p=>{i.push(p),s||(s=Promise.resolve().then(()=>{s=void 0,l&&e(i.splice(0))}))});return l=!0,()=>{l=!1,d()}}function ph(n){const e=_l.get(n);(EE?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[t,r]=e;return sG(t,r())}function gh(n){return my.add(n),n}function aG(){return{proxyStateMap:_l,refSet:my,snapCache:O2,versionHolder:Am,proxyCache:S0}}function Ur(n,e,t,r){let s=n[e];return ar(n,()=>{const i=n[e];Object.is(s,i)||t(s=i)})}const{proxyStateMap:oG,snapCache:cG}=aG(),sb=n=>oG.has(n);function lG(n){const e=[];let t=0;const r=new Map,s=new WeakMap,i=()=>{const d=cG.get(l),p=d==null?void 0:d[1];if(p&&!s.has(p)){const g=new Map(r);s.set(p,g)}},o=d=>s.get(d)||r,l={data:e,index:t,epoch:0,get size(){return sb(this)||i(),o(this).size},get(d){const g=o(this).get(d);if(g===void 0){this.epoch;return}return this.data[g]},has(d){const p=o(this);return this.epoch,p.has(d)},set(d,p){if(!sb(this))throw new Error("Cannot perform mutations on a snapshot");const g=r.get(d);return g===void 0?(r.set(d,this.index),this.data[this.index++]=p):this.data[g]=p,this.epoch++,this},delete(d){if(!sb(this))throw new Error("Cannot perform mutations on a snapshot");const p=r.get(d);return p===void 0?!1:(delete this.data[p],r.delete(d),this.epoch++,!0)},clear(){if(!sb(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(d){this.epoch,o(this).forEach((g,y)=>{d(this.data[g],y,this)})},*entries(){this.epoch;const d=o(this);for(const[p,g]of d)yield[p,this.data[g]]},*keys(){this.epoch;const d=o(this);for(const p of d.keys())yield p},*values(){this.epoch;const d=o(this);for(const p of d.values())yield this.data[p]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},h=un(l);return Object.defineProperties(h,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(h),h}var UR={};const ce={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof UR<"u"?UR.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},WU={caipNetworkIdToNumber(n){return n?Number(n.split(":")[1]):void 0},parseEvmChainId(n){return typeof n=="string"?this.caipNetworkIdToNumber(n):n},getNetworksByNamespace(n,e){return(n==null?void 0:n.filter(t=>t.chainNamespace===e))||[]},getFirstNetworkByNamespace(n,e){return this.getNetworksByNamespace(n,e)[0]},getNetworkNameByCaipNetworkId(n,e){var s;if(!e)return;const t=n.find(i=>i.caipNetworkId===e);if(t)return t.name;const[r]=e.split(":");return((s=ce.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var uG=20,hG=1,mh=1e6,kR=1e6,dG=-7,fG=21,pG=!1,yy="[big.js] ",Th=yy+"Invalid ",Av=Th+"decimal places",gG=Th+"rounding mode",YU=yy+"Division by zero",Wt={},$a=void 0,mG=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function QU(){function n(e){var t=this;if(!(t instanceof n))return e===$a?QU():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(Th+"value");e=e===0&&1/e<0?"-0":String(e)}yG(t,e)}t.constructor=n}return n.prototype=Wt,n.DP=uG,n.RM=hG,n.NE=dG,n.PE=fG,n.strict=pG,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function yG(n,e){var t,r,s;if(!mG.test(e))throw Error(Th+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)n.c=[n.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(n.e=t-r-1,n.c=[],t=0;r<=s;)n.c[t++]=+e.charAt(r++)}return n}function Ih(n,e,t,r){var s=n.c;if(t===$a&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(gG);if(e<1)r=t===3&&(r||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(r||s[1]!==$a))),s.length=1,r?(n.e=n.e-e+1,s[0]=1):s[0]=n.e=0;else if(e<s.length){if(r=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==$a||s[e-1]&1))||t===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++n.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return n}function Oh(n,e,t){var r=n.e,s=n.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return n.s<0&&t?"-"+s:s}Wt.abs=function(){var n=new this.constructor(this);return n.s=1,n};Wt.cmp=function(n){var e,t=this,r=t.c,s=(n=new t.constructor(n)).c,i=t.s,o=n.s,l=t.e,h=n.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,l!=h)return l>h^e?1:-1;for(o=(l=r.length)<(h=s.length)?l:h,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return l==h?0:l>h^e?1:-1};Wt.div=function(n){var e=this,t=e.constructor,r=e.c,s=(n=new t(n)).c,i=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>mh)throw Error(Av);if(!s[0])throw Error(YU);if(!r[0])return n.s=i,n.c=[n.e=0],n;var l,h,d,p,g,y=s.slice(),b=l=s.length,E=r.length,v=r.slice(0,l),A=v.length,S=n,T=S.c=[],N=0,k=o+(S.e=e.e-n.e)+1;for(S.s=i,i=k<0?0:k,y.unshift(0);A++<l;)v.push(0);do{for(d=0;d<10;d++){if(l!=(A=v.length))p=l>A?1:-1;else for(g=-1,p=0;++g<l;)if(s[g]!=v[g]){p=s[g]>v[g]?1:-1;break}if(p<0){for(h=A==l?s:y;A;){if(v[--A]<h[A]){for(g=A;g&&!v[--g];)v[g]=9;--v[g],v[A]+=10}v[A]-=h[A]}for(;!v[0];)v.shift()}else break}T[N++]=p?d:++d,v[0]&&p?v[A]=r[b]||0:v=[r[b]]}while((b++<E||v[0]!==$a)&&i--);return!T[0]&&N!=1&&(T.shift(),S.e--,k--),N>k&&Ih(S,k,t.RM,v[0]!==$a),S};Wt.eq=function(n){return this.cmp(n)===0};Wt.gt=function(n){return this.cmp(n)>0};Wt.gte=function(n){return this.cmp(n)>-1};Wt.lt=function(n){return this.cmp(n)<0};Wt.lte=function(n){return this.cmp(n)<1};Wt.minus=Wt.sub=function(n){var e,t,r,s,i=this,o=i.constructor,l=i.s,h=(n=new o(n)).s;if(l!=h)return n.s=-h,i.plus(n);var d=i.c.slice(),p=i.e,g=n.c,y=n.e;if(!d[0]||!g[0])return g[0]?n.s=-h:d[0]?n=new o(i):n.s=1,n;if(l=p-y){for((s=l<0)?(l=-l,r=d):(y=p,r=g),r.reverse(),h=l;h--;)r.push(0);r.reverse()}else for(t=((s=d.length<g.length)?d:g).length,l=h=0;h<t;h++)if(d[h]!=g[h]){s=d[h]<g[h];break}if(s&&(r=d,d=g,g=r,n.s=-n.s),(h=(t=g.length)-(e=d.length))>0)for(;h--;)d[e++]=0;for(h=e;t>l;){if(d[--t]<g[t]){for(e=t;e&&!d[--e];)d[e]=9;--d[e],d[t]+=10}d[t]-=g[t]}for(;d[--h]===0;)d.pop();for(;d[0]===0;)d.shift(),--y;return d[0]||(n.s=1,d=[y=0]),n.c=d,n.e=y,n};Wt.mod=function(n){var e,t=this,r=t.constructor,s=t.s,i=(n=new r(n)).s;if(!n.c[0])throw Error(YU);return t.s=n.s=1,e=n.cmp(t)==1,t.s=s,n.s=i,e?new r(t):(s=r.DP,i=r.RM,r.DP=r.RM=0,t=t.div(n),r.DP=s,r.RM=i,this.minus(t.times(n)))};Wt.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};Wt.plus=Wt.add=function(n){var e,t,r,s=this,i=s.constructor;if(n=new i(n),s.s!=n.s)return n.s=-n.s,s.minus(n);var o=s.e,l=s.c,h=n.e,d=n.c;if(!l[0]||!d[0])return d[0]||(l[0]?n=new i(s):n.s=s.s),n;if(l=l.slice(),e=o-h){for(e>0?(h=o,r=d):(e=-e,r=l),r.reverse();e--;)r.push(0);r.reverse()}for(l.length-d.length<0&&(r=d,d=l,l=r),e=d.length,t=0;e;l[e]%=10)t=(l[--e]=l[e]+d[e]+t)/10|0;for(t&&(l.unshift(t),++h),e=l.length;l[--e]===0;)l.pop();return n.c=l,n.e=h,n};Wt.pow=function(n){var e=this,t=new e.constructor("1"),r=t,s=n<0;if(n!==~~n||n<-kR||n>kR)throw Error(Th+"exponent");for(s&&(n=-n);n&1&&(r=r.times(e)),n>>=1,!!n;)e=e.times(e);return s?t.div(r):r};Wt.prec=function(n,e){if(n!==~~n||n<1||n>mh)throw Error(Th+"precision");return Ih(new this.constructor(this),n,e)};Wt.round=function(n,e){if(n===$a)n=0;else if(n!==~~n||n<-mh||n>mh)throw Error(Av);return Ih(new this.constructor(this),n+this.e+1,e)};Wt.sqrt=function(){var n,e,t,r=this,s=r.constructor,i=r.s,o=r.e,l=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(yy+"No square root");i=Math.sqrt(+Oh(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):n=new s(i+""),o=n.e+(s.DP+=4);do t=n,n=l.times(t.plus(r.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return Ih(n,(s.DP-=4)+n.e+1,s.RM)};Wt.times=Wt.mul=function(n){var e,t=this,r=t.constructor,s=t.c,i=(n=new r(n)).c,o=s.length,l=i.length,h=t.e,d=n.e;if(n.s=t.s==n.s?1:-1,!s[0]||!i[0])return n.c=[n.e=0],n;for(n.e=h+d,o<l&&(e=s,s=i,i=e,d=o,o=l,l=d),e=new Array(d=o+l);d--;)e[d]=0;for(h=l;h--;){for(l=0,d=o+h;d>h;)l=e[d]+i[h]*s[d-h-1]+l,e[d--]=l%10,l=l/10|0;e[d]=l}for(l?++n.e:e.shift(),h=e.length;!e[--h];)e.pop();return n.c=e,n};Wt.toExponential=function(n,e){var t=this,r=t.c[0];if(n!==$a){if(n!==~~n||n<0||n>mh)throw Error(Av);for(t=Ih(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return Oh(t,!0,!!r)};Wt.toFixed=function(n,e){var t=this,r=t.c[0];if(n!==$a){if(n!==~~n||n<0||n>mh)throw Error(Av);for(t=Ih(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return Oh(t,!1,!!r)};Wt[Symbol.for("nodejs.util.inspect.custom")]=Wt.toJSON=Wt.toString=function(){var n=this,e=n.constructor;return Oh(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};Wt.toNumber=function(){var n=+Oh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(yy+"Imprecise conversion");return n};Wt.toPrecision=function(n,e){var t=this,r=t.constructor,s=t.c[0];if(n!==$a){if(n!==~~n||n<1||n>mh)throw Error(Th+"precision");for(t=Ih(new r(t),n,e);t.c.length<n;)t.c.push(0)}return Oh(t,n<=t.e||t.e<=r.NE||t.e>=r.PE,!!s)};Wt.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(yy+"valueOf disallowed");return Oh(n,n.e<=e.NE||n.e>=e.PE,!0)};var Xg=QU();const wG={bigNumber(n){return n?new Xg(n):new Xg(0)},multiply(n,e){if(n===void 0||e===void 0)return new Xg(0);const t=new Xg(n),r=new Xg(e);return t.times(r)},formatNumberToLocalString(n,e=2){return n===void 0?"0.00":typeof n=="number"?n.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(n).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(n){return n===void 0?0:parseFloat(n.replace(/,/gu,""))}},bG=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],EG=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],vG=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],AG={getERC20Abi:n=>ce.USDT_CONTRACT_ADDRESSES.includes(n)?vG:bG,getSwapAbi:()=>EG},qr={validateCaipAddress(n){var e;if(((e=n.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return n},parseCaipAddress(n){const e=n.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${n}`);const[t,r,s]=e;if(!t||!r||!s)throw new Error(`Invalid CAIP-10 address: ${n}`);return{chainNamespace:t,chainId:r,address:s}},parseCaipNetworkId(n){const e=n.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${n}`);const[t,r]=e;if(!t||!r)throw new Error(`Invalid CAIP-2 network id: ${n}`);return{chainNamespace:t,chainId:r}}},st={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function RC(n){if(!n)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${n}:connected_connector_id`}const et={setItem(n,e){Cm()&&e!==void 0&&localStorage.setItem(n,e)},getItem(n){if(Cm())return localStorage.getItem(n)||void 0},removeItem(n){Cm()&&localStorage.removeItem(n)},clear(){Cm()&&localStorage.clear()}};function Cm(){return typeof window<"u"&&typeof localStorage<"u"}function Mo(n,e){return e==="light"?{"--w3m-accent":(n==null?void 0:n["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(n==null?void 0:n["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var BR={};const DC=(typeof process<"u"&&typeof BR<"u"?BR.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",ZU=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],CG="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ft={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:DC,SECURE_SITE_DASHBOARD:`${DC}/dashboard`,SECURE_SITE_FAVICON:`${DC}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[ce.CHAIN.EVM,ce.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[ce.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[ce.CHAIN.EVM,ce.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[ce.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[ce.CHAIN.EVM,ce.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ve={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(n,e){return Date.now()-n>e},getActiveNetworkProps(){const n=ve.getActiveNamespace(),e=ve.getActiveCaipNetworkId(),t=e?e.split(":")[1]:void 0,r=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:n,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:n,href:e}){try{et.setItem(st.DEEPLINK_CHOICE,JSON.stringify({href:e,name:n}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const n=et.getItem(st.DEEPLINK_CHOICE);if(n)return JSON.parse(n)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{et.removeItem(st.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(n){try{et.setItem(st.ACTIVE_NAMESPACE,n)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(n){try{et.setItem(st.ACTIVE_CAIP_NETWORK_ID,n),ve.setActiveNamespace(n.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return et.getItem(st.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{et.removeItem(st.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(n){try{const e=RC(n);et.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(n){try{const e=ve.getRecentWallets();e.find(r=>r.id===n.id)||(e.unshift(n),e.length>2&&e.pop(),et.setItem(st.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const n=et.getItem(st.RECENT_WALLETS);return n?JSON.parse(n):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(n,e){try{const t=RC(n);et.setItem(t,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return et.getItem(st.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(n){if(n)try{const e=RC(n);return et.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",n)}},setConnectedSocialProvider(n){try{et.setItem(st.CONNECTED_SOCIAL,n)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return et.getItem(st.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{et.removeItem(st.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return et.getItem(st.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var t;const n=et.getItem(st.ACTIVE_CAIP_NETWORK_ID);return(t=n==null?void 0:n.split(":"))==null?void 0:t[1]},setConnectionStatus(n){try{et.setItem(st.CONNECTION_STATUS,n)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return et.getItem(st.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const n=et.getItem(st.CONNECTED_NAMESPACES);return n!=null&&n.length?n.split(","):[]}catch{return[]}},setConnectedNamespaces(n){try{const e=Array.from(new Set(n));et.setItem(st.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(n){try{const e=ve.getConnectedNamespaces();e.includes(n)||(e.push(n),ve.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(n){try{const e=ve.getConnectedNamespaces(),t=e.indexOf(n);t>-1&&(e.splice(t,1),ve.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return et.getItem(st.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(n){try{et.setItem(st.TELEGRAM_SOCIAL_PROVIDER,n)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{et.removeItem(st.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let n={};try{const e=et.getItem(st.PORTFOLIO_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromBalanceCache(n){try{const e=ve.getBalanceCache();et.setItem(st.PORTFOLIO_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getBalanceCacheForCaipAddress(n){try{const t=ve.getBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;ve.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateBalanceCache(n){try{const e=ve.getBalanceCache();e[n.caipAddress]=n,et.setItem(st.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getNativeBalanceCache(){let n={};try{const e=et.getItem(st.NATIVE_BALANCE_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromNativeBalanceCache(n){try{const e=ve.getBalanceCache();et.setItem(st.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getNativeBalanceCacheForCaipAddress(n){try{const t=ve.getNativeBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",n),ve.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateNativeBalanceCache(n){try{const e=ve.getNativeBalanceCache();e[n.caipAddress]=n,et.setItem(st.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getEnsCache(){let n={};try{const e=et.getItem(st.ENS_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return n},getEnsFromCacheForAddress(n){try{const t=ve.getEnsCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;ve.removeEnsFromCache(n)}catch{console.info("Unable to get ens name from cache",n)}},updateEnsCache(n){try{const e=ve.getEnsCache();e[n.address]=n,et.setItem(st.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",n)}},removeEnsFromCache(n){try{const e=ve.getEnsCache();et.setItem(st.ENS_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove ens name from cache",n)}},getIdentityCache(){let n={};try{const e=et.getItem(st.IDENTITY_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return n},getIdentityFromCacheForAddress(n){try{const t=ve.getIdentityCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;ve.removeIdentityFromCache(n)}catch{console.info("Unable to get identity from cache",n)}},updateIdentityCache(n){try{const e=ve.getIdentityCache();e[n.address]={identity:n.identity,timestamp:n.timestamp},et.setItem(st.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",n)}},removeIdentityFromCache(n){try{const e=ve.getIdentityCache();et.setItem(st.IDENTITY_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove identity from cache",n)}},clearAddressCache(){try{et.removeItem(st.PORTFOLIO_CACHE),et.removeItem(st.NATIVE_BALANCE_CACHE),et.removeItem(st.ENS_CACHE),et.removeItem(st.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(n){try{et.setItem(st.PREFERRED_ACCOUNT_TYPES,JSON.stringify(n))}catch{console.info("Unable to set preferred account types",n)}},getPreferredAccountTypes(){try{const n=et.getItem(st.PREFERRED_ACCOUNT_TYPES);return n?JSON.parse(n):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(n,e){try{const t=ve.getConnections(),r=t[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of n){const l=s.get(o.connectorId),h=o.connectorId===ce.CONNECTOR_ID.AUTH;if(l&&!h){const d=new Set(l.accounts.map(g=>g.address.toLowerCase())),p=o.accounts.filter(g=>!d.has(g.address.toLowerCase()));l.accounts.push(...p)}else s.set(o.connectorId,{...o})}const i={...t,[e]:Array.from(s.values())};et.setItem(st.CONNECTIONS,JSON.stringify(i))}catch(t){console.error("Unable to sync connections to storage",t)}},getConnections(){try{const n=et.getItem(st.CONNECTIONS);return n?JSON.parse(n):{}}catch(n){return console.error("Unable to get connections from storage",n),{}}},deleteAddressFromConnection({connectorId:n,address:e,namespace:t}){try{const r=ve.getConnections(),s=r[t]??[],i=new Map(s.map(l=>[l.connectorId,l])),o=i.get(n);o&&(o.accounts.filter(h=>h.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(n):i.set(n,{...o,accounts:o.accounts.filter(h=>h.address.toLowerCase()!==e.toLowerCase())})),et.setItem(st.CONNECTIONS,JSON.stringify({...r,[t]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${n}" in namespace "${t}"`)}},getDisconnectedConnectorIds(){try{const n=et.getItem(st.DISCONNECTED_CONNECTOR_IDS);return n?JSON.parse(n):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(n,e){try{const t=ve.getDisconnectedConnectorIds(),r=t[e]??[];r.push(n),et.setItem(st.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${n}" for namespace "${e}"`)}},removeDisconnectedConnectorId(n,e){try{const t=ve.getDisconnectedConnectorIds();let r=t[e]??[];r=r.filter(s=>s.toLowerCase()!==n.toLowerCase()),et.setItem(st.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${n}" for namespace "${e}"`)}},isConnectorDisconnected(n,e){try{return(ve.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===n.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${n}" for namespace "${e}"`)}return!1}},Le={isMobile(){var n;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((n=window.matchMedia("(pointer:coarse)"))!=null&&n.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(n,e=""){return n==null?void 0:n.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return Le.isMobile()&&n.includes("android")},isIos(){if(!this.isMobile())return!1;const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return n.includes("iphone")||n.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(n){return n?n-Date.now()<=Ft.TEN_SEC_MS:!0},isAllowedRetry(n,e=Ft.ONE_SEC_MS){return Date.now()-n>=e},copyToClopboard(n){navigator.clipboard.writeText(n)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var n,e;if(Le.isClient()&&window.self!==window.top)try{const t=(e=(n=window==null?void 0:window.location)==null?void 0:n.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(t){const s=new URL(t),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ft.FOUR_MINUTES_MS},getNetworkId(n){return n==null?void 0:n.split(":")[1]},getPlainAddress(n){return n==null?void 0:n.split(":")[2]},async wait(n){return new Promise(e=>{setTimeout(e,n)})},debounce(n,e=500){let t;return(...r)=>{function s(){n(...r)}t&&clearTimeout(t),t=setTimeout(s,e)}},isHttpUrl(n){return n.startsWith("http://")||n.startsWith("https://")},formatNativeUrl(n,e,t=null){if(Le.isHttpUrl(n))return this.formatUniversalUrl(n,e);let r=n,s=t;r.includes("://")||(r=n.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(n,e){if(!Le.isHttpUrl(n))return this.formatNativeUrl(n,e);let t=n;t.endsWith("/")||(t=`${t}/`);const r=encodeURIComponent(e);return{redirect:`${t}wc?uri=${r}`,href:t}},getOpenTargetForPlatform(n){return n==="popupWindow"?n:this.isTelegram()?ve.getTelegramSocialProvider()?"_top":"_blank":n},openHref(n,e,t){window==null||window.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},returnOpenHref(n,e,t){return window==null?void 0:window.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var t,r;if(typeof window>"u")return!1;const n=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(t=window.matchMedia("(display-mode: standalone)"))==null?void 0:t.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(n||e)},async preloadImage(n){const e=new Promise((t,r)=>{const s=new Image;s.onload=t,s.onerror=r,s.crossOrigin="anonymous",s.src=n});return Promise.race([e,Le.wait(2e3)])},formatBalance(n,e){let t="0.000";if(typeof n=="string"){const r=Number(n);if(r){const s=Math.floor(r*1e3)/1e3;s&&(t=s.toString())}}return`${t}${e?` ${e}`:""}`},formatBalance2(n,e){var r;let t;if(n==="0")t="0";else if(typeof n=="string"){const s=Number(n);s&&(t=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:t??"0",rest:t==="0"?"000":"",symbol:e}},getApiUrl(){return ce.W3M_API_URL},getBlockchainApiUrl(){return ce.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ce.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})},parseError(n){var e,t;return typeof n=="string"?n:typeof((t=(e=n==null?void 0:n.issues)==null?void 0:e[0])==null?void 0:t.message)=="string"?n.issues[0].message:n instanceof Error?n.message:"Unknown error"},sortRequestedNetworks(n,e=[]){const t={};return e&&n&&(n.forEach((r,s)=>{t[r]=s}),e.sort((r,s)=>{const i=t[r.id],o=t[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(n){let e=0;for(const t of n)e+=t.value??0;return e},formatTokenBalance(n){const e=n.toFixed(2),[t,r]=e.split(".");return{dollars:t,pennies:r}},isAddress(n,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)||/^(?:0x)?[0-9A-F]{40}$/iu.test(n))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(n);default:return!1}},uniqueBy(n,e){const t=new Set;return n.filter(r=>{const s=r[e];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(n,e,t){const s=n.length===0?Ft.ADAPTER_TYPES.UNIVERSAL:n.map(i=>i.adapterType).join(",");return`${e}-${s}-${t}`},createAccount(n,e,t,r,s){return{namespace:n,address:e,type:t,publicKey:r,path:s}},isCaipAddress(n){if(typeof n!="string")return!1;const e=n.split(":"),t=e[0];return e.filter(Boolean).length===3&&t in ce.CHAIN_NAME_MAP},getAccount(n){return n?typeof n=="string"?{address:n,chainId:void 0}:{address:n.address,chainId:n.chainId}:{address:void 0,chainId:void 0}},isMac(){const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return n.includes("macintosh")&&!n.includes("safari")},formatTelegramSocialLoginUrl(n){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,t="state=";if(new URL(n).host==="auth.magic.link"){const s="provider_authorization_url=",i=n.substring(n.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),t,e);return n.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(n,t,e)},injectIntoUrl(n,e,t){const r=n.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${n}`);const s=n.indexOf("&",r),i=e.length,o=s!==-1?s:n.length,l=n.substring(0,r+i),h=n.substring(r+i,o),d=n.substring(s),p=h+t;return l+p+d}};async function Jg(...n){const e=await fetch(...n);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class wy{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...s}){const i=this.createUrl(s);return(await Jg(i,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){const s=this.createUrl(r);return(await Jg(s,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await Jg(i,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await Jg(i,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await Jg(i,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const _G={getFeatureValue(n,e){const t=e==null?void 0:e[n];return t===void 0?Ft.DEFAULT_FEATURES[n]:t},filterSocialsByPlatform(n){if(!n||!n.length)return n;if(Le.isTelegram()){if(Le.isIos())return n.filter(e=>e!=="google");if(Le.isMac())return n.filter(e=>e!=="x");if(Le.isAndroid())return n.filter(e=>!["facebook","x"].includes(e))}return n}},qe=un({features:Ft.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ft.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),we={state:qe,subscribeKey(n,e){return Ur(qe,n,e)},setOptions(n){Object.assign(qe,n)},setRemoteFeatures(n){var t,r;if(!n)return;const e={...qe.remoteFeatures,...n};qe.remoteFeatures=e,(t=qe.remoteFeatures)!=null&&t.socials&&(qe.remoteFeatures.socials=_G.filterSocialsByPlatform(qe.remoteFeatures.socials)),(r=qe.features)!=null&&r.pay&&(qe.remoteFeatures.email=!1,qe.remoteFeatures.socials=!1)},setFeatures(n){var t;if(!n)return;qe.features||(qe.features=Ft.DEFAULT_FEATURES);const e={...qe.features,...n};qe.features=e,(t=qe.features)!=null&&t.pay&&qe.remoteFeatures&&(qe.remoteFeatures.email=!1,qe.remoteFeatures.socials=!1)},setProjectId(n){qe.projectId=n},setCustomRpcUrls(n){qe.customRpcUrls=n},setAllWallets(n){qe.allWallets=n},setIncludeWalletIds(n){qe.includeWalletIds=n},setExcludeWalletIds(n){qe.excludeWalletIds=n},setFeaturedWalletIds(n){qe.featuredWalletIds=n},setTokens(n){qe.tokens=n},setTermsConditionsUrl(n){qe.termsConditionsUrl=n},setPrivacyPolicyUrl(n){qe.privacyPolicyUrl=n},setCustomWallets(n){qe.customWallets=n},setIsSiweEnabled(n){qe.isSiweEnabled=n},setIsUniversalProvider(n){qe.isUniversalProvider=n},setSdkVersion(n){qe.sdkVersion=n},setMetadata(n){qe.metadata=n},setDisableAppend(n){qe.disableAppend=n},setEIP6963Enabled(n){qe.enableEIP6963=n},setDebug(n){qe.debug=n},setEnableWalletConnect(n){qe.enableWalletConnect=n},setEnableWalletGuide(n){qe.enableWalletGuide=n},setEnableAuthLogger(n){qe.enableAuthLogger=n},setEnableWallets(n){qe.enableWallets=n},setPreferUniversalLinks(n){qe.experimental_preferUniversalLinks=n},setSIWX(n){if(n)for(const[e,t]of Object.entries(Ft.SIWX_DEFAULTS))n[e]??(n[e]=t);qe.siwx=n},setConnectMethodsOrder(n){qe.features={...qe.features,connectMethodsOrder:n}},setWalletFeaturesOrder(n){qe.features={...qe.features,walletFeaturesOrder:n}},setSocialsOrder(n){qe.remoteFeatures={...qe.remoteFeatures,socials:n}},setCollapseWallets(n){qe.features={...qe.features,collapseWallets:n}},setEnableEmbedded(n){qe.enableEmbedded=n},setAllowUnsupportedChain(n){qe.allowUnsupportedChain=n},setManualWCControl(n){qe.manualWCControl=n},setEnableNetworkSwitch(n){qe.enableNetworkSwitch=n},setEnableReconnect(n){qe.enableReconnect=n},setDefaultAccountTypes(n={}){Object.entries(n).forEach(([e,t])=>{t&&(qe.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(n){qe.universalProviderConfigOverride=n},getUniversalProviderConfigOverride(){return qe.universalProviderConfigOverride},getSnapshot(){return ph(qe)}},SG=Object.freeze({enabled:!0,events:[]}),xG=new wy({baseUrl:Le.getAnalyticsUrl(),clientId:null}),NG=5,TG=60*1e3,Ic=un({...SG}),IG={state:Ic,subscribeKey(n,e){return Ur(Ic,n,e)},async sendError(n,e){if(!Ic.enabled)return;const t=Date.now();if(Ic.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return t-o<TG}).length>=NG)return;const s={type:"error",event:e,properties:{errorType:n.name,errorMessage:n.message,stackTrace:n.stack,timestamp:new Date().toISOString()}};Ic.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:l}=we.state;await xG.post({path:"/e",params:{projectId:i,st:o,sv:l||"html-wagmi-4.2.2"},body:{eventId:Le.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:n.name,errorMessage:n.message,stackTrace:n.stack}}})}catch{}},enable(){Ic.enabled=!0},disable(){Ic.enabled=!1},clearEvents(){Ic.events=[]}};class bp extends Error{constructor(e,t,r){super(e),this.name="AppKitError",this.category=t,this.originalError=r,Object.setPrototypeOf(this,bp.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const l=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${l}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,bp):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function LR(n,e){const t=n instanceof bp?n:new bp(n instanceof Error?n.message:String(n),e,n);throw IG.sendError(t,t.category),t}function Ys(n,e="INTERNAL_SDK_ERROR"){const t={};return Object.keys(n).forEach(r=>{const s=n[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(l){return LR(l,e)}}:i=(...o)=>{try{return s(...o)}catch(l){return LR(l,e)}},t[r]=i}else t[r]=s}),t}var Ep={};const OG="https://secure.walletconnect.org/sdk",RG=(typeof process<"u"&&typeof Ep<"u"?Ep.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||OG,DG=(typeof process<"u"&&typeof Ep<"u"?Ep.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",PG=(typeof process<"u"&&typeof Ep<"u"?Ep.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",He={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Gn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ra={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},UG={handleMobileDeeplinkRedirect(n,e){const t=window.location.href,r=encodeURIComponent(t);if(n===Ra.PHANTOM.id&&!("phantom"in window)){const s=t.startsWith("https")?"https":"http",i=t.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ra.PHANTOM.url}/ul/browse/${r}?ref=${o}`}n===Ra.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ra.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ce.CHAIN.SOLANA&&n===Ra.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ra.COINBASE.url}/dapp?cb_url=${r}`)}},Ps=un({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kG={state:Ps,subscribeNetworkImages(n){return ar(Ps.networkImages,()=>n(Ps.networkImages))},subscribeKey(n,e){return Ur(Ps,n,e)},subscribe(n){return ar(Ps,()=>n(Ps))},setWalletImage(n,e){Ps.walletImages[n]=e},setNetworkImage(n,e){Ps.networkImages[n]=e},setChainImage(n,e){Ps.chainImages[n]=e},setConnectorImage(n,e){Ps.connectorImages={...Ps.connectorImages,[n]:e}},setTokenImage(n,e){Ps.tokenImages[n]=e},setCurrencyImage(n,e){Ps.currencyImages[n]=e}},Vi=Ys(kG),BG={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},PC=un({networkImagePromises:{}}),XU={async fetchWalletImage(n){if(n)return await Ve._fetchWalletImage(n),this.getWalletImageById(n)},async fetchNetworkImage(n){if(!n)return;const e=this.getNetworkImageById(n);return e||(PC.networkImagePromises[n]||(PC.networkImagePromises[n]=Ve._fetchNetworkImage(n)),await PC.networkImagePromises[n],this.getNetworkImageById(n))},getWalletImageById(n){if(n)return Vi.state.walletImages[n]},getWalletImage(n){if(n!=null&&n.image_url)return n==null?void 0:n.image_url;if(n!=null&&n.image_id)return Vi.state.walletImages[n.image_id]},getNetworkImage(n){var e,t,r;if((e=n==null?void 0:n.assets)!=null&&e.imageUrl)return(t=n==null?void 0:n.assets)==null?void 0:t.imageUrl;if((r=n==null?void 0:n.assets)!=null&&r.imageId)return Vi.state.networkImages[n.assets.imageId]},getNetworkImageById(n){if(n)return Vi.state.networkImages[n]},getConnectorImage(n){var e;if(n!=null&&n.imageUrl)return n.imageUrl;if((e=n==null?void 0:n.info)!=null&&e.icon)return n.info.icon;if(n!=null&&n.imageId)return Vi.state.connectorImages[n.imageId]},getChainImage(n){return Vi.state.networkImages[BG[n]]}},Oc=un({message:"",variant:"info",open:!1}),LG={state:Oc,subscribeKey(n,e){return Ur(Oc,n,e)},open(n,e){const{debug:t}=we.state,{shortMessage:r,longMessage:s}=n;t&&(Oc.message=r,Oc.variant=e,Oc.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Oc.open=!1,Oc.message="",Oc.variant="info"}},zn=Ys(LG),MG=Le.getAnalyticsUrl(),$G=new wy({baseUrl:MG,clientId:null}),FG=["MODAL_CREATED"],lo=un({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Kt={state:lo,subscribe(n){return ar(lo,()=>n(lo))},getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=we.state;return{projectId:n,st:e,sv:t||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(n){try{const e=Fe.state.address;if(FG.includes(n.data.event)||typeof window>"u")return;await $G.post({path:"/e",params:Kt.getSdkProperties(),body:{eventId:Le.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:n.timestamp,props:{...n.data,address:e}}}),lo.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ce.HTTP_STATUS_CODES.FORBIDDEN&&!lo.reportedErrors.FORBIDDEN&&(zn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Cm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),lo.reportedErrors.FORBIDDEN=!0)}},sendEvent(n){var e;lo.timestamp=Date.now(),lo.data=n,((e=we.state.features)!=null&&e.analytics||n.event==="INITIALIZE")&&Kt._sendAnalyticsEvent(lo)}},zG=Le.getApiUrl(),ss=new wy({baseUrl:zG,clientId:null}),HG=40,MR=4,jG=20,at=un({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ve={state:at,subscribeKey(n,e){return Ur(at,n,e)},_getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=we.state;return{projectId:n,st:e||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(n){return we.state.isUniversalProvider?n.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):n},async _fetchWalletImage(n){const e=`${ss.baseUrl}/getWalletImage/${n}`,t=await ss.getBlob({path:e,params:Ve._getSdkProperties()});Vi.setWalletImage(n,URL.createObjectURL(t))},async _fetchNetworkImage(n){const e=`${ss.baseUrl}/public/getAssetImage/${n}`,t=await ss.getBlob({path:e,params:Ve._getSdkProperties()});Vi.setNetworkImage(n,URL.createObjectURL(t))},async _fetchConnectorImage(n){const e=`${ss.baseUrl}/public/getAssetImage/${n}`,t=await ss.getBlob({path:e,params:Ve._getSdkProperties()});Vi.setConnectorImage(n,URL.createObjectURL(t))},async _fetchCurrencyImage(n){const e=`${ss.baseUrl}/public/getCurrencyImage/${n}`,t=await ss.getBlob({path:e,params:Ve._getSdkProperties()});Vi.setCurrencyImage(n,URL.createObjectURL(t))},async _fetchTokenImage(n){const e=`${ss.baseUrl}/public/getTokenImage/${n}`,t=await ss.getBlob({path:e,params:Ve._getSdkProperties()});Vi.setTokenImage(n,URL.createObjectURL(t))},_filterWalletsByPlatform(n){return Le.isMobile()?n==null?void 0:n.filter(t=>t.mobile_link||t.id===Ra.COINBASE.id?!0:M.state.activeChain==="solana"&&(t.id===Ra.SOLFLARE.id||t.id===Ra.PHANTOM.id)):n},async fetchProjectConfig(){return(await ss.get({path:"/appkit/v1/config",params:Ve._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:n}=await ss.get({path:"/projects/v1/origins",params:Ve._getSdkProperties()});return n}catch(n){if(n instanceof Error&&n.cause instanceof Response){const e=n.cause.status;if(e===ce.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:n});if(e>=ce.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:n});return[]}return[]}},async fetchNetworkImages(){const n=M.getAllRequestedCaipNetworks(),e=n==null?void 0:n.map(({assets:t})=>t==null?void 0:t.imageId).filter(Boolean).filter(t=>!XU.getNetworkImageById(t));e&&await Promise.allSettled(e.map(t=>Ve._fetchNetworkImage(t)))},async fetchConnectorImages(){const{connectors:n}=_e.state,e=n.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(e.map(t=>Ve._fetchConnectorImage(t)))},async fetchCurrencyImages(n=[]){await Promise.allSettled(n.map(e=>Ve._fetchCurrencyImage(e)))},async fetchTokenImages(n=[]){await Promise.allSettled(n.map(e=>Ve._fetchTokenImage(e)))},async fetchWallets(n){var i;const e=n.exclude??[];Ve._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ra).map(o=>o.id));const r=await ss.get({path:"/getWallets",params:{...Ve._getSdkProperties(),...n,page:String(n.page),entries:String(n.entries),include:(i=n.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ve._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:n}=we.state;if(n!=null&&n.length){const e={...Ve._getSdkProperties(),page:1,entries:(n==null?void 0:n.length)??MR,include:n},{data:t}=await Ve.fetchWallets(e),r=[...t].sort((i,o)=>n.indexOf(i.id)-n.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ve._fetchWalletImage(i))),at.featured=r,at.allFeatured=r}},async fetchRecommendedWallets(){try{at.isFetchingRecommendedWallets=!0;const{includeWalletIds:n,excludeWalletIds:e,featuredWalletIds:t}=we.state,r=[...e??[],...t??[]].filter(Boolean),s=M.getRequestedCaipNetworkIds().join(","),i={page:1,entries:MR,include:n,exclude:r,chains:s},{data:o,count:l}=await Ve.fetchWallets(i),h=ve.getRecentWallets(),d=o.map(g=>g.image_id).filter(Boolean),p=h.map(g=>g.image_id).filter(Boolean);await Promise.allSettled([...d,...p].map(g=>Ve._fetchWalletImage(g))),at.recommended=o,at.allRecommended=o,at.count=l??0}catch{}finally{at.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:n}){const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=we.state,s=M.getRequestedCaipNetworkIds().join(","),i=[...at.recommended.map(({id:p})=>p),...t??[],...r??[]].filter(Boolean),o={page:n,entries:HG,include:e,exclude:i,chains:s},{data:l,count:h}=await Ve.fetchWallets(o),d=l.slice(0,jG).map(p=>p.image_id).filter(Boolean);await Promise.allSettled(d.map(p=>Ve._fetchWalletImage(p))),at.wallets=Le.uniqueBy([...at.wallets,...Ve._filterOutExtensions(l)],"id").filter(p=>{var g;return(g=p.chains)==null?void 0:g.some(y=>s.includes(y))}),at.count=h>at.count?h:at.count,at.page=n},async initializeExcludedWallets({ids:n}){const e={page:1,entries:n.length,include:n},{data:t}=await Ve.fetchWallets(e);t&&t.forEach(r=>{at.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:n,badge:e}){const{includeWalletIds:t,excludeWalletIds:r}=we.state,s=M.getRequestedCaipNetworkIds().join(",");at.search=[];const i={page:1,entries:100,search:n==null?void 0:n.trim(),badge_type:e,include:t,exclude:r,chains:s},{data:o}=await Ve.fetchWallets(i);Kt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:n??""}});const l=o.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...l.map(h=>Ve._fetchWalletImage(h)),Le.wait(300)]),at.search=Ve._filterOutExtensions(o)},initPromise(n,e){const t=at.promises[n];return t||(at.promises[n]=e())},prefetch({fetchConnectorImages:n=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:r=!0}={}){const s=[n&&Ve.initPromise("connectorImages",Ve.fetchConnectorImages),e&&Ve.initPromise("featuredWallets",Ve.fetchFeaturedWallets),t&&Ve.initPromise("recommendedWallets",Ve.fetchRecommendedWallets),r&&Ve.initPromise("networkImages",Ve.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var n;(n=we.state.features)!=null&&n.analytics&&Ve.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:n}=await ss.get({path:"/getAnalyticsConfig",params:Ve._getSdkProperties()});we.setFeatures({analytics:n})}catch{we.setFeatures({analytics:!1})}},filterByNamespaces(n){if(!(n!=null&&n.length)){at.featured=at.allFeatured,at.recommended=at.allRecommended;return}const e=M.getRequestedCaipNetworkIds().join(",");at.featured=at.allFeatured.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.recommended=at.allRecommended.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.filteredWallets=at.wallets.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){at.filteredWallets=[]},setFilterByNamespace(n){if(!n){at.featured=at.allFeatured,at.recommended=at.allRecommended;return}const e=M.getRequestedCaipNetworkIds().join(",");at.featured=at.allFeatured.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.recommended=at.allRecommended.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),at.filteredWallets=at.wallets.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))})}},en=un({view:"Connect",history:["Connect"],transactionStack:[]}),qG={state:en,subscribeKey(n,e){return Ur(en,n,e)},pushTransactionStack(n){en.transactionStack.push(n)},popTransactionStack(n){const e=en.transactionStack.pop();if(!e)return;const{onSuccess:t,onError:r,onCancel:s}=e;switch(n){case"success":t==null||t();break;case"error":r==null||r(),tt.goBack();break;case"cancel":s==null||s(),tt.goBack();break}},push(n,e){n!==en.view&&(en.view=n,en.history.push(n),en.data=e)},reset(n,e){en.view=n,en.history=[n],en.data=e},replace(n,e){en.history.at(-1)===n||(en.view=n,en.history[en.history.length-1]=n,en.data=e)},goBack(){var r;const n=M.state.activeCaipAddress,e=tt.state.view==="ConnectingFarcaster",t=!n&&e;if(en.history.length>1){en.history.pop();const[s]=en.history.slice(-1);s&&(n&&s==="Connect"?en.view="Account":en.view=s)}else Ut.close();(r=en.data)!=null&&r.wallet&&(en.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(t){Fe.setFarcasterUrl(void 0,M.state.activeChain);const l=_e.getAuthConnector();(s=l==null?void 0:l.provider)==null||s.reload();const h=ph(we.state);(o=(i=l==null?void 0:l.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:h.metadata,sdkVersion:h.sdkVersion,projectId:h.projectId,sdkType:h.sdkType})}},100)},goBackToIndex(n){if(en.history.length>1){en.history=en.history.slice(0,n+1);const[e]=en.history.slice(-1);e&&(en.view=e)}},goBackOrCloseModal(){tt.state.history.length>1?tt.goBack():Ut.close()}},tt=Ys(qG),uo=un({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),R2={state:uo,subscribe(n){return ar(uo,()=>n(uo))},setThemeMode(n){uo.themeMode=n;try{const e=_e.getAuthConnector();if(e){const t=R2.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:n,themeVariables:t,w3mThemeVariables:Mo(t,n)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(n){uo.themeVariables={...uo.themeVariables,...n};try{const e=_e.getAuthConnector();if(e){const t=R2.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:Mo(uo.themeVariables,uo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ph(uo)}},gs=Ys(R2),JU={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},It=un({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...JU},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),GG={state:It,subscribe(n){return ar(It,()=>{n(It)})},subscribeKey(n,e){return Ur(It,n,e)},initialize(n){n.forEach(e=>{const t=ve.getConnectedConnectorId(e);t&&_e.setConnectorId(t,e)})},setActiveConnector(n){n&&(It.activeConnector=gh(n))},setConnectors(n){n.filter(s=>!It.allConnectors.some(i=>i.id===s.id&&_e.getConnectorName(i.name)===_e.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&It.allConnectors.push(gh(s))});const t=_e.getEnabledNamespaces(),r=_e.getEnabledConnectors(t);It.connectors=_e.mergeMultiChainConnectors(r)},filterByNamespaces(n){Object.keys(It.filterByNamespaceMap).forEach(e=>{It.filterByNamespaceMap[e]=!1}),n.forEach(e=>{It.filterByNamespaceMap[e]=!0}),_e.updateConnectorsForEnabledNamespaces()},filterByNamespace(n,e){It.filterByNamespaceMap[n]=e,_e.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const n=_e.getEnabledNamespaces(),e=_e.getEnabledConnectors(n),t=_e.areAllNamespacesEnabled();It.connectors=_e.mergeMultiChainConnectors(e),t?Ve.clearFilterByNamespaces():Ve.filterByNamespaces(n)},getEnabledNamespaces(){return Object.entries(It.filterByNamespaceMap).filter(([n,e])=>e).map(([n])=>n)},getEnabledConnectors(n){return It.allConnectors.filter(e=>n.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(It.filterByNamespaceMap).every(n=>n)},mergeMultiChainConnectors(n){const e=_e.generateConnectorMapByName(n),t=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ce.CONNECTOR_ID.AUTH;r.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&t.push(s)}),t},generateConnectorMapByName(n){const e=new Map;return n.forEach(t=>{const{name:r}=t,s=_e.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(l=>l.chain===t.chain)||i.push(t),e.set(s,i)}),e},getConnectorName(n){return n&&({"Trust Wallet":"Trust"}[n]||n)},getUniqueConnectorsByName(n){const e=[];return n.forEach(t=>{e.find(r=>r.chain===t.chain)||e.push(t)}),e},addConnector(n){var e,t,r;if(n.id===ce.CONNECTOR_ID.AUTH){const s=n,i=ph(we.state),o=gs.getSnapshot().themeMode,l=gs.getSnapshot().themeVariables;(t=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||t.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:l,w3mThemeVariables:Mo(l,o)}),_e.setConnectors([n])}else _e.setConnectors([n])},getAuthConnector(n){var r;const e=n||M.state.activeChain,t=It.connectors.find(s=>s.id===ce.CONNECTOR_ID.AUTH);if(t)return(r=t==null?void 0:t.connectors)!=null&&r.length?t.connectors.find(i=>i.chain===e):t},getAnnouncedConnectorRdns(){return It.connectors.filter(n=>n.type==="ANNOUNCED").map(n=>{var e;return(e=n.info)==null?void 0:e.rdns})},getConnectorById(n){return It.allConnectors.find(e=>e.id===n)},getConnector(n,e){return It.allConnectors.filter(r=>r.chain===M.state.activeChain).find(r=>{var s;return r.explorerId===n||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(n){var i,o;if(n.id!=="ID_AUTH")return;const e=n,t=ph(we.state),r=gs.getSnapshot().themeMode,s=gs.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Mo(s,r)})},getConnectorsByNamespace(n){const e=It.allConnectors.filter(t=>t.chain===n);return _e.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(n){return M.checkIfSmartAccountEnabled()&&Vs(n)===Gn.ACCOUNT_TYPES.EOA},selectWalletConnector(n){const e=_e.getConnector(n.id,n.rdns);UG.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||n.id,M.state.activeChain),e?tt.push("ConnectingExternal",{connector:e}):tt.push("ConnectingWalletConnect",{wallet:n})},getConnectors(n){return n?_e.getConnectorsByNamespace(n):_e.mergeMultiChainConnectors(It.allConnectors)},setFilterByNamespace(n){It.filterByNamespace=n,It.connectors=_e.getConnectors(n),Ve.setFilterByNamespace(n)},setConnectorId(n,e){n&&(It.activeConnectorIds={...It.activeConnectorIds,[e]:n},ve.setConnectedConnectorId(e,n))},removeConnectorId(n){It.activeConnectorIds={...It.activeConnectorIds,[n]:void 0},ve.deleteConnectedConnectorId(n)},getConnectorId(n){if(n)return It.activeConnectorIds[n]},isConnected(n){return n?!!It.activeConnectorIds[n]:Object.values(It.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){It.activeConnectorIds={...JU}}},_e=Ys(GG),VG=1e3,em={checkNamespaceConnectorId(n,e){return _e.getConnectorId(n)===e},isSocialProvider(n){return Ft.DEFAULT_REMOTE_FEATURES.socials.includes(n)},connectWalletConnect({walletConnect:n,connector:e,closeModalOnConnect:t=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,l)=>{if(n&&_e.setActiveConnector(e),s==null||s(Le.isMobile()&&n),r){const d=Ut.subscribeKey("open",p=>{p||(tt.state.view!==r&&tt.replace(r),d(),l(new Error("Modal closed")))})}const h=M.subscribeKey("activeCaipAddress",d=>{d&&(i==null||i(),t&&Ut.close(),h(),o(qr.parseCaipAddress(d)))})})},connectExternal(n){return new Promise((e,t)=>{const r=M.subscribeKey("activeCaipAddress",s=>{s&&(Ut.close(),r(),e(qr.parseCaipAddress(s)))});Te.connectExternal(n,n.chain).catch(()=>{r(),t(new Error("Connection rejected"))})})},connectSocial({social:n,closeModalOnConnect:e=!0,onOpenFarcaster:t,onConnect:r}){let s=Fe.state.socialWindow,i=Fe.state.socialProvider,o=!1,l=null;const h=M.subscribeKey("activeCaipAddress",d=>{d&&(e&&Ut.close(),h())});return new Promise((d,p)=>{async function g(b){var E,v;if((E=b.data)!=null&&E.resultUri)if(b.origin===ce.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",g,!1);try{const A=_e.getAuthConnector();if(A&&!o){s&&(s.close(),Fe.setSocialWindow(void 0,M.state.activeChain),s=Fe.state.socialWindow),o=!0;const S=b.data.resultUri;if(i&&Kt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){ve.setConnectedSocialProvider(i),await Te.connectExternal({id:A.id,type:A.type,socialUri:S},A.chain);const T=M.state.activeCaipAddress;if(!T){p(new Error("Failed to connect"));return}d(qr.parseCaipAddress(T)),Kt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(v=M.getActiveCaipNetwork())==null?void 0:v.caipNetworkId}})}}}catch{i&&Kt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),p(new Error("Failed to connect"))}}else i&&Kt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function y(){if(n&&(Fe.setSocialProvider(n,M.state.activeChain),i=Fe.state.socialProvider,Kt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){t==null||t();const b=Ut.subscribeKey("open",v=>{!v&&n==="farcaster"&&(p(new Error("Popup closed")),r==null||r(),b())}),E=_e.getAuthConnector();if(E&&!Fe.state.farcasterUrl)try{const{url:v}=await E.provider.getFarcasterUri();Fe.setFarcasterUrl(v,M.state.activeChain)}catch{p(new Error("Failed to connect to farcaster"))}}else{const b=_e.getAuthConnector();l=Le.returnOpenHref(`${ce.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(b&&i){const{uri:E}=await b.provider.getSocialRedirectUri({provider:i});if(l&&E){Fe.setSocialWindow(l,M.state.activeChain),s=Fe.state.socialWindow,l.location.href=E;const v=setInterval(()=>{s!=null&&s.closed&&!o&&(p(new Error("Popup closed")),clearInterval(v))},1e3);window.addEventListener("message",g,!1)}else l==null||l.close(),p(new Error("Failed to initiate social connection"))}}catch{p(new Error("Failed to initiate social connection")),l==null||l.close()}}}y()})},connectEmail({closeModalOnConnect:n=!0,redirectViewOnModalClose:e="Connect",onOpen:t,onConnect:r}){return new Promise((s,i)=>{if(t==null||t(),e){const l=Ut.subscribeKey("open",h=>{h||(tt.state.view!==e&&tt.replace(e),l(),i(new Error("Modal closed")))})}const o=M.subscribeKey("activeCaipAddress",l=>{l&&(r==null||r(),n&&Ut.close(),o(),s(qr.parseCaipAddress(l)))})})},async updateEmail(){const n=ve.getConnectedConnectorId(M.state.activeChain),e=_e.getAuthConnector();if(!e)throw new Error("No auth connector found");if(n!==ce.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const t=e.provider.getEmail()??"";return tt.push("UpdateEmailWallet",{email:t,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const l=e.provider.getEmail()??"";l!==t&&(Ut.close(),clearInterval(i),o(),r({email:l}))},VG),o=Ut.subscribeKey("open",l=>{l||(tt.state.view!=="Connect"&&tt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(n){return M.checkIfSmartAccountEnabled()&&Vs(n)===Gn.ACCOUNT_TYPES.EOA}};function e6(){var r,s;const n=((r=M.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=M.state.activeCaipNetwork)==null?void 0:s.id)||1,t=Ft.NATIVE_TOKEN_ADDRESS[n];return`${n}:${e}:${t}`}function Vs(n){var t;return(t=M.getAccountData(n))==null?void 0:t.preferredAccountType}const vE={getConnectionStatus(n,e){const t=_e.state.activeConnectorIds[e],r=Te.getConnections(e);return!!t&&n.connectorId===t?"connected":r.some(o=>o.connectorId.toLowerCase()===n.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:n,connectorId:e,addresses:t}){return n.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&t){const i=r.accounts.filter(o=>!t.some(h=>h.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(n,e){const t=new Set(n);return e.filter(r=>!t.has(r.connectorId))},getConnectionsByConnectorId(n,e){return n.filter(t=>t.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(n){var l;const e=!!((l=we.state.remoteFeatures)!=null&&l.multiWallet),t=_e.state.activeConnectorIds[n],r=Te.getConnections(n),i=(Te.state.recentConnections.get(n)??[]).filter(h=>_e.getConnectorById(h.connectorId)),o=vE.excludeExistingConnections([...r.map(h=>h.connectorId),...t?[t]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(h=>h.connectorId.toLowerCase()===(t==null?void 0:t.toLowerCase())),recentConnections:[]}}},uu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),$n=un({...uu}),KG={state:$n,subscribeKey(n,e){return Ur($n,n,e)},showLoading(n,e={}){this._showMessage({message:n,variant:"loading",...e})},showSuccess(n){this._showMessage({message:n,variant:"success"})},showSvg(n,e){this._showMessage({message:n,svg:e})},showError(n){const e=Le.parseError(n);this._showMessage({message:e,variant:"error"})},hide(){$n.message=uu.message,$n.variant=uu.variant,$n.svg=uu.svg,$n.open=uu.open,$n.autoClose=uu.autoClose},_showMessage({message:n,svg:e,variant:t="success",autoClose:r=uu.autoClose}){$n.open?($n.open=!1,setTimeout(()=>{$n.message=n,$n.variant=t,$n.svg=e,$n.open=!0,$n.autoClose=r},150)):($n.message=n,$n.variant=t,$n.svg=e,$n.open=!0,$n.autoClose=r)}},La=KG,gn=un({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),WG={state:gn,subscribe(n){return ar(gn,()=>n(gn))},setLastNetworkInView(n){gn.lastNetworkInView=n},async fetchTransactions(n){var e;if(!n)throw new Error("Transactions can't be fetched without an accountAddress");gn.loading=!0;try{const t=await We.fetchTransactions({account:n,cursor:gn.next,chainId:(e=M.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=zb.filterSpamTransactions(t.data),s=zb.filterByConnectedChain(r),i=[...gn.transactions,...s];gn.loading=!1,gn.transactions=i,gn.transactionsByYear=zb.groupTransactionsByYearAndMonth(gn.transactionsByYear,s),gn.empty=i.length===0,gn.next=t.next?t.next:void 0}catch{const r=M.state.activeChain;Kt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:n,projectId:we.state.projectId,cursor:gn.next,isSmartAccount:Vs(r)===Gn.ACCOUNT_TYPES.SMART_ACCOUNT}}),La.showError("Failed to fetch transactions"),gn.loading=!1,gn.empty=!0,gn.next=void 0}},groupTransactionsByYearAndMonth(n={},e=[]){const t=n;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=t[s]??{},h=(o[i]??[]).filter(d=>d.id!==r.id);t[s]={...o,[i]:[...h,r].sort((d,p)=>new Date(p.metadata.minedAt).getTime()-new Date(d.metadata.minedAt).getTime())}}),t},filterSpamTransactions(n){return n.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(n){var r;const e=(r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return n.filter(s=>s.metadata.chain===e)},clearCursor(){gn.next=void 0},resetTransactions(){gn.transactions=[],gn.transactionsByYear={},gn.lastNetworkInView=void 0,gn.loading=!1,gn.empty=!1,gn.next=void 0}},zb=Ys(WG,"API_ERROR"),St=un({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let eu;const YG={state:St,subscribe(n){return ar(St,()=>n(St))},subscribeKey(n,e){return Ur(St,n,e)},_getClient(){return St._client},setClient(n){St._client=gh(n)},initialize(n){const e=n.filter(t=>!!t.namespace).map(t=>t.namespace);Te.syncStorageConnections(e)},syncStorageConnections(n){const e=ve.getConnections(),t=n??Array.from(M.state.chains.keys());for(const r of t){const s=e[r]??[],i=new Map(St.recentConnections);i.set(r,s),St.recentConnections=i}},getConnections(n){return n?St.connections.get(n)??[]:[]},hasAnyConnection(n){const e=Te.state.connections;return Array.from(e.values()).flatMap(t=>t).some(({connectorId:t})=>t===n)},async connectWalletConnect(){var n,e,t,r;if(Le.isTelegram()||Le.isSafari()&&Le.isIos()){if(eu){await eu,eu=void 0;return}if(!Le.isPairingExpired(St==null?void 0:St.wcPairingExpiry)){const s=St.wcUri;St.wcUri=s;return}eu=(e=(n=Te._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:e.call(n).catch(()=>{}),Te.state.status="connecting",await eu,eu=void 0,St.wcPairingExpiry=void 0,Te.state.status="connected"}else await((r=(t=Te._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:r.call(t))},async connectExternal(n,e,t=!0){var s,i;const r=await((i=(s=Te._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,n));return t&&M.setActiveNamespace(e),r},async reconnectExternal(n){var t,r;await((r=(t=Te._getClient())==null?void 0:t.reconnectExternal)==null?void 0:r.call(t,n));const e=n.chain||M.state.activeChain;e&&_e.setConnectorId(n.id,e)},async setPreferredAccountType(n,e){var r;if(!e)return;Ut.setLoading(!0,M.state.activeChain);const t=_e.getAuthConnector();t&&(Fe.setPreferredAccountType(n,e),await t.provider.setPreferredAccount(n),ve.setPreferredAccountTypes(Object.entries(M.state.chains).reduce((s,[i,o])=>{const l=i,h=Vs(l);return h!==void 0&&(s[l]=h),s},{})),await Te.reconnectExternal(t),Ut.setLoading(!1,M.state.activeChain),Kt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:n,network:((r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(n){var e;return(e=Te._getClient())==null?void 0:e.signMessage(n)},parseUnits(n,e){var t;return(t=Te._getClient())==null?void 0:t.parseUnits(n,e)},formatUnits(n,e){var t;return(t=Te._getClient())==null?void 0:t.formatUnits(n,e)},async sendTransaction(n){var e;return(e=Te._getClient())==null?void 0:e.sendTransaction(n)},async getCapabilities(n){var e;return(e=Te._getClient())==null?void 0:e.getCapabilities(n)},async grantPermissions(n){var e;return(e=Te._getClient())==null?void 0:e.grantPermissions(n)},async walletGetAssets(n){var e;return((e=Te._getClient())==null?void 0:e.walletGetAssets(n))??{}},async estimateGas(n){var e;return(e=Te._getClient())==null?void 0:e.estimateGas(n)},async writeContract(n){var e;return(e=Te._getClient())==null?void 0:e.writeContract(n)},async getEnsAddress(n){var e;return(e=Te._getClient())==null?void 0:e.getEnsAddress(n)},async getEnsAvatar(n){var e;return(e=Te._getClient())==null?void 0:e.getEnsAvatar(n)},checkInstalled(n){var e,t;return((t=(e=Te._getClient())==null?void 0:e.checkInstalled)==null?void 0:t.call(e,n))||!1},resetWcConnection(){St.wcUri=void 0,St.wcPairingExpiry=void 0,St.wcLinking=void 0,St.recentWallet=void 0,St.status="disconnected",zb.resetTransactions(),ve.deleteWalletConnectDeepLink()},resetUri(){St.wcUri=void 0,St.wcPairingExpiry=void 0,eu=void 0},finalizeWcConnection(){var t,r,s;const{wcLinking:n,recentWallet:e}=Te.state;n&&ve.setWalletConnectDeepLink(n),e&&ve.setAppKitRecent(e),Kt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:n?"mobile":"qrcode",name:((r=(t=tt.state.data)==null?void 0:t.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=M.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(n){St.wcBasic=n},setUri(n){St.wcUri=n,St.wcPairingExpiry=Le.getPairingExpiry()},setWcLinking(n){St.wcLinking=n},setWcError(n){St.wcError=n,St.buffering=!1},setRecentWallet(n){St.recentWallet=n},setBuffering(n){St.buffering=n},setStatus(n){St.status=n},setIsSwitchingConnection(n){St.isSwitchingConnection=n},async disconnect({id:n,namespace:e,initialDisconnect:t}={}){var r;try{await((r=Te._getClient())==null?void 0:r.disconnect({id:n,chainNamespace:e,initialDisconnect:t}))}catch(s){throw new bp("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(n,e){const t=new Map(St.connections);t.set(e,n),St.connections=t},async handleAuthAccountSwitch({address:n,namespace:e}){var s,i;const t=(i=(s=Fe.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=t&&t.address.toLowerCase()===n.toLowerCase()&&em.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Te.setPreferredAccountType(r,e)},async handleActiveConnection({connection:n,namespace:e,address:t}){const r=_e.getConnectorById(n.connectorId),s=n.connectorId===ce.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${n.connectorId}`);if(s)s&&t&&await Te.handleAuthAccountSwitch({address:t,namespace:e});else{const i=await Te.connectExternal({id:r.id,type:r.type,provider:r.provider,address:t,chain:e},e);return i==null?void 0:i.address}return t},async handleDisconnectedConnection({connection:n,namespace:e,address:t,closeModalOnConnect:r}){var d,p;const s=_e.getConnectorById(n.connectorId),i=(p=(d=n.auth)==null?void 0:d.name)==null?void 0:p.toLowerCase(),o=n.connectorId===ce.CONNECTOR_ID.AUTH,l=n.connectorId===ce.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${n.connectorId}`);let h;if(o)if(i&&em.isSocialProvider(i)){const{address:g}=await em.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Ut.open({view:"ConnectingFarcaster"})},onConnect(){tt.replace("ProfileWallets")}});h=g}else{const{address:g}=await em.connectEmail({closeModalOnConnect:r,onOpen(){Ut.open({view:"EmailLogin"})},onConnect(){tt.replace("ProfileWallets")}});h=g}else if(l){const{address:g}=await em.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(y){Ut.open({view:y?"AllWallets":"ConnectingWalletConnect"})},onConnect(){tt.replace("ProfileWallets")}});h=g}else{const g=await Te.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);g&&(h=g.address)}return o&&t&&await Te.handleAuthAccountSwitch({address:t,namespace:e}),h},async switchConnection({connection:n,address:e,namespace:t,closeModalOnConnect:r,onChange:s}){let i;const o=Fe.getCaipAddress(t);if(o){const{address:h}=qr.parseCaipAddress(o);i=h}const l=vE.getConnectionStatus(n,t);switch(l){case"connected":case"active":{const h=await Te.handleActiveConnection({connection:n,namespace:t,address:e});if(i&&h){const d=h.toLowerCase()!==i.toLowerCase();s==null||s({address:h,namespace:t,hasSwitchedAccount:d,hasSwitchedWallet:l==="active"})}break}case"disconnected":{const h=await Te.handleDisconnectedConnection({connection:n,namespace:t,address:e,closeModalOnConnect:r});h&&(s==null||s({address:h,namespace:t,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${l}`)}}},Te=Ys(YG),xd=un({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Fa={state:xd,subscribe(n){return ar(xd,()=>n(xd))},subscribeOpen(n){return Ur(xd,"open",n)},set(n){Object.assign(xd,{...xd,...n})}},QG={async getTokenList(){var r;const n=M.state.activeCaipNetwork,e=await We.fetchSwapTokens({chainId:n==null?void 0:n.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const n=M.state.activeCaipNetwork;if(!n)return null;try{switch(n.chainNamespace){case"solana":const t=(e=await(Te==null?void 0:Te.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:t,fast:t,instant:t};case"eip155":default:return await We.fetchGasPrice({chainId:n.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:n,userAddress:e,sourceTokenAmount:t,sourceTokenDecimals:r}){const s=await We.fetchSwapAllowance({tokenAddress:n,userAddress:e});if(s!=null&&s.allowance&&t&&r){const i=Te.parseUnits(t,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(n){const e=await fx.getMyTokensWithBalance(n);return Fe.setTokenBalance(e,M.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(n){return(n==null?void 0:n.map(e=>({...e,address:e!=null&&e.address?e.address:e6(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Vt=un({tokenBalances:[],loading:!1}),ZG={state:Vt,subscribe(n){return ar(Vt,()=>n(Vt))},subscribeKey(n,e){return Ur(Vt,n,e)},setToken(n){n&&(Vt.token=gh(n))},setTokenAmount(n){Vt.sendTokenAmount=n},setReceiverAddress(n){Vt.receiverAddress=n},setReceiverProfileImageUrl(n){Vt.receiverProfileImageUrl=n},setReceiverProfileName(n){Vt.receiverProfileName=n},setNetworkBalanceInUsd(n){Vt.networkBalanceInUSD=n},setLoading(n){Vt.loading=n},async sendToken(){var n;try{switch($t.setLoading(!0),(n=M.state.activeCaipNetwork)==null?void 0:n.chainNamespace){case"eip155":await $t.sendEvmToken();return;case"solana":await $t.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{$t.setLoading(!1)}},async sendEvmToken(){var t,r,s;const n=M.state.activeChain;if(!n)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Vs(n);if(!$t.state.sendTokenAmount||!$t.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!$t.state.token)throw new Error("A token is required");(t=$t.state.token)!=null&&t.address?(Kt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Gn.ACCOUNT_TYPES.SMART_ACCOUNT,token:$t.state.token.address,amount:$t.state.sendTokenAmount,network:((r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await $t.sendERC20Token({receiverAddress:$t.state.receiverAddress,tokenAddress:$t.state.token.address,sendTokenAmount:$t.state.sendTokenAmount,decimals:$t.state.token.quantity.decimals})):(Kt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Gn.ACCOUNT_TYPES.SMART_ACCOUNT,token:$t.state.token.symbol||"",amount:$t.state.sendTokenAmount,network:((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await $t.sendNativeToken({receiverAddress:$t.state.receiverAddress,sendTokenAmount:$t.state.sendTokenAmount,decimals:$t.state.token.quantity.decimals}))},async fetchTokenBalance(n){var i,o;Vt.loading=!0;const e=(i=M.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=M.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=M.state.activeCaipAddress,s=r?Le.getPlainAddress(r):void 0;if(Vt.lastRetry&&!Le.isAllowedRetry(Vt.lastRetry,30*Ft.ONE_SEC_MS))return Vt.loading=!1,[];try{if(s&&e&&t){const l=await fx.getMyTokensWithBalance();return Vt.tokenBalances=l,Vt.lastRetry=void 0,l}}catch(l){Vt.lastRetry=Date.now(),n==null||n(l),La.showError("Token Balance Unavailable")}finally{Vt.loading=!1}return[]},fetchNetworkBalance(){if(Vt.tokenBalances.length===0)return;const n=QG.mapBalancesToSwapTokens(Vt.tokenBalances);if(!n)return;const e=n.find(t=>t.address===e6());e&&(Vt.networkBalanceInUSD=e?wG.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(n){var i,o,l;tt.pushTransactionStack({});const e=n.receiverAddress,t=Fe.state.address,r=Te.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));await Te.sendTransaction({chainNamespace:ce.CHAIN.EVM,to:e,address:t,data:"0x",value:r??BigInt(0)}),Kt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Vs("eip155")===Gn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=$t.state.token)==null?void 0:i.symbol)||"",amount:n.sendTokenAmount,network:((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(l=Te._getClient())==null||l.updateBalance("eip155"),$t.resetSend()},async sendERC20Token(n){tt.pushTransactionStack({onSuccess(){tt.replace("Account")}});const e=Te.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));if(Fe.state.address&&n.sendTokenAmount&&n.receiverAddress&&n.tokenAddress){const t=Le.getPlainAddress(n.tokenAddress);if(!t)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Te.writeContract({fromAddress:Fe.state.address,tokenAddress:t,args:[n.receiverAddress,e??BigInt(0)],method:"transfer",abi:AG.getERC20Abi(t),chainNamespace:ce.CHAIN.EVM}),$t.resetSend()}},async sendSolanaToken(){var n;if(!$t.state.sendTokenAmount||!$t.state.receiverAddress)throw new Error("An amount and receiver address are required");tt.pushTransactionStack({onSuccess(){tt.replace("Account")}}),await Te.sendTransaction({chainNamespace:"solana",to:$t.state.receiverAddress,value:$t.state.sendTokenAmount}),(n=Te._getClient())==null||n.updateBalance("solana"),$t.resetSend()},resetSend(){Vt.token=void 0,Vt.sendTokenAmount=void 0,Vt.receiverAddress=void 0,Vt.receiverProfileImageUrl=void 0,Vt.receiverProfileName=void 0,Vt.loading=!1,Vt.tokenBalances=[]}},$t=Ys(ZG),UC={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},ib={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ie=un({chains:lG(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),XG={state:Ie,subscribe(n){return ar(Ie,()=>{n(Ie)})},subscribeKey(n,e){return Ur(Ie,n,e)},subscribeChainProp(n,e,t){let r;return ar(Ie.chains,()=>{var i;const s=t||Ie.activeChain;if(s){const o=(i=Ie.chains.get(s))==null?void 0:i[n];r!==o&&(r=o,e(o))}})},initialize(n,e,t){const{chainId:r,namespace:s}=ve.getActiveNetworkProps(),i=e==null?void 0:e.find(p=>p.id.toString()===(r==null?void 0:r.toString())),l=n.find(p=>(p==null?void 0:p.namespace)===s)||(n==null?void 0:n[0]),h=n.map(p=>p.namespace).filter(p=>p!==void 0),d=we.state.enableEmbedded?new Set([...h]):new Set([...(e==null?void 0:e.map(p=>p.chainNamespace))??[]]);((n==null?void 0:n.length)===0||!l)&&(Ie.noAdapters=!0),Ie.noAdapters||(Ie.activeChain=l==null?void 0:l.namespace,Ie.activeCaipNetwork=i,M.setChainNetworkData(l==null?void 0:l.namespace,{caipNetwork:i}),Ie.activeChain&&Fa.set({activeChain:l==null?void 0:l.namespace})),d.forEach(p=>{const g=e==null?void 0:e.filter(E=>E.chainNamespace===p),y=ve.getPreferredAccountTypes()||{},b={...we.state.defaultAccountTypes,...y};M.state.chains.set(p,{namespace:p,networkState:un({...ib,caipNetwork:g==null?void 0:g[0]}),accountState:un({...UC,preferredAccountType:b[p]}),caipNetworks:g??[],...t}),M.setRequestedCaipNetworks(g??[],p)})},removeAdapter(n){var e,t;if(Ie.activeChain===n){const r=Array.from(Ie.chains.entries()).find(([s])=>s!==n);if(r){const s=(t=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:t[0];s&&M.setActiveCaipNetwork(s)}}Ie.chains.delete(n)},addAdapter(n,{networkControllerClient:e,connectionControllerClient:t},r){if(!n.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ie.chains.set(n.namespace,{namespace:n.namespace,networkState:{...ib,caipNetwork:r[0]},accountState:UC,caipNetworks:r,connectionControllerClient:t,networkControllerClient:e}),M.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===n.namespace))??[],n.namespace)},addNetwork(n){var t;const e=Ie.chains.get(n.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(t=e.caipNetworks)!=null&&t.find(s=>s.id===n.id)||r.push(n),Ie.chains.set(n.chainNamespace,{...e,caipNetworks:r}),M.setRequestedCaipNetworks(r,n.chainNamespace),_e.filterByNamespace(n.chainNamespace,!0)}},removeNetwork(n,e){var r,s,i;const t=Ie.chains.get(n);if(t){const o=((r=Ie.activeCaipNetwork)==null?void 0:r.id)===e,l=[...((s=t.caipNetworks)==null?void 0:s.filter(h=>h.id!==e))||[]];o&&((i=t==null?void 0:t.caipNetworks)!=null&&i[0])&&M.setActiveCaipNetwork(t.caipNetworks[0]),Ie.chains.set(n,{...t,caipNetworks:l}),M.setRequestedCaipNetworks(l||[],n),l.length===0&&_e.filterByNamespace(n,!1)}},setAdapterNetworkState(n,e){const t=Ie.chains.get(n);t&&(t.networkState={...t.networkState||ib,...e},Ie.chains.set(n,t))},setChainAccountData(n,e,t=!0){if(!n)throw new Error("Chain is required to update chain account data");const r=Ie.chains.get(n);if(r){const s={...r.accountState||UC,...e};Ie.chains.set(n,{...r,accountState:s}),(Ie.chains.size===1||Ie.activeChain===n)&&(e.caipAddress&&(Ie.activeCaipAddress=e.caipAddress),Fe.replaceState(s))}},setChainNetworkData(n,e){if(!n)return;const t=Ie.chains.get(n);if(t){const r={...t.networkState||ib,...e};Ie.chains.set(n,{...t,networkState:r})}},setAccountProp(n,e,t,r=!0){M.setChainAccountData(t,{[n]:e},r)},setActiveNamespace(n){var r,s;Ie.activeChain=n;const e=n?Ie.chains.get(n):void 0,t=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;t!=null&&t.id&&n&&(Ie.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ie.activeCaipNetwork=t,M.setChainNetworkData(n,{caipNetwork:t}),ve.setActiveCaipNetworkId(t==null?void 0:t.caipNetworkId),Fa.set({activeChain:n,selectedNetworkId:t==null?void 0:t.caipNetworkId}))},setActiveCaipNetwork(n){var r,s,i;if(!n)return;Ie.activeChain!==n.chainNamespace&&M.setIsSwitchingNamespace(!0);const e=Ie.chains.get(n.chainNamespace);Ie.activeChain=n.chainNamespace,Ie.activeCaipNetwork=n,M.setChainNetworkData(n.chainNamespace,{caipNetwork:n}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ie.activeCaipAddress=`${n.chainNamespace}:${n.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ie.activeCaipAddress=void 0,M.setAccountProp("caipAddress",Ie.activeCaipAddress,n.chainNamespace),e&&Fe.replaceState(e.accountState),$t.resetSend(),Fa.set({activeChain:Ie.activeChain,selectedNetworkId:(i=Ie.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ve.setActiveCaipNetworkId(n.caipNetworkId),!M.checkIfSupportedNetwork(n.chainNamespace)&&we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&!Te.state.wcBasic&&M.showUnsupportedChainUI()},addCaipNetwork(n){var t;if(!n)return;const e=Ie.chains.get(n.chainNamespace);e&&((t=e==null?void 0:e.caipNetworks)==null||t.push(n))},async switchActiveNamespace(n){var s;if(!n)return;const e=n!==M.state.activeChain,t=(s=M.getNetworkData(n))==null?void 0:s.caipNetwork,r=M.getCaipNetworkByNamespace(n,t==null?void 0:t.id);e&&r&&await M.switchActiveNetwork(r)},async switchActiveNetwork(n){var i;const e=M.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const t=M.state.chains.get(e),r=!((i=t==null?void 0:t.caipNetworks)!=null&&i.some(o=>{var l;return o.id===((l=Ie.activeCaipNetwork)==null?void 0:l.id)})),s=M.getNetworkControllerClient(n.chainNamespace);if(s){try{await s.switchCaipNetwork(n),r&&Ut.close()}catch{tt.goBack()}Kt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:n.caipNetworkId}})}},getNetworkControllerClient(n){const e=n||Ie.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const t=Ie.chains.get(e);if(!t)throw new Error("Chain adapter not found");if(!t.networkControllerClient)throw new Error("NetworkController client not set");return t.networkControllerClient},getConnectionControllerClient(n){const e=n||Ie.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const t=Ie.chains.get(e);if(!(t!=null&&t.connectionControllerClient))throw new Error("ConnectionController client not set");return t.connectionControllerClient},getAccountProp(n,e){var s;let t=Ie.activeChain;if(e&&(t=e),!t)return;const r=(s=Ie.chains.get(t))==null?void 0:s.accountState;if(r)return r[n]},getNetworkProp(n,e){var r;const t=(r=Ie.chains.get(e))==null?void 0:r.networkState;if(t)return t[n]},getRequestedCaipNetworks(n){const e=Ie.chains.get(n),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Le.sortRequestedNetworks(t,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const n=[];return Ie.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const t=M.getRequestedCaipNetworks(e.namespace);n.push(...t)}),n},setRequestedCaipNetworks(n,e){M.setAdapterNetworkState(e,{requestedCaipNetworks:n});const r=M.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));_e.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const n=[];return Ie.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const t=M.getApprovedCaipNetworkIds(e.namespace);n.push(...t)}),n},getActiveCaipNetwork(n){var e,t;return n?(t=(e=Ie.chains.get(n))==null?void 0:e.networkState)==null?void 0:t.caipNetwork:Ie.activeCaipNetwork},getActiveCaipAddress(){return Ie.activeCaipAddress},getApprovedCaipNetworkIds(n){var r;const e=Ie.chains.get(n);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(n){const e=M.getNetworkControllerClient(),t=await(e==null?void 0:e.getApprovedCaipNetworksData());M.setAdapterNetworkState(n,{approvedCaipNetworkIds:t==null?void 0:t.approvedCaipNetworkIds,supportsAllNetworks:t==null?void 0:t.supportsAllNetworks})},checkIfSupportedNetwork(n,e){const t=e||Ie.activeCaipNetwork,r=M.getRequestedCaipNetworks(n);return r.length?r==null?void 0:r.some(s=>s.id===(t==null?void 0:t.id)):!0},checkIfSupportedChainId(n){if(!Ie.activeChain)return!0;const e=M.getRequestedCaipNetworks(Ie.activeChain);return e==null?void 0:e.some(t=>t.id===n)},setSmartAccountEnabledNetworks(n,e){M.setAdapterNetworkState(e,{smartAccountEnabledNetworks:n})},checkIfSmartAccountEnabled(){var r;const n=WU.caipNetworkIdToNumber((r=Ie.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ie.activeChain;if(!e||!n)return!1;const t=M.getNetworkProp("smartAccountEnabledNetworks",e);return!!(t!=null&&t.includes(Number(n)))},showUnsupportedChainUI(){Ut.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const n=Ie.activeCaipNetwork;return!!(n!=null&&n.chainNamespace&&Ft.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(n.chainNamespace))},resetNetwork(n){M.setAdapterNetworkState(n,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(n){const e=n;if(!e)throw new Error("Chain is required to set account prop");const t=we.state.defaultAccountTypes[e],r=M.getAccountProp("preferredAccountType",e);Ie.activeCaipAddress=void 0,M.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:t||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),_e.removeConnectorId(e)},setIsSwitchingNamespace(n){Ie.isSwitchingNamespace=n},getFirstCaipNetworkSupportsAuthConnector(){var t,r;const n=[];let e;if(Ie.chains.forEach(s=>{ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&n.push(s.namespace)}),n.length>0){const s=n[0];return e=s?(r=(t=Ie.chains.get(s))==null?void 0:t.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(n){var e;return n?(e=M.state.chains.get(n))==null?void 0:e.accountState:Fe.state},getNetworkData(n){var t;const e=n||Ie.activeChain;if(e)return(t=M.state.chains.get(e))==null?void 0:t.networkState},getCaipNetworkByNamespace(n,e){var s,i,o;if(!n)return;const t=M.state.chains.get(n),r=(s=t==null?void 0:t.caipNetworks)==null?void 0:s.find(l=>l.id===e);return r||((i=t==null?void 0:t.networkState)==null?void 0:i.caipNetwork)||((o=t==null?void 0:t.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const n=_e.state.filterByNamespace;return(n?[Ie.chains.get(n)]:Array.from(Ie.chains.values())).flatMap(t=>(t==null?void 0:t.caipNetworks)||[]).map(t=>t.caipNetworkId)},getCaipNetworks(n){return n?M.getRequestedCaipNetworks(n):M.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(n){Ie.lastConnectedSIWECaipNetwork=n},getLastConnectedSIWECaipNetwork(){return Ie.lastConnectedSIWECaipNetwork}},M=Ys(XG),JG={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},t6=Le.getBlockchainApiUrl(),is=un({clientId:null,api:new wy({baseUrl:t6,clientId:null}),supportedChains:{http:[],ws:[]}}),We={state:is,async get(n){const{st:e,sv:t}=We.getSdkProperties(),r=we.state.projectId,s={...n.params||{},st:e,sv:t,projectId:r};return is.api.get({...n,params:s})},getSdkProperties(){const{sdkType:n,sdkVersion:e}=we.state;return{st:n||"unknown",sv:e||"unknown"}},async isNetworkSupported(n){if(!n)return!1;try{is.supportedChains.http.length||await We.getSupportedNetworks()}catch{return!1}return is.supportedChains.http.includes(n)},async getSupportedNetworks(){try{const n=await We.get({path:"v1/supported-chains"});return is.supportedChains=n,n}catch{return is.supportedChains}},async fetchIdentity({address:n,caipNetworkId:e}){if(!await We.isNetworkSupported(e))return{avatar:"",name:""};const r=ve.getIdentityFromCacheForAddress(n);if(r)return r;const s=await We.get({path:`/v1/identity/${n}`,params:{sender:M.state.activeCaipAddress?Le.getPlainAddress(M.state.activeCaipAddress):void 0}});return ve.updateIdentityCache({address:n,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:n,cursor:e,signal:t,cache:r,chainId:s}){var o;return await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?We.get({path:`/v1/account/${n}/history`,params:{cursor:e,chainId:s},signal:t,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:n,userAddress:e,from:t,to:r,gasPrice:s}){var o;return await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?We.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:n,userAddress:e,from:t,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:n}){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:"/v1/convert/tokens",params:{chainId:n}}):{tokens:[]}},async fetchTokenPrice({addresses:n}){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?is.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:n,projectId:we.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:n,userAddress:e}){var r;return await We.isNetworkSupported((r=M.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?We.get({path:"/v1/convert/allowance",params:{tokenAddress:n,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:n}){var s;const{st:e,sv:t}=We.getSdkProperties();if(!await We.isNetworkSupported((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return We.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:n,st:e,sv:t}})},async generateSwapCalldata({amount:n,from:e,to:t,userAddress:r,disableEstimate:s}){var o;if(!await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return is.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:n,eip155:{slippage:Ft.CONVERT_SLIPPAGE_TOLERANCE},projectId:we.state.projectId,from:e,to:t,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:n,to:e,userAddress:t}){var o;const{st:r,sv:s}=We.getSdkProperties();if(!await We.isNetworkSupported((o=M.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return We.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:n,to:e,st:r,sv:s}})},async getBalance(n,e,t){var d;const{st:r,sv:s}=We.getSdkProperties();if(!await We.isNetworkSupported((d=M.state.activeCaipNetwork)==null?void 0:d.caipNetworkId))return La.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${n}`,l=ve.getBalanceCacheForCaipAddress(o);if(l)return l;const h=await We.get({path:`/v1/account/${n}/balance`,params:{currency:"usd",chainId:e,forceUpdate:t,st:r,sv:s}});return ve.updateBalanceCache({caipAddress:o,balance:h,timestamp:Date.now()}),h},async lookupEnsName(n){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/profile/account/${n}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:n}){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/profile/reverse/${n}`,params:{sender:Fe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(n){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/profile/suggestions/${n}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:n,address:e,message:t,signature:r}){var i;return await We.isNetworkSupported((i=M.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?is.api.post({path:"/v1/profile/account",body:{coin_type:n,address:e,message:t,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:n,partnerUserId:e,defaultNetwork:t,purchaseAmount:r,paymentAmount:s}){var l;return await We.isNetworkSupported((l=M.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)?(await is.api.post({path:"/v1/generators/onrampurl",params:{projectId:we.state.projectId},body:{destinationWallets:n,defaultNetwork:t,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await We.isNetworkSupported((e=M.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await We.get({path:"/v1/onramp/options"})}catch{return JG}},async getOnrampQuote({purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}){var s;try{return await We.isNetworkSupported((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await is.api.post({path:"/v1/onramp/quote",params:{projectId:we.state.projectId},body:{purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}}):null}catch{return{networkFee:{amount:t,currency:e.id},paymentSubtotal:{amount:t,currency:e.id},paymentTotal:{amount:t,currency:e.id},purchaseAmount:{amount:t,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(n){var t;return await We.isNetworkSupported((t=M.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?We.get({path:`/v1/sessions/${n}`}):[]},async revokeSmartSession(n,e,t){var s;return await We.isNetworkSupported((s=M.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?is.api.post({path:`/v1/sessions/${n}/revoke`,params:{projectId:we.state.projectId},body:{pci:e,signature:t}}):{success:!1}},setClientId(n){is.clientId=n,is.api=new wy({baseUrl:t6,clientId:n})}},eV="modulepreload",tV=function(n){return"/captcha-frontend-test/"+n},$R={},zr=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(t.map(d=>{if(d=tV(d),d in $R)return;$R[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":eV,p||(y.as="script"),y.crossOrigin="",y.href=d,h&&y.setAttribute("nonce",h),document.head.appendChild(y),p)return new Promise((b,E)=>{y.addEventListener("load",b),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function nV(){let n=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{n=r,e=s}),resolve:n,reject:e}}const kC=new Map;function rV({fn:n,id:e,shouldSplitBatch:t,wait:r=0,sort:s}){const i=async()=>{const p=h();o();const g=p.map(({args:y})=>y);g.length!==0&&n(g).then(y=>{s&&Array.isArray(y)&&y.sort(s);for(let b=0;b<p.length;b++){const{resolve:E}=p[b];E==null||E([y[b],y])}}).catch(y=>{for(let b=0;b<p.length;b++){const{reject:E}=p[b];E==null||E(y)}})},o=()=>kC.delete(e),l=()=>h().map(({args:p})=>p),h=()=>kC.get(e)||[],d=p=>kC.set(e,[...h(),p]);return{flush:o,async schedule(p){const{promise:g,resolve:y,reject:b}=nV();return(t==null?void 0:t([...l(),p]))&&i(),h().length>0?(d({args:p,resolve:y,reject:b}),g):(d({args:p,resolve:y,reject:b}),setTimeout(i,r),g)}}}async function n6(n){return new Promise(e=>setTimeout(e,n))}const D2=256;let ab=D2,ob;function sV(n=11){if(!ob||ab+n>D2*2){ob="",ab=0;for(let e=0;e<D2;e++)ob+=(256+Math.random()*256|0).toString(16).substring(1)}return ob.substring(ab,ab+++n)}const cb=new rx(8192);function iV(n,{enabled:e=!0,id:t}){if(!e||!t)return n();if(cb.get(t))return cb.get(t);const r=n().finally(()=>cb.delete(t));return cb.set(t,r),r}function aV(n,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:l=0}={})=>{const h=async({error:d})=>{const p=typeof e=="function"?e({count:l,error:d}):e;p&&await n6(p),o({count:l+1})};try{const d=await n();s(d)}catch(d){if(l<t&&await r({count:l,error:d}))return h({error:d});i(d)}};o()})}function oV(n,e={}){return async(t,r={})=>{var g;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:l=3,uid:h}={...e,...r},{method:d}=t;if((g=i==null?void 0:i.exclude)!=null&&g.includes(d))throw new _u(new Error("method not supported"),{method:d});if(i!=null&&i.include&&!i.include.includes(d))throw new _u(new Error("method not supported"),{method:d});const p=s?gU(`${h}.${th(t)}`):void 0;return iV(()=>aV(async()=>{try{return await n(t)}catch(y){const b=y;switch(b.code){case i0.code:throw new i0(b);case a0.code:throw new a0(b);case o0.code:throw new o0(b,{method:t.method});case c0.code:throw new c0(b);case mp.code:throw new mp(b);case l0.code:throw new l0(b);case u0.code:throw new u0(b);case h0.code:throw new h0(b);case yp.code:throw new yp(b);case _u.code:throw new _u(b,{method:t.method});case wp.code:throw new wp(b);case d0.code:throw new d0(b);case nh.code:throw new nh(b);case f0.code:throw new f0(b);case p0.code:throw new p0(b);case g0.code:throw new g0(b);case m0.code:throw new m0(b);case y0.code:throw new y0(b);case w0.code:throw new w0(b);case b0.code:throw new b0(b);case E0.code:throw new E0(b);case v0.code:throw new v0(b);case A0.code:throw new A0(b);case C0.code:throw new C0(b);case _0.code:throw new _0(b);case 5e3:throw new nh(b);default:throw y instanceof Yt?y:new jq(b)}}},{delay:({count:y,error:b})=>{var E;if(b&&b instanceof Im){const v=(E=b==null?void 0:b.headers)==null?void 0:E.get("Retry-After");if(v!=null&&v.match(/\d/))return Number.parseInt(v)*1e3}return~~(1<<y)*o},retryCount:l,shouldRetry:({error:y})=>cV(y)}),{enabled:s,id:p})}}function cV(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===wp.code||n.code===mp.code:n instanceof Im&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function r6({key:n,methods:e,name:t,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:l},h){const d=sV();return{config:{key:n,methods:e,name:t,request:r,retryCount:s,retryDelay:i,timeout:o,type:l},request:oV(r,{methods:e,retryCount:s,retryDelay:i,uid:d}),value:h}}function FR(n,e={}){const{key:t="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=lV,retryCount:o,retryDelay:l}=e;return({chain:h,pollingInterval:d=4e3,timeout:p,...g})=>{let y=n,b=()=>{};const E=r6({key:t,name:r,async request({method:v,params:A}){let S;const T=async(N=0)=>{const k=y[N]({...g,chain:h,retryCount:0,timeout:p});try{const R=await k.request({method:v,params:A});return b({method:v,params:A,response:R,transport:k,status:"success"}),R}catch(R){if(b({error:R,method:v,params:A,transport:k,status:"error"}),i(R)||N===y.length-1||(S??(S=y.slice(N+1).some(P=>{const{include:F,exclude:$}=P({chain:h}).config.methods||{};return F?F.includes(v):$?!$.includes(v):!0})),!S))throw R;return T(N+1)}};return T()},retryCount:o,retryDelay:l,type:"fallback"},{onResponse:v=>b=v,transports:y.map(v=>v({chain:h,retryCount:0}))});if(s){const v=typeof s=="object"?s:{};uV({chain:h,interval:v.interval??d,onTransports:A=>y=A,ping:v.ping,sampleCount:v.sampleCount,timeout:v.timeout,transports:y,weights:v.weights})}return E}}function lV(n){return!!("code"in n&&typeof n.code=="number"&&(n.code===yp.code||n.code===nh.code||nx.nodeMessage.test(n.message)||n.code===5e3))}function uV({chain:n,interval:e=4e3,onTransports:t,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:l={}}){const{stability:h=.7,latency:d=.3}=l,p=[],g=async()=>{const y=await Promise.all(o.map(async v=>{const A=v({chain:n,retryCount:0,timeout:i}),S=Date.now();let T,N;try{await(r?r({transport:A}):A.request({method:"net_listening"})),N=1}catch{N=0}finally{T=Date.now()}return{latency:T-S,success:N}}));p.push(y),p.length>s&&p.shift();const b=Math.max(...p.map(v=>Math.max(...v.map(({latency:A})=>A)))),E=o.map((v,A)=>{const S=p.map(P=>P[A].latency),N=1-S.reduce((P,F)=>P+F,0)/S.length/b,k=p.map(P=>P[A].success),R=k.reduce((P,F)=>P+F,0)/k.length;return R===0?[0,A]:[d*N+h*R,A]}).sort((v,A)=>A[0]-v[0]);t(E.map(([,v])=>o[v])),await n6(e),g()};g()}class hV extends Yt{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function dV(n,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const l=new AbortController;t>0&&(o=setTimeout(()=>{r&&l.abort()},t)),s(await n({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&i(e),i(l)}finally{clearTimeout(o)}})()})}function fV(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const zR=fV();function pV(n,e={}){return{async request(t){var g;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=t,l={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:h,method:d,signal:p}=l;try{const y=await dV(async({signal:E})=>{const v={...l,body:Array.isArray(r)?th(r.map(N=>({jsonrpc:"2.0",id:N.id??zR.take(),...N}))):th({jsonrpc:"2.0",id:r.id??zR.take(),...r}),headers:{"Content-Type":"application/json",...h},method:d||"POST",signal:p||(o>0?E:null)},A=new Request(n,v),S=await(s==null?void 0:s(A,v))??{...v,url:n};return await fetch(S.url??n,S)},{errorInstance:new TR({body:r,url:n}),timeout:o,signal:!0});i&&await i(y);let b;if((g=y.headers.get("Content-Type"))!=null&&g.startsWith("application/json"))b=await y.json();else{b=await y.text();try{b=JSON.parse(b||"{}")}catch(E){if(y.ok)throw E;b={error:b}}}if(!y.ok)throw new Im({body:r,details:th(b.error)||y.statusText,headers:y.headers,status:y.status,url:n});return b}catch(y){throw y instanceof Im||y instanceof TR?y:new Im({body:r,cause:y,url:n})}}}}function lb(n,e={}){const{batch:t,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:h,retryDelay:d,raw:p}=e;return({chain:g,retryCount:y,timeout:b})=>{const{batchSize:E=1e3,wait:v=0}=typeof t=="object"?t:{},A=e.retryCount??y,S=b??e.timeout??1e4,T=n||(g==null?void 0:g.rpcUrls.default.http[0]);if(!T)throw new hV;const N=pV(T,{fetchOptions:r,onRequest:l,onResponse:h,timeout:S});return r6({key:s,methods:i,name:o,async request({method:k,params:R}){const P={method:k,params:R},{schedule:F}=rV({id:T,wait:v,shouldSplitBatch(j){return j.length>E},fn:j=>N.request({body:j}),sort:(j,W)=>j.id-W.id}),$=async j=>t?F(j):[await N.request({body:j})],[{error:B,result:H}]=await $(P);if(p)return{error:B,result:H};if(B)throw new FU({body:P,error:B,url:T});return H},retryCount:A,retryDelay:d,timeout:S,type:"http"},{fetchOptions:r,url:T})}}const BC={createBalance(n,e){const t={name:n.metadata.name||"",symbol:n.metadata.symbol||"",decimals:n.metadata.decimals||0,value:n.metadata.value||0,price:n.metadata.price||0,iconUrl:n.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:e,address:n.address==="native"?void 0:this.convertAddressToCAIP10Address(n.address,e),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:n.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:n,decimals:e}){return AU(BigInt(n),e)},convertAddressToCAIP10Address(n,e){return`${e}:${n}`},createCAIP2ChainId(n,e){return`${e}:${parseInt(n,16)}`},getChainIdHexFromCAIP2ChainId(n){const e=n.split(":");if(e.length<2||!e[1])return"0x0";const t=e[1],r=parseInt(t,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(n){return typeof n!="object"||n===null?!1:Object.values(n).every(e=>Array.isArray(e)&&e.every(t=>this.isValidAsset(t)))},isValidAsset(n){return typeof n=="object"&&n!==null&&typeof n.address=="string"&&typeof n.balance=="string"&&(n.type==="ERC20"||n.type==="NATIVE")&&typeof n.metadata=="object"&&n.metadata!==null&&typeof n.metadata.name=="string"&&typeof n.metadata.symbol=="string"&&typeof n.metadata.decimals=="number"&&typeof n.metadata.price=="number"&&typeof n.metadata.iconUrl=="string"}},fx={async getMyTokensWithBalance(n){const e=Fe.state.address,t=M.state.activeCaipNetwork,r=_e.getConnectorId("eip155")===ce.CONNECTOR_ID.AUTH;if(!e||!t)return[];const s=`${t.caipNetworkId}:${e}`,i=ve.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(t.chainNamespace===ce.CHAIN.EVM&&r){const l=await this.getEIP155Balances(e,t);if(l)return this.filterLowQualityTokens(l)}const o=await We.getBalance(e,t.caipNetworkId,n);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(n,e){var t,r;try{const s=BC.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Te.getCapabilities(n);if(!((r=(t=i==null?void 0:i[s])==null?void 0:t.assetDiscovery)!=null&&r.supported))return null;const o=await Te.walletGetAssets({account:n,chainFilter:[s]});if(!BC.isWalletGetAssetsResponse(o))return null;const h=(o[s]||[]).map(d=>BC.createBalance(d,e.caipNetworkId));return ve.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${n}`,balance:{balances:h},timestamp:Date.now()}),h}catch{return null}},filterLowQualityTokens(n){return n.filter(e=>e.quantity.decimals!=="0")}},da=un({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),gV={state:da,replaceState(n){n&&Object.assign(da,gh(n))},subscribe(n){return M.subscribeChainProp("accountState",e=>{if(e)return n(e)})},subscribeKey(n,e,t){let r;return M.subscribeChainProp("accountState",s=>{if(s){const i=s[n];r!==i&&(r=i,e(i))}},t)},setStatus(n,e){M.setAccountProp("status",n,e)},getCaipAddress(n){return M.getAccountProp("caipAddress",n)},setCaipAddress(n,e){const t=n?Le.getPlainAddress(n):void 0;e===M.state.activeChain&&(M.state.activeCaipAddress=n),M.setAccountProp("caipAddress",n,e),M.setAccountProp("address",t,e)},setBalance(n,e,t){M.setAccountProp("balance",n,t),M.setAccountProp("balanceSymbol",e,t)},setProfileName(n,e){M.setAccountProp("profileName",n,e)},setProfileImage(n,e){M.setAccountProp("profileImage",n,e)},setUser(n,e){M.setAccountProp("user",n,e)},setAddressExplorerUrl(n,e){M.setAccountProp("addressExplorerUrl",n,e)},setSmartAccountDeployed(n,e){M.setAccountProp("smartAccountDeployed",n,e)},setCurrentTab(n){M.setAccountProp("currentTab",n,M.state.activeChain)},setTokenBalance(n,e){n&&M.setAccountProp("tokenBalance",n,e)},setShouldUpdateToAddress(n,e){M.setAccountProp("shouldUpdateToAddress",n,e)},addAddressLabel(n,e,t){const r=M.getAccountProp("addressLabels",t)||new Map;r.set(n,e),M.setAccountProp("addressLabels",r,t)},removeAddressLabel(n,e){const t=M.getAccountProp("addressLabels",e)||new Map;t.delete(n),M.setAccountProp("addressLabels",t,e)},setConnectedWalletInfo(n,e){M.setAccountProp("connectedWalletInfo",n,e,!1)},setPreferredAccountType(n,e){M.setAccountProp("preferredAccountType",n,e)},setSocialProvider(n,e){n&&M.setAccountProp("socialProvider",n,e)},setSocialWindow(n,e){M.setAccountProp("socialWindow",n?gh(n):void 0,e)},setFarcasterUrl(n,e){M.setAccountProp("farcasterUrl",n,e)},async fetchTokenBalance(n){var i,o;da.balanceLoading=!0;const e=(i=M.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=M.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=M.state.activeCaipAddress,s=r?Le.getPlainAddress(r):void 0;if(da.lastRetry&&!Le.isAllowedRetry(da.lastRetry,30*Ft.ONE_SEC_MS))return da.balanceLoading=!1,[];try{if(s&&e&&t){const l=await fx.getMyTokensWithBalance();return Fe.setTokenBalance(l,t),da.lastRetry=void 0,da.balanceLoading=!1,l}}catch(l){da.lastRetry=Date.now(),n==null||n(l),La.showError("Token Balance Unavailable")}finally{da.balanceLoading=!1}return[]},resetAccount(n){M.resetAccount(n)}},Fe=Ys(gV),mV={onSwitchNetwork({network:n,ignoreSwitchConfirmation:e=!1}){const t=M.state.activeCaipNetwork,r=tt.state.data;if(n.id===(t==null?void 0:t.id))return;const i=Fe.getCaipAddress(M.state.activeChain),o=n.chainNamespace!==M.state.activeChain,l=Fe.getCaipAddress(n.chainNamespace),d=_e.getConnectorId(M.state.activeChain)===ce.CONNECTOR_ID.AUTH,p=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===n.chainNamespace);e||d&&p?tt.push("SwitchNetwork",{...r,network:n}):i&&o&&!l?tt.push("SwitchActiveChain",{switchToChain:n.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:n}):tt.push("SwitchNetwork",{...r,network:n})}},as=un({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),yV={state:as,subscribe(n){return ar(as,()=>n(as))},subscribeKey(n,e){return Ur(as,n,e)},async open(n){var i,o;const e=n==null?void 0:n.namespace,t=M.state.activeChain,r=e&&e!==t,s=(i=M.getAccountData(n==null?void 0:n.namespace))==null?void 0:i.caipAddress;if(Te.state.wcBasic?Ve.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ve.prefetch(),_e.setFilterByNamespace(n==null?void 0:n.namespace),Ut.setLoading(!0,e),e&&r){const l=((o=M.getNetworkData(e))==null?void 0:o.caipNetwork)||M.getRequestedCaipNetworks(e)[0];l&&mV.onSwitchNetwork({network:l,ignoreSwitchConfirmation:!0})}else{const l=M.state.noAdapters;we.state.manualWCControl||l&&!s?Le.isMobile()?tt.reset("AllWallets"):tt.reset("ConnectingWalletConnectBasic"):n!=null&&n.view?tt.reset(n.view,n.data):s?tt.reset("Account"):tt.reset("Connect")}as.open=!0,Fa.set({open:!0}),Kt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const n=we.state.enableEmbedded,e=!!M.state.activeCaipAddress;as.open&&Kt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),as.open=!1,tt.reset("Connect"),Ut.clearLoading(),n?e?tt.replace("Account"):tt.push("Connect"):Fa.set({open:!1}),Te.resetUri()},setLoading(n,e){e&&as.loadingNamespaceMap.set(e,n),as.loading=n,Fa.set({loading:n})},clearLoading(){as.loadingNamespaceMap.clear(),as.loading=!1},shake(){as.shake||(as.shake=!0,setTimeout(()=>{as.shake=!1},500))}},Ut=Ys(yV),Rm={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},P2={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},wV={providers:ZU,selectedProvider:null,error:null,purchaseCurrency:Rm,paymentCurrency:P2,purchaseCurrencies:[Rm],paymentCurrencies:[],quotesLoading:!1},xt=un(wV),bV={state:xt,subscribe(n){return ar(xt,()=>n(xt))},subscribeKey(n,e){return Ur(xt,n,e)},setSelectedProvider(n){if(n&&n.name==="meld"){const e=M.state.activeChain,t=e===ce.CHAIN.SOLANA?"SOL":"USDC",r=M.getAccountProp("address",e)??"",s=new URL(n.url);s.searchParams.append("publicKey",CG),s.searchParams.append("destinationCurrencyCode",t),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",we.state.projectId),xt.selectedProvider={...n,url:s.toString()}}else xt.selectedProvider=n},setOnrampProviders(n){if(Array.isArray(n)&&n.every(e=>typeof e=="string")){const e=n,t=ZU.filter(r=>e.includes(r.name));xt.providers=t}else xt.providers=[]},setPurchaseCurrency(n){xt.purchaseCurrency=n},setPaymentCurrency(n){xt.paymentCurrency=n},setPurchaseAmount(n){U2.state.purchaseAmount=n},setPaymentAmount(n){U2.state.paymentAmount=n},async getAvailableCurrencies(){const n=await We.getOnrampOptions();xt.purchaseCurrencies=n.purchaseCurrencies,xt.paymentCurrencies=n.paymentCurrencies,xt.paymentCurrency=n.paymentCurrencies[0]||P2,xt.purchaseCurrency=n.purchaseCurrencies[0]||Rm,await Ve.fetchCurrencyImages(n.paymentCurrencies.map(e=>e.id)),await Ve.fetchTokenImages(n.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var n,e;xt.quotesLoading=!0;try{const t=await We.getOnrampQuote({purchaseCurrency:xt.purchaseCurrency,paymentCurrency:xt.paymentCurrency,amount:((n=xt.paymentAmount)==null?void 0:n.toString())||"0",network:(e=xt.purchaseCurrency)==null?void 0:e.symbol});return xt.quotesLoading=!1,xt.purchaseAmount=Number(t==null?void 0:t.purchaseAmount.amount),t}catch(t){return xt.error=t.message,xt.quotesLoading=!1,null}finally{xt.quotesLoading=!1}},resetState(){xt.selectedProvider=null,xt.error=null,xt.purchaseCurrency=Rm,xt.paymentCurrency=P2,xt.purchaseCurrencies=[Rm],xt.paymentCurrencies=[],xt.paymentAmount=void 0,xt.purchaseAmount=void 0,xt.quotesLoading=!1}},U2=Ys(bV),HR=2147483648,EV={convertEVMChainIdToCoinType(n){if(n>=HR)throw new Error("Invalid chainId");return(HR|n)>>>0}},oi=un({suggestions:[],loading:!1}),vV={state:oi,subscribe(n){return ar(oi,()=>n(oi))},subscribeKey(n,e){return Ur(oi,n,e)},async resolveName(n){var e,t;try{return await We.lookupEnsName(n)}catch(r){const s=r;throw new Error(((t=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:t.description)||"Error resolving name")}},async isNameRegistered(n){try{return await We.lookupEnsName(n),!0}catch{return!1}},async getSuggestions(n){try{oi.loading=!0,oi.suggestions=[];const e=await We.getEnsNameSuggestions(n);return oi.suggestions=e.suggestions.map(t=>({...t,name:t.name}))||[],oi.suggestions}catch(e){const t=Dm.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{oi.loading=!1}},async getNamesForAddress(n){try{if(!M.state.activeCaipNetwork)return[];const t=ve.getEnsFromCacheForAddress(n);if(t)return t;const r=await We.reverseLookupEnsName({address:n});return ve.updateEnsCache({address:n,ens:r,timestamp:Date.now()}),r}catch(e){const t=Dm.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(n){const e=M.state.activeCaipNetwork,t=Fe.state.address,r=_e.getAuthConnector();if(!e)throw new Error("Network not found");if(!t||!r)throw new Error("Address or auth connector not found");oi.loading=!0;try{const s=JSON.stringify({name:n,attributes:{},timestamp:Math.floor(Date.now()/1e3)});tt.pushTransactionStack({onCancel(){tt.replace("RegisterAccountName")}});const i=await Te.signMessage(s);oi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const l=EV.convertEVMChainIdToCoinType(Number(o));await We.registerEnsName({coinType:l,address:t,signature:i,message:s}),Fe.setProfileName(n,e.chainNamespace),tt.replace("RegisterAccountNameSuccess")}catch(s){const i=Dm.parseEnsApiError(s,`Error registering name ${n}`);throw tt.replace("RegisterAccountName"),new Error(i)}finally{oi.loading=!1}},validateName(n){return/^[a-zA-Z0-9-]{4,}$/u.test(n)},parseEnsApiError(n,e){var r,s;const t=n;return((s=(r=t==null?void 0:t.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Dm=Ys(vV);var ub={exports:{}},jR;function AV(){if(jR)return ub.exports;jR=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(R,P,F){return Function.prototype.apply.call(R,P,F)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:t=function(R){return Object.getOwnPropertyNames(R)};function r(k){console&&console.warn&&console.warn(k)}var s=Number.isNaN||function(R){return R!==R};function i(){i.init.call(this)}ub.exports=i,ub.exports.once=S,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function l(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");o=k}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||s(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function h(k){return k._maxListeners===void 0?i.defaultMaxListeners:k._maxListeners}i.prototype.getMaxListeners=function(){return h(this)},i.prototype.emit=function(R){for(var P=[],F=1;F<arguments.length;F++)P.push(arguments[F]);var $=R==="error",B=this._events;if(B!==void 0)$=$&&B.error===void 0;else if(!$)return!1;if($){var H;if(P.length>0&&(H=P[0]),H instanceof Error)throw H;var j=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw j.context=H,j}var W=B[R];if(W===void 0)return!1;if(typeof W=="function")e(W,this,P);else for(var ne=W.length,J=E(W,ne),F=0;F<ne;++F)e(J[F],this,P);return!0};function d(k,R,P,F){var $,B,H;if(l(P),B=k._events,B===void 0?(B=k._events=Object.create(null),k._eventsCount=0):(B.newListener!==void 0&&(k.emit("newListener",R,P.listener?P.listener:P),B=k._events),H=B[R]),H===void 0)H=B[R]=P,++k._eventsCount;else if(typeof H=="function"?H=B[R]=F?[P,H]:[H,P]:F?H.unshift(P):H.push(P),$=h(k),$>0&&H.length>$&&!H.warned){H.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=k,j.type=R,j.count=H.length,r(j)}return k}i.prototype.addListener=function(R,P){return d(this,R,P,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(R,P){return d(this,R,P,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(k,R,P){var F={fired:!1,wrapFn:void 0,target:k,type:R,listener:P},$=p.bind(F);return $.listener=P,F.wrapFn=$,$}i.prototype.once=function(R,P){return l(P),this.on(R,g(this,R,P)),this},i.prototype.prependOnceListener=function(R,P){return l(P),this.prependListener(R,g(this,R,P)),this},i.prototype.removeListener=function(R,P){var F,$,B,H,j;if(l(P),$=this._events,$===void 0)return this;if(F=$[R],F===void 0)return this;if(F===P||F.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete $[R],$.removeListener&&this.emit("removeListener",R,F.listener||P));else if(typeof F!="function"){for(B=-1,H=F.length-1;H>=0;H--)if(F[H]===P||F[H].listener===P){j=F[H].listener,B=H;break}if(B<0)return this;B===0?F.shift():v(F,B),F.length===1&&($[R]=F[0]),$.removeListener!==void 0&&this.emit("removeListener",R,j||P)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(R){var P,F,$;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[R]),this;if(arguments.length===0){var B=Object.keys(F),H;for($=0;$<B.length;++$)H=B[$],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=F[R],typeof P=="function")this.removeListener(R,P);else if(P!==void 0)for($=P.length-1;$>=0;$--)this.removeListener(R,P[$]);return this};function y(k,R,P){var F=k._events;if(F===void 0)return[];var $=F[R];return $===void 0?[]:typeof $=="function"?P?[$.listener||$]:[$]:P?A($):E($,$.length)}i.prototype.listeners=function(R){return y(this,R,!0)},i.prototype.rawListeners=function(R){return y(this,R,!1)},i.listenerCount=function(k,R){return typeof k.listenerCount=="function"?k.listenerCount(R):b.call(k,R)},i.prototype.listenerCount=b;function b(k){var R=this._events;if(R!==void 0){var P=R[k];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function E(k,R){for(var P=new Array(R),F=0;F<R;++F)P[F]=k[F];return P}function v(k,R){for(;R+1<k.length;R++)k[R]=k[R+1];k.pop()}function A(k){for(var R=new Array(k.length),P=0;P<R.length;++P)R[P]=k[P].listener||k[P];return R}function S(k,R){return new Promise(function(P,F){function $(H){k.removeListener(R,B),F(H)}function B(){typeof k.removeListener=="function"&&k.removeListener("error",$),P([].slice.call(arguments))}N(k,R,B,{once:!0}),R!=="error"&&T(k,$,{once:!0})})}function T(k,R,P){typeof k.on=="function"&&N(k,"error",R,P)}function N(k,R,P,F){if(typeof k.on=="function")F.once?k.once(R,P):k.on(R,P);else if(typeof k.addEventListener=="function")k.addEventListener(R,function $(B){F.once&&k.removeEventListener(R,$),P(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return ub.exports}var _i=AV();const px=iy(_i);var LC={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k2=function(n,e){return k2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},k2(n,e)};function CV(n,e){k2(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var B2=function(){return B2=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},B2.apply(this,arguments)};function _V(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function SV(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(o=n[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function xV(n,e){return function(t,r){e(t,r,n)}}function NV(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function TV(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(p){try{d(r.next(p))}catch(g){o(g)}}function h(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?i(p.value):s(p.value).then(l,h)}d((r=r.apply(n,e||[])).next())})}function IV(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return h([d,p])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function OV(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function RV(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function L2(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s6(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function DV(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(s6(arguments[e]));return n}function PV(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,s++)r[s]=i[o];return r}function x0(n){return this instanceof x0?(this.v=n,this):new x0(n)}function UV(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(y){r[y]&&(s[y]=function(b){return new Promise(function(E,v){i.push([y,b,E,v])>1||l(y,b)})})}function l(y,b){try{h(r[y](b))}catch(E){g(i[0][3],E)}}function h(y){y.value instanceof x0?Promise.resolve(y.value.v).then(d,p):g(i[0][2],y)}function d(y){l("next",y)}function p(y){l("throw",y)}function g(y,b){y(b),i.shift(),i.length&&l(i[0][0],i[0][1])}}function kV(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=n[s]?function(o){return(t=!t)?{value:x0(n[s](o)),done:s==="return"}:i?i(o):o}:i}}function BV(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof L2=="function"?L2(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(l,h){o=n[i](o),s(l,h,o.done,o.value)})}}function s(i,o,l,h){Promise.resolve(h).then(function(d){i({value:d,done:l})},o)}}function LV(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function MV(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function $V(n){return n&&n.__esModule?n:{default:n}}function FV(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function zV(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const HV=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return B2},__asyncDelegator:kV,__asyncGenerator:UV,__asyncValues:BV,__await:x0,__awaiter:TV,__classPrivateFieldGet:FV,__classPrivateFieldSet:zV,__createBinding:OV,__decorate:SV,__exportStar:RV,__extends:CV,__generator:IV,__importDefault:$V,__importStar:MV,__makeTemplateObject:LV,__metadata:NV,__param:xV,__read:s6,__rest:_V,__spread:DV,__spreadArrays:PV,__values:L2},Symbol.toStringTag,{value:"Module"})),by=A9(HV);var MC={},tm={},qR;function jV(){if(qR)return tm;qR=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return tm.delay=n,tm}var tu={},$C={},nu={},GR;function qV(){return GR||(GR=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.ONE_THOUSAND=nu.ONE_HUNDRED=void 0,nu.ONE_HUNDRED=100,nu.ONE_THOUSAND=1e3),nu}var FC={},VR;function GV(){return VR||(VR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(FC)),FC}var KR;function i6(){return KR||(KR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=by;e.__exportStar(qV(),n),e.__exportStar(GV(),n)}($C)),$C}var WR;function VV(){if(WR)return tu;WR=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.fromMiliseconds=tu.toMiliseconds=void 0;const n=i6();function e(r){return r*n.ONE_THOUSAND}tu.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return tu.fromMiliseconds=t,tu}var YR;function KV(){return YR||(YR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=by;e.__exportStar(jV(),n),e.__exportStar(VV(),n)}(MC)),MC}var Nd={},QR;function WV(){if(QR)return Nd;QR=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:s})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return Nd.Watch=n,Nd.default=n,Nd}var zC={},nm={},ZR;function YV(){if(ZR)return nm;ZR=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.IWatch=void 0;class n{}return nm.IWatch=n,nm}var XR;function QV(){return XR||(XR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),by.__exportStar(YV(),n)}(zC)),zC}var JR;function ZV(){return JR||(JR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=by;e.__exportStar(KV(),n),e.__exportStar(WV(),n),e.__exportStar(QV(),n),e.__exportStar(i6(),n)}(LC)),LC}var Se=ZV();class Rh{}let XV=class extends Rh{constructor(e){super()}};const eD=Se.FIVE_SECONDS,Dh={pulse:"heartbeat_pulse"};let JV=class a6 extends XV{constructor(e){super(e),this.events=new _i.EventEmitter,this.interval=eD,this.interval=(e==null?void 0:e.interval)||eD}static async init(e){const t=new a6(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Se.toMiliseconds(this.interval))}pulse(){this.events.emit(Dh.pulse)}};const eK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,tK=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,nK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function rK(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){sK(n);return}return e}function sK(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function hb(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!nK.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(eK.test(n)||tK.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,rK)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function iK(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function Xn(n,...e){try{return iK(n(...e))}catch(t){return Promise.reject(t)}}function aK(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function oK(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Hb(n){if(aK(n))return String(n);if(oK(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Hb(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const M2="base64:";function cK(n){return typeof n=="string"?n:M2+hK(n)}function lK(n){return typeof n!="string"||!n.startsWith(M2)?n:uK(n.slice(M2.length))}function uK(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function hK(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function hs(n){var e;return n&&((e=n.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function dK(...n){return hs(n.join(":"))}function db(n){return n=hs(n),n?n+":":""}function fK(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function pK(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const gK="memory",mK=()=>{const n=new Map;return{name:gK,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function yK(n={}){const e={mounts:{"":n.driver||mK()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=d=>{for(const p of e.mountpoints)if(d.startsWith(p))return{base:p,relativeKey:d.slice(p.length),driver:e.mounts[p]};return{base:"",relativeKey:d,driver:e.mounts[""]}},r=(d,p)=>e.mountpoints.filter(g=>g.startsWith(d)||p&&d.startsWith(g)).map(g=>({relativeBase:d.length>g.length?d.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),s=(d,p)=>{if(e.watching){p=hs(p);for(const g of e.watchListeners)g(d,p)}},i=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await tD(e.mounts[d],s,d)}},o=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},l=(d,p,g)=>{const y=new Map,b=E=>{let v=y.get(E.base);return v||(v={driver:E.driver,base:E.base,items:[]},y.set(E.base,v)),v};for(const E of d){const v=typeof E=="string",A=hs(v?E:E.key),S=v?void 0:E.value,T=v||!E.options?p:{...p,...E.options},N=t(A);b(N).items.push({key:A,value:S,relativeKey:N.relativeKey,options:T})}return Promise.all([...y.values()].map(E=>g(E))).then(E=>E.flat())},h={hasItem(d,p={}){d=hs(d);const{relativeKey:g,driver:y}=t(d);return Xn(y.hasItem,g,p)},getItem(d,p={}){d=hs(d);const{relativeKey:g,driver:y}=t(d);return Xn(y.getItem,g,p).then(b=>hb(b))},getItems(d,p={}){return l(d,p,g=>g.driver.getItems?Xn(g.driver.getItems,g.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(b=>({key:dK(g.base,b.key),value:hb(b.value)}))):Promise.all(g.items.map(y=>Xn(g.driver.getItem,y.relativeKey,y.options).then(b=>({key:y.key,value:hb(b)})))))},getItemRaw(d,p={}){d=hs(d);const{relativeKey:g,driver:y}=t(d);return y.getItemRaw?Xn(y.getItemRaw,g,p):Xn(y.getItem,g,p).then(b=>lK(b))},async setItem(d,p,g={}){if(p===void 0)return h.removeItem(d);d=hs(d);const{relativeKey:y,driver:b}=t(d);b.setItem&&(await Xn(b.setItem,y,Hb(p),g),b.watch||s("update",d))},async setItems(d,p){await l(d,p,async g=>{if(g.driver.setItems)return Xn(g.driver.setItems,g.items.map(y=>({key:y.relativeKey,value:Hb(y.value),options:y.options})),p);g.driver.setItem&&await Promise.all(g.items.map(y=>Xn(g.driver.setItem,y.relativeKey,Hb(y.value),y.options)))})},async setItemRaw(d,p,g={}){if(p===void 0)return h.removeItem(d,g);d=hs(d);const{relativeKey:y,driver:b}=t(d);if(b.setItemRaw)await Xn(b.setItemRaw,y,p,g);else if(b.setItem)await Xn(b.setItem,y,cK(p),g);else return;b.watch||s("update",d)},async removeItem(d,p={}){typeof p=="boolean"&&(p={removeMeta:p}),d=hs(d);const{relativeKey:g,driver:y}=t(d);y.removeItem&&(await Xn(y.removeItem,g,p),(p.removeMeta||p.removeMata)&&await Xn(y.removeItem,g+"$",p),y.watch||s("remove",d))},async getMeta(d,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),d=hs(d);const{relativeKey:g,driver:y}=t(d),b=Object.create(null);if(y.getMeta&&Object.assign(b,await Xn(y.getMeta,g,p)),!p.nativeOnly){const E=await Xn(y.getItem,g+"$",p).then(v=>hb(v));E&&typeof E=="object"&&(typeof E.atime=="string"&&(E.atime=new Date(E.atime)),typeof E.mtime=="string"&&(E.mtime=new Date(E.mtime)),Object.assign(b,E))}return b},setMeta(d,p,g={}){return this.setItem(d+"$",p,g)},removeMeta(d,p={}){return this.removeItem(d+"$",p)},async getKeys(d,p={}){var A;d=db(d);const g=r(d,!0);let y=[];const b=[];let E=!0;for(const S of g){(A=S.driver.flags)!=null&&A.maxDepth||(E=!1);const T=await Xn(S.driver.getKeys,S.relativeBase,p);for(const N of T){const k=S.mountpoint+hs(N);y.some(R=>k.startsWith(R))||b.push(k)}y=[S.mountpoint,...y.filter(N=>!N.startsWith(S.mountpoint))]}const v=p.maxDepth!==void 0&&!E;return b.filter(S=>(!v||fK(S,p.maxDepth))&&pK(S,d))},async clear(d,p={}){d=db(d),await Promise.all(r(d,!1).map(async g=>{if(g.driver.clear)return Xn(g.driver.clear,g.relativeBase,p);if(g.driver.removeItem){const y=await g.driver.getKeys(g.relativeBase||"",p);return Promise.all(y.map(b=>g.driver.removeItem(b,p)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>nD(d)))},async watch(d){return await i(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(p=>p!==d),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(d,p){if(d=db(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((g,y)=>y.length-g.length)),e.mounts[d]=p,e.watching&&Promise.resolve(tD(p,s,d)).then(g=>{e.unwatch[d]=g}).catch(console.error),h},async unmount(d,p=!0){var g,y;d=db(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&((y=(g=e.unwatch)[d])==null||y.call(g),delete e.unwatch[d]),p&&await nD(e.mounts[d]),e.mountpoints=e.mountpoints.filter(b=>b!==d),delete e.mounts[d])},getMount(d=""){d=hs(d)+":";const p=t(d);return{driver:p.driver,base:p.base}},getMounts(d="",p={}){return d=hs(d),r(d,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(d,p={})=>h.getKeys(d,p),get:(d,p={})=>h.getItem(d,p),set:(d,p,g={})=>h.setItem(d,p,g),has:(d,p={})=>h.hasItem(d,p),del:(d,p={})=>h.removeItem(d,p),remove:(d,p={})=>h.removeItem(d,p)};return h}function tD(n,e,t){return n.watch?n.watch((r,s)=>e(r,t+s)):()=>{}}async function nD(n){typeof n.dispose=="function"&&await Xn(n.dispose)}function Ph(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function o6(n,e){let t;const r=()=>{if(t)return t;const s=indexedDB.open(n);return s.onupgradeneeded=()=>s.result.createObjectStore(e),t=Ph(s),t.then(i=>{i.onclose=()=>t=void 0},()=>{}),t};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let HC;function Ey(){return HC||(HC=o6("keyval-store","keyval")),HC}function rD(n,e=Ey()){return e("readonly",t=>Ph(t.get(n)))}function wK(n,e,t=Ey()){return t("readwrite",r=>(r.put(e,n),Ph(r.transaction)))}function bK(n,e=Ey()){return e("readwrite",t=>(t.delete(n),Ph(t.transaction)))}function EK(n=Ey()){return n("readwrite",e=>(e.clear(),Ph(e.transaction)))}function vK(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ph(n.transaction)}function AK(n=Ey()){return n("readonly",e=>{if(e.getAllKeys)return Ph(e.getAllKeys());const t=[];return vK(e,r=>t.push(r.key)).then(()=>t)})}const CK=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),_K=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function yh(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return _K(n)}catch{return n}}function Ko(n){return typeof n=="string"?n:CK(n)||""}const SK="idb-keyval";var xK=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=s=>e+s;let r;return n.dbName&&n.storeName&&(r=o6(n.dbName,n.storeName)),{name:SK,options:n,async hasItem(s){return!(typeof await rD(t(s),r)>"u")},async getItem(s){return await rD(t(s),r)??null},setItem(s,i){return wK(t(s),i,r)},removeItem(s){return bK(t(s),r)},getKeys(){return AK(r)},clear(){return EK(r)}}};const NK="WALLET_CONNECT_V2_INDEXED_DB",TK="keyvaluestorage";let IK=class{constructor(){this.indexedDb=yK({driver:xK({dbName:NK,storeName:TK})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ko(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var jC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jb={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof jC<"u"&&jC.localStorage?jb.exports=jC.localStorage:typeof window<"u"&&window.localStorage?jb.exports=window.localStorage:jb.exports=new e})();function OK(n){var e;return[n[0],yh((e=n[1])!=null?e:"")]}let RK=class{constructor(){this.localStorage=jb.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(OK)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return yh(t)}async setItem(e,t){this.localStorage.setItem(e,Ko(t))}async removeItem(e){this.localStorage.removeItem(e)}};const DK="wc_storage_version",sD=1,PK=async(n,e,t)=>{const r=DK,s=await e.getItem(r);if(s&&s>=sD){t(e);return}const i=await n.getKeys();if(!i.length){t(e);return}const o=[];for(;i.length;){const l=i.shift();if(!l)continue;const h=l.toLowerCase();if(h.includes("wc@")||h.includes("walletconnect")||h.includes("wc_")||h.includes("wallet_connect")){const d=await n.getItem(l);await e.setItem(l,d),o.push(l)}}await e.setItem(r,sD),t(e),UK(n,o)},UK=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let kK=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new RK;this.storage=e;try{const t=new IK;PK(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var qC,iD;function BK(){if(iD)return qC;iD=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}qC=e;function e(t,r,s){var i=s&&s.stringify||n,o=1;if(typeof t=="object"&&t!==null){var l=r.length+o;if(l===1)return t;var h=new Array(l);h[0]=i(t);for(var d=1;d<l;d++)h[d]=i(r[d]);return h.join(" ")}if(typeof t!="string")return t;var p=r.length;if(p===0)return t;for(var g="",y=1-o,b=-1,E=t&&t.length||0,v=0;v<E;){if(t.charCodeAt(v)===37&&v+1<E){switch(b=b>-1?b:0,t.charCodeAt(v+1)){case 100:case 102:if(y>=p||r[y]==null)break;b<v&&(g+=t.slice(b,v)),g+=Number(r[y]),b=v+2,v++;break;case 105:if(y>=p||r[y]==null)break;b<v&&(g+=t.slice(b,v)),g+=Math.floor(Number(r[y])),b=v+2,v++;break;case 79:case 111:case 106:if(y>=p||r[y]===void 0)break;b<v&&(g+=t.slice(b,v));var A=typeof r[y];if(A==="string"){g+="'"+r[y]+"'",b=v+2,v++;break}if(A==="function"){g+=r[y].name||"<anonymous>",b=v+2,v++;break}g+=i(r[y]),b=v+2,v++;break;case 115:if(y>=p)break;b<v&&(g+=t.slice(b,v)),g+=String(r[y]),b=v+2,v++;break;case 37:b<v&&(g+=t.slice(b,v)),g+="%",b=v+2,v++,y--;break}++y}++v}return b===-1?t:(b<E&&(g+=t.slice(b)),g)}return qC}var GC,aD;function LK(){if(aD)return GC;aD=1;const n=BK();GC=s;const e=R().console||{},t={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:v,wrapResponseSerializer:v,wrapErrorSerializer:v,req:E,res:E,err:y};function r(P,F){return Array.isArray(P)?P.filter(function(B){return B!=="!stdSerializers.err"}):P===!0?Object.keys(F):!1}function s(P){P=P||{},P.browser=P.browser||{};const F=P.browser.transmit;if(F&&typeof F.send!="function")throw Error("pino: transmit option must have a send function");const $=P.browser.write||e;P.browser.write&&(P.browser.asObject=!0);const B=P.serializers||{},H=r(P.browser.serialize,B);let j=P.browser.serialize;Array.isArray(P.browser.serialize)&&P.browser.serialize.indexOf("!stdSerializers.err")>-1&&(j=!1);const W=["error","fatal","warn","info","debug","trace"];typeof $=="function"&&($.error=$.fatal=$.warn=$.info=$.debug=$.trace=$),P.enabled===!1&&(P.level="silent");const ne=P.level||"info",J=Object.create($);J.log||(J.log=A),Object.defineProperty(J,"levelVal",{get:_}),Object.defineProperty(J,"level",{get:L,set:q});const I={transmit:F,serialize:H,asObject:P.browser.asObject,levels:W,timestamp:b(P)};J.levels=s.levels,J.level=ne,J.setMaxListeners=J.getMaxListeners=J.emit=J.addListener=J.on=J.prependListener=J.once=J.prependOnceListener=J.removeListener=J.removeAllListeners=J.listeners=J.listenerCount=J.eventNames=J.write=J.flush=A,J.serializers=B,J._serialize=H,J._stdErrSerialize=j,J.child=K,F&&(J._logEvent=g());function _(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function q(O){if(O!=="silent"&&!this.levels.values[O])throw Error("unknown level "+O);this._level=O,i(I,J,"error","log"),i(I,J,"fatal","error"),i(I,J,"warn","error"),i(I,J,"info","log"),i(I,J,"debug","log"),i(I,J,"trace","log")}function K(O,V){if(!O)throw new Error("missing bindings for child Pino");V=V||{},H&&O.serializers&&(V.serializers=O.serializers);const Z=V.serializers;if(H&&Z){var re=Object.assign({},B,Z),ee=P.browser.serialize===!0?Object.keys(re):H;delete O.serializers,h([O],ee,re,this._stdErrSerialize)}function he(me){this._childLevel=(me._childLevel|0)+1,this.error=d(me,O,"error"),this.fatal=d(me,O,"fatal"),this.warn=d(me,O,"warn"),this.info=d(me,O,"info"),this.debug=d(me,O,"debug"),this.trace=d(me,O,"trace"),re&&(this.serializers=re,this._serialize=ee),F&&(this._logEvent=g([].concat(me._logEvent.bindings,O)))}return he.prototype=this,new he(this)}return J}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:T,unixTime:N,isoTime:k});function i(P,F,$,B){const H=Object.getPrototypeOf(F);F[$]=F.levelVal>F.levels.values[$]?A:H[$]?H[$]:e[$]||e[B]||A,o(P,F,$)}function o(P,F,$){!P.transmit&&F[$]===A||(F[$]=function(B){return function(){const j=P.timestamp(),W=new Array(arguments.length),ne=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var J=0;J<W.length;J++)W[J]=arguments[J];if(P.serialize&&!P.asObject&&h(W,this._serialize,this.serializers,this._stdErrSerialize),P.asObject?B.call(ne,l(this,$,W,j)):B.apply(ne,W),P.transmit){const I=P.transmit.level||F.level,_=s.levels.values[I],L=s.levels.values[$];if(L<_)return;p(this,{ts:j,methodLevel:$,methodValue:L,transmitValue:s.levels.values[P.transmit.level||F.level],send:P.transmit.send,val:F.levelVal},W)}}}(F[$]))}function l(P,F,$,B){P._serialize&&h($,P._serialize,P.serializers,P._stdErrSerialize);const H=$.slice();let j=H[0];const W={};B&&(W.time=B),W.level=s.levels.values[F];let ne=(P._childLevel|0)+1;if(ne<1&&(ne=1),j!==null&&typeof j=="object"){for(;ne--&&typeof H[0]=="object";)Object.assign(W,H.shift());j=H.length?n(H.shift(),H):void 0}else typeof j=="string"&&(j=n(H.shift(),H));return j!==void 0&&(W.msg=j),W}function h(P,F,$,B){for(const H in P)if(B&&P[H]instanceof Error)P[H]=s.stdSerializers.err(P[H]);else if(typeof P[H]=="object"&&!Array.isArray(P[H]))for(const j in P[H])F&&F.indexOf(j)>-1&&j in $&&(P[H][j]=$[j](P[H][j]))}function d(P,F,$){return function(){const B=new Array(1+arguments.length);B[0]=F;for(var H=1;H<B.length;H++)B[H]=arguments[H-1];return P[$].apply(this,B)}}function p(P,F,$){const B=F.send,H=F.ts,j=F.methodLevel,W=F.methodValue,ne=F.val,J=P._logEvent.bindings;h($,P._serialize||Object.keys(P.serializers),P.serializers,P._stdErrSerialize===void 0?!0:P._stdErrSerialize),P._logEvent.ts=H,P._logEvent.messages=$.filter(function(I){return J.indexOf(I)===-1}),P._logEvent.level.label=j,P._logEvent.level.value=W,B(j,P._logEvent,ne),P._logEvent=g(J)}function g(P){return{ts:0,messages:[],bindings:P||[],level:{label:"",value:0}}}function y(P){const F={type:P.constructor.name,msg:P.message,stack:P.stack};for(const $ in P)F[$]===void 0&&(F[$]=P[$]);return F}function b(P){return typeof P.timestamp=="function"?P.timestamp:P.timestamp===!1?S:T}function E(){return{}}function v(P){return P}function A(){}function S(){return!1}function T(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function k(){return new Date(Date.now()).toISOString()}function R(){function P(F){return typeof F<"u"&&F}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return P(self)||P(window)||P(this)||{}}}return GC}var Yd=LK();const vy=iy(Yd),MK={level:"info"},Ay="custom_context",gx=1e3*1024;let $K=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},oD=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new $K(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},c6=class{constructor(e,t=gx){this.level=e??"error",this.levelValue=Yd.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new oD(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Yd.levels.values.error?console.error(e):t===Yd.levels.values.warn?console.warn(e):t===Yd.levels.values.debug?console.debug(e):t===Yd.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ko({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new oD(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Ko({extraMetadata:e})),new Blob(t,{type:"application/json"})}},FK=class{constructor(e,t=gx){this.baseChunkLogger=new c6(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},zK=class{constructor(e,t=gx){this.baseChunkLogger=new c6(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var HK=Object.defineProperty,jK=Object.defineProperties,qK=Object.getOwnPropertyDescriptors,cD=Object.getOwnPropertySymbols,GK=Object.prototype.hasOwnProperty,VK=Object.prototype.propertyIsEnumerable,lD=(n,e,t)=>e in n?HK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,AE=(n,e)=>{for(var t in e||(e={}))GK.call(e,t)&&lD(n,t,e[t]);if(cD)for(var t of cD(e))VK.call(e,t)&&lD(n,t,e[t]);return n},CE=(n,e)=>jK(n,qK(e));function Up(n){return CE(AE({},n),{level:(n==null?void 0:n.level)||MK.level})}function KK(n,e=Ay){return n[e]||""}function WK(n,e,t=Ay){return n[t]=e,n}function Ss(n,e=Ay){let t="";return typeof n.bindings>"u"?t=KK(n,e):t=n.bindings().context||"",t}function YK(n,e,t=Ay){const r=Ss(n,t);return r.trim()?`${r}/${e}`:e}function kr(n,e,t=Ay){const r=YK(n,e,t),s=n.child({context:r});return WK(s,r,t)}function QK(n){var e,t;const r=new FK((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:vy(CE(AE({},n.opts),{level:"trace",browser:CE(AE({},(t=n.opts)==null?void 0:t.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function ZK(n){var e;const t=new zK((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:vy(CE(AE({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function mx(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?QK(n):ZK(n)}var XK=Object.defineProperty,JK=(n,e,t)=>e in n?XK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uD=(n,e,t)=>JK(n,typeof e!="symbol"?e+"":e,t);let eW=class extends Rh{constructor(e){super(),this.opts=e,uD(this,"protocol","wc"),uD(this,"version",2)}};var tW=Object.defineProperty,nW=(n,e,t)=>e in n?tW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rW=(n,e,t)=>nW(n,e+"",t);let sW=class extends Rh{constructor(e,t){super(),this.core=e,this.logger=t,rW(this,"records",new Map)}},iW=class{constructor(e,t){this.logger=e,this.core=t}},aW=class extends Rh{constructor(e,t){super(),this.relayer=e,this.logger=t}},oW=class extends Rh{constructor(e){super()}},cW=class{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}},lW=class extends Rh{constructor(e,t){super(),this.relayer=e,this.logger=t}},uW=class extends Rh{constructor(e,t){super(),this.core=e,this.logger=t}},hW=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},dW=class{constructor(e,t){this.projectId=e,this.logger=t}},fW=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var pW=Object.defineProperty,gW=(n,e,t)=>e in n?pW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hD=(n,e,t)=>gW(n,typeof e!="symbol"?e+"":e,t);let mW=class{constructor(e){this.opts=e,hD(this,"protocol","wc"),hD(this,"version",2)}},yW=class{constructor(e){this.client=e}};function wW(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function l6(n,...e){if(!wW(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function dD(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function bW(n,e){l6(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Td=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const VC=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function EW(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function u6(n){return typeof n=="string"&&(n=EW(n)),l6(n),n}let vW=class{clone(){return this._cloneInto()}};function AW(n){const e=r=>n().update(u6(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function h6(n=32){if(Td&&typeof Td.getRandomValues=="function")return Td.getRandomValues(new Uint8Array(n));if(Td&&typeof Td.randomBytes=="function")return Td.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function CW(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}let _W=class extends vW{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=VC(this.buffer)}update(e){dD(this);const{view:t,buffer:r,blockLen:s}=this;e=u6(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=VC(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dD(this),bW(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;CW(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=VC(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}};const fb=BigInt(2**32-1),$2=BigInt(32);function d6(n,e=!1){return e?{h:Number(n&fb),l:Number(n>>$2&fb)}:{h:Number(n>>$2&fb)|0,l:Number(n&fb)|0}}function SW(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=d6(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const xW=(n,e)=>BigInt(n>>>0)<<$2|BigInt(e>>>0),NW=(n,e,t)=>n>>>t,TW=(n,e,t)=>n<<32-t|e>>>t,IW=(n,e,t)=>n>>>t|e<<32-t,OW=(n,e,t)=>n<<32-t|e>>>t,RW=(n,e,t)=>n<<64-t|e>>>t-32,DW=(n,e,t)=>n>>>t-32|e<<64-t,PW=(n,e)=>e,UW=(n,e)=>n,kW=(n,e,t)=>n<<t|e>>>32-t,BW=(n,e,t)=>e<<t|n>>>32-t,LW=(n,e,t)=>e<<t-32|n>>>64-t,MW=(n,e,t)=>n<<t-32|e>>>64-t;function $W(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const FW=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),zW=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,HW=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),jW=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,qW=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),GW=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,ht={fromBig:d6,split:SW,toBig:xW,shrSH:NW,shrSL:TW,rotrSH:IW,rotrSL:OW,rotrBH:RW,rotrBL:DW,rotr32H:PW,rotr32L:UW,rotlSH:kW,rotlSL:BW,rotlBH:LW,rotlBL:MW,add:$W,add3L:FW,add3H:zW,add4L:HW,add4H:jW,add5H:GW,add5L:qW},[VW,KW]=ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Rc=new Uint32Array(80),Dc=new Uint32Array(80);let WW=class extends _W{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:E,Hh:v,Hl:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=E|0,this.Hh=v|0,this.Hl=A|0}process(e,t){for(let N=0;N<16;N++,t+=4)Rc[N]=e.getUint32(t),Dc[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){const k=Rc[N-15]|0,R=Dc[N-15]|0,P=ht.rotrSH(k,R,1)^ht.rotrSH(k,R,8)^ht.shrSH(k,R,7),F=ht.rotrSL(k,R,1)^ht.rotrSL(k,R,8)^ht.shrSL(k,R,7),$=Rc[N-2]|0,B=Dc[N-2]|0,H=ht.rotrSH($,B,19)^ht.rotrBH($,B,61)^ht.shrSH($,B,6),j=ht.rotrSL($,B,19)^ht.rotrBL($,B,61)^ht.shrSL($,B,6),W=ht.add4L(F,j,Dc[N-7],Dc[N-16]),ne=ht.add4H(W,P,H,Rc[N-7],Rc[N-16]);Rc[N]=ne|0,Dc[N]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:E,Gh:v,Gl:A,Hh:S,Hl:T}=this;for(let N=0;N<80;N++){const k=ht.rotrSH(g,y,14)^ht.rotrSH(g,y,18)^ht.rotrBH(g,y,41),R=ht.rotrSL(g,y,14)^ht.rotrSL(g,y,18)^ht.rotrBL(g,y,41),P=g&b^~g&v,F=y&E^~y&A,$=ht.add5L(T,R,F,KW[N],Dc[N]),B=ht.add5H($,S,k,P,VW[N],Rc[N]),H=$|0,j=ht.rotrSH(r,s,28)^ht.rotrBH(r,s,34)^ht.rotrBH(r,s,39),W=ht.rotrSL(r,s,28)^ht.rotrBL(r,s,34)^ht.rotrBL(r,s,39),ne=r&i^r&l^i&l,J=s&o^s&h^o&h;S=v|0,T=A|0,v=b|0,A=E|0,b=g|0,E=y|0,{h:g,l:y}=ht.add(d|0,p|0,B|0,H|0),d=l|0,p=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const I=ht.add3L(H,W,J);r=ht.add3H(I,B,j,ne),s=I|0}({h:r,l:s}=ht.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ht.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=ht.add(this.Ch|0,this.Cl|0,l|0,h|0),{h:d,l:p}=ht.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=ht.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:E}=ht.add(this.Fh|0,this.Fl|0,b|0,E|0),{h:v,l:A}=ht.add(this.Gh|0,this.Gl|0,v|0,A|0),{h:S,l:T}=ht.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(r,s,i,o,l,h,d,p,g,y,b,E,v,A,S,T)}roundClean(){Rc.fill(0),Dc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const YW=AW(()=>new WW);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yx=BigInt(0),f6=BigInt(1),QW=BigInt(2);function wx(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function bx(n){if(!wx(n))throw new Error("Uint8Array expected")}function KC(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const ZW=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ex(n){bx(n);let e="";for(let t=0;t<n.length;t++)e+=ZW[n[t]];return e}function p6(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?yx:BigInt("0x"+n)}const ho={_0:48,_9:57,A:65,F:70,a:97,f:102};function fD(n){if(n>=ho._0&&n<=ho._9)return n-ho._0;if(n>=ho.A&&n<=ho.F)return n-(ho.A-10);if(n>=ho.a&&n<=ho.f)return n-(ho.a-10)}function g6(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=fD(n.charCodeAt(i)),l=fD(n.charCodeAt(i+1));if(o===void 0||l===void 0){const h=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}r[s]=o*16+l}return r}function XW(n){return p6(Ex(n))}function qb(n){return bx(n),p6(Ex(Uint8Array.from(n).reverse()))}function m6(n,e){return g6(n.toString(16).padStart(e*2,"0"))}function F2(n,e){return m6(n,e).reverse()}function fo(n,e,t){let r;if(typeof e=="string")try{r=g6(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(wx(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}function pD(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];bx(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}const WC=n=>typeof n=="bigint"&&yx<=n;function JW(n,e,t){return WC(n)&&WC(e)&&WC(t)&&e<=n&&n<t}function rm(n,e,t,r){if(!JW(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function eY(n){let e;for(e=0;n>yx;n>>=f6,e+=1);return e}const tY=n=>(QW<<BigInt(n-1))-f6,nY={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||wx(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function vx(n,e,t={}){const r=(s,i,o)=>{const l=nY[i];if(typeof l!="function")throw new Error("invalid validator function");const h=n[s];if(!(o&&h===void 0)&&!l(h,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+h)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}function gD(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const ir=BigInt(0),Rn=BigInt(1),pu=BigInt(2),rY=BigInt(3),z2=BigInt(4),mD=BigInt(5),yD=BigInt(8);function jn(n,e){const t=n%e;return t>=ir?t:e+t}function sY(n,e,t){if(e<ir)throw new Error("invalid exponent, negatives unsupported");if(t<=ir)throw new Error("invalid modulus");if(t===Rn)return ir;let r=Rn;for(;e>ir;)e&Rn&&(r=r*n%t),n=n*n%t,e>>=Rn;return r}function fa(n,e,t){let r=n;for(;e-- >ir;)r*=r,r%=t;return r}function wD(n,e){if(n===ir)throw new Error("invert: expected non-zero number");if(e<=ir)throw new Error("invert: expected positive modulus, got "+e);let t=jn(n,e),r=e,s=ir,i=Rn;for(;t!==ir;){const o=r/t,l=r%t,h=s-i*o;r=t,t=l,s=i,i=h}if(r!==Rn)throw new Error("invert: does not exist");return jn(s,e)}function iY(n){const e=(n-Rn)/pu;let t,r,s;for(t=n-Rn,r=0;t%pu===ir;t/=pu,r++);for(s=pu;s<n&&sY(s,e,n)!==n-Rn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+Rn)/z2;return function(l,h){const d=l.pow(h,o);if(!l.eql(l.sqr(d),h))throw new Error("Cannot find square root");return d}}const i=(t+Rn)/pu;return function(o,l){if(o.pow(l,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let h=r,d=o.pow(o.mul(o.ONE,s),t),p=o.pow(l,i),g=o.pow(l,t);for(;!o.eql(g,o.ONE);){if(o.eql(g,o.ZERO))return o.ZERO;let y=1;for(let E=o.sqr(g);y<h&&!o.eql(E,o.ONE);y++)E=o.sqr(E);const b=o.pow(d,Rn<<BigInt(h-y-1));d=o.sqr(b),p=o.mul(p,b),g=o.mul(g,d),h=y}return p}}function aY(n){if(n%z2===rY){const e=(n+Rn)/z2;return function(t,r){const s=t.pow(r,e);if(!t.eql(t.sqr(s),r))throw new Error("Cannot find square root");return s}}if(n%yD===mD){const e=(n-mD)/yD;return function(t,r){const s=t.mul(r,pu),i=t.pow(s,e),o=t.mul(r,i),l=t.mul(t.mul(o,pu),i),h=t.mul(o,t.sub(l,t.ONE));if(!t.eql(t.sqr(h),r))throw new Error("Cannot find square root");return h}}return iY(n)}const oY=(n,e)=>(jn(n,e)&Rn)===Rn,cY=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lY(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=cY.reduce((r,s)=>(r[s]="function",r),e);return vx(n,t)}function uY(n,e,t){if(t<ir)throw new Error("invalid exponent, negatives unsupported");if(t===ir)return n.ONE;if(t===Rn)return e;let r=n.ONE,s=e;for(;t>ir;)t&Rn&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Rn;return r}function hY(n,e){const t=new Array(e.length),r=e.reduce((i,o,l)=>n.is0(o)?i:(t[l]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,l)=>n.is0(o)?i:(t[l]=n.mul(i,t[l]),n.mul(i,o)),s),t}function y6(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function w6(n,e,t=!1,r={}){if(n<=ir)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=y6(n,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const l=Object.freeze({ORDER:n,isLE:t,BITS:s,BYTES:i,MASK:tY(s),ZERO:ir,ONE:Rn,create:h=>jn(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return ir<=h&&h<n},is0:h=>h===ir,isOdd:h=>(h&Rn)===Rn,neg:h=>jn(-h,n),eql:(h,d)=>h===d,sqr:h=>jn(h*h,n),add:(h,d)=>jn(h+d,n),sub:(h,d)=>jn(h-d,n),mul:(h,d)=>jn(h*d,n),pow:(h,d)=>uY(l,h,d),div:(h,d)=>jn(h*wD(d,n),n),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>wD(h,n),sqrt:r.sqrt||(h=>(o||(o=aY(n)),o(l,h))),invertBatch:h=>hY(l,h),cmov:(h,d,p)=>p?d:h,toBytes:h=>t?F2(h,i):m6(h,i),fromBytes:h=>{if(h.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+h.length);return t?qb(h):XW(h)}});return Object.freeze(l)}const bD=BigInt(0),pb=BigInt(1);function YC(n,e){const t=e.negate();return n?t:e}function b6(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function QC(n,e){b6(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function dY(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function fY(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const ZC=new WeakMap,E6=new WeakMap;function XC(n){return E6.get(n)||1}function pY(n,e){return{constTimeNegate:YC,hasPrecomputes(t){return XC(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>bD;)r&pb&&(s=s.add(i)),i=i.double(),r>>=pb;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=QC(r,e),o=[];let l=t,h=l;for(let d=0;d<s;d++){h=l,o.push(h);for(let p=1;p<i;p++)h=h.add(l),o.push(h);l=h.double()}return o},wNAF(t,r,s){const{windows:i,windowSize:o}=QC(t,e);let l=n.ZERO,h=n.BASE;const d=BigInt(2**t-1),p=2**t,g=BigInt(t);for(let y=0;y<i;y++){const b=y*o;let E=Number(s&d);s>>=g,E>o&&(E-=p,s+=pb);const v=b,A=b+Math.abs(E)-1,S=y%2!==0,T=E<0;E===0?h=h.add(YC(S,r[v])):l=l.add(YC(T,r[A]))}return{p:l,f:h}},wNAFUnsafe(t,r,s,i=n.ZERO){const{windows:o,windowSize:l}=QC(t,e),h=BigInt(2**t-1),d=2**t,p=BigInt(t);for(let g=0;g<o;g++){const y=g*l;if(s===bD)break;let b=Number(s&h);if(s>>=p,b>l&&(b-=d,s+=pb),b===0)continue;let E=r[y+Math.abs(b)-1];b<0&&(E=E.negate()),i=i.add(E)}return i},getPrecomputes(t,r,s){let i=ZC.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&ZC.set(r,s(i))),i},wNAFCached(t,r,s){const i=XC(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=XC(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){b6(r,e),E6.set(t,r),ZC.delete(t)}}}function gY(n,e,t,r){if(dY(t,n),fY(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,i=eY(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,l=(1<<o)-1,h=new Array(l+1).fill(s),d=Math.floor((e.BITS-1)/o)*o;let p=s;for(let g=d;g>=0;g-=o){h.fill(s);for(let b=0;b<r.length;b++){const E=r[b],v=Number(E>>BigInt(g)&BigInt(l));h[v]=h[v].add(t[b])}let y=s;for(let b=h.length-1,E=s;b>0;b--)E=E.add(h[b]),y=y.add(E);if(p=p.add(y),g!==0)for(let b=0;b<o;b++)p=p.double()}return p}function mY(n){return lY(n.Fp),vx(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...y6(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const Oi=BigInt(0),os=BigInt(1),gb=BigInt(2),yY=BigInt(8),wY={zip215:!0};function bY(n){const e=mY(n);return vx(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function EY(n){const e=bY(n),{Fp:t,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:l,h}=e,d=gb<<BigInt(l*8)-os,p=t.create,g=w6(e.n,e.nBitLength),y=e.uvRatio||((I,_)=>{try{return{isValid:!0,value:t.sqrt(I*t.inv(_))}}catch{return{isValid:!1,value:Oi}}}),b=e.adjustScalarBytes||(I=>I),E=e.domain||((I,_,L)=>{if(KC("phflag",L),_.length||L)throw new Error("Contexts/pre-hash are not supported");return I});function v(I,_){rm("coordinate "+I,_,Oi,d)}function A(I){if(!(I instanceof N))throw new Error("ExtendedPoint expected")}const S=gD((I,_)=>{const{ex:L,ey:q,ez:K}=I,O=I.is0();_==null&&(_=O?yY:t.inv(K));const V=p(L*_),Z=p(q*_),re=p(K*_);if(O)return{x:Oi,y:os};if(re!==os)throw new Error("invZ was invalid");return{x:V,y:Z}}),T=gD(I=>{const{a:_,d:L}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:q,ey:K,ez:O,et:V}=I,Z=p(q*q),re=p(K*K),ee=p(O*O),he=p(ee*ee),me=p(Z*_),Ce=p(ee*p(me+re)),Pe=p(he+p(L*p(Z*re)));if(Ce!==Pe)throw new Error("bad point: equation left != right (1)");const Ne=p(q*K),Qe=p(O*V);if(Ne!==Qe)throw new Error("bad point: equation left != right (2)");return!0});class N{constructor(_,L,q,K){this.ex=_,this.ey=L,this.ez=q,this.et=K,v("x",_),v("y",L),v("z",q),v("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof N)throw new Error("extended point not allowed");const{x:L,y:q}=_||{};return v("x",L),v("y",q),new N(L,q,os,p(L*q))}static normalizeZ(_){const L=t.invertBatch(_.map(q=>q.ez));return _.map((q,K)=>q.toAffine(L[K])).map(N.fromAffine)}static msm(_,L){return gY(N,g,_,L)}_setWindowSize(_){P.setWindowSize(this,_)}assertValidity(){T(this)}equals(_){A(_);const{ex:L,ey:q,ez:K}=this,{ex:O,ey:V,ez:Z}=_,re=p(L*Z),ee=p(O*K),he=p(q*Z),me=p(V*K);return re===ee&&he===me}is0(){return this.equals(N.ZERO)}negate(){return new N(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:_}=e,{ex:L,ey:q,ez:K}=this,O=p(L*L),V=p(q*q),Z=p(gb*p(K*K)),re=p(_*O),ee=L+q,he=p(p(ee*ee)-O-V),me=re+V,Ce=me-Z,Pe=re-V,Ne=p(he*Ce),Qe=p(me*Pe),Qt=p(he*Pe),Lt=p(Ce*me);return new N(Ne,Qe,Lt,Qt)}add(_){A(_);const{a:L,d:q}=e,{ex:K,ey:O,ez:V,et:Z}=this,{ex:re,ey:ee,ez:he,et:me}=_;if(L===BigInt(-1)){const jp=p((O-K)*(ee+re)),qp=p((O+K)*(ee-re)),Xo=p(qp-jp);if(Xo===Oi)return this.double();const Dy=p(V*gb*me),Gp=p(Z*gb*he),Py=Gp+Dy,Uy=qp+jp,Jo=Gp-Dy,Br=p(Py*Xo),sa=p(Uy*Jo),Lr=p(Py*Jo),qv=p(Xo*Uy);return new N(Br,sa,qv,Lr)}const Ce=p(K*re),Pe=p(O*ee),Ne=p(Z*q*me),Qe=p(V*he),Qt=p((K+O)*(re+ee)-Ce-Pe),Lt=Qe-Ne,wn=Qe+Ne,fn=p(Pe-L*Ce),ra=p(Qt*Lt),Bh=p(wn*fn),Qs=p(Qt*fn),jv=p(Lt*wn);return new N(ra,Bh,jv,Qs)}subtract(_){return this.add(_.negate())}wNAF(_){return P.wNAFCached(this,_,N.normalizeZ)}multiply(_){const L=_;rm("scalar",L,os,r);const{p:q,f:K}=this.wNAF(L);return N.normalizeZ([q,K])[0]}multiplyUnsafe(_,L=N.ZERO){const q=_;return rm("scalar",q,Oi,r),q===Oi?R:this.is0()||q===os?this:P.wNAFCachedUnsafe(this,q,N.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return P.unsafeLadder(this,r).is0()}toAffine(_){return S(this,_)}clearCofactor(){const{h:_}=e;return _===os?this:this.multiplyUnsafe(_)}static fromHex(_,L=!1){const{d:q,a:K}=e,O=t.BYTES;_=fo("pointHex",_,O),KC("zip215",L);const V=_.slice(),Z=_[O-1];V[O-1]=Z&-129;const re=qb(V),ee=L?d:t.ORDER;rm("pointHex.y",re,Oi,ee);const he=p(re*re),me=p(he-os),Ce=p(q*he-K);let{isValid:Pe,value:Ne}=y(me,Ce);if(!Pe)throw new Error("Point.fromHex: invalid y coordinate");const Qe=(Ne&os)===os,Qt=(Z&128)!==0;if(!L&&Ne===Oi&&Qt)throw new Error("Point.fromHex: x=0 and x_0=1");return Qt!==Qe&&(Ne=p(-Ne)),N.fromAffine({x:Ne,y:re})}static fromPrivateKey(_){return B(_).point}toRawBytes(){const{x:_,y:L}=this.toAffine(),q=F2(L,t.BYTES);return q[q.length-1]|=_&os?128:0,q}toHex(){return Ex(this.toRawBytes())}}N.BASE=new N(e.Gx,e.Gy,os,p(e.Gx*e.Gy)),N.ZERO=new N(Oi,os,os,Oi);const{BASE:k,ZERO:R}=N,P=pY(N,l*8);function F(I){return jn(I,r)}function $(I){return F(qb(I))}function B(I){const _=t.BYTES;I=fo("private key",I,_);const L=fo("hashed private key",i(I),2*_),q=b(L.slice(0,_)),K=L.slice(_,2*_),O=$(q),V=k.multiply(O),Z=V.toRawBytes();return{head:q,prefix:K,scalar:O,point:V,pointBytes:Z}}function H(I){return B(I).pointBytes}function j(I=new Uint8Array,..._){const L=pD(..._);return $(i(E(L,fo("context",I),!!s)))}function W(I,_,L={}){I=fo("message",I),s&&(I=s(I));const{prefix:q,scalar:K,pointBytes:O}=B(_),V=j(L.context,q,I),Z=k.multiply(V).toRawBytes(),re=j(L.context,Z,O,I),ee=F(V+re*K);rm("signature.s",ee,Oi,r);const he=pD(Z,F2(ee,t.BYTES));return fo("result",he,t.BYTES*2)}const ne=wY;function J(I,_,L,q=ne){const{context:K,zip215:O}=q,V=t.BYTES;I=fo("signature",I,2*V),_=fo("message",_),L=fo("publicKey",L,V),O!==void 0&&KC("zip215",O),s&&(_=s(_));const Z=qb(I.slice(V,2*V));let re,ee,he;try{re=N.fromHex(L,O),ee=N.fromHex(I.slice(0,V),O),he=k.multiplyUnsafe(Z)}catch{return!1}if(!O&&re.isSmallOrder())return!1;const me=j(K,ee.toRawBytes(),re.toRawBytes(),_);return ee.add(re.multiplyUnsafe(me)).subtract(he).clearCofactor().equals(N.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:H,sign:W,verify:J,ExtendedPoint:N,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(t.BYTES),precompute(I=8,_=N.BASE){return _._setWindowSize(I),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const Ax=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const vY=BigInt(1),vD=BigInt(2);BigInt(3);const AY=BigInt(5),CY=BigInt(8);function _Y(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=Ax,o=n*n%i*n%i,l=fa(o,vD,i)*o%i,h=fa(l,vY,i)*n%i,d=fa(h,AY,i)*h%i,p=fa(d,e,i)*d%i,g=fa(p,t,i)*p%i,y=fa(g,r,i)*g%i,b=fa(y,s,i)*y%i,E=fa(b,s,i)*y%i,v=fa(E,e,i)*d%i;return{pow_p_5_8:fa(v,vD,i)*n%i,b2:o}}function SY(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function xY(n,e){const t=Ax,r=jn(e*e*e,t),s=jn(r*r*e,t),i=_Y(n*s).pow_p_5_8;let o=jn(n*r*i,t);const l=jn(e*o*o,t),h=o,d=jn(o*ED,t),p=l===n,g=l===jn(-n,t),y=l===jn(-n*ED,t);return p&&(o=h),(g||y)&&(o=d),oY(o,t)&&(o=jn(-o,t)),{isValid:p||g,value:o}}const NY=w6(Ax,void 0,!0),TY={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:NY,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:CY,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:YW,randomBytes:h6,adjustScalarBytes:SY,uvRatio:xY},v6=EY(TY),IY="EdDSA",OY="JWT",_E=".",Cv="base64url",A6="utf8",C6="utf8",RY=":",DY="did",PY="key",AD="base58btc",UY="z",kY="K36",BY=32;function Cx(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function _6(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Cx(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function S6(n,e){e||(e=n.reduce((s,i)=>s+i.length,0));const t=_6(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return Cx(t)}function LY(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,h=n.charAt(0),d=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var v=0,A=0,S=0,T=E.length;S!==T&&E[S]===0;)S++,v++;for(var N=(T-S)*p+1>>>0,k=new Uint8Array(N);S!==T;){for(var R=E[S],P=0,F=N-1;(R!==0||P<A)&&F!==-1;F--,P++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=P,S++}for(var $=N-A;$!==N&&k[$]===0;)$++;for(var B=h.repeat(v);$<N;++$)B+=n.charAt(k[$]);return B}function y(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var v=0;if(E[v]!==" "){for(var A=0,S=0;E[v]===h;)A++,v++;for(var T=(E.length-v)*d+1>>>0,N=new Uint8Array(T);E[v];){var k=t[E.charCodeAt(v)];if(k===255)return;for(var R=0,P=T-1;(k!==0||R<S)&&P!==-1;P--,R++)k+=l*N[P]>>>0,N[P]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,v++}if(E[v]!==" "){for(var F=T-S;F!==T&&N[F]===0;)F++;for(var $=new Uint8Array(A+(T-F)),B=A;F!==T;)$[B++]=N[F++];return $}}}function b(E){var v=y(E);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var MY=LY,$Y=MY;const x6=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},FY=n=>new TextEncoder().encode(n),zY=n=>new TextDecoder().decode(n);let HY=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},jY=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return N6(this,e)}},qY=class{constructor(e){this.decoders=e}or(e){return N6(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const N6=(n,e)=>new qY({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let GY=class{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new HY(e,t,r),this.decoder=new jY(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const _v=({name:n,prefix:e,encode:t,decode:r})=>new GY(n,e,t,r),Cy=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=$Y(t,e);return _v({prefix:n,name:e,encode:r,decode:i=>x6(s(i))})},VY=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,h=0,d=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|g,l+=t,l>=8&&(l-=8,o[d++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return o},KY=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let h=0;h<n.length;++h)for(l=l<<8|n[h],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},br=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>_v({prefix:e,name:n,encode(s){return KY(s,r,t)},decode(s){return VY(s,r,t,n)}}),WY=_v({prefix:"\0",name:"identity",encode:n=>zY(n),decode:n=>FY(n)});var YY=Object.freeze({__proto__:null,identity:WY});const QY=br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ZY=Object.freeze({__proto__:null,base2:QY});const XY=br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var JY=Object.freeze({__proto__:null,base8:XY});const eQ=Cy({prefix:"9",name:"base10",alphabet:"0123456789"});var tQ=Object.freeze({__proto__:null,base10:eQ});const nQ=br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rQ=br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var sQ=Object.freeze({__proto__:null,base16:nQ,base16upper:rQ});const iQ=br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aQ=br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oQ=br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cQ=br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lQ=br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uQ=br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hQ=br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dQ=br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fQ=br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pQ=Object.freeze({__proto__:null,base32:iQ,base32upper:aQ,base32pad:oQ,base32padupper:cQ,base32hex:lQ,base32hexupper:uQ,base32hexpad:hQ,base32hexpadupper:dQ,base32z:fQ});const gQ=Cy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mQ=Cy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var yQ=Object.freeze({__proto__:null,base36:gQ,base36upper:mQ});const wQ=Cy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bQ=Cy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var EQ=Object.freeze({__proto__:null,base58btc:wQ,base58flickr:bQ});const vQ=br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),AQ=br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),CQ=br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_Q=br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var SQ=Object.freeze({__proto__:null,base64:vQ,base64pad:AQ,base64url:CQ,base64urlpad:_Q});const T6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),xQ=T6.reduce((n,e,t)=>(n[t]=e,n),[]),NQ=T6.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function TQ(n){return n.reduce((e,t)=>(e+=xQ[t],e),"")}function IQ(n){const e=[];for(const t of n){const r=NQ[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const OQ=_v({prefix:"🚀",name:"base256emoji",encode:TQ,decode:IQ});var RQ=Object.freeze({__proto__:null,base256emoji:OQ}),DQ=I6,CD=128,PQ=-128,UQ=Math.pow(2,31);function I6(n,e,t){e=e||[],t=t||0;for(var r=t;n>=UQ;)e[t++]=n&255|CD,n/=128;for(;n&PQ;)e[t++]=n&255|CD,n>>>=7;return e[t]=n|0,I6.bytes=t-r+1,e}var kQ=H2,BQ=128,_D=127;function H2(n,r){var t=0,r=r||0,s=0,i=r,o,l=n.length;do{if(i>=l)throw H2.bytes=0,new RangeError("Could not decode varint");o=n[i++],t+=s<28?(o&_D)<<s:(o&_D)*Math.pow(2,s),s+=7}while(o>=BQ);return H2.bytes=i-r,t}var LQ=Math.pow(2,7),MQ=Math.pow(2,14),$Q=Math.pow(2,21),FQ=Math.pow(2,28),zQ=Math.pow(2,35),HQ=Math.pow(2,42),jQ=Math.pow(2,49),qQ=Math.pow(2,56),GQ=Math.pow(2,63),VQ=function(n){return n<LQ?1:n<MQ?2:n<$Q?3:n<FQ?4:n<zQ?5:n<HQ?6:n<jQ?7:n<qQ?8:n<GQ?9:10},KQ={encode:DQ,decode:kQ,encodingLength:VQ},O6=KQ;const SD=(n,e,t=0)=>(O6.encode(n,e,t),e),xD=n=>O6.encodingLength(n),j2=(n,e)=>{const t=e.byteLength,r=xD(n),s=r+xD(t),i=new Uint8Array(s+t);return SD(n,i,0),SD(t,i,r),i.set(e,s),new WQ(n,t,e,i)};let WQ=class{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}};const R6=({name:n,code:e,encode:t})=>new YQ(n,e,t);let YQ=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?j2(this.code,t):t.then(r=>j2(this.code,r))}else throw Error("Unknown type, must be binary type")}};const D6=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),QQ=R6({name:"sha2-256",code:18,encode:D6("SHA-256")}),ZQ=R6({name:"sha2-512",code:19,encode:D6("SHA-512")});var XQ=Object.freeze({__proto__:null,sha256:QQ,sha512:ZQ});const P6=0,JQ="identity",U6=x6,eZ=n=>j2(P6,U6(n)),tZ={code:P6,name:JQ,encode:U6,digest:eZ};var nZ=Object.freeze({__proto__:null,identity:tZ});new TextEncoder,new TextDecoder;const ND={...YY,...ZY,...JY,...tQ,...sQ,...pQ,...yQ,...EQ,...SQ,...RQ};({...XQ,...nZ});function k6(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const TD=k6("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),JC=k6("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=_6(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),B6={utf8:TD,"utf-8":TD,hex:ND.base16,latin1:JC,ascii:JC,binary:JC,...ND};function Sv(n,e="utf8"){const t=B6[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function kp(n,e="utf8"){const t=B6[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Cx(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function ID(n){return yh(Sv(kp(n,Cv),A6))}function SE(n){return Sv(kp(Ko(n),A6),Cv)}function L6(n){const e=kp(kY,AD),t=UY+Sv(S6([e,n]),AD);return[DY,PY,t].join(RY)}function rZ(n){return Sv(n,Cv)}function sZ(n){return kp(n,Cv)}function iZ(n){return kp([SE(n.header),SE(n.payload)].join(_E),C6)}function aZ(n){return[SE(n.header),SE(n.payload),rZ(n.signature)].join(_E)}function q2(n){const e=n.split(_E),t=ID(e[0]),r=ID(e[1]),s=sZ(e[2]),i=kp(e.slice(0,2).join(_E),C6);return{header:t,payload:r,signature:s,data:i}}function OD(n=h6(BY)){const e=v6.getPublicKey(n);return{secretKey:S6([n,e]),publicKey:e}}async function oZ(n,e,t,r,s=Se.fromMiliseconds(Date.now())){const i={alg:IY,typ:OY},o=L6(r.publicKey),l=s+t,h={iss:o,sub:n,aud:e,iat:s,exp:l},d=iZ({header:i,payload:h}),p=v6.sign(d,r.secretKey.slice(0,32));return aZ({header:i,payload:h,signature:p})}var RD=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},cZ=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),lZ=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),uZ=function(){function n(e,t,r,s){this.name=e,this.version=t,this.os=r,this.bot=s,this.type="bot-device"}return n}(),hZ=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),dZ=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),fZ=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,pZ=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,DD=3,gZ=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fZ]],PD=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function mZ(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new dZ:typeof navigator<"u"?wZ(navigator.userAgent):EZ()}function yZ(n){return n!==""&&gZ.reduce(function(e,t){var r=t[0],s=t[1];if(e)return e;var i=s.exec(n);return!!i&&[r,i]},!1)}function wZ(n){var e=yZ(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new hZ;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<DD&&(s=RD(RD([],s,!0),vZ(DD-s.length),!0)):s=[];var i=s.join("."),o=bZ(n),l=pZ.exec(n);return l&&l[1]?new uZ(t,i,o,l[1]):new cZ(t,i,o)}function bZ(n){for(var e=0,t=PD.length;e<t;e++){var r=PD[e],s=r[0],i=r[1],o=i.exec(n);if(o)return s}return null}function EZ(){var n=typeof process<"u"&&process.version;return n?new lZ(process.version.slice(1)):null}function vZ(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var sn={},UD;function M6(){if(UD)return sn;UD=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.getLocalStorage=sn.getLocalStorageOrThrow=sn.getCrypto=sn.getCryptoOrThrow=sn.getLocation=sn.getLocationOrThrow=sn.getNavigator=sn.getNavigatorOrThrow=sn.getDocument=sn.getDocumentOrThrow=sn.getFromWindowOrThrow=sn.getFromWindow=void 0;function n(y){let b;return typeof window<"u"&&typeof window[y]<"u"&&(b=window[y]),b}sn.getFromWindow=n;function e(y){const b=n(y);if(!b)throw new Error(`${y} is not defined in Window`);return b}sn.getFromWindowOrThrow=e;function t(){return e("document")}sn.getDocumentOrThrow=t;function r(){return n("document")}sn.getDocument=r;function s(){return e("navigator")}sn.getNavigatorOrThrow=s;function i(){return n("navigator")}sn.getNavigator=i;function o(){return e("location")}sn.getLocationOrThrow=o;function l(){return n("location")}sn.getLocation=l;function h(){return e("crypto")}sn.getCryptoOrThrow=h;function d(){return n("crypto")}sn.getCrypto=d;function p(){return e("localStorage")}sn.getLocalStorageOrThrow=p;function g(){return n("localStorage")}return sn.getLocalStorage=g,sn}var Wo=M6(),sm={},kD;function AZ(){if(kD)return sm;kD=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.getWindowMetadata=void 0;const n=M6();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function s(){const b=t.getElementsByTagName("link"),E=[];for(let v=0;v<b.length;v++){const A=b[v],S=A.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const T=A.getAttribute("href");if(T)if(T.toLowerCase().indexOf("https:")===-1&&T.toLowerCase().indexOf("http:")===-1&&T.indexOf("//")!==0){let N=r.protocol+"//"+r.host;if(T.indexOf("/")===0)N+=T;else{const k=r.pathname.split("/");k.pop();const R=k.join("/");N+=R+"/"+T}E.push(N)}else if(T.indexOf("//")===0){const N=r.protocol+T;E.push(N)}else E.push(T)}}return E}function i(...b){const E=t.getElementsByTagName("meta");for(let v=0;v<E.length;v++){const A=E[v],S=["itemprop","property","name"].map(T=>A.getAttribute(T)).filter(T=>T?b.includes(T):!1);if(S.length&&S){const T=A.getAttribute("content");if(T)return T}}return""}function o(){let b=i("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function l(){return i("description","og:description","twitter:description","keywords")}const h=o(),d=l(),p=r.origin,g=s();return{description:d,url:p,icons:g,name:h}}return sm.getWindowMetadata=e,sm}var CZ=AZ();function N0(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function G2(n){return N0(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const $6="2.31.0";let im={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${$6}`};class wh extends Error{constructor(e,t={}){var l;const r=(()=>{var h;return t.cause instanceof wh?t.cause.details:(h=t.cause)!=null&&h.message?t.cause.message:t.details})(),s=t.cause instanceof wh&&t.cause.docsPath||t.docsPath,i=(l=im.getDocsUrl)==null?void 0:l.call(im,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...im.version?[`Version: ${im.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=$6}walk(e){return F6(this,e)}}function F6(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?F6(n.cause,e):e?null:n}class z6 extends wh{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Bp(n,{dir:e,size:t=32}={}){return typeof n=="string"?_Z(n,{dir:e,size:t}):SZ(n,{dir:e,size:t})}function _Z(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new z6({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function SZ(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new z6({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}class xZ extends wh{constructor({max:e,min:t,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class NZ extends wh{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Lp(n,{size:e}){if(G2(n)>e)throw new NZ({givenSize:G2(n),maxSize:e})}function V2(n,e={}){const{signed:t}=e;e.size&&Lp(n,{size:e.size});const r=BigInt(n);if(!t)return r;const s=(n.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function TZ(n,e={}){return Number(V2(n,e))}const IZ=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function K2(n,e={}){return typeof n=="number"||typeof n=="bigint"?j6(n,e):typeof n=="string"?DZ(n,e):typeof n=="boolean"?OZ(n,e):H6(n,e)}function OZ(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(Lp(t,{size:e.size}),Bp(t,{size:e.size})):t}function H6(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=IZ[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(Lp(r,{size:e.size}),Bp(r,{dir:"right",size:e.size})):r}function j6(n,e={}){const{signed:t,size:r}=e,s=BigInt(n);let i;r?t?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const h=typeof n=="bigint"?"n":"";throw new xZ({max:i?`${i}${h}`:void 0,min:`${o}${h}`,signed:t,size:r,value:`${n}${h}`})}const l=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Bp(l,{size:r}):l}const RZ=new TextEncoder;function DZ(n,e={}){const t=RZ.encode(n);return H6(t,e)}const PZ=new TextEncoder;function UZ(n,e={}){return typeof n=="number"||typeof n=="bigint"?BZ(n,e):typeof n=="boolean"?kZ(n,e):N0(n)?q6(n,e):G6(n,e)}function kZ(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(Lp(t,{size:e.size}),Bp(t,{size:e.size})):t}const po={zero:48,nine:57,A:65,F:70,a:97,f:102};function BD(n){if(n>=po.zero&&n<=po.nine)return n-po.zero;if(n>=po.A&&n<=po.F)return n-(po.A-10);if(n>=po.a&&n<=po.f)return n-(po.a-10)}function q6(n,e={}){let t=n;e.size&&(Lp(t,{size:e.size}),t=Bp(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,l=0;o<s;o++){const h=BD(r.charCodeAt(l++)),d=BD(r.charCodeAt(l++));if(h===void 0||d===void 0)throw new wh(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);i[o]=h*16+d}return i}function BZ(n,e){const t=j6(n,e);return q6(t)}function G6(n,e={}){const t=PZ.encode(n);return typeof e.size=="number"?(Lp(t,{size:e.size}),Bp(t,{dir:"right",size:e.size})):t}function V6(n,e){const t=e||"hex",r=LU(N0(n,{strict:!1})?UZ(n):n);return t==="bytes"?r:K2(r)}class LZ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const e_=new LZ(8192);function MZ(n,e){if(e_.has(`${n}.${e}`))return e_.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=V6(G6(t),"bytes"),s=t.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return e_.set(`${n}.${e}`,i),i}function $Z(n){const e=V6(`0x${n.substring(4)}`).substring(26);return MZ(`0x${e}`)}async function FZ({hash:n,signature:e}){const t=N0(n)?n:K2(n),{secp256k1:r}=await zr(async()=>{const{secp256k1:o}=await import("./secp256k1-DlGCN2yc.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:p,v:g,yParity:y}=e,b=Number(y??g),E=LD(b);return new r.Signature(V2(d),V2(p)).addRecoveryBit(E)}const o=N0(e)?e:K2(e);if(G2(o)!==65)throw new Error("invalid signature length");const l=TZ(`0x${o.slice(130)}`),h=LD(l);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(h)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function LD(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function zZ({hash:n,signature:e}){return $Z(await FZ({hash:n,signature:e}))}function HZ(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<n.length;d++){const p=n.charAt(d),g=p.charCodeAt(0);if(e[g]!==255)throw new TypeError(p+" is ambiguous");e[g]=d}const t=n.length,r=n.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let p=0,g=0,y=0;const b=d.length;for(;y!==b&&d[y]===0;)y++,p++;const E=(b-y)*i+1>>>0,v=new Uint8Array(E);for(;y!==b;){let T=d[y],N=0;for(let k=E-1;(T!==0||N<g)&&k!==-1;k--,N++)T+=256*v[k]>>>0,v[k]=T%t>>>0,T=T/t>>>0;if(T!==0)throw new Error("Non-zero carry");g=N,y++}let A=E-g;for(;A!==E&&v[A]===0;)A++;let S=r.repeat(p);for(;A<E;++A)S+=n.charAt(v[A]);return S}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let p=0,g=0,y=0;for(;d[p]===r;)g++,p++;const b=(d.length-p)*s+1>>>0,E=new Uint8Array(b);for(;p<d.length;){const T=d.charCodeAt(p);if(T>255)return;let N=e[T];if(N===255)return;let k=0;for(let R=b-1;(N!==0||k<y)&&R!==-1;R--,k++)N+=t*E[R]>>>0,E[R]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=k,p++}let v=b-y;for(;v!==b&&E[v]===0;)v++;const A=new Uint8Array(g+(b-v));let S=g;for(;v!==b;)A[S++]=E[v++];return A}function h(d){const p=l(d);if(p)return p;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:h}}var jZ="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Mp=HZ(jZ);function qZ(n){const e=n.length;let t=0,r=0;for(;r<e;){let s=n.charCodeAt(r++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&r<e){const i=n.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}function GZ(n,e,t){const r=n.length;let s=t,i=0;for(;i<r;){let o=n.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const l=n.charCodeAt(i);(l&64512)===56320&&(++i,o=((o&1023)<<10)+(l&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const VZ=new TextEncoder,KZ=50;function WZ(n,e,t){VZ.encodeInto(n,e.subarray(t))}function YZ(n,e,t){n.length>KZ?WZ(n,e,t):GZ(n,e,t)}const QZ=4096;function K6(n,e,t){let r=e;const s=r+t,i=[];let o="";for(;r<s;){const l=n[r++];if((l&128)===0)i.push(l);else if((l&224)===192){const h=n[r++]&63;i.push((l&31)<<6|h)}else if((l&240)===224){const h=n[r++]&63,d=n[r++]&63;i.push((l&31)<<12|h<<6|d)}else if((l&248)===240){const h=n[r++]&63,d=n[r++]&63,p=n[r++]&63;let g=(l&7)<<18|h<<12|d<<6|p;g>65535&&(g-=65536,i.push(g>>>10&1023|55296),g=56320|g&1023),i.push(g)}else i.push(l);i.length>=QZ&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const ZZ=new TextDecoder,XZ=200;function JZ(n,e,t){const r=n.subarray(e,e+t);return ZZ.decode(r)}function eX(n,e,t){return t>XZ?JZ(n,e,t):K6(n,e,t)}class mb{constructor(e,t){this.type=e,this.data=t}}class Hs extends Error{constructor(e){super(e);const t=Object.create(Hs.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Hs.name})}}const am=4294967295;function tX(n,e,t){const r=t/4294967296,s=t;n.setUint32(e,r),n.setUint32(e+4,s)}function W6(n,e,t){const r=Math.floor(t/4294967296),s=t;n.setUint32(e,r),n.setUint32(e+4,s)}function Y6(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function nX(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const rX=-1,sX=4294967296-1,iX=17179869184-1;function aX({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=iX)if(e===0&&n<=sX){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|t&3),i.setUint32(4,r),s}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),W6(r,4,n),t}}function oX(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,s=Math.floor(r/1e9);return{sec:t+s,nsec:r-s*1e9}}function cX(n){if(n instanceof Date){const e=oX(n);return aX(e)}else return null}function lX(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),s=(t&3)*4294967296+r,i=t>>>2;return{sec:s,nsec:i}}case 12:{const t=Y6(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new Hs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function uX(n){const e=lX(n);return new Date(e.sec*1e3+e.nsec/1e6)}const hX={type:rX,encode:cX,decode:uX};class xE{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(hX)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=t,this.builtInDecoders[s]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,t);if(i!=null){const o=-1-r;return new mb(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,t);if(i!=null){const o=r;return new mb(o,i)}}}return e instanceof mb?e:null}decode(e,t,r){const s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(e,t,r):new mb(t,e)}}xE.defaultCodec=new xE;function dX(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function W2(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):dX(n)?new Uint8Array(n):Uint8Array.from(n)}const fX=100,pX=2048;let gX=class Q6{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??xE.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??fX,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??pX,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Q6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),s=new DataView(t);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=qZ(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),YZ(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=W2(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,t+1)}countWithoutUndefined(e,t){let r=0;for(const s of t)e[s]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),tX(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),W6(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function mX(n,e){return new gX(e).encodeSharedRef(n)}function t_(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const yX=16,wX=16;class bX{constructor(e=yX,t=wX){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let l=0;l<r;l++)if(o[l]!==e[t+l])continue e;return i.str}return null}store(e,t){const r=this.caches[e.length-1],s={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,t,r){const s=this.find(e,t,r);if(s!=null)return this.hit++,s;this.miss++;const i=K6(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,i),i}}const Y2="array",Pm="map_key",Z6="map_value",EX=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new Hs("The type of key must be string or number but "+typeof n)};class vX{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=Y2,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=Pm,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Y2){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Pm||e.type===Z6){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const om=-1,_x=new DataView(new ArrayBuffer(0)),AX=new Uint8Array(_x.buffer);try{_x.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const MD=new RangeError("Insufficient data"),CX=new bX;let _X=class X6{constructor(e){this.totalPos=0,this.pos=0,this.view=_x,this.bytes=AX,this.headByte=om,this.stack=new vX,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??xE.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??am,this.maxBinLength=(e==null?void 0:e.maxBinLength)??am,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??am,this.maxMapLength=(e==null?void 0:e.maxMapLength)??am,this.maxExtLength=(e==null?void 0:e.maxExtLength)??am,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:CX,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??EX}clone(){return new X6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=om,this.stack.reset()}setBuffer(e){const t=W2(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===om&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=W2(e),s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const l of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{r=this.doDecodeSync(),t=!0}catch(h){if(!(h instanceof RangeError))throw h}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${t_(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,s=-1;for await(const i of e){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{const s=e-160;t=this.decodeString(s,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const s=this.lookU8();t=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();t=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();t=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===196){const s=this.lookU8();t=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();t=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();t=this.decodeBinary(s,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();t=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();t=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();t=this.decodeExtension(s,4)}else throw new Hs(`Unrecognized type byte: ${t_(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Y2)if(s.array[s.position]=t,s.position++,s.position===s.size)t=s.array,r.release(s);else continue e;else if(s.type===Pm){if(t==="__proto__")throw new Hs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(t),s.type=Z6;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)t=s.map,r.release(s);else{s.key=null,s.type=Pm;continue e}}return t}}readHeadByte(){return this.headByte===om&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=om}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Hs(`Unrecognized array type byte: ${t_(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Hs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Hs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){var i;if(e>this.maxStrLength)throw new Hs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw MD;const r=this.pos+t;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=eX(this.bytes,r,e),this.pos+=t+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Pm:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new Hs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw MD;const r=this.pos+t,s=this.bytes.subarray(r,r+e);return this.pos+=t+e,s}decodeExtension(e,t){if(e>this.maxExtLength)throw new Hs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),s=this.decodeBinary(e,t+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=nX(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Y6(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function SX(n,e){return new _X(e).decode(n)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xX(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function J6(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function NE(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function Sx(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function Q2(n){if(!Array.isArray(n))throw new Error("array expected")}function TE(n,e){if(!J6(!0,e))throw new Error(`${n}: array of strings expected`)}function NX(n,e){if(!J6(!1,e))throw new Error(`${n}: array of numbers expected`)}function TX(...n){const e=i=>i,t=(i,o)=>l=>i(o(l)),r=n.map(i=>i.encode).reduceRight(t,e),s=n.map(i=>i.decode).reduce(t,e);return{encode:r,decode:s}}function IX(n){const e=typeof n=="string"?n.split(""):n,t=e.length;TE("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Q2(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${n}`);return e[i]})),decode:s=>(Q2(s),s.map(i=>{NE("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${n}`);return o}))}}function OX(n=""){return NE("join",n),{encode:e=>(TE("join.decode",e),e.join(n)),decode:e=>(NE("join.decode",e),e.split(n))}}function RX(n,e="="){return Sx(n),NE("padding",e),{encode(t){for(TE("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){TE("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const ek=(n,e)=>e===0?n:ek(e,n%e),IE=(n,e)=>n+(e-ek(n,e)),n_=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function $D(n,e,t,r){if(Q2(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(IE(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${IE(e,t)}`);let s=0,i=0;const o=n_[e],l=n_[t]-1,h=[];for(const d of n){if(Sx(d),d>=o)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(s=s<<e|d,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=t;i-=t)h.push((s>>i-t&l)>>>0);const p=n_[i];if(p===void 0)throw new Error("invalid carry");s&=p-1}if(s=s<<t-i&l,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&h.push(s>>>0),h}function DX(n,e=!1){if(Sx(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(IE(8,n)>32||IE(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!xX(t))throw new Error("radix2.encode input should be Uint8Array");return $D(Array.from(t),8,n,!e)},decode:t=>(NX("radix2.decode",t),Uint8Array.from($D(t,n,8,e)))}}const PX=TX(DX(5),IX("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),RX(5),OX(""));function xx(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function tk(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xx(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Um(n,e){e||(e=n.reduce((s,i)=>s+i.length,0));const t=tk(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return xx(t)}function UX(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,h=n.charAt(0),d=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var v=0,A=0,S=0,T=E.length;S!==T&&E[S]===0;)S++,v++;for(var N=(T-S)*p+1>>>0,k=new Uint8Array(N);S!==T;){for(var R=E[S],P=0,F=N-1;(R!==0||P<A)&&F!==-1;F--,P++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=P,S++}for(var $=N-A;$!==N&&k[$]===0;)$++;for(var B=h.repeat(v);$<N;++$)B+=n.charAt(k[$]);return B}function y(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var v=0;if(E[v]!==" "){for(var A=0,S=0;E[v]===h;)A++,v++;for(var T=(E.length-v)*d+1>>>0,N=new Uint8Array(T);E[v];){var k=t[E.charCodeAt(v)];if(k===255)return;for(var R=0,P=T-1;(k!==0||R<S)&&P!==-1;P--,R++)k+=l*N[P]>>>0,N[P]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,v++}if(E[v]!==" "){for(var F=T-S;F!==T&&N[F]===0;)F++;for(var $=new Uint8Array(A+(T-F)),B=A;F!==T;)$[B++]=N[F++];return $}}}function b(E){var v=y(E);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var kX=UX,BX=kX;const LX=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},MX=n=>new TextEncoder().encode(n),$X=n=>new TextDecoder().decode(n);class FX{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class zX{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nk(this,e)}}class HX{constructor(e){this.decoders=e}or(e){return nk(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nk=(n,e)=>new HX({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class jX{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new FX(e,t,r),this.decoder=new zX(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xv=({name:n,prefix:e,encode:t,decode:r})=>new jX(n,e,t,r),_y=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=BX(t,e);return xv({prefix:n,name:e,encode:r,decode:i=>LX(s(i))})},qX=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,h=0,d=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|g,l+=t,l>=8&&(l-=8,o[d++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return o},GX=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let h=0;h<n.length;++h)for(l=l<<8|n[h],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},Er=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>xv({prefix:e,name:n,encode(s){return GX(s,r,t)},decode(s){return qX(s,r,t,n)}}),VX=xv({prefix:"\0",name:"identity",encode:n=>$X(n),decode:n=>MX(n)}),KX=Object.freeze(Object.defineProperty({__proto__:null,identity:VX},Symbol.toStringTag,{value:"Module"})),WX=Er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),YX=Object.freeze(Object.defineProperty({__proto__:null,base2:WX},Symbol.toStringTag,{value:"Module"})),QX=Er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ZX=Object.freeze(Object.defineProperty({__proto__:null,base8:QX},Symbol.toStringTag,{value:"Module"})),XX=_y({prefix:"9",name:"base10",alphabet:"0123456789"}),JX=Object.freeze(Object.defineProperty({__proto__:null,base10:XX},Symbol.toStringTag,{value:"Module"})),eJ=Er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tJ=Er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nJ=Object.freeze(Object.defineProperty({__proto__:null,base16:eJ,base16upper:tJ},Symbol.toStringTag,{value:"Module"})),rJ=Er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sJ=Er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iJ=Er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aJ=Er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oJ=Er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cJ=Er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lJ=Er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uJ=Er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hJ=Er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dJ=Object.freeze(Object.defineProperty({__proto__:null,base32:rJ,base32hex:oJ,base32hexpad:lJ,base32hexpadupper:uJ,base32hexupper:cJ,base32pad:iJ,base32padupper:aJ,base32upper:sJ,base32z:hJ},Symbol.toStringTag,{value:"Module"})),fJ=_y({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pJ=_y({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),gJ=Object.freeze(Object.defineProperty({__proto__:null,base36:fJ,base36upper:pJ},Symbol.toStringTag,{value:"Module"})),mJ=_y({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yJ=_y({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wJ=Object.freeze(Object.defineProperty({__proto__:null,base58btc:mJ,base58flickr:yJ},Symbol.toStringTag,{value:"Module"})),bJ=Er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),EJ=Er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vJ=Er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),AJ=Er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),CJ=Object.freeze(Object.defineProperty({__proto__:null,base64:bJ,base64pad:EJ,base64url:vJ,base64urlpad:AJ},Symbol.toStringTag,{value:"Module"})),rk=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),_J=rk.reduce((n,e,t)=>(n[t]=e,n),[]),SJ=rk.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function xJ(n){return n.reduce((e,t)=>(e+=_J[t],e),"")}function NJ(n){const e=[];for(const t of n){const r=SJ[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const TJ=xv({prefix:"🚀",name:"base256emoji",encode:xJ,decode:NJ}),IJ=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:TJ},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const FD={...KX,...YX,...ZX,...JX,...nJ,...dJ,...gJ,...wJ,...CJ,...IJ};function sk(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const zD=sk("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),r_=sk("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=tk(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),ik={utf8:zD,"utf-8":zD,hex:FD.base16,latin1:r_,ascii:r_,binary:r_,...FD};function vi(n,e="utf8"){const t=ik[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xx(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function As(n,e="utf8"){const t=ik[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const OJ={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var s_,HD;function ak(){if(HD)return s_;HD=1;const n="Input must be an string, Buffer or Uint8Array";function e(o){let l;if(o instanceof Uint8Array)l=o;else if(typeof o=="string")l=new TextEncoder().encode(o);else throw new Error(n);return l}function t(o){return Array.prototype.map.call(o,function(l){return(l<16?"0":"")+l.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,l,h){let d=`
`+o+" = ";for(let p=0;p<l.length;p+=2){if(h===32)d+=r(l[p]).toUpperCase(),d+=" ",d+=r(l[p+1]).toUpperCase();else if(h===64)d+=r(l[p+1]).toUpperCase(),d+=r(l[p]).toUpperCase();else throw new Error("Invalid size "+h);p%6===4?d+=`
`+new Array(o.length+4).join(" "):p<l.length-2&&(d+=" ")}console.log(d)}function i(o,l,h){let d=new Date().getTime();const p=new Uint8Array(l);for(let y=0;y<l;y++)p[y]=y%256;const g=new Date().getTime();console.log("Generated random input in "+(g-d)+"ms"),d=g;for(let y=0;y<h;y++){const b=o(p),E=new Date().getTime(),v=E-d;d=E,console.log("Hashed in "+v+"ms: "+b.substring(0,20)+"..."),console.log(Math.round(l/(1<<20)/(v/1e3)*100)/100+" MB PER SECOND")}}return s_={normalizeInput:e,toHex:t,debugPrint:s,testSpeed:i},s_}var i_,jD;function RJ(){if(jD)return i_;jD=1;const n=ak();function e(S,T,N){const k=S[T]+S[N];let R=S[T+1]+S[N+1];k>=4294967296&&R++,S[T]=k,S[T+1]=R}function t(S,T,N,k){let R=S[T]+N;N<0&&(R+=4294967296);let P=S[T+1]+k;R>=4294967296&&P++,S[T]=R,S[T+1]=P}function r(S,T){return S[T]^S[T+1]<<8^S[T+2]<<16^S[T+3]<<24}function s(S,T,N,k,R,P){const F=d[R],$=d[R+1],B=d[P],H=d[P+1];e(h,S,T),t(h,S,F,$);let j=h[k]^h[S],W=h[k+1]^h[S+1];h[k]=W,h[k+1]=j,e(h,N,k),j=h[T]^h[N],W=h[T+1]^h[N+1],h[T]=j>>>24^W<<8,h[T+1]=W>>>24^j<<8,e(h,S,T),t(h,S,B,H),j=h[k]^h[S],W=h[k+1]^h[S+1],h[k]=j>>>16^W<<16,h[k+1]=W>>>16^j<<16,e(h,N,k),j=h[T]^h[N],W=h[T+1]^h[N+1],h[T]=W>>>31^j<<1,h[T+1]=j>>>31^W<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],l=new Uint8Array(o.map(function(S){return S*2})),h=new Uint32Array(32),d=new Uint32Array(32);function p(S,T){let N=0;for(N=0;N<16;N++)h[N]=S.h[N],h[N+16]=i[N];for(h[24]=h[24]^S.t,h[25]=h[25]^S.t/4294967296,T&&(h[28]=~h[28],h[29]=~h[29]),N=0;N<32;N++)d[N]=r(S.b,4*N);for(N=0;N<12;N++)s(0,8,16,24,l[N*16+0],l[N*16+1]),s(2,10,18,26,l[N*16+2],l[N*16+3]),s(4,12,20,28,l[N*16+4],l[N*16+5]),s(6,14,22,30,l[N*16+6],l[N*16+7]),s(0,10,20,30,l[N*16+8],l[N*16+9]),s(2,12,22,24,l[N*16+10],l[N*16+11]),s(4,14,16,26,l[N*16+12],l[N*16+13]),s(6,8,18,28,l[N*16+14],l[N*16+15]);for(N=0;N<16;N++)S.h[N]=S.h[N]^h[N]^h[N+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(S,T,N,k){if(S===0||S>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(T&&T.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(N&&N.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(k&&k.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const R={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:S};g.fill(0),g[0]=S,T&&(g[1]=T.length),g[2]=1,g[3]=1,N&&g.set(N,32),k&&g.set(k,48);for(let P=0;P<16;P++)R.h[P]=i[P]^r(g,P*4);return T&&(b(R,T),R.c=128),R}function b(S,T){for(let N=0;N<T.length;N++)S.c===128&&(S.t+=S.c,p(S,!1),S.c=0),S.b[S.c++]=T[N]}function E(S){for(S.t+=S.c;S.c<128;)S.b[S.c++]=0;p(S,!0);const T=new Uint8Array(S.outlen);for(let N=0;N<S.outlen;N++)T[N]=S.h[N>>2]>>8*(N&3);return T}function v(S,T,N,k,R){N=N||64,S=n.normalizeInput(S),k&&(k=n.normalizeInput(k)),R&&(R=n.normalizeInput(R));const P=y(N,T,k,R);return b(P,S),E(P)}function A(S,T,N,k,R){const P=v(S,T,N,k,R);return n.toHex(P)}return i_={blake2b:v,blake2bHex:A,blake2bInit:y,blake2bUpdate:b,blake2bFinal:E},i_}var a_,qD;function DJ(){if(qD)return a_;qD=1;const n=ak();function e(E,v){return E[v]^E[v+1]<<8^E[v+2]<<16^E[v+3]<<24}function t(E,v,A,S,T,N){o[E]=o[E]+o[v]+T,o[S]=r(o[S]^o[E],16),o[A]=o[A]+o[S],o[v]=r(o[v]^o[A],12),o[E]=o[E]+o[v]+N,o[S]=r(o[S]^o[E],8),o[A]=o[A]+o[S],o[v]=r(o[v]^o[A],7)}function r(E,v){return E>>>v^E<<32-v}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),l=new Uint32Array(16);function h(E,v){let A=0;for(A=0;A<8;A++)o[A]=E.h[A],o[A+8]=s[A];for(o[12]^=E.t,o[13]^=E.t/4294967296,v&&(o[14]=~o[14]),A=0;A<16;A++)l[A]=e(E.b,4*A);for(A=0;A<10;A++)t(0,4,8,12,l[i[A*16+0]],l[i[A*16+1]]),t(1,5,9,13,l[i[A*16+2]],l[i[A*16+3]]),t(2,6,10,14,l[i[A*16+4]],l[i[A*16+5]]),t(3,7,11,15,l[i[A*16+6]],l[i[A*16+7]]),t(0,5,10,15,l[i[A*16+8]],l[i[A*16+9]]),t(1,6,11,12,l[i[A*16+10]],l[i[A*16+11]]),t(2,7,8,13,l[i[A*16+12]],l[i[A*16+13]]),t(3,4,9,14,l[i[A*16+14]],l[i[A*16+15]]);for(A=0;A<8;A++)E.h[A]^=o[A]^o[A+8]}function d(E,v){if(!(E>0&&E<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=v?v.length:0;if(v&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const S={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:E};return S.h[0]^=16842752^A<<8^E,A>0&&(p(S,v),S.c=64),S}function p(E,v){for(let A=0;A<v.length;A++)E.c===64&&(E.t+=E.c,h(E,!1),E.c=0),E.b[E.c++]=v[A]}function g(E){for(E.t+=E.c;E.c<64;)E.b[E.c++]=0;h(E,!0);const v=new Uint8Array(E.outlen);for(let A=0;A<E.outlen;A++)v[A]=E.h[A>>2]>>8*(A&3)&255;return v}function y(E,v,A){A=A||32,E=n.normalizeInput(E);const S=d(A,v);return p(S,E),g(S)}function b(E,v,A){const S=y(E,v,A);return n.toHex(S)}return a_={blake2s:y,blake2sHex:b,blake2sInit:d,blake2sUpdate:p,blake2sFinal:g},a_}var o_,GD;function PJ(){if(GD)return o_;GD=1;const n=RJ(),e=DJ();return o_={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},o_}var UJ=PJ(),kJ={};const BJ=":";function gf(n){const[e,t]=n.split(BJ);return{namespace:e,reference:t}}function ok(n,e){return n.includes(":")?[n]:e.chains||[]}var LJ=Object.defineProperty,MJ=Object.defineProperties,$J=Object.getOwnPropertyDescriptors,VD=Object.getOwnPropertySymbols,FJ=Object.prototype.hasOwnProperty,zJ=Object.prototype.propertyIsEnumerable,KD=(n,e,t)=>e in n?LJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,WD=(n,e)=>{for(var t in e||(e={}))FJ.call(e,t)&&KD(n,t,e[t]);if(VD)for(var t of VD(e))zJ.call(e,t)&&KD(n,t,e[t]);return n},HJ=(n,e)=>MJ(n,$J(e));const jJ="ReactNative",Gs={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},qJ="js";function OE(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Dl(){return!Wo.getDocument()&&!!Wo.getNavigator()&&navigator.product===jJ}function GJ(){return Dl()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function VJ(){return Dl()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function $p(){return!OE()&&!!Wo.getNavigator()&&!!Wo.getDocument()}function Sy(){return Dl()?Gs.reactNative:OE()?Gs.node:$p()?Gs.browser:Gs.unknown}function YD(){var n;try{return Dl()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function KJ(n,e){const t=new URLSearchParams(n);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&t.set(r,s)}return t.toString()}function WJ(n){var e,t;const r=ck();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n==null?void 0:n.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(s=>s!=="")),HJ(WD(WD({},r),n),{url:(n==null?void 0:n.url)||r.url,name:(n==null?void 0:n.name)||r.name,description:(n==null?void 0:n.description)||r.description,icons:(t=n==null?void 0:n.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),n||r}}function ck(){return CZ.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function YJ(){if(Sy()===Gs.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=mZ();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function QJ(){var n;const e=Sy();return e===Gs.browser?[e,((n=Wo.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function lk(n,e,t){const r=YJ(),s=QJ();return[[n,e].join("-"),[qJ,t].join("-"),r,s].join("/")}function ZJ({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:l,packageName:h}){const d=t.split("?"),p=lk(n,e,r),g={auth:s,ua:p,projectId:i,useOnCloseEvent:o,packageName:h||void 0,bundleId:l||void 0},y=KJ(d[1]||"",g);return d[0]+"?"+y}function Su(n,e){return n.filter(t=>e.includes(t)).length===n.length}function Z2(n){return Object.fromEntries(n.entries())}function X2(n){return new Map(Object.entries(n))}function hu(n=Se.FIVE_MINUTES,e){const t=Se.toMiliseconds(n||Se.FIVE_MINUTES);let r,s,i,o;return{resolve:l=>{i&&r&&(clearTimeout(i),r(l),o=Promise.resolve(l))},reject:l=>{i&&s&&(clearTimeout(i),s(l))},done:()=>new Promise((l,h)=>{if(o)return l(o);i=setTimeout(()=>{const d=new Error(e);o=Promise.reject(d),h(d)},t),r=l,s=h})}}function dl(n,e,t){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(t)),e);try{const o=await n;r(o)}catch(o){s(o)}clearTimeout(i)})}function uk(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function XJ(n){return uk("topic",n)}function JJ(n){return uk("id",n)}function hk(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function Hn(n,e){return Se.fromMiliseconds(Date.now()+Se.toMiliseconds(n))}function zc(n){return Date.now()>=Se.toMiliseconds(n)}function Ht(n,e){return`${n}${e?`:${e}`:""}`}function za(n=[],e=[]){return[...new Set([...n,...e])]}async function eee({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=tee(i,n,e),l=Sy();if(l===Gs.browser){if(!((r=Wo.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}nee(o)}else l===Gs.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function tee(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let s=`${n}`;if(n.startsWith("https://t.me")){const i=n.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${aee(r,!0)}`}else s=`${s}/wc?${r}`;return s}function nee(n){let e="_self";iee()?e="_top":(see()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function ree(n,e){let t="";try{if($p()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function QD(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function ZD(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function Nx(){return typeof process<"u"&&kJ.IS_VITEST==="true"}function see(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function iee(){try{return window.self!==window.top}catch{return!1}}function aee(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function dk(n){return Buffer.from(n,"base64").toString("utf-8")}function oee(n){return new Promise(e=>setTimeout(e,n))}const yb=BigInt(2**32-1),XD=BigInt(32);function fk(n,e=!1){return e?{h:Number(n&yb),l:Number(n>>XD&yb)}:{h:Number(n>>XD&yb)|0,l:Number(n&yb)|0}}function pk(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l}=fk(n[i],e);[r[i],s[i]]=[o,l]}return[r,s]}const JD=(n,e,t)=>n>>>t,eP=(n,e,t)=>n<<32-t|e>>>t,Hc=(n,e,t)=>n>>>t|e<<32-t,jc=(n,e,t)=>n<<32-t|e>>>t,_m=(n,e,t)=>n<<64-t|e>>>t-32,Sm=(n,e,t)=>n>>>t-32|e<<64-t,cee=(n,e)=>e,lee=(n,e)=>n,uee=(n,e,t)=>n<<t|e>>>32-t,hee=(n,e,t)=>e<<t|n>>>32-t,dee=(n,e,t)=>e<<t-32|n>>>64-t,fee=(n,e,t)=>n<<t-32|e>>>64-t;function Bi(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const Tx=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Ix=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,pee=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),gee=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,mee=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),yee=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,Id=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ox(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Yo(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Ai(n,...e){if(!Ox(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function Rx(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yo(n.outputLen),Yo(n.blockLen)}function Sl(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Dx(n,e){Ai(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function T0(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ci(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function c_(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function pa(n,e){return n<<32-e|n>>>e}const gk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function mk(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const bo=gk?n=>n:n=>mk(n);function wee(n){for(let e=0;e<n.length;e++)n[e]=mk(n[e]);return n}const qc=gk?n=>n:wee,yk=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",bee=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function I0(n){if(Ai(n),yk)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=bee[n[t]];return e}const go={_0:48,_9:57,A:65,F:70,a:97,f:102};function tP(n){if(n>=go._0&&n<=go._9)return n-go._0;if(n>=go.A&&n<=go.F)return n-(go.A-10);if(n>=go.a&&n<=go.f)return n-(go.a-10)}function Px(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(yk)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=tP(n.charCodeAt(i)),l=tP(n.charCodeAt(i+1));if(o===void 0||l===void 0){const h=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}r[s]=o*16+l}return r}function Eee(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Qi(n){return typeof n=="string"&&(n=Eee(n)),Ai(n),n}function xu(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];Ai(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}let Nv=class{};function xy(n){const e=r=>n().update(Qi(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function vee(n){const e=(r,s)=>n(s).update(Qi(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function Fp(n=32){if(Id&&typeof Id.getRandomValues=="function")return Id.getRandomValues(new Uint8Array(n));if(Id&&typeof Id.randomBytes=="function")return Uint8Array.from(Id.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const Aee=BigInt(0),cm=BigInt(1),Cee=BigInt(2),_ee=BigInt(7),See=BigInt(256),xee=BigInt(113),wk=[],bk=[],Ek=[];for(let n=0,e=cm,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],wk.push(2*(5*r+t)),bk.push((n+1)*(n+2)/2%64);let s=Aee;for(let i=0;i<7;i++)e=(e<<cm^(e>>_ee)*xee)%See,e&Cee&&(s^=cm<<(cm<<BigInt(i))-cm);Ek.push(s)}const vk=pk(Ek,!0),Nee=vk[0],Tee=vk[1],nP=(n,e,t)=>t>32?dee(n,e,t):uee(n,e,t),rP=(n,e,t)=>t>32?fee(n,e,t):hee(n,e,t);function Iee(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,d=t[h],p=t[h+1],g=nP(d,p,1)^t[l],y=rP(d,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=bk[o],h=nP(s,i,l),d=rP(s,i,l),p=wk[o];s=n[p],i=n[p+1],n[p]=h,n[p+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=Nee[r],n[1]^=Tee[r]}Ci(t)}let Oee=class Ak extends Nv{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,Yo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=T0(this.state)}clone(){return this._cloneInto()}keccak(){qc(this.state32),Iee(this.state32,this.rounds),qc(this.state32),this.posOut=0,this.pos=0}update(e){Sl(this),e=Qi(e),Ai(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Sl(this,!1),Ai(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Dx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ci(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Ak(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Ree=(n,e,t)=>xy(()=>new Oee(e,n,t)),Dee=Ree(1,136,256/8);function Pee(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),h=r?4:0,d=r?0:4;n.setUint32(e+h,o,r),n.setUint32(e+d,l,r)}function Uee(n,e,t){return n&e^~n&t}function kee(n,e,t){return n&e^n&t^e&t}let Ck=class extends Nv{constructor(e,t,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=c_(this.buffer)}update(e){Sl(this),e=Qi(e),Ai(e);const{view:t,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=c_(e);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sl(this),Dx(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,Ci(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;Pee(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=c_(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=l,s%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Pc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),xr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Bee=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Uc=new Uint32Array(64);let Lee=class extends Ck{constructor(e=32){super(64,e,8,!1),this.A=Pc[0]|0,this.B=Pc[1]|0,this.C=Pc[2]|0,this.D=Pc[3]|0,this.E=Pc[4]|0,this.F=Pc[5]|0,this.G=Pc[6]|0,this.H=Pc[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:h}=this;return[e,t,r,s,i,o,l,h]}set(e,t,r,s,i,o,l,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=h|0}process(e,t){for(let g=0;g<16;g++,t+=4)Uc[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=Uc[g-15],b=Uc[g-2],E=pa(y,7)^pa(y,18)^y>>>3,v=pa(b,17)^pa(b,19)^b>>>10;Uc[g]=v+Uc[g-7]+E+Uc[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:h,G:d,H:p}=this;for(let g=0;g<64;g++){const y=pa(l,6)^pa(l,11)^pa(l,25),b=p+y+Uee(l,h,d)+Bee[g]+Uc[g]|0,E=(pa(r,2)^pa(r,13)^pa(r,22))+kee(r,s,i)|0;p=d,d=h,h=l,l=o+b|0,o=i,i=s,s=r,r=b+E|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,h,d,p)}roundClean(){Ci(Uc)}destroy(){this.set(0,0,0,0,0,0,0,0),Ci(this.buffer)}};const _k=pk(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Mee=_k[0],$ee=_k[1],kc=new Uint32Array(80),Bc=new Uint32Array(80);let Ux=class extends Ck{constructor(e=64){super(128,e,16,!1),this.Ah=xr[0]|0,this.Al=xr[1]|0,this.Bh=xr[2]|0,this.Bl=xr[3]|0,this.Ch=xr[4]|0,this.Cl=xr[5]|0,this.Dh=xr[6]|0,this.Dl=xr[7]|0,this.Eh=xr[8]|0,this.El=xr[9]|0,this.Fh=xr[10]|0,this.Fl=xr[11]|0,this.Gh=xr[12]|0,this.Gl=xr[13]|0,this.Hh=xr[14]|0,this.Hl=xr[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:E,Hh:v,Hl:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=E|0,this.Hh=v|0,this.Hl=A|0}process(e,t){for(let N=0;N<16;N++,t+=4)kc[N]=e.getUint32(t),Bc[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){const k=kc[N-15]|0,R=Bc[N-15]|0,P=Hc(k,R,1)^Hc(k,R,8)^JD(k,R,7),F=jc(k,R,1)^jc(k,R,8)^eP(k,R,7),$=kc[N-2]|0,B=Bc[N-2]|0,H=Hc($,B,19)^_m($,B,61)^JD($,B,6),j=jc($,B,19)^Sm($,B,61)^eP($,B,6),W=pee(F,j,Bc[N-7],Bc[N-16]),ne=gee(W,P,H,kc[N-7],kc[N-16]);kc[N]=ne|0,Bc[N]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:E,Gh:v,Gl:A,Hh:S,Hl:T}=this;for(let N=0;N<80;N++){const k=Hc(g,y,14)^Hc(g,y,18)^_m(g,y,41),R=jc(g,y,14)^jc(g,y,18)^Sm(g,y,41),P=g&b^~g&v,F=y&E^~y&A,$=mee(T,R,F,$ee[N],Bc[N]),B=yee($,S,k,P,Mee[N],kc[N]),H=$|0,j=Hc(r,s,28)^_m(r,s,34)^_m(r,s,39),W=jc(r,s,28)^Sm(r,s,34)^Sm(r,s,39),ne=r&i^r&l^i&l,J=s&o^s&h^o&h;S=v|0,T=A|0,v=b|0,A=E|0,b=g|0,E=y|0,{h:g,l:y}=Bi(d|0,p|0,B|0,H|0),d=l|0,p=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const I=Tx(H,W,J);r=Ix(I,B,j,ne),s=I|0}({h:r,l:s}=Bi(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Bi(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=Bi(this.Ch|0,this.Cl|0,l|0,h|0),{h:d,l:p}=Bi(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=Bi(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:E}=Bi(this.Fh|0,this.Fl|0,b|0,E|0),{h:v,l:A}=Bi(this.Gh|0,this.Gl|0,v|0,A|0),{h:S,l:T}=Bi(this.Hh|0,this.Hl|0,S|0,T|0),this.set(r,s,i,o,l,h,d,p,g,y,b,E,v,A,S,T)}roundClean(){Ci(kc,Bc)}destroy(){Ci(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Fee=class extends Ux{constructor(){super(48),this.Ah=Sr[0]|0,this.Al=Sr[1]|0,this.Bh=Sr[2]|0,this.Bl=Sr[3]|0,this.Ch=Sr[4]|0,this.Cl=Sr[5]|0,this.Dh=Sr[6]|0,this.Dl=Sr[7]|0,this.Eh=Sr[8]|0,this.El=Sr[9]|0,this.Fh=Sr[10]|0,this.Fl=Sr[11]|0,this.Gh=Sr[12]|0,this.Gl=Sr[13]|0,this.Hh=Sr[14]|0,this.Hl=Sr[15]|0}};const Nr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let zee=class extends Ux{constructor(){super(32),this.Ah=Nr[0]|0,this.Al=Nr[1]|0,this.Bh=Nr[2]|0,this.Bl=Nr[3]|0,this.Ch=Nr[4]|0,this.Cl=Nr[5]|0,this.Dh=Nr[6]|0,this.Dl=Nr[7]|0,this.Eh=Nr[8]|0,this.El=Nr[9]|0,this.Fh=Nr[10]|0,this.Fl=Nr[11]|0,this.Gh=Nr[12]|0,this.Gl=Nr[13]|0,this.Hh=Nr[14]|0,this.Hl=Nr[15]|0}};const Tv=xy(()=>new Lee),Hee=xy(()=>new Ux),jee=xy(()=>new Fee),qee=xy(()=>new zee),Gee=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Fn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Re=new Uint32Array(32);function Lc(n,e,t,r,s,i){const o=s[i],l=s[i+1];let h=Re[2*n],d=Re[2*n+1],p=Re[2*e],g=Re[2*e+1],y=Re[2*t],b=Re[2*t+1],E=Re[2*r],v=Re[2*r+1],A=Tx(h,p,o);d=Ix(A,d,g,l),h=A|0,{Dh:v,Dl:E}={Dh:v^d,Dl:E^h},{Dh:v,Dl:E}={Dh:cee(v,E),Dl:lee(v)},{h:b,l:y}=Bi(b,y,v,E),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:Hc(g,p,24),Bl:jc(g,p,24)},Re[2*n]=h,Re[2*n+1]=d,Re[2*e]=p,Re[2*e+1]=g,Re[2*t]=y,Re[2*t+1]=b,Re[2*r]=E,Re[2*r+1]=v}function Mc(n,e,t,r,s,i){const o=s[i],l=s[i+1];let h=Re[2*n],d=Re[2*n+1],p=Re[2*e],g=Re[2*e+1],y=Re[2*t],b=Re[2*t+1],E=Re[2*r],v=Re[2*r+1],A=Tx(h,p,o);d=Ix(A,d,g,l),h=A|0,{Dh:v,Dl:E}={Dh:v^d,Dl:E^h},{Dh:v,Dl:E}={Dh:Hc(v,E,16),Dl:jc(v,E,16)},{h:b,l:y}=Bi(b,y,v,E),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:_m(g,p,63),Bl:Sm(g,p,63)},Re[2*n]=h,Re[2*n+1]=d,Re[2*e]=p,Re[2*e+1]=g,Re[2*t]=y,Re[2*t+1]=b,Re[2*r]=E,Re[2*r+1]=v}function Vee(n,e={},t,r,s){if(Yo(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:l}=e;if(i!==void 0&&(i.length<1||i.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(l!==void 0&&l.length!==s)throw new Error("personalization must be undefined or "+s)}class Kee extends Nv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Yo(e),Yo(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=T0(this.buffer)}update(e){Sl(this),e=Qi(e),Ai(e);const{blockLen:t,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,l=e.buffer;for(let h=0;h<i;){this.pos===t&&(qc(s),this.compress(s,0,!1),qc(s),this.pos=0);const d=Math.min(t-this.pos,i-h),p=o+h;if(d===t&&!(p%4)&&h+d<i){const g=new Uint32Array(l,p,Math.floor((i-h)/4));qc(g);for(let y=0;h+t<i;y+=s.length,h+=t)this.length+=t,this.compress(g,y,!1);qc(g);continue}r.set(e.subarray(h,h+d),this.pos),this.pos+=d,this.length+=d,h+=d}return this}digestInto(e){Sl(this),Dx(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,Ci(this.buffer.subarray(t)),qc(r),this.compress(r,0,!0),qc(r);const s=T0(e);this.get().forEach((i,o)=>s[o]=bo(i))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:s,destroyed:i,outputLen:o,pos:l}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=s,e.length=r,e.pos=l,e.outputLen=o,e}clone(){return this._cloneInto()}}class Wee extends Kee{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Fn[0]|0,this.v0h=Fn[1]|0,this.v1l=Fn[2]|0,this.v1h=Fn[3]|0,this.v2l=Fn[4]|0,this.v2h=Fn[5]|0,this.v3l=Fn[6]|0,this.v3h=Fn[7]|0,this.v4l=Fn[8]|0,this.v4h=Fn[9]|0,this.v5l=Fn[10]|0,this.v5h=Fn[11]|0,this.v6l=Fn[12]|0,this.v6h=Fn[13]|0,this.v7l=Fn[14]|0,this.v7h=Fn[15]|0,Vee(t,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Qi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Qi(i);const l=T0(i);this.v4l^=bo(l[0]),this.v4h^=bo(l[1]),this.v5l^=bo(l[2]),this.v5h^=bo(l[3])}if(s!==void 0){s=Qi(s);const l=T0(s);this.v6l^=bo(l[0]),this.v6h^=bo(l[1]),this.v7l^=bo(l[2]),this.v7h^=bo(l[3])}if(r!==void 0){const l=new Uint8Array(this.blockLen);l.set(r),this.update(l)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:s,v2l:i,v2h:o,v3l:l,v3h:h,v4l:d,v4h:p,v5l:g,v5h:y,v6l:b,v6h:E,v7l:v,v7h:A}=this;return[e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A]}set(e,t,r,s,i,o,l,h,d,p,g,y,b,E,v,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=l|0,this.v3h=h|0,this.v4l=d|0,this.v4h=p|0,this.v5l=g|0,this.v5h=y|0,this.v6l=b|0,this.v6h=E|0,this.v7l=v|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((h,d)=>Re[d]=h),Re.set(Fn,16);let{h:s,l:i}=fk(BigInt(this.length));Re[24]=Fn[8]^i,Re[25]=Fn[9]^s,r&&(Re[28]=~Re[28],Re[29]=~Re[29]);let o=0;const l=Gee;for(let h=0;h<12;h++)Lc(0,4,8,12,e,t+2*l[o++]),Mc(0,4,8,12,e,t+2*l[o++]),Lc(1,5,9,13,e,t+2*l[o++]),Mc(1,5,9,13,e,t+2*l[o++]),Lc(2,6,10,14,e,t+2*l[o++]),Mc(2,6,10,14,e,t+2*l[o++]),Lc(3,7,11,15,e,t+2*l[o++]),Mc(3,7,11,15,e,t+2*l[o++]),Lc(0,5,10,15,e,t+2*l[o++]),Mc(0,5,10,15,e,t+2*l[o++]),Lc(1,6,11,12,e,t+2*l[o++]),Mc(1,6,11,12,e,t+2*l[o++]),Lc(2,7,8,13,e,t+2*l[o++]),Mc(2,7,8,13,e,t+2*l[o++]),Lc(3,4,9,14,e,t+2*l[o++]),Mc(3,4,9,14,e,t+2*l[o++]);this.v0l^=Re[0]^Re[16],this.v0h^=Re[1]^Re[17],this.v1l^=Re[2]^Re[18],this.v1h^=Re[3]^Re[19],this.v2l^=Re[4]^Re[20],this.v2h^=Re[5]^Re[21],this.v3l^=Re[6]^Re[22],this.v3h^=Re[7]^Re[23],this.v4l^=Re[8]^Re[24],this.v4h^=Re[9]^Re[25],this.v5l^=Re[10]^Re[26],this.v5h^=Re[11]^Re[27],this.v6l^=Re[12]^Re[28],this.v6h^=Re[13]^Re[29],this.v7l^=Re[14]^Re[30],this.v7h^=Re[15]^Re[31],Ci(Re)}destroy(){this.destroyed=!0,Ci(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Yee=vee(n=>new Wee(n)),Qee="https://rpc.walletconnect.org/v1";function Sk(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(Dee(t)).toString("hex")}async function Zee(n,e,t,r,s,i){switch(t.t){case"eip191":return await Xee(n,e,t.s);case"eip1271":return await Jee(n,e,t.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function Xee(n,e,t){return(await zZ({hash:Sk(e),signature:t})).toLowerCase()===n.toLowerCase()}async function Jee(n,e,t,r,s,i){const o=gf(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const l="0x1626ba7e",h="0000000000000000000000000000000000000000000000000000000000000040",d=t.substring(2),p=(d.length/2).toString(16).padStart(64,"0"),g=(e.startsWith("0x")?e:Sk(e)).substring(2),y=l+g+h+p+d,b=await fetch(`${i||Qee}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:ete(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:y},"latest"]})}),{result:E}=await b.json();return E?E.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function ete(){return Date.now()+Math.floor(Math.random()*1e3)}function tte(n){const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const r=t[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(t.length<s)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const i=Buffer.from(n,"base64").slice(1,65);return Mp.encode(i)}function nte(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const s=Yee(r,{dkLen:32});return Mp.encode(s)}function sP(n){const e=new Uint8Array(Tv(rte(n)));return Mp.encode(e)}function rte(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function iP(n){const e=Buffer.from(n,"base64"),t=SX(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=mX(t),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=qee(i);return PX.encode(o).replace(/=+$/,"")}function l_(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function ste(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(l_(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(l_(t.length)),s.push(t),s.push(Buffer.from([26])),s.push(l_(r.length)),s.push(r);const i=Buffer.concat(s),o=Tv(i);return Buffer.from(o).toString("hex").toUpperCase()}var ite=Object.defineProperty,ate=Object.defineProperties,ote=Object.getOwnPropertyDescriptors,aP=Object.getOwnPropertySymbols,cte=Object.prototype.hasOwnProperty,lte=Object.prototype.propertyIsEnumerable,oP=(n,e,t)=>e in n?ite(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ute=(n,e)=>{for(var t in e||(e={}))cte.call(e,t)&&oP(n,t,e[t]);if(aP)for(var t of aP(e))lte.call(e,t)&&oP(n,t,e[t]);return n},hte=(n,e)=>ate(n,ote(e));const dte="did:pkh:",kx=n=>n==null?void 0:n.split(":"),fte=n=>{const e=n&&kx(n);if(e)return n.includes(dte)?e[3]:e[1]},J2=n=>{const e=n&&kx(n);if(e)return e[2]+":"+e[3]},RE=n=>{const e=n&&kx(n);if(e)return e.pop()};async function cP(n){const{cacao:e,projectId:t}=n,{s:r,p:s}=e,i=xk(s,s.iss),o=RE(s.iss);return await Zee(o,i,r,J2(s.iss),t)}const xk=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=RE(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=n.statement||void 0;const i=`URI: ${n.aud||n.uri}`,o=`Version: ${n.version}`,l=`Chain ID: ${fte(e)}`,h=`Nonce: ${n.nonce}`,d=`Issued At: ${n.iat}`,p=n.exp?`Expiration Time: ${n.exp}`:void 0,g=n.nbf?`Not Before: ${n.nbf}`:void 0,y=n.requestId?`Request ID: ${n.requestId}`:void 0,b=n.resources?`Resources:${n.resources.map(v=>`
- ${v}`).join("")}`:void 0,E=Gb(n.resources);if(E){const v=O0(E);s=Ate(s,v)}return[t,r,"",s,"",i,o,l,h,d,p,g,y,b].filter(v=>v!=null).join(`
`)};function pte(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function gte(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function bh(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function mte(n,e,t,r={}){return t==null||t.sort((s,i)=>s.localeCompare(i)),{att:{[n]:yte(e,t,r)}}}function yte(n,e,t={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${n}/${s}`]:[t]}));return Object.assign({},...r)}function Nk(n){return bh(n),`urn:recap:${pte(n).replace(/=/g,"")}`}function O0(n){const e=gte(n.replace("urn:recap:",""));return bh(e),e}function wte(n,e,t){const r=mte(n,e,t);return Nk(r)}function bte(n){return n&&n.includes("urn:recap:")}function Ete(n,e){const t=O0(n),r=O0(e),s=vte(t,r);return Nk(s)}function vte(n,e){bh(n),bh(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return t.forEach(s=>{var i,o;Object.keys(((i=n.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((l,h)=>l.localeCompare(h)).forEach(l=>{var h,d;r.att[s]=hte(ute({},r.att[s]),{[l]:((h=n.att[s])==null?void 0:h[l])||((d=e.att[s])==null?void 0:d[l])})})}),r}function Ate(n="",e){bh(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let s=0;Object.keys(e.att).forEach(l=>{const h=Object.keys(e.att[l]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));h.sort((g,y)=>g.action.localeCompare(y.action));const d={};h.forEach(g=>{d[g.ability]||(d[g.ability]=[]),d[g.ability].push(g.action)});const p=Object.keys(d).map(g=>(s++,`(${s}) '${g}': '${d[g].join("', '")}' for '${l}'.`));r.push(p.join(", ").replace(".,","."))});const i=r.join(" "),o=`${t}${i}`;return`${n?n+" ":""}${o}`}function lP(n){var e;const t=O0(n);bh(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function uP(n){const e=O0(n);bh(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function Gb(n){if(!n)return;const e=n==null?void 0:n[n.length-1];return bte(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Tk(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function eS(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function u_(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function ws(n,...e){if(!Tk(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function hP(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Cte(n,e){ws(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function ml(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function vp(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function _te(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const Ste=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function xte(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function tS(n){if(typeof n=="string")n=xte(n);else if(Tk(n))n=nS(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function Nte(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function Tte(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const Ite=(n,e)=>{function t(r,...s){if(ws(r),!Ste)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const d=s[0];if(!d)throw new Error("nonce / iv required");n.varSizeNonce?ws(d):ws(d,n.nonceLength)}const i=n.tagLength;i&&s[1]!==void 0&&ws(s[1]);const o=e(r,...s),l=(d,p)=>{if(p!==void 0){if(d!==2)throw new Error("cipher output not supported");ws(p)}};let h=!1;return{encrypt(d,p){if(h)throw new Error("cannot encrypt() twice with same key + nonce");return h=!0,ws(d),l(o.encrypt.length,p),o.encrypt(d,p)},decrypt(d,p){if(ws(d),i&&d.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return l(o.decrypt.length,p),o.decrypt(d,p)}}}return Object.assign(t,n),t};function dP(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!Rte(e))throw new Error("invalid output, must be aligned");return e}function fP(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i);n.setUint32(e+4,o,r),n.setUint32(e+0,l,r)}function Ote(n,e,t){eS(t);const r=new Uint8Array(16),s=_te(r);return fP(s,0,BigInt(e),t),fP(s,8,BigInt(n),t),r}function Rte(n){return n.byteOffset%4===0}function nS(n){return Uint8Array.from(n)}const Ik=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),Dte=Ik("expand 16-byte k"),Pte=Ik("expand 32-byte k"),Ute=ml(Dte),kte=ml(Pte);function Ot(n,e){return n<<e|n>>>32-e}function rS(n){return n.byteOffset%4===0}const wb=64,Bte=16,Ok=2**32-1,pP=new Uint32Array;function Lte(n,e,t,r,s,i,o,l){const h=s.length,d=new Uint8Array(wb),p=ml(d),g=rS(s)&&rS(i),y=g?ml(s):pP,b=g?ml(i):pP;for(let E=0;E<h;o++){if(n(e,t,r,p,o,l),o>=Ok)throw new Error("arx: counter overflow");const v=Math.min(wb,h-E);if(g&&v===wb){const A=E/4;if(E%4!==0)throw new Error("arx: invalid block position");for(let S=0,T;S<Bte;S++)T=A+S,b[T]=y[T]^p[S];E+=wb;continue}for(let A=0,S;A<v;A++)S=E+A,i[S]=s[S]^d[A];E+=v}}function Mte(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Nte({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return u_(s),u_(o),eS(i),eS(t),(l,h,d,p,g=0)=>{ws(l),ws(h),ws(d);const y=d.length;if(p===void 0&&(p=new Uint8Array(y)),ws(p),u_(g),g<0||g>=Ok)throw new Error("arx: counter overflow");if(p.length<y)throw new Error(`arx: output (${p.length}) is shorter than data (${y})`);const b=[];let E=l.length,v,A;if(E===32)b.push(v=nS(l)),A=kte;else if(E===16&&t)v=new Uint8Array(32),v.set(l),v.set(l,16),A=Ute,b.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${E}`);rS(h)||b.push(h=nS(h));const S=ml(v);if(r){if(h.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,S,ml(h.subarray(0,16)),S),h=h.subarray(16)}const T=16-s;if(T!==h.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const k=new Uint8Array(12);k.set(h,i?0:12-h.length),h=k,b.push(h)}const N=ml(h);return Lte(n,A,S,N,d,p,g,o),vp(...b),p}}const ur=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class $te{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=tS(e),ws(e,32);const t=ur(e,0),r=ur(e,2),s=ur(e,4),i=ur(e,6),o=ur(e,8),l=ur(e,10),h=ur(e,12),d=ur(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|l<<2)&8191,this.r[7]=(l>>>11|h<<5)&8065,this.r[8]=(h>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let p=0;p<8;p++)this.pad[p]=ur(e,16+2*p)}process(e,t,r=!1){const s=r?0:2048,{h:i,r:o}=this,l=o[0],h=o[1],d=o[2],p=o[3],g=o[4],y=o[5],b=o[6],E=o[7],v=o[8],A=o[9],S=ur(e,t+0),T=ur(e,t+2),N=ur(e,t+4),k=ur(e,t+6),R=ur(e,t+8),P=ur(e,t+10),F=ur(e,t+12),$=ur(e,t+14);let B=i[0]+(S&8191),H=i[1]+((S>>>13|T<<3)&8191),j=i[2]+((T>>>10|N<<6)&8191),W=i[3]+((N>>>7|k<<9)&8191),ne=i[4]+((k>>>4|R<<12)&8191),J=i[5]+(R>>>1&8191),I=i[6]+((R>>>14|P<<2)&8191),_=i[7]+((P>>>11|F<<5)&8191),L=i[8]+((F>>>8|$<<8)&8191),q=i[9]+($>>>5|s),K=0,O=K+B*l+H*(5*A)+j*(5*v)+W*(5*E)+ne*(5*b);K=O>>>13,O&=8191,O+=J*(5*y)+I*(5*g)+_*(5*p)+L*(5*d)+q*(5*h),K+=O>>>13,O&=8191;let V=K+B*h+H*l+j*(5*A)+W*(5*v)+ne*(5*E);K=V>>>13,V&=8191,V+=J*(5*b)+I*(5*y)+_*(5*g)+L*(5*p)+q*(5*d),K+=V>>>13,V&=8191;let Z=K+B*d+H*h+j*l+W*(5*A)+ne*(5*v);K=Z>>>13,Z&=8191,Z+=J*(5*E)+I*(5*b)+_*(5*y)+L*(5*g)+q*(5*p),K+=Z>>>13,Z&=8191;let re=K+B*p+H*d+j*h+W*l+ne*(5*A);K=re>>>13,re&=8191,re+=J*(5*v)+I*(5*E)+_*(5*b)+L*(5*y)+q*(5*g),K+=re>>>13,re&=8191;let ee=K+B*g+H*p+j*d+W*h+ne*l;K=ee>>>13,ee&=8191,ee+=J*(5*A)+I*(5*v)+_*(5*E)+L*(5*b)+q*(5*y),K+=ee>>>13,ee&=8191;let he=K+B*y+H*g+j*p+W*d+ne*h;K=he>>>13,he&=8191,he+=J*l+I*(5*A)+_*(5*v)+L*(5*E)+q*(5*b),K+=he>>>13,he&=8191;let me=K+B*b+H*y+j*g+W*p+ne*d;K=me>>>13,me&=8191,me+=J*h+I*l+_*(5*A)+L*(5*v)+q*(5*E),K+=me>>>13,me&=8191;let Ce=K+B*E+H*b+j*y+W*g+ne*p;K=Ce>>>13,Ce&=8191,Ce+=J*d+I*h+_*l+L*(5*A)+q*(5*v),K+=Ce>>>13,Ce&=8191;let Pe=K+B*v+H*E+j*b+W*y+ne*g;K=Pe>>>13,Pe&=8191,Pe+=J*p+I*d+_*h+L*l+q*(5*A),K+=Pe>>>13,Pe&=8191;let Ne=K+B*A+H*v+j*E+W*b+ne*y;K=Ne>>>13,Ne&=8191,Ne+=J*g+I*p+_*d+L*h+q*l,K+=Ne>>>13,Ne&=8191,K=(K<<2)+K|0,K=K+O|0,O=K&8191,K=K>>>13,V+=K,i[0]=O,i[1]=V,i[2]=Z,i[3]=re,i[4]=ee,i[5]=he,i[6]=me,i[7]=Ce,i[8]=Pe,i[9]=Ne}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=s,s=e[l]>>>13,e[l]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let l=1;l<10;l++)r[l]=e[l]+s,s=r[l]>>>13,r[l]&=8191;r[9]-=8192;let i=(s^1)-1;for(let l=0;l<10;l++)r[l]&=i;i=~i;for(let l=0;l<10;l++)e[l]=e[l]&i|r[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let l=1;l<8;l++)o=(e[l]+t[l]|0)+(o>>>16)|0,e[l]=o&65535;vp(r)}update(e){hP(this),e=tS(e),ws(e);const{buffer:t,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){vp(this.h,this.r,this.buffer,this.pad)}digestInto(e){hP(this),Cte(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function Fte(n){const e=(r,s)=>n(s).update(tS(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const zte=Fte(n=>new $te(n));function Hte(n,e,t,r,s,i=20){let o=n[0],l=n[1],h=n[2],d=n[3],p=e[0],g=e[1],y=e[2],b=e[3],E=e[4],v=e[5],A=e[6],S=e[7],T=s,N=t[0],k=t[1],R=t[2],P=o,F=l,$=h,B=d,H=p,j=g,W=y,ne=b,J=E,I=v,_=A,L=S,q=T,K=N,O=k,V=R;for(let re=0;re<i;re+=2)P=P+H|0,q=Ot(q^P,16),J=J+q|0,H=Ot(H^J,12),P=P+H|0,q=Ot(q^P,8),J=J+q|0,H=Ot(H^J,7),F=F+j|0,K=Ot(K^F,16),I=I+K|0,j=Ot(j^I,12),F=F+j|0,K=Ot(K^F,8),I=I+K|0,j=Ot(j^I,7),$=$+W|0,O=Ot(O^$,16),_=_+O|0,W=Ot(W^_,12),$=$+W|0,O=Ot(O^$,8),_=_+O|0,W=Ot(W^_,7),B=B+ne|0,V=Ot(V^B,16),L=L+V|0,ne=Ot(ne^L,12),B=B+ne|0,V=Ot(V^B,8),L=L+V|0,ne=Ot(ne^L,7),P=P+j|0,V=Ot(V^P,16),_=_+V|0,j=Ot(j^_,12),P=P+j|0,V=Ot(V^P,8),_=_+V|0,j=Ot(j^_,7),F=F+W|0,q=Ot(q^F,16),L=L+q|0,W=Ot(W^L,12),F=F+W|0,q=Ot(q^F,8),L=L+q|0,W=Ot(W^L,7),$=$+ne|0,K=Ot(K^$,16),J=J+K|0,ne=Ot(ne^J,12),$=$+ne|0,K=Ot(K^$,8),J=J+K|0,ne=Ot(ne^J,7),B=B+H|0,O=Ot(O^B,16),I=I+O|0,H=Ot(H^I,12),B=B+H|0,O=Ot(O^B,8),I=I+O|0,H=Ot(H^I,7);let Z=0;r[Z++]=o+P|0,r[Z++]=l+F|0,r[Z++]=h+$|0,r[Z++]=d+B|0,r[Z++]=p+H|0,r[Z++]=g+j|0,r[Z++]=y+W|0,r[Z++]=b+ne|0,r[Z++]=E+J|0,r[Z++]=v+I|0,r[Z++]=A+_|0,r[Z++]=S+L|0,r[Z++]=T+q|0,r[Z++]=N+K|0,r[Z++]=k+O|0,r[Z++]=R+V|0}const jte=Mte(Hte,{counterRight:!1,counterLength:4,allowShortKeys:!1}),qte=new Uint8Array(16),gP=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(qte.subarray(t))},Gte=new Uint8Array(32);function mP(n,e,t,r,s){const i=n(e,t,Gte),o=zte.create(i);s&&gP(o,s),gP(o,r);const l=Ote(r.length,s?s.length:0,!0);o.update(l);const h=o.digest();return vp(i,l),h}const Vte=n=>(e,t,r)=>({encrypt(s,i){const o=s.length;i=dP(o+16,i,!1),i.set(s);const l=i.subarray(0,-16);n(e,t,l,l,1);const h=mP(n,e,t,l,r);return i.set(h,o),vp(h),i},decrypt(s,i){i=dP(s.length-16,i,!1);const o=s.subarray(0,-16),l=s.subarray(-16),h=mP(n,e,t,o,r);if(!Tte(l,h))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),n(e,t,i,i,1),vp(h),i}}),Rk=Ite({blockSize:64,nonceLength:12,tagLength:16},Vte(jte));let Dk=class extends Nv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Rx(e);const r=Qi(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ci(i)}update(e){return Sl(this),this.iHash.update(e),this}digestInto(e){Sl(this),Ai(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Iv=(n,e,t)=>new Dk(n,e).update(t).digest();Iv.create=(n,e)=>new Dk(n,e);function Kte(n,e,t){return Rx(n),t===void 0&&(t=new Uint8Array(n.outputLen)),Iv(n,Qi(t),Qi(e))}const h_=Uint8Array.from([0]),yP=Uint8Array.of();function Wte(n,e,t,r=32){Rx(n),Yo(r);const s=n.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);t===void 0&&(t=yP);const o=new Uint8Array(i*s),l=Iv.create(n,e),h=l._cloneInto(),d=new Uint8Array(l.outputLen);for(let p=0;p<i;p++)h_[0]=p+1,h.update(p===0?yP:d).update(t).update(h_).digestInto(d),o.set(d,s*p),l._cloneInto(h);return l.destroy(),h.destroy(),Ci(d,h_),o.slice(0,r)}const Yte=(n,e,t,r,s)=>Wte(n,Kte(n,e,t),r,s),Ov=Tv,Bx=BigInt(0),sS=BigInt(1);function DE(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function bb(n){const e=n.toString(16);return e.length&1?"0"+e:e}function Pk(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Bx:BigInt("0x"+n)}function Rv(n){return Pk(I0(n))}function PE(n){return Ai(n),Pk(I0(Uint8Array.from(n).reverse()))}function Lx(n,e){return Px(n.toString(16).padStart(e*2,"0"))}function Mx(n,e){return Lx(n,e).reverse()}function ms(n,e,t){let r;if(typeof e=="string")try{r=Px(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Ox(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}const d_=n=>typeof n=="bigint"&&Bx<=n;function Qte(n,e,t){return d_(n)&&d_(e)&&d_(t)&&e<=n&&n<t}function iS(n,e,t,r){if(!Qte(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function Zte(n){let e;for(e=0;n>Bx;n>>=sS,e+=1);return e}const Dv=n=>(sS<<BigInt(n))-sS;function Xte(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),s=y=>Uint8Array.of(y);let i=r(n),o=r(n),l=0;const h=()=>{i.fill(1),o.fill(0),l=0},d=(...y)=>t(o,i,...y),p=(y=r(0))=>{o=d(s(0),y),i=d(),y.length!==0&&(o=d(s(1),y),i=d())},g=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const b=[];for(;y<e;){i=d();const E=i.slice();b.push(E),y+=i.length}return xu(...b)};return(y,b)=>{h(),p(y);let E;for(;!(E=b(g()));)p();return h(),E}}function Pv(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const l=n[s];if(o&&l===void 0)return;const h=typeof l;if(h!==i||l===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${h}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(t).forEach(([s,i])=>r(s,i,!0))}function wP(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const vs=BigInt(0),Qr=BigInt(1),Nu=BigInt(2),Jte=BigInt(3),Uk=BigInt(4),kk=BigInt(5),Bk=BigInt(8);function Ei(n,e){const t=n%e;return t>=vs?t:e+t}function Ui(n,e,t){let r=n;for(;e-- >vs;)r*=r,r%=t;return r}function bP(n,e){if(n===vs)throw new Error("invert: expected non-zero number");if(e<=vs)throw new Error("invert: expected positive modulus, got "+e);let t=Ei(n,e),r=e,s=vs,i=Qr;for(;t!==vs;){const o=r/t,l=r%t,h=s-i*o;r=t,t=l,s=i,i=h}if(r!==Qr)throw new Error("invert: does not exist");return Ei(s,e)}function Lk(n,e){const t=(n.ORDER+Qr)/Uk,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function ene(n,e){const t=(n.ORDER-kk)/Bk,r=n.mul(e,Nu),s=n.pow(r,t),i=n.mul(e,s),o=n.mul(n.mul(i,Nu),s),l=n.mul(i,n.sub(o,n.ONE));if(!n.eql(n.sqr(l),e))throw new Error("Cannot find square root");return l}function tne(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-Qr,t=0;for(;e%Nu===vs;)e/=Nu,t++;let r=Nu;const s=zp(n);for(;EP(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Lk;let i=s.pow(r,e);const o=(e+Qr)/Nu;return function(l,h){if(l.is0(h))return h;if(EP(l,h)!==1)throw new Error("Cannot find square root");let d=t,p=l.mul(l.ONE,i),g=l.pow(h,e),y=l.pow(h,o);for(;!l.eql(g,l.ONE);){if(l.is0(g))return l.ZERO;let b=1,E=l.sqr(g);for(;!l.eql(E,l.ONE);)if(b++,E=l.sqr(E),b===d)throw new Error("Cannot find square root");const v=Qr<<BigInt(d-b-1),A=l.pow(p,v);d=b,p=l.sqr(A),g=l.mul(g,p),y=l.mul(y,A)}return y}}function nne(n){return n%Uk===Jte?Lk:n%Bk===kk?ene:tne(n)}const rne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sne(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=rne.reduce((r,s)=>(r[s]="function",r),e);return Pv(n,t),n}function ine(n,e,t){if(t<vs)throw new Error("invalid exponent, negatives unsupported");if(t===vs)return n.ONE;if(t===Qr)return e;let r=n.ONE,s=e;for(;t>vs;)t&Qr&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Qr;return r}function Mk(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),s=e.reduce((o,l,h)=>n.is0(l)?o:(r[h]=o,n.mul(o,l)),n.ONE),i=n.inv(s);return e.reduceRight((o,l,h)=>n.is0(l)?o:(r[h]=n.mul(o,r[h]),n.mul(o,l)),i),r}function EP(n,e){const t=(n.ORDER-Qr)/Nu,r=n.pow(e,t),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ane(n,e){e!==void 0&&Yo(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function zp(n,e,t=!1,r={}){if(n<=vs)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(s=p.BITS),p.sqrt&&(i=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:l}=ane(n,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const d=Object.freeze({ORDER:n,isLE:t,BITS:o,BYTES:l,MASK:Dv(o),ZERO:vs,ONE:Qr,create:p=>Ei(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return vs<=p&&p<n},is0:p=>p===vs,isValidNot0:p=>!d.is0(p)&&d.isValid(p),isOdd:p=>(p&Qr)===Qr,neg:p=>Ei(-p,n),eql:(p,g)=>p===g,sqr:p=>Ei(p*p,n),add:(p,g)=>Ei(p+g,n),sub:(p,g)=>Ei(p-g,n),mul:(p,g)=>Ei(p*g,n),pow:(p,g)=>ine(d,p,g),div:(p,g)=>Ei(p*bP(g,n),n),sqrN:p=>p*p,addN:(p,g)=>p+g,subN:(p,g)=>p-g,mulN:(p,g)=>p*g,inv:p=>bP(p,n),sqrt:i||(p=>(h||(h=nne(n)),h(d,p))),toBytes:p=>t?Mx(p,l):Lx(p,l),fromBytes:p=>{if(p.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+p.length);return t?PE(p):Rv(p)},invertBatch:p=>Mk(d,p),cmov:(p,g,y)=>y?g:p});return Object.freeze(d)}function $k(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Fk(n){const e=$k(n);return e+Math.ceil(e/2)}function one(n,e,t=!1){const r=n.length,s=$k(e),i=Fk(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=t?PE(n):Rv(n),l=Ei(o,e-Qr)+Qr;return t?Mx(l,s):Lx(l,s)}const Ap=BigInt(0),Tu=BigInt(1);function km(n,e){const t=e.negate();return n?t:e}function cne(n,e,t){const r=i=>i.pz,s=Mk(n.Fp,t.map(r));return t.map((i,o)=>i.toAffine(s[o])).map(n.fromAffine)}function zk(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function f_(n,e){zk(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),s=2**n,i=Dv(n),o=BigInt(n);return{windows:t,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function vP(n,e,t){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=t;let l=Number(n&s),h=n>>o;l>r&&(l-=i,h+=Tu);const d=e*r,p=d+Math.abs(l)-1,g=l===0,y=l<0,b=e%2!==0;return{nextN:h,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:d}}function lne(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function une(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const p_=new WeakMap,Hk=new WeakMap;function g_(n){return Hk.get(n)||1}function AP(n){if(n!==Ap)throw new Error("invalid wNAF")}function hne(n,e){return{constTimeNegate:km,hasPrecomputes(t){return g_(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>Ap;)r&Tu&&(s=s.add(i)),i=i.double(),r>>=Tu;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=f_(r,e),o=[];let l=t,h=l;for(let d=0;d<s;d++){h=l,o.push(h);for(let p=1;p<i;p++)h=h.add(l),o.push(h);l=h.double()}return o},wNAF(t,r,s){let i=n.ZERO,o=n.BASE;const l=f_(t,e);for(let h=0;h<l.windows;h++){const{nextN:d,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:E}=vP(s,h,l);s=d,g?o=o.add(km(b,r[E])):i=i.add(km(y,r[p]))}return AP(s),{p:i,f:o}},wNAFUnsafe(t,r,s,i=n.ZERO){const o=f_(t,e);for(let l=0;l<o.windows&&s!==Ap;l++){const{nextN:h,offset:d,isZero:p,isNeg:g}=vP(s,l,o);if(s=h,!p){const y=r[d];i=i.add(g?y.negate():y)}}return AP(s),i},getPrecomputes(t,r,s){let i=p_.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&(typeof s=="function"&&(i=s(i)),p_.set(r,i))),i},wNAFCached(t,r,s){const i=g_(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=g_(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){zk(r,e),Hk.set(t,r),p_.delete(t)}}}function dne(n,e,t,r){let s=e,i=n.ZERO,o=n.ZERO;for(;t>Ap||r>Ap;)t&Tu&&(i=i.add(s)),r&Tu&&(o=o.add(s)),s=s.double(),t>>=Tu,r>>=Tu;return{p1:i,p2:o}}function fne(n,e,t,r){lne(t,n),une(r,e);const s=t.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,l=Zte(BigInt(s));let h=1;l>12?h=l-3:l>4?h=l-2:l>0&&(h=2);const d=Dv(h),p=new Array(Number(d)+1).fill(o),g=Math.floor((e.BITS-1)/h)*h;let y=o;for(let b=g;b>=0;b-=h){p.fill(o);for(let v=0;v<i;v++){const A=r[v],S=Number(A>>BigInt(b)&d);p[S]=p[S].add(t[v])}let E=o;for(let v=p.length-1,A=o;v>0;v--)A=A.add(p[v]),E=E.add(A);if(y=y.add(E),b!==0)for(let v=0;v<h;v++)y=y.double()}return y}function CP(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return sne(e),e}else return zp(n)}function pne(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const o of["p","n","h"]){const l=e[o];if(!(typeof l=="bigint"&&l>Ap))throw new Error(`CURVE.${o} must be positive bigint`)}const r=CP(e.p,t.Fp),s=CP(e.n,t.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const lm=BigInt(0),Od=BigInt(1),Eb=BigInt(2);function gne(n){return Pv(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function mne(n){const e=gne(n),{P:t,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,l=r==="x25519";if(!l&&r!=="x448")throw new Error("invalid type");const h=o||Fp,d=l?255:448,p=l?32:56,g=BigInt(l?9:5),y=BigInt(l?121665:39081),b=l?Eb**BigInt(254):Eb**BigInt(447),E=l?BigInt(8)*Eb**BigInt(251)-Od:BigInt(4)*Eb**BigInt(445)-Od,v=b+E+Od,A=B=>Ei(B,t),S=T(g);function T(B){return Mx(A(B),p)}function N(B){const H=ms("u coordinate",B,p);return l&&(H[31]&=127),A(PE(H))}function k(B){return PE(s(ms("scalar",B,p)))}function R(B,H){const j=$(N(H),k(B));if(j===lm)throw new Error("invalid private or public key received");return T(j)}function P(B){return R(B,S)}function F(B,H,j){const W=A(B*(H-j));return H=A(H-W),j=A(j+W),{x_2:H,x_3:j}}function $(B,H){iS("u",B,lm,t),iS("scalar",H,b,v);const j=H,W=B;let ne=Od,J=lm,I=B,_=Od,L=lm;for(let K=BigInt(d-1);K>=lm;K--){const O=j>>K&Od;L^=O,{x_2:ne,x_3:I}=F(L,ne,I),{x_2:J,x_3:_}=F(L,J,_),L=O;const V=ne+J,Z=A(V*V),re=ne-J,ee=A(re*re),he=Z-ee,me=I+_,Ce=I-_,Pe=A(Ce*V),Ne=A(me*re),Qe=Pe+Ne,Qt=Pe-Ne;I=A(Qe*Qe),_=A(W*A(Qt*Qt)),ne=A(Z*ee),J=A(he*(Z+A(y*he)))}({x_2:ne,x_3:I}=F(L,ne,I)),{x_2:J,x_3:_}=F(L,J,_);const q=i(J);return A(ne*q)}return{scalarMult:R,scalarMultBase:P,getSharedSecret:(B,H)=>R(B,H),getPublicKey:B=>P(B),utils:{randomPrivateKey:()=>h(p)},GuBytes:S.slice()}}BigInt(0);const yne=BigInt(1),_P=BigInt(2),wne=BigInt(3),bne=BigInt(5);BigInt(8);const jk={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Ene(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=jk.p,o=n*n%i*n%i,l=Ui(o,_P,i)*o%i,h=Ui(l,yne,i)*n%i,d=Ui(h,bne,i)*h%i,p=Ui(d,e,i)*d%i,g=Ui(p,t,i)*p%i,y=Ui(g,r,i)*g%i,b=Ui(y,s,i)*y%i,E=Ui(b,s,i)*y%i,v=Ui(E,e,i)*d%i;return{pow_p_5_8:Ui(v,_P,i)*n%i,b2:o}}function vne(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const aS=(()=>{const n=jk.p;return mne({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=Ene(e);return Ei(Ui(t,wne,n)*r,n)},adjustScalarBytes:vne})})();function SP(n){n.lowS!==void 0&&DE("lowS",n.lowS),n.prehash!==void 0&&DE("prehash",n.prehash)}class Ane extends Error{constructor(e=""){super(e)}}const _o={Err:Ane,_tlv:{encode:(n,e)=>{const{Err:t}=_o;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,s=bb(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=r>127?bb(s.length/2|128):"";return bb(n)+i+s+e},decode(n,e){const{Err:t}=_o;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const h=s&127;if(!h)throw new t("tlv.decode(long): indefinite length not supported");if(h>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+h);if(d.length!==h)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const p of d)o=o<<8|p;if(r+=h,o<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(r,r+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=_o;if(n<Bm)throw new e("integer: negative integers are not allowed");let t=bb(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=_o;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Rv(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=_o,s=ms("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:h}=r.decode(2,i),{v:d,l:p}=r.decode(2,h);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(d)}},hexFromSig(n){const{_tlv:e,_int:t}=_o,r=e.encode(2,t.encode(n.r)),s=e.encode(2,t.encode(n.s)),i=r+s;return e.encode(48,i)}},Bm=BigInt(0),Lm=BigInt(1),Cne=BigInt(2),vb=BigInt(3),_ne=BigInt(4);function Sne(n,e,t){function r(s){const i=n.sqr(s),o=n.mul(i,s);return n.add(n.add(o,n.mul(s,e)),t)}return r}function qk(n,e,t){const{BYTES:r}=n;function s(i){let o;if(typeof i=="bigint")o=i;else{let l=ms("private key",i);if(e){if(!e.includes(l.length*2))throw new Error("invalid private key");const h=new Uint8Array(r);h.set(l,h.length-l.length),l=h}try{o=n.fromBytes(l)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(t&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function xne(n,e={}){const{Fp:t,Fn:r}=pne("weierstrass",n,e),{h:s,n:i}=n;Pv(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function l(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h($,B,H){const{x:j,y:W}=B.toAffine(),ne=t.toBytes(j);if(DE("isCompressed",H),H){l();const J=!t.isOdd(W);return xu(Gk(J),ne)}else return xu(Uint8Array.of(4),ne,t.toBytes(W))}function d($){Ai($);const B=t.BYTES,H=B+1,j=2*B+1,W=$.length,ne=$[0],J=$.subarray(1);if(W===H&&(ne===2||ne===3)){const I=t.fromBytes(J);if(!t.isValid(I))throw new Error("bad point: is not on curve, wrong x");const _=y(I);let L;try{L=t.sqrt(_)}catch(K){const O=K instanceof Error?": "+K.message:"";throw new Error("bad point: is not on curve, sqrt error"+O)}l();const q=t.isOdd(L);return(ne&1)===1!==q&&(L=t.neg(L)),{x:I,y:L}}else if(W===j&&ne===4){const I=t.fromBytes(J.subarray(B*0,B*1)),_=t.fromBytes(J.subarray(B*1,B*2));if(!b(I,_))throw new Error("bad point: is not on curve");return{x:I,y:_}}else throw new Error(`bad point: got length ${W}, expected compressed=${H} or uncompressed=${j}`)}const p=e.toBytes||h,g=e.fromBytes||d,y=Sne(t,n.a,n.b);function b($,B){const H=t.sqr(B),j=y($);return t.eql(H,j)}if(!b(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const E=t.mul(t.pow(n.a,vb),_ne),v=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(E,v)))throw new Error("bad curve params: a or b");function A($,B,H=!1){if(!t.isValid(B)||H&&t.is0(B))throw new Error(`bad point coordinate ${$}`);return B}function S($){if(!($ instanceof R))throw new Error("ProjectivePoint expected")}const T=wP(($,B)=>{const{px:H,py:j,pz:W}=$;if(t.eql(W,t.ONE))return{x:H,y:j};const ne=$.is0();B==null&&(B=ne?t.ONE:t.inv(W));const J=t.mul(H,B),I=t.mul(j,B),_=t.mul(W,B);if(ne)return{x:t.ZERO,y:t.ZERO};if(!t.eql(_,t.ONE))throw new Error("invZ was invalid");return{x:J,y:I}}),N=wP($=>{if($.is0()){if(e.allowInfinityPoint&&!t.is0($.py))return;throw new Error("bad point: ZERO")}const{x:B,y:H}=$.toAffine();if(!t.isValid(B)||!t.isValid(H))throw new Error("bad point: x or y not field elements");if(!b(B,H))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function k($,B,H,j,W){return H=new R(t.mul(H.px,$),H.py,H.pz),B=km(j,B),H=km(W,H),B.add(H)}class R{constructor(B,H,j){this.px=A("x",B),this.py=A("y",H,!0),this.pz=A("z",j),Object.freeze(this)}static fromAffine(B){const{x:H,y:j}=B||{};if(!B||!t.isValid(H)||!t.isValid(j))throw new Error("invalid affine point");if(B instanceof R)throw new Error("projective point not allowed");return t.is0(H)&&t.is0(j)?R.ZERO:new R(H,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){return cne(R,"pz",B)}static fromBytes(B){return Ai(B),R.fromHex(B)}static fromHex(B){const H=R.fromAffine(g(ms("pointHex",B)));return H.assertValidity(),H}static fromPrivateKey(B){const H=qk(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return R.BASE.multiply(H(B))}static msm(B,H){return fne(R,r,B,H)}precompute(B=8,H=!0){return F.setWindowSize(this,B),H||this.multiply(vb),this}_setWindowSize(B){this.precompute(B)}assertValidity(){N(this)}hasEvenY(){const{y:B}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(B)}equals(B){S(B);const{px:H,py:j,pz:W}=this,{px:ne,py:J,pz:I}=B,_=t.eql(t.mul(H,I),t.mul(ne,W)),L=t.eql(t.mul(j,I),t.mul(J,W));return _&&L}negate(){return new R(this.px,t.neg(this.py),this.pz)}double(){const{a:B,b:H}=n,j=t.mul(H,vb),{px:W,py:ne,pz:J}=this;let I=t.ZERO,_=t.ZERO,L=t.ZERO,q=t.mul(W,W),K=t.mul(ne,ne),O=t.mul(J,J),V=t.mul(W,ne);return V=t.add(V,V),L=t.mul(W,J),L=t.add(L,L),I=t.mul(B,L),_=t.mul(j,O),_=t.add(I,_),I=t.sub(K,_),_=t.add(K,_),_=t.mul(I,_),I=t.mul(V,I),L=t.mul(j,L),O=t.mul(B,O),V=t.sub(q,O),V=t.mul(B,V),V=t.add(V,L),L=t.add(q,q),q=t.add(L,q),q=t.add(q,O),q=t.mul(q,V),_=t.add(_,q),O=t.mul(ne,J),O=t.add(O,O),q=t.mul(O,V),I=t.sub(I,q),L=t.mul(O,K),L=t.add(L,L),L=t.add(L,L),new R(I,_,L)}add(B){S(B);const{px:H,py:j,pz:W}=this,{px:ne,py:J,pz:I}=B;let _=t.ZERO,L=t.ZERO,q=t.ZERO;const K=n.a,O=t.mul(n.b,vb);let V=t.mul(H,ne),Z=t.mul(j,J),re=t.mul(W,I),ee=t.add(H,j),he=t.add(ne,J);ee=t.mul(ee,he),he=t.add(V,Z),ee=t.sub(ee,he),he=t.add(H,W);let me=t.add(ne,I);return he=t.mul(he,me),me=t.add(V,re),he=t.sub(he,me),me=t.add(j,W),_=t.add(J,I),me=t.mul(me,_),_=t.add(Z,re),me=t.sub(me,_),q=t.mul(K,he),_=t.mul(O,re),q=t.add(_,q),_=t.sub(Z,q),q=t.add(Z,q),L=t.mul(_,q),Z=t.add(V,V),Z=t.add(Z,V),re=t.mul(K,re),he=t.mul(O,he),Z=t.add(Z,re),re=t.sub(V,re),re=t.mul(K,re),he=t.add(he,re),V=t.mul(Z,he),L=t.add(L,V),V=t.mul(me,he),_=t.mul(ee,_),_=t.sub(_,V),V=t.mul(ee,Z),q=t.mul(me,q),q=t.add(q,V),new R(_,L,q)}subtract(B){return this.add(B.negate())}is0(){return this.equals(R.ZERO)}multiply(B){const{endo:H}=e;if(!r.isValidNot0(B))throw new Error("invalid scalar: out of range");let j,W;const ne=J=>F.wNAFCached(this,J,R.normalizeZ);if(H){const{k1neg:J,k1:I,k2neg:_,k2:L}=H.splitScalar(B),{p:q,f:K}=ne(I),{p:O,f:V}=ne(L);W=K.add(V),j=k(H.beta,q,O,J,_)}else{const{p:J,f:I}=ne(B);j=J,W=I}return R.normalizeZ([j,W])[0]}multiplyUnsafe(B){const{endo:H}=e,j=this;if(!r.isValid(B))throw new Error("invalid scalar: out of range");if(B===Bm||j.is0())return R.ZERO;if(B===Lm)return j;if(F.hasPrecomputes(this))return this.multiply(B);if(H){const{k1neg:W,k1:ne,k2neg:J,k2:I}=H.splitScalar(B),{p1:_,p2:L}=dne(R,j,ne,I);return k(H.beta,_,L,W,J)}else return F.wNAFCachedUnsafe(j,B)}multiplyAndAddUnsafe(B,H,j){const W=this.multiplyUnsafe(H).add(B.multiplyUnsafe(j));return W.is0()?void 0:W}toAffine(B){return T(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return s===Lm?!0:B?B(R,this):F.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:B}=e;return s===Lm?this:B?B(R,this):this.multiplyUnsafe(s)}toBytes(B=!0){return DE("isCompressed",B),this.assertValidity(),p(R,this,B)}toRawBytes(B=!0){return this.toBytes(B)}toHex(B=!0){return I0(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}R.BASE=new R(n.Gx,n.Gy,t.ONE),R.ZERO=new R(t.ZERO,t.ONE,t.ZERO),R.Fp=t,R.Fn=r;const P=r.BITS,F=hne(R,e.endo?Math.ceil(P/2):P);return R}function Gk(n){return Uint8Array.of(n?2:3)}function Nne(n,e,t={}){Pv(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Fp,s=e.hmac||((j,...W)=>Iv(e.hash,j,xu(...W))),{Fp:i,Fn:o}=n,{ORDER:l,BITS:h}=o;function d(j){const W=l>>Lm;return j>W}function p(j){return d(j)?o.neg(j):j}function g(j,W){if(!o.isValidNot0(W))throw new Error(`invalid signature ${j}: out of range 1..CURVE.n`)}class y{constructor(W,ne,J){g("r",W),g("s",ne),this.r=W,this.s=ne,J!=null&&(this.recovery=J),Object.freeze(this)}static fromCompact(W){const ne=o.BYTES,J=ms("compactSignature",W,ne*2);return new y(o.fromBytes(J.subarray(0,ne)),o.fromBytes(J.subarray(ne,ne*2)))}static fromDER(W){const{r:ne,s:J}=_o.toSig(ms("DER",W));return new y(ne,J)}assertValidity(){}addRecoveryBit(W){return new y(this.r,this.s,W)}recoverPublicKey(W){const ne=i.ORDER,{r:J,s:I,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(l*Cne<ne&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=_===2||_===3?J+l:J;if(!i.isValid(L))throw new Error("recovery id 2 or 3 invalid");const q=i.toBytes(L),K=n.fromHex(xu(Gk((_&1)===0),q)),O=o.inv(L),V=N(ms("msgHash",W)),Z=o.create(-V*O),re=o.create(I*O),ee=n.BASE.multiplyUnsafe(Z).add(K.multiplyUnsafe(re));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toBytes(W){if(W==="compact")return xu(o.toBytes(this.r),o.toBytes(this.s));if(W==="der")return Px(_o.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return I0(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return I0(this.toBytes("compact"))}}const b=qk(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),E={isValidPrivateKey(j){try{return b(j),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const j=l;return one(r(Fk(j)),j)},precompute(j=8,W=n.BASE){return W.precompute(j,!1)}};function v(j,W=!0){return n.fromPrivateKey(j).toBytes(W)}function A(j){if(typeof j=="bigint")return!1;if(j instanceof n)return!0;const W=ms("key",j).length,ne=i.BYTES,J=ne+1,I=2*ne+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===J))return W===J||W===I}function S(j,W,ne=!0){if(A(j)===!0)throw new Error("first arg must be private key");if(A(W)===!1)throw new Error("second arg must be public key");return n.fromHex(W).multiply(b(j)).toBytes(ne)}const T=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const W=Rv(j),ne=j.length*8-h;return ne>0?W>>BigInt(ne):W},N=e.bits2int_modN||function(j){return o.create(T(j))},k=Dv(h);function R(j){return iS("num < 2^"+h,j,Bm,k),o.toBytes(j)}function P(j,W,ne=F){if(["recovered","canonical"].some(ee=>ee in ne))throw new Error("sign() legacy options not supported");const{hash:J}=e;let{lowS:I,prehash:_,extraEntropy:L}=ne;I==null&&(I=!0),j=ms("msgHash",j),SP(ne),_&&(j=ms("prehashed msgHash",J(j)));const q=N(j),K=b(W),O=[R(K),R(q)];if(L!=null&&L!==!1){const ee=L===!0?r(i.BYTES):L;O.push(ms("extraEntropy",ee))}const V=xu(...O),Z=q;function re(ee){const he=T(ee);if(!o.isValidNot0(he))return;const me=o.inv(he),Ce=n.BASE.multiply(he).toAffine(),Pe=o.create(Ce.x);if(Pe===Bm)return;const Ne=o.create(me*o.create(Z+Pe*K));if(Ne===Bm)return;let Qe=(Ce.x===Pe?0:2)|Number(Ce.y&Lm),Qt=Ne;return I&&d(Ne)&&(Qt=p(Ne),Qe^=1),new y(Pe,Qt,Qe)}return{seed:V,k2sig:re}}const F={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function B(j,W,ne=F){const{seed:J,k2sig:I}=P(j,W,ne);return Xte(e.hash.outputLen,o.BYTES,s)(J,I)}n.BASE.precompute(8);function H(j,W,ne,J=$){const I=j;W=ms("msgHash",W),ne=ms("publicKey",ne),SP(J);const{lowS:_,prehash:L,format:q}=J;if("strict"in J)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&!["compact","der","js"].includes(q))throw new Error('format must be "compact", "der" or "js"');const K=typeof I=="string"||Ox(I),O=!K&&!q&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!K&&!O)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,Z;try{if(O)if(q===void 0||q==="js")V=new y(I.r,I.s);else throw new Error("invalid format");if(K){try{q!=="compact"&&(V=y.fromDER(I))}catch(Qe){if(!(Qe instanceof _o.Err))throw Qe}!V&&q!=="der"&&(V=y.fromCompact(I))}Z=n.fromHex(ne)}catch{return!1}if(!V||_&&V.hasHighS())return!1;L&&(W=e.hash(W));const{r:re,s:ee}=V,he=N(W),me=o.inv(ee),Ce=o.create(he*me),Pe=o.create(re*me),Ne=n.BASE.multiplyUnsafe(Ce).add(Z.multiplyUnsafe(Pe));return Ne.is0()?!1:o.create(Ne.x)===re}return Object.freeze({getPublicKey:v,getSharedSecret:S,sign:B,verify:H,utils:E,Point:n,Signature:y})}function Tne(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=zp(e.n,n.nBitLength),s={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function Ine(n){const{CURVE:e,curveOpts:t}=Tne(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function One(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function Rne(n){const{CURVE:e,curveOpts:t,ecdsaOpts:r}=Ine(n),s=xne(e,t),i=Nne(s,r,t);return One(n,i)}function oS(n,e){const t=r=>Rne({...n,hash:r});return{...t(e),create:t}}const Vk={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Kk={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Wk={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Dne=zp(Vk.p),Pne=zp(Kk.p),Une=zp(Wk.p),kne=oS({...Vk,Fp:Dne,lowS:!1},Tv);oS({...Kk,Fp:Pne,lowS:!1},jee),oS({...Wk,Fp:Une,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Hee);const Bne=kne,Yk="base10",Zr="base16",Wi="base64pad",Vc="base64url",Ny="utf8",Qk=0,zo=1,Ty=2,Lne=0,xP=1,Mm=12,$x=32;function Mne(){const n=aS.utils.randomPrivateKey(),e=aS.getPublicKey(n);return{privateKey:As(n,Zr),publicKey:As(e,Zr)}}function cS(){const n=Fp($x);return As(n,Zr)}function $ne(n,e){const t=aS.getSharedSecret(vi(n,Zr),vi(e,Zr)),r=Yte(Ov,t,void 0,void 0,$x);return As(r,Zr)}function Vb(n){const e=Ov(vi(n,Zr));return As(e,Zr)}function Da(n){const e=Ov(vi(n,Ny));return As(e,Zr)}function Zk(n){return vi(`${n}`,Yk)}function Eh(n){return Number(As(n,Yk))}function Xk(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Jk(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function Fne(n){const e=Zk(typeof n.type<"u"?n.type:Qk);if(Eh(e)===zo&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?vi(n.senderPublicKey,Zr):void 0,r=typeof n.iv<"u"?vi(n.iv,Zr):Fp(Mm),s=vi(n.symKey,Zr),i=Rk(s,r).encrypt(vi(n.message,Ny)),o=eB({type:e,sealed:i,iv:r,senderPublicKey:t});return n.encoding===Vc?Xk(o):o}function zne(n){const e=vi(n.symKey,Zr),{sealed:t,iv:r}=R0({encoded:n.encoded,encoding:n.encoding}),s=Rk(e,r).decrypt(t);if(s===null)throw new Error("Failed to decrypt");return As(s,Ny)}function Hne(n,e){const t=Zk(Ty),r=Fp(Mm),s=vi(n,Ny),i=eB({type:t,sealed:s,iv:r});return e===Vc?Xk(i):i}function jne(n,e){const{sealed:t}=R0({encoded:n,encoding:e});return As(t,Ny)}function eB(n){if(Eh(n.type)===Ty)return As(Um([n.type,n.sealed]),Wi);if(Eh(n.type)===zo){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return As(Um([n.type,n.senderPublicKey,n.iv,n.sealed]),Wi)}return As(Um([n.type,n.iv,n.sealed]),Wi)}function R0(n){const e=(n.encoding||Wi)===Vc?Jk(n.encoded):n.encoded,t=vi(e,Wi),r=t.slice(Lne,xP),s=xP;if(Eh(r)===zo){const h=s+$x,d=h+Mm,p=t.slice(s,h),g=t.slice(h,d),y=t.slice(d);return{type:r,sealed:y,iv:g,senderPublicKey:p}}if(Eh(r)===Ty){const h=t.slice(s),d=Fp(Mm);return{type:r,sealed:h,iv:d}}const i=s+Mm,o=t.slice(s,i),l=t.slice(i);return{type:r,sealed:l,iv:o}}function qne(n,e){const t=R0({encoded:n,encoding:e==null?void 0:e.encoding});return tB({type:Eh(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?As(t.senderPublicKey,Zr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function tB(n){const e=(n==null?void 0:n.type)||Qk;if(e===zo){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function NP(n){return n.type===zo&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function TP(n){return n.type===Ty}function Gne(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return Um([new Uint8Array([4]),e,t])}function Vne(n,e){const[t,r,s]=n.split("."),i=Buffer.from(Jk(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),l=i.slice(32,64),h=`${t}.${r}`,d=Ov(h),p=Gne(e);if(!Bne.verify(Um([o,l]),d,p))throw new Error("Invalid signature");return q2(n).payload}const Kne="irn";function UE(n){return(n==null?void 0:n.relay)||{protocol:Kne}}function xm(n){const e=OJ[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}function Wne(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=n[s];t[i]=o}}),t}function IP(n){if(!n.includes("wc:")){const d=dk(n);d!=null&&d.includes("wc:")&&(n=d)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),s=n.substring(e+1,t).split("@"),i=typeof t<"u"?n.substring(t):"",o=new URLSearchParams(i),l={};o.forEach((d,p)=>{l[p]=d});const h=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:r,topic:Yne(s[0]),version:parseInt(s[1],10),symKey:l.symKey,relay:Wne(l),methods:h,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function Yne(n){return n.startsWith("//")?n.substring(2):n}function Qne(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(s=>{const i=s,o=t+e+i;n[i]&&(r[o]=n[i])}),r}function OP(n){const e=new URLSearchParams,t=Qne(n.relay);Object.keys(t).sort().forEach(s=>{e.set(s,t[s])}),e.set("symKey",n.symKey),n.expiryTimestamp&&e.set("expiryTimestamp",n.expiryTimestamp.toString()),n.methods&&e.set("methods",n.methods.join(","));const r=e.toString();return`${n.protocol}:${n.topic}@${n.version}?${r}`}function Ab(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var Zne=Object.defineProperty,Xne=Object.defineProperties,Jne=Object.getOwnPropertyDescriptors,RP=Object.getOwnPropertySymbols,ere=Object.prototype.hasOwnProperty,tre=Object.prototype.propertyIsEnumerable,DP=(n,e,t)=>e in n?Zne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,nre=(n,e)=>{for(var t in e||(e={}))ere.call(e,t)&&DP(n,t,e[t]);if(RP)for(var t of RP(e))tre.call(e,t)&&DP(n,t,e[t]);return n},rre=(n,e)=>Xne(n,Jne(e));function Hp(n){const e=[];return n.forEach(t=>{const[r,s]=t.split(":");e.push(`${r}:${s}`)}),e}function sre(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Hp(t.accounts))}),e}function ire(n,e){const t=[];return Object.values(n).forEach(r=>{Hp(r.accounts).includes(e)&&t.push(...r.methods)}),t}function are(n,e){const t=[];return Object.values(n).forEach(r=>{Hp(r.accounts).includes(e)&&t.push(...r.events)}),t}function Uv(n){return n.includes(":")}function rf(n){return Uv(n)?n.split(":")[0]:n}function PP(n){var e,t,r;const s={};if(!yl(n))return s;for(const[i,o]of Object.entries(n)){const l=Uv(i)?[i]:o.chains,h=o.methods||[],d=o.events||[],p=rf(i);s[p]=rre(nre({},s[p]),{chains:za(l,(e=s[p])==null?void 0:e.chains),methods:za(h,(t=s[p])==null?void 0:t.methods),events:za(d,(r=s[p])==null?void 0:r.events)})}return s}function ore(n){const e={};return n==null||n.forEach(t=>{var r;const[s,i]=t.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(t),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function UP(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=ore(e);for(const[r,s]of Object.entries(t))s.methods?s.methods=za(s.methods,n):s.methods=n,s.events=["chainChanged","accountsChanged"];return t}function cre(n,e){var t,r,s,i,o,l;const h=PP(n),d=PP(e),p={},g=Object.keys(h).concat(Object.keys(d));for(const y of g)p[y]={chains:za((t=h[y])==null?void 0:t.chains,(r=d[y])==null?void 0:r.chains),methods:za((s=h[y])==null?void 0:s.methods,(i=d[y])==null?void 0:i.methods),events:za((o=h[y])==null?void 0:o.events,(l=d[y])==null?void 0:l.events)};return p}const lre={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ure={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(n,e){const{message:t,code:r}=ure[n];return{message:e?`${t} ${e}`:t,code:r}}function yn(n,e){const{message:t,code:r}=lre[n];return{message:e?`${t} ${e}`:t,code:r}}function Ho(n,e){return!!Array.isArray(n)}function yl(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function gr(n){return typeof n>"u"}function kn(n,e){return e&&gr(n)?!0:typeof n=="string"&&!!n.trim().length}function Fx(n,e){return e&&gr(n)?!0:typeof n=="number"&&!isNaN(n)}function hre(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),s=Object.keys(t);let i=!0;return Su(s,r)?(r.forEach(o=>{const{accounts:l,methods:h,events:d}=n.namespaces[o],p=Hp(l),g=t[o];(!Su(ok(o,g),p)||!Su(g.methods,h)||!Su(g.events,d))&&(i=!1)}),i):!1}function kE(n){return kn(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function dre(n){if(kn(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&kE(t)}}return!1}function fre(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(kn(n,!1)){if(e(n))return!0;const t=dk(n);return e(t)}}catch{}return!1}function pre(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function gre(n){return n==null?void 0:n.topic}function mre(n,e){let t=null;return kn(n==null?void 0:n.publicKey,!1)||(t=xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function kP(n){let e=!0;return Ho(n)?n.length&&(e=n.every(t=>kn(t,!1))):e=!1,e}function yre(n,e,t){let r=null;return Ho(e)&&e.length?e.forEach(s=>{r||kE(s)||(r=yn("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):kE(n)||(r=yn("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function wre(n,e,t){let r=null;return Object.entries(n).forEach(([s,i])=>{if(r)return;const o=yre(s,ok(s,i),`${e} ${t}`);o&&(r=o)}),r}function bre(n,e){let t=null;return Ho(n)?n.forEach(r=>{t||dre(r)||(t=yn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=yn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Ere(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=bre(r==null?void 0:r.accounts,`${e} namespace`);s&&(t=s)}),t}function vre(n,e){let t=null;return kP(n==null?void 0:n.methods)?kP(n==null?void 0:n.events)||(t=yn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=yn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function nB(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=vre(r,`${e}, namespace`);s&&(t=s)}),t}function Are(n,e,t){let r=null;if(n&&yl(n)){const s=nB(n,e);s&&(r=s);const i=wre(n,e,t);i&&(r=i)}else r=xe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function m_(n,e){let t=null;if(n&&yl(n)){const r=nB(n,e);r&&(t=r);const s=Ere(n,e);s&&(t=s)}else t=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function rB(n){return kn(n.protocol,!0)}function Cre(n,e){let t=!1;return n?n&&Ho(n)&&n.length&&n.forEach(r=>{t=rB(r)}):t=!0,t}function _re(n){return typeof n=="number"}function ds(n){return typeof n<"u"&&typeof n!==null}function Sre(n){return!(!n||typeof n!="object"||!n.code||!Fx(n.code,!1)||!n.message||!kn(n.message,!1))}function xre(n){return!(gr(n)||!kn(n.method,!1))}function Nre(n){return!(gr(n)||gr(n.result)&&gr(n.error)||!Fx(n.id,!1)||!kn(n.jsonrpc,!1))}function Tre(n){return!(gr(n)||!kn(n.name,!1))}function BP(n,e){return!(!kE(e)||!sre(n).includes(e))}function Ire(n,e,t){return kn(t,!1)?ire(n,e).includes(t):!1}function Ore(n,e,t){return kn(t,!1)?are(n,e).includes(t):!1}function LP(n,e,t){let r=null;const s=Rre(n),i=Dre(e),o=Object.keys(s),l=Object.keys(i),h=MP(Object.keys(n)),d=MP(Object.keys(e)),p=h.filter(g=>!d.includes(g));return p.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(e).toString()}`)),Su(o,l)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||r)return;const y=Hp(e[g].accounts);y.includes(g)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${y.toString()}`))}),o.forEach(g=>{r||(Su(s[g].methods,i[g].methods)?Su(s[g].events,i[g].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${g}`)):r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${g}`))}),r}function Rre(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(s=>{e[s]={methods:n[t].methods,events:n[t].events}})}),e}function MP(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Dre(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const r=Hp(n[t].accounts);r==null||r.forEach(s=>{e[s]={accounts:n[t].accounts.filter(i=>i.includes(`${s}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function Pre(n,e){return Fx(n,!1)&&n<=e.max&&n>=e.min}function $P(){const n=Sy();return new Promise(e=>{switch(n){case Gs.browser:e(Ure());break;case Gs.reactNative:e(kre());break;case Gs.node:e(Bre());break;default:e(!0)}})}function Ure(){return $p()&&(navigator==null?void 0:navigator.onLine)}async function kre(){if(Dl()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function Bre(){return!0}function Lre(n){switch(Sy()){case Gs.browser:Mre(n);break;case Gs.reactNative:$re(n);break}}function Mre(n){!Dl()&&$p()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function $re(n){Dl()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}function Fre(){var n;return $p()&&Wo.getDocument()?((n=Wo.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const y_={};class um{static get(e){return y_[e]}static set(e,t){y_[e]=t}static delete(e){delete y_[e]}}function zre(n){const e=Mp.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Hre({publicKey:n,signature:e,payload:t}){var r;const s=lS(t.method),i=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),o=Gre(t.address),l=t.era==="00"?new Uint8Array([0]):lS(t.era);if(l.length!==1&&l.length!==2)throw new Error("Invalid era length");const h=parseInt(t.nonce,16),d=new Uint8Array([h&255,h>>8&255]),p=BigInt(`0x${qre(t.tip)}`),g=Kre(p),y=new Uint8Array([0,...n,o,...e,...l,...d,...g,...s]),b=Vre(y.length+1);return new Uint8Array([...b,i,...y])}function jre(n){const e=lS(n),t=UJ.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function lS(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function qre(n){return n.startsWith("0x")?n.slice(2):n}function Gre(n){const e=Mp.decode(n)[0];return e===42?0:e===60?2:1}function Vre(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Kre(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Wre(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=zre(n.transaction.address),r=Hre({publicKey:t,signature:e,payload:n.transaction}),s=Buffer.from(r).toString("hex");return jre(s)}const Yre="PARSE_ERROR",Qre="INVALID_REQUEST",Zre="METHOD_NOT_FOUND",Xre="INVALID_PARAMS",sB="INTERNAL_ERROR",zx="SERVER_ERROR",Jre=[-32700,-32600,-32601,-32602,-32603],$m={[Yre]:{code:-32700,message:"Parse error"},[Qre]:{code:-32600,message:"Invalid Request"},[Zre]:{code:-32601,message:"Method not found"},[Xre]:{code:-32602,message:"Invalid params"},[sB]:{code:-32603,message:"Internal error"},[zx]:{code:-32e3,message:"Server error"}},iB=zx;function ese(n){return Jre.includes(n)}function FP(n){return Object.keys($m).includes(n)?$m[n]:$m[iB]}function tse(n){const e=Object.values($m).find(t=>t.code===n);return e||$m[iB]}function aB(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var w_={},mo={},zP;function nse(){if(zP)return mo;zP=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.isBrowserCryptoAvailable=mo.getSubtleCrypto=mo.getBrowerCrypto=void 0;function n(){return(Oa==null?void 0:Oa.crypto)||(Oa==null?void 0:Oa.msCrypto)||{}}mo.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}mo.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return mo.isBrowserCryptoAvailable=t,mo}var yo={},HP;function rse(){if(HP)return yo;HP=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.isBrowser=yo.isNode=yo.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yo.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yo.isNode=e;function t(){return!n()&&!e()}return yo.isBrowser=t,yo}var jP;function sse(){return jP||(jP=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=by;e.__exportStar(nse(),n),e.__exportStar(rse(),n)}(w_)),w_}var ise=sse();function wa(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function Iu(n=6){return BigInt(wa(n))}function fl(n,e,t){return{id:t||wa(),jsonrpc:"2.0",method:n,params:e}}function kv(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Bv(n,e,t){return{id:n,jsonrpc:"2.0",error:ase(e)}}function ase(n,e){return typeof n>"u"?FP(sB):(typeof n=="string"&&(n=Object.assign(Object.assign({},FP(zx)),{message:n})),ese(n.code)&&(n=tse(n.code)),n)}let ose=class{},cse=class extends ose{constructor(){super()}},lse=class extends cse{constructor(e){super()}};const use="^https?:",hse="^wss?:";function dse(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function oB(n,e){const t=dse(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function qP(n){return oB(n,use)}function GP(n){return oB(n,hse)}function fse(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function cB(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Hx(n){return cB(n)&&"method"in n}function Lv(n){return cB(n)&&(ba(n)||bi(n))}function ba(n){return"result"in n}function bi(n){return"error"in n}let Si=class extends lse{constructor(e){super(e),this.events=new _i.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(fl(e.method,e.params||[],e.id||Iu().toString()),t)}async requestStrict(e,t){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{bi(i)?s(i.error):r(i.result)});try{await this.connection.send(e,t)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Lv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const pse=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),gse=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",VP=n=>n.split("?")[0],KP=10,mse=pse();let yse=class{constructor(e){if(this.url=e,this.events=new _i.EventEmitter,this.registering=!1,!GP(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ko(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!GP(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const s=ise.isReactNative()?void 0:{rejectUnauthorized:!fse(e)},i=new mse(e,[],s);gse()?i.onerror=o=>{const l=o;r(this.emitError(l.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?yh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),i=Bv(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return aB(e,VP(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>KP&&this.events.setMaxListeners(KP)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${VP(this.url)}`));return this.events.emit("register_error",t),t}};var wse={};const lB="wc",uB=2,uS="core",qa=`${lB}@2:${uS}:`,bse={logger:"error"},Ese={database:":memory:"},vse="crypto",WP="client_ed25519_seed",Ase=Se.ONE_DAY,Cse="keychain",_se="0.3",Sse="messages",xse="0.3",YP=Se.SIX_HOURS,Nse="publisher",hB="irn",Tse="error",dB="wss://relay.walletconnect.org",Ise="relayer",tr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ose="_subscription",ci={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Rse=.1,hS="2.21.3",dn={link_mode:"link_mode",relay:"relay"},Kb={inbound:"inbound",outbound:"outbound"},Dse="0.3",Pse="WALLETCONNECT_CLIENT_ID",QP="WALLETCONNECT_LINK_MODE_APPS",Bs={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Use="subscription",kse="0.3",Bse="pairing",Lse="0.3",hm={wc_pairingDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:0},res:{ttl:Se.ONE_DAY,prompt:!1,tag:0}}},gu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ri={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Mse="history",$se="0.3",Fse="expirer",hi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zse="0.3",Hse="verify-api",jse="https://verify.walletconnect.com",fB="https://verify.walletconnect.org",Fm=fB,qse=`${Fm}/v3`,Gse=[jse,fB],Vse="echo",Kse="https://echo.walletconnect.com",ya={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Eo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Di={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ru={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},su={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},dm={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Wse=.1,Yse="event-client",Qse=86400,Zse="https://pulse.walletconnect.org/batch";function Xse(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,h=n.charAt(0),d=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var v=0,A=0,S=0,T=E.length;S!==T&&E[S]===0;)S++,v++;for(var N=(T-S)*p+1>>>0,k=new Uint8Array(N);S!==T;){for(var R=E[S],P=0,F=N-1;(R!==0||P<A)&&F!==-1;F--,P++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=P,S++}for(var $=N-A;$!==N&&k[$]===0;)$++;for(var B=h.repeat(v);$<N;++$)B+=n.charAt(k[$]);return B}function y(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var v=0;if(E[v]!==" "){for(var A=0,S=0;E[v]===h;)A++,v++;for(var T=(E.length-v)*d+1>>>0,N=new Uint8Array(T);E[v];){var k=t[E.charCodeAt(v)];if(k===255)return;for(var R=0,P=T-1;(k!==0||R<S)&&P!==-1;P--,R++)k+=l*N[P]>>>0,N[P]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,v++}if(E[v]!==" "){for(var F=T-S;F!==T&&N[F]===0;)F++;for(var $=new Uint8Array(A+(T-F)),B=A;F!==T;)$[B++]=N[F++];return $}}}function b(E){var v=y(E);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var Jse=Xse,eie=Jse;const pB=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},tie=n=>new TextEncoder().encode(n),nie=n=>new TextDecoder().decode(n);class rie{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sie{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gB(this,e)}}class iie{constructor(e){this.decoders=e}or(e){return gB(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gB=(n,e)=>new iie({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class aie{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new rie(e,t,r),this.decoder=new sie(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Mv=({name:n,prefix:e,encode:t,decode:r})=>new aie(n,e,t,r),Iy=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=eie(t,e);return Mv({prefix:n,name:e,encode:r,decode:i=>pB(s(i))})},oie=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,h=0,d=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|g,l+=t,l>=8&&(l-=8,o[d++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return o},cie=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let h=0;h<n.length;++h)for(l=l<<8|n[h],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},vr=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Mv({prefix:e,name:n,encode(s){return cie(s,r,t)},decode(s){return oie(s,r,t,n)}}),lie=Mv({prefix:"\0",name:"identity",encode:n=>nie(n),decode:n=>tie(n)});var uie=Object.freeze({__proto__:null,identity:lie});const hie=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var die=Object.freeze({__proto__:null,base2:hie});const fie=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var pie=Object.freeze({__proto__:null,base8:fie});const gie=Iy({prefix:"9",name:"base10",alphabet:"0123456789"});var mie=Object.freeze({__proto__:null,base10:gie});const yie=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wie=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var bie=Object.freeze({__proto__:null,base16:yie,base16upper:wie});const Eie=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vie=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Aie=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cie=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_ie=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Sie=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xie=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nie=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tie=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Iie=Object.freeze({__proto__:null,base32:Eie,base32upper:vie,base32pad:Aie,base32padupper:Cie,base32hex:_ie,base32hexupper:Sie,base32hexpad:xie,base32hexpadupper:Nie,base32z:Tie});const Oie=Iy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rie=Iy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Die=Object.freeze({__proto__:null,base36:Oie,base36upper:Rie});const Pie=Iy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Uie=Iy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kie=Object.freeze({__proto__:null,base58btc:Pie,base58flickr:Uie});const Bie=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lie=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mie=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$ie=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Fie=Object.freeze({__proto__:null,base64:Bie,base64pad:Lie,base64url:Mie,base64urlpad:$ie});const mB=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),zie=mB.reduce((n,e,t)=>(n[t]=e,n),[]),Hie=mB.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function jie(n){return n.reduce((e,t)=>(e+=zie[t],e),"")}function qie(n){const e=[];for(const t of n){const r=Hie[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const Gie=Mv({prefix:"🚀",name:"base256emoji",encode:jie,decode:qie});var Vie=Object.freeze({__proto__:null,base256emoji:Gie}),Kie=yB,ZP=128,Wie=-128,Yie=Math.pow(2,31);function yB(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Yie;)e[t++]=n&255|ZP,n/=128;for(;n&Wie;)e[t++]=n&255|ZP,n>>>=7;return e[t]=n|0,yB.bytes=t-r+1,e}var Qie=dS,Zie=128,XP=127;function dS(n,r){var t=0,r=r||0,s=0,i=r,o,l=n.length;do{if(i>=l)throw dS.bytes=0,new RangeError("Could not decode varint");o=n[i++],t+=s<28?(o&XP)<<s:(o&XP)*Math.pow(2,s),s+=7}while(o>=Zie);return dS.bytes=i-r,t}var Xie=Math.pow(2,7),Jie=Math.pow(2,14),eae=Math.pow(2,21),tae=Math.pow(2,28),nae=Math.pow(2,35),rae=Math.pow(2,42),sae=Math.pow(2,49),iae=Math.pow(2,56),aae=Math.pow(2,63),oae=function(n){return n<Xie?1:n<Jie?2:n<eae?3:n<tae?4:n<nae?5:n<rae?6:n<sae?7:n<iae?8:n<aae?9:10},cae={encode:Kie,decode:Qie,encodingLength:oae},wB=cae;const JP=(n,e,t=0)=>(wB.encode(n,e,t),e),e8=n=>wB.encodingLength(n),fS=(n,e)=>{const t=e.byteLength,r=e8(n),s=r+e8(t),i=new Uint8Array(s+t);return JP(n,i,0),JP(t,i,r),i.set(e,s),new lae(n,t,e,i)};class lae{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const bB=({name:n,code:e,encode:t})=>new uae(n,e,t);class uae{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?fS(this.code,t):t.then(r=>fS(this.code,r))}else throw Error("Unknown type, must be binary type")}}const EB=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),hae=bB({name:"sha2-256",code:18,encode:EB("SHA-256")}),dae=bB({name:"sha2-512",code:19,encode:EB("SHA-512")});var fae=Object.freeze({__proto__:null,sha256:hae,sha512:dae});const vB=0,pae="identity",AB=pB,gae=n=>fS(vB,AB(n)),mae={code:vB,name:pae,encode:AB,digest:gae};var yae=Object.freeze({__proto__:null,identity:mae});new TextEncoder,new TextDecoder;const t8={...uie,...die,...pie,...mie,...bie,...Iie,...Die,...kie,...Fie,...Vie};({...fae,...yae});function CB(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function wae(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?CB(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function _B(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const n8=_B("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),b_=_B("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=wae(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),bae={utf8:n8,"utf-8":n8,hex:t8.base16,latin1:b_,ascii:b_,binary:b_,...t8};function Eae(n,e="utf8"){const t=bae[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?CB(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var vae=Object.defineProperty,Aae=(n,e,t)=>e in n?vae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ga=(n,e,t)=>Aae(n,typeof e!="symbol"?e+"":e,t);class Cae{constructor(e,t){this.core=e,this.logger=t,ga(this,"keychain",new Map),ga(this,"name",Cse),ga(this,"version",_se),ga(this,"initialized",!1),ga(this,"storagePrefix",qa),ga(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ga(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ga(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ga(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=xe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ga(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=kr(t,this.name)}get context(){return Ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Z2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?X2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _ae=Object.defineProperty,Sae=(n,e,t)=>e in n?_ae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hr=(n,e,t)=>Sae(n,typeof e!="symbol"?e+"":e,t);class xae{constructor(e,t,r){this.core=e,this.logger=t,hr(this,"name",vse),hr(this,"keychain"),hr(this,"randomSessionIdentifier",cS()),hr(this,"initialized",!1),hr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),hr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),hr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=OD(s);return L6(i.publicKey)}),hr(this,"generateKeyPair",()=>{this.isInitialized();const s=Mne();return this.setPrivateKey(s.publicKey,s.privateKey)}),hr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=OD(i),l=this.randomSessionIdentifier;return await oZ(l,s,Ase,o)}),hr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const l=this.getPrivateKey(s),h=$ne(l,i);return this.setSymKey(h,o)}),hr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Vb(s);return await this.keychain.set(o,s),o}),hr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),hr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),hr(this,"encode",async(s,i,o)=>{this.isInitialized();const l=tB(o),h=Ko(i);if(TP(l))return Hne(h,o==null?void 0:o.encoding);if(NP(l)){const y=l.senderPublicKey,b=l.receiverPublicKey;s=await this.generateSharedKey(y,b)}const d=this.getSymKey(s),{type:p,senderPublicKey:g}=l;return Fne({type:p,symKey:d,message:h,senderPublicKey:g,encoding:o==null?void 0:o.encoding})}),hr(this,"decode",async(s,i,o)=>{this.isInitialized();const l=qne(i,o);if(TP(l)){const h=jne(i,o==null?void 0:o.encoding);return yh(h)}if(NP(l)){const h=l.receiverPublicKey,d=l.senderPublicKey;s=await this.generateSharedKey(h,d)}try{const h=this.getSymKey(s),d=zne({symKey:h,encoded:i,encoding:o==null?void 0:o.encoding});return yh(d)}catch(h){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}}),hr(this,"getPayloadType",(s,i=Wi)=>{const o=R0({encoded:s,encoding:i});return Eh(o.type)}),hr(this,"getPayloadSenderPublicKey",(s,i=Wi)=>{const o=R0({encoded:s,encoding:i});return o.senderPublicKey?As(o.senderPublicKey,Zr):void 0}),this.core=e,this.logger=kr(t,this.name),this.keychain=r||new Cae(this.core,this.logger)}get context(){return Ss(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(WP)}catch{e=cS(),await this.keychain.set(WP,e)}return Eae(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nae=Object.defineProperty,Tae=Object.defineProperties,Iae=Object.getOwnPropertyDescriptors,r8=Object.getOwnPropertySymbols,Oae=Object.prototype.hasOwnProperty,Rae=Object.prototype.propertyIsEnumerable,pS=(n,e,t)=>e in n?Nae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dae=(n,e)=>{for(var t in e||(e={}))Oae.call(e,t)&&pS(n,t,e[t]);if(r8)for(var t of r8(e))Rae.call(e,t)&&pS(n,t,e[t]);return n},Pae=(n,e)=>Tae(n,Iae(e)),Us=(n,e,t)=>pS(n,typeof e!="symbol"?e+"":e,t);class Uae extends iW{constructor(e,t){super(e,t),this.logger=e,this.core=t,Us(this,"messages",new Map),Us(this,"messagesWithoutClientAck",new Map),Us(this,"name",Sse),Us(this,"version",xse),Us(this,"initialized",!1),Us(this,"storagePrefix",qa),Us(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Us(this,"set",async(r,s,i)=>{this.isInitialized();const o=Da(s);let l=this.messages.get(r);if(typeof l>"u"&&(l={}),typeof l[o]<"u")return o;if(l[o]=s,this.messages.set(r,l),i===Kb.inbound){const h=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Pae(Dae({},h),{[o]:s}))}return await this.persist(),o}),Us(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Us(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Us(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Da(s);return typeof i[o]<"u"}),Us(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Da(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Us(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=kr(e,this.name),this.core=t}get context(){return Ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Z2(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Z2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?X2(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?X2(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kae=Object.defineProperty,Bae=Object.defineProperties,Lae=Object.getOwnPropertyDescriptors,s8=Object.getOwnPropertySymbols,Mae=Object.prototype.hasOwnProperty,$ae=Object.prototype.propertyIsEnumerable,gS=(n,e,t)=>e in n?kae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cb=(n,e)=>{for(var t in e||(e={}))Mae.call(e,t)&&gS(n,t,e[t]);if(s8)for(var t of s8(e))$ae.call(e,t)&&gS(n,t,e[t]);return n},E_=(n,e)=>Bae(n,Lae(e)),Pi=(n,e,t)=>gS(n,typeof e!="symbol"?e+"":e,t);class Fae extends aW{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Pi(this,"events",new _i.EventEmitter),Pi(this,"name",Nse),Pi(this,"queue",new Map),Pi(this,"publishTimeout",Se.toMiliseconds(Se.ONE_MINUTE)),Pi(this,"initialPublishTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),Pi(this,"needsTransportRestart",!1),Pi(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const l=(i==null?void 0:i.ttl)||YP,h=UE(i),d=(i==null?void 0:i.prompt)||!1,p=(i==null?void 0:i.tag)||0,g=(i==null?void 0:i.id)||Iu().toString(),y={topic:r,message:s,opts:{ttl:l,relay:h,prompt:d,tag:p,id:g,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},b=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{const E=new Promise(async v=>{const A=({id:T})=>{y.opts.id===T&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(tr.publish,A),v(y))};this.relayer.events.on(tr.publish,A);const S=dl(new Promise((T,N)=>{this.rpcPublish({topic:r,message:s,ttl:l,prompt:d,tag:p,id:g,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(T).catch(k=>{this.logger.warn(k,k==null?void 0:k.message),N(k)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await S,this.events.removeListener(tr.publish,A)}catch(T){this.queue.set(g,E_(Cb({},y),{attempt:1})),this.logger.warn(T,T==null?void 0:T.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:s,opts:i}}),await dl(E,this.publishTimeout,b)}catch(E){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(E),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw E}finally{this.queue.delete(g)}}),Pi(this,"on",(r,s)=>{this.events.on(r,s)}),Pi(this,"once",(r,s)=>{this.events.once(r,s)}),Pi(this,"off",(r,s)=>{this.events.off(r,s)}),Pi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=kr(t,this.name),this.registerEventListeners()}get context(){return Ss(this.logger)}async rpcPublish(e){var t,r,s,i;const{topic:o,message:l,ttl:h=YP,prompt:d,tag:p,id:g,attestation:y,tvf:b}=e,E={method:xm(UE().protocol).publish,params:Cb({topic:o,message:l,ttl:h,prompt:d,tag:p,attestation:y},b),id:g};gr((t=E.params)==null?void 0:t.prompt)&&((r=E.params)==null||delete r.prompt),gr((s=E.params)==null?void 0:s.tag)&&((i=E.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:E});const v=await this.relayer.request(E);return this.relayer.events.emit(tr.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const r=e.attempt+1;this.queue.set(t,E_(Cb({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(E_(Cb({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:l,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Dh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tr.connection_stalled);return}this.checkQueue()}),this.relayer.on(tr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var zae=Object.defineProperty,Hae=(n,e,t)=>e in n?zae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rd=(n,e,t)=>Hae(n,typeof e!="symbol"?e+"":e,t);class jae{constructor(){Rd(this,"map",new Map),Rd(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),Rd(this,"get",e=>this.map.get(e)||[]),Rd(this,"exists",(e,t)=>this.get(e).includes(t)),Rd(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const s=r.filter(i=>i!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Rd(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var qae=Object.defineProperty,Gae=Object.defineProperties,Vae=Object.getOwnPropertyDescriptors,i8=Object.getOwnPropertySymbols,Kae=Object.prototype.hasOwnProperty,Wae=Object.prototype.propertyIsEnumerable,mS=(n,e,t)=>e in n?qae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fm=(n,e)=>{for(var t in e||(e={}))Kae.call(e,t)&&mS(n,t,e[t]);if(i8)for(var t of i8(e))Wae.call(e,t)&&mS(n,t,e[t]);return n},v_=(n,e)=>Gae(n,Vae(e)),an=(n,e,t)=>mS(n,typeof e!="symbol"?e+"":e,t);class Yae extends lW{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,an(this,"subscriptions",new Map),an(this,"topicMap",new jae),an(this,"events",new _i.EventEmitter),an(this,"name",Use),an(this,"version",kse),an(this,"pending",new Map),an(this,"cached",[]),an(this,"initialized",!1),an(this,"storagePrefix",qa),an(this,"subscribeTimeout",Se.toMiliseconds(Se.ONE_MINUTE)),an(this,"initialSubscribeTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),an(this,"clientId"),an(this,"batchSubscribeTopicsLimit",500),an(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),an(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=UE(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const l=await this.rpcSubscribe(r,i,s);return typeof l=="string"&&(this.onSubscribe(l,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),l}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),an(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),an(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),an(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),an(this,"on",(r,s)=>{this.events.on(r,s)}),an(this,"once",(r,s)=>{this.events.once(r,s)}),an(this,"off",(r,s)=>{this.events.off(r,s)}),an(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),an(this,"start",async()=>{await this.onConnect()}),an(this,"stop",async()=>{await this.onDisconnect()}),an(this,"restart",async()=>{await this.restore(),await this.onRestart()}),an(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),an(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Dh.pulse,async()=>{await this.checkPending()}),this.events.on(Bs.created,async r=>{const s=Bs.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Bs.deleted,async r=>{const s=Bs.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=kr(t,this.name),this.clientId=""}get context(){return Ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const s=UE(r);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const i=yn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,r){var s;(!r||(r==null?void 0:r.transportType)===dn.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:xm(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===dn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(p=>this.logger.warn(p))},Se.toMiliseconds(Se.ONE_SECOND)),l;const h=new Promise(async p=>{const g=y=>{y.topic===e&&(this.events.removeListener(Bs.created,g),p(y.id))};this.events.on(Bs.created,g);try{const y=await dl(new Promise((b,E)=>{this.relayer.request(i).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),E(v)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Bs.created,g),p(y)}catch{}}),d=await dl(h,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!d&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return d?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tr.connection_stalled),o)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:xm(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await dl(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(tr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:xm(t.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await dl(new Promise((i,o)=>{this.relayer.request(r).catch(l=>{this.logger.warn(l),o(l)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(tr.connection_stalled)}return s}rpcUnsubscribe(e,t,r){const s={method:xm(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,v_(fm({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,fm({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,fm({},t)),this.topicMap.set(t.topic,e),this.events.emit(Bs.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Bs.deleted,v_(fm({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Bs.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Bs.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>v_(fm({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await oee(Se.toMiliseconds(Se.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Da(e+await this.getClientId())}}var Qae=Object.defineProperty,a8=Object.getOwnPropertySymbols,Zae=Object.prototype.hasOwnProperty,Xae=Object.prototype.propertyIsEnumerable,yS=(n,e,t)=>e in n?Qae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,o8=(n,e)=>{for(var t in e||(e={}))Zae.call(e,t)&&yS(n,t,e[t]);if(a8)for(var t of a8(e))Xae.call(e,t)&&yS(n,t,e[t]);return n},Rt=(n,e,t)=>yS(n,typeof e!="symbol"?e+"":e,t);class Jae extends oW{constructor(e){super(e),Rt(this,"protocol","wc"),Rt(this,"version",2),Rt(this,"core"),Rt(this,"logger"),Rt(this,"events",new _i.EventEmitter),Rt(this,"provider"),Rt(this,"messages"),Rt(this,"subscriber"),Rt(this,"publisher"),Rt(this,"name",Ise),Rt(this,"transportExplicitlyClosed",!1),Rt(this,"initialized",!1),Rt(this,"connectionAttemptInProgress",!1),Rt(this,"relayUrl"),Rt(this,"projectId"),Rt(this,"packageName"),Rt(this,"bundleId"),Rt(this,"hasExperiencedNetworkDisruption",!1),Rt(this,"pingTimeout"),Rt(this,"heartBeatTimeout",Se.toMiliseconds(Se.THIRTY_SECONDS+Se.FIVE_SECONDS)),Rt(this,"reconnectTimeout"),Rt(this,"connectPromise"),Rt(this,"reconnectInProgress",!1),Rt(this,"requestsInFlight",[]),Rt(this,"connectTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),Rt(this,"request",async t=>{var r,s;this.logger.debug("Publishing Request Payload");const i=t.id||Iu().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=t.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const l=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(h=>h!==o),l}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Rt(this,"resetPingTimeout",()=>{OE()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Rt(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),Rt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(tr.connect)}),Rt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Rt(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(tr.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Rt(this,"registerProviderListeners",()=>{this.provider.on(ci.payload,this.onPayloadHandler),this.provider.on(ci.connect,this.onConnectHandler),this.provider.on(ci.disconnect,this.onDisconnectHandler),this.provider.on(ci.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?kr(e.logger,this.name):vy(Up({level:e.logger||Tse})),this.messages=new Uae(this.logger,e.core),this.subscriber=new Yae(this,this.logger),this.publisher=new Fae(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||dB,this.projectId=e.projectId,GJ()?this.packageName=YD():VJ()&&(this.bundleId=YD()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Ss(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:dn.relay},Kb.outbound)}async subscribe(e,t){var r,s,i;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=t==null?void 0:t.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=t==null?void 0:t.internal)==null?void 0:s.throwOnFailedPublish;let l=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",h;const d=p=>{p.topic===e&&(this.subscriber.off(Bs.created,d),h())};return await Promise.all([new Promise(p=>{h=p,this.subscriber.on(Bs.created,d)}),new Promise(async(p,g)=>{l=await this.subscriber.subscribe(e,o8({internal:{throwOnFailedPublish:o}},t)).catch(y=>{o&&g(y)})||l,p()})]),l}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await dl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await $P())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const s=Hn(Se.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(tr.message,e),await this.recordMessageEvent(e,Kb.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(ci.disconnect,i),await dl(new Promise((o,l)=>{this.provider.connect().then(o).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ci.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,l)=>{const h=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ci.disconnect,h),await this.subscriber.start().then(o).catch(l).finally(()=>{this.provider.off(ci.disconnect,h)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,Se.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,s,i;if(OE())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Si(new yse(ZJ({sdkVersion:hS,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:s}=e;await this.messages.set(r,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Hx(e)){if(!e.method.endsWith(Ose))return;const t=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=t.data,l={topic:r,message:s,publishedAt:i,transportType:dn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(o8({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else Lv(e)&&this.events.emit(tr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Kb.inbound),this.events.emit(tr.message,e))}async acknowledgePayload(e){const t=kv(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ci.payload,this.onPayloadHandler),this.provider.off(ci.connect,this.onConnectHandler),this.provider.off(ci.disconnect,this.onDisconnectHandler),this.provider.off(ci.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await $P();Lre(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Dh.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Fre())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(tr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Se.toMiliseconds(Rse)))))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function eoe(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function c8(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function l8(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const toe="[object RegExp]",noe="[object String]",roe="[object Number]",soe="[object Boolean]",u8="[object Arguments]",ioe="[object Symbol]",aoe="[object Date]",ooe="[object Map]",coe="[object Set]",loe="[object Array]",uoe="[object Function]",hoe="[object ArrayBuffer]",A_="[object Object]",doe="[object Error]",foe="[object DataView]",poe="[object Uint8Array]",goe="[object Uint8ClampedArray]",moe="[object Uint16Array]",yoe="[object Uint32Array]",woe="[object BigUint64Array]",boe="[object Int8Array]",Eoe="[object Int16Array]",voe="[object Int32Array]",Aoe="[object BigInt64Array]",Coe="[object Float32Array]",_oe="[object Float64Array]";function Soe(){}function h8(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function xoe(n,e,t){return Nm(n,e,void 0,void 0,void 0,void 0,t)}function Nm(n,e,t,r,s,i,o){const l=o(n,e,t,r,s,i);if(l!==void 0)return l;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return zm(n,e,i,o)}return zm(n,e,i,o)}function zm(n,e,t,r){if(Object.is(n,e))return!0;let s=l8(n),i=l8(e);if(s===u8&&(s=A_),i===u8&&(i=A_),s!==i)return!1;switch(s){case noe:return n.toString()===e.toString();case roe:{const h=n.valueOf(),d=e.valueOf();return eoe(h,d)}case soe:case aoe:case ioe:return Object.is(n.valueOf(),e.valueOf());case toe:return n.source===e.source&&n.flags===e.flags;case uoe:return n===e}t=t??new Map;const o=t.get(n),l=t.get(e);if(o!=null&&l!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(s){case ooe:{if(n.size!==e.size)return!1;for(const[h,d]of n.entries())if(!e.has(h)||!Nm(d,e.get(h),h,n,e,t,r))return!1;return!0}case coe:{if(n.size!==e.size)return!1;const h=Array.from(n.values()),d=Array.from(e.values());for(let p=0;p<h.length;p++){const g=h[p],y=d.findIndex(b=>Nm(g,b,void 0,n,e,t,r));if(y===-1)return!1;d.splice(y,1)}return!0}case loe:case poe:case goe:case moe:case yoe:case woe:case boe:case Eoe:case voe:case Aoe:case Coe:case _oe:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let h=0;h<n.length;h++)if(!Nm(n[h],e[h],h,n,e,t,r))return!1;return!0}case hoe:return n.byteLength!==e.byteLength?!1:zm(new Uint8Array(n),new Uint8Array(e),t,r);case foe:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:zm(new Uint8Array(n),new Uint8Array(e),t,r);case doe:return n.name===e.name&&n.message===e.message;case A_:{if(!(zm(n.constructor,e.constructor,t,r)||h8(n)&&h8(e)))return!1;const h=[...Object.keys(n),...c8(n)],d=[...Object.keys(e),...c8(e)];if(h.length!==d.length)return!1;for(let p=0;p<h.length;p++){const g=h[p],y=n[g];if(!Object.hasOwn(e,g))return!1;const b=e[g];if(!Nm(y,b,g,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function Noe(n,e){return xoe(n,e,Soe)}var Toe=Object.defineProperty,d8=Object.getOwnPropertySymbols,Ioe=Object.prototype.hasOwnProperty,Ooe=Object.prototype.propertyIsEnumerable,wS=(n,e,t)=>e in n?Toe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,f8=(n,e)=>{for(var t in e||(e={}))Ioe.call(e,t)&&wS(n,t,e[t]);if(d8)for(var t of d8(e))Ooe.call(e,t)&&wS(n,t,e[t]);return n},cs=(n,e,t)=>wS(n,typeof e!="symbol"?e+"":e,t);class Uh extends cW{constructor(e,t,r,s=qa,i=void 0){super(e,t,r,s),this.core=e,this.logger=t,this.name=r,cs(this,"map",new Map),cs(this,"version",Dse),cs(this,"cached",[]),cs(this,"initialized",!1),cs(this,"getKey"),cs(this,"storagePrefix",qa),cs(this,"recentlyDeleted",[]),cs(this,"recentlyDeletedLimit",200),cs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!gr(o)?this.map.set(this.getKey(o),o):pre(o)?this.map.set(o.id,o):gre(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),cs(this,"set",async(o,l)=>{this.isInitialized(),this.map.has(o)?await this.update(o,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:l}),this.map.set(o,l),await this.persist())}),cs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),cs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(l=>Object.keys(o).every(h=>Noe(l[h],o[h]))):this.values)),cs(this,"update",async(o,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:l});const h=f8(f8({},this.getData(o)),l);this.map.set(o,h),await this.persist()}),cs(this,"delete",async(o,l)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:l}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=kr(t,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Roe=Object.defineProperty,Doe=(n,e,t)=>e in n?Roe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bt=(n,e,t)=>Doe(n,typeof e!="symbol"?e+"":e,t);class Poe{constructor(e,t){this.core=e,this.logger=t,bt(this,"name",Bse),bt(this,"version",Lse),bt(this,"events",new px),bt(this,"pairings"),bt(this,"initialized",!1),bt(this,"storagePrefix",qa),bt(this,"ignoredPayloadTypes",[zo]),bt(this,"registeredMethods",[]),bt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),bt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),bt(this,"create",async r=>{this.isInitialized();const s=cS(),i=await this.core.crypto.setSymKey(s),o=Hn(Se.FIVE_MINUTES),l={protocol:hB},h={topic:i,expiry:o,relay:l,active:!1,methods:r==null?void 0:r.methods},d=OP({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:l,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(gu.create,h),this.core.expirer.set(i,o),await this.pairings.set(i,h),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:d}}),bt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ya.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:l,expiryTimestamp:h,methods:d}=IP(r.uri);s.props.properties.topic=i,s.addTrace(ya.pairing_uri_validation_success),s.addTrace(ya.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(i)){if(p=this.pairings.get(i),s.addTrace(ya.existing_pairing),p.active)throw s.setError(Eo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ya.pairing_not_expired)}const g=h||Hn(Se.FIVE_MINUTES),y={topic:i,relay:l,expiry:g,active:!1,methods:d};this.core.expirer.set(i,g),await this.pairings.set(i,y),s.addTrace(ya.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(gu.create,y),s.addTrace(ya.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ya.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Eo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:l})}catch(b){throw s.setError(Eo.subscribe_pairing_topic_failure),b}return s.addTrace(ya.subscribe_pairing_topic_success),y}),bt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Hn(Se.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),bt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:l,reject:h}=hu();this.events.once(Ht("pairing_ping",i),({error:d})=>{d?h(d):l()}),await o()}}),bt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),bt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),bt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),bt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",yn("USER_DISCONNECTED")),await this.deletePairing(s))}),bt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:l}=r,h=this.core.crypto.keychain.get(s);return OP({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:h,relay:i,expiryTimestamp:o,methods:l})}),bt(this,"sendRequest",async(r,s,i)=>{const o=fl(s,i),l=await this.core.crypto.encode(r,o),h=hm[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,l,h),o.id}),bt(this,"sendResult",async(r,s,i)=>{const o=kv(r,i),l=await this.core.crypto.encode(s,o),h=(await this.core.history.get(s,r)).request.method,d=hm[h].res;await this.core.relayer.publish(s,l,d),await this.core.history.resolve(o)}),bt(this,"sendError",async(r,s,i)=>{const o=Bv(r,i),l=await this.core.crypto.encode(s,o),h=(await this.core.history.get(s,r)).request.method,d=hm[h]?hm[h].res:hm.unregistered_method.res;await this.core.relayer.publish(s,l,d),await this.core.history.resolve(o)}),bt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,yn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),bt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>zc(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),bt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),bt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),bt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(gu.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ba(s)?this.events.emit(Ht("pairing_ping",i),{}):bi(s)&&this.events.emit(Ht("pairing_ping",i),{error:s.error})},500)}),bt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(gu.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const l=yn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,l),this.logger.error(l)}catch(l){await this.sendError(i,r,l),this.logger.error(l)}}),bt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(yn("WC_METHOD_UNSUPPORTED",r))}),bt(this,"isValidPair",(r,s)=>{var i;if(!ds(r)){const{message:l}=xe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Eo.malformed_pairing_uri),new Error(l)}if(!fre(r.uri)){const{message:l}=xe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Eo.malformed_pairing_uri),new Error(l)}const o=IP(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:l}=xe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Eo.malformed_pairing_uri),new Error(l)}if(!(o!=null&&o.symKey)){const{message:l}=xe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Eo.malformed_pairing_uri),new Error(l)}if(o!=null&&o.expiryTimestamp&&Se.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Eo.pairing_expired);const{message:l}=xe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),bt(this,"isValidPing",async r=>{if(!ds(r)){const{message:i}=xe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidDisconnect",async r=>{if(!ds(r)){const{message:i}=xe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidPairingTopic",async r=>{if(!kn(r,!1)){const{message:s}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(zc(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=xe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=kr(t,this.name),this.pairings=new Uh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ss(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tr.message,async e=>{const{topic:t,message:r,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==dn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(t,r);Hx(i)?(this.core.history.set(t,i),await this.onRelayEventRequest({topic:t,payload:i})):Lv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id)),await this.core.relayer.messages.ack(t,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(hi.expired,async e=>{const{topic:t}=hk(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(gu.expire,{topic:t}))})}}var Uoe=Object.defineProperty,koe=(n,e,t)=>e in n?Uoe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dr=(n,e,t)=>koe(n,typeof e!="symbol"?e+"":e,t);class Boe extends sW{constructor(e,t){super(e,t),this.core=e,this.logger=t,dr(this,"records",new Map),dr(this,"events",new _i.EventEmitter),dr(this,"name",Mse),dr(this,"version",$se),dr(this,"cached",[]),dr(this,"initialized",!1),dr(this,"storagePrefix",qa),dr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),dr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Hn(Se.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ri.created,o)}),dr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=bi(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ri.updated,s))}),dr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),dr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Ri.deleted,i)}}),this.persist()}),dr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),dr(this,"on",(r,s)=>{this.events.on(r,s)}),dr(this,"once",(r,s)=>{this.events.once(r,s)}),dr(this,"off",(r,s)=>{this.events.off(r,s)}),dr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=kr(t,this.name)}get context(){return Ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:fl(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ri.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ri.created,e=>{const t=Ri.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ri.updated,e=>{const t=Ri.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ri.deleted,e=>{const t=Ri.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(Dh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{Se.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ri.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Loe=Object.defineProperty,Moe=(n,e,t)=>e in n?Loe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tr=(n,e,t)=>Moe(n,typeof e!="symbol"?e+"":e,t);class $oe extends uW{constructor(e,t){super(e,t),this.core=e,this.logger=t,Tr(this,"expirations",new Map),Tr(this,"events",new _i.EventEmitter),Tr(this,"name",Fse),Tr(this,"version",zse),Tr(this,"cached",[]),Tr(this,"initialized",!1),Tr(this,"storagePrefix",qa),Tr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Tr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Tr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(hi.created,{target:i,expiration:o})}),Tr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Tr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(hi.deleted,{target:s,expiration:i})}}),Tr(this,"on",(r,s)=>{this.events.on(r,s)}),Tr(this,"once",(r,s)=>{this.events.once(r,s)}),Tr(this,"off",(r,s)=>{this.events.off(r,s)}),Tr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=kr(t,this.name)}get context(){return Ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return XJ(e);if(typeof e=="number")return JJ(e);const{message:t}=xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(hi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;Se.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(hi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Dh.pulse,()=>this.checkExpirations()),this.events.on(hi.created,e=>{const t=hi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(hi.expired,e=>{const t=hi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(hi.deleted,e=>{const t=hi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Foe=Object.defineProperty,zoe=(n,e,t)=>e in n?Foe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Un=(n,e,t)=>zoe(n,typeof e!="symbol"?e+"":e,t);class Hoe extends hW{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Un(this,"name",Hse),Un(this,"abortController"),Un(this,"isDevEnv"),Un(this,"verifyUrlV3",qse),Un(this,"storagePrefix",qa),Un(this,"version",uB),Un(this,"publicKey"),Un(this,"fetchPromise"),Un(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Se.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Un(this,"register",async s=>{if(!$p()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:l}=s,h=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${l}`;try{const d=Wo.getDocument(),p=this.startAbortTimer(Se.ONE_SECOND*5),g=await new Promise((y,b)=>{const E=()=>{window.removeEventListener("message",A),d.body.removeChild(v),b("attestation aborted")};this.abortController.signal.addEventListener("abort",E);const v=d.createElement("iframe");v.src=h,v.style.display="none",v.addEventListener("error",E,{signal:this.abortController.signal});const A=S=>{if(S.data&&typeof S.data=="string")try{const T=JSON.parse(S.data);if(T.type==="verify_attestation"){if(q2(T.attestation).payload.id!==o)return;clearInterval(p),d.body.removeChild(v),this.abortController.signal.removeEventListener("abort",E),window.removeEventListener("message",A),y(T.attestation===null?"":T.attestation)}}catch(T){this.logger.warn(T)}};d.body.appendChild(v),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(d){this.logger.warn(d)}return""}),Un(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:l}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(q2(i).payload.id!==l)return;const d=await this.isValidJwtAttestation(i);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!o)return;const h=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,h)}),Un(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Se.ONE_SECOND*5),l=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),l.status===200?await l.json():void 0}),Un(this,"getVerifyUrl",s=>{let i=s||Fm;return Gse.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Fm}`),i=Fm),i}),Un(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Se.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Un(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Un(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Un(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),Un(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Un(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Un(this,"validateAttestation",(s,i)=>{const o=Vne(s,i.publicKey),l={hasExpired:Se.toMiliseconds(o.exp)<Date.now(),payload:o};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=kr(t,this.name),this.abortController=new AbortController,this.isDevEnv=Nx(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ss(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Se.toMiliseconds(e))}}var joe=Object.defineProperty,qoe=(n,e,t)=>e in n?joe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,p8=(n,e,t)=>qoe(n,typeof e!="symbol"?e+"":e,t);class Goe extends dW{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,p8(this,"context",Vse),p8(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:l=!1}=r,h=`${Kse}/${this.projectId}/clients`;await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:l})})}),this.logger=kr(t,this.context)}}var Voe=Object.defineProperty,g8=Object.getOwnPropertySymbols,Koe=Object.prototype.hasOwnProperty,Woe=Object.prototype.propertyIsEnumerable,bS=(n,e,t)=>e in n?Voe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pm=(n,e)=>{for(var t in e||(e={}))Koe.call(e,t)&&bS(n,t,e[t]);if(g8)for(var t of g8(e))Woe.call(e,t)&&bS(n,t,e[t]);return n},Qn=(n,e,t)=>bS(n,typeof e!="symbol"?e+"":e,t);class Yoe extends fW{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,Qn(this,"context",Yse),Qn(this,"storagePrefix",qa),Qn(this,"storageVersion",Wse),Qn(this,"events",new Map),Qn(this,"shouldPersist",!1),Qn(this,"init",async()=>{if(!Nx())try{const s={eventId:ZD(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:lk(this.core.relayer.protocol,this.core.relayer.version,hS)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Qn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:l,trace:h}}=s,d=ZD(),p=this.core.projectId||"",g=Date.now(),y=pm({eventId:d,timestamp:g,props:{event:i,type:o,properties:{topic:l,trace:h}},bundleId:p,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,y),this.shouldPersist=!0),y}),Qn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const l=Array.from(this.events.values()).find(h=>h.props.properties.topic===o);if(l)return pm(pm({},l),this.setMethods(l.eventId))}),Qn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Qn(this,"setEventListeners",()=>{this.core.heartbeat.on(Dh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Se.fromMiliseconds(Date.now())-Se.fromMiliseconds(s.timestamp)>Qse&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Qn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Qn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Qn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Qn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Qn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,pm(pm({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Qn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Qn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Zse}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${hS}${i}`,{method:"POST",body:JSON.stringify(s)})}),Qn(this,"getAppDomain",()=>ck().url),this.logger=kr(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Qoe=Object.defineProperty,m8=Object.getOwnPropertySymbols,Zoe=Object.prototype.hasOwnProperty,Xoe=Object.prototype.propertyIsEnumerable,ES=(n,e,t)=>e in n?Qoe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,y8=(n,e)=>{for(var t in e||(e={}))Zoe.call(e,t)&&ES(n,t,e[t]);if(m8)for(var t of m8(e))Xoe.call(e,t)&&ES(n,t,e[t]);return n},ln=(n,e,t)=>ES(n,typeof e!="symbol"?e+"":e,t);let Joe=class SB extends eW{constructor(e){var t;super(e),ln(this,"protocol",lB),ln(this,"version",uB),ln(this,"name",uS),ln(this,"relayUrl"),ln(this,"projectId"),ln(this,"customStoragePrefix"),ln(this,"events",new _i.EventEmitter),ln(this,"logger"),ln(this,"heartbeat"),ln(this,"relayer"),ln(this,"crypto"),ln(this,"storage"),ln(this,"history"),ln(this,"expirer"),ln(this,"pairing"),ln(this,"verify"),ln(this,"echoClient"),ln(this,"linkModeSupportedApps"),ln(this,"eventClient"),ln(this,"initialized",!1),ln(this,"logChunkController"),ln(this,"on",(l,h)=>this.events.on(l,h)),ln(this,"once",(l,h)=>this.events.once(l,h)),ln(this,"off",(l,h)=>this.events.off(l,h)),ln(this,"removeListener",(l,h)=>this.events.removeListener(l,h)),ln(this,"dispatchEnvelope",({topic:l,message:h,sessionExists:d})=>{if(!l||!h)return;const p={topic:l,message:h,publishedAt:Date.now(),transportType:dn.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:d})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(l){console.warn("Failed to copy global core",l)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||dB,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Up({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:bse.logger,name:uS}),{logger:i,chunkLoggerController:o}=mx({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var l,h;(l=this.logChunkController)!=null&&l.downloadLogsBlobInBrowser&&((h=this.logChunkController)==null||h.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=kr(i,this.name),this.heartbeat=new JV,this.crypto=new xae(this,this.logger,e==null?void 0:e.keychain),this.history=new Boe(this,this.logger),this.expirer=new $oe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new kK(y8(y8({},Ese),e==null?void 0:e.storageOptions)),this.relayer=new Jae({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Poe(this,this.logger),this.verify=new Hoe(this,this.logger,this.storage),this.echoClient=new Goe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Yoe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new SB(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(Pse,r),t}get context(){return Ss(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(QP,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(QP)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&wse.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const ece=Joe,xB="wc",NB=2,TB="client",jx=`${xB}@${NB}:${TB}:`,C_={name:TB,logger:"error"},w8="WALLETCONNECT_DEEPLINK_CHOICE",tce="proposal",b8="Proposal expired",nce="session",Dd=Se.SEVEN_DAYS,rce="engine",Zn={wc_sessionPropose:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Se.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Se.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1119}}},__={min:Se.FIVE_MINUTES,max:Se.SEVEN_DAYS},ma={idle:"IDLE",active:"ACTIVE"},sce={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},ice="request",ace=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],oce="wc",cce="auth",lce="authKeys",uce="pairingTopics",hce="requests",$v=`${oce}@${1.5}:${cce}:`,Wb=`${$v}:PUB_KEY`;var dce=Object.defineProperty,fce=Object.defineProperties,pce=Object.getOwnPropertyDescriptors,E8=Object.getOwnPropertySymbols,gce=Object.prototype.hasOwnProperty,mce=Object.prototype.propertyIsEnumerable,vS=(n,e,t)=>e in n?dce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hn=(n,e)=>{for(var t in e||(e={}))gce.call(e,t)&&vS(n,t,e[t]);if(E8)for(var t of E8(e))mce.call(e,t)&&vS(n,t,e[t]);return n},ls=(n,e)=>fce(n,pce(e)),Ee=(n,e,t)=>vS(n,typeof e!="symbol"?e+"":e,t);class yce extends yW{constructor(e){super(e),Ee(this,"name",rce),Ee(this,"events",new px),Ee(this,"initialized",!1),Ee(this,"requestQueue",{state:ma.idle,queue:[]}),Ee(this,"sessionRequestQueue",{state:ma.idle,queue:[]}),Ee(this,"requestQueueDelay",Se.ONE_SECOND),Ee(this,"expectedPairingMethodMap",new Map),Ee(this,"recentlyDeletedMap",new Map),Ee(this,"recentlyDeletedLimit",200),Ee(this,"relayMessageCache",[]),Ee(this,"pendingSessions",new Map),Ee(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Zn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Se.toMiliseconds(this.requestQueueDelay)))}),Ee(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ls(hn({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=cre(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:l,scopedProperties:h,relays:d}=r;let p=s,g,y=!1;try{if(p){const P=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),P}if(!p||!y){const{topic:P,uri:F}=await this.client.core.pairing.create();p=P,g=F}if(!p){const{message:P}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(P)}const b=await this.client.core.crypto.generateKeyPair(),E=Zn.wc_sessionPropose.req.ttl||Se.FIVE_MINUTES,v=Hn(E),A=ls(hn(hn({requiredNamespaces:i,optionalNamespaces:o,relays:d??[{protocol:hB}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:p},l&&{sessionProperties:l}),h&&{scopedProperties:h}),{id:wa()}),S=Ht("session_connect",A.id),{reject:T,resolve:N,done:k}=hu(E,b8),R=({id:P})=>{P===A.id&&(this.client.events.off("proposal_expire",R),this.pendingSessions.delete(A.id),this.events.emit(S,{error:{message:b8,code:0}}))};return this.client.events.on("proposal_expire",R),this.events.once(S,({error:P,session:F})=>{this.client.events.off("proposal_expire",R),P?T(P):F&&N(F)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:A,throwOnFailedPublish:!0,clientRpcId:A.id}),await this.setProposal(A.id,A),{uri:g,approval:k}}),Ee(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Ee(this,"approve",async t=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=t==null?void 0:t.id)==null?void 0:r.toString(),trace:[Di.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(B){throw o.setError(ru.no_internet_connection),B}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(B){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),o.setError(ru.proposal_not_found),B}try{await this.isValidApprove(t)}catch(B){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ru.session_approve_namespace_validation_failure),B}const{id:l,relayProtocol:h,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=t,b=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:E,proposer:v,requiredNamespaces:A,optionalNamespaces:S}=b;let T=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:E});T||(T=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Di.session_approve_started,properties:{topic:E,trace:[Di.session_approve_started,Di.session_namespaces_validation_success]}}));const N=await this.client.core.crypto.generateKeyPair(),k=v.publicKey,R=await this.client.core.crypto.generateSharedKey(N,k),P=hn(hn(hn({relay:{protocol:h??"irn"},namespaces:d,controller:{publicKey:N,metadata:this.client.metadata},expiry:Hn(Dd)},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),F=dn.relay;T.addTrace(Di.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:F})}catch(B){throw T.setError(ru.subscribe_session_topic_failure),B}T.addTrace(Di.subscribe_session_topic_success);const $=ls(hn({},P),{topic:R,requiredNamespaces:A,optionalNamespaces:S,pairingTopic:E,acknowledged:!1,self:P.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:N,transportType:dn.relay});await this.client.session.set(R,$),T.addTrace(Di.store_session);try{T.addTrace(Di.publishing_session_settle),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:P,throwOnFailedPublish:!0}).catch(B=>{throw T==null||T.setError(ru.session_settle_publish_failure),B}),T.addTrace(Di.session_settle_publish_success),T.addTrace(Di.publishing_session_approve),await this.sendResult({id:l,topic:E,result:{relay:{protocol:h??"irn"},responderPublicKey:N},throwOnFailedPublish:!0}).catch(B=>{throw T==null||T.setError(ru.session_approve_publish_failure),B}),T.addTrace(Di.session_approve_publish_success)}catch(B){throw this.client.logger.error(B),this.client.session.delete(R,yn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),B}return this.client.core.eventClient.deleteEvent({eventId:T.eventId}),await this.client.core.pairing.updateMetadata({topic:E,metadata:v.metadata}),await this.deleteProposal(l),await this.client.core.pairing.activate({topic:E}),await this.setExpiry(R,Hn(Dd)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}}),Ee(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=t;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Zn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),Ee(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:r,namespaces:s}=t,{done:i,resolve:o,reject:l}=hu(),h=wa(),d=Iu().toString(),p=this.client.session.get(r).namespaces;return this.events.once(Ht("session_update",h),({error:g})=>{g?l(g):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:h,relayRpcId:d}).catch(g=>{this.client.logger.error(g),this.client.session.update(r,{namespaces:p}),l(g)}),{acknowledged:i}}),Ee(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(h){throw this.client.logger.error("extend() -> isValidExtend() failed"),h}const{topic:r}=t,s=wa(),{done:i,resolve:o,reject:l}=hu();return this.events.once(Ht("session_extend",s),({error:h})=>{h?l(h):o()}),await this.setExpiry(r,Hn(Dd)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(h=>{l(h)}),{acknowledged:i}}),Ee(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:s,topic:i,expiry:o=Zn.wc_sessionRequest.req.ttl}=t,l=this.client.session.get(i);(l==null?void 0:l.transportType)===dn.relay&&await this.confirmOnlineStateOrThrow();const h=wa(),d=Iu().toString(),{done:p,resolve:g,reject:y}=hu(o,"Request expired. Please try again.");this.events.once(Ht("session_request",h),({error:A,result:S})=>{A?y(A):g(S)});const b="wc_sessionRequest",E=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(E)return await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:i,method:b,params:{request:ls(hn({},s),{expiryTimestamp:Hn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:E}).catch(A=>y(A)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:h}),await p();const v={request:ls(hn({},s),{expiryTimestamp:Hn(o)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:i,method:b,params:v,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(h,v)}).catch(S=>y(S)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:h}),A()}),new Promise(async A=>{var S;if(!((S=l.sessionConfig)!=null&&S.disableDeepLink)){const T=await ree(this.client.core.storage,w8);await eee({id:h,topic:i,wcDeepLink:T})}A()}),p()]).then(A=>A[2])}),Ee(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:s}=t,{id:i}=s,o=this.client.session.get(r);o.transportType===dn.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);ba(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:l}):bi(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:l}),this.cleanupAfterResponse(t)}),Ee(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=t;if(this.client.session.keys.includes(r)){const s=wa(),i=Iu().toString(),{done:o,resolve:l,reject:h}=hu();this.events.once(Ht("session_ping",s),({error:d})=>{d?h(d):l()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Ee(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:s,chainId:i}=t,o=Iu().toString(),l=wa();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:l})}),Ee(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:yn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=xe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Ee(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>hre(r,t)))),Ee(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ee(this,"authenticate",async(t,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?dn.link_mode:dn.relay;o===dn.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:h="",uri:d,domain:p,nonce:g,type:y,exp:b,nbf:E,methods:v=[],expiry:A}=t,S=[...t.resources||[]],{topic:T,uri:N}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:N}});const k=await this.client.core.crypto.generateKeyPair(),R=Vb(k);if(await Promise.all([this.client.auth.authKeys.set(Wb,{responseTopic:R,publicKey:k}),this.client.auth.pairingTopics.set(R,{topic:R,pairingTopic:T})]),await this.client.core.relayer.subscribe(R,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${T}`),v.length>0){const{namespace:K}=gf(l[0]);let O=wte(K,"request",v);Gb(S)&&(O=Ete(O,S.pop())),S.push(O)}const P=A&&A>Zn.wc_sessionAuthenticate.req.ttl?A:Zn.wc_sessionAuthenticate.req.ttl,F={authPayload:{type:y??"caip122",chains:l,statement:h,aud:d,domain:p,version:"1",nonce:g,iat:new Date().toISOString(),exp:b,nbf:E,resources:S},requester:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:Hn(P)},$={eip155:{chains:l,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:Hn(Zn.wc_sessionPropose.req.ttl),id:wa()},{done:H,resolve:j,reject:W}=hu(P,"Request expired"),ne=wa(),J=Ht("session_connect",B.id),I=Ht("session_request",ne),_=async({error:K,session:O})=>{this.events.off(I,L),K?W(K):O&&j({session:O})},L=async K=>{var O,V,Z;if(await this.deletePendingAuthRequest(ne,{message:"fulfilled",code:0}),K.error){const Ne=yn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return K.error.code===Ne.code?void 0:(this.events.off(J,_),W(K.error.message))}await this.deleteProposal(B.id),this.events.off(J,_);const{cacaos:re,responder:ee}=K.result,he=[],me=[];for(const Ne of re){await cP({cacao:Ne,projectId:this.client.core.projectId})||(this.client.logger.error(Ne,"Signature verification failed"),W(yn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Qe}=Ne,Qt=Gb(Qe.resources),Lt=[J2(Qe.iss)],wn=RE(Qe.iss);if(Qt){const fn=lP(Qt),ra=uP(Qt);he.push(...fn),Lt.push(...ra)}for(const fn of Lt)me.push(`${fn}:${wn}`)}const Ce=await this.client.core.crypto.generateSharedKey(k,ee.publicKey);let Pe;he.length>0&&(Pe={topic:Ce,acknowledged:!0,self:{publicKey:k,metadata:this.client.metadata},peer:ee,controller:ee.publicKey,expiry:Hn(Dd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:UP([...new Set(he)],[...new Set(me)]),transportType:o},await this.client.core.relayer.subscribe(Ce,{transportType:o}),await this.client.session.set(Ce,Pe),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:ee.metadata}),Pe=this.client.session.get(Ce)),(O=this.client.metadata.redirect)!=null&&O.linkMode&&(V=ee.metadata.redirect)!=null&&V.linkMode&&(Z=ee.metadata.redirect)!=null&&Z.universal&&r&&(this.client.core.addLinkModeSupportedApp(ee.metadata.redirect.universal),this.client.session.update(Ce,{transportType:dn.link_mode})),j({auths:re,session:Pe})};this.events.once(J,_),this.events.once(I,L);let q;try{if(i){const K=fl("wc_sessionAuthenticate",F,ne);this.client.core.history.set(T,K);const O=await this.client.core.crypto.encode("",K,{type:Ty,encoding:Vc});q=Ab(r,T,O)}else await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:F,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:ne}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:B,expiry:Zn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(K){throw this.events.off(J,_),this.events.off(I,L),K}return await this.setProposal(B.id,B),await this.setAuthRequest(ne,{request:ls(hn({},F),{verifyContext:{}}),pairingTopic:T,transportType:o}),{uri:q??N,response:H}}),Ee(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:s}=t,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[su.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw i.setError(dm.no_internet_connection),A}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(dm.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const l=o.transportType||dn.relay;l===dn.relay&&await this.confirmOnlineStateOrThrow();const h=o.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=Vb(h),g={type:zo,receiverPublicKey:h,senderPublicKey:d},y=[],b=[];for(const A of s){if(!await cP({cacao:A,projectId:this.client.core.projectId})){i.setError(dm.invalid_cacao);const R=yn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:R,encodeOpts:g}),new Error(R.message)}i.addTrace(su.cacaos_verified);const{p:S}=A,T=Gb(S.resources),N=[J2(S.iss)],k=RE(S.iss);if(T){const R=lP(T),P=uP(T);y.push(...R),N.push(...P)}for(const R of N)b.push(`${R}:${k}`)}const E=await this.client.core.crypto.generateSharedKey(d,h);i.addTrace(su.create_authenticated_session_topic);let v;if((y==null?void 0:y.length)>0){v={topic:E,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:h,metadata:o.requester.metadata},controller:h,expiry:Hn(Dd),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:UP([...new Set(y)],[...new Set(b)]),transportType:l},i.addTrace(su.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:l})}catch(A){throw i.setError(dm.subscribe_authenticated_session_topic_failure),A}i.addTrace(su.subscribe_authenticated_session_topic_success),await this.client.session.set(E,v),i.addTrace(su.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(su.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:s,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,l)})}catch(A){throw i.setError(dm.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:v}}),Ee(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:s}=t,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===dn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),h=Vb(o),d={type:zo,receiverPublicKey:o,senderPublicKey:l};await this.sendError({id:r,topic:h,error:s,encodeOpts:d,rpcOpts:Zn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),Ee(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:s}=t;return xk(r,s)}),Ee(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),Ee(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,l;return((o=i.peerMetadata)==null?void 0:o.url)&&((l=i.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Ee(this,"deleteSession",async t=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:l=0}=t,{self:h}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,yn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(h.publicKey)&&await this.client.core.crypto.deleteKeyPair(h.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(w8).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===s&&this.deletePendingSessionRequest(d.id,yn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ma.idle),o&&this.client.events.emit("session_delete",{id:l,topic:s})}),Ee(this,"deleteProposal",async(t,r)=>{if(r)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(ru.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,yn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),Ee(this,"deletePendingSessionRequest",async(t,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),s&&(this.sessionRequestQueue.state=ma.idle,this.client.events.emit("session_request_expire",{id:t}))}),Ee(this,"deletePendingAuthRequest",async(t,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),s?Promise.resolve():this.client.core.expirer.del(t)])}),Ee(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),Ee(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,Hn(Zn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),Ee(this,"setAuthRequest",async(t,r)=>{const{request:s,pairingTopic:i,transportType:o=dn.relay}=r;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Ee(this,"setPendingSessionRequest",async t=>{const{id:r,topic:s,params:i,verifyContext:o}=t,l=i.request.expiryTimestamp||Hn(Zn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,l),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Ee(this,"sendRequest",async t=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:l,clientRpcId:h,throwOnFailedPublish:d,appLink:p,tvf:g}=t,y=fl(s,i,h);let b;const E=!!p;try{const S=E?Vc:Wi;b=await this.client.core.crypto.encode(r,y,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),S}let v;if(ace.includes(s)){const S=Da(JSON.stringify(y)),T=Da(b);v=await this.client.core.verify.register({id:T,decryptedId:S})}const A=Zn[s].req;if(A.attestation=v,o&&(A.ttl=o),l&&(A.id=l),this.client.core.history.set(r,y),E){const S=Ab(p,r,b);await global.Linking.openURL(S,this.client.name)}else{const S=Zn[s].req;o&&(S.ttl=o),l&&(S.id=l),S.tvf=ls(hn({},g),{correlationId:y.id}),d?(S.internal=ls(hn({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,b,S)):this.client.core.relayer.publish(r,b,S).catch(T=>this.client.logger.error(T))}return y.id}),Ee(this,"sendResult",async t=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:l,appLink:h}=t,d=kv(r,i);let p;const g=h&&typeof(global==null?void 0:global.Linking)<"u";try{const E=g?Vc:Wi;p=await this.client.core.crypto.encode(s,d,ls(hn({},l||{}),{encoding:E}))}catch(E){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),E}let y,b;try{y=await this.client.core.history.get(s,r);const E=y.request;try{b=this.getTVFParams(r,E.params,i)}catch(v){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${v==null?void 0:v.message}`)}}catch(E){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),E}if(g){const E=Ab(h,s,p);await global.Linking.openURL(E,this.client.name)}else{const E=y.request.method,v=Zn[E].res;v.tvf=ls(hn({},b),{correlationId:r}),o?(v.internal=ls(hn({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,v)):this.client.core.relayer.publish(s,p,v).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(d)}),Ee(this,"sendError",async t=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:l,appLink:h}=t,d=Bv(r,i);let p;const g=h&&typeof(global==null?void 0:global.Linking)<"u";try{const b=g?Vc:Wi;p=await this.client.core.crypto.encode(s,d,ls(hn({},o||{}),{encoding:b}))}catch(b){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),b}let y;try{y=await this.client.core.history.get(s,r)}catch(b){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),b}if(g){const b=Ab(h,s,p);await global.Linking.openURL(b,this.client.name)}else{const b=y.request.method,E=l||Zn[b].res;this.client.core.relayer.publish(s,p,E)}await this.client.core.history.resolve(d)}),Ee(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;zc(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{zc(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Ee(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),Ee(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),Ee(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ma.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ma.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ma.idle}),Ee(this,"processRequest",async t=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:l}=t,h=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:h}))switch(h){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:l,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:l,transportType:o});default:return this.client.logger.info(`Unsupported request method ${h}`)}}),Ee(this,"onRelayEventResponse",async t=>{const{topic:r,payload:s,transportType:i}=t,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ee(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:s}=xe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Ee(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:s}=t,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ee(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=t,{params:l,id:h}=s;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d==null||d.setError(Eo.proposal_listener_not_found)),this.isValidConnect(hn({},s.params));const p=l.expiryTimestamp||Hn(Zn.wc_sessionPropose.req.ttl),g=hn({id:h,pairingTopic:r,expiryTimestamp:p,attestation:i,encryptedId:o},l);await this.setProposal(h,g);const y=await this.getVerifyContext({attestationId:i,hash:Da(JSON.stringify(s)),encryptedId:o,metadata:g.proposer.metadata});d==null||d.addTrace(ya.emit_session_proposal),this.client.events.emit("session_proposal",{id:h,params:g,verifyContext:y})}catch(d){await this.sendError({id:h,topic:r,error:d,rpcOpts:Zn.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),Ee(this,"onSessionProposeResponse",async(t,r,s)=>{const{id:i}=r;if(ba(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const l=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const h=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});const d=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const p=await this.client.core.crypto.generateSharedKey(h,d);this.pendingSessions.set(i,{sessionTopic:p,pairingTopic:t,proposalId:i,publicKey:h});const g=await this.client.core.relayer.subscribe(p,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:t})}else if(bi(r)){await this.deleteProposal(i);const o=Ht("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Ee(this,"onSessionSettleRequest",async(t,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:l,expiry:h,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=r.params,b=[...this.pendingSessions.values()].find(A=>A.sessionTopic===t);if(!b)return this.client.logger.error(`Pending session not found for topic ${t}`);const E=this.client.proposal.get(b.proposalId),v=ls(hn(hn(hn({topic:t,relay:o,expiry:h,namespaces:d,acknowledged:!0,pairingTopic:b.pairingTopic,requiredNamespaces:E.requiredNamespaces,optionalNamespaces:E.optionalNamespaces,controller:l.publicKey,self:{publicKey:b.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),{transportType:dn.relay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:b.pairingTopic,metadata:v.peer.metadata}),this.client.events.emit("session_connect",{session:v}),this.events.emit(Ht("session_connect",b.proposalId),{session:v}),this.pendingSessions.delete(b.proposalId),this.deleteProposal(b.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:r.id,topic:t,result:!0})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),Ee(this,"onSessionSettleResponse",async(t,r)=>{const{id:s}=r;ba(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ht("session_approve",s),{})):bi(r)&&(await this.client.session.delete(t,yn("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",s),{error:r.error}))}),Ee(this,"onSessionUpdateRequest",async(t,r)=>{const{params:s,id:i}=r;try{const o=`${t}_session_update`,l=um.get(o);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:yn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(hn({topic:t},s));try{um.set(o,i),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:t,result:!0})}catch(h){throw um.delete(o),h}this.client.events.emit("session_update",{id:i,topic:t,params:s})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),Ee(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),Ee(this,"onSessionUpdateResponse",(t,r)=>{const{id:s}=r,i=Ht("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ba(r)?this.events.emit(Ht("session_update",s),{}):bi(r)&&this.events.emit(Ht("session_update",s),{error:r.error})}),Ee(this,"onSessionExtendRequest",async(t,r)=>{const{id:s}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Hn(Dd)),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),Ee(this,"onSessionExtendResponse",(t,r)=>{const{id:s}=r,i=Ht("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ba(r)?this.events.emit(Ht("session_extend",s),{}):bi(r)&&this.events.emit(Ht("session_extend",s),{error:r.error})}),Ee(this,"onSessionPingRequest",async(t,r)=>{const{id:s}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),Ee(this,"onSessionPingResponse",(t,r)=>{const{id:s}=r,i=Ht("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ba(r)?this.events.emit(Ht("session_ping",s),{}):bi(r)&&this.events.emit(Ht("session_ping",s),{error:r.error})},500)}),Ee(this,"onSessionDeleteRequest",async(t,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(tr.publish,async()=>{i(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:yn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Ee(this,"onSessionRequest",async t=>{var r,s,i;const{topic:o,payload:l,attestation:h,encryptedId:d,transportType:p}=t,{id:g,params:y}=l;try{await this.isValidRequest(hn({topic:o},y));const b=this.client.session.get(o),E=await this.getVerifyContext({attestationId:h,hash:Da(JSON.stringify(fl("wc_sessionRequest",y,g))),encryptedId:d,metadata:b.peer.metadata,transportType:p}),v={id:g,topic:o,params:y,verifyContext:E};await this.setPendingSessionRequest(v),p===dn.link_mode&&(r=b.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=b.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(b){await this.sendError({id:g,topic:o,error:b}),this.client.logger.error(b)}}),Ee(this,"onSessionRequestResponse",(t,r)=>{const{id:s}=r,i=Ht("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ba(r)?this.events.emit(Ht("session_request",s),{result:r.result}):bi(r)&&this.events.emit(Ht("session_request",s),{error:r.error})}),Ee(this,"onSessionEventRequest",async(t,r)=>{const{id:s,params:i}=r;try{const o=`${t}_session_event_${i.event.name}`,l=um.get(o);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(hn({topic:t},i)),this.client.events.emit("session_event",{id:s,topic:t,params:i}),um.set(o,s)}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),Ee(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),ba(r)?this.events.emit(Ht("session_request",s),{result:r.result}):bi(r)&&this.events.emit(Ht("session_request",s),{error:r.error})}),Ee(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:l,transportType:h}=t;try{const{requester:d,authPayload:p,expiryTimestamp:g}=i.params,y=await this.getVerifyContext({attestationId:o,hash:Da(JSON.stringify(i)),encryptedId:l,metadata:d.metadata,transportType:h}),b={requester:d,pairingTopic:s,id:i.id,authPayload:p,verifyContext:y,expiryTimestamp:g};await this.setAuthRequest(i.id,{request:b,pairingTopic:s,transportType:h}),h===dn.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:y})}catch(d){this.client.logger.error(d);const p=i.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(i.params.requester.metadata,h),b={type:zo,receiverPublicKey:p,senderPublicKey:g};await this.sendError({id:i.id,topic:s,error:d,encodeOpts:b,rpcOpts:Zn.wc_sessionAuthenticate.autoReject,appLink:y})}}),Ee(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),Ee(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ma.idle,this.processSessionRequestQueue()},Se.toMiliseconds(this.requestQueueDelay))}),Ee(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===t&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,l=Ht("session_request",o);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(Ht("session_request",i.request.id),{error:r})})}),Ee(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ma.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ma.active,this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),Ee(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),Ee(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:fl("wc_sessionPropose",ls(hn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),Ee(this,"isValidConnect",async t=>{if(!ds(t)){const{message:d}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:l,relays:h}=t;if(gr(r)||await this.isValidPairingTopic(r),!Cre(h)){const{message:d}=xe("MISSING_OR_INVALID",`connect() relays: ${h}`);throw new Error(d)}if(!gr(s)&&yl(s)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(s,"requiredNamespaces")}if(!gr(i)&&yl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),gr(o)||this.validateSessionProps(o,"sessionProperties"),!gr(l)){this.validateSessionProps(l,"scopedProperties");const d=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(l).every(p=>d.includes(p)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),Ee(this,"validateNamespaces",(t,r)=>{const s=Are(t,"connect()",r);if(s)throw new Error(s.message)}),Ee(this,"isValidApprove",async t=>{if(!ds(t))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:l}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const h=this.client.proposal.get(r),d=m_(s,"approve()");if(d)throw new Error(d.message);const p=LP(h.requiredNamespaces,s,"approve()");if(p)throw new Error(p.message);if(!kn(i,!0)){const{message:g}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(g)}if(gr(o)||this.validateSessionProps(o,"sessionProperties"),!gr(l)){this.validateSessionProps(l,"scopedProperties");const g=new Set(Object.keys(s));if(!Object.keys(l).every(y=>g.has(y)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),Ee(this,"isValidReject",async t=>{if(!ds(t)){const{message:i}=xe("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(i)}const{id:r,reason:s}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Sre(s)){const{message:i}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Ee(this,"isValidSessionSettleRequest",t=>{if(!ds(t)){const{message:d}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(d)}const{relay:r,controller:s,namespaces:i,expiry:o}=t;if(!rB(r)){const{message:d}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const l=mre(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const h=m_(i,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(zc(o)){const{message:d}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),Ee(this,"isValidUpdate",async t=>{if(!ds(t)){const{message:h}=xe("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(h)}const{topic:r,namespaces:s}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=m_(s,"update()");if(o)throw new Error(o.message);const l=LP(i.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)}),Ee(this,"isValidExtend",async t=>{if(!ds(t)){const{message:s}=xe("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Ee(this,"isValidRequest",async t=>{if(!ds(t)){const{message:h}=xe("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(h)}const{topic:r,request:s,chainId:i,expiry:o}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:l}=this.client.session.get(r);if(!BP(l,i)){const{message:h}=xe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(h)}if(!xre(s)){const{message:h}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(h)}if(!Ire(l,i,s.method)){const{message:h}=xe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(h)}if(o&&!Pre(o,__)){const{message:h}=xe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${__.min} and ${__.max}`);throw new Error(h)}}),Ee(this,"isValidRespond",async t=>{var r;if(!ds(t)){const{message:o}=xe("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:s,response:i}=t;try{await this.isValidSessionTopic(s)}catch(o){throw(r=t==null?void 0:t.response)!=null&&r.id&&this.cleanupAfterResponse(t),o}if(!Nre(i)){const{message:o}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Ee(this,"isValidPing",async t=>{if(!ds(t)){const{message:s}=xe("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),Ee(this,"isValidEmit",async t=>{if(!ds(t)){const{message:l}=xe("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:r,event:s,chainId:i}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!BP(o,i)){const{message:l}=xe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(l)}if(!Tre(s)){const{message:l}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!Ore(o,i,s.name)){const{message:l}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}}),Ee(this,"isValidDisconnect",async t=>{if(!ds(t)){const{message:s}=xe("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),Ee(this,"isValidAuthenticate",t=>{const{chains:r,uri:s,domain:i,nonce:o}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!kn(s,!1))throw new Error("uri is required parameter");if(!kn(i,!1))throw new Error("domain is required parameter");if(!kn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(h=>gf(h).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=gf(r[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ee(this,"getVerifyContext",async t=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:l}=t,h={verified:{verifyUrl:o.verifyUrl||Fm,validation:"UNKNOWN",origin:o.url||""}};try{if(l===dn.link_mode){const p=this.getAppLinkIfEnabled(o,l);return h.verified.validation=p&&new URL(p).origin===new URL(o.url).origin?"VALID":"INVALID",h}const d=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});d&&(h.verified.origin=d.origin,h.verified.isScam=d.isScam,h.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(h)}`),h}),Ee(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((s,i)=>{if(s==null){const{message:o}=xe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(t)[i]}`);throw new Error(o)}})}),Ee(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),Ee(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Ee(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(s)}}),Ee(this,"isLinkModeEnabled",(t,r)=>{var s,i,o,l,h,d,p,g,y;return!t||r!==dn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((l=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:l.universal)!==void 0&&((d=(h=this.client.metadata)==null?void 0:h.redirect)==null?void 0:d.universal)!==""&&((p=t==null?void 0:t.redirect)==null?void 0:p.universal)!==void 0&&((g=t==null?void 0:t.redirect)==null?void 0:g.universal)!==""&&((y=t==null?void 0:t.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Ee(this,"getAppLinkIfEnabled",(t,r)=>{var s;return this.isLinkModeEnabled(t,r)?(s=t==null?void 0:t.redirect)==null?void 0:s.universal:void 0}),Ee(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=QD(t,"topic")||"",s=decodeURIComponent(QD(t,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:dn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Ee(this,"registerLinkModeListeners",async()=>{var t;if(Nx()||Dl()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Ee(this,"getTVFParams",(t,r,s)=>{var i,o,l;if(!((i=r.request)!=null&&i.method))return{};const h={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const d=this.extractTxHashesFromResult(r.request,s);h.txHashes=d,h.contractAddresses=this.isValidContractData(r.request.params)?[(l=(o=r.request.params)==null?void 0:o[0])==null?void 0:l.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return h}),Ee(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const s=(t==null?void 0:t.data)||((r=t==null?void 0:t[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Ee(this,"extractTxHashesFromResult",(t,r)=>{var s;try{if(!r)return[];const i=t.method,o=sce[i];if(i==="sui_signTransaction")return[nte(r.transactionBytes)];if(i==="near_signTransaction")return[sP(r)];if(i==="near_signTransactions")return r.map(h=>sP(h));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Wre({transaction:t.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Ho(r)?r.map(h=>iP(h)):[iP(r)];if(i==="cosmos_signDirect")return[ste(r)];if(typeof r=="string")return[r];const l=r[o.key];if(Ho(l))return i==="solana_signAllTransactions"?l.map(h=>tte(h)):l;if(typeof l=="string")return[l]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(t))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Wb)?this.client.auth.authKeys.get(Wb):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:i===dn.link_mode?Vc:Wi});Hx(l)?(this.client.core.history.set(t,l),await this.onRelayEventRequest({topic:t,payload:l,attestation:s,transportType:i,encryptedId:Da(r)})):Lv(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:t,payload:l,transportType:i}),this.client.core.history.delete(t,l.id)):await this.onRelayEventUnknownPayload({topic:t,payload:l,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(hi.expired,async e=>{const{topic:t,id:r}=hk(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,xe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,xe("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(gu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(gu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!kn(e,!1)){const{message:t}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(zc(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!kn(e,!1)){const{message:t}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(zc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=xe("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=xe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(kn(e,!1)){const{message:t}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!_re(e)){const{message:t}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(zc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class wce extends Uh{constructor(e,t){super(e,t,tce,jx),this.core=e,this.logger=t}}let bce=class extends Uh{constructor(e,t){super(e,t,nce,jx),this.core=e,this.logger=t}};class Ece extends Uh{constructor(e,t){super(e,t,ice,jx,r=>r.id),this.core=e,this.logger=t}}class vce extends Uh{constructor(e,t){super(e,t,lce,$v,()=>Wb),this.core=e,this.logger=t}}class Ace extends Uh{constructor(e,t){super(e,t,uce,$v),this.core=e,this.logger=t}}class Cce extends Uh{constructor(e,t){super(e,t,hce,$v,r=>r.id),this.core=e,this.logger=t}}var _ce=Object.defineProperty,Sce=(n,e,t)=>e in n?_ce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,S_=(n,e,t)=>Sce(n,typeof e!="symbol"?e+"":e,t);class xce{constructor(e,t){this.core=e,this.logger=t,S_(this,"authKeys"),S_(this,"pairingTopics"),S_(this,"requests"),this.authKeys=new vce(this.core,this.logger),this.pairingTopics=new Ace(this.core,this.logger),this.requests=new Cce(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Nce=Object.defineProperty,Tce=(n,e,t)=>e in n?Nce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Et=(n,e,t)=>Tce(n,typeof e!="symbol"?e+"":e,t);let Ice=class IB extends mW{constructor(e){super(e),Et(this,"protocol",xB),Et(this,"version",NB),Et(this,"name",C_.name),Et(this,"metadata"),Et(this,"core"),Et(this,"logger"),Et(this,"events",new _i.EventEmitter),Et(this,"engine"),Et(this,"session"),Et(this,"proposal"),Et(this,"pendingRequest"),Et(this,"auth"),Et(this,"signConfig"),Et(this,"on",(r,s)=>this.events.on(r,s)),Et(this,"once",(r,s)=>this.events.once(r,s)),Et(this,"off",(r,s)=>this.events.off(r,s)),Et(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Et(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Et(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Et(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||C_.name,this.metadata=WJ(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:vy(Up({level:(e==null?void 0:e.logger)||C_.logger}));this.core=(e==null?void 0:e.core)||new ece(e),this.logger=kr(t,this.name),this.session=new bce(this.core,this.logger),this.proposal=new wce(this.core,this.logger),this.pendingRequest=new Ece(this.core,this.logger),this.engine=new yce(this),this.auth=new xce(this.core,this.logger)}static async init(e){const t=new IB(e);return await t.initialize(),t}get context(){return Ss(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Se.toMiliseconds(Se.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var _b={exports:{}},v8;function Oce(){return v8||(v8=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Oa<"u"&&Oa,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof Oa<"u"&&Oa||{},h={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d(I){return I&&DataView.prototype.isPrototypeOf(I)}if(h.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(I){return I&&p.indexOf(Object.prototype.toString.call(I))>-1};function y(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function b(I){return typeof I!="string"&&(I=String(I)),I}function E(I){var _={next:function(){var L=I.shift();return{done:L===void 0,value:L}}};return h.iterable&&(_[Symbol.iterator]=function(){return _}),_}function v(I){this.map={},I instanceof v?I.forEach(function(_,L){this.append(L,_)},this):Array.isArray(I)?I.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(_){this.append(_,I[_])},this)}v.prototype.append=function(I,_){I=y(I),_=b(_);var L=this.map[I];this.map[I]=L?L+", "+_:_},v.prototype.delete=function(I){delete this.map[y(I)]},v.prototype.get=function(I){return I=y(I),this.has(I)?this.map[I]:null},v.prototype.has=function(I){return this.map.hasOwnProperty(y(I))},v.prototype.set=function(I,_){this.map[y(I)]=b(_)},v.prototype.forEach=function(I,_){for(var L in this.map)this.map.hasOwnProperty(L)&&I.call(_,this.map[L],L,this)},v.prototype.keys=function(){var I=[];return this.forEach(function(_,L){I.push(L)}),E(I)},v.prototype.values=function(){var I=[];return this.forEach(function(_){I.push(_)}),E(I)},v.prototype.entries=function(){var I=[];return this.forEach(function(_,L){I.push([L,_])}),E(I)},h.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function A(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function S(I){return new Promise(function(_,L){I.onload=function(){_(I.result)},I.onerror=function(){L(I.error)}})}function T(I){var _=new FileReader,L=S(_);return _.readAsArrayBuffer(I),L}function N(I){var _=new FileReader,L=S(_),q=/charset=([A-Za-z0-9_-]+)/.exec(I.type),K=q?q[1]:"utf-8";return _.readAsText(I,K),L}function k(I){for(var _=new Uint8Array(I),L=new Array(_.length),q=0;q<_.length;q++)L[q]=String.fromCharCode(_[q]);return L.join("")}function R(I){if(I.slice)return I.slice(0);var _=new Uint8Array(I.byteLength);return _.set(new Uint8Array(I)),_.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:h.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:h.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():h.arrayBuffer&&h.blob&&d(I)?(this._bodyArrayBuffer=R(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||g(I))?this._bodyArrayBuffer=R(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var I=A(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=A(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(h.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=A(this);if(I)return I;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(I){var _=I.toUpperCase();return F.indexOf(_)>-1?_:I}function B(I,_){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var L=_.body;if(I instanceof B){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,_.headers||(this.headers=new v(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!L&&I._bodyInit!=null&&(L=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new v(_.headers)),this.method=$(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in l){var O=new AbortController;return O.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var q=/([?&])_=[^&]*/;if(q.test(this.url))this.url=this.url.replace(q,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function H(I){var _=new FormData;return I.trim().split("&").forEach(function(L){if(L){var q=L.split("="),K=q.shift().replace(/\+/g," "),O=q.join("=").replace(/\+/g," ");_.append(decodeURIComponent(K),decodeURIComponent(O))}}),_}function j(I){var _=new v,L=I.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(q){return q.indexOf(`
`)===0?q.substr(1,q.length):q}).forEach(function(q){var K=q.split(":"),O=K.shift().trim();if(O){var V=K.join(":").trim();try{_.append(O,V)}catch(Z){console.warn("Response "+Z.message)}}}),_}P.call(B.prototype);function W(I,_){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new v(_.headers),this.url=_.url||"",this._initBody(I)}P.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},W.error=function(){var I=new W(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var ne=[301,302,303,307,308];W.redirect=function(I,_){if(ne.indexOf(_)===-1)throw new RangeError("Invalid status code");return new W(null,{status:_,headers:{location:I}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,L){this.message=_,this.name=L;var q=Error(_);this.stack=q.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function J(I,_){return new Promise(function(L,q){var K=new B(I,_);if(K.signal&&K.signal.aborted)return q(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function V(){O.abort()}O.onload=function(){var ee={statusText:O.statusText,headers:j(O.getAllResponseHeaders()||"")};K.url.indexOf("file://")===0&&(O.status<200||O.status>599)?ee.status=200:ee.status=O.status,ee.url="responseURL"in O?O.responseURL:ee.headers.get("X-Request-URL");var he="response"in O?O.response:O.responseText;setTimeout(function(){L(new W(he,ee))},0)},O.onerror=function(){setTimeout(function(){q(new TypeError("Network request failed"))},0)},O.ontimeout=function(){setTimeout(function(){q(new TypeError("Network request timed out"))},0)},O.onabort=function(){setTimeout(function(){q(new o.DOMException("Aborted","AbortError"))},0)};function Z(ee){try{return ee===""&&l.location.href?l.location.href:ee}catch{return ee}}if(O.open(K.method,Z(K.url),!0),K.credentials==="include"?O.withCredentials=!0:K.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&(h.blob?O.responseType="blob":h.arrayBuffer&&(O.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof v||l.Headers&&_.headers instanceof l.Headers)){var re=[];Object.getOwnPropertyNames(_.headers).forEach(function(ee){re.push(y(ee)),O.setRequestHeader(ee,b(_.headers[ee]))}),K.headers.forEach(function(ee,he){re.indexOf(he)===-1&&O.setRequestHeader(he,ee)})}else K.headers.forEach(function(ee,he){O.setRequestHeader(he,ee)});K.signal&&(K.signal.addEventListener("abort",V),O.onreadystatechange=function(){O.readyState===4&&K.signal.removeEventListener("abort",V)}),O.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return J.polyfill=!0,l.fetch||(l.fetch=J,l.Headers=v,l.Request=B,l.Response=W),o.Headers=v,o.Request=B,o.Response=W,o.fetch=J,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=t.fetch?t:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e}(_b,_b.exports)),_b.exports}var Rce=Oce();const A8=iy(Rce);var Dce=Object.defineProperty,Pce=Object.defineProperties,Uce=Object.getOwnPropertyDescriptors,C8=Object.getOwnPropertySymbols,kce=Object.prototype.hasOwnProperty,Bce=Object.prototype.propertyIsEnumerable,_8=(n,e,t)=>e in n?Dce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,S8=(n,e)=>{for(var t in e||(e={}))kce.call(e,t)&&_8(n,t,e[t]);if(C8)for(var t of C8(e))Bce.call(e,t)&&_8(n,t,e[t]);return n},x8=(n,e)=>Pce(n,Uce(e));const Lce={Accept:"application/json","Content-Type":"application/json"},Mce="POST",N8={headers:Lce,method:Mce},T8=10;let na=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new _i.EventEmitter,this.isAvailable=!1,this.registering=!1,!qP(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ko(e),r=await(await A8(this.url,x8(S8({},N8),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!qP(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ko({id:1,jsonrpc:"2.0",method:"test",params:[]});await A8(e,x8(S8({},N8),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?yh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),i=Bv(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return aB(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>T8&&this.events.setMaxListeners(T8)}};const I8="error",$ce="wss://relay.walletconnect.org",Fce="wc",zce="universal_provider",Sb=`${Fce}@2:${zce}:`,OB="https://rpc.walletconnect.org/v1/",Qd="generic",Hce=`${OB}bundler`,xi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function qx(n){return n==null||typeof n!="object"&&typeof n!="function"}function RB(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function DB(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const jce="[object RegExp]",PB="[object String]",UB="[object Number]",kB="[object Boolean]",BB="[object Arguments]",qce="[object Symbol]",Gce="[object Date]",Vce="[object Map]",Kce="[object Set]",Wce="[object Array]",Yce="[object ArrayBuffer]",Qce="[object Object]",Zce="[object DataView]",Xce="[object Uint8Array]",Jce="[object Uint8ClampedArray]",ele="[object Uint16Array]",tle="[object Uint32Array]",nle="[object Int8Array]",rle="[object Int16Array]",sle="[object Int32Array]",ile="[object Float32Array]",ale="[object Float64Array]";function Gx(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ole(n,e){return sf(n,void 0,n,new Map,e)}function sf(n,e,t,r=new Map,s=void 0){const i=s==null?void 0:s(n,e,t,r);if(i!=null)return i;if(qx(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let l=0;l<n.length;l++)o[l]=sf(n[l],l,t,r,s);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[l,h]of n)o.set(l,sf(h,l,t,r,s));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const l of n)o.add(sf(l,void 0,t,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(Gx(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let l=0;l<n.length;l++)o[l]=sf(n[l],l,t,r,s);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),mu(o,n,t,r,s),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),mu(o,n,t,r,s),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),mu(o,n,t,r,s),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,mu(o,n,t,r,s),o}if(typeof n=="object"&&cle(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),mu(o,n,t,r,s),o}return n}function mu(n,e,t=n,r,s){const i=[...Object.keys(e),...RB(e)];for(let o=0;o<i.length;o++){const l=i[o],h=Object.getOwnPropertyDescriptor(n,l);(h==null||h.writable)&&(n[l]=sf(e[l],l,t,r,s))}}function cle(n){switch(DB(n)){case BB:case Wce:case Yce:case Zce:case kB:case Gce:case ile:case ale:case nle:case rle:case sle:case Vce:case UB:case Qce:case jce:case Kce:case PB:case qce:case Xce:case Jce:case ele:case tle:return!0;default:return!1}}function lle(n,e){return ole(n,(t,r,s,i)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case UB:case PB:case kB:{const o=new n.constructor(n==null?void 0:n.valueOf());return mu(o,n),o}case BB:{const o={};return mu(o,n),o.length=n.length,o[Symbol.iterator]=n[Symbol.iterator],o}default:return}})}function O8(n){return lle(n)}function R8(n){return n!==null&&typeof n=="object"&&DB(n)==="[object Arguments]"}function D8(n){return typeof n=="object"&&n!==null}function ule(){}function hle(n){return Gx(n)}function dle(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function fle(n){if(qx(n))return n;if(Array.isArray(n)||Gx(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function ple(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let s=n;for(let i=0;i<t.length;i++){const o=t[i];s=AS(s,o,r,new Map)}return s}function AS(n,e,t,r){if(qx(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return fle(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...RB(e)];for(let i=0;i<s.length;i++){const o=s[i];let l=e[o],h=n[o];if(R8(l)&&(l={...l}),R8(h)&&(h={...h}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=O8(l)),Array.isArray(l))if(typeof h=="object"&&h!=null){const p=[],g=Reflect.ownKeys(h);for(let y=0;y<g.length;y++){const b=g[y];p[b]=h[b]}h=p}else h=[];const d=t(h,l,o,n,e,r);d!=null?n[o]=d:Array.isArray(l)||D8(h)&&D8(l)?n[o]=AS(h,l,t,r):h==null&&dle(l)?n[o]=AS({},l,t,r):h==null&&hle(l)?n[o]=O8(l):(h===void 0||l!==void 0)&&(n[o]=l)}return n}function gle(n,...e){return ple(n,...e,ule)}var mle=Object.defineProperty,yle=Object.defineProperties,wle=Object.getOwnPropertyDescriptors,P8=Object.getOwnPropertySymbols,ble=Object.prototype.hasOwnProperty,Ele=Object.prototype.propertyIsEnumerable,U8=(n,e,t)=>e in n?mle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xb=(n,e)=>{for(var t in e||(e={}))ble.call(e,t)&&U8(n,t,e[t]);if(P8)for(var t of P8(e))Ele.call(e,t)&&U8(n,t,e[t]);return n},vle=(n,e)=>yle(n,wle(e));function Ks(n,e,t){var r;const s=gf(n);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${OB}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function kh(n){return n.includes(":")?n.split(":")[1]:n}function LB(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Ale(n,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(n));if(!t.length)return[];const r=[];return t.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Nb(n={},e={}){const t=k8(n),r=k8(e);return gle(t,r)}function k8(n){var e,t,r,s,i;const o={};if(!yl(n))return o;for(const[l,h]of Object.entries(n)){const d=Uv(l)?[l]:h.chains,p=h.methods||[],g=h.events||[],y=h.rpcMap||{},b=rf(l);o[b]=vle(xb(xb({},o[b]),h),{chains:za(d,(e=o[b])==null?void 0:e.chains),methods:za(p,(t=o[b])==null?void 0:t.methods),events:za(g,(r=o[b])==null?void 0:r.events)}),(yl(y)||yl(((s=o[b])==null?void 0:s.rpcMap)||{}))&&(o[b].rpcMap=xb(xb({},y),(i=o[b])==null?void 0:i.rpcMap))}return o}function B8(n){return n.includes(":")?n.split(":")[2]:n}function L8(n){const e={};for(const[t,r]of Object.entries(n)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],l=Uv(t)?[t]:r.chains?r.chains:LB(r.accounts);e[t]={chains:l,methods:s,events:i,accounts:o}}return e}function x_(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}const MB={},Bt=n=>MB[n],N_=(n,e)=>{MB[n]=e};var Cle=Object.defineProperty,_le=(n,e,t)=>e in n?Cle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pd=(n,e,t)=>_le(n,typeof e!="symbol"?e+"":e,t);class Sle{constructor(e){Pd(this,"name","polkadot"),Pd(this,"client"),Pd(this,"httpProviders"),Pd(this,"events"),Pd(this,"namespace"),Pd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=kh(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var xle=Object.defineProperty,Nle=Object.defineProperties,Tle=Object.getOwnPropertyDescriptors,M8=Object.getOwnPropertySymbols,Ile=Object.prototype.hasOwnProperty,Ole=Object.prototype.propertyIsEnumerable,CS=(n,e,t)=>e in n?xle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$8=(n,e)=>{for(var t in e||(e={}))Ile.call(e,t)&&CS(n,t,e[t]);if(M8)for(var t of M8(e))Ole.call(e,t)&&CS(n,t,e[t]);return n},F8=(n,e)=>Nle(n,Tle(e)),Ud=(n,e,t)=>CS(n,typeof e!="symbol"?e+"":e,t);class Rle{constructor(e){Ud(this,"name","eip155"),Ud(this,"client"),Ud(this,"chainId"),Ud(this,"namespace"),Ud(this,"httpProviders"),Ud(this,"events"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||Ks(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=parseInt(kh(t));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,s,i,o;const l=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],h=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],d=`${l}${h.join(",")}`;if(!l)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const p=this.client.session.get(e.topic),g=((o=p==null?void 0:p.sessionProperties)==null?void 0:o.capabilities)||{};if(g!=null&&g[d])return g==null?void 0:g[d];const y=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:F8($8({},p.sessionProperties||{}),{capabilities:F8($8({},g||{}),{[d]:y})})})}catch(b){console.warn("Failed to update session with capabilities",b)}return y}async getCallStatus(e){var t,r;const s=this.client.session.get(e.topic),i=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(i){const l=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(l,e)}catch(h){console.warn("Failed to fetch call status from bundler",h,l)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fl("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${Hce}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var Dle=Object.defineProperty,Ple=(n,e,t)=>e in n?Dle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kd=(n,e,t)=>Ple(n,typeof e!="symbol"?e+"":e,t);class Ule{constructor(e){kd(this,"name","solana"),kd(this,"client"),kd(this,"httpProviders"),kd(this,"events"),kd(this,"namespace"),kd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=kh(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var kle=Object.defineProperty,Ble=(n,e,t)=>e in n?kle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bd=(n,e,t)=>Ble(n,typeof e!="symbol"?e+"":e,t);class Lle{constructor(e){Bd(this,"name","cosmos"),Bd(this,"client"),Bd(this,"httpProviders"),Bd(this,"events"),Bd(this,"namespace"),Bd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=kh(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var Mle=Object.defineProperty,$le=(n,e,t)=>e in n?Mle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ld=(n,e,t)=>$le(n,typeof e!="symbol"?e+"":e,t);class Fle{constructor(e){Ld(this,"name","algorand"),Ld(this,"client"),Ld(this,"httpProviders"),Ld(this,"events"),Ld(this,"namespace"),Ld(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Ks(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Si(new na(r,Bt("disableProviderPing")))}}var zle=Object.defineProperty,Hle=(n,e,t)=>e in n?zle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Md=(n,e,t)=>Hle(n,typeof e!="symbol"?e+"":e,t);class jle{constructor(e){Md(this,"name","cip34"),Md(this,"client"),Md(this,"httpProviders"),Md(this,"events"),Md(this,"namespace"),Md(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t),s=kh(t);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var qle=Object.defineProperty,Gle=(n,e,t)=>e in n?qle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$d=(n,e,t)=>Gle(n,typeof e!="symbol"?e+"":e,t);class Vle{constructor(e){$d(this,"name","elrond"),$d(this,"client"),$d(this,"httpProviders"),$d(this,"events"),$d(this,"namespace"),$d(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=kh(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var Kle=Object.defineProperty,Wle=(n,e,t)=>e in n?Kle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fd=(n,e,t)=>Wle(n,typeof e!="symbol"?e+"":e,t);class Yle{constructor(e){Fd(this,"name","multiversx"),Fd(this,"client"),Fd(this,"httpProviders"),Fd(this,"events"),Fd(this,"namespace"),Fd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=kh(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var Qle=Object.defineProperty,Zle=(n,e,t)=>e in n?Qle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zd=(n,e,t)=>Zle(n,typeof e!="symbol"?e+"":e,t);class Xle{constructor(e){zd(this,"name","near"),zd(this,"client"),zd(this,"httpProviders"),zd(this,"events"),zd(this,"namespace"),zd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Ks(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace);return typeof r>"u"?void 0:new Si(new na(r,Bt("disableProviderPing")))}}var Jle=Object.defineProperty,eue=(n,e,t)=>e in n?Jle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Hd=(n,e,t)=>eue(n,typeof e!="symbol"?e+"":e,t);class tue{constructor(e){Hd(this,"name","tezos"),Hd(this,"client"),Hd(this,"httpProviders"),Hd(this,"events"),Hd(this,"namespace"),Hd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Ks(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace);return typeof r>"u"?void 0:new Si(new na(r))}}var nue=Object.defineProperty,rue=(n,e,t)=>e in n?nue(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jd=(n,e,t)=>rue(n,typeof e!="symbol"?e+"":e,t);class sue{constructor(e){jd(this,"name",Qd),jd(this,"client"),jd(this,"httpProviders"),jd(this,"events"),jd(this,"namespace"),jd(this,"chainId"),this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const i=gf(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ks(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new na(r,Bt("disableProviderPing")))}}var iue=Object.defineProperty,aue=Object.defineProperties,oue=Object.getOwnPropertyDescriptors,z8=Object.getOwnPropertySymbols,cue=Object.prototype.hasOwnProperty,lue=Object.prototype.propertyIsEnumerable,_S=(n,e,t)=>e in n?iue(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tb=(n,e)=>{for(var t in e||(e={}))cue.call(e,t)&&_S(n,t,e[t]);if(z8)for(var t of z8(e))lue.call(e,t)&&_S(n,t,e[t]);return n},T_=(n,e)=>aue(n,oue(e)),li=(n,e,t)=>_S(n,typeof e!="symbol"?e+"":e,t);let uue=class $B{constructor(e){li(this,"client"),li(this,"namespaces"),li(this,"optionalNamespaces"),li(this,"sessionProperties"),li(this,"scopedProperties"),li(this,"events",new px),li(this,"rpcProviders",{}),li(this,"session"),li(this,"providerOpts"),li(this,"logger"),li(this,"uri"),li(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:vy(Up({level:(e==null?void 0:e.logger)||I8})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new $B(e);return await t.initialize(),t}async request(e,t,r){const[s,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Tb({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>t(null,kv(i,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:yn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=L8(this.session.namespaces);this.namespaces=Nb(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await r();this.session=s;const i=L8(s.namespaces);return this.namespaces=Nb(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Qd?i.setDefaultChain(`${r}:${s}`,t):i.setDefaultChain(s,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Ho(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await Ice.init({core:this.providerOpts.core,logger:this.providerOpts.logger||I8,relayUrl:this.providerOpts.relayUrl||$ce,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>rf(t)))];N_("client",this.client),N_("events",this.events),N_("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=Ale(t,this.session),s=LB(r),i=Nb(this.namespaces,this.optionalNamespaces),o=T_(Tb({},i[t]),{accounts:r,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new Rle({namespace:o});break;case"algorand":this.rpcProviders[t]=new Fle({namespace:o});break;case"solana":this.rpcProviders[t]=new Ule({namespace:o});break;case"cosmos":this.rpcProviders[t]=new Lle({namespace:o});break;case"polkadot":this.rpcProviders[t]=new Sle({namespace:o});break;case"cip34":this.rpcProviders[t]=new jle({namespace:o});break;case"elrond":this.rpcProviders[t]=new Vle({namespace:o});break;case"multiversx":this.rpcProviders[t]=new Yle({namespace:o});break;case"near":this.rpcProviders[t]=new Xle({namespace:o});break;case"tezos":this.rpcProviders[t]=new tue({namespace:o});break;default:this.rpcProviders[Qd]?this.rpcProviders[Qd].updateNamespace(o):this.rpcProviders[Qd]=new sue({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:s}=e;if(s!==((t=this.session)==null?void 0:t.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Ho(o)&&this.events.emit("accountsChanged",o.map(B8))}else if(i.name==="chainChanged"){const o=r.chainId,l=r.event.data,h=rf(o),d=x_(o)!==x_(l)?`${h}:${x_(l)}`:o;this.onChainChanged(d)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=t,o=(s=this.client)==null?void 0:s.session.get(e);this.session=T_(Tb({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",T_(Tb({},yn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(xi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Qd]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Nb(t,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[t,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>rf(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const s=rf(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var s,i;try{if(t===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const l=o.filter(h=>h.includes(`${r}:`)).map(B8);if(!Ho(l))return;this.events.emit("accountsChanged",l)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,s={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Sb}/${e}${s}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Sb}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Sb}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(Sb)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}},iu=null;const js={getSIWX(){return we.state.siwx},async initializeIfEnabled(){var i;const n=we.state.siwx,e=M.getActiveCaipAddress();if(!(n&&e))return;const[t,r,s]=e.split(":");if(M.checkIfSupportedNetwork(t))try{if(iu&&await iu,(await n.getSessions(`${t}:${r}`,s)).length)return;await Ut.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Kt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Te._getClient())==null?void 0:i.disconnect().catch(console.error)),tt.reset("Connect"),La.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const n=we.state.siwx,e=Le.getPlainAddress(M.getActiveCaipAddress()),t=M.getActiveCaipNetwork(),r=Te._getClient();if(!n)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!t)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await n.createMessage({chainId:t.caipNetworkId,accountAddress:e}),i=s.toString();_e.getConnectorId(t.chainNamespace)===ce.CONNECTOR_ID.AUTH&&tt.pushTransactionStack({});const l=await r.signMessage(i);await n.addSession({data:s,message:i,signature:l}),M.setLastConnectedSIWECaipNetwork(t),Ut.close(),Kt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Ut.state.open||tt.state.view==="ApproveTransaction")&&await Ut.open({view:"SIWXSignMessage"}),La.showError("Error signing message"),Kt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var n;try{const e=this.getSIWX();if((n=e==null?void 0:e.getRequired)==null?void 0:n.call(e)){const r=M.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Le.getPlainAddress(M.getActiveCaipAddress())||""));s&&s.length>0?await M.switchActiveNetwork(r):await Te.disconnect()}else await Te.disconnect()}else Ut.close();Ut.close(),Kt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const n=this.getSIWX(),e=M.getAllRequestedCaipNetworks(),t=[];return await Promise.all(e.map(async r=>{const s=await(n==null?void 0:n.getSessions(r.caipNetworkId,Le.getPlainAddress(M.getActiveCaipAddress())||""));s&&t.push(...s)})),t},async getSessions(n){const e=we.state.siwx;let t=n==null?void 0:n.address;if(!t){const s=M.getActiveCaipAddress();t=Le.getPlainAddress(s)}let r=n==null?void 0:n.caipNetworkId;if(!r){const s=M.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&t&&r?e.getSessions(r,t):[]},async isSIWXCloseDisabled(){var e;const n=this.getSIWX();if(n){const t=tt.state.view==="ApproveTransaction",r=tt.state.view==="SIWXSignMessage";if(t||r)return((e=n.getRequired)==null?void 0:e.call(n))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:n,chainId:e,socialUri:t,preferredAccountType:r,chainNamespace:s}){var d;const i=js.getSIWX();if(!i||!s.includes(ce.CHAIN.EVM)){const p=await n.connect({chainId:e,socialUri:t,preferredAccountType:r});return{address:p.address,chainId:p.chainId,accounts:p.accounts}}const o=await i.createMessage({chainId:((d=M.getActiveCaipNetwork())==null?void 0:d.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),l={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},h=await n.connect({chainId:e,socialUri:t,siwxMessage:l,preferredAccountType:r});return l.accountAddress=h.address,l.serializedMessage=h.message||"",h.signature&&h.message&&await js.addEmbeddedWalletSession(l,h.message,h.signature),{address:h.address,chainId:h.chainId,accounts:h.accounts}},async addEmbeddedWalletSession(n,e,t){if(iu)return iu;const r=js.getSIWX();return r?(iu=r.addSession({data:n,message:e,signature:t}).finally(()=>{iu=null}),iu):Promise.resolve()},async universalProviderAuthenticate({universalProvider:n,chains:e,methods:t}){var l,h,d;const r=js.getSIWX(),s=new Set(e.map(p=>p.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((l=M.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:""}),o=await n.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:t,chains:[i.chainId,...e.filter(p=>p!==i.chainId)]});if(La.showLoading("Authenticating...",{autoClose:!1}),Fe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(h=o.session.peer.metadata.icons)==null?void 0:h[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(d=o==null?void 0:o.auths)!=null&&d.length){const p=o.auths.map(g=>{const y=n.client.formatAuthMessage({request:g.p,iss:g.p.iss});return{data:{...g.p,accountAddress:g.p.iss.split(":").slice(-1).join(""),chainId:g.p.iss.split(":").slice(2,4).join(":"),uri:g.p.aud,version:g.p.version||i.version,expirationTime:g.p.exp,issuedAt:g.p.iat,notBefore:g.p.nbf},message:y,signature:g.s.s,cacao:g}});try{await r.setSessions(p),Kt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:js.getSIWXEventProperties()})}catch(g){throw console.error("SIWX:universalProviderAuth - failed to set sessions",g),Kt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:js.getSIWXEventProperties()}),await n.disconnect().catch(console.error),g}finally{La.hide()}}return!0},getSIWXEventProperties(){var e;const n=M.state.activeChain;if(!n)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=M.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Vs(n)===Gn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const n=this.getSIWX();n&&await n.setSessions([])}},hue={},due=(n,e)=>{const t=fe.useRef(void 0);fe.useEffect(()=>{t.current=Jq(n,e)}),fe.useDebugValue(t.current)},fue=due,pue=new WeakMap;function SS(n,e){const r=fe.useMemo(()=>n&&new WeakMap,[n]),s=fe.useRef(void 0);let i=!0;const o=fe.useSyncExternalStore(fe.useCallback(h=>{const d=ar(n,h);return h(),d},[n,void 0]),()=>{const h=ph(n);try{if(!i&&s.current&&!VU(s.current,h,r,new WeakMap))return s.current}catch{}return h},()=>ph(n));i=!1,fe.useLayoutEffect(()=>{s.current=o}),(hue?"production":void 0)!=="production"&&fue(o,r);const l=fe.useMemo(()=>new WeakMap,[]);return GU(o,r,l,pue)}function gue(){const{activeCaipNetwork:n}=SS(M.state);return{caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId}}function mue(n){var d;const e=SS(M.state),{activeConnectorIds:t}=SS(_e.state),r=e.activeChain;if(!r)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const s=(d=e.chains.get(r))==null?void 0:d.accountState,i=_e.getAuthConnector(r),o=t[r];return{allAccounts:Te.getConnections(r).flatMap(p=>p.accounts.map(({address:g})=>Le.createAccount(r,g,"eoa"))),caipAddress:s==null?void 0:s.caipAddress,address:Le.getPlainAddress(s==null?void 0:s.caipAddress),isConnected:!!(s!=null&&s.caipAddress),status:s==null?void 0:s.status,embeddedWalletInfo:i&&o===ce.CONNECTOR_ID.AUTH?{user:s!=null&&s.user?{...s.user,username:ve.getConnectedSocialUsername()}:void 0,authProvider:(s==null?void 0:s.socialProvider)||"email",accountType:s==null?void 0:s.preferredAccountType,isSmartAccountDeployed:!!(s!=null&&s.smartAccountDeployed)}:void 0}}const Pt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ce.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},ka={ConnectorExplorerIds:{[ce.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ce.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ce.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Pt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Pt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Pt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Pt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Pt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Pt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Pt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Pt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Pt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Pt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Pt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ce.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ce.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ce.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ce.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ce.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ce.CONNECTOR_ID.COINBASE]:"Coinbase",[ce.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ce.CONNECTOR_ID.LEDGER]:"Ledger",[ce.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ce.CONNECTOR_ID.INJECTED]:"INJECTED",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ce.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ce.CONNECTOR_ID.AUTH]:"AUTH",[Pt.CONNECTOR_TYPE_AUTH]:"AUTH"}},rr={getCaipTokens(n){if(!n)return;const e={};return Object.entries(n).forEach(([t,r])=>{e[`${Pt.EIP155}:${t}`]=r}),e},isLowerCaseMatch(n,e){return(n==null?void 0:n.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const n=M.state.activeChain;return ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>_e.getConnectorId(e)===ce.CONNECTOR_ID.AUTH&&e===n)},withRetry({conditionFn:n,intervalMs:e,maxRetries:t}){let r=0;return new Promise(s=>{async function i(){return r+=1,await n()?s(!0):r>=t?s(!1):(setTimeout(i,e),null)}i()})}},yue=new AbortController,Hr={EmbeddedWalletAbortController:yue,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found. Please make sure it is included in 'networks' array in createAppKit function."},ORIGIN_NOT_ALLOWED:{shortMessage:"Origin Not Allowed",longMessage:()=>`🔧 Origin ${wue()?window.origin:"unknown"} not found on allow list. Please update your project configurations on dashboard.reown.com.`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Unverified Domain",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider. Please check your time settings and connect again."},INVALID_PROJECT_ID:{shortMessage:"Invalid Project ID",longMessage:"The project ID is invalid. Visit dashboard.reown.com to get a new one."},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:n=>`Failed to get App Configuration ${n||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function wue(){return typeof window<"u"}const bue={createLogger(n,e="error"){const t=Up({level:e}),{logger:r}=mx({opts:t});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){n(i,...s);return}n(void 0,...s)},r}},Eue="rpc.walletconnect.org";function H8(n,e){const t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",n),t.searchParams.set("projectId",e),t.toString()}const I_=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Zd={extendRpcUrlWithProjectId(n,e){let t=!1;try{t=new URL(n).host===Eue}catch{t=!1}if(t){const r=new URL(n);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return n},isCaipNetwork(n){return"chainNamespace"in n&&"caipNetworkId"in n},getChainNamespace(n){return this.isCaipNetwork(n)?n.chainNamespace:ce.CHAIN.EVM},getCaipNetworkId(n){return this.isCaipNetwork(n)?n.caipNetworkId:`${ce.CHAIN.EVM}:${n.id}`},getDefaultRpcUrl(n,e,t){var s,i,o;const r=(o=(i=(s=n.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return I_.includes(e)?H8(e,t):r||""},extendCaipNetwork(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){var y,b,E,v,A,S,T;const s=this.getChainNamespace(n),i=this.getCaipNetworkId(n),o=(E=(b=(y=n.rpcUrls)==null?void 0:y.default)==null?void 0:b.http)==null?void 0:E[0],l=this.getDefaultRpcUrl(n,i,t),h=((S=(A=(v=n==null?void 0:n.rpcUrls)==null?void 0:v.chainDefault)==null?void 0:A.http)==null?void 0:S[0])||o,d=((T=r==null?void 0:r[i])==null?void 0:T.map(N=>N.url))||[],p=[...d,...l?[l]:[]],g=[...d];return h&&!g.includes(h)&&g.push(h),{...n,chainNamespace:s,caipNetworkId:i,assets:{imageId:ka.NetworkImageIds[n.id],imageUrl:e==null?void 0:e[n.id]},rpcUrls:{...n.rpcUrls,default:{http:p},chainDefault:{http:g}}}},extendCaipNetworks(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){return n.map(s=>Zd.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:t}))},getViemTransport(n,e,t){var s,i,o;const r=[];return t==null||t.forEach(l=>{r.push(lb(l.url,l.config))}),I_.includes(n.caipNetworkId)&&r.push(lb(H8(n.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=n==null?void 0:n.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(l=>{r.push(lb(l))}),FR(r)},extendWagmiTransports(n,e,t){if(I_.includes(n.caipNetworkId)){const r=this.getDefaultRpcUrl(n,n.caipNetworkId,e);return FR([t,lb(r)])}return t},getUnsupportedNetwork(n){return{id:n.split(":")[1],caipNetworkId:n,name:ce.UNSUPPORTED_NETWORK_NAME,chainNamespace:n.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(n){var h;const e=ve.getActiveCaipNetworkId(),t=M.getAllRequestedCaipNetworks(),r=Array.from(((h=M.state.chains)==null?void 0:h.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=t==null?void 0:t.find(d=>d.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||n||(t==null?void 0:t[0])}},BE={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},us=un({providers:{...BE},providerIds:{...BE}}),Dt={state:us,subscribeKey(n,e){return Ur(us,n,e)},subscribe(n){return ar(us,()=>{n(us)})},subscribeProviders(n){return ar(us.providers,()=>n(us.providers))},setProvider(n,e){n&&e&&(us.providers[n]=gh(e))},getProvider(n){if(n)return us.providers[n]},setProviderId(n,e){e&&(us.providerIds[n]=e)},getProviderId(n){if(n)return us.providerIds[n]},reset(){us.providers={...BE},us.providerIds={...BE}},resetChain(n){us.providers[n]=void 0,us.providerIds[n]=void 0}},j8={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},fr={set(n,e){qs.isClient&&localStorage.setItem(`${He.STORAGE_KEY}${n}`,e)},get(n){return qs.isClient?localStorage.getItem(`${He.STORAGE_KEY}${n}`):null},delete(n,e){qs.isClient&&(e?localStorage.removeItem(n):localStorage.removeItem(`${He.STORAGE_KEY}${n}`))}},Ib=30*1e3,qs={checkIfAllowedToTriggerEmail(){const n=fr.get(He.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<Ib){const t=Math.ceil((Ib-e)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){const n=fr.get(He.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<Ib)return Math.ceil((Ib-e)/1e3)}return 0},checkIfRequestExists(n){return Gn.NOT_SAFE_RPC_METHODS.includes(n.method)||Gn.SAFE_RPC_METHODS.includes(n.method)},getResponseType(n){return typeof n=="string"&&((n==null?void 0:n.match(j8.transactionHash))||(n==null?void 0:n.match(j8.signedMessage)))?He.RPC_RESPONSE_TYPE_TX:He.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(n){return Gn.SAFE_RPC_METHODS.includes(n.method)},isClient:typeof window<"u"};var kt;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(kt||(kt={}));var xS;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(xS||(xS={}));const Ue=kt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Kc=n=>{switch(typeof n){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(n)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(n)?Ue.array:n===null?Ue.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ue.promise:typeof Map<"u"&&n instanceof Map?Ue.map:typeof Set<"u"&&n instanceof Set?Ue.set:typeof Date<"u"&&n instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ae=kt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),vue=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Zi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let l=r,h=0;for(;h<o.path.length;){const d=o.path[h];h===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],h++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,kt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Zi.create=n=>new Zi(n);const D0=(n,e)=>{let t;switch(n.code){case Ae.invalid_type:n.received===Ue.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Ae.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,kt.jsonStringifyReplacer)}`;break;case Ae.unrecognized_keys:t=`Unrecognized key(s) in object: ${kt.joinValues(n.keys,", ")}`;break;case Ae.invalid_union:t="Invalid input";break;case Ae.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${kt.joinValues(n.options)}`;break;case Ae.invalid_enum_value:t=`Invalid enum value. Expected ${kt.joinValues(n.options)}, received '${n.received}'`;break;case Ae.invalid_arguments:t="Invalid function arguments";break;case Ae.invalid_return_type:t="Invalid function return type";break;case Ae.invalid_date:t="Invalid date";break;case Ae.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:kt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Ae.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Ae.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Ae.custom:t="Invalid input";break;case Ae.invalid_intersection_types:t="Intersection results could not be merged";break;case Ae.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Ae.not_finite:t="Number must be finite";break;default:t=e.defaultError,kt.assertNever(n)}return{message:t}};let FB=D0;function Aue(n){FB=n}function LE(){return FB}const ME=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};let l="";const h=r.filter(d=>!!d).slice().reverse();for(const d of h)l=d(o,{data:e,defaultError:l}).message;return{...s,path:i,message:s.message||l}},Cue=[];function Me(n,e){const t=ME({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,LE(),D0].filter(r=>!!r)});n.common.issues.push(t)}class Pr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return it;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t)r.push({key:await s.key,value:await s.value});return Pr.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return it;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const it=Object.freeze({status:"aborted"}),zB=n=>({status:"dirty",value:n}),Xr=n=>({status:"valid",value:n}),NS=n=>n.status==="aborted",TS=n=>n.status==="dirty",P0=n=>n.status==="valid",$E=n=>typeof Promise<"u"&&n instanceof Promise;var Ke;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ke||(Ke={}));class Ga{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const q8=(n,e)=>{if(P0(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Zi(n.common.issues);return this._error=t,this._error}}};function ot(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>o.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:r??l.defaultError}:{message:t??l.defaultError},description:s}}class dt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Kc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Kc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Pr,ctx:{common:e.parent.common,data:e.data,parsedType:Kc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if($E(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return q8(s,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await($E(s)?s:Promise.resolve(s));return q8(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:Ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(h=>h?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new ea({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return jo.create(this,this._def)}nullable(){return Ch.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xi.create(this,this._def)}promise(){return _p.create(this,this._def)}or(e){return L0.create([this,e],this._def)}and(e){return M0.create(this,e,this._def)}transform(e){return new ea({...ot(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new j0({...ot(this._def),innerType:this,defaultValue:t,typeName:nt.ZodDefault})}brand(){return new jB({typeName:nt.ZodBranded,type:this,...ot(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new jE({...ot(this._def),innerType:this,catchValue:t,typeName:nt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Oy.create(this,e)}readonly(){return GE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _ue=/^c[^\s-]{8,}$/i,Sue=/^[a-z][a-z0-9]*$/,xue=/^[0-9A-HJKMNP-TV-Z]{26}$/,Nue=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tue=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Iue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let O_;const Oue=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Rue=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Due=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Pue(n,e){return!!((e==="v4"||!e)&&Oue.test(n)||(e==="v6"||!e)&&Rue.test(n))}class Yi extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.string,received:i.parsedType}),it}const r=new Pr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Me(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Me(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Tue.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")O_||(O_=new RegExp(Iue,"u")),O_.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Nue.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")_ue.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Sue.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")xue.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:Ae.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:Ae.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Due(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Pue(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:Ae.invalid_string,message:i.message}),r.dirty()):kt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:Ae.invalid_string,...Ke.errToObj(r)})}_addCheck(e){return new Yi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ke.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ke.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ke.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ke.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ke.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ke.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ke.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ke.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Ke.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ke.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ke.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ke.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ke.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ke.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ke.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ke.errToObj(t)})}nonempty(e){return this.min(1,Ke.errToObj(e))}trim(){return new Yi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Yi.create=n=>{var e;return new Yi({checks:[],typeName:nt.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ot(n)})};function Uue(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class xl extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.number,received:i.parsedType}),it}let r;const s=new Pr;for(const i of this._def.checks)i.kind==="int"?kt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Uue(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.not_finite,message:i.message}),s.dirty()):kt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ke.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ke.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ke.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ke.toString(t))}setLimit(e,t,r,s){return new xl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ke.toString(s)}]})}_addCheck(e){return new xl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ke.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ke.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ke.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ke.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ke.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ke.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&kt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}xl.create=n=>new xl({checks:[],typeName:nt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ot(n)});class Nl extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.bigint,received:i.parsedType}),it}let r;const s=new Pr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):kt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ke.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ke.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ke.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ke.toString(t))}setLimit(e,t,r,s){return new Nl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ke.toString(s)}]})}_addCheck(e){return new Nl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ke.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ke.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Nl.create=n=>{var e;return new Nl({checks:[],typeName:nt.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ot(n)})};class U0 extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.boolean,received:r.parsedType}),it}return Xr(e.data)}}U0.create=n=>new U0({typeName:nt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ot(n)});class vh extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_type,expected:Ue.date,received:i.parsedType}),it}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:Ae.invalid_date}),it}const r=new Pr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):kt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vh({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ke.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ke.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}vh.create=n=>new vh({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:nt.ZodDate,...ot(n)});class FE extends dt{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.symbol,received:r.parsedType}),it}return Xr(e.data)}}FE.create=n=>new FE({typeName:nt.ZodSymbol,...ot(n)});class k0 extends dt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.undefined,received:r.parsedType}),it}return Xr(e.data)}}k0.create=n=>new k0({typeName:nt.ZodUndefined,...ot(n)});class B0 extends dt{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.null,received:r.parsedType}),it}return Xr(e.data)}}B0.create=n=>new B0({typeName:nt.ZodNull,...ot(n)});class Cp extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return Xr(e.data)}}Cp.create=n=>new Cp({typeName:nt.ZodAny,...ot(n)});class rh extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xr(e.data)}}rh.create=n=>new rh({typeName:nt.ZodUnknown,...ot(n)});class Qo extends dt{_parse(e){const t=this._getOrReturnCtx(e);return Me(t,{code:Ae.invalid_type,expected:Ue.never,received:t.parsedType}),it}}Qo.create=n=>new Qo({typeName:nt.ZodNever,...ot(n)});class zE extends dt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.void,received:r.parsedType}),it}return Xr(e.data)}}zE.create=n=>new zE({typeName:nt.ZodVoid,...ot(n)});class Xi extends dt{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==Ue.array)return Me(t,{code:Ae.invalid_type,expected:Ue.array,received:t.parsedType}),it;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(o||l)&&(Me(t,{code:o?Ae.too_big:Ae.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Me(t,{code:Ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Me(t,{code:Ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>s.type._parseAsync(new Ga(t,o,t.path,l)))).then(o=>Pr.mergeArray(r,o));const i=[...t.data].map((o,l)=>s.type._parseSync(new Ga(t,o,t.path,l)));return Pr.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Xi({...this._def,minLength:{value:e,message:Ke.toString(t)}})}max(e,t){return new Xi({...this._def,maxLength:{value:e,message:Ke.toString(t)}})}length(e,t){return new Xi({...this._def,exactLength:{value:e,message:Ke.toString(t)}})}nonempty(e){return this.min(1,e)}}Xi.create=(n,e)=>new Xi({type:n,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...ot(e)});function Xd(n){if(n instanceof En){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=jo.create(Xd(r))}return new En({...n._def,shape:()=>e})}else return n instanceof Xi?new Xi({...n._def,type:Xd(n.element)}):n instanceof jo?jo.create(Xd(n.unwrap())):n instanceof Ch?Ch.create(Xd(n.unwrap())):n instanceof Va?Va.create(n.items.map(e=>Xd(e))):n}class En extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=kt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ue.object){const d=this._getOrReturnCtx(e);return Me(d,{code:Ae.invalid_type,expected:Ue.object,received:d.parsedType}),it}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Qo&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const h=[];for(const d of o){const p=i[d],g=s.data[d];h.push({key:{status:"valid",value:d},value:p._parse(new Ga(s,g,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Qo){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)h.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(d==="strict")l.length>0&&(Me(s,{code:Ae.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const g=s.data[p];h.push({key:{status:"valid",value:p},value:d._parse(new Ga(s,g,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of h){const g=await p.key;d.push({key:g,value:await p.value,alwaysSet:p.alwaysSet})}return d}).then(d=>Pr.mergeObjectSync(r,d)):Pr.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return Ke.errToObj,new En({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,o,l;const h=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(l=Ke.errToObj(e).message)!==null&&l!==void 0?l:h}:{message:h}}}:{}})}strip(){return new En({...this._def,unknownKeys:"strip"})}passthrough(){return new En({...this._def,unknownKeys:"passthrough"})}extend(e){return new En({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new En({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new En({...this._def,catchall:e})}pick(e){const t={};return kt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new En({...this._def,shape:()=>t})}omit(e){const t={};return kt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new En({...this._def,shape:()=>t})}deepPartial(){return Xd(this)}partial(e){const t={};return kt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new En({...this._def,shape:()=>t})}required(e){const t={};return kt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof jo;)i=i._def.innerType;t[r]=i}}),new En({...this._def,shape:()=>t})}keyof(){return HB(kt.objectKeys(this.shape))}}En.create=(n,e)=>new En({shape:()=>n,unknownKeys:"strip",catchall:Qo.create(),typeName:nt.ZodObject,...ot(e)});En.strictCreate=(n,e)=>new En({shape:()=>n,unknownKeys:"strict",catchall:Qo.create(),typeName:nt.ZodObject,...ot(e)});En.lazycreate=(n,e)=>new En({shape:n,unknownKeys:"strip",catchall:Qo.create(),typeName:nt.ZodObject,...ot(e)});class L0 extends dt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Zi(l.ctx.common.issues));return Me(t,{code:Ae.invalid_union,unionErrors:o}),it}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const h of r){const d={...t,common:{...t.common,issues:[]},parent:null},p=h._parseSync({data:t.data,path:t.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(h=>new Zi(h));return Me(t,{code:Ae.invalid_union,unionErrors:l}),it}}get options(){return this._def.options}}L0.create=(n,e)=>new L0({options:n,typeName:nt.ZodUnion,...ot(e)});const Yb=n=>n instanceof F0?Yb(n.schema):n instanceof ea?Yb(n.innerType()):n instanceof z0?[n.value]:n instanceof Tl?n.options:n instanceof H0?Object.keys(n.enum):n instanceof j0?Yb(n._def.innerType):n instanceof k0?[void 0]:n instanceof B0?[null]:null;class Fv extends dt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.object)return Me(t,{code:Ae.invalid_type,expected:Ue.object,received:t.parsedType}),it;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Me(t,{code:Ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),it)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const o=Yb(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new Fv({typeName:nt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ot(r)})}}function IS(n,e){const t=Kc(n),r=Kc(e);if(n===e)return{valid:!0,data:n};if(t===Ue.object&&r===Ue.object){const s=kt.objectKeys(e),i=kt.objectKeys(n).filter(l=>s.indexOf(l)!==-1),o={...n,...e};for(const l of i){const h=IS(n[l],e[l]);if(!h.valid)return{valid:!1};o[l]=h.data}return{valid:!0,data:o}}else if(t===Ue.array&&r===Ue.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],l=e[i],h=IS(o,l);if(!h.valid)return{valid:!1};s.push(h.data)}return{valid:!0,data:s}}else return t===Ue.date&&r===Ue.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class M0 extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(NS(i)||NS(o))return it;const l=IS(i.value,o.value);return l.valid?((TS(i)||TS(o))&&t.dirty(),{status:t.value,value:l.data}):(Me(r,{code:Ae.invalid_intersection_types}),it)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}M0.create=(n,e,t)=>new M0({left:n,right:e,typeName:nt.ZodIntersection,...ot(t)});class Va extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return Me(r,{code:Ae.invalid_type,expected:Ue.array,received:r.parsedType}),it;if(r.data.length<this._def.items.length)return Me(r,{code:Ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),it;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:Ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,l)=>{const h=this._def.items[l]||this._def.rest;return h?h._parse(new Ga(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Pr.mergeArray(t,o)):Pr.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Va({...this._def,rest:e})}}Va.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Va({items:n,typeName:nt.ZodTuple,rest:null,...ot(e)})};class $0 extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return Me(r,{code:Ae.invalid_type,expected:Ue.object,received:r.parsedType}),it;const s=[],i=this._def.keyType,o=this._def.valueType;for(const l in r.data)s.push({key:i._parse(new Ga(r,l,r.path,l)),value:o._parse(new Ga(r,r.data[l],r.path,l))});return r.common.async?Pr.mergeObjectAsync(t,s):Pr.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof dt?new $0({keyType:e,valueType:t,typeName:nt.ZodRecord,...ot(r)}):new $0({keyType:Yi.create(),valueType:e,typeName:nt.ZodRecord,...ot(t)})}}class HE extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return Me(r,{code:Ae.invalid_type,expected:Ue.map,received:r.parsedType}),it;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,h],d)=>({key:s._parse(new Ga(r,l,r.path,[d,"key"])),value:i._parse(new Ga(r,h,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const h of o){const d=await h.key,p=await h.value;if(d.status==="aborted"||p.status==="aborted")return it;(d.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(d.value,p.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const h of o){const d=h.key,p=h.value;if(d.status==="aborted"||p.status==="aborted")return it;(d.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(d.value,p.value)}return{status:t.value,value:l}}}}HE.create=(n,e,t)=>new HE({valueType:e,keyType:n,typeName:nt.ZodMap,...ot(t)});class Ah extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return Me(r,{code:Ae.invalid_type,expected:Ue.set,received:r.parsedType}),it;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:Ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:Ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(h){const d=new Set;for(const p of h){if(p.status==="aborted")return it;p.status==="dirty"&&t.dirty(),d.add(p.value)}return{status:t.value,value:d}}const l=[...r.data.values()].map((h,d)=>i._parse(new Ga(r,h,r.path,d)));return r.common.async?Promise.all(l).then(h=>o(h)):o(l)}min(e,t){return new Ah({...this._def,minSize:{value:e,message:Ke.toString(t)}})}max(e,t){return new Ah({...this._def,maxSize:{value:e,message:Ke.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ah.create=(n,e)=>new Ah({valueType:n,minSize:null,maxSize:null,typeName:nt.ZodSet,...ot(e)});class mf extends dt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.function)return Me(t,{code:Ae.invalid_type,expected:Ue.function,received:t.parsedType}),it;function r(l,h){return ME({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,LE(),D0].filter(d=>!!d),issueData:{code:Ae.invalid_arguments,argumentsError:h}})}function s(l,h){return ME({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,LE(),D0].filter(d=>!!d),issueData:{code:Ae.invalid_return_type,returnTypeError:h}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof _p){const l=this;return Xr(async function(...h){const d=new Zi([]),p=await l._def.args.parseAsync(h,i).catch(b=>{throw d.addIssue(r(h,b)),d}),g=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(g,i).catch(b=>{throw d.addIssue(s(g,b)),d})})}else{const l=this;return Xr(function(...h){const d=l._def.args.safeParse(h,i);if(!d.success)throw new Zi([r(h,d.error)]);const p=Reflect.apply(o,this,d.data),g=l._def.returns.safeParse(p,i);if(!g.success)throw new Zi([s(p,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mf({...this._def,args:Va.create(e).rest(rh.create())})}returns(e){return new mf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new mf({args:e||Va.create([]).rest(rh.create()),returns:t||rh.create(),typeName:nt.ZodFunction,...ot(r)})}}class F0 extends dt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}F0.create=(n,e)=>new F0({getter:n,typeName:nt.ZodLazy,...ot(e)});class z0 extends dt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Me(t,{received:t.data,code:Ae.invalid_literal,expected:this._def.value}),it}return{status:"valid",value:e.data}}get value(){return this._def.value}}z0.create=(n,e)=>new z0({value:n,typeName:nt.ZodLiteral,...ot(e)});function HB(n,e){return new Tl({values:n,typeName:nt.ZodEnum,...ot(e)})}class Tl extends dt{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Me(t,{expected:kt.joinValues(r),received:t.parsedType,code:Ae.invalid_type}),it}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return Me(t,{received:t.data,code:Ae.invalid_enum_value,options:r}),it}return Xr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Tl.create(e)}exclude(e){return Tl.create(this.options.filter(t=>!e.includes(t)))}}Tl.create=HB;class H0 extends dt{_parse(e){const t=kt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=kt.objectValues(t);return Me(r,{expected:kt.joinValues(s),received:r.parsedType,code:Ae.invalid_type}),it}if(t.indexOf(e.data)===-1){const s=kt.objectValues(t);return Me(r,{received:r.data,code:Ae.invalid_enum_value,options:s}),it}return Xr(e.data)}get enum(){return this._def.values}}H0.create=(n,e)=>new H0({values:n,typeName:nt.ZodNativeEnum,...ot(e)});class _p extends dt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.promise&&t.common.async===!1)return Me(t,{code:Ae.invalid_type,expected:Ue.promise,received:t.parsedType}),it;const r=t.parsedType===Ue.promise?t.data:Promise.resolve(t.data);return Xr(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}_p.create=(n,e)=>new _p({type:n,typeName:nt.ZodPromise,...ot(e)});class ea extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Me(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(l=>this._def.schema._parseAsync({data:l,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=l=>{const h=s.refinement(l,i);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?it:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?it:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!P0(o))return o;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>P0(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:t.value,value:l})):o);kt.assertNever(s)}}ea.create=(n,e,t)=>new ea({schema:n,typeName:nt.ZodEffects,effect:e,...ot(t)});ea.createWithPreprocess=(n,e,t)=>new ea({schema:e,effect:{type:"preprocess",transform:n},typeName:nt.ZodEffects,...ot(t)});class jo extends dt{_parse(e){return this._getType(e)===Ue.undefined?Xr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jo.create=(n,e)=>new jo({innerType:n,typeName:nt.ZodOptional,...ot(e)});class Ch extends dt{_parse(e){return this._getType(e)===Ue.null?Xr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ch.create=(n,e)=>new Ch({innerType:n,typeName:nt.ZodNullable,...ot(e)});class j0 extends dt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}j0.create=(n,e)=>new j0({innerType:n,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ot(e)});class jE extends dt{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return $E(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Zi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}jE.create=(n,e)=>new jE({innerType:n,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ot(e)});class qE extends dt{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:Ae.invalid_type,expected:Ue.nan,received:r.parsedType}),it}return{status:"valid",value:e.data}}}qE.create=n=>new qE({typeName:nt.ZodNaN,...ot(n)});const kue=Symbol("zod_brand");class jB extends dt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Oy extends dt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?it:i.status==="dirty"?(t.dirty(),zB(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?it:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Oy({in:e,out:t,typeName:nt.ZodPipeline})}}class GE extends dt{_parse(e){const t=this._def.innerType._parse(e);return P0(t)&&(t.value=Object.freeze(t.value)),t}}GE.create=(n,e)=>new GE({innerType:n,typeName:nt.ZodReadonly,...ot(e)});const qB=(n,e={},t)=>n?Cp.create().superRefine((r,s)=>{var i,o;if(!n(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,h=(o=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,d=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...d,fatal:h})}}):Cp.create(),Bue={object:En.lazycreate};var nt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(nt||(nt={}));const Lue=(n,e={message:`Input not instance of ${n.name}`})=>qB(t=>t instanceof n,e),GB=Yi.create,VB=xl.create,Mue=qE.create,$ue=Nl.create,KB=U0.create,Fue=vh.create,zue=FE.create,Hue=k0.create,jue=B0.create,que=Cp.create,Gue=rh.create,Vue=Qo.create,Kue=zE.create,Wue=Xi.create,Yue=En.create,Que=En.strictCreate,Zue=L0.create,Xue=Fv.create,Jue=M0.create,ehe=Va.create,the=$0.create,nhe=HE.create,rhe=Ah.create,she=mf.create,ihe=F0.create,ahe=z0.create,ohe=Tl.create,che=H0.create,lhe=_p.create,G8=ea.create,uhe=jo.create,hhe=Ch.create,dhe=ea.createWithPreprocess,fhe=Oy.create,phe=()=>GB().optional(),ghe=()=>VB().optional(),mhe=()=>KB().optional(),yhe={string:n=>Yi.create({...n,coerce:!0}),number:n=>xl.create({...n,coerce:!0}),boolean:n=>U0.create({...n,coerce:!0}),bigint:n=>Nl.create({...n,coerce:!0}),date:n=>vh.create({...n,coerce:!0})},whe=it;var D=Object.freeze({__proto__:null,defaultErrorMap:D0,setErrorMap:Aue,getErrorMap:LE,makeIssue:ME,EMPTY_PATH:Cue,addIssueToContext:Me,ParseStatus:Pr,INVALID:it,DIRTY:zB,OK:Xr,isAborted:NS,isDirty:TS,isValid:P0,isAsync:$E,get util(){return kt},get objectUtil(){return xS},ZodParsedType:Ue,getParsedType:Kc,ZodType:dt,ZodString:Yi,ZodNumber:xl,ZodBigInt:Nl,ZodBoolean:U0,ZodDate:vh,ZodSymbol:FE,ZodUndefined:k0,ZodNull:B0,ZodAny:Cp,ZodUnknown:rh,ZodNever:Qo,ZodVoid:zE,ZodArray:Xi,ZodObject:En,ZodUnion:L0,ZodDiscriminatedUnion:Fv,ZodIntersection:M0,ZodTuple:Va,ZodRecord:$0,ZodMap:HE,ZodSet:Ah,ZodFunction:mf,ZodLazy:F0,ZodLiteral:z0,ZodEnum:Tl,ZodNativeEnum:H0,ZodPromise:_p,ZodEffects:ea,ZodTransformer:ea,ZodOptional:jo,ZodNullable:Ch,ZodDefault:j0,ZodCatch:jE,ZodNaN:qE,BRAND:kue,ZodBranded:jB,ZodPipeline:Oy,ZodReadonly:GE,custom:qB,Schema:dt,ZodSchema:dt,late:Bue,get ZodFirstPartyTypeKind(){return nt},coerce:yhe,any:que,array:Wue,bigint:$ue,boolean:KB,date:Fue,discriminatedUnion:Xue,effect:G8,enum:ohe,function:she,instanceof:Lue,intersection:Jue,lazy:ihe,literal:ahe,map:nhe,nan:Mue,nativeEnum:che,never:Vue,null:jue,nullable:hhe,number:VB,object:Yue,oboolean:mhe,onumber:ghe,optional:uhe,ostring:phe,pipeline:fhe,preprocess:dhe,promise:lhe,record:the,set:rhe,strictObject:Que,string:GB,symbol:zue,transformer:G8,tuple:ehe,undefined:Hue,union:Zue,unknown:Gue,void:Kue,NEVER:whe,ZodIssueCode:Ae,quotelessJson:vue,ZodError:Zi});const _n=D.object({message:D.string()});function ke(n){return D.literal(He[n])}const zv=D.object({serializedMessage:D.string().optional(),accountAddress:D.string(),chainId:D.string(),notBefore:D.string().optional(),domain:D.string(),uri:D.string(),version:D.string(),nonce:D.string(),statement:D.string().optional(),resources:D.array(D.string()).optional(),requestId:D.string().optional(),issuedAt:D.string().optional(),expirationTime:D.string().optional()});D.object({accessList:D.array(D.string()),blockHash:D.string().nullable(),blockNumber:D.string().nullable(),chainId:D.string().or(D.number()),from:D.string(),gas:D.string(),hash:D.string(),input:D.string().nullable(),maxFeePerGas:D.string(),maxPriorityFeePerGas:D.string(),nonce:D.string(),r:D.string(),s:D.string(),to:D.string(),transactionIndex:D.string().nullable(),type:D.string(),v:D.string(),value:D.string()});const bhe=D.object({chainId:D.string().or(D.number()),rpcUrl:D.optional(D.string())}),Ehe=D.object({email:D.string().email()}),vhe=D.object({otp:D.string()}),Ahe=D.object({uri:D.string(),preferredAccountType:D.optional(D.string()),chainId:D.optional(D.string().or(D.number())),siwxMessage:D.optional(zv),rpcUrl:D.optional(D.string())}),Che=D.object({chainId:D.optional(D.string().or(D.number())),preferredAccountType:D.optional(D.string()),socialUri:D.optional(D.string()),siwxMessage:D.optional(zv),rpcUrl:D.optional(D.string())}),_he=D.object({provider:D.enum(["google","github","apple","facebook","x","discord"])}),She=D.object({email:D.string().email()}),xhe=D.object({otp:D.string()}),Nhe=D.object({otp:D.string()}),The=D.object({themeMode:D.optional(D.enum(["light","dark"])),themeVariables:D.optional(D.record(D.string(),D.string().or(D.number()))),w3mThemeVariables:D.optional(D.record(D.string(),D.string()))}),Ihe=D.object({metadata:D.object({name:D.string(),description:D.string(),url:D.string(),icons:D.array(D.string())}).optional(),sdkVersion:D.string().optional(),sdkType:D.string().optional(),projectId:D.string()}),Ohe=D.object({type:D.string()}),Rhe=D.object({action:D.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Dhe=D.object({url:D.string()}),Phe=D.object({userName:D.string()}),Uhe=D.object({email:D.string().optional().nullable(),address:D.string(),chainId:D.string().or(D.number()),accounts:D.array(D.object({address:D.string(),type:D.enum([Gn.ACCOUNT_TYPES.EOA,Gn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:D.string().optional().nullable(),preferredAccountType:D.optional(D.string()),signature:D.string().optional(),message:D.string().optional(),siwxMessage:D.optional(zv)}),khe=D.object({action:D.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Bhe=D.object({email:D.string().email().optional().nullable(),address:D.string(),chainId:D.string().or(D.number()),smartAccountDeployed:D.optional(D.boolean()),accounts:D.array(D.object({address:D.string(),type:D.enum([Gn.ACCOUNT_TYPES.EOA,Gn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:D.optional(D.string()),signature:D.string().optional(),message:D.string().optional(),siwxMessage:D.optional(zv)}),Lhe=D.object({uri:D.string()}),Mhe=D.object({isConnected:D.boolean()}),$he=D.object({chainId:D.string().or(D.number())}),Fhe=D.object({chainId:D.string().or(D.number())}),zhe=D.object({newEmail:D.string().email()}),Hhe=D.object({smartAccountEnabledNetworks:D.array(D.number())});D.object({address:D.string(),isDeployed:D.boolean()});const jhe=D.object({version:D.string().optional()}),qhe=D.object({type:D.string(),address:D.string()}),Ghe=D.any(),Vhe=D.object({method:D.literal("eth_accounts")}),Khe=D.object({method:D.literal("eth_blockNumber")}),Whe=D.object({method:D.literal("eth_call"),params:D.array(D.any())}),Yhe=D.object({method:D.literal("eth_chainId")}),Qhe=D.object({method:D.literal("eth_estimateGas"),params:D.array(D.any())}),Zhe=D.object({method:D.literal("eth_feeHistory"),params:D.array(D.any())}),Xhe=D.object({method:D.literal("eth_gasPrice")}),Jhe=D.object({method:D.literal("eth_getAccount"),params:D.array(D.any())}),ede=D.object({method:D.literal("eth_getBalance"),params:D.array(D.any())}),tde=D.object({method:D.literal("eth_getBlockByHash"),params:D.array(D.any())}),nde=D.object({method:D.literal("eth_getBlockByNumber"),params:D.array(D.any())}),rde=D.object({method:D.literal("eth_getBlockReceipts"),params:D.array(D.any())}),sde=D.object({method:D.literal("eth_getBlockTransactionCountByHash"),params:D.array(D.any())}),ide=D.object({method:D.literal("eth_getBlockTransactionCountByNumber"),params:D.array(D.any())}),ade=D.object({method:D.literal("eth_getCode"),params:D.array(D.any())}),ode=D.object({method:D.literal("eth_getFilterChanges"),params:D.array(D.any())}),cde=D.object({method:D.literal("eth_getFilterLogs"),params:D.array(D.any())}),lde=D.object({method:D.literal("eth_getLogs"),params:D.array(D.any())}),ude=D.object({method:D.literal("eth_getProof"),params:D.array(D.any())}),hde=D.object({method:D.literal("eth_getStorageAt"),params:D.array(D.any())}),dde=D.object({method:D.literal("eth_getTransactionByBlockHashAndIndex"),params:D.array(D.any())}),fde=D.object({method:D.literal("eth_getTransactionByBlockNumberAndIndex"),params:D.array(D.any())}),pde=D.object({method:D.literal("eth_getTransactionByHash"),params:D.array(D.any())}),gde=D.object({method:D.literal("eth_getTransactionCount"),params:D.array(D.any())}),mde=D.object({method:D.literal("eth_getTransactionReceipt"),params:D.array(D.any())}),yde=D.object({method:D.literal("eth_getUncleCountByBlockHash"),params:D.array(D.any())}),wde=D.object({method:D.literal("eth_getUncleCountByBlockNumber"),params:D.array(D.any())}),bde=D.object({method:D.literal("eth_maxPriorityFeePerGas")}),Ede=D.object({method:D.literal("eth_newBlockFilter")}),vde=D.object({method:D.literal("eth_newFilter"),params:D.array(D.any())}),Ade=D.object({method:D.literal("eth_newPendingTransactionFilter")}),Cde=D.object({method:D.literal("eth_sendRawTransaction"),params:D.array(D.any())}),_de=D.object({method:D.literal("eth_syncing"),params:D.array(D.any())}),Sde=D.object({method:D.literal("eth_uninstallFilter"),params:D.array(D.any())}),V8=D.object({method:D.literal("personal_sign"),params:D.array(D.any())}),xde=D.object({method:D.literal("eth_signTypedData_v4"),params:D.array(D.any())}),Nde=D.object({method:D.literal("eth_sendTransaction"),params:D.array(D.any())}),Tde=D.object({method:D.literal("solana_signMessage"),params:D.object({message:D.string(),pubkey:D.string()})}),Ide=D.object({method:D.literal("solana_signTransaction"),params:D.object({transaction:D.string()})}),Ode=D.object({method:D.literal("solana_signAllTransactions"),params:D.object({transactions:D.array(D.string())})}),Rde=D.object({method:D.literal("solana_signAndSendTransaction"),params:D.object({transaction:D.string(),options:D.object({skipPreflight:D.boolean().optional(),preflightCommitment:D.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:D.number().optional(),minContextSlot:D.number().optional()}).optional()})}),Dde=D.object({method:D.literal("wallet_sendCalls"),params:D.array(D.object({chainId:D.string().or(D.number()).optional(),from:D.string().optional(),version:D.string().optional(),capabilities:D.any().optional(),calls:D.array(D.object({to:D.string().startsWith("0x"),data:D.string().startsWith("0x").optional(),value:D.string().optional()}))}))}),Pde=D.object({method:D.literal("wallet_getCallsStatus"),params:D.array(D.string())}),Ude=D.object({method:D.literal("wallet_getCapabilities"),params:D.array(D.string().or(D.number()).optional()).optional()}),kde=D.object({method:D.literal("wallet_grantPermissions"),params:D.array(D.any())}),Bde=D.object({method:D.literal("wallet_revokePermissions"),params:D.any()}),Lde=D.object({method:D.literal("wallet_getAssets"),params:D.any()}),K8=D.object({token:D.string()}),Be=D.object({id:D.string().optional()}),R_={appEvent:Be.extend({type:ke("APP_SWITCH_NETWORK"),payload:bhe}).or(Be.extend({type:ke("APP_CONNECT_EMAIL"),payload:Ehe})).or(Be.extend({type:ke("APP_CONNECT_DEVICE")})).or(Be.extend({type:ke("APP_CONNECT_OTP"),payload:vhe})).or(Be.extend({type:ke("APP_CONNECT_SOCIAL"),payload:Ahe})).or(Be.extend({type:ke("APP_GET_FARCASTER_URI")})).or(Be.extend({type:ke("APP_CONNECT_FARCASTER")})).or(Be.extend({type:ke("APP_GET_USER"),payload:D.optional(Che)})).or(Be.extend({type:ke("APP_GET_SOCIAL_REDIRECT_URI"),payload:_he})).or(Be.extend({type:ke("APP_SIGN_OUT")})).or(Be.extend({type:ke("APP_IS_CONNECTED"),payload:D.optional(K8)})).or(Be.extend({type:ke("APP_GET_CHAIN_ID")})).or(Be.extend({type:ke("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:ke("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:ke("APP_SET_PREFERRED_ACCOUNT"),payload:Ohe})).or(Be.extend({type:ke("APP_RPC_REQUEST"),payload:V8.or(Lde).or(Vhe).or(Khe).or(Whe).or(Yhe).or(Qhe).or(Zhe).or(Xhe).or(Jhe).or(ede).or(tde).or(nde).or(rde).or(sde).or(ide).or(ade).or(ode).or(cde).or(lde).or(ude).or(hde).or(dde).or(fde).or(pde).or(gde).or(mde).or(yde).or(wde).or(bde).or(Ede).or(vde).or(Ade).or(Cde).or(_de).or(Sde).or(V8).or(xde).or(Nde).or(Tde).or(Ide).or(Ode).or(Rde).or(Pde).or(Dde).or(Ude).or(kde).or(Bde).and(D.object({chainId:D.string().or(D.number()).optional(),chainNamespace:D.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:D.string().optional()}))})).or(Be.extend({type:ke("APP_UPDATE_EMAIL"),payload:She})).or(Be.extend({type:ke("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:xhe})).or(Be.extend({type:ke("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Nhe})).or(Be.extend({type:ke("APP_SYNC_THEME"),payload:The})).or(Be.extend({type:ke("APP_SYNC_DAPP_DATA"),payload:Ihe})).or(Be.extend({type:ke("APP_RELOAD")})).or(Be.extend({type:ke("APP_RPC_ABORT")})),frameEvent:Be.extend({type:ke("FRAME_SWITCH_NETWORK_ERROR"),payload:_n}).or(Be.extend({type:ke("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Fhe})).or(Be.extend({type:ke("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Rhe})).or(Be.extend({type:ke("FRAME_CONNECT_EMAIL_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Dhe})).or(Be.extend({type:ke("FRAME_GET_FARCASTER_URI_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Phe})).or(Be.extend({type:ke("FRAME_CONNECT_FARCASTER_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_CONNECT_OTP_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:ke("FRAME_CONNECT_DEVICE_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:ke("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Uhe})).or(Be.extend({type:ke("FRAME_CONNECT_SOCIAL_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_GET_USER_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_GET_USER_SUCCESS"),payload:Bhe})).or(Be.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Lhe})).or(Be.extend({type:ke("FRAME_SIGN_OUT_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:ke("FRAME_IS_CONNECTED_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_IS_CONNECTED_SUCCESS"),payload:Mhe})).or(Be.extend({type:ke("FRAME_GET_CHAIN_ID_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_GET_CHAIN_ID_SUCCESS"),payload:$he})).or(Be.extend({type:ke("FRAME_RPC_REQUEST_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_RPC_REQUEST_SUCCESS"),payload:Ghe})).or(Be.extend({type:ke("FRAME_SESSION_UPDATE"),payload:K8})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_SUCCESS"),payload:khe})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:zhe})).or(Be.extend({type:ke("FRAME_SYNC_THEME_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:ke("FRAME_SYNC_DAPP_DATA_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Hhe})).or(Be.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:qhe})).or(Be.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_READY"),payload:jhe})).or(Be.extend({type:ke("FRAME_RELOAD_ERROR"),payload:_n})).or(Be.extend({type:ke("FRAME_RELOAD_SUCCESS")}))};function D_(n,e={}){var t;return typeof(e==null?void 0:e.type)=="string"&&((t=e==null?void 0:e.type)==null?void 0:t.includes(n))}function Mde({projectId:n,chainId:e,version:t,enableLogger:r,rpcUrl:s=ce.BLOCKCHAIN_API_RPC_URL}){const i=new URL(RG);return i.searchParams.set("projectId",n),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",t),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class $de{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ce.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,l,h)=>{function d({data:p}){var y;if(!D_(He.FRAME_EVENT_KEY,p))return;const g=R_.frameEvent.safeParse(p);if(!g.success){console.warn("W3mFrame: invalid frame event",g.error.message);return}((y=g.data)==null?void 0:y.id)===o&&(l(g.data),window.removeEventListener("message",d))}qs.isClient&&(window.addEventListener("message",d),h.addEventListener("abort",()=>{window.removeEventListener("message",d)}))},onFrameEvent:o=>{qs.isClient&&window.addEventListener("message",({data:l})=>{if(!D_(He.FRAME_EVENT_KEY,l))return;const h=R_.frameEvent.safeParse(l);h.success?o(h.data):console.warn("W3mFrame: invalid frame event",h.error.message)})},onAppEvent:o=>{qs.isClient&&window.addEventListener("message",({data:l})=>{if(!D_(He.APP_EVENT_KEY,l))return;const h=R_.appEvent.safeParse(l);h.success||console.warn("W3mFrame: invalid app event",h.error.message),o(l)})},postAppEvent:o=>{var l;if(qs.isClient){if(!((l=this.iframe)!=null&&l.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(qs.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,l)=>{this.frameLoadPromiseResolver={resolve:o,reject:l}}),this.rpcUrl=i,t&&(this.frameLoadPromise=new Promise((o,l)=>{this.frameLoadPromiseResolver={resolve:o,reject:l}}),qs.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Mde({projectId:e,chainId:r,version:PG,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var l;(l=this.frameLoadPromiseResolver)==null||l.reject("Unable to load email login dependency")},this.events.onFrameEvent(l=>{var h;l.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(h=this.frameLoadPromiseResolver)==null||h.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...e)}}class Fde{constructor(e){var i;const t=Up({level:DG}),{logger:r,chunkLoggerController:s}=mx({opts:t});this.logger=kr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class zde{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Fde(e)),this.abortController=i,this.getActiveCaipNetwork=o;const l=this.getRpcUrl(t);this.w3mFrame=new $de({projectId:e,isAppClient:!0,chainId:t,enableLogger:r,rpcUrl:l}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(t=>{t.type===He.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!fr.get(He.EMAIL_LOGIN_USED_KEY)}getEmail(){return fr.get(He.EMAIL)}getUsername(){return fr.get(He.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:He.APP_RELOAD})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error reloading iframe"),t}}async connectEmail(e){var t;try{qs.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:He.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:He.APP_CONNECT_DEVICE})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting device"),t}}async connectOtp(e){var t;try{return this.appEvent({type:He.APP_CONNECT_OTP,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const t=await this.appEvent({type:He.APP_IS_CONNECTED});return t!=null&&t.isConnected||this.deleteAuthLoginCache(),t}catch(t){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error checking connection"),t}}async getChainId(){var e;try{const t=await this.appEvent({type:He.APP_GET_CHAIN_ID});return this.setLastUsedChainId(t.chainId),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting chain id"),t}}async getSocialRedirectUri(e){var t;try{return await this.init(),this.appEvent({type:He.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var t;try{const r=await this.appEvent({type:He.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var t;try{return this.appEvent({type:He.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var t;try{const r=await this.appEvent({type:He.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var t;try{return this.appEvent({type:He.APP_SYNC_THEME,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var t;try{return this.appEvent({type:He.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const t=await this.appEvent({type:He.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(t.smartAccountEnabledNetworks),t}catch(t){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting smart account enabled networks"),t}}async setPreferredAccount(e){var t;try{return this.appEvent({type:He.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var t,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:He.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(t=this.w3mLogger)==null||t.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var t;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:He.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:t,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(t),o=await this.appEvent({type:He.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:t,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:He.APP_GET_FARCASTER_URI})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting farcaster uri"),t}}async connectFarcaster(){var e;try{const t=await this.appEvent({type:He.APP_CONNECT_FARCASTER});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting farcaster"),t}}async switchNetwork({chainId:e}){var t;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:He.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:He.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error disconnecting"),t}}async request(e){var r,s,i,o,l;const t=e;try{if(Gn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const h=e.chainNamespace||"eip155",d=(r=this.getActiveCaipNetwork(h))==null?void 0:r.id;t.chainNamespace=h,t.chainId=d,t.rpcUrl=this.getRpcUrl(d),(s=this.rpcRequestHandler)==null||s.call(this,e);const p=await this.appEvent({type:He.APP_RPC_REQUEST,payload:t});return(i=this.rpcSuccessHandler)==null||i.call(this,p,t),p}catch(h){throw(o=this.rpcErrorHandler)==null||o.call(this,h,t),(l=this.w3mLogger)==null||l.logger.error({error:h},"Error requesting"),h}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===He.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===He.FRAME_IS_CONNECTED_ERROR&&e(),t.type===He.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===He.FRAME_GET_USER_SUCCESS&&e(t.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===He.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===He.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===He.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Gn.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:t,method:r})=>{Gn.SAFE_RPC_METHODS.includes(r)||t.abort(),await this.appEvent({type:He.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(t){(e=this.w3mLogger)==null||e.logger.error({error:t},"Error aborting RPC request")}}async appEvent(e){let t,r;function s(h){return h.replace("@w3m-app/","")}const i=[He.APP_SYNC_DAPP_DATA,He.APP_SYNC_THEME,He.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var h;(h=this.onTimeout)==null||h.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[He.APP_CONNECT_EMAIL,He.APP_CONNECT_DEVICE,He.APP_CONNECT_OTP,He.APP_CONNECT_SOCIAL,He.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(t=setTimeout(()=>{var h;(h=this.onTimeout)==null||h.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((h,d)=>{var b,E,v;const p=Math.random().toString(36).substring(7);(v=(b=this.w3mLogger)==null?void 0:(E=b.logger).info)==null||v.call(E,{event:e,id:p},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:p});const g=new AbortController;if(o==="RPC_REQUEST"){const A=e;this.openRpcRequests=[...this.openRpcRequests,{...A.payload,abortController:g}]}g.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?d(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&d(new Error("Something went wrong"))});function y(A,S){var T,N,k;A.id===p&&((N=S==null?void 0:(T=S.logger).info)==null||N.call(T,{framEvent:A,id:p},"Received frame response"),A.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in A&&h(A.payload),h(void 0)):A.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in A&&d(new Error(((k=A.payload)==null?void 0:k.message)||"An error occurred")),d(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(p,A=>y(A,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){fr.set(He.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){fr.set(He.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&fr.set(He.EMAIL,e),fr.set(He.EMAIL_LOGIN_USED_KEY,"true"),fr.delete(He.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){fr.delete(He.EMAIL_LOGIN_USED_KEY),fr.delete(He.EMAIL),fr.delete(He.LAST_USED_CHAIN_KEY),fr.delete(He.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&fr.set(He.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=fr.get(He.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){fr.set(He.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let t=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?t=(s=qr.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?t="eip155":t="solana");const r=this.getActiveCaipNetwork(t);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Hm{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Hm.instance||(Hm.instance=new zde({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Hm.instance}}var W8={};const Hde={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof W8<"u"?W8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},OS={filterOutDuplicatesByRDNS(n){const e=we.state.enableEIP6963?_e.state.connectors:[],t=ve.getRecentWallets(),r=e.map(l=>{var h;return(h=l.info)==null?void 0:h.rdns}).filter(Boolean),s=t.map(l=>l.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Le.isMobile()){const l=i.indexOf("io.metamask.mobile");i[l]="io.metamask"}return n.filter(l=>!(l!=null&&l.rdns&&i.includes(String(l.rdns))||!(l!=null&&l.rdns)&&e.some(d=>d.name===l.name)))},filterOutDuplicatesByIds(n){const e=_e.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),t=ve.getRecentWallets(),r=e.map(l=>l.explorerId),s=t.map(l=>l.id),i=r.concat(s);return n.filter(l=>!i.includes(l==null?void 0:l.id))},filterOutDuplicateWallets(n){const e=this.filterOutDuplicatesByRDNS(n);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(n){const{connectors:e}=_e.state,{featuredWalletIds:t}=we.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,l)=>{var h;return(h=l.info)!=null&&h.rdns&&(o[l.info.rdns]=!0),o},{});return n.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,l)=>{const h=Number(l.installed)-Number(o.installed);if(h!==0)return h;if(t!=null&&t.length){const d=t.indexOf(o.id),p=t.indexOf(l.id);if(d!==-1&&p!==-1)return d-p;if(d!==-1)return-1;if(p!==-1)return 1}return 0})},getConnectOrderMethod(n,e){var h;const t=(n==null?void 0:n.connectMethodsOrder)||((h=we.state.features)==null?void 0:h.connectMethodsOrder),r=e||_e.state.connectors;if(t)return t;const{injected:s,announced:i}=Qb.getConnectorsByType(r,Ve.state.recommended,Ve.state.featured),o=s.filter(Qb.showConnector),l=i.filter(Qb.showConnector);return o.length||l.length?["wallet","email","social"]:Hde.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(n){const e=!!n.rdns&&Ve.state.excludedWallets.some(r=>r.rdns===n.rdns),t=!!n.name&&Ve.state.excludedWallets.some(r=>rr.isLowerCaseMatch(r.name,n.name));return e||t}},Qb={getConnectorsByType(n,e,t){const{customWallets:r}=we.state,s=ve.getRecentWallets(),i=OS.filterOutDuplicateWallets(e),o=OS.filterOutDuplicateWallets(t),l=n.filter(g=>g.type==="MULTI_CHAIN"),h=n.filter(g=>g.type==="ANNOUNCED"),d=n.filter(g=>g.type==="INJECTED"),p=n.filter(g=>g.type==="EXTERNAL");return{custom:r,recent:s,external:p,multiChain:l,announced:h,injected:d,recommended:i,featured:o}},showConnector(n){var s;const e=(s=n.info)==null?void 0:s.rdns,t=!!e&&Ve.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!n.name&&Ve.state.excludedWallets.some(i=>rr.isLowerCaseMatch(i.name,n.name));return!(n.type==="INJECTED"&&(n.name==="Browser Wallet"&&(!Le.isMobile()||Le.isMobile()&&!e&&!Te.checkInstalled())||t||r)||(n.type==="ANNOUNCED"||n.type==="EXTERNAL")&&(t||r))},getIsConnectedWithWC(){return Array.from(M.state.chains.values()).some(t=>_e.getConnectorId(t.namespace)===ce.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:n,featured:e,custom:t,recent:r,announced:s,injected:i,multiChain:o,external:l,overriddenConnectors:h=(d=>(d=we.state.features)==null?void 0:d.connectorTypeOrder)()??[]}){const y=[{type:"walletConnect",isEnabled:we.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:t&&t.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:n.length>0}].filter(A=>A.isEnabled),b=new Set(y.map(A=>A.type)),E=h.filter(A=>b.has(A)).map(A=>({type:A,isEnabled:!0})),v=y.filter(({type:A})=>!E.some(({type:T})=>T===A));return Array.from(new Set([...E,...v].map(({type:A})=>A)))},getAuthName({email:n,socialUsername:e,socialProvider:t}){return e?t&&t==="discord"&&e.endsWith("0")?e.slice(0,-1):e:n.length>30?`${n.slice(0,-3)}...`:n},async fetchProviderData(n){var e,t;try{if(n.name==="Browser Wallet"&&!Le.isMobile())return{accounts:[],chainId:void 0};if(n.id===ce.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=n.provider)==null?void 0:e.request({method:"eth_accounts"}),(t=n.provider)==null?void 0:t.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${n.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zb=globalThis,Vx=Zb.ShadowRoot&&(Zb.ShadyCSS===void 0||Zb.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Kx=Symbol(),Y8=new WeakMap;let WB=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==Kx)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Vx&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=Y8.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Y8.set(t,e))}return e}toString(){return this.cssText}};const ui=n=>new WB(typeof n=="string"?n:n+"",void 0,Kx),yf=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+n[i+1],n[0]);return new WB(t,n,Kx)},jde=(n,e)=>{if(Vx)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),s=Zb.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=t.cssText,n.appendChild(r)}},Q8=Vx?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return ui(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:qde,defineProperty:Gde,getOwnPropertyDescriptor:Vde,getOwnPropertyNames:Kde,getOwnPropertySymbols:Wde,getPrototypeOf:Yde}=Object,wl=globalThis,Z8=wl.trustedTypes,Qde=Z8?Z8.emptyScript:"",P_=wl.reactiveElementPolyfillSupport,jm=(n,e)=>n,RS={toAttribute(n,e){switch(e){case Boolean:n=n?Qde:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},YB=(n,e)=>!qde(n,e),X8={attribute:!0,type:String,converter:RS,reflect:!1,useDefault:!1,hasChanged:YB};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),wl.litPropertyMetadata??(wl.litPropertyMetadata=new WeakMap);let Jd=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=X8){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,t);s!==void 0&&Gde(this.prototype,e,s)}}static getPropertyDescriptor(e,t,r){const{get:s,set:i}=Vde(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:s,set(o){const l=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??X8}static _$Ei(){if(this.hasOwnProperty(jm("elementProperties")))return;const e=Yde(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(jm("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(jm("properties"))){const t=this.properties,r=[...Kde(t),...Wde(t)];for(const s of r)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,s]of t)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const s=this._$Eu(t,r);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)t.unshift(Q8(s))}else e!==void 0&&t.push(Q8(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return jde(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostConnected)==null?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostDisconnected)==null?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:RS).toAttribute(t,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const l=r.getPropertyOptions(s),h=typeof l.converter=="function"?{fromAttribute:l.converter}:((i=l.converter)==null?void 0:i.fromAttribute)!==void 0?l.converter:RS;this._$Em=s;const d=h.fromAttribute(t,l.type);this[s]=d??((o=this._$Ej)==null?void 0:o.get(s))??d,this._$Em=null}}requestUpdate(e,t,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??YB)(o,t)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:l}=o,h=this[i];l!==!0||this._$AL.has(i)||h===void 0||this.C(i,void 0,o,h)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(t)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};Jd.elementStyles=[],Jd.shadowRootOptions={mode:"open"},Jd[jm("elementProperties")]=new Map,Jd[jm("finalized")]=new Map,P_==null||P_({ReactiveElement:Jd}),(wl.reactiveElementVersions??(wl.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qm=globalThis,VE=qm.trustedTypes,J8=VE?VE.createPolicy("lit-html",{createHTML:n=>n}):void 0,QB="$lit$",Wc=`lit$${Math.random().toFixed(9).slice(2)}$`,ZB="?"+Wc,Zde=`<${ZB}>`,_h=document,q0=()=>_h.createComment(""),G0=n=>n===null||typeof n!="object"&&typeof n!="function",Wx=Array.isArray,Xde=n=>Wx(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",U_=`[ 	
\f\r]`,gm=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,e5=/-->/g,t5=/>/g,au=RegExp(`>|${U_}(?:([^\\s"'>=/]+)(${U_}*=${U_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),n5=/'/g,r5=/"/g,XB=/^(?:script|style|textarea|title)$/i,JB=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Mpe=JB(1),$pe=JB(2),Sp=Symbol.for("lit-noChange"),nr=Symbol.for("lit-nothing"),s5=new WeakMap,Ou=_h.createTreeWalker(_h,129);function eL(n,e){if(!Wx(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return J8!==void 0?J8.createHTML(e):e}const Jde=(n,e)=>{const t=n.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=gm;for(let l=0;l<t;l++){const h=n[l];let d,p,g=-1,y=0;for(;y<h.length&&(o.lastIndex=y,p=o.exec(h),p!==null);)y=o.lastIndex,o===gm?p[1]==="!--"?o=e5:p[1]!==void 0?o=t5:p[2]!==void 0?(XB.test(p[2])&&(s=RegExp("</"+p[2],"g")),o=au):p[3]!==void 0&&(o=au):o===au?p[0]===">"?(o=s??gm,g=-1):p[1]===void 0?g=-2:(g=o.lastIndex-p[2].length,d=p[1],o=p[3]===void 0?au:p[3]==='"'?r5:n5):o===r5||o===n5?o=au:o===e5||o===t5?o=gm:(o=au,s=void 0);const b=o===au&&n[l+1].startsWith("/>")?" ":"";i+=o===gm?h+Zde:g>=0?(r.push(d),h.slice(0,g)+QB+h.slice(g)+Wc+b):h+Wc+(g===-2?l:b)}return[eL(n,i+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class V0{constructor({strings:e,_$litType$:t},r){let s;this.parts=[];let i=0,o=0;const l=e.length-1,h=this.parts,[d,p]=Jde(e,t);if(this.el=V0.createElement(d,r),Ou.currentNode=this.el.content,t===2||t===3){const g=this.el.content.firstChild;g.replaceWith(...g.childNodes)}for(;(s=Ou.nextNode())!==null&&h.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const g of s.getAttributeNames())if(g.endsWith(QB)){const y=p[o++],b=s.getAttribute(g).split(Wc),E=/([.?@])?(.*)/.exec(y);h.push({type:1,index:i,name:E[2],strings:b,ctor:E[1]==="."?tfe:E[1]==="?"?nfe:E[1]==="@"?rfe:Hv}),s.removeAttribute(g)}else g.startsWith(Wc)&&(h.push({type:6,index:i}),s.removeAttribute(g));if(XB.test(s.tagName)){const g=s.textContent.split(Wc),y=g.length-1;if(y>0){s.textContent=VE?VE.emptyScript:"";for(let b=0;b<y;b++)s.append(g[b],q0()),Ou.nextNode(),h.push({type:2,index:++i});s.append(g[y],q0())}}}else if(s.nodeType===8)if(s.data===ZB)h.push({type:2,index:i});else{let g=-1;for(;(g=s.data.indexOf(Wc,g+1))!==-1;)h.push({type:7,index:i}),g+=Wc.length-1}i++}}static createElement(e,t){const r=_h.createElement("template");return r.innerHTML=e,r}}function xp(n,e,t=n,r){var o,l;if(e===Sp)return e;let s=r!==void 0?(o=t._$Co)==null?void 0:o[r]:t._$Cl;const i=G0(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((l=s==null?void 0:s._$AO)==null||l.call(s,!1),i===void 0?s=void 0:(s=new i(n),s._$AT(n,t,r)),r!==void 0?(t._$Co??(t._$Co=[]))[r]=s:t._$Cl=s),s!==void 0&&(e=xp(n,s._$AS(n,e.values),s,r)),e}class efe{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??_h).importNode(t,!0);Ou.currentNode=s;let i=Ou.nextNode(),o=0,l=0,h=r[0];for(;h!==void 0;){if(o===h.index){let d;h.type===2?d=new Ry(i,i.nextSibling,this,e):h.type===1?d=new h.ctor(i,h.name,h.strings,this,e):h.type===6&&(d=new sfe(i,this,e)),this._$AV.push(d),h=r[++l]}o!==(h==null?void 0:h.index)&&(i=Ou.nextNode(),o++)}return Ou.currentNode=_h,s}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class Ry{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,r,s){this.type=2,this._$AH=nr,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=xp(this,e,t),G0(e)?e===nr||e==null||e===""?(this._$AH!==nr&&this._$AR(),this._$AH=nr):e!==this._$AH&&e!==Sp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Xde(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==nr&&G0(this._$AH)?this._$AA.nextSibling.data=e:this.T(_h.createTextNode(e)),this._$AH=e}$(e){var i;const{values:t,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=V0.createElement(eL(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(t);else{const o=new efe(s,this),l=o.u(this.options);o.p(t),this.T(l),this._$AH=o}}_$AC(e){let t=s5.get(e.strings);return t===void 0&&s5.set(e.strings,t=new V0(e)),t}k(e){Wx(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,s=0;for(const i of e)s===t.length?t.push(r=new Ry(this.O(q0()),this.O(q0()),this,this.options)):r=t[s],r._$AI(i),s++;s<t.length&&(this._$AR(r&&r._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,t);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class Hv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,s,i){this.type=1,this._$AH=nr,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=nr}_$AI(e,t=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=xp(this,e,t,0),o=!G0(e)||e!==this._$AH&&e!==Sp,o&&(this._$AH=e);else{const l=e;let h,d;for(e=i[0],h=0;h<i.length-1;h++)d=xp(this,l[r+h],t,h),d===Sp&&(d=this._$AH[h]),o||(o=!G0(d)||d!==this._$AH[h]),d===nr?e=nr:e!==nr&&(e+=(d??"")+i[h+1]),this._$AH[h]=d}o&&!s&&this.j(e)}j(e){e===nr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class tfe extends Hv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===nr?void 0:e}}class nfe extends Hv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==nr)}}class rfe extends Hv{constructor(e,t,r,s,i){super(e,t,r,s,i),this.type=5}_$AI(e,t=this){if((e=xp(this,e,t,0)??nr)===Sp)return;const r=this._$AH,s=e===nr&&r!==nr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==nr&&(r===nr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class sfe{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){xp(this,e)}}const k_=qm.litHtmlPolyfillSupport;k_==null||k_(V0,Ry),(qm.litHtmlVersions??(qm.litHtmlVersions=[])).push("3.3.1");const ife=(n,e,t)=>{const r=(t==null?void 0:t.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(t==null?void 0:t.renderBefore)??null;r._$litPart$=s=new Ry(e.insertBefore(q0(),i),i,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sh=globalThis;class Xb extends Jd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ife(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Sp}}var l5;Xb._$litElement$=!0,Xb.finalized=!0,(l5=sh.litElementHydrateSupport)==null||l5.call(sh,{LitElement:Xb});const B_=sh.litElementPolyfillSupport;B_==null||B_({LitElement:Xb});(sh.litElementVersions??(sh.litElementVersions=[])).push("4.2.1");let Gm,bl,El;function Fpe(n,e){Gm=document.createElement("style"),bl=document.createElement("style"),El=document.createElement("style"),Gm.textContent=wf(n).core.cssText,bl.textContent=wf(n).dark.cssText,El.textContent=wf(n).light.cssText,document.head.appendChild(Gm),document.head.appendChild(bl),document.head.appendChild(El),tL(e)}function tL(n){bl&&El&&(n==="light"?(bl.removeAttribute("media"),El.media="enabled"):(El.removeAttribute("media"),bl.media="enabled"))}function afe(n){Gm&&bl&&El&&(Gm.textContent=wf(n).core.cssText,bl.textContent=wf(n).dark.cssText,El.textContent=wf(n).light.cssText)}function wf(n){return{core:yf`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ui(n!=null&&n["--w3m-color-mix-strength"]?`${n["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ui((n==null?void 0:n["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ui((n==null?void 0:n["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ui((n==null?void 0:n["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ui((n==null?void 0:n["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:yf`
      :root {
        --w3m-color-mix: ${ui((n==null?void 0:n["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ui(Mo(n,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ui(Mo(n,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:yf`
      :root {
        --w3m-color-mix: ${ui((n==null?void 0:n["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ui(Mo(n,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ui(Mo(n,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const zpe=yf`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Hpe=yf`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,jpe=yf`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,bf={hexStringToNumber(n){const e=n.startsWith("0x")?n.slice(2):n;return parseInt(e,16)},numberToHexString(n){return`0x${n.toString(16)}`},async getUserInfo(n){const[e,t]=await Promise.all([bf.getAddresses(n),bf.getChainId(n)]);return{chainId:t,addresses:e}},async getChainId(n){const e=await n.request({method:"eth_chainId"});return Number(e)},async getAddress(n){const[e]=await n.request({method:"eth_accounts"});return e},async getAddresses(n){return await n.request({method:"eth_accounts"})},async addEthereumChain(n,e){var r,s;const t=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await n.request({method:"wallet_addEthereumChain",params:[{chainId:bf.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[ka.NetworkImageIds[e.id]]}]})}},qd={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},ofe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ha={getMethodsByChainNamespace(n){return ofe[n]||[]},createDefaultNamespace(n){return{methods:this.getMethodsByChainNamespace(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(n,e){if(!e)return{...n};const t={...n},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{t[s]&&(t[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{t[s]&&(t[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{t[s]&&(t[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[l,h]=i.split(":");!l||!h||!t[l]||(t[l].rpcMap||(t[l].rpcMap={}),s.has(l)||(t[l].rpcMap={},s.add(l)),t[l].rpcMap[h]=o)})}return t},createNamespaces(n,e){const t=n.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:l}=s,h=l.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const d=`${o}:${i}`,p=r[o];switch(p.chains.push(d),d){case IR.caipNetworkId:p.chains.push(IR.deprecatedCaipNetworkId);break;case OR.caipNetworkId:p.chains.push(OR.deprecatedCaipNetworkId);break}return p!=null&&p.rpcMap&&h&&(p.rpcMap[i]=h),r},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async n=>{var r;const e=await Dm.resolveName(n);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(n={}){return Object.values(n).flatMap(e=>{const t=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...t,...r]))})},isSessionEventData(n){return typeof n=="object"&&n!==null&&"id"in n&&"topic"in n&&"params"in n&&typeof n.params=="object"&&n.params!==null&&"chainId"in n.params&&"event"in n.params&&typeof n.params.event=="object"&&n.params.event!==null},isOriginAllowed(n,e,t){for(const r of[...e,...t])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(n))return!0}else try{if(new URL(r).origin===n)return!0}catch{if(r===n)return!0}return!1},listenWcProvider({universalProvider:n,namespace:e,onConnect:t,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){t&&n.on("connect",()=>{const l=Ha.getWalletConnectAccounts(n,e);t(l)}),r&&n.on("disconnect",()=>{r()}),s&&n.on("session_event",l=>{if(Ha.isSessionEventData(l)){const{name:h,data:d}=l.params.event;if(h==="accountsChanged"&&Array.isArray(d)){const p=d.filter(g=>Le.isCaipAddress(g)).map(g=>qr.parseCaipAddress(g)).filter(g=>g.chainNamespace===e);s(p)}}}),i&&n.on("chainChanged",l=>{i(l)}),o&&n.on("display_uri",l=>{o(l)})},getWalletConnectAccounts(n,e){var s,i,o,l;const t=new Set,r=(l=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:l.map(h=>qr.parseCaipAddress(h)).filter(({address:h})=>t.has(h.toLowerCase())?!1:(t.add(h.toLowerCase()),!0));return r&&r.length>0?r:[]}};class cfe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ce.CHAIN.EVM:await this.syncEVMConnections(e);break;case ce.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ce.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:h,hasConnected:d}=s(l.id);return!h&&d}).map(async l=>{if(l.id===ce.CONNECTOR_ID.WALLET_CONNECT){const h=Ha.getWalletConnectAccounts(r,this.namespace),d=t.find(p=>{var g,y;return p.chainNamespace===this.namespace&&p.id.toString()===((y=(g=h[0])==null?void 0:g.chainId)==null?void 0:y.toString())});h.length>0&&i({connectorId:l.id,accounts:h.map(p=>({address:p.address})),caipNetwork:d})}else{const{accounts:h,chainId:d}=await Qb.fetchProviderData(l);if(h.length>0&&d){const p=t.find(g=>g.chainNamespace===this.namespace&&g.id.toString()===d.toString());i({connectorId:l.id,accounts:h.map(g=>({address:g})),caipNetwork:p}),l.provider&&l.id!==ce.CONNECTOR_ID.AUTH&&l.id!==ce.CONNECTOR_ID.WALLET_CONNECT&&o(l.id,l.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:h,hasConnected:d}=s(l.id);return!h&&d}).map(async l=>{if(l.id===ce.CONNECTOR_ID.WALLET_CONNECT){const h=Ha.getWalletConnectAccounts(r,this.namespace);h.length>0&&i({connectorId:l.id,accounts:h.map(d=>({address:d.address})),caipNetwork:t})}else{const h=await l.connect({chainId:t==null?void 0:t.id});h&&(i({connectorId:l.id,accounts:[{address:h}],caipNetwork:t}),o(l.id,l.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:h,hasConnected:d}=s(l.id);return!h&&d}).map(async l=>{var y,b,E,v,A,S;if(l.id===ce.CONNECTOR_ID.WALLET_CONNECT){const T=Ha.getWalletConnectAccounts(r,this.namespace);T.length>0&&i({connectorId:l.id,accounts:T.map(N=>({address:N.address})),caipNetwork:t});return}const h=await l.connect(),d=await l.getAccountAddresses();let p=d==null?void 0:d.map(T=>Le.createAccount(ce.CHAIN.BITCOIN,T.address,T.purpose||"payment",T.publicKey,T.path));if(p&&p.length>1&&(p=[{namespace:ce.CHAIN.BITCOIN,publicKey:((y=p[qd.ACCOUNT_INDEXES.PAYMENT])==null?void 0:y.publicKey)??"",path:((b=p[qd.ACCOUNT_INDEXES.PAYMENT])==null?void 0:b.path)??"",address:((E=p[qd.ACCOUNT_INDEXES.PAYMENT])==null?void 0:E.address)??"",type:"payment"},{namespace:ce.CHAIN.BITCOIN,publicKey:((v=p[qd.ACCOUNT_INDEXES.ORDINAL])==null?void 0:v.publicKey)??"",path:((A=p[qd.ACCOUNT_INDEXES.ORDINAL])==null?void 0:A.path)??"",address:((S=p[qd.ACCOUNT_INDEXES.ORDINAL])==null?void 0:S.address)??"",type:"ordinal"}]),!(l.chains.find(T=>T.id===(t==null?void 0:t.id))||l.chains[0]))throw new Error("The connector does not support any of the requested chains");h&&(o(l.id,l.provider),i({connectorId:l.id,accounts:p.map(T=>({address:T.address,type:T.type})),caipNetwork:t}))}))}getConnection({address:e,connectorId:t,connections:r,connectors:s}){if(t){const o=r.find(d=>rr.isLowerCaseMatch(d.connectorId,t));if(!o)return null;const l=s.find(d=>rr.isLowerCaseMatch(d.id,o.connectorId)),h=e?o.accounts.find(d=>rr.isLowerCaseMatch(d.address,e)):o.accounts[0];return{...o,account:h,connector:l}}const i=r.find(o=>o.accounts.length>0&&s.some(l=>rr.isLowerCaseMatch(l.id,o.connectorId)));if(i){const[o]=i.accounts,l=s.find(h=>rr.isLowerCaseMatch(h.id,i.connectorId));return{...i,account:o,connector:l}}return null}}const $o={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class Yx{constructor({provider:e,namespace:t}){this.id=ce.CONNECTOR_ID.WALLET_CONNECT,this.name=ka.ConnectorNamesMap[ce.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ka.ConnectorImageIds[ce.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=M.getCaipNetworks.bind(M),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const t=this.getCaipNetworks(),r=we.state.universalProviderConfigOverride,s=Ha.createNamespaces(t,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(t=>t.caipNetworkId);return js.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:lfe})}}const lfe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],ufe=[ce.CONNECTOR_ID.AUTH,ce.CONNECTOR_ID.WALLET_CONNECT];class nL{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=t=>M.getCaipNetworks(t),this.getConnectorId=t=>_e.getConnectorId(t),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new cfe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:t}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(t==null?void 0:t.toString()));e&&r&&this.addConnection({connectorId:ce.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ce.CONNECTOR_ID.AUTH,type:"AUTH",name:ce.CONNECTOR_NAMES.AUTH,provider:e,imageId:ka.ConnectorImageIds[ce.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>t.has(r.id)?!1:(t.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const t=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>t.has(r.connectorId.toLowerCase())?!1:(t.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(t=>!rr.isLowerCaseMatch(t.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,t){Fe.setStatus(e,t)}on(e,t){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Vs(t.chainNamespace);await i.switchNetwork({chainId:t.caipNetworkId});const l=await i.getUser({chainId:t.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",l)}}getWalletConnectConnector(){const e=this.connectors.find(t=>t instanceof Yx);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,t){if(e.length>0){const{address:r,chainId:s}=Le.getAccount(e[0]),i=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(l=>l.id===t);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:t,accounts:e.map(l=>{const{address:h}=Le.getAccount(l);return{address:h}}),caipNetwork:i}))}}onAccountsChanged(e,t,r=!0){var s,i;if(e.length>0){const{address:o}=Le.getAccount(e[0]),l=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});o&&rr.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),t)&&this.emit("accountChanged",{address:o,chainId:(i=l==null?void 0:l.caipNetwork)==null?void 0:i.id,connector:l==null?void 0:l.connector}),this.addConnection({connectorId:t,accounts:e.map(h=>{const{address:d}=Le.getAccount(h);return{address:d}}),caipNetwork:l==null?void 0:l.caipNetwork})}else r&&this.onDisconnect(t)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),rr.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,t){var o;const r=typeof e=="string"&&e.startsWith("0x")?bf.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===r);s&&this.addConnection({connectorId:t,accounts:s.accounts,caipNetwork:i}),rr.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),t)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,t){if(ufe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",i),t.on("accountsChanged",r),t.on("chainChanged",s),this.providerHandlers[e]={provider:t,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:t,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];t.removeListener("disconnect",r),t.removeListener("accountsChanged",s),t.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var t,r;const e=(t=this.connectionManager)==null?void 0:t.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class hfe extends nL{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new Yx({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,l;const t=this.provider,r=((l=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:l.map(h=>{const[,,d]=h.split(":");return d}).filter((h,d,p)=>p.indexOf(h)===d))||[];return Promise.resolve({accounts:r.map(h=>Le.createAccount(e,h,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,l,h,d;if(!(e.caipNetwork&&Ft.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""};if(Fe.state.balanceLoading&&e.chainId===((h=M.state.activeCaipNetwork)==null?void 0:h.id))return{balance:Fe.state.balance||"0.00",symbol:Fe.state.balanceSymbol||""};const s=(await Fe.fetchTokenBalance()).find(p=>{var g,y;return p.chainId===`${(g=e.caipNetwork)==null?void 0:g.chainNamespace}:${e.chainId}`&&p.symbol===((y=e.caipNetwork)==null?void 0:y.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)||""}}async signMessage(e){var o,l,h;const{provider:t,message:r,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=M.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ce.CHAIN.SOLANA?i=(await t.request({method:"solana_signMessage",params:{message:Mp.encode(new TextEncoder().encode(r)),pubkey:s}},(l=M.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)).signature:i=await t.request({method:"personal_sign",params:[r,s]},(h=M.state.activeCaipNetwork)==null?void 0:h.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,l,h,d;const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===ce.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:gl(t.id)}]}))}catch(p){if(p.code===$o.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||p.code===$o.ERROR_INVALID_CHAIN_ID||p.code===$o.ERROR_CODE_DEFAULT||((o=(i=p==null?void 0:p.data)==null?void 0:i.originalError)==null?void 0:o.code)===$o.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((d=r.provider)==null?void 0:d.request({method:"wallet_addEthereumChain",params:[{chainId:gl(t.id),rpcUrls:[(l=t==null?void 0:t.rpcUrls.chainDefault)==null?void 0:l.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[(h=t.blockExplorers)==null?void 0:h.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const dfe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],Ob={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return!!n.isEnabled&&e.includes("email")},processFallback:n=>n===void 0?Ft.DEFAULT_REMOTE_FEATURES.email:!!n},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:n=>n===void 0?Ft.DEFAULT_REMOTE_FEATURES.socials:typeof n=="boolean"?n?Ft.DEFAULT_REMOTE_FEATURES.socials:!1:n},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?Ft.DEFAULT_REMOTE_FEATURES.swaps:typeof n=="boolean"?n?Ft.DEFAULT_REMOTE_FEATURES.swaps:!1:n},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?Ft.DEFAULT_REMOTE_FEATURES.onramp:typeof n=="boolean"?n?Ft.DEFAULT_REMOTE_FEATURES.onramp:!1:n},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?Ft.DEFAULT_REMOTE_FEATURES.activity:!!n},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?Ft.DEFAULT_REMOTE_FEATURES.reownBranding:!!n},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:()=>Ft.DEFAULT_REMOTE_FEATURES.multiWallet}},ffe={localSettingsOverridden:new Set,getApiConfig(n,e){return e==null?void 0:e.find(t=>t.id===n)},addWarning(n,e){if(n!==void 0){const t=Ob[e],r=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(n,e,t,r,s){const i=Ob[n],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const l=this.getApiConfig(i.apiFeatureName,t);return(l==null?void 0:l.config)===null?this.processFallbackFeature(n,o):l!=null&&l.config?(o!==void 0&&this.addWarning(o,n),this.processApiFeature(n,l)):!1}return this.processFallbackFeature(n,o)},processApiFeature(n,e){return Ob[n].processApi(e)},processFallbackFeature(n,e){return Ob[n].processFallback(e)},async fetchRemoteFeatures(n){const e=n.basic??!1,t=n.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Ve.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Ft.DEFAULT_REMOTE_FEATURES:Ft.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of dfe){const l=this.processFeature(o,t,r,s,e);Object.assign(i,{[o]:l})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Ft.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;zn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class pfe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,r)=>{var s,i,o;if(t){const l=(s=M.getCaipNetworks(t))==null?void 0:s.find(p=>p.id===r);if(l)return l;const h=(i=M.getNetworkData(t))==null?void 0:i.caipNetwork;return h||((o=M.getRequestedCaipNetworks(t).filter(p=>p.chainNamespace===t))==null?void 0:o[0])}return M.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>M.getCaipNetworks(t),this.getActiveChainNamespace=()=>M.state.activeChain,this.setRequestedCaipNetworks=(t,r)=>{M.setRequestedCaipNetworks(t,r)},this.getApprovedCaipNetworkIds=()=>M.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>M.state.activeChain===t||!t?M.state.activeCaipAddress:M.getAccountProp("caipAddress",t),this.setClientId=t=>{We.setClientId(t)},this.getProvider=t=>Dt.getProvider(t),this.getProviderType=t=>Dt.getProviderId(t),this.getPreferredAccountType=t=>Vs(t),this.setCaipAddress=(t,r)=>{Fe.setCaipAddress(t,r)},this.setBalance=(t,r,s)=>{Fe.setBalance(t,r,s)},this.setProfileName=(t,r)=>{Fe.setProfileName(t,r)},this.setProfileImage=(t,r)=>{Fe.setProfileImage(t,r)},this.setUser=(t,r)=>{Fe.setUser(t,r)},this.resetAccount=t=>{Fe.resetAccount(t)},this.setCaipNetwork=t=>{M.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,r)=>{M.setChainNetworkData(r,{caipNetwork:t})},this.setStatus=(t,r)=>{Fe.setStatus(t,r),_e.isConnected()?ve.setConnectionStatus("connected"):ve.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>M.getAccountProp("address",t),this.setConnectors=t=>{const r=[..._e.state.allConnectors,...t];_e.setConnectors(r)},this.setConnections=(t,r)=>{ve.setConnections(t,r),Te.setConnections(t,r)},this.fetchIdentity=t=>We.fetchIdentity(t),this.getReownName=t=>Dm.getNamesForAddress(t),this.getConnectors=()=>_e.getConnectors(),this.getConnectorImage=t=>XU.getConnectorImage(t),this.getConnections=t=>this.remoteFeatures.multiWallet?vE.getConnectionsData(t).connections:(zn.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=t=>this.remoteFeatures.multiWallet?vE.getConnectionsData(t).recentConnections:(zn.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async t=>{if(!this.remoteFeatures.multiWallet){zn.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await Te.switchConnection(t)},this.deleteConnection=t=>{if(!this.remoteFeatures.multiWallet){zn.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}ve.deleteAddressFromConnection(t),Te.syncStorageConnections()},this.setConnectedWalletInfo=(t,r)=>{const s=Dt.getProviderId(r),i=t?{...t,type:s}:void 0;Fe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!M.state.activeCaipAddress,this.addAddressLabel=(t,r,s)=>{Fe.addAddressLabel(t,r,s)},this.removeAddressLabel=(t,r)=>{Fe.removeAddressLabel(t,r)},this.getAddress=t=>M.state.activeChain===t||!t?Fe.state.address:M.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>M.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{M.resetNetwork(t)},this.addConnector=t=>{_e.addConnector(t)},this.resetWcConnection=()=>{Te.resetWcConnection()},this.setAddressExplorerUrl=(t,r)=>{Fe.setAddressExplorerUrl(t,r)},this.setSmartAccountDeployed=(t,r)=>{Fe.setSmartAccountDeployed(t,r)},this.setPreferredAccountType=(t,r)=>{M.setAccountProp("preferredAccountType",t,r)},this.setEIP6963Enabled=t=>{we.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=t==null?void 0:t.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var t,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),we.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await ffe.fetchRemoteFeatures(e),we.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&U2.setOnrampProviders(this.remoteFeatures.onramp),((t=we.state.remoteFeatures)!=null&&t.email||Array.isArray((r=we.state.remoteFeatures)==null?void 0:r.socials)&&((s=we.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Ve.fetchAllowedOrigins();if(!e||!Le.isClient()){zn.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const t=window.location.origin;Ha.isOriginAllowed(t,e,$o.DEFAULT_ALLOWED_ANCESTORS)||zn.open(Hr.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){zn.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":zn.open(Hr.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const t=e.cause instanceof Error?e.cause:e;zn.open({shortMessage:Hr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Hr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(t.message)},"error");break}default:zn.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...t}=e;delete t.adapters,delete t.universalProvider,Kt.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&gs.setThemeMode(e.themeMode),e.themeVariables&&gs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");M.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&M.setActiveCaipNetwork(t)}initializeConnectionController(e){Te.initialize(e.adapters??[]),Te.setWcBasic(e.basic??!1)}initializeConnectorController(){_e.initialize(this.chainNamespaces)}initializeProjectSettings(e){we.setProjectId(e.projectId),we.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;we.setDebug(e.debug!==!1),we.setEnableWalletConnect(e.enableWalletConnect!==!1),we.setEnableWalletGuide(e.enableWalletGuide!==!1),we.setEnableWallets(e.enableWallets!==!1),we.setEIP6963Enabled(e.enableEIP6963!==!1),we.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),we.setEnableReconnect(e.enableReconnect!==!1),we.setEnableAuthLogger(e.enableAuthLogger!==!1),we.setCustomRpcUrls(e.customRpcUrls),we.setEnableEmbedded(e.enableEmbedded),we.setAllWallets(e.allWallets),we.setIncludeWalletIds(e.includeWalletIds),we.setExcludeWalletIds(e.excludeWalletIds),we.setFeaturedWalletIds(e.featuredWalletIds),we.setTokens(e.tokens),we.setTermsConditionsUrl(e.termsConditionsUrl),we.setPrivacyPolicyUrl(e.privacyPolicyUrl),we.setCustomWallets(e.customWallets),we.setFeatures(e.features),we.setAllowUnsupportedChain(e.allowUnsupportedChain),we.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),we.setPreferUniversalLinks(e.experimental_preferUniversalLinks),we.setDefaultAccountTypes(e.defaultAccountTypes);const t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),we.setMetadata(e.metadata),we.setDisableAppend(e.disableAppend),we.setEnableEmbedded(e.enableEmbedded),we.setSIWX(e.siwx),!e.projectId){zn.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===ce.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");we.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,t,r,s;return Le.isClient()?{name:((t=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:t.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=Zd.getUnsupportedNetwork(`${t}:${e}`);M.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Zd.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return Zd.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Zd.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return t?Zd.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,t){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:i}=M.getAccountData(e)||{};return(i||!we.state.enableReconnect)&&(s!=null&&s.disconnect)&&(r=await s.disconnect({id:t})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var d;const e=M.state.activeChain,t=this.getAdapter(e),r=(d=this.getCaipNetwork(e))==null?void 0:d.id,s=Te.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!t)throw new Error("Adapter not found");const l=await t.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((l==null?void 0:l.clientId)||null),ve.setConnectedNamespaces([...M.state.chains.keys()]),await this.syncWalletConnectAccount(),await js.initializeIfEnabled()},connectExternal:async({id:e,address:t,info:r,type:s,provider:i,chain:o,caipNetwork:l,socialUri:h})=>{var E,v,A,S,T,N;const d=M.state.activeChain,p=o||d,g=this.getAdapter(p);if(o&&o!==d&&!l){const k=this.getCaipNetworks().find(R=>R.chainNamespace===o);k&&this.setCaipNetwork(k)}if(!p)throw new Error("connectExternal: namespace not found");if(!g)throw new Error("connectExternal: adapter not found");const y=this.getCaipNetwork(p),b=await g.connect({id:e,address:t,info:r,type:s,provider:i,socialUri:h,chainId:(l==null?void 0:l.id)||(y==null?void 0:y.id),rpcUrl:((A=(v=(E=l==null?void 0:l.rpcUrls)==null?void 0:E.default)==null?void 0:v.http)==null?void 0:A[0])||((N=(T=(S=y==null?void 0:y.rpcUrls)==null?void 0:S.default)==null?void 0:T.http)==null?void 0:N[0])});if(b)return ve.addConnectedNamespace(p),this.syncProvider({...b,chainNamespace:p}),this.setStatus("connected",p),this.syncConnectedWalletInfo(p),ve.removeDisconnectedConnectorId(e,p),{address:b.address}},reconnectExternal:async({id:e,info:t,type:r,provider:s})=>{var l;const i=M.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:t,type:r,provider:s,chainId:(l=this.getCaipNetwork())==null?void 0:l.id})),ve.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var d;const{id:t,chainNamespace:r,initialDisconnect:s}=e||{},i=r||M.state.activeChain,o=_e.getConnectorId(i),l=t===ce.CONNECTOR_ID.AUTH||o===ce.CONNECTOR_ID.AUTH,h=t===ce.CONNECTOR_ID.WALLET_CONNECT||o===ce.CONNECTOR_ID.WALLET_CONNECT;try{const p=Array.from(M.state.chains.keys());let g=r?[r]:p;(h||l)&&(g=p);const y=g.map(async v=>{const A=_e.getConnectorId(v),S=await this.disconnectNamespace(v,t||A);S&&(l&&ve.deleteConnectedSocialProvider(),S.connections.forEach(T=>{ve.addDisconnectedConnectorId(T.connectorId,v)})),s&&this.onDisconnectNamespace({chainNamespace:v,closeModal:!1})}),b=await Promise.allSettled(y);$t.resetSend(),Te.resetWcConnection(),(d=js.getSIWX())!=null&&d.signOutOnDisconnect&&await js.clearSessions(),_e.setFilterByNamespace(void 0),Te.syncStorageConnections();const E=b.filter(v=>v.status==="rejected");if(E.length>0)throw new Error(E.map(v=>v.reason.message).join(", "));Kt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(p){throw new Error(`Failed to disconnect chains: ${p.message}`)}},checkInstalled:e=>e?e.some(t=>{var r;return!!((r=window.ethereum)!=null&&r[String(t)])}):!!window.ethereum,signMessage:async e=>{const t=M.state.activeChain,r=this.getAdapter(M.state.activeChain);if(!t)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:Fe.state.address,provider:Dt.getProvider(t)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const t=e.chainNamespace;if(!t)throw new Error("sendTransaction: namespace not found");if(Ft.SEND_SUPPORTED_NAMESPACES.includes(t)){const r=this.getAdapter(t);if(!r)throw new Error("sendTransaction: adapter not found");const s=Dt.getProvider(t),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const t=e.chainNamespace;if(t===ce.CHAIN.EVM){const r=this.getAdapter(t);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Dt.getProvider(t),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var t;const e=M.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Fe.state.address,chainId:Number((t=this.getCaipNetwork())==null?void 0:t.id),chainNamespace:e}),Fe.state.profileImage||!1},getEnsAddress:async e=>await Ha.resolveReownName(e),writeContract:async e=>{const t=M.state.activeChain,r=this.getAdapter(t);if(!t)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Dt.getProvider(t);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const l=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return l==null?void 0:l.hash},parseUnits:(e,t)=>{const r=this.getAdapter(M.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:t}))??0n},formatUnits:(e,t)=>{const r=this.getAdapter(M.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:t}))??"0"},getCapabilities:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("getCapabilities: adapter is required but got undefined");return await(t==null?void 0:t.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("grantPermissions: adapter is required but got undefined");return await(t==null?void 0:t.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("revokePermissions: adapter is required but got undefined");return t!=null&&t.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter(M.state.activeChain);if(!t)throw new Error("walletGetAssets: adapter is required but got undefined");return await(t==null?void 0:t.walletGetAssets(e))??{}},updateBalance:e=>{const t=this.getCaipNetwork(e);!t||!Fe.state.address||this.updateNativeBalance(Fe.state.address,t==null?void 0:t.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Te.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var t,r,s,i,o;if(Dt.getProviderId(M.state.activeChain)===Pt.CONNECTOR_TYPE_WALLET_CONNECT){const l=(r=(t=this.universalProvider)==null?void 0:t.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(l)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Dt.getProvider(t),i=Dt.getProviderId(t);if(e.chainNamespace===M.state.activeChain){const o=this.getAdapter(t);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Pt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(t);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{const r=t.chains||[],s=t.accounts.map(i=>{const{chainId:o,chainNamespace:l}=qr.parseCaipAddress(i);return`${l}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),t[r]=s):t[r]=new hfe({namespace:r,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){var t;this.onConnectors(e),this.listenAdapter(e),await((t=this.chainAdapters)==null?void 0:t[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const t=this.getAdapter(e);t==null||t.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=ve.getConnectionStatus();we.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ve.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),l=M.state.activeChain===e,h=M.getAccountProp("address",e);if(o){const d=l&&s?s:h;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),t.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),t.on("connections",s=>{this.setConnections(s,e)}),t.on("pendingTransactions",()=>{const s=Fe.state.address,i=M.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),t.on("accountChanged",({address:s,chainId:i,connector:o})=>{var h,d;const l=M.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),l&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):l&&((h=M.state.activeCaipNetwork)!=null&&h.id)?this.syncAccount({address:s,chainId:(d=M.state.activeCaipNetwork)==null?void 0:d.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),ve.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var t,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>Te.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===ce.CHAIN.EVM&&Le.isSafeApp()&&_e.setConnectorId(ce.CONNECTOR_ID.SAFE,e);const t=_e.getConnectorId(e);switch(this.setStatus("connecting",e),t){case ce.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ce.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:t,closeModal:r}=e||{};M.resetAccount(t),M.resetNetwork(t),ve.removeConnectedNamespace(t);const s=Array.from(M.state.chains.keys());(t?[t]:s).forEach(o=>ve.addDisconnectedConnectorId(_e.getConnectorId(o)||"",o)),_e.removeConnectorId(t),Dt.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t),r!==!1&&Ut.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const t=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!t,caipNetwork:r,getConnectorStorageInfo(i){const l=ve.getConnections()[e]??[];return{hasDisconnected:ve.isConnectorDisconnected(i,e),hasConnected:l.some(h=>rr.isLowerCaseMatch(h.connectorId,i))}}})}))}async syncAdapterConnection(e){var l,h,d;const t=this.getAdapter(e),r=_e.getConnectorId(e),s=this.getCaipNetwork(e),o=_e.getConnectors(e).find(p=>p.id===r);try{if(!t||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const p=await(t==null?void 0:t.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(d=(h=(l=s==null?void 0:s.rpcUrls)==null?void 0:l.default)==null?void 0:h.http)==null?void 0:d[0]}));p?(this.syncProvider({...p,chainNamespace:e}),await this.syncAccount({...p,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),t=this.chainNamespaces.map(async i=>{var p,g,y,b,E;const o=this.getAdapter(i);if(!o)return;const l=((b=(y=(g=(p=this.universalProvider)==null?void 0:p.session)==null?void 0:g.namespaces)==null?void 0:y[i])==null?void 0:b.accounts)||[],h=(E=M.state.activeCaipNetwork)==null?void 0:E.id,d=l.find(v=>{const{chainId:A}=qr.parseCaipAddress(v);return A===(h==null?void 0:h.toString())})||l[0];if(d){const v=qr.validateCaipAddress(d),{chainId:A,address:S}=qr.parseCaipAddress(v);if(Dt.setProviderId(i,Pt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&M.state.activeCaipNetwork&&o.namespace!==ce.CHAIN.EVM){const T=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:M.state.activeCaipNetwork});Dt.setProvider(i,T)}else Dt.setProvider(i,this.universalProvider);_e.setConnectorId(ce.CONNECTOR_ID.WALLET_CONNECT,i),ve.addConnectedNamespace(i),await this.syncAccount({address:S,chainId:A,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await M.setApprovedCaipNetworksData(i)});await Promise.all(t)}syncProvider({type:e,provider:t,id:r,chainNamespace:s}){Dt.setProviderId(s,e),Dt.setProvider(s,t),_e.setConnectorId(r,s)}async syncAccount(e){var g,y;const t=e.chainNamespace===M.state.activeChain,r=M.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:l}=ve.getActiveNetworkProps(),h=i||l,d=((g=M.state.activeCaipNetwork)==null?void 0:g.name)===ce.UNSUPPORTED_NETWORK_NAME,p=M.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(d&&!p)&&h){let b=this.getCaipNetworks().find(A=>A.id.toString()===h.toString()),E=this.getCaipNetworks().find(A=>A.chainNamespace===o);if(!p&&!b&&!E){const A=this.getApprovedCaipNetworkIds()||[],S=A.find(N=>{var k;return((k=qr.parseCaipNetworkId(N))==null?void 0:k.chainId)===h.toString()}),T=A.find(N=>{var k;return((k=qr.parseCaipNetworkId(N))==null?void 0:k.chainNamespace)===o});b=this.getCaipNetworks().find(N=>N.caipNetworkId===S),E=this.getCaipNetworks().find(N=>N.caipNetworkId===T||"deprecatedCaipNetworkId"in N&&N.deprecatedCaipNetworkId===T)}const v=b||E;(v==null?void 0:v.chainNamespace)===M.state.activeChain?we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&((y=M.state.activeCaipNetwork)==null?void 0:y.name)===ce.UNSUPPORTED_NETWORK_NAME?M.showUnsupportedChainUI():this.setCaipNetwork(v):t||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),rr.isLowerCaseMatch(s,Fe.state.address)||this.syncAccountInfo(s,v==null?void 0:v.id,o),t?await this.syncBalance({address:s,chainId:v==null?void 0:v.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,t,r){const s=this.getCaipAddress(r),i=t||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){var s;const t=_e.getConnectorId(e),r=Dt.getProviderId(e);if(r===Pt.CONNECTOR_TYPE_ANNOUNCED||r===Pt.CONNECTOR_TYPE_INJECTED){if(t){const i=this.getConnectors().find(o=>{var p,g;const l=o.id===t,h=((p=o.info)==null?void 0:p.rdns)===t,d=(g=o.connectors)==null?void 0:g.some(y=>{var b;return y.id===t||((b=y.info)==null?void 0:b.rdns)===t});return l||h||!!d});if(i){const{info:o,name:l,imageUrl:h}=i,d=h||this.getConnectorImage(i);this.setConnectedWalletInfo({name:l,icon:d,...o},e)}}}else if(r===Pt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Dt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(t&&t===ce.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ce.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!WU.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,r){const s=this.getAdapter(r),i=M.getCaipNetworkByNamespace(r,t);if(s){const o=await s.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,l,h,d,p,g,y;const e=bue.createLogger((b,...E)=>{b&&this.handleAlertError(b),console.error(...E)}),t={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(l=this.options)==null?void 0:l.metadata.description:"",url:(h=this.options)!=null&&h.metadata?(d=this.options)==null?void 0:d.metadata.url:"",icons:(p=this.options)!=null&&p.metadata?(g=this.options)==null?void 0:g.metadata.icons:[""]},logger:e};we.setManualWCControl(!!((y=this.options)!=null&&y.manualWCControl)),this.universalProvider=this.options.universalProvider??await uue.init(t),we.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Ha.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:t=>{Te.setUri(t)},onConnect:()=>{Te.finalizeWcConnection()},onDisconnect:()=>{M.state.noAdapters&&this.resetAccount(e),Te.resetWcConnection()},onChainChanged:t=>{const r=M.state.activeChain,s=r&&_e.state.activeConnectorIds[r]===ce.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(M.state.noAdapters||s)){const i=this.getCaipNetworks().find(l=>l.id.toString()===t.toString()||l.caipNetworkId.toString()===t.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(t);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:t=>{const r=M.state.activeChain,s=r&&_e.state.activeConnectorIds[r]===ce.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(M.state.noAdapters||s)&&t.length>0){const i=t[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Le.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Kt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(Hr.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[r,s]=t??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const l=Hr.ALERT_ERRORS[o];l&&(zn.open(l,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var t;if(e)return(t=this.chainAdapters)==null?void 0:t[e]}createAdapter(e){var s;if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Te.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Ut.open({...e,data:{swap:e.arguments}})}return Ut.open(e)}async close(){await this.injectModalUi(),Ut.close()}setLoading(e,t){Ut.setLoading(e,t)}async disconnect(e){await Te.disconnect({namespace:e})}getSIWX(){return we.state.siwx}getError(){return""}getChainId(){var e;return(e=M.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const t=this.getCaipNetworks().find(r=>r.id===e.id);if(!t){zn.open(Hr.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await M.switchActiveNetwork(t)}getWalletProvider(){return M.state.activeChain?Dt.state.providers[M.state.activeChain]:null}getWalletProviderType(){return Dt.getProviderId(M.state.activeChain)}subscribeProviders(e){return Dt.subscribeProviders(e)}getThemeMode(){return gs.state.themeMode}getThemeVariables(){return gs.state.themeVariables}setThemeMode(e){gs.setThemeMode(e),tL(gs.state.themeMode)}setTermsConditionsUrl(e){we.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){we.setPrivacyPolicyUrl(e)}setThemeVariables(e){gs.setThemeVariables(e),afe(gs.state.themeVariables)}subscribeTheme(e){return gs.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?Te.subscribe(e):(zn.open(ce.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?M.getAccountProp("connectedWalletInfo",e):Fe.state.connectedWalletInfo}getAccount(e){const t=e||M.state.activeChain,r=_e.getAuthConnector(t),s=M.getAccountData(t),i=ve.getConnectedConnectorId(M.state.activeChain),o=Te.getConnections(t);if(!t)throw new Error("AppKit:getAccount - namespace is required");const l=o.flatMap(h=>h.accounts.map(({address:d,type:p})=>Le.createAccount(t,d,p||"eoa")));if(s)return{allAccounts:l,caipAddress:s.caipAddress,address:Le.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===ce.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:ve.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Vs(t),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,t){const r=()=>{const s=this.getAccount(t);s&&e(s)};t?M.subscribeChainProp("accountState",r,t):M.subscribe(r),_e.subscribe(r)}subscribeNetwork(e){return M.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId})})}subscribeWalletInfo(e,t){return t?Fe.subscribeKey("connectedWalletInfo",e,t):Fe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Fe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){M.subscribeKey("activeCaipNetwork",e)}getState(){return Fa.state}getRemoteFeatures(){return we.state.remoteFeatures}subscribeState(e){return Fa.subscribe(e)}subscribeRemoteFeatures(e){return we.subscribeKey("remoteFeatures",e)}showErrorMessage(e){La.showError(e)}showSuccessMessage(e){La.showSuccess(e)}getEvent(){return{...Kt.state}}subscribeEvents(e){return Kt.subscribe(e)}replace(e){tt.replace(e)}redirect(e){tt.push(e)}popTransactionStack(e){tt.popTransactionStack(e)}isOpen(){return Ut.state.open}isTransactionStackEmpty(){return tt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){we.setFeatures(e)}updateRemoteFeatures(e){we.setRemoteFeatures(e)}updateOptions(e){const r={...we.state||{},...e};we.setOptions(r)}setConnectMethodsOrder(e){we.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){we.setWalletFeaturesOrder(e)}setCollapseWallets(e){we.setCollapseWallets(e)}setSocialsOrder(e){we.setSocialsOrder(e)}getConnectMethodsOrder(){return OS.getConnectOrderMethod(we.state.features,_e.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||M.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&M.removeNetwork(e,t)}}let i5=!1;class gfe extends pfe{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await js.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const t=M.state.activeChain;if(!t)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=t===ce.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=we.state.defaultAccountTypes[t],i=Vs(t),o=e.preferredAccountType||i||s;rr.isLowerCaseMatch(e.address,Fe.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:t}),this.setCaipAddress(r,t);const{signature:l,siwxMessage:h,message:d,...p}=e;this.setUser({...Fe.state.user||{},...p},t),this.setSmartAccountDeployed(!!e.smartAccountDeployed,t),this.setPreferredAccountType(o,t),this.setLoading(!1,t)}setupAuthConnectorListeners(e){e.onRpcRequest(t=>{qs.checkIfRequestExists(t)?qs.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(Gn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(Gn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,r)=>{const s=qs.checkIfRequestIsSafe(r),i=Fe.state.address,o=M.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const t=M.state.activeChain;if(!t)throw new Error("AppKit:onNotConnected - namespace is required");_e.getConnectorId(t)===ce.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:t,type:r})=>{const s=M.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");t&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const t=gs.getSnapshot(),r=we.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:t.themeMode,themeVariables:t.themeVariables,w3mThemeVariables:Mo(t.themeVariables,t.themeMode)})])}async syncAuthConnector(e,t){var d,p,g,y;const r=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t),s=t===M.state.activeChain;if(!r)return;this.setLoading(!0,t);const i=e.getLoginEmailUsed();this.setLoading(i,t),i&&this.setStatus("connecting",t);const o=e.getEmail(),l=e.getUsername();this.setUser({...((d=Fe.state)==null?void 0:d.user)||{},username:l,email:o},t),this.setupAuthConnectorListeners(e);const{isConnected:h}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),t&&r&&s){const b=await e.getSmartAccountEnabledNetworks();M.setSmartAccountEnabledNetworks((b==null?void 0:b.smartAccountEnabledNetworks)||[],t),h&&((p=this.connectionControllerClient)!=null&&p.connectExternal)?(await((y=this.connectionControllerClient)==null?void 0:y.connectExternal({id:ce.CONNECTOR_ID.AUTH,info:{name:ce.CONNECTOR_ID.AUTH},type:Pt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(g=M.state.activeCaipNetwork)==null?void 0:g.id,chain:t})),this.setStatus("connected",t)):_e.getConnectorId(t)===ce.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),ve.removeConnectedNamespace(t))}this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){var t,r;try{if(!Le.isTelegram())return;const s=ve.getTelegramSocialProvider();if(!s||!Le.isClient())return;const o=new URL(window.location.href).searchParams.get("result_uri");if(!o)return;Fe.setSocialProvider(s,e),await((t=this.authProvider)==null?void 0:t.init());const l=_e.getAuthConnector();s&&l&&(this.setLoading(!0,e),await Te.connectExternal({id:l.id,type:l.type,socialUri:o},l.chain),ve.setConnectedSocialProvider(s),ve.removeTelegramSocialProvider(),Kt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s,caipNetworkId:(r=M.getActiveCaipNetwork())==null?void 0:r.caipNetworkId}}))}catch(s){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",s)}try{const s=new URL(window.location.href);s.searchParams.delete("result_uri"),window.history.replaceState({},document.title,s.toString())}catch(s){console.error("tma social login failed",s)}}createAuthProvider(e){var d,p,g,y;if(!ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(d=this.remoteFeatures)==null?void 0:d.email,s=Array.isArray((p=this.remoteFeatures)==null?void 0:p.socials)&&this.remoteFeatures.socials.length>0,i=r||s,l=rr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((g=this.options)!=null&&g.projectId)&&i&&(this.authProvider=Hm.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(y=this.getCaipNetwork(l))==null?void 0:y.caipNetworkId,abortController:Hr.EmbeddedWalletAbortController,onTimeout:b=>{b==="iframe_load_failed"?zn.open(Hr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):b==="iframe_request_timeout"?zn.open(Hr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):b==="unverified_domain"&&zn.open(Hr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:b=>M.getActiveCaipNetwork(b)}),Fa.subscribeOpen(b=>{var E;!b&&this.isTransactionStackEmpty()&&((E=this.authProvider)==null||E.rejectRpcRequests())}));const h=e===M.state.activeChain&&we.state.enableReconnect;we.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&h&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var t,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ve.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,l;if(!e)return;const t=M.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===t&&s){const h=this.getAdapter(r),d=Dt.getProvider(r),p=Dt.getProviderId(r);await(h==null?void 0:h.switchNetwork({caipNetwork:e,provider:d,providerType:p})),this.setCaipNetwork(e)}else{const d=Dt.getProviderId(t)===Pt.CONNECTOR_TYPE_AUTH,p=Dt.getProviderId(r),g=p===Pt.CONNECTOR_TYPE_AUTH,y=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((d&&p===void 0||g)&&y)try{if(M.state.activeChain=e.chainNamespace,s){const b=this.getAdapter(r);await(b==null?void 0:b.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}))}else await((l=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:l.call(o,{id:ce.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Pt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const E=this.getAdapter(r);await(E==null?void 0:E.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}))}else if(p===Pt.CONNECTOR_TYPE_WALLET_CONNECT){if(!M.state.noAdapters){const b=this.getAdapter(r),E=Dt.getProvider(r),v=Dt.getProviderId(r);await(b==null?void 0:b.switchNetwork({caipNetwork:e,provider:E,providerType:v}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var t;await super.initialize(e),(t=this.chainNamespaces)==null||t.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Fa.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:r}){var o;const s=`${r}:${t}`,i=(o=this.caipNetworks)==null?void 0:o.find(l=>l.caipNetworkId===s);if(r!==ce.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:l,avatar:h}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(l,r),this.setProfileImage(h,r)}catch{await this.syncReownName(e,r),t!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=Dt.getProviderId(e);if(t===Pt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ve.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Le.isClient()&&!i5)try{const e={...Ft.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),Le.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!we.state.disableAppend&&!we.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}i5=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!Le.isClient())return;const r=[];(t.email||t.socials&&t.socials.length>0)&&r.push(zr(()=>import("./embedded-wallet-2YclrV2_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),t.email&&r.push(zr(()=>import("./email-BGmQjJ51.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),t.socials&&r.push(zr(()=>import("./socials-jslSdM0B.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),t.swaps&&t.swaps.length>0&&r.push(zr(()=>import("./swaps-Cd39021O.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(zr(()=>import("./send-12aOS0zJ.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(zr(()=>import("./receive-DZDoB7X9.js"),__vite__mapDeps([28,1,29,3,19]))),t.onramp&&t.onramp.length>0&&r.push(zr(()=>import("./onramp-Dwkr2rjN.js"),__vite__mapDeps([30,1,31,3,5,10,15,4,16,32,11,9,18,6]))),t.activity&&r.push(zr(()=>import("./transactions-BH-u3LlU.js"),__vite__mapDeps([33,1,34,10,11,3,20]))),e.pay&&r.push(zr(()=>import("./index-BzJRekCm.js"),__vite__mapDeps([35,1,9,5,36,3,10,7,31,27,18]))),await Promise.all([...r,zr(()=>import("./index-DUT5Dot-.js"),__vite__mapDeps([37,1,3,5,26,10,38,23,7,31,9,8,36,34,11,20,22,27,4,6,13,15,16,17,2,18,29,19,32])),zr(()=>import("./w3m-modal-BvDYdmiv.js"),__vite__mapDeps([39,1,7,3,10,8,5,23,38]))])}}let Fc;function mfe(n){n&&(Fc=n)}function rL(){if(!Fc)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function n(t){await(Fc==null?void 0:Fc.open(t))}async function e(){await(Fc==null?void 0:Fc.close())}return{open:n,close:e}}const yfe="1.7.15";let Ru;function wfe(n){return Ru||(Ru=new gfe({...n,sdkVersion:Le.generateSdkVersion(n.adapters??[],"react",yfe)}),mfe(Ru)),Ru}function sL(){const{caipNetwork:n,caipNetworkId:e,chainId:t}=gue();function r(s){Ru==null||Ru.switchNetwork(s)}return{caipNetwork:n,caipNetworkId:e,chainId:t,switchNetwork:r}}const ou={signMessage:async(n,e,t)=>{if(!e)throw new Error("signMessage - provider is undefined");const r=on(n)?n:Oe(Ma(n));return await e.request({method:"personal_sign",params:[r,t]})},estimateGas:async(n,e,t,r)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!t)throw new Error("estimateGas - address is undefined");if(n.chainNamespace&&n.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:n.address,to:n.to,data:n.data,type:0},i=new pf(e,r);return await new ff(i,t).estimateGas(s)},sendTransaction:async(n,e,t,r)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!t)throw new Error("sendTransaction - address is undefined");if(n.chainNamespace&&n.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:n.to,value:n.value,gasLimit:n.gas,gasPrice:n.gasPrice,data:n.data,type:0},i=new pf(e,r),h=await(await new ff(i,t).sendTransaction(s)).wait();return(h==null?void 0:h.hash)||null},writeContract:async(n,e,t,r)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!t)throw new Error("writeContract - address is undefined");const s=new pf(e,r),i=new ff(s,t),o=new eh(n.tokenAddress,n.abi,i);if(!o||!n.method)throw new Error("Contract method is undefined");const l=o[n.method];if(l)return await l(...n.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:n=>{try{return JSON.parse(n)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:B7,formatUnits:T5};class bfe extends nL{constructor(){super({adapterType:ce.ADAPTER_TYPES.ETHERS,namespace:ce.CHAIN.EVM}),this.balancePromises={}}async createEthersConfig(e){if(!e.metadata)return;let t;function r(){if(t)return t;if(!(typeof window>"u")&&window.ethereum)return t=window.ethereum,t}async function s(){const{SafeProvider:l}=await zr(async()=>{const{SafeProvider:y}=await import("./SafeProvider-D6Gtasli.js");return{SafeProvider:y}},__vite__mapDeps([40,41,42])),{default:h}=await zr(async()=>{const{default:y}=await import("./index-BRs_Oh5P.js");return{default:y}},__vite__mapDeps([43,41])),d=new h,p=await d.safe.getInfo(),g=new l(p,d);return await g.connect().catch(y=>{console.info("Failed to auto-connect to Safe:",y)}),g}async function i(){var l,h,d;try{const{createCoinbaseWalletSDK:p}=await zr(async()=>{const{createCoinbaseWalletSDK:y}=await import("./index-RtP0vSO5.js");return{createCoinbaseWalletSDK:y}},__vite__mapDeps([44,42]));return typeof window>"u"?void 0:p({appName:(l=e==null?void 0:e.metadata)==null?void 0:l.name,appLogoUrl:(h=e==null?void 0:e.metadata)==null?void 0:h.icons[0],appChainIds:((d=e.networks)==null?void 0:d.map(y=>y.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(p){console.error("Failed to import Coinbase Wallet SDK:",p);return}}const o={metadata:e.metadata};if(e.enableInjected!==!1&&(o.injected=r()),e.enableCoinbase!==!1){const l=await i();l&&(o.coinbase=l)}if(Le.isSafeApp()){const l=await s();l&&(o.safe=l)}return o.EIP6963=e.enableEIP6963!==!1,o}async signMessage(e){const{message:t,address:r,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await ou.signMessage(t,s,r)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var r;if(!e.provider)throw new Error("Provider is undefined");return{hash:await ou.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:Fe.state.address},e.provider,Fe.state.address,Number((r=e.caipNetwork)==null?void 0:r.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:t}=qr.parseCaipAddress(e.caipAddress);return{hash:await ou.writeContract(e,e.provider,t,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:t,caipNetwork:r,address:s}=e;if(!t)throw new Error("Provider is undefined");try{return{gas:await ou.estimateGas({data:e.data,to:e.to,address:s},t,s,Number(r==null?void 0:r.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return ou.parseUnits(e.value,e.decimals)}formatUnits(e){return ou.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:t,chainId:r}=e,s=this.connectors.find(h=>h.id===t),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),l=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(t,i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(l)||Number(r),provider:i,type:s.type,id:t}}async syncConnectors(e){var r;this.ethersConfig=await this.createEthersConfig(e),(r=this.ethersConfig)!=null&&r.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var l,h;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===ce.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:ka.ConnectorExplorerIds[i],imageUrl:(l=e==null?void 0:e.connectorImages)==null?void 0:l[i],name:ka.ConnectorNamesMap[i]||"Unknown",imageId:ka.ConnectorImageIds[i],type:ka.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(h=this.ethersConfig)==null?void 0:h[s]})})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async t=>{const r=this.connectors.find(s=>rr.isLowerCaseMatch(s.id,t.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),t}))}}async syncConnections({connectToFirstConnector:e,getConnectorStorageInfo:t}){var r;await((r=this.connectionManager)==null?void 0:r.syncConnections({connectors:this.connectors,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenProviderEvents.bind(this),getConnectionStatusInfo(s){return t(s)}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const t=ce.CONNECTOR_ID.WALLET_CONNECT;return Ha.listenWcProvider({universalProvider:e,namespace:ce.CHAIN.EVM,onConnect:r=>this.onConnect(r,t),onDisconnect:()=>this.onDisconnect(t),onAccountsChanged:r=>this.onAccountsChanged(r,t,!1),onChainChanged:r=>this.onChainChanged(r,t)}),this.addConnector(new Yx({provider:e,caipNetworks:this.getCaipNetworks(),namespace:ce.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){var t;if(e.detail){const{info:r,provider:s}=e.detail;if(!((t=this.connectors)==null?void 0:t.find(o=>o.name===(r==null?void 0:r.name)))){const o=ka.ConnectorTypesMap[ce.CONNECTOR_ID.EIP6963],l=(r==null?void 0:r.rdns)||(r==null?void 0:r.name)||(r==null?void 0:r.uuid);this.namespace&&l&&this.addConnector({id:l,type:o,imageUrl:r==null?void 0:r.icon,name:(r==null?void 0:r.name)||"Unknown",provider:s,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const t=this.eip6963EventHandler.bind(this);window.addEventListener(Pt.EIP6963_ANNOUNCE_EVENT,t),window.dispatchEvent(new Event(Pt.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:t,type:r,chainId:s,socialUri:i}){var g;const o=this.connectors.find(y=>rr.isLowerCaseMatch(y.id,e));if(!o)throw new Error("Connector not found");const l=(g=this.connectionManager)==null?void 0:g.getConnection({address:t,connectorId:e,connections:this.connections,connectors:this.connectors});if(l){const y=l.caipNetwork;if(!y)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(l.account)return this.emit("accountChanged",{address:l.account.address,chainId:y.id,connector:o}),{address:l.account.address,chainId:y.id,provider:o.provider,type:o.type,id:e}}const h=o==null?void 0:o.provider;if(!h)throw new Error("Provider not found");let d=[],p;if(r===Pt.CONNECTOR_TYPE_AUTH){const{address:y,accounts:b}=await js.authConnectorAuthenticate({authConnector:h,chainNamespace:ce.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:Vs("eip155")}),E=this.getCaipNetworks().find(v=>v.id.toString()===(s==null?void 0:s.toString()));d=[y],this.addConnection({connectorId:e,accounts:b?b.map(v=>({address:v.address})):d.map(v=>({address:v})),caipNetwork:E,auth:{name:ve.getConnectedSocialProvider(),username:ve.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:d[0],chainId:Number(s),connector:o})}else{d=await h.request({method:"eth_requestAccounts"}),p=await h.request({method:"eth_chainId"});const y=this.getCaipNetworks().find(b=>b.id.toString()===(s==null?void 0:s.toString()));if(p!==s){if(!y)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:y,provider:h,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:d[0],chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:d.map(b=>({address:b})),caipNetwork:y}),o.id!==ce.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,h)}return{address:d[0],chainId:Number(s),provider:h,type:r,id:e}}async reconnect(e){const{id:t,chainId:r}=e,s=this.connectors.find(i=>i.id===t);s&&s.type==="AUTH"&&r&&await js.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:ce.CHAIN.EVM,chainId:r,preferredAccountType:Vs("eip155")})}async getAccounts(e){var o;const t=this.connectors.find(l=>l.id===e.id),r=t==null?void 0:t.provider;if(!r||!t)throw new Error("Provider not found");const s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:l})=>Le.createAccount(ce.CHAIN.EVM,l,"eoa"))};if(e.id===ce.CONNECTOR_ID.AUTH){const l=t.provider;if(!l.user)return{accounts:[]};const{accounts:h,address:d}=l.user;return Promise.resolve({accounts:(h||[{address:d,type:"eoa"}]).map(p=>Le.createAccount(ce.CHAIN.EVM,p.address,p.type))})}return{accounts:(await r.request({method:"eth_requestAccounts"})).map(l=>Le.createAccount(ce.CHAIN.EVM,l,"eoa"))}}async disconnect(e){var t,r;if(e.id){const s=this.connectors.find(o=>rr.isLowerCaseMatch(o.id,e.id));if(!s)throw new Error("Connector not found");const i=(t=this.connectionManager)==null?void 0:t.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(s.type){case Pt.CONNECTOR_TYPE_WALLET_CONNECT:s.provider.session&&s.provider.disconnect();break;case Pt.CONNECTOR_TYPE_AUTH:await((r=s.provider)==null?void 0:r.disconnect());break;case Pt.CONNECTOR_TYPE_ANNOUNCED:case Pt.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(s.provider);break;default:throw new Error("Unsupported provider type")}return s.id&&(this.removeProviderListeners(s.id),this.deleteConnection(s.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:i?[i]:[]}}return this.disconnectAll()}async getBalance(e){const t=e.address,r=this.getCaipNetworks().find(s=>{var i;return s.id.toString()===((i=e.chainId)==null?void 0:i.toString())});if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&r.chainNamespace===ce.CHAIN.EVM){const s=`${r.caipNetworkId}:${t}`,i=this.balancePromises[s];if(i)return i;const o=ve.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const l=new YH(r.rpcUrls.default.http[0],{chainId:r.id,name:r.name});if(l)try{return this.balancePromises[s]=new Promise(async h=>{try{const d=await l.getBalance(t),p=L7(d);ve.updateNativeBalanceCache({caipAddress:s,balance:p,symbol:r.nativeCurrency.symbol,timestamp:Date.now()}),h({balance:p,symbol:r.nativeCurrency.symbol})}catch{h({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){var i,o;const{caipNetwork:t,provider:r,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await r.request({method:"wallet_switchEthereumChain",params:[{chainId:bf.numberToHexString(t.id)}]})}catch(l){if(l.code===$o.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===$o.ERROR_INVALID_CHAIN_ID||l.code===$o.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===$o.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await bf.addEthereumChain(r,t);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(t=>t.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(t){console.info("Could not revoke permissions from wallet. Disconnecting...",t)}}async getCapabilities(e){var s,i;const t=Dt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");const r=(i=(s=t.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(r){const l=ou.parseWalletCapabilities(r)[e];if(l)return l}return await t.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const t=Dt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const t=Dt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const t=Dt.getProvider(ce.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_getAssets",params:[e]})}}const Efe="357b7e54a01a9e3492feb9855d2ab152",vfe=[v2,A2,C2,x2,_2,S2],Afe={name:"Kaeru CAPTCHA",description:"CAPTCHA leveraging the TEE technology",url:"https://quex-tech.github.io/captcha-frontend-test/",icons:[]},a5=wfe({adapters:[new bfe],networks:vfe,metadata:Afe,projectId:Efe,features:{analytics:!1}});async function Cfe(n,e){const r=await _fe().getSigner();return new eh(n,e,r)}function _fe(){if(!a5.getIsConnectedState())throw new Error("Not connected");const n=a5.getProvider("eip155");if(!n)throw new Error("No provider");return new pf(n)}async function Sfe(n,e){const t=await Cfe(n.flowRegistryAddress,["function getQuexFee(uint256 flowId) external view returns (uint256)",`function pushData(
      (
        uint256 actionId,
        (uint256 timestamp, uint256 err, bytes value) dataItem,
        address relayer
      ) memory msg,
      (bytes32 r, bytes32 s, uint8 v) memory sig,
      uint256 flowId,
      uint256 tdId
      ) external payable`]),r=await t.getQuexFee(n.flowId),s=Yr.from(e.sig);return t.pushData({actionId:BigInt(e.msg.actionId),dataItem:{timestamp:BigInt(e.msg.dataItem.timestamp),err:BigInt(e.msg.dataItem.error),value:e.msg.dataItem.value},relayer:e.msg.relayer},{r:s.r,s:s.s,v:s.v},n.flowId,e.tdId??n.tdId,{value:r,gasLimit:8e5})}function xfe(){const{chainId:n}=sL(),{open:e}=rL();if(N2.length<2)return null;const t=N2.find(r=>r.chainId==n);return t?ue.jsxs("p",{className:"network-switcher",children:[t.name,ue.jsx("br",{}),ue.jsx("a",{href:"/",onClick:r=>{r.preventDefault(),e({view:"Networks"})},children:"Switch network"})]}):null}const Qx="/captcha-frontend-test/terms.pdf";function Nfe({navigate:n}){const{open:e}=rL(),{address:t,isConnected:r}=mue(),{chainId:s}=sL(),[i,o]=fe.useState(null),[l,h]=fe.useState(null),[d,p]=fe.useState(null),[g,y]=fe.useState(null),b=s!==void 0?Gq(BigInt(s)):null,E=async v=>{if(o(v),!!b)try{const A=await Sfe(b,v);h(A),p(await A.wait())}catch(A){console.error(A),y(`An error has occurred. In case your transaction was successful, please find your token on <a href="${b.nftCollectionUrl}" target="_blank" rel="noopener">OpenSea</a> and in your wallet app`)}};return ue.jsxs("div",{className:"home",children:[ue.jsx("img",{className:"logo",src:u5,alt:"Kaeru Logo"}),ue.jsxs("div",{className:"card",children:[!r&&ue.jsx("button",{className:"btn-large",onClick:()=>e(),children:"connect wallet"}),t&&r&&s&&!i&&ue.jsxs(ue.Fragment,{children:[b&&ue.jsx(p5,{address:zt(t),chainId:BigInt(s),onSuccess:E}),!b&&ue.jsxs("p",{className:"text-small",children:["Unsupported network."," ",ue.jsx("a",{href:"/",onClick:v=>{v.preventDefault(),e({view:"Networks"})},children:"Switch"})]}),b&&ue.jsx(xfe,{})]}),i&&ue.jsx(nj,{oracleNetwork:b,txResponse:l,txReceipt:d}),g&&ue.jsx("p",{dangerouslySetInnerHTML:{__html:g},className:"error text-small"}),ue.jsxs("div",{className:"logos",children:[ue.jsxs("div",{className:"secret-logo",children:[ue.jsx("p",{children:"powered by"}),ue.jsx("a",{href:"https://scrt.network/",target:"_blank",rel:"noopener",children:ue.jsx("img",{src:h5,alt:"Secret Logo"})})]}),ue.jsxs("div",{className:"quex-logo",children:[ue.jsx("p",{children:"verified by"}),ue.jsx("a",{href:"https://quex.tech/",target:"_blank",rel:"noopener",children:ue.jsx("img",{src:d5,alt:"Quex Logo"})})]})]}),ue.jsx("a",{className:"btn btn-large btn-secondary",href:`${"/captcha-frontend-test".replace(/\/$/,"")}/how-it-works/`,onClick:v=>{v.preventDefault(),n("/how-it-works/")},children:"how it works"})]}),ue.jsx("p",{children:ue.jsx("a",{href:Qx,className:"text-small",target:"_blank",children:"Terms of Use"})})]})}const Tfe="/captcha-frontend-test/scheme.svg";function Ife({navigate:n}){return ue.jsxs("div",{className:"about",children:[ue.jsx("a",{href:"",onClick:e=>{e.preventDefault(),n("/")},children:"Home"}),ue.jsx("h1",{children:"How it works"}),ue.jsx("p",{children:"Kaeru is a Proof-of-Concept project leveraging the Trusted Execution Environment (TEE) technology together with the EVM-based decentralized verification by Quex and Secret Network."}),ue.jsx("h2",{id:"what-is-it-about",children:"What is it about?"}),ue.jsx("p",{children:"Kaeru provides an on-chain evidence for the CAPTCHA solution. The server generating and verifying the CAPTCHA puzzles resides inside a Confidential Virtual Machine using TEE technology (specifically, Intel Trust Domain Extensions TDX). Once the user successfully solves the CAPTCHA puzzle, the machine generates a digitally signed message which is delivered on-chain. After the set of smart-contracts performed the signature verification and checked that a message indeed originated from the TD with the pre-defined code, a non-fungible token is minted to the party who solved the puzzle."}),ue.jsx("h2",{id:"role-of-the-confidential-vm",children:"Role of the Confidential VM"}),ue.jsx("p",{children:"The solution uses Confidential VMs relying on Trust Domain Extensions technology by Intel. TDX allows one to start the virtual machines residing in an encrypted memory region, such that only the CPU itself is capable of decrypting the private VM pages. The Trust Domain (which is the term for such an encrypted VM) becomes protected not only from the external attacker, but also from the host machine, including the host owner with physical access and superuser privileges on the host. In case the TD is set up with a minimal set of devices and no prescribed access (for example, no console, no ssh service etc), it also becomes protected from its creator."}),ue.jsx("p",{children:"The integrity of the deployed TD can be verified using the process known as remote attestation. During the remote attestation, the CPU issues the quote containing the measurements of the TD (hashes of the VM initialization process and hashes of the runtime memory measurements). This quote gets signed by a keychain (with lowest keys belonging to the CPU), which can be traced back to the vendor's certificate authority."}),ue.jsx("p",{children:"By verifying the set of signatures on the quote and the attestation report and checking the measurements, one can verify that the Confidential VM is running the specific source code it is expected to run, and thus to make sure that execution flow was not tampered with. If the VM has no known vulnerabilities, no ways to log in, and was instantiated correctly, this quote becomes a sound proof of genuine code execution."}),ue.jsxs("p",{children:["The solution uses the"," ",ue.jsx("a",{href:"https://docs.scrt.network/secret-network-documentation/secretvm-confidential-virtual-machines/verifiable-message-signing",target:"_blank",rel:"noopener",children:"Verifiable Message Signing"})," ","scheme. If the machine has exclusive access to the secret key, the corresponding public key can be inserted in the quote, which effectively turns the quote into this key certificate. Now, the messages signed with this key are known to have originated from the particular software. Moreover, if the key management system (KMS) is designed properly, no other party can obtain the same key and forge signature."]}),ue.jsx("h2",{id:"infrastructure",children:"Infrastructure"}),ue.jsxs("p",{children:["Kaeru hosts the CAPTCHA generating and verifying service inside TD on Secret's SecretVM, available at SecretAI Developer Portal (",ue.jsx("a",{href:"https://secretai.scrtlabs.com",target:"_blank",rel:"noopener",children:"https://secretai.scrtlabs.com"}),") The private key is held by Secret’s on-chain Key Management Service, and can only be accessed by the TD itself, so no person or company or bot can forge the signature (if the hardware security guarantees hold). In order to provide fault tolerance, there is a backup Trust Domain with the same service running on Quex own infrastructure. These TDs are united in the oracle pool to serve the same data flow on-chain. The corresponding public keys are registered on-chain with the Quex data infrastructure layer (",ue.jsx("a",{href:"https://docs.quex.tech/how-it-works/verification",target:"_blank",children:"https://docs.quex.tech/how-it-works/verification"}),"). In our terminology, the TDs become oracles providing the external data for the on-chain usage. The NFT contract is connected to Quex data infrastructure as a data consumer contract. It is set to only accept the messages originating from this particular oracle pool. The CAPTCHA service is a fork of go-captcha project tailored for use with TDX, SecretVM and Quex."]}),ue.jsx("figure",{style:{position:"relative",textAlign:"center",maxWidth:"70ch"},children:ue.jsx("img",{style:{width:"80%"},src:Tfe,alt:"Diagram showing Kaeru's architecture and workflow"})}),ue.jsx("h2",{id:"user-flow",children:"User Flow"}),ue.jsx("p",{children:"Once a user visits the Kaeru page, the browser accesses the TD for the CAPTCHA puzzle. If a user solves five puzzles in a row successfully, TD returns a signed message containing several data fields (including the connected user wallet address). Then the front-end queries the user wallet to send this data to Quex smart contract. In case the user approves the transaction, the data is sent. Quex contracts verify that the public key corresponding to the signature belongs to the previously attested TD, and the quote was registered beforehand. Then, after a few technical steps, the data is pushed to the callback of the NFT contract. NFT contract verifies the origin of the message and correctness of its routing, and finally mints the token according to the data delivered."}),ue.jsx("h2",{id:"value-added-by-tee",children:"Value added by TEE"}),ue.jsx("p",{children:'With this way of using TEE, one can provide the sound guarantees that NFTs correspond exactly to puzzle solutions. No extra tokens can be issued by anyone, including admins, developers, hosting companies and infrastructure providers. With a slight exaggeration, one can say that we use "Proof of Machinehood" (a term coined by Automata Network, as far as we know) to create the "Proof of Humanhood" on-chain.'}),ue.jsx("h2",{id:"using-kaeru-nft",children:"Using Kaeru NFT"}),ue.jsx("p",{children:"To use the Kaeru NFT in your smart-contract, in addition to ERC721 methods, you can use the following method"}),ue.jsx("p",{children:ue.jsx("code",{children:"function getNFTInfo(uint256 tokenId) external view returns (NFTInfo memory)"})}),ue.jsx("p",{children:"which returns the structure of the form"}),ue.jsx("pre",{children:ue.jsx("code",{children:`struct NFTInfo {
    uint256 generation;
    uint256 counter;
    uint256 seed;
    uint256 timestamp;
    bytes userData;
    address minter;
}`})}),ue.jsxs("p",{children:["Here ",ue.jsx("code",{children:"generation"})," is NFT generation, ",ue.jsx("code",{children:"counter"})," is the sequential number of the NFT inside the generation,"," ",ue.jsx("code",{children:"seed"})," is the unique seed for PRNG used to derive the particular CAPTCHA instance for the token, ",ue.jsx("code",{children:"timestamp"})," is the timestamp, ",ue.jsx("code",{children:"userData"})," is the arbitrary user-supplied data which can be added while minting the token, ",ue.jsx("code",{children:"minter"})," is the address of the account used for the token mint (the first owner of the token). ",ue.jsx("code",{children:"minter"})," does not change on token transfers."]}),ue.jsx("h2",{id:"project-outline",children:"Project Outline"}),ue.jsx("p",{children:"Kaeru is a joint Proof-of-Concept by Quex and Secret Network. With it, we demonstrate practical interoperability of two independent TDX infrastructures, a new practical application of TEE technology, and a set of interfaces for further use. And we mint some NFTs with cute techno-frogs, of course!"}),ue.jsx("h2",{id:"links",children:"Links"}),ue.jsx("p",{children:ue.jsx("a",{href:"https://opensea.io/collection/kaeru-559786994",target:"_blank",rel:"noopener",children:"Kaeru on OpenSea"})}),ue.jsx("p",{children:ue.jsx("a",{href:"https://etherscan.io/token/0xc86B125DA2EDea870a6ef9a135bfeCE4923248bD",target:"_blank",rel:"noopener",children:"Kaeru NFT on Etherscan"})}),ue.jsx("p",{children:ue.jsx("a",{href:"https://quex.tech",target:"_blank",children:"Quex"})}),ue.jsx("p",{children:ue.jsx("a",{href:"https://secretai.scrtlabs.com",target:"_blank",rel:"noopener",children:"SecretAI Developer Portal"})}),ue.jsx("p",{children:ue.jsx("a",{href:Qx,target:"_blank",children:"Terms of Use"})})]})}function Ofe({navigate:n}){return ue.jsxs("div",{className:"home",children:[ue.jsx("img",{className:"logo",src:u5,alt:"Kaeru Logo"}),ue.jsxs("div",{className:"card",children:[ue.jsx(p5,{address:"0x97076a3c0A414E779f7BEC2Bd196D4FdaADFDB96",chainId:11155111n,onSuccess:()=>{alert("Success!")}}),ue.jsxs("div",{className:"logos",children:[ue.jsxs("div",{className:"secret-logo",children:[ue.jsx("p",{children:"powered by"}),ue.jsx("a",{href:"https://scrt.network/",target:"_blank",rel:"noopener",children:ue.jsx("img",{src:h5,alt:"Secret Logo"})})]}),ue.jsxs("div",{className:"quex-logo",children:[ue.jsx("p",{children:"verified by"}),ue.jsx("a",{href:"https://quex.tech/",target:"_blank",rel:"noopener",children:ue.jsx("img",{src:d5,alt:"Quex Logo"})})]})]}),ue.jsx("a",{className:"btn btn-large btn-secondary",href:`${"/captcha-frontend-test".replace(/\/$/,"")}/how-it-works/`,onClick:e=>{e.preventDefault(),n("/how-it-works/")},children:"how it works"})]}),ue.jsx("p",{children:ue.jsx("a",{href:Qx,className:"text-small",target:"_blank",children:"Terms of Use"})})]})}function Rfe(){const n=o5("/captcha-frontend-test"),[e,t]=fe.useState(window.location.pathname);fe.useEffect(()=>{const i=()=>t(window.location.pathname);return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]);const r=i=>{window.history.pushState({},"",n+i),t(n+i)},s=o5(e);return s===n?ue.jsx(Nfe,{navigate:r}):s===n+"/how-it-works"?ue.jsx(Ife,{navigate:r}):s===n+"/captcha-test"?ue.jsx(Ofe,{navigate:r}):ue.jsx("h1",{children:"404 Not Found"})}function o5(n){return n.replace(/\/$/,"")}D9.createRoot(document.getElementById("root")).render(ue.jsx(fe.StrictMode,{children:ue.jsx(Rfe,{})}));export{js as $,Fe as A,We as B,_e as C,e6 as D,Dm as E,Ur as F,ar as G,U2 as H,Vi as I,Dt as J,AG as K,Qb as L,Ut as M,wG as N,we as O,qr as P,vE as Q,tt as R,La as S,gs as T,rr as U,jpe as V,Gn as W,Ve as X,OS as Y,Zd as Z,mV as _,Xb as a,iy as a0,$pe as a1,nr as a2,zb as a3,Fpe as a4,YB as a5,RS as a6,Sp as a7,zr as a8,A9 as a9,hh as aA,mE as aB,jfe as aC,Hfe as aD,Jj as aE,AV as aa,Yt as ab,Cl as ac,wq as ad,mU as ae,vq as af,Ct as ag,$fe as ah,fh as ai,dh as aj,ij as ak,cj as al,rj as am,gU as an,fy as ao,Pp as ap,th as aq,gl as ar,Rl as as,zfe as at,eq as au,xU as av,Ffe as aw,ex as ax,s0 as ay,yE as az,Ft as b,ce as c,Le as d,Kt as e,Vs as f,Mo as g,M as h,yf as i,Hpe as j,qs as k,Te as l,Pt as m,zde as n,zn as o,Hde as p,ve as q,zpe as r,Hr as s,$t as t,XU as u,un as v,Ys as w,Mpe as x,QG as y,fx as z};
